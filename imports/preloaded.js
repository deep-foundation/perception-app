export default {
  "packages": [
    {
      "id": 573,
      "type_id": 146,
      "from_id": 553,
      "to_id": 97,
      "value": {
        "id": 223,
        "value": "🏷",
        "link_id": 573
      }
    },
    {
      "id": 656,
      "type_id": 3,
      "from_id": 553,
      "to_id": 655,
      "value": {
        "id": 306,
        "value": "ValueSymbol",
        "link_id": 656
      }
    },
    {
      "id": 657,
      "type_id": 146,
      "from_id": 553,
      "to_id": 3,
      "value": {
        "id": 307,
        "value": "🗂",
        "link_id": 657
      }
    },
    {
      "id": 658,
      "type_id": 3,
      "from_id": 553,
      "to_id": 657,
      "value": {
        "id": 308,
        "value": "ContainSymbol",
        "link_id": 658
      }
    },
    {
      "id": 659,
      "type_id": 146,
      "from_id": 553,
      "to_id": 2,
      "value": {
        "id": 309,
        "value": "📦",
        "link_id": 659
      }
    },
    {
      "id": 660,
      "type_id": 3,
      "from_id": 553,
      "to_id": 659,
      "value": {
        "id": 310,
        "value": "PackageSymbol",
        "link_id": 660
      }
    },
    {
      "id": 661,
      "type_id": 146,
      "from_id": 553,
      "to_id": 1,
      "value": {
        "id": 311,
        "value": "⭐️",
        "link_id": 661
      }
    },
    {
      "id": 880,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 365,
        "value": "({ deep, require }) => {\n    const React = require('react');\n    const { useState } = require('react');\n    const axiosHooks = require(\"axios-hooks\");\n    const axios = require(\"axios\");\n    const useAxios = axiosHooks.makeUseAxios({ axios: axios.create() });\n    return ({ fillSize, style, link }) => {\n        const ssl = deep.apolloClient.ssl;\n        const path = deep.apolloClient.path.slice(0, -4);\n        const url = `${ssl ? \"https://\" : \"http://\"}${path}/file?linkId=${link.id}`;\n        const [{ data, loading, error }, refetch] = useAxios({\n            method: 'get',\n            url,\n            headers: {\n                'Authorization': `Bearer ${deep.token}`\n            },\n            responseType: \"blob\",\n        });\n        const [src, setSrc] = useState(\"test\");\n        if (!loading && data) {\n            const reader = new window.FileReader();\n            reader.onload = () => {\n                setSrc(reader.result);\n            };\n            reader.readAsDataURL(data);\n        }\n        const renderMedia = () => {\n            if (src.startsWith('data:image')) {\n                return React.createElement(\"img\", { src: src, alt: \"An image from Deep file storage.\", style: style });\n            }\n            else if (src.startsWith('data:audio')) {\n                return React.createElement(\"audio\", { src: src, controls: true, style: style }, \"Your browser does not support the audio element.\");\n            }\n            else {\n                return React.createElement(\"div\", null, \"Unsupported file type.\");\n            }\n        };\n        return renderMedia();\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxDQUFDLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxFQUFFLEVBQUU7SUFDcEIsTUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQy9CLE1BQU0sRUFBRSxRQUFRLEVBQUUsR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDdEMsTUFBTSxVQUFVLEdBQUcsT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFDO0lBQzFDLE1BQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUMvQixNQUFNLFFBQVEsR0FBRyxVQUFVLENBQUMsWUFBWSxDQUFDLEVBQUUsS0FBSyxFQUFFLEtBQUssQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFFcEUsT0FBTyxDQUFDLEVBQUUsUUFBUSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFO1FBRW5DLE1BQU0sR0FBRyxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUMsR0FBRyxDQUFDO1FBQ2xDLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNqRCxNQUFNLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxTQUFTLEdBQUcsSUFBSSxnQkFBZ0IsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDO1FBRTVFLE1BQU0sQ0FBQyxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLEVBQUUsT0FBTyxDQUFDLEdBQUcsUUFBUSxDQUFDO1lBQ25ELE1BQU0sRUFBRSxLQUFLO1lBQ2IsR0FBRztZQUNILE9BQU8sRUFBRTtnQkFDUCxlQUFlLEVBQUUsVUFBVSxJQUFJLENBQUMsS0FBSyxFQUFFO2FBQ3hDO1lBRUQsWUFBWSxFQUFFLE1BQU07U0FDckIsQ0FBQyxDQUFDO1FBRUgsTUFBTSxDQUFDLEdBQUcsRUFBRSxNQUFNLENBQUMsR0FBRyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDdkMsSUFBSSxDQUFDLE9BQU8sSUFBSSxJQUFJLEVBQUUsQ0FBQztZQUNyQixNQUFNLE1BQU0sR0FBRyxJQUFJLE1BQU0sQ0FBQyxVQUFVLEVBQUUsQ0FBQztZQUN2QyxNQUFNLENBQUMsTUFBTSxHQUFHLEdBQUcsRUFBRTtnQkFDbkIsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUN4QixDQUFDLENBQUE7WUFDRCxNQUFNLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzdCLENBQUM7UUFFRCxNQUFNLFdBQVcsR0FBRyxHQUFHLEVBQUU7WUFDdkIsSUFBSSxHQUFHLENBQUMsVUFBVSxDQUFDLFlBQVksQ0FBQyxFQUFFLENBQUM7Z0JBQ2pDLE9BQU8sNkJBQUssR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUMsa0NBQWtDLEVBQUMsS0FBSyxFQUFFLEtBQUssR0FBUSxDQUFDO1lBQ3BGLENBQUM7aUJBQU0sSUFBSSxHQUFHLENBQUMsVUFBVSxDQUFDLFlBQVksQ0FBQyxFQUFFLENBQUM7Z0JBQ3hDLE9BQU8sK0JBQU8sR0FBRyxFQUFFLEdBQUcsRUFBRSxRQUFRLFFBQUMsS0FBSyxFQUFFLEtBQUssdURBQTBELENBQUM7WUFDMUcsQ0FBQztpQkFBTSxDQUFDO2dCQUNOLE9BQU8sMERBQWlDLENBQUM7WUFDM0MsQ0FBQztRQUNILENBQUMsQ0FBQTtRQUVELE9BQU8sV0FBVyxFQUFFLENBQUM7SUFDdkIsQ0FBQyxDQUFBO0FBQ0gsQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiKHsgZGVlcCwgcmVxdWlyZSB9KSA9PiB7XG4gIGNvbnN0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbiAgY29uc3QgeyB1c2VTdGF0ZSB9ID0gcmVxdWlyZSgncmVhY3QnKTtcbiAgY29uc3QgYXhpb3NIb29rcyA9IHJlcXVpcmUoXCJheGlvcy1ob29rc1wiKTtcbiAgY29uc3QgYXhpb3MgPSByZXF1aXJlKFwiYXhpb3NcIik7XG4gIGNvbnN0IHVzZUF4aW9zID0gYXhpb3NIb29rcy5tYWtlVXNlQXhpb3MoeyBheGlvczogYXhpb3MuY3JlYXRlKCkgfSk7XG5cbiAgcmV0dXJuICh7IGZpbGxTaXplLCBzdHlsZSwgbGluayB9KSA9PiB7XG5cbiAgICBjb25zdCBzc2wgPSBkZWVwLmFwb2xsb0NsaWVudC5zc2w7XG4gICAgY29uc3QgcGF0aCA9IGRlZXAuYXBvbGxvQ2xpZW50LnBhdGguc2xpY2UoMCwgLTQpO1xuICAgIGNvbnN0IHVybCA9IGAke3NzbCA/IFwiaHR0cHM6Ly9cIiA6IFwiaHR0cDovL1wifSR7cGF0aH0vZmlsZT9saW5rSWQ9JHtsaW5rLmlkfWA7XG5cbiAgICBjb25zdCBbeyBkYXRhLCBsb2FkaW5nLCBlcnJvciB9LCByZWZldGNoXSA9IHVzZUF4aW9zKHsgXG4gICAgICBtZXRob2Q6ICdnZXQnLFxuICAgICAgdXJsLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHtkZWVwLnRva2VufWBcbiAgICAgIH0sXG4gICAgICBcbiAgICAgIHJlc3BvbnNlVHlwZTogXCJibG9iXCIsXG4gICAgfSk7XG5cbiAgICBjb25zdCBbc3JjLCBzZXRTcmNdID0gdXNlU3RhdGUoXCJ0ZXN0XCIpO1xuICAgIGlmICghbG9hZGluZyAmJiBkYXRhKSB7XG4gICAgICBjb25zdCByZWFkZXIgPSBuZXcgd2luZG93LkZpbGVSZWFkZXIoKTtcbiAgICAgIHJlYWRlci5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICAgIHNldFNyYyhyZWFkZXIucmVzdWx0KTtcbiAgICAgIH1cbiAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGRhdGEpO1xuICAgIH1cblxuICAgIGNvbnN0IHJlbmRlck1lZGlhID0gKCkgPT4ge1xuICAgICAgaWYgKHNyYy5zdGFydHNXaXRoKCdkYXRhOmltYWdlJykpIHtcbiAgICAgICAgcmV0dXJuIDxpbWcgc3JjPXtzcmN9IGFsdD1cIkFuIGltYWdlIGZyb20gRGVlcCBmaWxlIHN0b3JhZ2UuXCIgc3R5bGU9e3N0eWxlfT48L2ltZz47XG4gICAgICB9IGVsc2UgaWYgKHNyYy5zdGFydHNXaXRoKCdkYXRhOmF1ZGlvJykpIHtcbiAgICAgICAgcmV0dXJuIDxhdWRpbyBzcmM9e3NyY30gY29udHJvbHMgc3R5bGU9e3N0eWxlfT5Zb3VyIGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCB0aGUgYXVkaW8gZWxlbWVudC48L2F1ZGlvPjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiA8ZGl2PlVuc3VwcG9ydGVkIGZpbGUgdHlwZS48L2Rpdj47XG4gICAgICB9XG4gICAgfSBcblxuICAgIHJldHVybiByZW5kZXJNZWRpYSgpO1xuICB9XG59XG4iXX0=",
        "link_id": 880
      }
    },
    {
      "id": 881,
      "type_id": 3,
      "from_id": 810,
      "to_id": 880,
      "value": {
        "id": 364,
        "value": "generated",
        "link_id": 881
      }
    },
    {
      "id": 882,
      "type_id": 143,
      "from_id": 880,
      "to_id": 810
    },
    {
      "id": 883,
      "type_id": 3,
      "from_id": 810,
      "to_id": 882
    },
    {
      "id": 819,
      "type_id": 3,
      "from_id": 813,
      "to_id": 800,
      "value": {
        "id": 368,
        "value": "editorHandleClientSyncTextFile",
        "link_id": 819
      }
    },
    {
      "id": 827,
      "type_id": 3,
      "from_id": 813,
      "to_id": 808,
      "value": {
        "id": 376,
        "value": "stringPackageQueryHandleClient",
        "link_id": 827
      }
    },
    {
      "id": 828,
      "type_id": 3,
      "from_id": 813,
      "to_id": 809,
      "value": {
        "id": 377,
        "value": "stringJoinHandleClient",
        "link_id": 828
      }
    },
    {
      "id": 829,
      "type_id": 3,
      "from_id": 813,
      "to_id": 806,
      "value": {
        "id": 378,
        "value": "stringHandler",
        "link_id": 829
      }
    },
    {
      "id": 925,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 391,
        "value": "async ({ deep, require }) => {\n    const React = require('react');\n    const { useState, useEffect, useRef } = React;\n    const { Text, Box, Button, Link, Input, VStack, useColorModeValue } = require('@chakra-ui/react');\n    const { ExternalLinkIcon } = require('@chakra-ui/icons');\n    const { useEditorTabs, useCytoEditor } = require('@deep-foundation/deepcase');\n    const Publish = await deep.id('@deep-foundation/npm-packager', 'Publish');\n    return ({ fillSize, style, link, setHandlerId }) => {\n        const axiosHooks = require(\"axios-hooks\");\n        const axios = require(\"axios\");\n        const useAxios = axiosHooks.makeUseAxios({ axios: axios.create() });\n        const packageId = link.id;\n        const packageTypeId = deep.idLocal('@deep-foundation/core', 'Package');\n        const packageNamespaceTypeId = deep.idLocal('@deep-foundation/core', 'PackageNamespace');\n        const packageVersionTypeId = deep.idLocal('@deep-foundation/core', 'PackageVersion');\n        const packageActiveTypeId = deep.idLocal('@deep-foundation/core', 'PackageActive');\n        const packageQueryTypeId = deep.idLocal('@deep-foundation/core', 'PackageQuery');\n        const { data: prefetchedNpmPackageLinks } = deep.useDeepSubscription({\n            up: {\n                parent: {\n                    type_id: { _eq: packageTypeId },\n                    string: { value: { _in: [\"@deep-foundation/npm-packager\"] } }\n                }\n            }\n        });\n        const { data: prefetchedPackageActiveLinksAndNamespace } = deep.useDeepSubscription({\n            type_id: { _in: [packageNamespaceTypeId, packageVersionTypeId, packageTypeId, packageActiveTypeId] }\n        });\n        const pkg = deep.minilinks.byId[packageId];\n        const pkgVersion = pkg?.in?.filter(v => v.type_id === packageVersionTypeId)?.[0];\n        const pkgVersionValue = pkgVersion?.value?.value || \"\";\n        const packageNamespaceId = pkgVersion?.from_id;\n        const packageName = pkg?.value?.value || \"\";\n        const [currentPackageName, setCurrentPackageName] = useState(packageName);\n        const [currentPackageVersion, setCurrentPackageVersion] = useState(pkgVersionValue);\n        let packageUrl = `https://registry.npmjs.com/${currentPackageName}`;\n        let displayUrl = `npmjs.com/package/${currentPackageName}`;\n        const { data: [Published], loading: pubLoading } = deep.useDeepSubscription({\n            type_id: Publish,\n            from_id: link.id,\n            order_by: { id: 'desc' },\n            limit: 1,\n        });\n        const { data: [Result], loading: resLoading } = deep.useDeepSubscription(Published ? {\n            type_id: { _in: [\n                    deep.idLocal('@deep-foundation/core', 'Rejected'),\n                    deep.idLocal('@deep-foundation/core', 'Resolved'),\n                ] },\n            up: {\n                tree_id: deep.idLocal('@deep-foundation/core', 'promiseTree'),\n                parent_id: Published?.id,\n            },\n            limit: 1,\n        } : { id: 0 });\n        const publishingLoading = pubLoading || resLoading;\n        const bg = useColorModeValue('#eeeeee', '#1e1e1e');\n        const borderColor = useColorModeValue('#a3a3a3', '#4d4d4d');\n        const { addTab, activeTab } = useEditorTabs();\n        const [cytoEditor, setCytoEditor] = useCytoEditor();\n        const [disabled, setDisabled] = useState(false);\n        const resultRef = useRef();\n        useEffect(() => {\n            if (!!Result && Result?.id != resultRef?.current?.id && disabled) {\n                setDisabled(false);\n                setCurrentPackageVersion(pkgVersionValue);\n            }\n            if (!!Result && Result?.id != resultRef?.current?.id) {\n                resultRef.current = Result;\n            }\n        }, [Result]);\n        return (React.createElement(\"div\", { style: {\n                ...style,\n                position: 'relative',\n            } },\n            React.createElement(Box, { maxW: 'md', minW: 'sm', w: 'sm', borderColor: borderColor, borderWidth: '1px', borderRadius: 'lg', overflow: 'hidden', bg: bg },\n                displayUrl ? React.createElement(Box, { p: 2 },\n                    React.createElement(Link, { fontSize: 'xs', href: `https://${displayUrl}`, isExternal: true },\n                        displayUrl,\n                        \" \",\n                        React.createElement(ExternalLinkIcon, { mx: '2px' })),\n                    \" \") : null,\n                React.createElement(VStack, { p: 2 },\n                    React.createElement(Input, { placeholder: 'package name', value: currentPackageName, borderColor: borderColor, size: 'sm', onChange: (e) => setCurrentPackageName(e.target.value) }),\n                    React.createElement(Input, { placeholder: 'package version', value: currentPackageVersion, borderColor: borderColor, size: 'sm', onChange: (e) => setCurrentPackageVersion(e.target.value) }),\n                    React.createElement(Button, { colorScheme: 'blue', size: 'sm', w: '100%', disabled: disabled, isLoading: disabled, onClick: async () => {\n                            let actualNamespaceId = packageNamespaceId;\n                            if (!packageNamespaceId && currentPackageName) {\n                                const { data: [packageNamespaceLink] } = await deep.insert({\n                                    type_id: packageNamespaceTypeId,\n                                    string: { data: { value: currentPackageName } },\n                                }, { returning: deep.selectReturning });\n                                deep.minilinks.apply([packageNamespaceLink]);\n                                actualNamespaceId = packageNamespaceLink.id;\n                            }\n                            else if (currentPackageName) {\n                                const { data: [{ link: packageNamespaceLink }] } = await deep.update({ link_id: packageNamespaceId }, { value: currentPackageName }, { table: 'strings', returning: `link { ${deep.selectReturning} }` });\n                                deep.minilinks.apply([packageNamespaceLink]);\n                                actualNamespaceId = packageNamespaceId;\n                            }\n                            const packageActiveLinks = deep.minilinks.byId[actualNamespaceId]?.out?.filter(l => l.type_id == packageActiveTypeId) || [];\n                            if (!packageActiveLinks?.length) {\n                                const { data: [packageActiveLink] } = await deep.insert({\n                                    from_id: actualNamespaceId,\n                                    type_id: packageActiveTypeId,\n                                    to_id: packageId,\n                                }, { returning: deep.selectReturning });\n                                deep.minilinks.apply([packageActiveLink]);\n                            }\n                            if (currentPackageName) {\n                                if (pkg?.value?.value) {\n                                    await deep.update({ link_id: pkg?.id }, { value: currentPackageName }, { table: 'strings' });\n                                }\n                                else {\n                                    await deep.insert({\n                                        link_id: pkg?.id,\n                                        value: currentPackageName\n                                    }, { table: 'strings' });\n                                }\n                            }\n                            if (!pkgVersion?.id) {\n                                const { data: [{ id: packageVersionId }] } = await deep.insert({\n                                    from_id: actualNamespaceId,\n                                    type_id: packageVersionTypeId,\n                                    to_id: pkg?.id,\n                                    string: { data: { value: currentPackageVersion || '0.0.0' } },\n                                });\n                            }\n                            else if (currentPackageVersion) {\n                                await deep.update({ link_id: pkgVersion?.id }, { value: currentPackageVersion }, { table: 'strings' });\n                            }\n                        } }, \"save\"),\n                    React.createElement(Button, { colorScheme: 'blue', size: 'sm', w: '100%', disabled: disabled, isLoading: disabled, onClick: async () => {\n                            if (!(prefetchedNpmPackageLinks?.length > 0)) {\n                                return;\n                            }\n                            const { data: [{ id: packageQueryId }] } = await deep.insert({\n                                type_id: packageQueryTypeId,\n                                string: { data: { value: currentPackageName } },\n                            });\n                            const { data: [{ id: publishId }] } = await deep.insert({\n                                from_id: pkg?.id,\n                                type_id: Publish,\n                                to_id: packageQueryId\n                            });\n                            setDisabled(true);\n                        } }, \"publish\"),\n                    !!Published && React.createElement(Button, { isLoading: !!Published && (!Result || publishingLoading), variant: \"outline\", colorScheme: publishingLoading ? 'default' : Result ? Result.type_id === deep.idLocal('@deep-foundation/core', 'Resolved') ? 'green' : 'red' : 'default', loadingText: publishingLoading ? 'Loading' : 'Publishing', disabled: true, onClick: async () => {\n                            if (Result) {\n                                addTab({\n                                    id: Result.to_id,\n                                    initialValue: deep.stringify((await deep.select(Result.to_id))?.data?.[0]?.value?.value)\n                                });\n                                activeTab(Result.to_id);\n                                setCytoEditor(Result.to_id);\n                            }\n                        } },\n                        React.createElement(\"div\", null,\n                            Result ? Result.type_id === deep.idLocal('@deep-foundation/core', 'Resolved') ? 'Published' : 'Failed' : 'Publishing',\n                            React.createElement(\"br\", null),\n                            React.createElement(Text, { fontSize: \"xs\" }, Result ? '(click open in editor)' : '')))))));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLEVBQUUsRUFBRTtJQUMxQixNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDL0IsTUFBTSxFQUFFLFFBQVEsRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFFLEdBQUcsS0FBSyxDQUFDO0lBQzlDLE1BQU0sRUFBRSxJQUFJLEVBQUUsR0FBRyxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxpQkFBaUIsRUFBRSxHQUFHLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBQ2xHLE1BQU0sRUFBRSxnQkFBZ0IsRUFBRSxHQUFHLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBQ3pELE1BQU0sRUFBRSxhQUFhLEVBQUUsYUFBYSxFQUFFLEdBQUcsT0FBTyxDQUFDLDJCQUEyQixDQUFDLENBQUM7SUFFOUUsTUFBTSxPQUFPLEdBQUcsTUFBTSxJQUFJLENBQUMsRUFBRSxDQUFDLCtCQUErQixFQUFFLFNBQVMsQ0FBQyxDQUFDO0lBRTFFLE9BQU8sQ0FBQyxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLFlBQVksRUFBRSxFQUFFLEVBQUU7UUFDakQsTUFBTSxVQUFVLEdBQUcsT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQzFDLE1BQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUMvQixNQUFNLFFBQVEsR0FBRyxVQUFVLENBQUMsWUFBWSxDQUFDLEVBQUUsS0FBSyxFQUFFLEtBQUssQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFDcEUsTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQztRQUMxQixNQUFNLGFBQWEsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLHVCQUF1QixFQUFFLFNBQVMsQ0FBQyxDQUFDO1FBQ3ZFLE1BQU0sc0JBQXNCLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyx1QkFBdUIsRUFBRSxrQkFBa0IsQ0FBQyxDQUFDO1FBQ3pGLE1BQU0sb0JBQW9CLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyx1QkFBdUIsRUFBRSxnQkFBZ0IsQ0FBQyxDQUFDO1FBQ3JGLE1BQU0sbUJBQW1CLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyx1QkFBdUIsRUFBRSxlQUFlLENBQUMsQ0FBQztRQUNuRixNQUFNLGtCQUFrQixHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsdUJBQXVCLEVBQUUsY0FBYyxDQUFDLENBQUM7UUFDakYsTUFBTSxFQUFFLElBQUksRUFBRSx5QkFBeUIsRUFBRSxHQUFHLElBQUksQ0FBQyxtQkFBbUIsQ0FBQztZQUNuRSxFQUFFLEVBQUU7Z0JBQ0YsTUFBTSxFQUFFO29CQUNOLE9BQU8sRUFBRSxFQUFDLEdBQUcsRUFBRSxhQUFhLEVBQUM7b0JBQzdCLE1BQU0sRUFBRSxFQUFFLEtBQUssRUFBRSxFQUFFLEdBQUcsRUFBRSxDQUFDLCtCQUErQixDQUFDLEVBQUUsRUFBRTtpQkFDOUQ7YUFDRjtTQUNGLENBQUMsQ0FBQztRQUNILE1BQU0sRUFBRSxJQUFJLEVBQUUsd0NBQXdDLEVBQUUsR0FBRyxJQUFJLENBQUMsbUJBQW1CLENBQUM7WUFDbEYsT0FBTyxFQUFFLEVBQUUsR0FBRyxFQUFFLENBQUMsc0JBQXNCLEVBQUUsb0JBQW9CLEVBQUUsYUFBYSxFQUFFLG1CQUFtQixDQUFDLEVBQUU7U0FDckcsQ0FBQyxDQUFDO1FBQ0gsTUFBTSxHQUFHLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDM0MsTUFBTSxVQUFVLEdBQUcsR0FBRyxFQUFFLEVBQUUsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxLQUFLLG9CQUFvQixDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNqRixNQUFNLGVBQWUsR0FBRyxVQUFVLEVBQUUsS0FBSyxFQUFFLEtBQUssSUFBSSxFQUFFLENBQUM7UUFDdkQsTUFBTSxrQkFBa0IsR0FBRyxVQUFVLEVBQUUsT0FBTyxDQUFDO1FBQy9DLE1BQU0sV0FBVyxHQUFHLEdBQUcsRUFBRSxLQUFLLEVBQUUsS0FBSyxJQUFJLEVBQUUsQ0FBQztRQUM1QyxNQUFNLENBQUMsa0JBQWtCLEVBQUUscUJBQXFCLENBQUMsR0FBRyxRQUFRLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDMUUsTUFBTSxDQUFDLHFCQUFxQixFQUFFLHdCQUF3QixDQUFDLEdBQUcsUUFBUSxDQUFDLGVBQWUsQ0FBQyxDQUFDO1FBQ3BGLElBQUksVUFBVSxHQUFHLDhCQUE4QixrQkFBa0IsRUFBRSxDQUFDO1FBQ3BFLElBQUksVUFBVSxHQUFHLHFCQUFxQixrQkFBa0IsRUFBRSxDQUFBO1FBRTFELE1BQU0sRUFBRSxJQUFJLEVBQUUsQ0FBQyxTQUFTLENBQUMsRUFBRSxPQUFPLEVBQUUsVUFBVSxFQUFFLEdBQUcsSUFBSSxDQUFDLG1CQUFtQixDQUFDO1lBQzFFLE9BQU8sRUFBRSxPQUFPO1lBQ2hCLE9BQU8sRUFBRSxJQUFJLENBQUMsRUFBRTtZQUNoQixRQUFRLEVBQUUsRUFBRSxFQUFFLEVBQUUsTUFBTSxFQUFFO1lBQ3hCLEtBQUssRUFBRSxDQUFDO1NBQ1QsQ0FBQyxDQUFDO1FBRUgsTUFBTSxFQUFFLElBQUksRUFBRSxDQUFDLE1BQU0sQ0FBQyxFQUFFLE9BQU8sRUFBRSxVQUFVLEVBQUUsR0FBRyxJQUFJLENBQUMsbUJBQW1CLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztZQUNuRixPQUFPLEVBQUUsRUFBRSxHQUFHLEVBQUU7b0JBQ2QsSUFBSSxDQUFDLE9BQU8sQ0FBQyx1QkFBdUIsRUFBRSxVQUFVLENBQUM7b0JBQ2pELElBQUksQ0FBQyxPQUFPLENBQUMsdUJBQXVCLEVBQUUsVUFBVSxDQUFDO2lCQUNsRCxFQUFFO1lBQ0gsRUFBRSxFQUFFO2dCQUNGLE9BQU8sRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLHVCQUF1QixFQUFFLGFBQWEsQ0FBQztnQkFDN0QsU0FBUyxFQUFFLFNBQVMsRUFBRSxFQUFFO2FBQ3pCO1lBQ0QsS0FBSyxFQUFFLENBQUM7U0FDVCxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBRWYsTUFBTSxpQkFBaUIsR0FBRyxVQUFVLElBQUksVUFBVSxDQUFDO1FBRW5ELE1BQU0sRUFBRSxHQUFHLGlCQUFpQixDQUFDLFNBQVMsRUFBRSxTQUFTLENBQUMsQ0FBQztRQUNuRCxNQUFNLFdBQVcsR0FBRyxpQkFBaUIsQ0FBQyxTQUFTLEVBQUUsU0FBUyxDQUFDLENBQUM7UUFFNUQsTUFBTSxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsR0FBRyxhQUFhLEVBQUUsQ0FBQztRQUM5QyxNQUFNLENBQUMsVUFBVSxFQUFFLGFBQWEsQ0FBQyxHQUFHLGFBQWEsRUFBRSxDQUFDO1FBRXBELE1BQU0sQ0FBQyxRQUFRLEVBQUUsV0FBVyxDQUFDLEdBQUcsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ2hELE1BQU0sU0FBUyxHQUFHLE1BQU0sRUFBRSxDQUFDO1FBQzNCLFNBQVMsQ0FBQyxHQUFHLEVBQUU7WUFDYixJQUFJLENBQUMsQ0FBQyxNQUFNLElBQUksTUFBTSxFQUFFLEVBQUUsSUFBSSxTQUFTLEVBQUUsT0FBTyxFQUFFLEVBQUUsSUFBSSxRQUFRLEVBQUUsQ0FBQztnQkFDakUsV0FBVyxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUNuQix3QkFBd0IsQ0FBQyxlQUFlLENBQUMsQ0FBQztZQUM1QyxDQUFDO1lBQ0QsSUFBSSxDQUFDLENBQUMsTUFBTSxJQUFJLE1BQU0sRUFBRSxFQUFFLElBQUksU0FBUyxFQUFFLE9BQU8sRUFBRSxFQUFFLEVBQUUsQ0FBQztnQkFDckQsU0FBUyxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUM7WUFDN0IsQ0FBQztRQUNILENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7UUFFYixPQUFPLENBQUMsNkJBQ0osS0FBSyxFQUFFO2dCQUdMLEdBQUcsS0FBSztnQkFDUixRQUFRLEVBQUUsVUFBVTthQUNyQjtZQUVELG9CQUFDLEdBQUcsSUFBQyxJQUFJLEVBQUMsSUFBSSxFQUFDLElBQUksRUFBQyxJQUFJLEVBQUMsQ0FBQyxFQUFDLElBQUksRUFBQyxXQUFXLEVBQUUsV0FBVyxFQUFFLFdBQVcsRUFBQyxLQUFLLEVBQUMsWUFBWSxFQUFDLElBQUksRUFBQyxRQUFRLEVBQUMsUUFBUSxFQUFDLEVBQUUsRUFBRSxFQUFFO2dCQUN2SCxVQUFVLENBQUMsQ0FBQyxDQUFDLG9CQUFDLEdBQUcsSUFBQyxDQUFDLEVBQUUsQ0FBQztvQkFBRSxvQkFBQyxJQUFJLElBQUMsUUFBUSxFQUFDLElBQUksRUFBQyxJQUFJLEVBQUUsV0FBVyxVQUFVLEVBQUUsRUFBRSxVQUFVO3dCQUNuRixVQUFVOzt3QkFBRSxvQkFBQyxnQkFBZ0IsSUFBQyxFQUFFLEVBQUMsS0FBSyxHQUFHLENBQ3JDO3dCQUFPLENBQUMsQ0FBQyxDQUFDLElBQUk7Z0JBQ25CLG9CQUFDLE1BQU0sSUFBQyxDQUFDLEVBQUUsQ0FBQztvQkFDVixvQkFBQyxLQUFLLElBQ0osV0FBVyxFQUFDLGNBQWMsRUFDMUIsS0FBSyxFQUFFLGtCQUFrQixFQUN6QixXQUFXLEVBQUUsV0FBVyxFQUN4QixJQUFJLEVBQUMsSUFBSSxFQUNULFFBQVEsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMscUJBQXFCLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsR0FDcEQ7b0JBQ0osb0JBQUMsS0FBSyxJQUNKLFdBQVcsRUFBQyxpQkFBaUIsRUFDN0IsS0FBSyxFQUFFLHFCQUFxQixFQUM1QixXQUFXLEVBQUUsV0FBVyxFQUN4QixJQUFJLEVBQUMsSUFBSSxFQUNULFFBQVEsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsd0JBQXdCLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsR0FDdkQ7b0JBQ0osb0JBQUMsTUFBTSxJQUFDLFdBQVcsRUFBQyxNQUFNLEVBQUMsSUFBSSxFQUFDLElBQUksRUFBQyxDQUFDLEVBQUMsTUFBTSxFQUFDLFFBQVEsRUFBRSxRQUFRLEVBQUUsU0FBUyxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsS0FBSyxJQUFJLEVBQUU7NEJBQ3pHLElBQUksaUJBQWlCLEdBQUcsa0JBQWtCLENBQUM7NEJBSzNDLElBQUksQ0FBQyxrQkFBa0IsSUFBSSxrQkFBa0IsRUFBRSxDQUFDO2dDQUM5QyxNQUFNLEVBQUUsSUFBSSxFQUFFLENBQUMsb0JBQW9CLENBQUMsRUFBRSxHQUFHLE1BQU0sSUFBSSxDQUFDLE1BQU0sQ0FBQztvQ0FDekQsT0FBTyxFQUFFLHNCQUFzQjtvQ0FDL0IsTUFBTSxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUUsS0FBSyxFQUFFLGtCQUFrQixFQUFFLEVBQUU7aUNBQ2hELEVBQUUsRUFBRSxTQUFTLEVBQUUsSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFDLENBQUM7Z0NBQ3hDLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxDQUFDO2dDQUM3QyxpQkFBaUIsR0FBRyxvQkFBb0IsQ0FBQyxFQUFFLENBQUM7NEJBRTlDLENBQUM7aUNBQU0sSUFBSSxrQkFBa0IsRUFBRSxDQUFDO2dDQUU5QixNQUFNLEVBQUUsSUFBSSxFQUFFLENBQUMsRUFBRSxJQUFJLEVBQUUsb0JBQW9CLEVBQUUsQ0FBQyxFQUFFLEdBQUcsTUFBTSxJQUFJLENBQUMsTUFBTSxDQUNsRSxFQUFFLE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxFQUMvQixFQUFFLEtBQUssRUFBRSxrQkFBa0IsRUFBRSxFQUM3QixFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFVBQVUsSUFBSSxDQUFDLGVBQWUsSUFBSSxFQUFFLENBQ3BFLENBQUM7Z0NBQ0YsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLENBQUM7Z0NBRTdDLGlCQUFpQixHQUFHLGtCQUFrQixDQUFDOzRCQUN6QyxDQUFDOzRCQUNELE1BQU0sa0JBQWtCLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsRUFBRSxHQUFHLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sSUFBSSxtQkFBbUIsQ0FBQyxJQUFJLEVBQUUsQ0FBQzs0QkFFNUgsSUFBSSxDQUFDLGtCQUFrQixFQUFFLE1BQU0sRUFBRSxDQUFDO2dDQUNoQyxNQUFNLEVBQUUsSUFBSSxFQUFFLENBQUMsaUJBQWlCLENBQUMsRUFBRSxHQUFHLE1BQU0sSUFBSSxDQUFDLE1BQU0sQ0FBQztvQ0FDdEQsT0FBTyxFQUFFLGlCQUFpQjtvQ0FDMUIsT0FBTyxFQUFFLG1CQUFtQjtvQ0FDNUIsS0FBSyxFQUFFLFNBQVM7aUNBQ2pCLEVBQUUsRUFBRSxTQUFTLEVBQUUsSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFDLENBQUM7Z0NBQ3hDLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxDQUFDOzRCQUM1QyxDQUFDOzRCQUNELElBQUksa0JBQWtCLEVBQUUsQ0FBQztnQ0FDdkIsSUFBSSxHQUFHLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxDQUFDO29DQUN0QixNQUFNLElBQUksQ0FBQyxNQUFNLENBQ2YsRUFBRSxPQUFPLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxFQUNwQixFQUFFLEtBQUssRUFBRSxrQkFBa0IsRUFBRSxFQUM3QixFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsQ0FDckIsQ0FBQztnQ0FDSixDQUFDO3FDQUFNLENBQUM7b0NBQ04sTUFBTSxJQUFJLENBQUMsTUFBTSxDQUNmO3dDQUNFLE9BQU8sRUFBRSxHQUFHLEVBQUUsRUFBRTt3Q0FDaEIsS0FBSyxFQUFFLGtCQUFrQjtxQ0FDMUIsRUFDRCxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsQ0FDckIsQ0FBQztnQ0FDSixDQUFDOzRCQUNILENBQUM7NEJBQ0QsSUFBSSxDQUFDLFVBQVUsRUFBRSxFQUFFLEVBQUUsQ0FBQztnQ0FDcEIsTUFBTSxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLGdCQUFnQixFQUFFLENBQUMsRUFBRSxHQUFHLE1BQU0sSUFBSSxDQUFDLE1BQU0sQ0FBQztvQ0FDN0QsT0FBTyxFQUFFLGlCQUFpQjtvQ0FDMUIsT0FBTyxFQUFFLG9CQUFvQjtvQ0FDN0IsS0FBSyxFQUFFLEdBQUcsRUFBRSxFQUFFO29DQUNkLE1BQU0sRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFLEtBQUssRUFBRSxxQkFBcUIsSUFBSSxPQUFPLEVBQUUsRUFBRTtpQ0FDOUQsQ0FBQyxDQUFDOzRCQUNMLENBQUM7aUNBQU0sSUFBSSxxQkFBcUIsRUFBRSxDQUFDO2dDQUNqQyxNQUFNLElBQUksQ0FBQyxNQUFNLENBQ2YsRUFBRSxPQUFPLEVBQUUsVUFBVSxFQUFFLEVBQUUsRUFBRSxFQUMzQixFQUFFLEtBQUssRUFBRSxxQkFBcUIsRUFBRSxFQUNoQyxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsQ0FDckIsQ0FBQzs0QkFDSixDQUFDO3dCQUNILENBQUMsV0FBZTtvQkFDaEIsb0JBQUMsTUFBTSxJQUFDLFdBQVcsRUFBQyxNQUFNLEVBQUMsSUFBSSxFQUFDLElBQUksRUFBQyxDQUFDLEVBQUMsTUFBTSxFQUFDLFFBQVEsRUFBRSxRQUFRLEVBQUUsU0FBUyxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsS0FBSyxJQUFJLEVBQUU7NEJBQ3pHLElBQUksQ0FBQyxDQUFDLHlCQUF5QixFQUFFLE1BQU0sR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDO2dDQUM3QyxPQUFPOzRCQUNULENBQUM7NEJBQ0QsTUFBTSxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLGNBQWMsRUFBRSxDQUFDLEVBQUUsR0FBRyxNQUFNLElBQUksQ0FBQyxNQUFNLENBQUM7Z0NBQzNELE9BQU8sRUFBRSxrQkFBa0I7Z0NBQzNCLE1BQU0sRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFLEtBQUssRUFBRSxrQkFBa0IsRUFBRSxFQUFFOzZCQUNoRCxDQUFDLENBQUM7NEJBQ0gsTUFBTSxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLFNBQVMsRUFBRSxDQUFDLEVBQUUsR0FBRyxNQUFNLElBQUksQ0FBQyxNQUFNLENBQUM7Z0NBQ3RELE9BQU8sRUFBRSxHQUFHLEVBQUUsRUFBRTtnQ0FDaEIsT0FBTyxFQUFFLE9BQU87Z0NBQ2hCLEtBQUssRUFBRSxjQUFjOzZCQUN0QixDQUFDLENBQUM7NEJBQ0gsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDO3dCQUNwQixDQUFDLGNBQWtCO29CQUNsQixDQUFDLENBQUMsU0FBUyxJQUFJLG9CQUFDLE1BQU0sSUFDckIsU0FBUyxFQUFFLENBQUMsQ0FBQyxTQUFTLElBQUksQ0FBQyxDQUFDLE1BQU0sSUFBSSxpQkFBaUIsQ0FBQyxFQUN4RCxPQUFPLEVBQUMsU0FBUyxFQUNqQixXQUFXLEVBQUUsaUJBQWlCLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsT0FBTyxLQUFLLElBQUksQ0FBQyxPQUFPLENBQUMsdUJBQXVCLEVBQUUsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQ3hKLFdBQVcsRUFBRSxpQkFBaUIsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxZQUFZLEVBQ3pELFFBQVEsUUFDUixPQUFPLEVBQUUsS0FBSyxJQUFJLEVBQUU7NEJBQ2xCLElBQUksTUFBTSxFQUFFLENBQUM7Z0NBQ1gsTUFBTSxDQUFDO29DQUNMLEVBQUUsRUFBRSxNQUFNLENBQUMsS0FBSztvQ0FDaEIsWUFBWSxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxNQUFNLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLEtBQUssQ0FBQztpQ0FDekYsQ0FBQyxDQUFDO2dDQUNILFNBQVMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7Z0NBQ3hCLGFBQWEsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7NEJBQzlCLENBQUM7d0JBQ0gsQ0FBQzt3QkFDRjs0QkFDRSxNQUFNLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxPQUFPLEtBQUssSUFBSSxDQUFDLE9BQU8sQ0FBQyx1QkFBdUIsRUFBRSxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLFlBQVk7NEJBQ3RILCtCQUFLOzRCQUNMLG9CQUFDLElBQUksSUFBQyxRQUFRLEVBQUMsSUFBSSxJQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsd0JBQXdCLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBUSxDQUMvRCxDQUFTLENBQ1IsQ0FDTCxDQUNGLENBQ1AsQ0FBQztJQUNGLENBQUMsQ0FBQTtBQUNILENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImFzeW5jICh7IGRlZXAsIHJlcXVpcmUgfSkgPT4ge1xuICBjb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG4gIGNvbnN0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlUmVmIH0gPSBSZWFjdDtcbiAgY29uc3QgeyBUZXh0LCBCb3gsIEJ1dHRvbiwgTGluaywgSW5wdXQsIFZTdGFjaywgdXNlQ29sb3JNb2RlVmFsdWUgfSA9IHJlcXVpcmUoJ0BjaGFrcmEtdWkvcmVhY3QnKTtcbiAgY29uc3QgeyBFeHRlcm5hbExpbmtJY29uIH0gPSByZXF1aXJlKCdAY2hha3JhLXVpL2ljb25zJyk7XG4gIGNvbnN0IHsgdXNlRWRpdG9yVGFicywgdXNlQ3l0b0VkaXRvciB9ID0gcmVxdWlyZSgnQGRlZXAtZm91bmRhdGlvbi9kZWVwY2FzZScpO1xuXG4gIGNvbnN0IFB1Ymxpc2ggPSBhd2FpdCBkZWVwLmlkKCdAZGVlcC1mb3VuZGF0aW9uL25wbS1wYWNrYWdlcicsICdQdWJsaXNoJyk7XG5cbiAgcmV0dXJuICh7IGZpbGxTaXplLCBzdHlsZSwgbGluaywgc2V0SGFuZGxlcklkIH0pID0+IHtcbiAgICBjb25zdCBheGlvc0hvb2tzID0gcmVxdWlyZShcImF4aW9zLWhvb2tzXCIpO1xuICAgIGNvbnN0IGF4aW9zID0gcmVxdWlyZShcImF4aW9zXCIpO1xuICAgIGNvbnN0IHVzZUF4aW9zID0gYXhpb3NIb29rcy5tYWtlVXNlQXhpb3MoeyBheGlvczogYXhpb3MuY3JlYXRlKCkgfSk7XG4gICAgY29uc3QgcGFja2FnZUlkID0gbGluay5pZDtcbiAgICBjb25zdCBwYWNrYWdlVHlwZUlkID0gZGVlcC5pZExvY2FsKCdAZGVlcC1mb3VuZGF0aW9uL2NvcmUnLCAnUGFja2FnZScpO1xuICAgIGNvbnN0IHBhY2thZ2VOYW1lc3BhY2VUeXBlSWQgPSBkZWVwLmlkTG9jYWwoJ0BkZWVwLWZvdW5kYXRpb24vY29yZScsICdQYWNrYWdlTmFtZXNwYWNlJyk7XG4gICAgY29uc3QgcGFja2FnZVZlcnNpb25UeXBlSWQgPSBkZWVwLmlkTG9jYWwoJ0BkZWVwLWZvdW5kYXRpb24vY29yZScsICdQYWNrYWdlVmVyc2lvbicpO1xuICAgIGNvbnN0IHBhY2thZ2VBY3RpdmVUeXBlSWQgPSBkZWVwLmlkTG9jYWwoJ0BkZWVwLWZvdW5kYXRpb24vY29yZScsICdQYWNrYWdlQWN0aXZlJyk7XG4gICAgY29uc3QgcGFja2FnZVF1ZXJ5VHlwZUlkID0gZGVlcC5pZExvY2FsKCdAZGVlcC1mb3VuZGF0aW9uL2NvcmUnLCAnUGFja2FnZVF1ZXJ5Jyk7IFxuICAgIGNvbnN0IHsgZGF0YTogcHJlZmV0Y2hlZE5wbVBhY2thZ2VMaW5rcyB9ID0gZGVlcC51c2VEZWVwU3Vic2NyaXB0aW9uKHsgXG4gICAgICB1cDogeyBcbiAgICAgICAgcGFyZW50OiB7IFxuICAgICAgICAgIHR5cGVfaWQ6IHtfZXE6IHBhY2thZ2VUeXBlSWR9LFxuICAgICAgICAgIHN0cmluZzogeyB2YWx1ZTogeyBfaW46IFtcIkBkZWVwLWZvdW5kYXRpb24vbnBtLXBhY2thZ2VyXCJdIH0gfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7ICAgICBcbiAgICBjb25zdCB7IGRhdGE6IHByZWZldGNoZWRQYWNrYWdlQWN0aXZlTGlua3NBbmROYW1lc3BhY2UgfSA9IGRlZXAudXNlRGVlcFN1YnNjcmlwdGlvbih7XG4gICAgICB0eXBlX2lkOiB7IF9pbjogW3BhY2thZ2VOYW1lc3BhY2VUeXBlSWQsIHBhY2thZ2VWZXJzaW9uVHlwZUlkLCBwYWNrYWdlVHlwZUlkLCBwYWNrYWdlQWN0aXZlVHlwZUlkXSB9IFxuICAgIH0pO1xuICAgIGNvbnN0IHBrZyA9IGRlZXAubWluaWxpbmtzLmJ5SWRbcGFja2FnZUlkXTtcbiAgICBjb25zdCBwa2dWZXJzaW9uID0gcGtnPy5pbj8uZmlsdGVyKHYgPT4gdi50eXBlX2lkID09PSBwYWNrYWdlVmVyc2lvblR5cGVJZCk/LlswXTtcbiAgICBjb25zdCBwa2dWZXJzaW9uVmFsdWUgPSBwa2dWZXJzaW9uPy52YWx1ZT8udmFsdWUgfHwgXCJcIjtcbiAgICBjb25zdCBwYWNrYWdlTmFtZXNwYWNlSWQgPSBwa2dWZXJzaW9uPy5mcm9tX2lkO1xuICAgIGNvbnN0IHBhY2thZ2VOYW1lID0gcGtnPy52YWx1ZT8udmFsdWUgfHwgXCJcIjtcbiAgICBjb25zdCBbY3VycmVudFBhY2thZ2VOYW1lLCBzZXRDdXJyZW50UGFja2FnZU5hbWVdID0gdXNlU3RhdGUocGFja2FnZU5hbWUpO1xuICAgIGNvbnN0IFtjdXJyZW50UGFja2FnZVZlcnNpb24sIHNldEN1cnJlbnRQYWNrYWdlVmVyc2lvbl0gPSB1c2VTdGF0ZShwa2dWZXJzaW9uVmFsdWUpOyBcbiAgICBsZXQgcGFja2FnZVVybCA9IGBodHRwczovL3JlZ2lzdHJ5Lm5wbWpzLmNvbS8ke2N1cnJlbnRQYWNrYWdlTmFtZX1gO1xuICAgIGxldCBkaXNwbGF5VXJsID0gYG5wbWpzLmNvbS9wYWNrYWdlLyR7Y3VycmVudFBhY2thZ2VOYW1lfWBcblxuICAgIGNvbnN0IHsgZGF0YTogW1B1Ymxpc2hlZF0sIGxvYWRpbmc6IHB1YkxvYWRpbmcgfSA9IGRlZXAudXNlRGVlcFN1YnNjcmlwdGlvbih7XG4gICAgICB0eXBlX2lkOiBQdWJsaXNoLFxuICAgICAgZnJvbV9pZDogbGluay5pZCxcbiAgICAgIG9yZGVyX2J5OiB7IGlkOiAnZGVzYycgfSxcbiAgICAgIGxpbWl0OiAxLFxuICAgIH0pO1xuXG4gICAgY29uc3QgeyBkYXRhOiBbUmVzdWx0XSwgbG9hZGluZzogcmVzTG9hZGluZyB9ID0gZGVlcC51c2VEZWVwU3Vic2NyaXB0aW9uKFB1Ymxpc2hlZCA/IHtcbiAgICAgIHR5cGVfaWQ6IHsgX2luOiBbXG4gICAgICAgIGRlZXAuaWRMb2NhbCgnQGRlZXAtZm91bmRhdGlvbi9jb3JlJywgJ1JlamVjdGVkJyksXG4gICAgICAgIGRlZXAuaWRMb2NhbCgnQGRlZXAtZm91bmRhdGlvbi9jb3JlJywgJ1Jlc29sdmVkJyksXG4gICAgICBdIH0sXG4gICAgICB1cDoge1xuICAgICAgICB0cmVlX2lkOiBkZWVwLmlkTG9jYWwoJ0BkZWVwLWZvdW5kYXRpb24vY29yZScsICdwcm9taXNlVHJlZScpLFxuICAgICAgICBwYXJlbnRfaWQ6IFB1Ymxpc2hlZD8uaWQsXG4gICAgICB9LFxuICAgICAgbGltaXQ6IDEsXG4gICAgfSA6IHsgaWQ6IDAgfSk7XG5cbiAgICBjb25zdCBwdWJsaXNoaW5nTG9hZGluZyA9IHB1YkxvYWRpbmcgfHwgcmVzTG9hZGluZztcblxuICAgIGNvbnN0IGJnID0gdXNlQ29sb3JNb2RlVmFsdWUoJyNlZWVlZWUnLCAnIzFlMWUxZScpO1xuICAgIGNvbnN0IGJvcmRlckNvbG9yID0gdXNlQ29sb3JNb2RlVmFsdWUoJyNhM2EzYTMnLCAnIzRkNGQ0ZCcpO1xuXG4gICAgY29uc3QgeyBhZGRUYWIsIGFjdGl2ZVRhYiB9ID0gdXNlRWRpdG9yVGFicygpO1xuICAgIGNvbnN0IFtjeXRvRWRpdG9yLCBzZXRDeXRvRWRpdG9yXSA9IHVzZUN5dG9FZGl0b3IoKTtcblxuICAgIGNvbnN0IFtkaXNhYmxlZCwgc2V0RGlzYWJsZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICAgIGNvbnN0IHJlc3VsdFJlZiA9IHVzZVJlZigpO1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICBpZiAoISFSZXN1bHQgJiYgUmVzdWx0Py5pZCAhPSByZXN1bHRSZWY/LmN1cnJlbnQ/LmlkICYmIGRpc2FibGVkKSB7XG4gICAgICAgIHNldERpc2FibGVkKGZhbHNlKTtcbiAgICAgICAgc2V0Q3VycmVudFBhY2thZ2VWZXJzaW9uKHBrZ1ZlcnNpb25WYWx1ZSk7IFxuICAgICAgfVxuICAgICAgaWYgKCEhUmVzdWx0ICYmIFJlc3VsdD8uaWQgIT0gcmVzdWx0UmVmPy5jdXJyZW50Py5pZCkge1xuICAgICAgICByZXN1bHRSZWYuY3VycmVudCA9IFJlc3VsdDtcbiAgICAgIH1cbiAgICB9LCBbUmVzdWx0XSk7XG5cbiAgICByZXR1cm4gKDxkaXZcbiAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAvLyB3aWR0aDogJzEwMCUnLFxuICAgICAgICAgIC8vIGhlaWdodDogJzEwMCUnLFxuICAgICAgICAgIC4uLnN0eWxlLFxuICAgICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgICAgICB9fVxuICAgICAgPlxuICAgICAgICA8Qm94IG1heFc9J21kJyBtaW5XPSdzbScgdz0nc20nIGJvcmRlckNvbG9yPXtib3JkZXJDb2xvcn0gYm9yZGVyV2lkdGg9JzFweCcgYm9yZGVyUmFkaXVzPSdsZycgb3ZlcmZsb3c9J2hpZGRlbicgYmc9e2JnfT5cbiAgICAgIHtkaXNwbGF5VXJsID8gPEJveCBwPXsyfT48TGluayBmb250U2l6ZT0neHMnIGhyZWY9e2BodHRwczovLyR7ZGlzcGxheVVybH1gfSBpc0V4dGVybmFsPlxuICAgICAgICB7ZGlzcGxheVVybH0gPEV4dGVybmFsTGlua0ljb24gbXg9JzJweCcgLz5cbiAgICAgIDwvTGluaz4gPC9Cb3g+IDogbnVsbH1cbiAgICAgICAgPFZTdGFjayBwPXsyfT5cbiAgICAgICAgICA8SW5wdXQgXG4gICAgICAgICAgICBwbGFjZWhvbGRlcj0ncGFja2FnZSBuYW1lJ1xuICAgICAgICAgICAgdmFsdWU9e2N1cnJlbnRQYWNrYWdlTmFtZX1cbiAgICAgICAgICAgIGJvcmRlckNvbG9yPXtib3JkZXJDb2xvcn1cbiAgICAgICAgICAgIHNpemU9J3NtJ1xuICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRDdXJyZW50UGFja2FnZU5hbWUoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8SW5wdXQgXG4gICAgICAgICAgICBwbGFjZWhvbGRlcj0ncGFja2FnZSB2ZXJzaW9uJ1xuICAgICAgICAgICAgdmFsdWU9e2N1cnJlbnRQYWNrYWdlVmVyc2lvbn1cbiAgICAgICAgICAgIGJvcmRlckNvbG9yPXtib3JkZXJDb2xvcn1cbiAgICAgICAgICAgIHNpemU9J3NtJ1xuICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRDdXJyZW50UGFja2FnZVZlcnNpb24oZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8QnV0dG9uIGNvbG9yU2NoZW1lPSdibHVlJyBzaXplPSdzbScgdz0nMTAwJScgZGlzYWJsZWQ9e2Rpc2FibGVkfSBpc0xvYWRpbmc9e2Rpc2FibGVkfSBvbkNsaWNrPXthc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBsZXQgYWN0dWFsTmFtZXNwYWNlSWQgPSBwYWNrYWdlTmFtZXNwYWNlSWQ7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnbnBtLXBhY2thZ2VyLXVpLW91dHB1dCcsICdhY3R1YWxOYW1lc3BhY2VJZCcsIGFjdHVhbE5hbWVzcGFjZUlkKTtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCducG0tcGFja2FnZXItdWktb3V0cHV0JywgJ2N1cnJlbnRQYWNrYWdlTmFtZScsIGN1cnJlbnRQYWNrYWdlTmFtZSk7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnbnBtLXBhY2thZ2VyLXVpLW91dHB1dCcsICchcGFja2FnZU5hbWVzcGFjZUlkICYmIGN1cnJlbnRQYWNrYWdlTmFtZScsICFwYWNrYWdlTmFtZXNwYWNlSWQgJiYgY3VycmVudFBhY2thZ2VOYW1lKTtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCducG0tcGFja2FnZXItdWktb3V0cHV0JywgJyEhY3VycmVudFBhY2thZ2VOYW1lJywgISFjdXJyZW50UGFja2FnZU5hbWUpO1xuICAgICAgICAgICAgaWYgKCFwYWNrYWdlTmFtZXNwYWNlSWQgJiYgY3VycmVudFBhY2thZ2VOYW1lKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHsgZGF0YTogW3BhY2thZ2VOYW1lc3BhY2VMaW5rXSB9ID0gYXdhaXQgZGVlcC5pbnNlcnQoe1xuICAgICAgICAgICAgICAgIHR5cGVfaWQ6IHBhY2thZ2VOYW1lc3BhY2VUeXBlSWQsXG4gICAgICAgICAgICAgICAgc3RyaW5nOiB7IGRhdGE6IHsgdmFsdWU6IGN1cnJlbnRQYWNrYWdlTmFtZSB9IH0sXG4gICAgICAgICAgICAgIH0sIHsgcmV0dXJuaW5nOiBkZWVwLnNlbGVjdFJldHVybmluZyB9KTtcbiAgICAgICAgICAgICAgZGVlcC5taW5pbGlua3MuYXBwbHkoW3BhY2thZ2VOYW1lc3BhY2VMaW5rXSk7XG4gICAgICAgICAgICAgIGFjdHVhbE5hbWVzcGFjZUlkID0gcGFja2FnZU5hbWVzcGFjZUxpbmsuaWQ7XG4gICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCducG0tcGFja2FnZXItdWktb3V0cHV0JywgJ2FjdHVhbE5hbWVzcGFjZUlkIGFmdGVyIGluc2VydCcsIGFjdHVhbE5hbWVzcGFjZUlkKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VycmVudFBhY2thZ2VOYW1lKSB7XG4gICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCducG0tcGFja2FnZXItdWktb3V0cHV0JywgJ2JlZm9yZSB1cGRhdGUnKTtcbiAgICAgICAgICAgICAgY29uc3QgeyBkYXRhOiBbeyBsaW5rOiBwYWNrYWdlTmFtZXNwYWNlTGluayB9XSB9ID0gYXdhaXQgZGVlcC51cGRhdGUoXG4gICAgICAgICAgICAgICAgeyBsaW5rX2lkOiBwYWNrYWdlTmFtZXNwYWNlSWQgfSxcbiAgICAgICAgICAgICAgICB7IHZhbHVlOiBjdXJyZW50UGFja2FnZU5hbWUgfSxcbiAgICAgICAgICAgICAgICB7IHRhYmxlOiAnc3RyaW5ncycsIHJldHVybmluZzogYGxpbmsgeyAke2RlZXAuc2VsZWN0UmV0dXJuaW5nfSB9YCB9XG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGRlZXAubWluaWxpbmtzLmFwcGx5KFtwYWNrYWdlTmFtZXNwYWNlTGlua10pO1xuICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnbnBtLXBhY2thZ2VyLXVpLW91dHB1dCcsICdhZnRlciB1cGRhdGUnLCBwYWNrYWdlTmFtZXNwYWNlTGluayk7XG4gICAgICAgICAgICAgIGFjdHVhbE5hbWVzcGFjZUlkID0gcGFja2FnZU5hbWVzcGFjZUlkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcGFja2FnZUFjdGl2ZUxpbmtzID0gZGVlcC5taW5pbGlua3MuYnlJZFthY3R1YWxOYW1lc3BhY2VJZF0/Lm91dD8uZmlsdGVyKGwgPT4gbC50eXBlX2lkID09IHBhY2thZ2VBY3RpdmVUeXBlSWQpIHx8IFtdO1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ25wbS1wYWNrYWdlci11aS1vdXRwdXQnLCAncGFja2FnZUFjdGl2ZUxpbmtzJywgcGFja2FnZUFjdGl2ZUxpbmtzKTtcbiAgICAgICAgICAgIGlmICghcGFja2FnZUFjdGl2ZUxpbmtzPy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgY29uc3QgeyBkYXRhOiBbcGFja2FnZUFjdGl2ZUxpbmtdIH0gPSBhd2FpdCBkZWVwLmluc2VydCh7XG4gICAgICAgICAgICAgICAgZnJvbV9pZDogYWN0dWFsTmFtZXNwYWNlSWQsXG4gICAgICAgICAgICAgICAgdHlwZV9pZDogcGFja2FnZUFjdGl2ZVR5cGVJZCxcbiAgICAgICAgICAgICAgICB0b19pZDogcGFja2FnZUlkLFxuICAgICAgICAgICAgICB9LCB7IHJldHVybmluZzogZGVlcC5zZWxlY3RSZXR1cm5pbmcgfSk7XG4gICAgICAgICAgICAgIGRlZXAubWluaWxpbmtzLmFwcGx5KFtwYWNrYWdlQWN0aXZlTGlua10pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGN1cnJlbnRQYWNrYWdlTmFtZSkge1xuICAgICAgICAgICAgICBpZiAocGtnPy52YWx1ZT8udmFsdWUpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBkZWVwLnVwZGF0ZShcbiAgICAgICAgICAgICAgICAgIHsgbGlua19pZDogcGtnPy5pZCB9LFxuICAgICAgICAgICAgICAgICAgeyB2YWx1ZTogY3VycmVudFBhY2thZ2VOYW1lIH0sXG4gICAgICAgICAgICAgICAgICB7IHRhYmxlOiAnc3RyaW5ncycgfVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgZGVlcC5pbnNlcnQoXG4gICAgICAgICAgICAgICAgICB7IFxuICAgICAgICAgICAgICAgICAgICBsaW5rX2lkOiBwa2c/LmlkLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogY3VycmVudFBhY2thZ2VOYW1lXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgeyB0YWJsZTogJ3N0cmluZ3MnIH1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXBrZ1ZlcnNpb24/LmlkKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHsgZGF0YTogW3sgaWQ6IHBhY2thZ2VWZXJzaW9uSWQgfV0gfSA9IGF3YWl0IGRlZXAuaW5zZXJ0KHtcbiAgICAgICAgICAgICAgICBmcm9tX2lkOiBhY3R1YWxOYW1lc3BhY2VJZCxcbiAgICAgICAgICAgICAgICB0eXBlX2lkOiBwYWNrYWdlVmVyc2lvblR5cGVJZCxcbiAgICAgICAgICAgICAgICB0b19pZDogcGtnPy5pZCxcbiAgICAgICAgICAgICAgICBzdHJpbmc6IHsgZGF0YTogeyB2YWx1ZTogY3VycmVudFBhY2thZ2VWZXJzaW9uIHx8ICcwLjAuMCcgfSB9LFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VycmVudFBhY2thZ2VWZXJzaW9uKSB7XG4gICAgICAgICAgICAgIGF3YWl0IGRlZXAudXBkYXRlKFxuICAgICAgICAgICAgICAgIHsgbGlua19pZDogcGtnVmVyc2lvbj8uaWQgfSxcbiAgICAgICAgICAgICAgICB7IHZhbHVlOiBjdXJyZW50UGFja2FnZVZlcnNpb24gfSxcbiAgICAgICAgICAgICAgICB7IHRhYmxlOiAnc3RyaW5ncycgfVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH19PnNhdmU8L0J1dHRvbj5cbiAgICAgICAgICA8QnV0dG9uIGNvbG9yU2NoZW1lPSdibHVlJyBzaXplPSdzbScgdz0nMTAwJScgZGlzYWJsZWQ9e2Rpc2FibGVkfSBpc0xvYWRpbmc9e2Rpc2FibGVkfSBvbkNsaWNrPXthc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIShwcmVmZXRjaGVkTnBtUGFja2FnZUxpbmtzPy5sZW5ndGggPiAwKSkge1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB7IGRhdGE6IFt7IGlkOiBwYWNrYWdlUXVlcnlJZCB9XSB9ID0gYXdhaXQgZGVlcC5pbnNlcnQoe1xuICAgICAgICAgICAgICB0eXBlX2lkOiBwYWNrYWdlUXVlcnlUeXBlSWQsXG4gICAgICAgICAgICAgIHN0cmluZzogeyBkYXRhOiB7IHZhbHVlOiBjdXJyZW50UGFja2FnZU5hbWUgfSB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCB7IGRhdGE6IFt7IGlkOiBwdWJsaXNoSWQgfV0gfSA9IGF3YWl0IGRlZXAuaW5zZXJ0KHtcbiAgICAgICAgICAgICAgZnJvbV9pZDogcGtnPy5pZCxcbiAgICAgICAgICAgICAgdHlwZV9pZDogUHVibGlzaCxcbiAgICAgICAgICAgICAgdG9faWQ6IHBhY2thZ2VRdWVyeUlkXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHNldERpc2FibGVkKHRydWUpO1xuICAgICAgICAgIH19PnB1Ymxpc2g8L0J1dHRvbj5cbiAgICAgICAgICB7ISFQdWJsaXNoZWQgJiYgPEJ1dHRvblxuICAgICAgICAgICAgaXNMb2FkaW5nPXshIVB1Ymxpc2hlZCAmJiAoIVJlc3VsdCB8fCBwdWJsaXNoaW5nTG9hZGluZyl9XG4gICAgICAgICAgICB2YXJpYW50PVwib3V0bGluZVwiXG4gICAgICAgICAgICBjb2xvclNjaGVtZT17cHVibGlzaGluZ0xvYWRpbmcgPyAnZGVmYXVsdCcgOiBSZXN1bHQgPyBSZXN1bHQudHlwZV9pZCA9PT0gZGVlcC5pZExvY2FsKCdAZGVlcC1mb3VuZGF0aW9uL2NvcmUnLCAnUmVzb2x2ZWQnKSA/ICdncmVlbicgOiAncmVkJyA6ICdkZWZhdWx0J31cbiAgICAgICAgICAgIGxvYWRpbmdUZXh0PXtwdWJsaXNoaW5nTG9hZGluZyA/ICdMb2FkaW5nJyA6ICdQdWJsaXNoaW5nJ31cbiAgICAgICAgICAgIGRpc2FibGVkXG4gICAgICAgICAgICBvbkNsaWNrPXthc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgIGlmIChSZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBhZGRUYWIoe1xuICAgICAgICAgICAgICAgICAgaWQ6IFJlc3VsdC50b19pZCxcbiAgICAgICAgICAgICAgICAgIGluaXRpYWxWYWx1ZTogZGVlcC5zdHJpbmdpZnkoKGF3YWl0IGRlZXAuc2VsZWN0KFJlc3VsdC50b19pZCkpPy5kYXRhPy5bMF0/LnZhbHVlPy52YWx1ZSlcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBhY3RpdmVUYWIoUmVzdWx0LnRvX2lkKTtcbiAgICAgICAgICAgICAgICBzZXRDeXRvRWRpdG9yKFJlc3VsdC50b19pZCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH19XG4gICAgICAgICAgPjxkaXY+XG4gICAgICAgICAgICB7UmVzdWx0ID8gUmVzdWx0LnR5cGVfaWQgPT09IGRlZXAuaWRMb2NhbCgnQGRlZXAtZm91bmRhdGlvbi9jb3JlJywgJ1Jlc29sdmVkJykgPyAnUHVibGlzaGVkJyA6ICdGYWlsZWQnIDogJ1B1Ymxpc2hpbmcnfVxuICAgICAgICAgICAgPGJyLz5cbiAgICAgICAgICAgIDxUZXh0IGZvbnRTaXplPVwieHNcIj57UmVzdWx0ID8gJyhjbGljayBvcGVuIGluIGVkaXRvciknIDogJyd9PC9UZXh0PlxuICAgICAgICAgIDwvZGl2PjwvQnV0dG9uPn1cbiAgICAgICAgPC9WU3RhY2s+XG4gICAgICA8L0JveD5cbiAgICA8L2Rpdj5cbiAgKTtcbiAgfVxufSJdfQ==",
        "link_id": 925
      }
    },
    {
      "id": 926,
      "type_id": 3,
      "from_id": 906,
      "to_id": 925,
      "value": {
        "id": 390,
        "value": "generated",
        "link_id": 926
      }
    },
    {
      "id": 927,
      "type_id": 143,
      "from_id": 925,
      "to_id": 906
    },
    {
      "id": 928,
      "type_id": 3,
      "from_id": 906,
      "to_id": 927
    },
    {
      "id": 5236,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1180,
        "value": "async ({ deep, data, Go, require }) => {\n  const React = require('react');\n  const c = require('@chakra-ui/react');\n\n  const dpl = '@deep-foundation/perception-links';\n  const dc = '@deep-foundation/core';\n  const dml = '@deep-foundation/deepmemo-links';\n\n  const Handler = deep.idLocal(dc, 'Handler');\n  const Compatable = deep.idLocal(dpl, 'Compatable');\n  const Header = deep.idLocal(dpl, 'Header');\n  const Menu = deep.idLocal(dpl, 'Menu');\n  const Stack = deep.idLocal(dpl, 'Stack');\n\n  const Item = ({ link, isActive }) => (<Go.Handler\n    handlerId={link.id}\n    linkId={link.id}\n    isActive={isActive}\n  />);\n  \n  return ({\n    go,\n  }, ref) => {\n    const { data: menu } = deep.useSubscription({\n      type_id: Handler,\n      out: {\n        type_id: Compatable,\n        to_id: Menu,\n      },\n      order_by: { id: 'desc' }\n    });\n\n    return <go.On do={{\n      focus: (g,v,linkId,o) => {\n        !go.value && go.focus(Stack);\n        o?.id && go(Stack).focus(o?.id);\n      },\n    }}>\n      <go.Provider linkId={Stack}>\n        <go.Component path={[dpl, 'Stack']} links={menu} direction='vertical' Item={Item}/>\n      </go.Provider>\n    </go.On>;\n  };\n}",
        "link_id": 5236
      }
    },
    {
      "id": 1129,
      "type_id": 3,
      "from_id": 1123,
      "to_id": 1121,
      "value": {
        "id": 447,
        "value": "messagingTreeAny",
        "link_id": 1129
      }
    },
    {
      "id": 1188,
      "type_id": 1,
      "from_id": 8,
      "to_id": 1187
    },
    {
      "id": 1196,
      "type_id": 3,
      "from_id": 1190,
      "to_id": 1188,
      "value": {
        "id": 470,
        "value": "UsesModel",
        "link_id": 1196
      }
    },
    {
      "id": 1311,
      "type_id": 1100,
      "from_id": 1310,
      "to_id": 1310,
      "value": {
        "id": 4,
        "value": 128000,
        "link_id": 1311
      }
    },
    {
      "id": 1312,
      "type_id": 1221,
      "from_id": 1310,
      "to_id": 1299
    },
    {
      "id": 1373,
      "type_id": 3,
      "from_id": 1364,
      "to_id": 1362,
      "value": {
        "id": 542,
        "value": "code",
        "link_id": 1373
      }
    },
    {
      "id": 1403,
      "type_id": 1,
      "from_id": 1402,
      "to_id": 8
    },
    {
      "id": 1632,
      "type_id": 3,
      "from_id": 1616,
      "to_id": 1604,
      "value": {
        "id": 633,
        "value": "onActiveDelete",
        "link_id": 1632
      }
    },
    {
      "id": 574,
      "type_id": 3,
      "from_id": 553,
      "to_id": 573,
      "value": {
        "id": 224,
        "value": "PackageQuerySymbol",
        "link_id": 574
      }
    },
    {
      "id": 580,
      "type_id": 3,
      "from_id": 553,
      "to_id": 579,
      "value": {
        "id": 230,
        "value": "PackagePublishSymbol",
        "link_id": 580
      }
    },
    {
      "id": 581,
      "type_id": 146,
      "from_id": 553,
      "to_id": 84,
      "value": {
        "id": 231,
        "value": "📥",
        "link_id": 581
      }
    },
    {
      "id": 582,
      "type_id": 3,
      "from_id": 553,
      "to_id": 581,
      "value": {
        "id": 232,
        "value": "PackageInstallSymbol",
        "link_id": 582
      }
    },
    {
      "id": 662,
      "type_id": 3,
      "from_id": 553,
      "to_id": 661,
      "value": {
        "id": 312,
        "value": "TypeSymbol",
        "link_id": 662
      }
    },
    {
      "id": 1622,
      "type_id": 3,
      "from_id": 1616,
      "to_id": 1597,
      "value": {
        "id": 623,
        "value": "activeSymbol",
        "link_id": 1622
      }
    },
    {
      "id": 1638,
      "type_id": 3,
      "from_id": 1616,
      "to_id": 1612,
      "value": {
        "id": 639,
        "value": "onTelegramBotOutHandler",
        "link_id": 1638
      }
    },
    {
      "id": 1639,
      "type_id": 3,
      "from_id": 1616,
      "to_id": 1611,
      "value": {
        "id": 640,
        "value": "onTelegramBotOut",
        "link_id": 1639
      }
    },
    {
      "id": 906,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 389,
        "value": "async ({ deep, require }) => {\n  const React = require('react');\n  const { useState, useEffect, useRef } = React;\n  const { Text, Box, Button, Link, Input, VStack, useColorModeValue } = require('@chakra-ui/react');\n  const { ExternalLinkIcon } = require('@chakra-ui/icons');\n  const { useEditorTabs, useCytoEditor } = require('@deep-foundation/deepcase');\n\n  const Publish = await deep.id('@deep-foundation/npm-packager', 'Publish');\n\n  return ({ fillSize, style, link, setHandlerId }) => {\n    const axiosHooks = require(\"axios-hooks\");\n    const axios = require(\"axios\");\n    const useAxios = axiosHooks.makeUseAxios({ axios: axios.create() });\n    const packageId = link.id;\n    const packageTypeId = deep.idLocal('@deep-foundation/core', 'Package');\n    const packageNamespaceTypeId = deep.idLocal('@deep-foundation/core', 'PackageNamespace');\n    const packageVersionTypeId = deep.idLocal('@deep-foundation/core', 'PackageVersion');\n    const packageActiveTypeId = deep.idLocal('@deep-foundation/core', 'PackageActive');\n    const packageQueryTypeId = deep.idLocal('@deep-foundation/core', 'PackageQuery'); \n    const { data: prefetchedNpmPackageLinks } = deep.useDeepSubscription({ \n      up: { \n        parent: { \n          type_id: {_eq: packageTypeId},\n          string: { value: { _in: [\"@deep-foundation/npm-packager\"] } }\n        }\n      }\n    });     \n    const { data: prefetchedPackageActiveLinksAndNamespace } = deep.useDeepSubscription({\n      type_id: { _in: [packageNamespaceTypeId, packageVersionTypeId, packageTypeId, packageActiveTypeId] } \n    });\n    const pkg = deep.minilinks.byId[packageId];\n    const pkgVersion = pkg?.in?.filter(v => v.type_id === packageVersionTypeId)?.[0];\n    const pkgVersionValue = pkgVersion?.value?.value || \"\";\n    const packageNamespaceId = pkgVersion?.from_id;\n    const packageName = pkg?.value?.value || \"\";\n    const [currentPackageName, setCurrentPackageName] = useState(packageName);\n    const [currentPackageVersion, setCurrentPackageVersion] = useState(pkgVersionValue); \n    let packageUrl = `https://registry.npmjs.com/${currentPackageName}`;\n    let displayUrl = `npmjs.com/package/${currentPackageName}`\n\n    const { data: [Published], loading: pubLoading } = deep.useDeepSubscription({\n      type_id: Publish,\n      from_id: link.id,\n      order_by: { id: 'desc' },\n      limit: 1,\n    });\n\n    const { data: [Result], loading: resLoading } = deep.useDeepSubscription(Published ? {\n      type_id: { _in: [\n        deep.idLocal('@deep-foundation/core', 'Rejected'),\n        deep.idLocal('@deep-foundation/core', 'Resolved'),\n      ] },\n      up: {\n        tree_id: deep.idLocal('@deep-foundation/core', 'promiseTree'),\n        parent_id: Published?.id,\n      },\n      limit: 1,\n    } : { id: 0 });\n\n    const publishingLoading = pubLoading || resLoading;\n\n    const bg = useColorModeValue('#eeeeee', '#1e1e1e');\n    const borderColor = useColorModeValue('#a3a3a3', '#4d4d4d');\n\n    const { addTab, activeTab } = useEditorTabs();\n    const [cytoEditor, setCytoEditor] = useCytoEditor();\n\n    const [disabled, setDisabled] = useState(false);\n    const resultRef = useRef();\n    useEffect(() => {\n      if (!!Result && Result?.id != resultRef?.current?.id && disabled) {\n        setDisabled(false);\n        setCurrentPackageVersion(pkgVersionValue); \n      }\n      if (!!Result && Result?.id != resultRef?.current?.id) {\n        resultRef.current = Result;\n      }\n    }, [Result]);\n\n    return (<div\n        style={{\n          // width: '100%',\n          // height: '100%',\n          ...style,\n          position: 'relative',\n        }}\n      >\n        <Box maxW='md' minW='sm' w='sm' borderColor={borderColor} borderWidth='1px' borderRadius='lg' overflow='hidden' bg={bg}>\n      {displayUrl ? <Box p={2}><Link fontSize='xs' href={`https://${displayUrl}`} isExternal>\n        {displayUrl} <ExternalLinkIcon mx='2px' />\n      </Link> </Box> : null}\n        <VStack p={2}>\n          <Input \n            placeholder='package name'\n            value={currentPackageName}\n            borderColor={borderColor}\n            size='sm'\n            onChange={(e) => setCurrentPackageName(e.target.value)}\n            />\n          <Input \n            placeholder='package version'\n            value={currentPackageVersion}\n            borderColor={borderColor}\n            size='sm'\n            onChange={(e) => setCurrentPackageVersion(e.target.value)}\n            />\n          <Button colorScheme='blue' size='sm' w='100%' disabled={disabled} isLoading={disabled} onClick={async () => {\n            let actualNamespaceId = packageNamespaceId;\n            // console.log('npm-packager-ui-output', 'actualNamespaceId', actualNamespaceId);\n            // console.log('npm-packager-ui-output', 'currentPackageName', currentPackageName);\n            // console.log('npm-packager-ui-output', '!packageNamespaceId && currentPackageName', !packageNamespaceId && currentPackageName);\n            // console.log('npm-packager-ui-output', '!!currentPackageName', !!currentPackageName);\n            if (!packageNamespaceId && currentPackageName) {\n              const { data: [packageNamespaceLink] } = await deep.insert({\n                type_id: packageNamespaceTypeId,\n                string: { data: { value: currentPackageName } },\n              }, { returning: deep.selectReturning });\n              deep.minilinks.apply([packageNamespaceLink]);\n              actualNamespaceId = packageNamespaceLink.id;\n              // console.log('npm-packager-ui-output', 'actualNamespaceId after insert', actualNamespaceId);\n            } else if (currentPackageName) {\n              // console.log('npm-packager-ui-output', 'before update');\n              const { data: [{ link: packageNamespaceLink }] } = await deep.update(\n                { link_id: packageNamespaceId },\n                { value: currentPackageName },\n                { table: 'strings', returning: `link { ${deep.selectReturning} }` }\n              );\n              deep.minilinks.apply([packageNamespaceLink]);\n              // console.log('npm-packager-ui-output', 'after update', packageNamespaceLink);\n              actualNamespaceId = packageNamespaceId;\n            }\n            const packageActiveLinks = deep.minilinks.byId[actualNamespaceId]?.out?.filter(l => l.type_id == packageActiveTypeId) || [];\n            // console.log('npm-packager-ui-output', 'packageActiveLinks', packageActiveLinks);\n            if (!packageActiveLinks?.length) {\n              const { data: [packageActiveLink] } = await deep.insert({\n                from_id: actualNamespaceId,\n                type_id: packageActiveTypeId,\n                to_id: packageId,\n              }, { returning: deep.selectReturning });\n              deep.minilinks.apply([packageActiveLink]);\n            }\n            if (currentPackageName) {\n              if (pkg?.value?.value) {\n                await deep.update(\n                  { link_id: pkg?.id },\n                  { value: currentPackageName },\n                  { table: 'strings' }\n                );\n              } else {\n                await deep.insert(\n                  { \n                    link_id: pkg?.id,\n                    value: currentPackageName\n                  },\n                  { table: 'strings' }\n                );\n              }\n            }\n            if (!pkgVersion?.id) {\n              const { data: [{ id: packageVersionId }] } = await deep.insert({\n                from_id: actualNamespaceId,\n                type_id: packageVersionTypeId,\n                to_id: pkg?.id,\n                string: { data: { value: currentPackageVersion || '0.0.0' } },\n              });\n            } else if (currentPackageVersion) {\n              await deep.update(\n                { link_id: pkgVersion?.id },\n                { value: currentPackageVersion },\n                { table: 'strings' }\n              );\n            }\n          }}>save</Button>\n          <Button colorScheme='blue' size='sm' w='100%' disabled={disabled} isLoading={disabled} onClick={async () => {\n            if (!(prefetchedNpmPackageLinks?.length > 0)) {\n              return;\n            }\n            const { data: [{ id: packageQueryId }] } = await deep.insert({\n              type_id: packageQueryTypeId,\n              string: { data: { value: currentPackageName } },\n            });\n            const { data: [{ id: publishId }] } = await deep.insert({\n              from_id: pkg?.id,\n              type_id: Publish,\n              to_id: packageQueryId\n            });\n            setDisabled(true);\n          }}>publish</Button>\n          {!!Published && <Button\n            isLoading={!!Published && (!Result || publishingLoading)}\n            variant=\"outline\"\n            colorScheme={publishingLoading ? 'default' : Result ? Result.type_id === deep.idLocal('@deep-foundation/core', 'Resolved') ? 'green' : 'red' : 'default'}\n            loadingText={publishingLoading ? 'Loading' : 'Publishing'}\n            disabled\n            onClick={async () => {\n              if (Result) {\n                addTab({\n                  id: Result.to_id,\n                  initialValue: deep.stringify((await deep.select(Result.to_id))?.data?.[0]?.value?.value)\n                });\n                activeTab(Result.to_id);\n                setCytoEditor(Result.to_id);\n              }\n            }}\n          ><div>\n            {Result ? Result.type_id === deep.idLocal('@deep-foundation/core', 'Resolved') ? 'Published' : 'Failed' : 'Publishing'}\n            <br/>\n            <Text fontSize=\"xs\">{Result ? '(click open in editor)' : ''}</Text>\n          </div></Button>}\n        </VStack>\n      </Box>\n    </div>\n  );\n  }\n}",
        "link_id": 906
      }
    },
    {
      "id": 916,
      "type_id": 3,
      "from_id": 909,
      "to_id": 907,
      "value": {
        "id": 395,
        "value": "packageHandler",
        "link_id": 916
      }
    },
    {
      "id": 1718,
      "type_id": 1,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 1719,
      "type_id": 1718,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 1720,
      "type_id": 1718,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 1072,
      "type_id": 79,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 430,
        "value": "deepf/python-docker-isolation-provider:main",
        "link_id": 1072
      }
    },
    {
      "id": 1073,
      "type_id": 32,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 1088,
      "type_id": 3,
      "from_id": 1078,
      "to_id": 1072,
      "value": {
        "id": 437,
        "value": "PythonDockerIsolationProvider",
        "link_id": 1088
      }
    },
    {
      "id": 1089,
      "type_id": 3,
      "from_id": 1078,
      "to_id": 1073,
      "value": {
        "id": 438,
        "value": "PythonExecutionProvider",
        "link_id": 1089
      }
    },
    {
      "id": 1130,
      "type_id": 3,
      "from_id": 1123,
      "to_id": 1117,
      "value": {
        "id": 448,
        "value": "messageValue",
        "link_id": 1130
      }
    },
    {
      "id": 1131,
      "type_id": 3,
      "from_id": 1123,
      "to_id": 1116,
      "value": {
        "id": 449,
        "value": "Message",
        "link_id": 1131
      }
    },
    {
      "id": 1132,
      "type_id": 3,
      "from_id": 1123,
      "to_id": 1122,
      "value": {
        "id": 450,
        "value": "messagingTreeReply",
        "link_id": 1132
      }
    },
    {
      "id": 1172,
      "type_id": 3,
      "from_id": 1162,
      "to_id": 1161,
      "value": {
        "id": 466,
        "value": "DependencyRoot",
        "link_id": 1172
      }
    },
    {
      "id": 1198,
      "type_id": 3,
      "from_id": 1190,
      "to_id": 1185,
      "value": {
        "id": 472,
        "value": "UsesApiKey",
        "link_id": 1198
      }
    },
    {
      "id": 1199,
      "type_id": 3,
      "from_id": 1190,
      "to_id": 1186,
      "value": {
        "id": 473,
        "value": "ApiKeyValue",
        "link_id": 1199
      }
    },
    {
      "id": 1200,
      "type_id": 3,
      "from_id": 1190,
      "to_id": 1184,
      "value": {
        "id": 474,
        "value": "ApiKey",
        "link_id": 1200
      }
    },
    {
      "id": 1201,
      "type_id": 3,
      "from_id": 1190,
      "to_id": 1187,
      "value": {
        "id": 475,
        "value": "Model",
        "link_id": 1201
      }
    },
    {
      "id": 1721,
      "type_id": 2,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 657,
        "value": "@deep-foundation/boolean",
        "link_id": 1721
      }
    },
    {
      "id": 1727,
      "type_id": 3,
      "from_id": 1721,
      "to_id": 1719,
      "value": {
        "id": 659,
        "value": "false",
        "link_id": 1727
      }
    },
    {
      "id": 1738,
      "type_id": 35,
      "from_id": 145,
      "to_id": 1737
    },
    {
      "id": 1746,
      "type_id": 1,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 1747,
      "type_id": 4,
      "from_id": 1746,
      "to_id": 7
    },
    {
      "id": 1748,
      "type_id": 1,
      "from_id": 8,
      "to_id": 8
    },
    {
      "id": 1749,
      "type_id": 1,
      "from_id": 8,
      "to_id": 1718
    },
    {
      "id": 1750,
      "type_id": 1,
      "from_id": 1718,
      "to_id": 1718
    },
    {
      "id": 1751,
      "type_id": 1,
      "from_id": 8,
      "to_id": 8
    },
    {
      "id": 1752,
      "type_id": 36,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 1753,
      "type_id": 119,
      "from_id": 1752,
      "to_id": 1718
    },
    {
      "id": 1754,
      "type_id": 119,
      "from_id": 1752,
      "to_id": 1743
    },
    {
      "id": 1765,
      "type_id": 3,
      "from_id": 1758,
      "to_id": 1735,
      "value": {
        "id": 677,
        "value": "parseItInsertHandler",
        "link_id": 1765
      }
    },
    {
      "id": 1766,
      "type_id": 3,
      "from_id": 1758,
      "to_id": 1742,
      "value": {
        "id": 678,
        "value": "parseItInsertHandlerTranspiledCodeGeneratedFrom",
        "link_id": 1766
      }
    },
    {
      "id": 1767,
      "type_id": 3,
      "from_id": 1758,
      "to_id": 1733,
      "value": {
        "id": 679,
        "value": "parseItInsertHandlerTranspiledCode",
        "link_id": 1767
      }
    },
    {
      "id": 1768,
      "type_id": 3,
      "from_id": 1758,
      "to_id": 1736,
      "value": {
        "id": 680,
        "value": "updateHandler",
        "link_id": 1768
      }
    },
    {
      "id": 1769,
      "type_id": 3,
      "from_id": 1758,
      "to_id": 1740,
      "value": {
        "id": 681,
        "value": "updateHandlerCodeGeneratedFrom",
        "link_id": 1769
      }
    },
    {
      "id": 1834,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 702,
        "value": "async (req, res, next, { deep, require, gql }) => {\n    const { PassThrough, Readable } = require('stream');\n    const express = require('express');\n    const http = require('http');\n    const ApolloServer = require('apollo-server-express').ApolloServer;\n    const { ApolloServerPluginDrainHttpServer, ApolloServerPluginLandingPageGraphQLPlayground } = require('apollo-server-core');\n    const axios = require('axios');\n    const ffmpeg = require('fluent-ffmpeg');\n    const FormData = require('form-data');\n\n    function base64ToStream(base64String) {\n        const base64Data = base64String.replace(/^data:[^;]+;base64,/, '');\n        const binaryData = Buffer.from(base64Data, 'base64');\n        const stream = new Readable();\n\n        stream.push(binaryData);\n        stream.push(null);\n\n        return stream;\n    }\n\n    const typeDefs = `\n        input Voice {\n            id: Int!\n            record: String!\n            duration: Float!\n            mimeType: String!\n        }\n        type Query { deepmemo_upload(voice: Voice!): String }\n    `;\n\n    const resolvers = {\n        Query: { deepmemo_upload: async (parent, { voice: {\n            id, record, duration, mimeType\n        } }, contextValue, info) => {\n            let inputFormat;\n            if (mimeType.includes('audio/webm')) {\n                inputFormat = 'webm';\n            } else if (mimeType.includes('audio/aac')) {\n                inputFormat = 'aac';\n            } else if (mimeType.includes('audio/mp4')) {\n                inputFormat = 'mp4';\n            } else return 'not supported type';\n            return new Promise((res, rej) => {\n                    const stream = new PassThrough();\n                    let chunkData = [];\n                    stream.on('data', chunk => {\n                        chunkData.push(chunk);\n                    });\n                    ffmpeg()\n                        .input(base64ToStream(record))\n                        .inputFormat(inputFormat)\n                        // .output(stream)\n                        .outputFormat('mp3')\n                        .on('end', () => {\n                            stream.end();\n                            const byteArray = Buffer.concat(chunkData);\n                            const form = new FormData();\n                            form.append('file', byteArray, { type: 'audio/mp3', filename: `${id}.mp3` });\n                            axios.post(`http://${deep.client.path.slice(0, -4)}/file`, form, {\n                                headers: {\n                                    linkId: id,\n                                    Authorization: contextValue?.headers?.authorization,\n                                    // 'Content-Length': dataAsString.length,\n                                    // 'Content-Type': 'multipart/form-data'\n                                    // 'Content-Type': 'audio/mp3',\n                                    ...form.getHeaders(),\n                                },\n                            })\n                                .then((r) => {\n                                    res('done');\n                                })\n                                .catch((e) => {\n                                    console.error(e);\n                                    rej('error');\n                                });\n                        })\n                        .pipe(stream, { end: true });\n                        // .run();\n                // });\n            });\n        } },\n    };\n    \n    const context = ({ req }) => { return { headers: req.headers }; };\n    \n    const generateApolloServer = () => {\n        return new ApolloServer({\n            introspection: true,\n            typeDefs, \n            resolvers,\n            context,\n            plugins: [\n                ApolloServerPluginLandingPageGraphQLPlayground(),\n            ],\n        });\n    };\n\n    const router = express.Router();\n    const apolloServer = generateApolloServer();\n    await apolloServer.start();\n    apolloServer.applyMiddleware({ app: router, path: '/' });\n    router.handle(req, res);\n}",
        "link_id": 1834
      }
    },
    {
      "id": 1849,
      "type_id": 2,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 706,
        "value": "@deep-foundation/deepmemo-links",
        "link_id": 1849
      }
    },
    {
      "id": 1860,
      "type_id": 3,
      "from_id": 1849,
      "to_id": 1840,
      "value": {
        "id": 713,
        "value": "handleUploadGql",
        "link_id": 1860
      }
    },
    {
      "id": 1861,
      "type_id": 3,
      "from_id": 1849,
      "to_id": 1839,
      "value": {
        "id": 714,
        "value": "handleUpload",
        "link_id": 1861
      }
    },
    {
      "id": 1862,
      "type_id": 3,
      "from_id": 1849,
      "to_id": 1835,
      "value": {
        "id": 715,
        "value": "uploadHandler",
        "link_id": 1862
      }
    },
    {
      "id": 1863,
      "type_id": 3,
      "from_id": 1849,
      "to_id": 1834,
      "value": {
        "id": 716,
        "value": "uploadCode",
        "link_id": 1863
      }
    },
    {
      "id": 1869,
      "type_id": 3,
      "from_id": 1849,
      "to_id": 1846,
      "value": {
        "id": 722,
        "value": "Position",
        "link_id": 1869
      }
    },
    {
      "id": 1245,
      "type_id": 3,
      "from_id": 1225,
      "to_id": 1215,
      "value": {
        "id": 497,
        "value": "messagingTreeReply",
        "link_id": 1245
      }
    },
    {
      "id": 575,
      "type_id": 146,
      "from_id": 553,
      "to_id": 95,
      "value": {
        "id": 225,
        "value": "🧷",
        "link_id": 575
      }
    },
    {
      "id": 576,
      "type_id": 3,
      "from_id": 553,
      "to_id": 575,
      "value": {
        "id": 226,
        "value": "PromiseOutSymbol",
        "link_id": 576
      }
    },
    {
      "id": 577,
      "type_id": 146,
      "from_id": 553,
      "to_id": 92,
      "value": {
        "id": 227,
        "value": "💡",
        "link_id": 577
      }
    },
    {
      "id": 578,
      "type_id": 3,
      "from_id": 553,
      "to_id": 577,
      "value": {
        "id": 228,
        "value": "ActiveSymbol",
        "link_id": 578
      }
    },
    {
      "id": 716,
      "type_id": 35,
      "from_id": 83,
      "to_id": 715
    },
    {
      "id": 717,
      "type_id": 1,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 315,
        "value": "TSX",
        "link_id": 717
      }
    },
    {
      "id": 727,
      "type_id": 3,
      "from_id": 721,
      "to_id": 718,
      "value": {
        "id": 319,
        "value": "tsxSymbol",
        "link_id": 727
      }
    },
    {
      "id": 728,
      "type_id": 3,
      "from_id": 721,
      "to_id": 719,
      "value": {
        "id": 320,
        "value": "tsxValue",
        "link_id": 728
      }
    },
    {
      "id": 729,
      "type_id": 3,
      "from_id": 721,
      "to_id": 720,
      "value": {
        "id": 321,
        "value": "handleUpdate",
        "link_id": 729
      }
    },
    {
      "id": 826,
      "type_id": 3,
      "from_id": 813,
      "to_id": 807,
      "value": {
        "id": 375,
        "value": "stringContainHandleClient",
        "link_id": 826
      }
    },
    {
      "id": 831,
      "type_id": 3,
      "from_id": 813,
      "to_id": 797,
      "value": {
        "id": 380,
        "value": "Context",
        "link_id": 831
      }
    },
    {
      "id": 832,
      "type_id": 3,
      "from_id": 813,
      "to_id": 794,
      "value": {
        "id": 381,
        "value": "ContextToken",
        "link_id": 832
      }
    },
    {
      "id": 833,
      "type_id": 3,
      "from_id": 813,
      "to_id": 796,
      "value": {
        "id": 382,
        "value": "travelerSymbol",
        "link_id": 833
      }
    },
    {
      "id": 835,
      "type_id": 3,
      "from_id": 813,
      "to_id": 812,
      "value": {
        "id": 384,
        "value": "asyncFileHandleClient",
        "link_id": 835
      }
    },
    {
      "id": 907,
      "type_id": 35,
      "from_id": 145,
      "to_id": 906
    },
    {
      "id": 908,
      "type_id": 156,
      "from_id": 2,
      "to_id": 907
    },
    {
      "id": 909,
      "type_id": 2,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 392,
        "value": "@deep-foundation/npm-packager-ui",
        "link_id": 909
      }
    },
    {
      "id": 915,
      "type_id": 3,
      "from_id": 909,
      "to_id": 908,
      "value": {
        "id": 394,
        "value": "packageHandleClient",
        "link_id": 915
      }
    },
    {
      "id": 917,
      "type_id": 3,
      "from_id": 909,
      "to_id": 906,
      "value": {
        "id": 396,
        "value": "packageClientHandler",
        "link_id": 917
      }
    },
    {
      "id": 1050,
      "type_id": 23,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 1133,
      "type_id": 3,
      "from_id": 1123,
      "to_id": 1118,
      "value": {
        "id": 451,
        "value": "Reply",
        "link_id": 1133
      }
    },
    {
      "id": 1134,
      "type_id": 3,
      "from_id": 1123,
      "to_id": 1119,
      "value": {
        "id": 452,
        "value": "Author",
        "link_id": 1134
      }
    },
    {
      "id": 1146,
      "type_id": 2,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 455,
        "value": "@freephoenix888/dependency",
        "link_id": 1146
      }
    },
    {
      "id": 1208,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 477,
        "value": "async ({ data: { newLink: reply, triggeredByLinkId }, deep }) => {\n  const ml = deep.minilinks;\n\n  const startTime = Date.now();\n  const axios = await deep.import('axios');\n\n  const ChatGPT = await deep.id(deep.linkId, 'ChatGPT');\n  const Conversation = await deep.id(deep.linkId, 'Conversation');\n  const ApiKey = await deep.id('@deep-foundation/openai', 'ApiKey');\n  const UsesApiKey = await deep.id('@deep-foundation/openai', 'UsesApiKey');\n  const Model = await deep.id('@deep-foundation/openai', 'Model');\n  const UsesModel = await deep.id('@deep-foundation/openai', 'UsesModel');\n  const Message = await deep.id('@deep-foundation/messaging', 'Message');\n  const Reply = await deep.id('@deep-foundation/chatgpt-azure', 'Reply');\n  const Author = await deep.id('@deep-foundation/messaging', 'Author');\n  const messagingTree = await deep.id('@deep-foundation/messaging', 'messagingTree');\n  const System = await deep.id('@deep-foundation/chatgpt-azure', 'System');\n  const Tokens = await deep.id(\"@deep-foundation/tokens\", \"Tokens\")\n  const ProvidedBy = await deep.id(\"@deep-foundation/chatgpt-azure\", \"ProvidedBy\")\n\n  await deep.await(reply.from_id);  const { data: [message] } = await deep.select({\n    id: reply.from_id,\n    _not: { out: { to_id: ChatGPT, type_id: Author } },\n  });\n  if (!message) return 'No need to react to message of this reply.';\n  if (!message.value?.value) throw new Error(`Message (##${message?.id}) must have a value`);\n\n  ml.apply(await deep.select({\n    type_id: ApiKey,\n    in: { from_id: triggeredByLinkId, type_id: UsesApiKey },\n    return: {\n      uses: { relation: 'in', type_id: UsesApiKey },\n    },\n  }), 'apikey');\n\n  const apikeys = ml.select({ type_id: ApiKey });\n  const useses = ml.select({ tyoe_id: UsesApiKey, to: { type_id: ApiKey } });\n  \n  if (!apikeys.length) throw new Error(`ApiKey not founded`);\n  if (useses.length > 1) throw new Error(`More than 1 links of type UsesApiKey are found`);\n  if (!apikeys[0]?.value?.value) throw new Error(`ApiKey ##${apikeys[0]?.id} has no value`);\n\n  const { data: [conversation] } = await deep.select({\n    type_id: Conversation,\n    down: { tree_id: messagingTree, link_id: reply.id }\n  });\n  if (!conversation) return 'Conversation upper not founded.';\n\n  const messagesByReply = await deep.select({\n    type_id: Message,\n    down: { tree_id: messagingTree, link_id: reply.from_id },\n    order_by: { id: 'asc' },\n    return: {\n      authors: { relation: 'out', type_id: Author },\n      tokens: { relation: 'out', type_id: Tokens },\n    }\n  });\n  ml.apply(messagesByReply, 'messagesByReply');\n\n  const messagesById = await deep.select({\n    id: { _nin: messagesByReply.data.map(l => l.id) },\n    type_id: Message,\n    up: { tree_id: messagingTree, parent_id: conversation.id },\n    order_by: { id: 'asc' },\n    return: {\n      authors: { relation: 'out', type_id: Author },\n      tokens: { relation: 'out', type_id: Tokens },\n    }\n  });\n  ml.apply(messagesById, 'messagesById');\n\n  const messagesToSend = [...messagesById.data, ...messagesByReply.data];\n  const models = await deep.select({\n    type_id: Model,\n    in: { type_id: UsesModel, from_id: { _in: [conversation.id, triggeredByLinkId] } },\n    return: {\n      usesModel: { relation: 'in', type_id: UsesModel },\n      tokens: { relation: 'out', type_id: Tokens },\n      providedBy: {\n        relation: 'out', type_id: ProvidedBy,\n        return: {\n          endpoint: { relation: 'to' }\n        },\n      },\n    },\n  });\n  ml.apply(models, 'models');\n\n  const [userLinkedModel] = ml.select({ type_id: Model, in: { type_id: UsesModel, from_id: triggeredByLinkId } });\n  if (!userLinkedModel) throw new Error(`UsersModel from triggeredByLinkId ${triggeredByLinkId} to Model not founded.`);\n  const [userLinkedModelTokens] = ml.select({ type_id: Tokens, from_id: userLinkedModel?.id });\n  const [linkedModel] = ml.select({ type_id: Model, in: { type_id: UsesModel, from_id: conversation.id } });\n  \n  const MAX_TOKENS = userLinkedModelTokens?.value?.value;\n  if (!MAX_TOKENS) throw new Error(`MAX_TOKENS Tokens (##${userLinkedModelTokens?.id}) .value from model not founded.`);\n  \n  const endpoint = ml.select({ in: { type_id: ProvidedBy } })[0];\n  const API_ENDPOINT = endpoint?.value?.value;\n  if (!API_ENDPOINT) throw new Error(`API_ENDPOINT Endpoint (##${endpoint?.id}) instance.value nout founded.`);\n  \n  const model = linkedModel?.value?.value || userLinkedModel?.value?.value;\n  if(!model) throw new Error(`UsersModel from conversation.id (##${conversation.id}) to Model not founded.`);\n\n  let preparedMessages = messagesToSend.map((link) => {\n    const tokens = ml.select({ type_id: Tokens, from_id: link.id })[0]?.value?.value;\n    return {\n      role: ml.select({ type_id: Author, from_id: link.id })[0]?.to_id === ChatGPT ? 'assistant' : 'user',\n      content: link.value.value,\n      tokens: ml.select({ type_id: Tokens, from_id: link.id })[0]?.value?.value,\n    }\n  });\n\n  const systems = await deep.select({\n    type_id: System, to_id: { _in: [triggeredByLinkId, conversation.id] },\n    return: {\n      message: { relation: 'from' },\n      conversation: { relation: 'to' },\n      tokens: { relation: 'in', type_id: Tokens },\n    },\n  });\n  ml.apply(systems, 'systems');\n\n  const conversationSystem = ml.select({ type_id: System, to_id: conversation.id })?.[0];\n  if (!!conversationSystem && !conversationSystem?.value?.value) throw new Error(`System .value to conversation not defined`);\n  const userSystems = ml.select({ type_id: System, to_id: triggeredByLinkId });\n  if (userSystems.length > 1) throw new Error(\"Multiple system messages linked to the user are found\");\n  const userSystem = userSystems[0];\n\n  const systemMessage = conversationSystem?.from || userSystem?.from;\n  if (systemMessage) {\n    if (!systemMessage?.value?.value) throw new Error(`System (##${systemMessage?.id}) .from Message.value not founded`);\n    preparedMessages.unshift({ role: 'system', content: systemMessage?.value?.value });\n  }\n\n  const tokenLimit = MAX_TOKENS * 7 / 8;\n  let totalTokens = 0;\n  let messages = [];\n\n  for (let i = preparedMessages.length - 1; i >= 0; i--) {\n    const message = preparedMessages[i];\n    if (message.role === 'system' || totalTokens + message.tokens <= tokenLimit) {\n      messages.unshift({ role: message.role, content: message.content });\n      totalTokens += message.tokens;\n    } else {\n      break;\n    }\n  }\n\n  let response;\n  try {\n    response = await axios.post(API_ENDPOINT, { messages }, {\n      headers: { 'Content-Type': 'application/json', 'api-key': apikeys[0]?.value?.value },\n    });\n  } catch (error) {\n    console.error('Error making API call:', error.response ? error.response.data : error.message);\n  }\n\n  const content = response.data.choices[0]?.message?.content;\n  await deep.insert({\n    type_id: Message,\n    string: { data: { value: content } },\n    out: { data: [\n      { type_id: Author, to_id: ChatGPT },\n      { type_id: Reply, to_id: reply.from_id },\n    ] },\n  });\n\n  const endTime = Date.now();\n  const duration = (endTime - startTime) / 1000;\n\n  ml.remove(Object.keys(ml.byId));\n\n  return {\n    request: { model, messages },\n    response: response.data,\n    duration, totalTokens,\n  };\n};",
        "link_id": 1208
      }
    },
    {
      "id": 1,
      "type_id": 1,
      "from_id": 8,
      "to_id": 8
    },
    {
      "id": 2,
      "type_id": 1,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 3,
      "type_id": 1,
      "from_id": 8,
      "to_id": 8
    },
    {
      "id": 4,
      "type_id": 1,
      "from_id": 8,
      "to_id": 1
    },
    {
      "id": 5,
      "type_id": 1,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 6,
      "type_id": 1,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 7,
      "type_id": 1,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 8,
      "type_id": 1,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 9,
      "type_id": 1,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 10,
      "type_id": 1,
      "from_id": 8,
      "to_id": 9
    },
    {
      "id": 11,
      "type_id": 1,
      "from_id": 9,
      "to_id": 8
    },
    {
      "id": 12,
      "type_id": 1,
      "from_id": 9,
      "to_id": 8
    },
    {
      "id": 13,
      "type_id": 4,
      "from_id": 1,
      "to_id": 5
    },
    {
      "id": 14,
      "type_id": 4,
      "from_id": 2,
      "to_id": 5
    },
    {
      "id": 15,
      "type_id": 1,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 16,
      "type_id": 1,
      "from_id": 15,
      "to_id": 8
    },
    {
      "id": 17,
      "type_id": 1,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 18,
      "type_id": 1,
      "from_id": 17,
      "to_id": 15
    },
    {
      "id": 19,
      "type_id": 1,
      "from_id": 17,
      "to_id": 15
    },
    {
      "id": 20,
      "type_id": 1,
      "from_id": 17,
      "to_id": 15
    },
    {
      "id": 21,
      "type_id": 4,
      "from_id": 3,
      "to_id": 5
    },
    {
      "id": 22,
      "type_id": 1,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 23,
      "type_id": 1,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 24,
      "type_id": 4,
      "from_id": 23,
      "to_id": 5
    },
    {
      "id": 25,
      "type_id": 23,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 26,
      "type_id": 23,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 27,
      "type_id": 23,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 28,
      "type_id": 23,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 29,
      "type_id": 1,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 30,
      "type_id": 29,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 31,
      "type_id": 4,
      "from_id": 30,
      "to_id": 5
    },
    {
      "id": 32,
      "type_id": 1,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 33,
      "type_id": 32,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 34,
      "type_id": 1,
      "from_id": 1,
      "to_id": 8
    },
    {
      "id": 35,
      "type_id": 1,
      "from_id": 82,
      "to_id": 8
    },
    {
      "id": 36,
      "type_id": 1,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 37,
      "type_id": 34,
      "from_id": 36,
      "to_id": 8
    },
    {
      "id": 316,
      "type_id": 3,
      "from_id": 184,
      "to_id": 132,
      "value": {
        "id": 138,
        "value": "ruleTreeRuleObject",
        "link_id": 316
      }
    },
    {
      "id": 317,
      "type_id": 3,
      "from_id": 184,
      "to_id": 133,
      "value": {
        "id": 139,
        "value": "ruleTreeRuleSubject",
        "link_id": 317
      }
    },
    {
      "id": 38,
      "type_id": 34,
      "from_id": 36,
      "to_id": 8
    },
    {
      "id": 42,
      "type_id": 39,
      "from_id": 40,
      "to_id": 8
    },
    {
      "id": 43,
      "type_id": 1,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 44,
      "type_id": 4,
      "from_id": 43,
      "to_id": 5
    },
    {
      "id": 45,
      "type_id": 1,
      "from_id": 43,
      "to_id": 2
    },
    {
      "id": 46,
      "type_id": 1,
      "from_id": 43,
      "to_id": 2
    },
    {
      "id": 47,
      "type_id": 4,
      "from_id": 46,
      "to_id": 5
    },
    {
      "id": 48,
      "type_id": 1,
      "from_id": 1,
      "to_id": 1
    },
    {
      "id": 49,
      "type_id": 48,
      "from_id": 8,
      "to_id": 35
    },
    {
      "id": 50,
      "type_id": 48,
      "from_id": 8,
      "to_id": 35
    },
    {
      "id": 51,
      "type_id": 48,
      "from_id": 8,
      "to_id": 35
    },
    {
      "id": 134,
      "type_id": 39,
      "from_id": 129,
      "to_id": 15
    },
    {
      "id": 135,
      "type_id": 39,
      "from_id": 129,
      "to_id": 58
    },
    {
      "id": 136,
      "type_id": 37,
      "from_id": 129,
      "to_id": 16
    },
    {
      "id": 137,
      "type_id": 37,
      "from_id": 129,
      "to_id": 72
    },
    {
      "id": 138,
      "type_id": 37,
      "from_id": 129,
      "to_id": 73
    },
    {
      "id": 161,
      "type_id": 1,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 223,
      "type_id": 3,
      "from_id": 184,
      "to_id": 39,
      "value": {
        "id": 45,
        "value": "TreeIncludeNode",
        "link_id": 223
      }
    },
    {
      "id": 260,
      "type_id": 3,
      "from_id": 184,
      "to_id": 76,
      "value": {
        "id": 82,
        "value": "scheduleValue",
        "link_id": 260
      }
    },
    {
      "id": 318,
      "type_id": 3,
      "from_id": 184,
      "to_id": 134,
      "value": {
        "id": 140,
        "value": "ruleTreeRuleSelector",
        "link_id": 318
      }
    },
    {
      "id": 319,
      "type_id": 3,
      "from_id": 184,
      "to_id": 135,
      "value": {
        "id": 141,
        "value": "ruleTreeRuleQuery",
        "link_id": 319
      }
    },
    {
      "id": 348,
      "type_id": 3,
      "from_id": 184,
      "to_id": 164,
      "value": {
        "id": 170,
        "value": "SupportsCompatable",
        "link_id": 348
      }
    },
    {
      "id": 349,
      "type_id": 3,
      "from_id": 184,
      "to_id": 165,
      "value": {
        "id": 171,
        "value": "plv8JSSupportsCompatableHandleInsert",
        "link_id": 349
      }
    },
    {
      "id": 579,
      "type_id": 146,
      "from_id": 553,
      "to_id": 85,
      "value": {
        "id": 229,
        "value": "📤",
        "link_id": 579
      }
    },
    {
      "id": 718,
      "type_id": 146,
      "from_id": 717,
      "to_id": 717,
      "value": {
        "id": 316,
        "value": "📑",
        "link_id": 718
      }
    },
    {
      "id": 719,
      "type_id": 4,
      "from_id": 717,
      "to_id": 5
    },
    {
      "id": 720,
      "type_id": 50,
      "from_id": 717,
      "to_id": 716
    },
    {
      "id": 721,
      "type_id": 2,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 317,
        "value": "@deep-foundation/tsx",
        "link_id": 721
      }
    },
    {
      "id": 731,
      "type_id": 3,
      "from_id": 721,
      "to_id": 715,
      "value": {
        "id": 323,
        "value": "compiler",
        "link_id": 731
      }
    },
    {
      "id": 744,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 326,
        "value": "async ({ deep, require, gql, data: { triggeredByLinkId, newLink } }) => {\n  const fs = await deep.import('fs');\n  const encoding = 'utf8';\n  const deepPackageKeyWord = 'deep-package';\n  \n  const makeTempDirectory = async () => {\n    const os = await deep.import('os');\n    const { v4: uuid } = await deep.import('uuid');\n    \n    const baseTempDirectory = os.tmpdir();\n    const randomId = uuid();\n    const tempDirectory = [baseTempDirectory,randomId].join('/');\n    fs.mkdirSync(tempDirectory);\n    console.log(tempDirectory);\n    return tempDirectory;\n  };\n  const npmInstall = async (packageName, installationPath, setTildaPrefix) => {\n    const execSync = (await deep.import('child_process')).execSync;\n\n    if (setTildaPrefix === true) {\n      const savePrefixCommand = `npm --prefix \"${installationPath}\" config set save-prefix=\"~\"`;\n      try {\n        const output = execSync(savePrefixCommand, { \n          encoding: 'utf-8',\n          cwd: installationPath\n        }).toString();\n        console.log(`${savePrefixCommand}\\n`, output);\n      } catch(error) {\n        return {\n          rejected: error\n        };\n      }\n    }\n  \n    let result;\n    const command = `npm --prefix \"${installationPath}\" i ${packageName}`;\n    try {\n      const output = execSync(command, { \n        encoding: 'utf-8',\n        cwd: installationPath\n      }).toString();\n      console.log(`${command}\\n`, output);\n      result = {\n        resolved: {\n          status: 0,\n          stdout: output\n        }\n      };\n    } catch(error) {\n      return {\n        rejected: error\n      };\n    }\n\n    if (setTildaPrefix === true) {\n      const deletePrefixCommand = `npm --prefix \"${installationPath}\" config delete save-prefix`;\n      try {\n        const output = execSync(deletePrefixCommand, { \n          encoding: 'utf-8',\n          cwd: installationPath\n        }).toString();\n        console.log(`${deletePrefixCommand}\\n`, output);\n      } catch(error) {\n        return {\n          rejected: error\n        };\n      }\n    }\n\n    return result;\n  };\n  const npmLogin = async (token, tempDirectory) => {\n    const execSync = (await deep.import('child_process')).execSync;\n  \n    const command = `npm set \"//registry.npmjs.org/:_authToken\" ${token}`;\n    const output = execSync(command, { \n        encoding: 'utf-8',\n        cwd: tempDirectory\n    });\n    console.log(`${command}\\n`, output);\n    return output;\n  };\n  const npmPublish = async (tempDirectory) => {\n    const execSync = (await deep.import('child_process')).execSync;\n  \n    const command = `npm publish --access public`;\n    const output = execSync(command, { \n        encoding: 'utf-8',\n        cwd: tempDirectory\n    });\n    console.log(`${command}\\n`, output);\n    return output;\n  };\n  const makeDeepPackagePath = (tempDirectory, packageName) => [tempDirectory, 'node_modules', packageName].join('/');\n  const makeDeepJsonPath = (packagePath) => [packagePath, 'deep.json'].join('/');\n  const makePackageJsonPath = (packagePath) => [packagePath, 'package.json'].join('/');\n  const deepExport = async (packageId) => {\n    const packager = new (await deep.import('@deep-foundation/deeplinks/imports/packager.js')).Packager(deep);\n    const exported = await packager.export({ packageLinkId: packageId });\n    console.log(exported);\n    if (exported?.errors?.length) throw exported;\n    return exported;\n  };\n  const loadNpmToken = async () => {\n    const containTreeId = await deep.id('@deep-foundation/core', 'containTree');\n    const tokenTypeId = await deep.id('@deep-foundation/npm-packager', 'Token');\n    const { data: [{ value: { value: npmToken = undefined } = {}} = {}] = []} = await deep.select({\n      up: {\n        tree_id: { _eq: containTreeId },\n        parent: { id: { _eq: triggeredByLinkId } },\n        link: { type_id: { _eq: tokenTypeId } }\n      }\n    });\n    return npmToken;\n  };\n  const loadFromJson = (path) => {\n    if (!fs.existsSync(path)) {\n      throw new Error(`${path} is not found.`);\n    }\n    const json = fs.readFileSync(path, { encoding });\n    if (!json) {\n      throw new Error(`${path} is empty or was not read properly.`);\n    }\n    console.log(`Parsing ${path} ...`);\n    const data = JSON.parse(json);\n    console.log(`Parsing ${path} finished.`);\n    return data;\n  }\n  const saveAsJson = (path, data) => {\n    fs.writeFileSync(path, JSON.stringify(data, null, 2), { encoding });\n  }\n  const updateVersion = async (deepJsonPath, packageJsonPath, localVersion) => {\n    const semver = await deep.import('semver');\n\n    const deepPackage = loadFromJson(deepJsonPath);\n    const npmPackage = loadFromJson(packageJsonPath);\n\n    const oldNpmVersion = npmPackage?.version || '0.0.0';\n\n    const nextVersion = semver.gt(localVersion, oldNpmVersion) ? localVersion : semver.inc(oldNpmVersion, 'patch');\n\n    npmPackage.version = nextVersion;\n    if (!deepPackage.package) {\n      deepPackage.package = {};\n    }\n    deepPackage.package.version = nextVersion;  \n\n    saveAsJson(deepJsonPath, deepPackage);\n    saveAsJson(packageJsonPath, npmPackage);\n\n    return nextVersion;\n  };\n  const addKeyword = (packageJsonPath, keyword) => {\n    const npmPackage = loadFromJson(packageJsonPath);\n    if (npmPackage?.keywords?.length > 0) {\n      if (!npmPackage.keywords.includes(keyword)) {\n        npmPackage.keywords.push(keyword); \n      }\n    } else {\n      npmPackage.keywords = [ keyword ];\n    }\n    saveAsJson(packageJsonPath, npmPackage);\n  };\n  const installDependencies = async (packagePath, dependencies) => {\n    for (const dependency of dependencies) {\n      const dependencyPackageName = `${dependency.name}@${dependency.version}`;\n      const installationResult = await npmInstall(dependencyPackageName, packagePath, true);\n      if (installationResult?.rejected) {\n        console.log(`Unable to install ${dependencyPackageName} dependency.`)\n        throw installationResult.rejected;\n      } else if (!installationResult?.resolved) {\n        throw new Error(`Unsupported NPM dependency installation result for ${dependencyPackageName} dependency package.`);\n      }\n    }\n  }\n\n  if (!triggeredByLinkId) {\n    throw new Error('Publish link should be inserted using JWT token (role link), it cannot be inserted using hasura secret (role admin).');\n  }\n\n  const { data: [packageQuery] } = await deep.select({ id: newLink.to_id });\n  const packageName = packageQuery?.value?.value;\n  if (!packageName) {\n    throw new Error('Package query value is empty.');\n  }\n  const packageVersionTypeId = await deep.id('@deep-foundation/core', 'PackageVersion');\n  const { data: [{ versions: [{ version: { value: localVersion = undefined } = {}} = {}] = []} = {}] = []} = await deep.select({ id: newLink.from_id }, { returning: `id versions: in(where: { type_id: { _eq: ${packageVersionTypeId} } }) { id type_id version: value }` });\n  if (!localVersion) {\n    throw new Error('Package must have a version.');\n  }\n\n  const packageId = newLink.from_id;\n  const { data: [{ value: actualPackageName }]} = await deep.select(\n    { link_id: { _eq: packageId } },\n    {\n      table: 'strings',\n      returning: 'value'\n    }\n  );\n  if (packageName !== actualPackageName) {\n    throw new Error('Package query value should be equal to actual package name.');\n  }\n  const tempDirectory = await makeTempDirectory();\n  try {\n    const npmToken = await loadNpmToken();\n    if (!npmToken) {\n      throw new Error('NPM token is required to publish package. NPM token should be contained by user that does insert publish link.');\n    }\n    await npmLogin(npmToken, tempDirectory);\n    const installationResult = await npmInstall(packageName, tempDirectory, false);\n    let deepPackagePath; \n    let packageJsonPath;\n    if (installationResult?.resolved) {\n      deepPackagePath = makeDeepPackagePath(tempDirectory, packageName);\n      packageJsonPath = makePackageJsonPath(deepPackagePath);\n    } else if(installationResult?.rejected) {\n      deepPackagePath = tempDirectory;\n      packageJsonPath = makePackageJsonPath(deepPackagePath);\n      const packageJson = {\n        name: packageName\n      };\n      saveAsJson(packageJsonPath, packageJson);\n    } else {\n      throw new Error(`Unsupported NPM installation result for ${packageName} package.`);\n    }\n    console.log('deepPackagePath', deepPackagePath);\n    console.log('packageJsonPath', packageJsonPath);\n    \n    const pkg = await deepExport(packageId);\n    console.log(pkg);\n    await installDependencies(deepPackagePath, pkg.dependencies);\n    const deepJsonPath = makeDeepJsonPath(deepPackagePath);\n    saveAsJson(deepJsonPath, pkg);\n    const nextVersion = await updateVersion(deepJsonPath, packageJsonPath, localVersion);\n    addKeyword(packageJsonPath, deepPackageKeyWord);\n    await npmPublish(deepPackagePath);\n    if (nextVersion !== localVersion) {\n      await deep.update({\n        link: {\n          type_id: { _eq: await deep.id('@deep-foundation/core', 'PackageVersion') },\n          to_id: { _eq: packageId },\n        },\n      }, { value: nextVersion }, { table: 'strings' });\n    }\n  } finally {\n    fs.rmSync(tempDirectory, { recursive: true, force: true });\n  }\n}",
        "link_id": 744
      }
    },
    {
      "id": 751,
      "type_id": 49,
      "from_id": 750,
      "to_id": 745
    },
    {
      "id": 753,
      "type_id": 1,
      "from_id": 752,
      "to_id": 2
    },
    {
      "id": 754,
      "type_id": 1,
      "from_id": 752,
      "to_id": 2
    },
    {
      "id": 755,
      "type_id": 49,
      "from_id": 752,
      "to_id": 747
    },
    {
      "id": 756,
      "type_id": 2,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 328,
        "value": "@deep-foundation/npm-packager",
        "link_id": 756
      }
    },
    {
      "id": 769,
      "type_id": 3,
      "from_id": 756,
      "to_id": 750,
      "value": {
        "id": 337,
        "value": "Publish",
        "link_id": 769
      }
    },
    {
      "id": 770,
      "type_id": 3,
      "from_id": 756,
      "to_id": 755,
      "value": {
        "id": 338,
        "value": "installCodeHandleInsert",
        "link_id": 770
      }
    },
    {
      "id": 771,
      "type_id": 3,
      "from_id": 756,
      "to_id": 747,
      "value": {
        "id": 339,
        "value": "installCodeHandler",
        "link_id": 771
      }
    },
    {
      "id": 772,
      "type_id": 3,
      "from_id": 756,
      "to_id": 746,
      "value": {
        "id": 340,
        "value": "installCode",
        "link_id": 772
      }
    },
    {
      "id": 773,
      "type_id": 3,
      "from_id": 756,
      "to_id": 752,
      "value": {
        "id": 341,
        "value": "Install",
        "link_id": 773
      }
    },
    {
      "id": 836,
      "type_id": 3,
      "from_id": 813,
      "to_id": 811,
      "value": {
        "id": 385,
        "value": "asyncFileHandler",
        "link_id": 836
      }
    },
    {
      "id": 1051,
      "type_id": 2,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 425,
        "value": "@deep-foundation/unsafe",
        "link_id": 1051
      }
    },
    {
      "id": 1629,
      "type_id": 3,
      "from_id": 1616,
      "to_id": 1602,
      "value": {
        "id": 630,
        "value": "onActiveInsertHandler",
        "link_id": 1629
      }
    },
    {
      "id": 1630,
      "type_id": 3,
      "from_id": 1616,
      "to_id": 1601,
      "value": {
        "id": 631,
        "value": "onActiveInsert",
        "link_id": 1630
      }
    },
    {
      "id": 1635,
      "type_id": 3,
      "from_id": 1616,
      "to_id": 1607,
      "value": {
        "id": 636,
        "value": "onTelegramIn",
        "link_id": 1635
      }
    },
    {
      "id": 1739,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 668,
        "value": "import { DeepClient } from \"@deep-foundation/deeplinks/imports/client.js\";\nimport { Link } from \"@deep-foundation/deeplinks/imports/minilinks.js\";\nimport { DeepClientInstance } from \"@deep-foundation/deeplinks/imports/client\";\n\nasync (options: {\n  deep: DeepClient;\n  data: {\n    newLink: Link<number>;\n    promiseId: number;\n  };\n}) => {\n  const {\n    deep,\n    data: { newLink: rootLink, promiseId },\n  } = options;\n  await new Promise(res => {\n    const unsubscribe = deep.subscribe({\n      up: { tree_id: deep.idLocal('@deep-foundation/core', 'promiseTree'), parent_id: rootLink.id },\n      type_id: deep.idLocal('@deep-foundation/core', 'Promise'),\n      id: { _lte: promiseId },\n      _not: {\n          down: {\n              tree_id: deep.idLocal('@deep-foundation/core', 'promiseTree'),\n              link: {\n                  type_id: { _in: [deep.idLocal('@deep-foundation/core', 'Resolved'), deep.idLocal('@deep-foundation/core', 'Rejected')] }\n              }\n          }\n      },\n    }).subscribe({ next: (links) => {\n      console.log('updateHandlerCode next', links);\n      if (!links.length) {\n        unsubscribe();\n        res();\n      }\n    }, error: (err) => {\n      unsubscribe();\n      console.log('updateHandlerCode error', err);\n    } });\n  });\n  const { default: ts } = await import(\"typescript\");\n  const { default: util } = await import(\"util\");\n  try {\n    const result = await main();\n    return {\n      result: util.inspect(result),\n    };\n  } catch (error) {\n    throw {\n      error: util.inspect(error),\n    };\n  }\n\n  async function main() {\n    let obj;\n    if (typeof rootLink.value?.value === \"object\") {\n      obj = rootLink.value?.value;\n    } else if (typeof rootLink.value?.value === \"string\") {\n      try {\n        obj = JSON.parse(rootLink.value?.value);\n      } catch (error) {\n        throw new Error(\n          `##${rootLink.id} must be valid JSON if it is a string`,\n        );\n      }\n    } else {\n      throw new Error(`##${rootLink.id} must have value`);\n    }\n    if (!obj) {\n      throw new Error(`##${rootLink.id} must have value`);\n    }\n\n    const clientHandlerResult = await callClientHandler({\n      deep,\n      linkId: await deep.id(deep.linkId!, \"clientHandler\"),\n      args: [\n        {\n          deep: deep,\n          obj: obj,\n          rootLinkId: rootLink.id,\n          resultLinkId: rootLink.to_id,\n          // TODO?\n          // customMethods: options.customMethods,\n        },\n      ],\n    });\n\n    return clientHandlerResult;\n  }\n\n  async function callClientHandler(\n    options: CallClientHandlerOptions,\n  ): Promise<any> {\n    const { linkId, deep, args } = options;\n    const code = await deep\n      .select({\n        in: {\n          id: linkId,\n        },\n      })\n      .then((result) => {\n        const link = result.data[0];\n        if (!link)\n          throw new Error(`Unable to find SyncTextFile for ##${linkId}`);\n        const code = link.value?.value;\n        if (!code) throw new Error(`##${link.id} must have value`);\n        return code;\n      });\n\n    const functionExpressionString = ts\n      .transpileModule(code, {\n        compilerOptions: {\n          module: ts.ModuleKind.ESNext,\n          sourceMap: true,\n          target: ts.ScriptTarget.ESNext,\n        },\n      })\n      .outputText.replace(\"export {}\", \"\");\n    const fn: Function = eval(functionExpressionString);\n\n    const result = await fn(...args);\n    return result;\n  }\n\n  interface CallClientHandlerOptions {\n    deep: DeepClientInstance;\n    linkId: number;\n    args: Array<any>;\n  }\n};\n",
        "link_id": 1739
      }
    },
    {
      "id": 1162,
      "type_id": 2,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 460,
        "value": "@deep-foundation/chatgpt-tokens-gpt-4-encoder",
        "link_id": 1162
      }
    },
    {
      "id": 1190,
      "type_id": 2,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 468,
        "value": "@deep-foundation/openai",
        "link_id": 1190
      }
    },
    {
      "id": 1216,
      "type_id": 1,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 1220,
      "type_id": 4,
      "from_id": 1219,
      "to_id": 5
    },
    {
      "id": 1221,
      "type_id": 1,
      "from_id": 1187,
      "to_id": 1219
    },
    {
      "id": 1222,
      "type_id": 1,
      "from_id": 1116,
      "to_id": 8
    },
    {
      "id": 1238,
      "type_id": 3,
      "from_id": 1225,
      "to_id": 1214,
      "value": {
        "id": 490,
        "value": "replyHandleInsert",
        "link_id": 1238
      }
    },
    {
      "id": 1239,
      "type_id": 3,
      "from_id": 1225,
      "to_id": 1210,
      "value": {
        "id": 491,
        "value": "replyInsertHandler",
        "link_id": 1239
      }
    },
    {
      "id": 1244,
      "type_id": 3,
      "from_id": 1225,
      "to_id": 1222,
      "value": {
        "id": 496,
        "value": "System",
        "link_id": 1244
      }
    },
    {
      "id": 1296,
      "type_id": 1219,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 502,
        "value": "https://deep-ai.openai.azure.com/openai/deployments/gpt-4/chat/completions?api-version=2023-03-15-preview",
        "link_id": 1296
      }
    },
    {
      "id": 1297,
      "type_id": 1219,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 503,
        "value": "https://deep-ai.openai.azure.com/openai/deployments/gpt-35-16k/chat/completions?api-version=2023-03-15-preview",
        "link_id": 1297
      }
    },
    {
      "id": 39,
      "type_id": 34,
      "from_id": 36,
      "to_id": 8
    },
    {
      "id": 40,
      "type_id": 36,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 584,
      "type_id": 3,
      "from_id": 553,
      "to_id": 583,
      "value": {
        "id": 234,
        "value": "SupportsSymbol",
        "link_id": 584
      }
    },
    {
      "id": 585,
      "type_id": 146,
      "from_id": 553,
      "to_id": 77,
      "value": {
        "id": 235,
        "value": "🚦",
        "link_id": 585
      }
    },
    {
      "id": 730,
      "type_id": 3,
      "from_id": 721,
      "to_id": 716,
      "value": {
        "id": 322,
        "value": "handler",
        "link_id": 730
      }
    },
    {
      "id": 1157,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 459,
        "value": "import tiktoken\r\n\r\nasync def fn(arg):\r\n    deep = arg['deep']\r\n    print(arg)\r\n\r\n    message_link = arg['data']['newLink']\r\n    triggeredByLinkId = arg['data']['triggeredByLinkId']\r\n    \r\n    encoding = tiktoken.encoding_for_model(\"gpt-4\")\r\n    \r\n    tokens_count = len(encoding.encode(message_link['value']['value']))\r\n    \r\n    type_id_tokens = await deep.id(\"@deep-foundation/tokens\", \"Tokens\")\r\n    type_id_contain = await deep.id(\"@deep-foundation/core\", \"Contain\")\r\n    \r\n    await deep.insert({\r\n        'type_id': type_id_tokens,\r\n        'from_id': message_link['id'],\r\n        'to_id': message_link['id'],\r\n        'number': {'data': {'value': tokens_count}},\r\n    })\r\n    \r\n    return tokens_count\r\n",
        "link_id": 1157
      }
    },
    {
      "id": 1225,
      "type_id": 2,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 481,
        "value": "@deep-foundation/chatgpt-azure",
        "link_id": 1225
      }
    },
    {
      "id": 1299,
      "type_id": 1219,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 505,
        "value": "https://deep-ai-west-us-3.openai.azure.com/openai/deployments/gpt-4o/chat/completions?api-version=2023-03-15-preview",
        "link_id": 1299
      }
    },
    {
      "id": 1370,
      "type_id": 3,
      "from_id": 1364,
      "to_id": 1363,
      "value": {
        "id": 539,
        "value": "handler",
        "link_id": 1370
      }
    },
    {
      "id": 1371,
      "type_id": 3,
      "from_id": 1364,
      "to_id": 1361,
      "value": {
        "id": 540,
        "value": "textValue",
        "link_id": 1371
      }
    },
    {
      "id": 1402,
      "type_id": 1,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 763,
      "type_id": 3,
      "from_id": 756,
      "to_id": 754,
      "value": {
        "id": 331,
        "value": "Used",
        "link_id": 763
      }
    },
    {
      "id": 764,
      "type_id": 3,
      "from_id": 756,
      "to_id": 749,
      "value": {
        "id": 332,
        "value": "tokenValue",
        "link_id": 764
      }
    },
    {
      "id": 765,
      "type_id": 3,
      "from_id": 756,
      "to_id": 748,
      "value": {
        "id": 333,
        "value": "Token",
        "link_id": 765
      }
    },
    {
      "id": 766,
      "type_id": 3,
      "from_id": 756,
      "to_id": 751,
      "value": {
        "id": 334,
        "value": "publishCodeHandleInsert",
        "link_id": 766
      }
    },
    {
      "id": 767,
      "type_id": 3,
      "from_id": 756,
      "to_id": 745,
      "value": {
        "id": 335,
        "value": "publishCodeHandler",
        "link_id": 767
      }
    },
    {
      "id": 768,
      "type_id": 3,
      "from_id": 756,
      "to_id": 744,
      "value": {
        "id": 336,
        "value": "publishCode",
        "link_id": 768
      }
    },
    {
      "id": 837,
      "type_id": 3,
      "from_id": 813,
      "to_id": 810,
      "value": {
        "id": 386,
        "value": "asyncFileClientHandler",
        "link_id": 837
      }
    },
    {
      "id": 1456,
      "type_id": 15,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 1457,
      "type_id": 19,
      "from_id": 1452,
      "to_id": 1456
    },
    {
      "id": 1458,
      "type_id": 16,
      "from_id": 1456,
      "to_id": 1116
    },
    {
      "id": 1459,
      "type_id": 70,
      "from_id": 1458,
      "to_id": 40
    },
    {
      "id": 1460,
      "type_id": 16,
      "from_id": 1456,
      "to_id": 1118
    },
    {
      "id": 1461,
      "type_id": 70,
      "from_id": 1460,
      "to_id": 40
    },
    {
      "id": 1467,
      "type_id": 70,
      "from_id": 1466,
      "to_id": 40
    },
    {
      "id": 1471,
      "type_id": 35,
      "from_id": 83,
      "to_id": 1470
    },
    {
      "id": 1472,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 560,
        "value": "async ({ deep, data: { newLink, triggeredByLinkId }, require }) => {\n    const { Telegraf } = require('telegraf');\n    const Markup = require('telegraf/markup');\n\n    const Bot = await deep.id('@deep-foundation/telegram-bot', 'Bot');\n    const Token = await deep.id('@deep-foundation/telegram-bot', 'Token');\n    const Active = await deep.id('@deep-foundation/telegram-bot', 'Active');\n    const Conversation = await deep.id('@deep-foundation/telegram-bot', 'Conversation');\n    const HandleTelegramBotOut = await deep.id('@deep-foundation/telegram-bot', 'HandleTelegramBotOut');\n    const messagingTree = await deep.id('@deep-foundation/messaging', 'messagingTree');\n    const containTree = deep.idLocal('@deep-foundation/core', 'containTree');\n    const Contain = deep.idLocal('@deep-foundation/core', 'Contain');\n\n    function splitStringIntoChunks(str, chunkSize = 4096) {\n        const chunks = [];\n        for (let i = 0, len = str.length; i < len; i += chunkSize) {\n            chunks.push(str.substring(i, i + chunkSize));\n        }\n        return chunks;\n    }\n\n    const botId = (await deep.select({\n        type_id: Bot,\n        down: {\n            tree_id: containTree,\n            link_id: triggeredByLinkId\n        },\n    }))?.data?.[0]?.id;\n    if (!botId) {\n        const botId = (await deep.select({\n            type_id: Bot,\n            down: {\n                tree_id: messagingTree,\n                link_id: newLink.id,\n            },\n        }))?.data?.[0]?.id;\n        const token = (await deep.select({\n            type_id: Token,\n            in: {\n                type_id: Active,\n                from: {\n                    down: {\n                        tree_id: messagingTree,\n                        link_id: newLink.id,\n                    },\n                },\n            },\n        }))?.data?.[0];\n        const conversationId = (await deep.select({\n            type_id: Conversation,\n            down: {\n                tree_id: messagingTree,\n                link_id: newLink.id,\n            },\n        }))?.data?.[0]?.id;\n        const replyToId = newLink.to_id;\n\n        const message = (await deep.select(newLink.from_id))?.data?.[0];\n\n        const bot = new Telegraf(token?.value?.value);\n\n        const { data: handles } = await deep.select({\n            type_id: HandleTelegramBotOut,\n            from_id: botId,\n            order_by: { id: 'asc' },\n        });\n\n        const state = {\n            defaultHandling: true,\n        };\n        const handled = {};\n        for (let h in handles) {\n            const packageId = (await deep.select({\n                out: { type_id: Contain, to_id: handles[h].to_id },\n            }))?.data?.[0]?.id;\n            if (!packageId) {\n                handled[handles[h].to_id] = { error: `!packageId by handler(${handles[h].to_id}).in(Contain).from` };\n                continue;\n            }\n            const hdeep = new deep.DeepClient({\n                deep, ...(await deep.jwt({ linkId: packageId }))\n            })\n            handled[handles[h].to_id] = await hdeep.eval({\n                linkId: botId,\n                handlerId: handles[h].to_id,\n                input: {\n                    data: {\n                        state,\n                        bot,\n                        botId,\n                        userId: triggeredByLinkId,\n                        conversationId,\n                        handlerId: handles[h].to_id,\n                        reply: newLink,\n                        message,\n                    },\n                },\n            });\n        }\n\n        if (state.defaultHandling) {\n            const chanks = splitStringIntoChunks(message?.value?.value);\n            for (let c in chanks) {\n                bot.telegram.sendMessage(\n                    await deep.name(conversationId),\n                    chanks[c],\n                );\n            }\n        }\n\n        return {\n            botId,\n            conversationId,\n            replyToId,\n            message,\n            token,\n        };\n    } else {\n        return { botId };\n    }\n}",
        "link_id": 1472
      }
    },
    {
      "id": 1486,
      "type_id": 39,
      "from_id": 1120,
      "to_id": 1484
    },
    {
      "id": 1487,
      "type_id": 48,
      "from_id": 1484,
      "to_id": 35
    },
    {
      "id": 1488,
      "type_id": 164,
      "from_id": 83,
      "to_id": 1487
    },
    {
      "id": 1489,
      "type_id": 48,
      "from_id": 1484,
      "to_id": 35
    },
    {
      "id": 1491,
      "type_id": 1,
      "from_id": 1484,
      "to_id": 1479
    },
    {
      "id": 1506,
      "type_id": 3,
      "from_id": 1495,
      "to_id": 1489,
      "value": {
        "id": 573,
        "value": "HandleTelegramBotIn",
        "link_id": 1506
      }
    },
    {
      "id": 1519,
      "type_id": 3,
      "from_id": 1495,
      "to_id": 1452,
      "value": {
        "id": 586,
        "value": "telegramUsersAllowInsertMessaging",
        "link_id": 1519
      }
    },
    {
      "id": 1522,
      "type_id": 3,
      "from_id": 1495,
      "to_id": 1454,
      "value": {
        "id": 589,
        "value": "tuaimRuleSubjectSelector",
        "link_id": 1522
      }
    },
    {
      "id": 1529,
      "type_id": 3,
      "from_id": 1495,
      "to_id": 1456,
      "value": {
        "id": 596,
        "value": "tuaimRuleObjectSelector",
        "link_id": 1529
      }
    },
    {
      "id": 1530,
      "type_id": 3,
      "from_id": 1495,
      "to_id": 1467,
      "value": {
        "id": 597,
        "value": "tuaimRuleActionTree",
        "link_id": 1530
      }
    },
    {
      "id": 1532,
      "type_id": 3,
      "from_id": 1495,
      "to_id": 1464,
      "value": {
        "id": 599,
        "value": "tuaimRuleActionSelector",
        "link_id": 1532
      }
    },
    {
      "id": 1533,
      "type_id": 3,
      "from_id": 1495,
      "to_id": 1469,
      "value": {
        "id": 600,
        "value": "routerListening",
        "link_id": 1533
      }
    },
    {
      "id": 1534,
      "type_id": 3,
      "from_id": 1495,
      "to_id": 1468,
      "value": {
        "id": 601,
        "value": "router",
        "link_id": 1534
      }
    },
    {
      "id": 1535,
      "type_id": 3,
      "from_id": 1495,
      "to_id": 1471,
      "value": {
        "id": 602,
        "value": "onActiveDeleteHandler",
        "link_id": 1535
      }
    },
    {
      "id": 1597,
      "type_id": 146,
      "from_id": 1596,
      "to_id": 1596,
      "value": {
        "id": 613,
        "value": "💥",
        "link_id": 1597
      }
    },
    {
      "id": 1603,
      "type_id": 49,
      "from_id": 1596,
      "to_id": 1602
    },
    {
      "id": 1604,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 616,
        "value": "async ({ deep, data: { oldLink } }) => {\n    const router = await deep.id('@deep-foundation/telegram-bot', 'router');\n    const onTelegramInHandler = await deep.id('@deep-foundation/telegram-bot', 'onTelegramInHandler');\n\n    const containTree = deep.idLocal('@deep-foundation/core', 'containTree');\n    const Contain = deep.idLocal('@deep-foundation/core', 'Contain');\n\n    await deep.delete({\n        up: {\n            tree_id: containTree,\n            parent: {\n                type_id: Contain,\n                string: { value: { _in: [\n                    'include'+oldLink.to_id,\n                    'tree'+oldLink.to_id,\n                    'handleTelegramBotIn'+oldLink.to_id,\n                    'handleTelegramBotOut'+oldLink.to_id,\n                    'system'+oldLink.to_id,\n                    'executorJoin'+oldLink.to_id,\n                ] } },\n            },\n        },\n    });\n}",
        "link_id": 1604
      }
    },
    {
      "id": 1605,
      "type_id": 35,
      "from_id": 83,
      "to_id": 1604
    },
    {
      "id": 1606,
      "type_id": 51,
      "from_id": 1596,
      "to_id": 1605
    },
    {
      "id": 1610,
      "type_id": 35,
      "from_id": 83,
      "to_id": 1609
    },
    {
      "id": 1613,
      "type_id": 15,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 1614,
      "type_id": 49,
      "from_id": 1613,
      "to_id": 1608
    },
    {
      "id": 1623,
      "type_id": 3,
      "from_id": 1616,
      "to_id": 1603,
      "value": {
        "id": 624,
        "value": "onActiveInsertHandle",
        "link_id": 1623
      }
    },
    {
      "id": 1625,
      "type_id": 3,
      "from_id": 1616,
      "to_id": 1596,
      "value": {
        "id": 626,
        "value": "Active",
        "link_id": 1625
      }
    },
    {
      "id": 1626,
      "type_id": 3,
      "from_id": 1616,
      "to_id": 1598,
      "value": {
        "id": 627,
        "value": "reader",
        "link_id": 1626
      }
    },
    {
      "id": 1740,
      "type_id": 143,
      "from_id": 1734,
      "to_id": 1739
    },
    {
      "id": 1741,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 671,
        "value": "import { DeepClient } from \"@deep-foundation/deeplinks/imports/client.js\";\r\nimport { Link } from \"@deep-foundation/deeplinks/imports/minilinks.js\";\r\nimport { DeepClientInstance } from \"@deep-foundation/deeplinks/imports/client\";\r\n\r\nasync (options: {\r\n  deep: DeepClient;\r\n  data: {\r\n    newLink: Link<number>;\r\n  };\r\n}) => {\r\n  const {\r\n    deep,\r\n    data: { newLink: parseItLink },\r\n  } = options;\r\n  const { default: ts } = await import(\"typescript\");\r\n  const { default: util } = await import(\"util\");\r\n  try {\r\n    const result = await main();\r\n    return {\r\n      result: util.inspect(result),\r\n    };\r\n  } catch (error) {\r\n    throw {\r\n      error: util.inspect(error),\r\n    };\r\n  }\r\n\r\n  async function main() {\r\n    const {\r\n      data: [rootLink],\r\n    } = await deep.select({\r\n      id: parseItLink.from_id,\r\n    });\r\n    if (!rootLink) {\r\n      throw new Error(`parseIt.to does not exist: ##${parseItLink.from_id}`);\r\n    }\r\n    \r\n    let obj;\r\n    if(typeof rootLink.value?.value === 'object') {\r\n      obj = rootLink.value?.value;\r\n    } else if (typeof rootLink.value?.value === 'string') {\r\n      try {\r\n        obj = JSON.parse(rootLink.value?.value);\r\n      } catch (error) {\r\n        throw new Error(`##${rootLink.id} must be valid JSON if it is a string`);\r\n      }\r\n    } else {\r\n      throw new Error(`##${rootLink.id} must have value`);\r\n    }\r\n    if (!obj) {\r\n      throw new Error(`##${rootLink.id} must have value`);\r\n    }\r\n\r\n    const clientHandlerResult = await callClientHandler({\r\n      deep,\r\n      linkId: await deep.id(deep.linkId!, \"clientHandler\"),\r\n      args: [\r\n        {\r\n          deep: deep,\r\n          obj: obj,\r\n          rootLinkId: rootLink.id,\r\n          resultLinkId: parseItLink.to_id,\r\n          // TODO?\r\n          // customMethods: options.customMethods,\r\n        },\r\n      ],\r\n    });\r\n\r\n    return clientHandlerResult;\r\n  }\r\n\r\n  async function callClientHandler(\r\n    options: CallClientHandlerOptions,\r\n  ): Promise<any> {\r\n    const { linkId, deep, args } = options;\r\n    const code = await deep\r\n      .select({\r\n        in: {\r\n          id: linkId,\r\n        },\r\n      })\r\n      .then((result) => {\r\n        const link = result.data[0];\r\n        if (!link)\r\n          throw new Error(`Unable to find SyncTextFile for ##${linkId}`);\r\n        const code = link.value?.value;\r\n        if (!code) throw new Error(`##${link.id} must have value`);\r\n        return code;\r\n      });\r\n\r\n    const functionExpressionString = ts\r\n      .transpileModule(code, {\r\n        compilerOptions: {\r\n          module: ts.ModuleKind.ESNext,\r\n          sourceMap: true,\r\n          target: ts.ScriptTarget.ESNext,\r\n        },\r\n      })\r\n      .outputText.replace(\"export {}\", \"\");\r\n    const fn: Function = eval(functionExpressionString);\r\n\r\n    const result = await fn(...args);\r\n    return result;\r\n  }\r\n\r\n  interface CallClientHandlerOptions {\r\n    deep: DeepClientInstance;\r\n    linkId: number;\r\n    args: Array<any>;\r\n  }\r\n};\r\n",
        "link_id": 1741
      }
    },
    {
      "id": 1823,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 673,
        "value": "async (options) => {\n    const { deep, data: { newLink: parseItLink }, } = options;\n    const { default: ts } = await import(\"typescript\");\n    const { default: util } = await import(\"util\");\n    try {\n        const result = await main();\n        return {\n            result: util.inspect(result),\n        };\n    }\n    catch (error) {\n        throw {\n            error: util.inspect(error),\n        };\n    }\n    async function main() {\n        const { data: [rootLink], } = await deep.select({\n            id: parseItLink.from_id,\n        });\n        if (!rootLink) {\n            throw new Error(`parseIt.to does not exist: ##${parseItLink.from_id}`);\n        }\n        let obj;\n        if (typeof rootLink.value?.value === 'object') {\n            obj = rootLink.value?.value;\n        }\n        else if (typeof rootLink.value?.value === 'string') {\n            try {\n                obj = JSON.parse(rootLink.value?.value);\n            }\n            catch (error) {\n                throw new Error(`##${rootLink.id} must be valid JSON if it is a string`);\n            }\n        }\n        else {\n            throw new Error(`##${rootLink.id} must have value`);\n        }\n        if (!obj) {\n            throw new Error(`##${rootLink.id} must have value`);\n        }\n        const clientHandlerResult = await callClientHandler({\n            deep,\n            linkId: await deep.id(deep.linkId, \"clientHandler\"),\n            args: [\n                {\n                    deep: deep,\n                    obj: obj,\n                    rootLinkId: rootLink.id,\n                    resultLinkId: parseItLink.to_id,\n                },\n            ],\n        });\n        return clientHandlerResult;\n    }\n    async function callClientHandler(options) {\n        const { linkId, deep, args } = options;\n        const code = await deep\n            .select({\n            in: {\n                id: linkId,\n            },\n        })\n            .then((result) => {\n            const link = result.data[0];\n            if (!link)\n                throw new Error(`Unable to find SyncTextFile for ##${linkId}`);\n            const code = link.value?.value;\n            if (!code)\n                throw new Error(`##${link.id} must have value`);\n            return code;\n        });\n        const functionExpressionString = ts\n            .transpileModule(code, {\n            compilerOptions: {\n                module: ts.ModuleKind.ESNext,\n                sourceMap: true,\n                target: ts.ScriptTarget.ESNext,\n            },\n        })\n            .outputText.replace(\"export {}\", \"\");\n        const fn = eval(functionExpressionString);\n        const result = await fn(...args);\n        return result;\n    }\n};\nexport {};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFJQSxLQUFLLEVBQUUsT0FLTixFQUFFLEVBQUU7SUFDSCxNQUFNLEVBQ0osSUFBSSxFQUNKLElBQUksRUFBRSxFQUFFLE9BQU8sRUFBRSxXQUFXLEVBQUUsR0FDL0IsR0FBRyxPQUFPLENBQUM7SUFDWixNQUFNLEVBQUUsT0FBTyxFQUFFLEVBQUUsRUFBRSxHQUFHLE1BQU0sTUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDO0lBQ25ELE1BQU0sRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLEdBQUcsTUFBTSxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDL0MsSUFBSSxDQUFDO1FBQ0gsTUFBTSxNQUFNLEdBQUcsTUFBTSxJQUFJLEVBQUUsQ0FBQztRQUM1QixPQUFPO1lBQ0wsTUFBTSxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDO1NBQzdCLENBQUM7SUFDSixDQUFDO0lBQUMsT0FBTyxLQUFLLEVBQUUsQ0FBQztRQUNmLE1BQU07WUFDSixLQUFLLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUM7U0FDM0IsQ0FBQztJQUNKLENBQUM7SUFFRCxLQUFLLFVBQVUsSUFBSTtRQUNqQixNQUFNLEVBQ0osSUFBSSxFQUFFLENBQUMsUUFBUSxDQUFDLEdBQ2pCLEdBQUcsTUFBTSxJQUFJLENBQUMsTUFBTSxDQUFDO1lBQ3BCLEVBQUUsRUFBRSxXQUFXLENBQUMsT0FBTztTQUN4QixDQUFDLENBQUM7UUFDSCxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7WUFDZCxNQUFNLElBQUksS0FBSyxDQUFDLGdDQUFnQyxXQUFXLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQztRQUN6RSxDQUFDO1FBRUQsSUFBSSxHQUFHLENBQUM7UUFDUixJQUFHLE9BQU8sUUFBUSxDQUFDLEtBQUssRUFBRSxLQUFLLEtBQUssUUFBUSxF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ZWVwLWZvdW5kYXRpb24vZGVlcGxpbmtzL2ltcG9ydHMvY2xpZW50LmpzXCI7XHJcbmltcG9ydCB7IExpbmsgfSBmcm9tIFwiQGRlZXAtZm91bmRhdGlvbi9kZWVwbGlua3MvaW1wb3J0cy9taW5pbGlua3MuanNcIjtcclxuaW1wb3J0IHsgRGVlcENsaWVudEluc3RhbmNlIH0gZnJvbSBcIkBkZWVwLWZvdW5kYXRpb24vZGVlcGxpbmtzL2ltcG9ydHMvY2xpZW50XCI7XHJcblxyXG5hc3luYyAob3B0aW9uczoge1xyXG4gIGRlZXA6IERlZXBDbGllbnQ7XHJcbiAgZGF0YToge1xyXG4gICAgbmV3TGluazogTGluazxudW1iZXI+O1xyXG4gIH07XHJcbn0pID0+IHtcclxuICBjb25zdCB7XHJcbiAgICBkZWVwLFxyXG4gICAgZGF0YTogeyBuZXdMaW5rOiBwYXJzZUl0TGluayB9LFxyXG4gIH0gPSBvcHRpb25zO1xyXG4gIGNvbnN0IHsgZGVmYXVsdDogdHMgfSA9IGF3YWl0IGltcG9ydChcInR5cGVzY3JpcHRcIik7XHJcbiAgY29uc3QgeyBkZWZhdWx0OiB1dGlsIH0gPSBhd2FpdCBpbXBvcnQoXCJ1dGlsXCIpO1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBtYWluKCk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICByZXN1bHQ6IHV0aWwuaW5zcGVjdChyZXN1bHQpLFxyXG4gICAgfTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgdGhyb3cge1xyXG4gICAgICBlcnJvcjogdXRpbC5pbnNwZWN0KGVycm9yKSxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBhc3luYyBmdW5jdGlvbiBtYWluKCkge1xyXG4gICAgY29uc3Qge1xyXG4gICAgICBkYXRhOiBbcm9vdExpbmtdLFxyXG4gICAgfSA9IGF3YWl0IGRlZXAuc2VsZWN0KHtcclxuICAgICAgaWQ6IHBhcnNlSXRMaW5rLmZyb21faWQsXHJcbiAgICB9KTtcclxuICAgIGlmICghcm9vdExpbmspIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBwYXJzZUl0LnRvIGRvZXMgbm90IGV4aXN0OiAjIyR7cGFyc2VJdExpbmsuZnJvbV9pZH1gKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgbGV0IG9iajtcclxuICAgIGlmKHR5cGVvZiByb290TGluay52YWx1ZT8udmFsdWUgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgIG9iaiA9IHJvb3RMaW5rLnZhbHVlPy52YWx1ZTtcclxuICAgIH0gZWxzZSBpZiAodHlwZW9mIHJvb3RMaW5rLnZhbHVlPy52YWx1ZSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBvYmogPSBKU09OLnBhcnNlKHJvb3RMaW5rLnZhbHVlPy52YWx1ZSk7XHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAjIyR7cm9vdExpbmsuaWR9IG11c3QgYmUgdmFsaWQgSlNPTiBpZiBpdCBpcyBhIHN0cmluZ2ApO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYCMjJHtyb290TGluay5pZH0gbXVzdCBoYXZlIHZhbHVlYCk7XHJcbiAgICB9XHJcbiAgICBpZiAoIW9iaikge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYCMjJHtyb290TGluay5pZH0gbXVzdCBoYXZlIHZhbHVlYCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgY2xpZW50SGFuZGxlclJlc3VsdCA9IGF3YWl0IGNhbGxDbGllbnRIYW5kbGVyKHtcclxuICAgICAgZGVlcCxcclxuICAgICAgbGlua0lkOiBhd2FpdCBkZWVwLmlkKGRlZXAubGlua0lkISwgXCJjbGllbnRIYW5kbGVyXCIpLFxyXG4gICAgICBhcmdzOiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgZGVlcDogZGVlcCxcclxuICAgICAgICAgIG9iajogb2JqLFxyXG4gICAgICAgICAgcm9vdExpbmtJZDogcm9vdExpbmsuaWQsXHJcbiAgICAgICAgICByZXN1bHRMaW5rSWQ6IHBhcnNlSXRMaW5rLnRvX2lkLFxyXG4gICAgICAgICAgLy8gVE9ETz9cclxuICAgICAgICAgIC8vIGN1c3RvbU1ldGhvZHM6IG9wdGlvbnMuY3VzdG9tTWV0aG9kcyxcclxuICAgICAgICB9LFxyXG4gICAgICBdLFxyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIGNsaWVudEhhbmRsZXJSZXN1bHQ7XHJcbiAgfVxyXG5cclxuICBhc3luYyBmdW5jdGlvbiBjYWxsQ2xpZW50SGFuZGxlcihcclxuICAgIG9wdGlvbnM6IENhbGxDbGllbnRIYW5kbGVyT3B0aW9ucyxcclxuICApOiBQcm9taXNlPGFueT4ge1xyXG4gICAgY29uc3QgeyBsaW5rSWQsIGRlZXAsIGFyZ3MgfSA9IG9wdGlvbnM7XHJcbiAgICBjb25zdCBjb2RlID0gYXdhaXQgZGVlcFxyXG4gICAgICAuc2VsZWN0KHtcclxuICAgICAgICBpbjoge1xyXG4gICAgICAgICAgaWQ6IGxpbmtJZCxcclxuICAgICAgICB9LFxyXG4gICAgICB9KVxyXG4gICAgICAudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICAgICAgY29uc3QgbGluayA9IHJlc3VsdC5kYXRhWzBdO1xyXG4gICAgICAgIGlmICghbGluaylcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5hYmxlIHRvIGZpbmQgU3luY1RleHRGaWxlIGZvciAjIyR7bGlua0lkfWApO1xyXG4gICAgICAgIGNvbnN0IGNvZGUgPSBsaW5rLnZhbHVlPy52YWx1ZTtcclxuICAgICAgICBpZiAoIWNvZGUpIHRocm93IG5ldyBFcnJvcihgIyMke2xpbmsuaWR9IG11c3QgaGF2ZSB2YWx1ZWApO1xyXG4gICAgICAgIHJldHVybiBjb2RlO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICBjb25zdCBmdW5jdGlvbkV4cHJlc3Npb25TdHJpbmcgPSB0c1xyXG4gICAgICAudHJhbnNwaWxlTW9kdWxlKGNvZGUsIHtcclxuICAgICAgICBjb21waWxlck9wdGlvbnM6IHtcclxuICAgICAgICAgIG1vZHVsZTogdHMuTW9kdWxlS2luZC5FU05leHQsXHJcbiAgICAgICAgICBzb3VyY2VNYXA6IHRydWUsXHJcbiAgICAgICAgICB0YXJnZXQ6IHRzLlNjcmlwdFRhcmdldC5FU05leHQsXHJcbiAgICAgICAgfSxcclxuICAgICAgfSlcclxuICAgICAgLm91dHB1dFRleHQucmVwbGFjZShcImV4cG9ydCB7fVwiLCBcIlwiKTtcclxuICAgIGNvbnN0IGZuOiBGdW5jdGlvbiA9IGV2YWwoZnVuY3Rpb25FeHByZXNzaW9uU3RyaW5nKTtcclxuXHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBmbiguLi5hcmdzKTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG5cclxuICBpbnRlcmZhY2UgQ2FsbENsaWVudEhhbmRsZXJPcHRpb25zIHtcclxuICAgIGRlZXA6IERlZXBDbGllbnRJbnN0YW5jZTtcclxuICAgIGxpbmtJZDogbnVtYmVyO1xyXG4gICAgYXJnczogQXJyYXk8YW55PjtcclxuICB9XHJcbn07XHJcbiJdfQ==",
        "link_id": 1823
      }
    },
    {
      "id": 1824,
      "type_id": 3,
      "from_id": 1741,
      "to_id": 1823,
      "value": {
        "id": 672,
        "value": "generated",
        "link_id": 1824
      }
    },
    {
      "id": 1825,
      "type_id": 143,
      "from_id": 1823,
      "to_id": 1741
    },
    {
      "id": 1826,
      "type_id": 3,
      "from_id": 1741,
      "to_id": 1825
    },
    {
      "id": 41,
      "type_id": 37,
      "from_id": 40,
      "to_id": 3
    },
    {
      "id": 110,
      "type_id": 39,
      "from_id": 109,
      "to_id": 99
    },
    {
      "id": 162,
      "type_id": 161,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 163,
      "type_id": 1,
      "from_id": 161,
      "to_id": 108
    },
    {
      "id": 164,
      "type_id": 1,
      "from_id": 82,
      "to_id": 48
    },
    {
      "id": 165,
      "type_id": 164,
      "from_id": 141,
      "to_id": 49
    },
    {
      "id": 166,
      "type_id": 164,
      "from_id": 141,
      "to_id": 50
    },
    {
      "id": 167,
      "type_id": 164,
      "from_id": 141,
      "to_id": 51
    },
    {
      "id": 168,
      "type_id": 164,
      "from_id": 83,
      "to_id": 49
    },
    {
      "id": 169,
      "type_id": 164,
      "from_id": 83,
      "to_id": 50
    },
    {
      "id": 170,
      "type_id": 164,
      "from_id": 83,
      "to_id": 51
    },
    {
      "id": 171,
      "type_id": 164,
      "from_id": 83,
      "to_id": 74
    },
    {
      "id": 172,
      "type_id": 164,
      "from_id": 83,
      "to_id": 101
    },
    {
      "id": 173,
      "type_id": 164,
      "from_id": 83,
      "to_id": 108
    },
    {
      "id": 174,
      "type_id": 164,
      "from_id": 145,
      "to_id": 156
    },
    {
      "id": 175,
      "type_id": 36,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 176,
      "type_id": 39,
      "from_id": 175,
      "to_id": 8
    },
    {
      "id": 177,
      "type_id": 37,
      "from_id": 175,
      "to_id": 10
    },
    {
      "id": 178,
      "type_id": 39,
      "from_id": 175,
      "to_id": 9
    },
    {
      "id": 179,
      "type_id": 37,
      "from_id": 175,
      "to_id": 11
    },
    {
      "id": 180,
      "type_id": 37,
      "from_id": 175,
      "to_id": 12
    },
    {
      "id": 181,
      "type_id": 39,
      "from_id": 175,
      "to_id": 52
    },
    {
      "id": 182,
      "type_id": 1,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 183,
      "type_id": 36,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 184,
      "type_id": 2,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 6,
        "value": "@deep-foundation/core",
        "link_id": 184
      }
    },
    {
      "id": 185,
      "type_id": 3,
      "from_id": 184,
      "to_id": 1,
      "value": {
        "id": 7,
        "value": "Type",
        "link_id": 185
      }
    },
    {
      "id": 186,
      "type_id": 3,
      "from_id": 184,
      "to_id": 2,
      "value": {
        "id": 8,
        "value": "Package",
        "link_id": 186
      }
    },
    {
      "id": 187,
      "type_id": 3,
      "from_id": 184,
      "to_id": 3,
      "value": {
        "id": 9,
        "value": "Contain",
        "link_id": 187
      }
    },
    {
      "id": 188,
      "type_id": 3,
      "from_id": 184,
      "to_id": 4,
      "value": {
        "id": 10,
        "value": "Value",
        "link_id": 188
      }
    },
    {
      "id": 189,
      "type_id": 3,
      "from_id": 184,
      "to_id": 5,
      "value": {
        "id": 11,
        "value": "String",
        "link_id": 189
      }
    },
    {
      "id": 190,
      "type_id": 3,
      "from_id": 184,
      "to_id": 6,
      "value": {
        "id": 12,
        "value": "Number",
        "link_id": 190
      }
    },
    {
      "id": 191,
      "type_id": 3,
      "from_id": 184,
      "to_id": 7,
      "value": {
        "id": 13,
        "value": "Object",
        "link_id": 191
      }
    },
    {
      "id": 192,
      "type_id": 3,
      "from_id": 184,
      "to_id": 8,
      "value": {
        "id": 14,
        "value": "Any",
        "link_id": 192
      }
    },
    {
      "id": 193,
      "type_id": 3,
      "from_id": 184,
      "to_id": 9,
      "value": {
        "id": 15,
        "value": "Promise",
        "link_id": 193
      }
    },
    {
      "id": 194,
      "type_id": 3,
      "from_id": 184,
      "to_id": 10,
      "value": {
        "id": 16,
        "value": "Then",
        "link_id": 194
      }
    },
    {
      "id": 195,
      "type_id": 3,
      "from_id": 184,
      "to_id": 11,
      "value": {
        "id": 17,
        "value": "Resolved",
        "link_id": 195
      }
    },
    {
      "id": 196,
      "type_id": 3,
      "from_id": 184,
      "to_id": 12,
      "value": {
        "id": 18,
        "value": "Rejected",
        "link_id": 196
      }
    },
    {
      "id": 197,
      "type_id": 3,
      "from_id": 184,
      "to_id": 13,
      "value": {
        "id": 19,
        "value": "typeValue",
        "link_id": 197
      }
    },
    {
      "id": 1084,
      "type_id": 3,
      "from_id": 1078,
      "to_id": 1075,
      "value": {
        "id": 433,
        "value": "dockerPythonSupportsCompatableHandleInsert",
        "link_id": 1084
      }
    },
    {
      "id": 1624,
      "type_id": 3,
      "from_id": 1616,
      "to_id": 1606,
      "value": {
        "id": 625,
        "value": "onActiveDeleteHandle",
        "link_id": 1624
      }
    },
    {
      "id": 1728,
      "type_id": 3,
      "from_id": 1721,
      "to_id": 1720,
      "value": {
        "id": 660,
        "value": "true",
        "link_id": 1728
      }
    },
    {
      "id": 1814,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 670,
        "value": "async (options) => {\n    const { deep, data: { newLink: rootLink, promiseId }, } = options;\n    await new Promise(res => {\n        const unsubscribe = deep.subscribe({\n            up: { tree_id: deep.idLocal('@deep-foundation/core', 'promiseTree'), parent_id: rootLink.id },\n            type_id: deep.idLocal('@deep-foundation/core', 'Promise'),\n            id: { _lte: promiseId },\n            _not: {\n                down: {\n                    tree_id: deep.idLocal('@deep-foundation/core', 'promiseTree'),\n                    link: {\n                        type_id: { _in: [deep.idLocal('@deep-foundation/core', 'Resolved'), deep.idLocal('@deep-foundation/core', 'Rejected')] }\n                    }\n                }\n            },\n        }).subscribe({ next: (links) => {\n                console.log('updateHandlerCode next', links);\n                if (!links.length) {\n                    unsubscribe();\n                    res();\n                }\n            }, error: (err) => {\n                unsubscribe();\n                console.log('updateHandlerCode error', err);\n            } });\n    });\n    const { default: ts } = await import(\"typescript\");\n    const { default: util } = await import(\"util\");\n    try {\n        const result = await main();\n        return {\n            result: util.inspect(result),\n        };\n    }\n    catch (error) {\n        throw {\n            error: util.inspect(error),\n        };\n    }\n    async function main() {\n        let obj;\n        if (typeof rootLink.value?.value === \"object\") {\n            obj = rootLink.value?.value;\n        }\n        else if (typeof rootLink.value?.value === \"string\") {\n            try {\n                obj = JSON.parse(rootLink.value?.value);\n            }\n            catch (error) {\n                throw new Error(`##${rootLink.id} must be valid JSON if it is a string`);\n            }\n        }\n        else {\n            throw new Error(`##${rootLink.id} must have value`);\n        }\n        if (!obj) {\n            throw new Error(`##${rootLink.id} must have value`);\n        }\n        const clientHandlerResult = await callClientHandler({\n            deep,\n            linkId: await deep.id(deep.linkId, \"clientHandler\"),\n            args: [\n                {\n                    deep: deep,\n                    obj: obj,\n                    rootLinkId: rootLink.id,\n                    resultLinkId: rootLink.to_id,\n                },\n            ],\n        });\n        return clientHandlerResult;\n    }\n    async function callClientHandler(options) {\n        const { linkId, deep, args } = options;\n        const code = await deep\n            .select({\n            in: {\n                id: linkId,\n            },\n        })\n            .then((result) => {\n            const link = result.data[0];\n            if (!link)\n                throw new Error(`Unable to find SyncTextFile for ##${linkId}`);\n            const code = link.value?.value;\n            if (!code)\n                throw new Error(`##${link.id} must have value`);\n            return code;\n        });\n        const functionExpressionString = ts\n            .transpileModule(code, {\n            compilerOptions: {\n                module: ts.ModuleKind.ESNext,\n                sourceMap: true,\n                target: ts.ScriptTarget.ESNext,\n            },\n        })\n            .outputText.replace(\"export {}\", \"\");\n        const fn = eval(functionExpressionString);\n        const result = await fn(...args);\n        return result;\n    }\n};\nexport {};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFJQSxLQUFLLEVBQUUsT0FNTixFQUFFLEVBQUU7SUFDSCxNQUFNLEVBQ0osSUFBSSxFQUNKLElBQUksRUFBRSxFQUFFLE9BQU8sRUFBRSxRQUFRLEVBQUUsU0FBUyxFQUFFLEdBQ3ZDLEdBQUcsT0FBTyxDQUFDO0lBQ1osTUFBTSxJQUFJLE9BQU8sQ0FBQyxHQUFHLENBQUMsRUFBRTtRQUN0QixNQUFNLFdBQVcsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDO1lBQ2pDLEVBQUUsRUFBRSxFQUFFLE9BQU8sRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLHVCQUF1QixFQUFFLGFBQWEsQ0FBQyxFQUFFLFNBQVMsRUFBRSxRQUFRLENBQUMsRUFBRSxFQUFFO1lBQzdGLE9BQU8sRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLHVCQUF1QixFQUFFLFNBQVMsQ0FBQztZQUN6RCxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsU0FBUyxFQUFFO1lBQ3ZCLElBQUksRUFBRTtnQkFDRixJQUFJLEVBQUU7b0JBQ0YsT0FBTyxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsdUJBQXVCLEVBQUUsYUFBYSxDQUFDO29CQUM3RCxJQUFJLEVBQUU7d0JBQ0YsT0FBTyxFQUFFLEVBQUUsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyx1QkFBdUIsRUFBRSxVQUFVLENBQUMsRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLHVCQUF1QixFQUFFLFVBQVUsQ0FBQyxDQUFDLEVBQUU7cUJBQzNIO2lCQUNKO2FBQ0o7U0FDRixDQUFDLENBQUMsU0FBUyxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsS0FBSyxFQUFFLEVBQUU7Z0JBQzdCLE9BQU8sQ0FBQyxHQUFHLENBQUMsd0JBQXdCLEVBQUUsS0FBSyxDQUFDLENBQUM7Z0JBQzdDLElBQUksQ0FBQyxLQUFL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QyxDQUFDLENBQUMsQ0FBQztZQUM1QixJQUFJLENBQUMsSUFBSTtnQkFDUCxNQUFNLElBQUksS0FBSyxDQUFDLHFDQUFxQyxNQUFNLEVBQUUsQ0FBQyxDQUFDO1lBQ2pFLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxLQUFLLEVBQUUsS0FBSyxDQUFDO1lBQy9CLElBQUksQ0FBQyxJQUFJO2dCQUFFLE1BQU0sSUFBSSxLQUFLLENBQUMsS0FBSyxJQUFJLENBQUMsRUFBRSxrQkFBa0IsQ0FBQyxDQUFDO1lBQzNELE9BQU8sSUFBSSxDQUFDO1FBQ2QsQ0FBQyxDQUFDLENBQUM7UUFFTCxNQUFNLHdCQUF3QixHQUFHLEVBQUU7YUFDaEMsZUFBZSxDQUFDLElBQUksRUFBRTtZQUNyQixlQUFlLEVBQUU7Z0JBQ2YsTUFBTSxFQUFFLEVBQUUsQ0FBQyxVQUFVLENBQUMsTUFBTTtnQkFDNUIsU0FBUyxFQUFFLElBQUk7Z0JBQ2YsTUFBTSxFQUFFLEVBQUUsQ0FBQyxZQUFZLENBQUMsTUFBTTthQUMvQjtTQUNGLENBQUM7YUFDRCxVQUFVLENBQUMsT0FBTyxDQUFDLFdBQVcsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUN2QyxNQUFNLEVBQUUsR0FBYSxJQUFJLENBQUMsd0JBQXdCLENBQUMsQ0FBQztRQUVwRCxNQUFNLE1BQU0sR0FBRyxNQUFNLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDO1FBQ2pDLE9BQU8sTUFBTSxDQUFDO0lBQ2hCLENBQUM7QUFPSCxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEZWVwQ2xpZW50IH0gZnJvbSBcIkBkZWVwLWZvdW5kYXRpb24vZGVlcGxpbmtzL2ltcG9ydHMvY2xpZW50LmpzXCI7XG5pbXBvcnQgeyBMaW5rIH0gZnJvbSBcIkBkZWVwLWZvdW5kYXRpb24vZGVlcGxpbmtzL2ltcG9ydHMvbWluaWxpbmtzLmpzXCI7XG5pbXBvcnQgeyBEZWVwQ2xpZW50SW5zdGFuY2UgfSBmcm9tIFwiQGRlZXAtZm91bmRhdGlvbi9kZWVwbGlua3MvaW1wb3J0cy9jbGllbnRcIjtcblxuYXN5bmMgKG9wdGlvbnM6IHtcbiAgZGVlcDogRGVlcENsaWVudDtcbiAgZGF0YToge1xuICAgIG5ld0xpbms6IExpbms8bnVtYmVyPjtcbiAgICBwcm9taXNlSWQ6IG51bWJlcjtcbiAgfTtcbn0pID0+IHtcbiAgY29uc3Qge1xuICAgIGRlZXAsXG4gICAgZGF0YTogeyBuZXdMaW5rOiByb290TGluaywgcHJvbWlzZUlkIH0sXG4gIH0gPSBvcHRpb25zO1xuICBhd2FpdCBuZXcgUHJvbWlzZShyZXMgPT4ge1xuICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gZGVlcC5zdWJzY3JpYmUoe1xuICAgICAgdXA6IHsgdHJlZV9pZDogZGVlcC5pZExvY2FsKCdAZGVlcC1mb3VuZGF0aW9uL2NvcmUnLCAncHJvbWlzZVRyZWUnKSwgcGFyZW50X2lkOiByb290TGluay5pZCB9LFxuICAgICAgdHlwZV9pZDogZGVlcC5pZExvY2FsKCdAZGVlcC1mb3VuZGF0aW9uL2NvcmUnLCAnUHJvbWlzZScpLFxuICAgICAgaWQ6IHsgX2x0ZTogcHJvbWlzZUlkIH0sXG4gICAgICBfbm90OiB7XG4gICAgICAgICAgZG93bjoge1xuICAgICAgICAgICAgICB0cmVlX2lkOiBkZWVwLmlkTG9jYWwoJ0BkZWVwLWZvdW5kYXRpb24vY29yZScsICdwcm9taXNlVHJlZScpLFxuICAgICAgICAgICAgICBsaW5rOiB7XG4gICAgICAgICAgICAgICAgICB0eXBlX2lkOiB7IF9pbjogW2RlZXAuaWRMb2NhbCgnQGRlZXAtZm91bmRhdGlvbi9jb3JlJywgJ1Jlc29sdmVkJyksIGRlZXAuaWRMb2NhbCgnQGRlZXAtZm91bmRhdGlvbi9jb3JlJywgJ1JlamVjdGVkJyldIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgIH0sXG4gICAgfSkuc3Vic2NyaWJlKHsgbmV4dDogKGxpbmtzKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygndXBkYXRlSGFuZGxlckNvZGUgbmV4dCcsIGxpbmtzKTtcbiAgICAgIGlmICghbGlua3MubGVuZ3RoKSB7XG4gICAgICAgIHVuc3Vic2NyaWJlKCk7XG4gICAgICAgIHJlcygpO1xuICAgICAgfVxuICAgIH0sIGVycm9yOiAoZXJyKSA9PiB7XG4gICAgICB1bnN1YnNjcmliZSgpO1xuICAgICAgY29uc29sZS5sb2coJ3VwZGF0ZUhhbmRsZXJDb2RlIGVycm9yJywgZXJyKTtcbiAgICB9IH0pO1xuICB9KTtcbiAgY29uc3QgeyBkZWZhdWx0OiB0cyB9ID0gYXdhaXQgaW1wb3J0KFwidHlwZXNjcmlwdFwiKTtcbiAgY29uc3QgeyBkZWZhdWx0OiB1dGlsIH0gPSBhd2FpdCBpbXBvcnQoXCJ1dGlsXCIpO1xuICB0cnkge1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG1haW4oKTtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdWx0OiB1dGlsLmluc3BlY3QocmVzdWx0KSxcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHRocm93IHtcbiAgICAgIGVycm9yOiB1dGlsLmluc3BlY3QoZXJyb3IpLFxuICAgIH07XG4gIH1cblxuICBhc3luYyBmdW5jdGlvbiBtYWluKCkge1xuICAgIGxldCBvYmo7XG4gICAgaWYgKHR5cGVvZiByb290TGluay52YWx1ZT8udmFsdWUgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgIG9iaiA9IHJvb3RMaW5rLnZhbHVlPy52YWx1ZTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiByb290TGluay52YWx1ZT8udmFsdWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIG9iaiA9IEpTT04ucGFyc2Uocm9vdExpbmsudmFsdWU/LnZhbHVlKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgIyMke3Jvb3RMaW5rLmlkfSBtdXN0IGJlIHZhbGlkIEpTT04gaWYgaXQgaXMgYSBzdHJpbmdgLFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYCMjJHtyb290TGluay5pZH0gbXVzdCBoYXZlIHZhbHVlYCk7XG4gICAgfVxuICAgIGlmICghb2JqKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYCMjJHtyb290TGluay5pZH0gbXVzdCBoYXZlIHZhbHVlYCk7XG4gICAgfVxuXG4gICAgY29uc3QgY2xpZW50SGFuZGxlclJlc3VsdCA9IGF3YWl0IGNhbGxDbGllbnRIYW5kbGVyKHtcbiAgICAgIGRlZXAsXG4gICAgICBsaW5rSWQ6IGF3YWl0IGRlZXAuaWQoZGVlcC5saW5rSWQhLCBcImNsaWVudEhhbmRsZXJcIiksXG4gICAgICBhcmdzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBkZWVwOiBkZWVwLFxuICAgICAgICAgIG9iajogb2JqLFxuICAgICAgICAgIHJvb3RMaW5rSWQ6IHJvb3RMaW5rLmlkLFxuICAgICAgICAgIHJlc3VsdExpbmtJZDogcm9vdExpbmsudG9faWQsXG4gICAgICAgICAgLy8gVE9ETz9cbiAgICAgICAgICAvLyBjdXN0b21NZXRob2RzOiBvcHRpb25zLmN1c3RvbU1ldGhvZHMsXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIGNsaWVudEhhbmRsZXJSZXN1bHQ7XG4gIH1cblxuICBhc3luYyBmdW5jdGlvbiBjYWxsQ2xpZW50SGFuZGxlcihcbiAgICBvcHRpb25zOiBDYWxsQ2xpZW50SGFuZGxlck9wdGlvbnMsXG4gICk6IFByb21pc2U8YW55PiB7XG4gICAgY29uc3QgeyBsaW5rSWQsIGRlZXAsIGFyZ3MgfSA9IG9wdGlvbnM7XG4gICAgY29uc3QgY29kZSA9IGF3YWl0IGRlZXBcbiAgICAgIC5zZWxlY3Qoe1xuICAgICAgICBpbjoge1xuICAgICAgICAgIGlkOiBsaW5rSWQsXG4gICAgICAgIH0sXG4gICAgICB9KVxuICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICBjb25zdCBsaW5rID0gcmVzdWx0LmRhdGFbMF07XG4gICAgICAgIGlmICghbGluaylcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuYWJsZSB0byBmaW5kIFN5bmNUZXh0RmlsZSBmb3IgIyMke2xpbmtJZH1gKTtcbiAgICAgICAgY29uc3QgY29kZSA9IGxpbmsudmFsdWU/LnZhbHVlO1xuICAgICAgICBpZiAoIWNvZGUpIHRocm93IG5ldyBFcnJvcihgIyMke2xpbmsuaWR9IG11c3QgaGF2ZSB2YWx1ZWApO1xuICAgICAgICByZXR1cm4gY29kZTtcbiAgICAgIH0pO1xuXG4gICAgY29uc3QgZnVuY3Rpb25FeHByZXNzaW9uU3RyaW5nID0gdHNcbiAgICAgIC50cmFuc3BpbGVNb2R1bGUoY29kZSwge1xuICAgICAgICBjb21waWxlck9wdGlvbnM6IHtcbiAgICAgICAgICBtb2R1bGU6IHRzLk1vZHVsZUtpbmQuRVNOZXh0LFxuICAgICAgICAgIHNvdXJjZU1hcDogdHJ1ZSxcbiAgICAgICAgICB0YXJnZXQ6IHRzLlNjcmlwdFRhcmdldC5FU05leHQsXG4gICAgICAgIH0sXG4gICAgICB9KVxuICAgICAgLm91dHB1dFRleHQucmVwbGFjZShcImV4cG9ydCB7fVwiLCBcIlwiKTtcbiAgICBjb25zdCBmbjogRnVuY3Rpb24gPSBldmFsKGZ1bmN0aW9uRXhwcmVzc2lvblN0cmluZyk7XG5cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBmbiguLi5hcmdzKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgaW50ZXJmYWNlIENhbGxDbGllbnRIYW5kbGVyT3B0aW9ucyB7XG4gICAgZGVlcDogRGVlcENsaWVudEluc3RhbmNlO1xuICAgIGxpbmtJZDogbnVtYmVyO1xuICAgIGFyZ3M6IEFycmF5PGFueT47XG4gIH1cbn07XG4iXX0=",
        "link_id": 1814
      }
    },
    {
      "id": 1815,
      "type_id": 3,
      "from_id": 1739,
      "to_id": 1814,
      "value": {
        "id": 669,
        "value": "generated",
        "link_id": 1815
      }
    },
    {
      "id": 1816,
      "type_id": 143,
      "from_id": 1814,
      "to_id": 1739
    },
    {
      "id": 1817,
      "type_id": 3,
      "from_id": 1739,
      "to_id": 1816
    },
    {
      "id": 1780,
      "type_id": 3,
      "from_id": 1758,
      "to_id": 1745,
      "value": {
        "id": 692,
        "value": "Object",
        "link_id": 1780
      }
    },
    {
      "id": 1890,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 704,
        "value": "async (req, res, next, { deep, require, gql }) => {\n    const { PassThrough, Readable } = require('stream');\n    const express = require('express');\n    const http = require('http');\n    const ApolloServer = require('apollo-server-express').ApolloServer;\n    const { ApolloServerPluginDrainHttpServer, ApolloServerPluginLandingPageGraphQLPlayground } = require('apollo-server-core');\n    const axios = require('axios');\n    const ffmpeg = require('fluent-ffmpeg');\n    const FormData = require('form-data');\n    function base64ToStream(base64String) {\n        const base64Data = base64String.replace(/^data:[^;]+;base64,/, '');\n        const binaryData = Buffer.from(base64Data, 'base64');\n        const stream = new Readable();\n        stream.push(binaryData);\n        stream.push(null);\n        return stream;\n    }\n    const typeDefs = `\n        input Voice {\n            id: Int!\n            record: String!\n            duration: Float!\n            mimeType: String!\n        }\n        type Query { deepmemo_upload(voice: Voice!): String }\n    `;\n    const resolvers = {\n        Query: { deepmemo_upload: async (parent, { voice: { id, record, duration, mimeType } }, contextValue, info) => {\n                let inputFormat;\n                if (mimeType.includes('audio/webm')) {\n                    inputFormat = 'webm';\n                }\n                else if (mimeType.includes('audio/aac')) {\n                    inputFormat = 'aac';\n                }\n                else if (mimeType.includes('audio/mp4')) {\n                    inputFormat = 'mp4';\n                }\n                else\n                    return 'not supported type';\n                return new Promise((res, rej) => {\n                    const stream = new PassThrough();\n                    let chunkData = [];\n                    stream.on('data', chunk => {\n                        chunkData.push(chunk);\n                    });\n                    ffmpeg()\n                        .input(base64ToStream(record))\n                        .inputFormat(inputFormat)\n                        .outputFormat('mp3')\n                        .on('end', () => {\n                        stream.end();\n                        const byteArray = Buffer.concat(chunkData);\n                        const form = new FormData();\n                        form.append('file', byteArray, { type: 'audio/mp3', filename: `${id}.mp3` });\n                        axios.post(`http://${deep.client.path.slice(0, -4)}/file`, form, {\n                            headers: {\n                                linkId: id,\n                                Authorization: contextValue?.headers?.authorization,\n                                ...form.getHeaders(),\n                            },\n                        })\n                            .then((r) => {\n                            res('done');\n                        })\n                            .catch((e) => {\n                            console.error(e);\n                            rej('error');\n                        });\n                    })\n                        .pipe(stream, { end: true });\n                });\n            } },\n    };\n    const context = ({ req }) => { return { headers: req.headers }; };\n    const generateApolloServer = () => {\n        return new ApolloServer({\n            introspection: true,\n            typeDefs,\n            resolvers,\n            context,\n            plugins: [\n                ApolloServerPluginLandingPageGraphQLPlayground(),\n            ],\n        });\n    };\n    const router = express.Router();\n    const apolloServer = generateApolloServer();\n    await apolloServer.start();\n    apolloServer.applyMiddleware({ app: router, path: '/' });\n    router.handle(req, res);\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxLQUFLLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLEdBQUcsRUFBRSxFQUFFLEVBQUU7SUFDN0MsTUFBTSxFQUFFLFdBQVcsRUFBRSxRQUFRLEVBQUUsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDcEQsTUFBTSxPQUFPLEdBQUcsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDO0lBQ25DLE1BQU0sSUFBSSxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUM3QixNQUFNLFlBQVksR0FBRyxPQUFPLENBQUMsdUJBQXVCLENBQUMsQ0FBQyxZQUFZLENBQUM7SUFDbkUsTUFBTSxFQUFFLGlDQUFpQyxFQUFFLDhDQUE4QyxFQUFFLEdBQUcsT0FBTyxDQUFDLG9CQUFvQixDQUFDLENBQUM7SUFDNUgsTUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQy9CLE1BQU0sTUFBTSxHQUFHLE9BQU8sQ0FBQyxlQUFlLENBQUMsQ0FBQztJQUN4QyxNQUFNLFFBQVEsR0FBRyxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUM7SUFFdEMsU0FBUyxjQUFjLENBQUMsWUFBWTtRQUNoQyxNQUFNLFVBQVUsR0FBRyxZQUFZLENBQUMsT0FBTyxDQUFDLHFCQUFxQixFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBQ25FLE1BQU0sVUFBVSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLFFBQVEsQ0FBQyxDQUFDO1FBQ3JELE1BQU0sTUFBTSxHQUFHLElBQUksUUFBUSxFQUFFLENBQUM7UUFFOUIsTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUN4QixNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBRWxC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R0FBRyxFQUFFLEVBQUUsRUFBRSxHQUFHLE9BQU8sRUFBRSxPQUFPLEVBQUUsR0FBRyxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBRWxFLE1BQU0sb0JBQW9CLEdBQUcsR0FBRyxFQUFFO1FBQzlCLE9BQU8sSUFBSSxZQUFZLENBQUM7WUFDcEIsYUFBYSxFQUFFLElBQUk7WUFDbkIsUUFBUTtZQUNSLFNBQVM7WUFDVCxPQUFPO1lBQ1AsT0FBTyxFQUFFO2dCQUNMLDhDQUE4QyxFQUFFO2FBQ25EO1NBQ0osQ0FBQyxDQUFDO0lBQ1AsQ0FBQyxDQUFDO0lBRUYsTUFBTSxNQUFNLEdBQUcsT0FBTyxDQUFDLE1BQU0sRUFBRSxDQUFDO0lBQ2hDLE1BQU0sWUFBWSxHQUFHLG9CQUFvQixFQUFFLENBQUM7SUFDNUMsTUFBTSxZQUFZLENBQUMsS0FBSyxFQUFFLENBQUM7SUFDM0IsWUFBWSxDQUFDLGVBQWUsQ0FBQyxFQUFFLEdBQUcsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFDekQsTUFBTSxDQUFDLE1BQU0sQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7QUFDNUIsQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiYXN5bmMgKHJlcSwgcmVzLCBuZXh0LCB7IGRlZXAsIHJlcXVpcmUsIGdxbCB9KSA9PiB7XG4gICAgY29uc3QgeyBQYXNzVGhyb3VnaCwgUmVhZGFibGUgfSA9IHJlcXVpcmUoJ3N0cmVhbScpO1xuICAgIGNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XG4gICAgY29uc3QgaHR0cCA9IHJlcXVpcmUoJ2h0dHAnKTtcbiAgICBjb25zdCBBcG9sbG9TZXJ2ZXIgPSByZXF1aXJlKCdhcG9sbG8tc2VydmVyLWV4cHJlc3MnKS5BcG9sbG9TZXJ2ZXI7XG4gICAgY29uc3QgeyBBcG9sbG9TZXJ2ZXJQbHVnaW5EcmFpbkh0dHBTZXJ2ZXIsIEFwb2xsb1NlcnZlclBsdWdpbkxhbmRpbmdQYWdlR3JhcGhRTFBsYXlncm91bmQgfSA9IHJlcXVpcmUoJ2Fwb2xsby1zZXJ2ZXItY29yZScpO1xuICAgIGNvbnN0IGF4aW9zID0gcmVxdWlyZSgnYXhpb3MnKTtcbiAgICBjb25zdCBmZm1wZWcgPSByZXF1aXJlKCdmbHVlbnQtZmZtcGVnJyk7XG4gICAgY29uc3QgRm9ybURhdGEgPSByZXF1aXJlKCdmb3JtLWRhdGEnKTtcblxuICAgIGZ1bmN0aW9uIGJhc2U2NFRvU3RyZWFtKGJhc2U2NFN0cmluZykge1xuICAgICAgICBjb25zdCBiYXNlNjREYXRhID0gYmFzZTY0U3RyaW5nLnJlcGxhY2UoL15kYXRhOlteO10rO2Jhc2U2NCwvLCAnJyk7XG4gICAgICAgIGNvbnN0IGJpbmFyeURhdGEgPSBCdWZmZXIuZnJvbShiYXNlNjREYXRhLCAnYmFzZTY0Jyk7XG4gICAgICAgIGNvbnN0IHN0cmVhbSA9IG5ldyBSZWFkYWJsZSgpO1xuXG4gICAgICAgIHN0cmVhbS5wdXNoKGJpbmFyeURhdGEpO1xuICAgICAgICBzdHJlYW0ucHVzaChudWxsKTtcblxuICAgICAgICByZXR1cm4gc3RyZWFtO1xuICAgIH1cblxuICAgIGNvbnN0IHR5cGVEZWZzID0gYFxuICAgICAgICBpbnB1dCBWb2ljZSB7XG4gICAgICAgICAgICBpZDogSW50IVxuICAgICAgICAgICAgcmVjb3JkOiBTdHJpbmchXG4gICAgICAgICAgICBkdXJhdGlvbjogRmxvYXQhXG4gICAgICAgICAgICBtaW1lVHlwZTogU3RyaW5nIVxuICAgICAgICB9XG4gICAgICAgIHR5cGUgUXVlcnkgeyBkZWVwbWVtb191cGxvYWQodm9pY2U6IFZvaWNlISk6IFN0cmluZyB9XG4gICAgYDtcblxuICAgIGNvbnN0IHJlc29sdmVycyA9IHtcbiAgICAgICAgUXVlcnk6IHsgZGVlcG1lbW9fdXBsb2FkOiBhc3luYyAocGFyZW50LCB7IHZvaWNlOiB7XG4gICAgICAgICAgICBpZCwgcmVjb3JkLCBkdXJhdGlvbiwgbWltZVR5cGVcbiAgICAgICAgfSB9LCBjb250ZXh0VmFsdWUsIGluZm8pID0+IHtcbiAgICAgICAgICAgIGxldCBpbnB1dEZvcm1hdDtcbiAgICAgICAgICAgIGlmIChtaW1lVHlwZS5pbmNsdWRlcygnYXVkaW8vd2VibScpKSB7XG4gICAgICAgICAgICAgICAgaW5wdXRGb3JtYXQgPSAnd2VibSc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG1pbWVUeXBlLmluY2x1ZGVzKCdhdWRpby9hYWMnKSkge1xuICAgICAgICAgICAgICAgIGlucHV0Rm9ybWF0ID0gJ2FhYyc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG1pbWVUeXBlLmluY2x1ZGVzKCdhdWRpby9tcDQnKSkge1xuICAgICAgICAgICAgICAgIGlucHV0Rm9ybWF0ID0gJ21wNCc7XG4gICAgICAgICAgICB9IGVsc2UgcmV0dXJuICdub3Qgc3VwcG9ydGVkIHR5cGUnO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXMsIHJlaikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzdHJlYW0gPSBuZXcgUGFzc1Rocm91Z2goKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNodW5rRGF0YSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBzdHJlYW0ub24oJ2RhdGEnLCBjaHVuayA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaHVua0RhdGEucHVzaChjaHVuayk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBmZm1wZWcoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmlucHV0KGJhc2U2NFRvU3RyZWFtKHJlY29yZCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAuaW5wdXRGb3JtYXQoaW5wdXRGb3JtYXQpXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAub3V0cHV0KHN0cmVhbSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vdXRwdXRGb3JtYXQoJ21wMycpXG4gICAgICAgICAgICAgICAgICAgICAgICAub24oJ2VuZCcsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJlYW0uZW5kKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYnl0ZUFycmF5ID0gQnVmZmVyLmNvbmNhdChjaHVua0RhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZvcm0gPSBuZXcgRm9ybURhdGEoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtLmFwcGVuZCgnZmlsZScsIGJ5dGVBcnJheSwgeyB0eXBlOiAnYXVkaW8vbXAzJywgZmlsZW5hbWU6IGAke2lkfS5tcDNgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF4aW9zLnBvc3QoYGh0dHA6Ly8ke2RlZXAuY2xpZW50LnBhdGguc2xpY2UoMCwgLTQpfS9maWxlYCwgZm9ybSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5rSWQ6IGlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogY29udGV4dFZhbHVlPy5oZWFkZXJzPy5hdXRob3JpemF0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gJ0NvbnRlbnQtTGVuZ3RoJzogZGF0YUFzU3RyaW5nLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICdDb250ZW50LVR5cGUnOiAnbXVsdGlwYXJ0L2Zvcm0tZGF0YSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICdDb250ZW50LVR5cGUnOiAnYXVkaW8vbXAzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmZvcm0uZ2V0SGVhZGVycygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMoJ2RvbmUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqKCdlcnJvcicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAucGlwZShzdHJlYW0sIHsgZW5kOiB0cnVlIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gLnJ1bigpO1xuICAgICAgICAgICAgICAgIC8vIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gfSxcbiAgICB9O1xuICAgIFxuICAgIGNvbnN0IGNvbnRleHQgPSAoeyByZXEgfSkgPT4geyByZXR1cm4geyBoZWFkZXJzOiByZXEuaGVhZGVycyB9OyB9O1xuICAgIFxuICAgIGNvbnN0IGdlbmVyYXRlQXBvbGxvU2VydmVyID0gKCkgPT4ge1xuICAgICAgICByZXR1cm4gbmV3IEFwb2xsb1NlcnZlcih7XG4gICAgICAgICAgICBpbnRyb3NwZWN0aW9uOiB0cnVlLFxuICAgICAgICAgICAgdHlwZURlZnMsIFxuICAgICAgICAgICAgcmVzb2x2ZXJzLFxuICAgICAgICAgICAgY29udGV4dCxcbiAgICAgICAgICAgIHBsdWdpbnM6IFtcbiAgICAgICAgICAgICAgICBBcG9sbG9TZXJ2ZXJQbHVnaW5MYW5kaW5nUGFnZUdyYXBoUUxQbGF5Z3JvdW5kKCksXG4gICAgICAgICAgICBdLFxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcbiAgICBjb25zdCBhcG9sbG9TZXJ2ZXIgPSBnZW5lcmF0ZUFwb2xsb1NlcnZlcigpO1xuICAgIGF3YWl0IGFwb2xsb1NlcnZlci5zdGFydCgpO1xuICAgIGFwb2xsb1NlcnZlci5hcHBseU1pZGRsZXdhcmUoeyBhcHA6IHJvdXRlciwgcGF0aDogJy8nIH0pO1xuICAgIHJvdXRlci5oYW5kbGUocmVxLCByZXMpO1xufSJdfQ==",
        "link_id": 1890
      }
    },
    {
      "id": 1891,
      "type_id": 3,
      "from_id": 1834,
      "to_id": 1890,
      "value": {
        "id": 703,
        "value": "generated",
        "link_id": 1891
      }
    },
    {
      "id": 1892,
      "type_id": 143,
      "from_id": 1890,
      "to_id": 1834
    },
    {
      "id": 1893,
      "type_id": 3,
      "from_id": 1834,
      "to_id": 1892
    },
    {
      "id": 1197,
      "type_id": 3,
      "from_id": 1190,
      "to_id": 1189,
      "value": {
        "id": 471,
        "value": "ModelValue",
        "link_id": 1197
      }
    },
    {
      "id": 1300,
      "type_id": 1219,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 506,
        "value": "https://deep-ai.openai.azure.com/openai/deployments/gpt-4-128k/chat/completions?api-version=2023-03-15-preview",
        "link_id": 1300
      }
    },
    {
      "id": 1325,
      "type_id": 3,
      "from_id": 1316,
      "to_id": 1301,
      "value": {
        "id": 517,
        "value": "gpt-4-32k",
        "link_id": 1325
      }
    },
    {
      "id": 1326,
      "type_id": 3,
      "from_id": 1316,
      "to_id": 1305,
      "value": {
        "id": 518,
        "value": "gpt-35-turbo-16k-max-tokens",
        "link_id": 1326
      }
    },
    {
      "id": 1327,
      "type_id": 3,
      "from_id": 1316,
      "to_id": 1306,
      "value": {
        "id": 519,
        "value": "gpt-35-turbo-16k-providedBy",
        "link_id": 1327
      }
    },
    {
      "id": 1332,
      "type_id": 3,
      "from_id": 1316,
      "to_id": 1311,
      "value": {
        "id": 524,
        "value": "gpt-4o-max-tokens",
        "link_id": 1332
      }
    },
    {
      "id": 1334,
      "type_id": 3,
      "from_id": 1316,
      "to_id": 1310,
      "value": {
        "id": 526,
        "value": "gpt-4o",
        "link_id": 1334
      }
    },
    {
      "id": 1337,
      "type_id": 3,
      "from_id": 1316,
      "to_id": 1297,
      "value": {
        "id": 529,
        "value": "gpt-35-turbo-16k-endpoint",
        "link_id": 1337
      }
    },
    {
      "id": 1404,
      "type_id": 1,
      "from_id": 1403,
      "to_id": 1116
    },
    {
      "id": 1407,
      "type_id": 1,
      "from_id": 1213,
      "to_id": 1213
    },
    {
      "id": 1408,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 545,
        "value": "async ({ require, deep, data: { newLink, triggeredByLinkId } }) => {\r\n    const Conversation = await deep.id(\"@deep-foundation/chatgpt-azure\", \"Conversation\");\r\n    const Result = await deep.id(\"@deep-foundation/chatgpt-azure-templates\", \"Result\");\r\n    const Message = await deep.id(\"@deep-foundation/messaging\", \"Message\");\r\n    const Contain = await deep.id(\"@deep-foundation/core\", \"Contain\");\r\n    const Reply = await deep.id(\"@deep-foundation/chatgpt-azure\", 'Reply');\r\n    const Continue = await deep.id(deep.linkId, \"Continue\");\r\n\r\n    const { data: [template] } = await deep.select(newLink.from_id);\r\n    const { data: [cont] } = await deep.select({\r\n        type_id: Continue,\r\n        from_id: newLink.id,\r\n    });\r\n\r\n    const evalTemplate = async (options) => {\r\n        const { linkId, deep, template } = options;\r\n        const result = eval('(async () => (`'+template+'`))()');\r\n        return result;\r\n    }\r\n\r\n    const linkId = newLink.to_id;\r\n    const value = template?.value?.value || '';\r\n    const result = await evalTemplate({ linkId, deep, template: value });\r\n\r\n    const { data: [{ id: messageLinkId }] } = await deep.insert({\r\n        string: { data: { value: result } },\r\n        type_id: Message,\r\n        in: { data: [\r\n            {\r\n                type_id: Contain,\r\n                from_id: newLink.from_id,\r\n            },\r\n            {\r\n                type_id: Result,\r\n                from_id: newLink.id,\r\n                in: {\r\n                    data: {\r\n                        type_id: Contain,\r\n                        from_id: newLink.from_id,\r\n                    },\r\n                },\r\n            },\r\n        ] },\r\n    });\r\n\r\n    await deep.insert({\r\n        type_id: Reply,\r\n        from_id: messageLinkId,\r\n        ...(cont ? {\r\n            to_id: cont.to_id,\r\n        } : {\r\n            to: { data: {\r\n                type_id: Conversation,\r\n                in: { data: {\r\n                    type_id: Contain,\r\n                    from_id: newLink.id,\r\n                } },\r\n            } },\r\n        }),\r\n        in: { data: [{\r\n                type_id: Contain,\r\n                from_id: newLink.id,\r\n        }] }\r\n    });\r\n\r\n    return {\r\n        templateId: linkId,\r\n        template: template?.value?.value,\r\n        result,\r\n    };\r\n}",
        "link_id": 1408
      }
    },
    {
      "id": 1409,
      "type_id": 35,
      "from_id": 83,
      "to_id": 1408
    },
    {
      "id": 1417,
      "type_id": 3,
      "from_id": 1411,
      "to_id": 1410,
      "value": {
        "id": 548,
        "value": "HandleTemplate",
        "link_id": 1417
      }
    },
    {
      "id": 1452,
      "type_id": 17,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 1453,
      "type_id": 15,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 1454,
      "type_id": 15,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 1466,
      "type_id": 16,
      "from_id": 1464,
      "to_id": 125
    },
    {
      "id": 1484,
      "type_id": 1,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 1485,
      "type_id": 146,
      "from_id": 1484,
      "to_id": 1484,
      "value": {
        "id": 564,
        "value": "🤖",
        "link_id": 1485
      }
    },
    {
      "id": 1490,
      "type_id": 164,
      "from_id": 83,
      "to_id": 1489
    },
    {
      "id": 1492,
      "type_id": 146,
      "from_id": 1491,
      "to_id": 1491,
      "value": {
        "id": 565,
        "value": "💥",
        "link_id": 1492
      }
    },
    {
      "id": 1493,
      "type_id": 51,
      "from_id": 1491,
      "to_id": 1471
    },
    {
      "id": 1494,
      "type_id": 49,
      "from_id": 1491,
      "to_id": 1478
    },
    {
      "id": 1495,
      "type_id": 2,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 566,
        "value": "@deep-foundation/telegram-bot",
        "link_id": 1495
      }
    },
    {
      "id": 1501,
      "type_id": 3,
      "from_id": 1495,
      "to_id": 1485,
      "value": {
        "id": 568,
        "value": "botSymbol",
        "link_id": 1501
      }
    },
    {
      "id": 1502,
      "type_id": 3,
      "from_id": 1495,
      "to_id": 1486,
      "value": {
        "id": 569,
        "value": "messagingTreeIncludeBot",
        "link_id": 1502
      }
    },
    {
      "id": 1503,
      "type_id": 3,
      "from_id": 1495,
      "to_id": 1488,
      "value": {
        "id": 570,
        "value": "HandleTelegramBotOutSupportsCompatable",
        "link_id": 1503
      }
    },
    {
      "id": 1504,
      "type_id": 3,
      "from_id": 1495,
      "to_id": 1487,
      "value": {
        "id": 571,
        "value": "HandleTelegramBotOut",
        "link_id": 1504
      }
    },
    {
      "id": 1505,
      "type_id": 3,
      "from_id": 1495,
      "to_id": 1490,
      "value": {
        "id": 572,
        "value": "HandleTelegramBotInSupportsCompatable",
        "link_id": 1505
      }
    },
    {
      "id": 1507,
      "type_id": 3,
      "from_id": 1495,
      "to_id": 1492,
      "value": {
        "id": 574,
        "value": "activeSymbol",
        "link_id": 1507
      }
    },
    {
      "id": 1509,
      "type_id": 3,
      "from_id": 1495,
      "to_id": 1494,
      "value": {
        "id": 576,
        "value": "onActiveInsertHandle",
        "link_id": 1509
      }
    },
    {
      "id": 1524,
      "type_id": 3,
      "from_id": 1495,
      "to_id": 1458,
      "value": {
        "id": 591,
        "value": "tuaimRuleObjectMessage",
        "link_id": 1524
      }
    },
    {
      "id": 1525,
      "type_id": 3,
      "from_id": 1495,
      "to_id": 1461,
      "value": {
        "id": 592,
        "value": "tuaimRuleObjectReplyTree",
        "link_id": 1525
      }
    },
    {
      "id": 1526,
      "type_id": 3,
      "from_id": 1495,
      "to_id": 1460,
      "value": {
        "id": 593,
        "value": "tuaimRuleObjectReply",
        "link_id": 1526
      }
    },
    {
      "id": 1598,
      "type_id": 22,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 1600,
      "type_id": 1116,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 614,
        "value": "Играй роль моей второй памяти, восприятия и мышления. Тебя зовут Джарвис. Постарайся пожалуйста быть моим лучшим партнером и ассистентом.\n\nПредоставляю тебе доступ к моей памяти, это документация для того что бы ты мог генерировать запросы. Иногда я буду просить что нибудь сделать. Например если я прошу найти для меня что-то, я имею в веду найти в предоставленной тебе памяти через переменную deep. Если ты предложишь код на исполнение - я его выполню автоматически, и результат выполнения передам тебе.\n\nГлубина индексирует ассоциативное поле не только по значениям и указателям, а так-же прошивая связи сквозными мультиродительскими мультинаправленными деревьями. Благодаря этой индексации используя GraphQL API и Deep.Client можно делать запросы о включенности определенных связей. Например:\n\nЕсть дерево containTree (экземпляр связи Tree), в которое включены все связи связью { type_id: TreeIncludeNode, from_id: containTree, to_id: Type } и включены экземпляры типа связи Contain связью { type_id: TreeIncludeFromCurrentTo, from_id: containTree, to_id: Contain }. Мы используем связи типа Contain как аналог вложенности в файловой системе, в том числе указывая в value у этих связей имена вложенных сущностей.\n\nДопустим у нас есть некоторая связь, Найди всех тех пользователей которые есть выше по дереву владения, тем или иным способом владеющих по дереву containTree ею.\n\nawait deep.select({\n  type_id: { _id: [”@deep-foundation/core”,”User”] }\n  down: { tree_id: { _id: [”@deep-foundation/core”,”containTree”] }, link_id: 123 },\n});\n\nТакой запрос вернет { data: Link[] } в котором будут все те пользователи выше по дереву вложенности.\n\nВсе варианты включения типов в деревья:\nTreeIncludeDown, TreeIncludeUp, TreeIncludeNode, TreeIncludeIn, TreeIncludeOut, TreeIncludeFromCurrent, TreeIncludeToCurrent, TreeIncludeCurrentFrom, TreeIncludeCurrentTo, TreeIncludeFromCurrentTo, TreeIncludeToCurrentFrom\n\nОдин тип связи может быть многократно включен в разные деревья разными способами. Это значит что одна связь может быть одновременно во множестве деревьев, где-то нести причастность к дереву от одной связи к другой как это делает Contain из-за TreeIncludeFromCurrentTo, другие, например, принимать от своих from и to причастность к дереву к себе но не передавать с помощью TreeIncludeIn или наоборот раздавать на from и to от себя причастность к дереву.\n\nБлагодаря деревьям, в Глубине работают очень многие механики.\n\nСелектор - это подмножество связей позволяющих в ассоциативной памяти выделить связями диапазон связей по определенным деревьям.\n\nSelector - связь символизирующая один экземпляр “выделения” некоторого диапазона. Он может быть использован, например, что бы подписаться на флуктуации поля связей в этом диапазоне, или что бы применить к нему правила/права.\n\nSelectorInclude - (от selector на некоторую связь) указывает на ту связь от которой и далее вниз применится “выделение”.\n\nSelectorExclude - (от selector на некоторую связь) указывает на связи начиная от которых и ниже необходимо исключить диапазон из выделения. Например SelectorInclude указывает на весь диапозон данных от пользователя и ниже, а SelectorExclude исключает из этого определенную часть памяти, что бы по этому селектору дать своему другу - другому пользователю избирательный доступ.\n\nSelectorTree - (от SelectorInclude или SelectorExclude, ведет на экземпляр типа Tree) обязательная связь, сообщает по какому именно дереву делается выделение. Например указывает на containTree.\n\nSelectorFIlter - (от Selector на Query) позволяет добавить дополнительный запрос проверки после попадания. Например при проверки прав важно что связь не просто попадает в диапозон но и есть связьведущая на предмет подтверждающая факт оплаты в рамках вашего проекта, которую вы создали когда оплата прошла: { in: { type_id: { _id: [”@myproject”,”payed”], from_id: “X-Deep-User-Id” } } }\n\nВ правиле (Rule) связи RuleSubject, RuleObject, RuleAction от экземпляра Rule ведут всегда к некоторому Selector указывающему на диапазон.\n\nВ системе исполнения кода, как синхронной так и синхронной оркестрации, подписка на флуктуации такая как HandleInsert, HandleUpdate, HandleDelete и другие могут вести на селекторы что бы отслеживать события и выполнять код на любом языке в связи с ними.\n\nСелекторы очень удобно использовать как способ выделить что-то,  на будущее, динамически и по каким либо критериям.\n\n\nВ Глубине можно создать SyncTextFile с value куда поместить любой код на любом языке программирования.\nРазработчики на framework-е Глубины создают пакеты для поддержки множество сред выполнения. Для этого создаются вот такие контейнеры создающие среду выполнения, которой способен оперировать оркестратор Глубины автоматически.\nЧтобы код мог был выполнен, его необходимо привязать связью типа Handler от заранее созданного или установленным из пакетного менеджера Supports определенного окружения к связи кода.\nКод обрабатывается пока есть связь Handle*, если ее создать обработка начинается, если ее удалить обработка прекратиться.\nЧтобы привязать код к определенному событию в системе заранее созданы связи-типы, которые можно связать от Handler к некоторой причине выполнения:\n\nHandleInsert - выполнить handle.from когда у handle.to происходит событие insert, handle.to может быть типом, тогда наблюдение будет за экземплярами, либо handle.to может вести на селектор, в таком случае наблюдение будет за событием в диапазоне связей.\nHandleUpdate - выполнить handle.from когда у handle.to происходит событие update, handle.to может быть типом, тогда наблюдение будет за экземплярами, либо handle.to может вести на селектор, в таком случае наблюдение будет за событием в диапазоне связей.\nHandleDelete - выполнить handle.from когда у handle.to происходит событие delete, handle.to может быть типом, тогда наблюдение будет за экземплярами, либо handle.to может вести на селектор, в таком случае наблюдение будет за событием в диапазоне связей.\nHandleRoute - существуют связи Port (поднимает новый обработчик порта), Router (символ маршрутизатора), Route (конкретный обрабатываемый роут в стандарте expressjs), этот handle привязывает некоторый код на любом языке как обработчик запросов по указанному пути на указанном порте, при этом порт может быть не только новый но и PORT на котором развернут Deep.Links сервер\nHandlePort - если им указать от экземпляра Port с value=портом связи на экземпляр JSDockerIsolationProvider с value=именем Docker контейнера, Глубина сама установит поднимет будет обновлять этот контейнер пробросив определенный порт на него.\nHandleGql - если некоторый HandleRoute уже обрабатывает некоторый код, то в нем можно написать GraphQL сервер, а HandleGql позволяет добавить эту GraphQL схему к основной mainGqlEndpoint\nHandleSchedule - должен вести на Schedule содержащий в качестве value строку в стандарте CRON, запускает хендлер по таймеру\n\nМожно создавать свои Handle* связи. Они считаются совместимыми с Supports если от Supports экземпляра на тип Handle* ведет связь SupportsCompatable. Можно создавать любые обстоятельства выполнения, и и выполнять код при любых условиях.\n\nexport type Query = BoolExpLink | number;\n\nexport type LinkToLinksRelations = 'from' | 'to' | 'type' | 'in' | 'out' | 'typed';\n\nexport interface QueryLink extends BoolExpLink {\n  limit?: number;\n  order_by?: { [key: string]: 'asc'|'desc' };\n  offset?: number;\n  distinct_on?: [string];\n  return?: QueryLinkReturn;\n}\n\nexport interface QueryLinkReturn extends QueryLink {\n  relation: LinkToLinksRelations;\n}\n\nexport interface BoolExp<T> {\n  _and?: T[];\n  _or?: T[];\n  _not?: T;\n}\nexport interface BoolExpLink extends BoolExp<BoolExpLink> {\n  id?: ComparasionType<Id>;\n  from_id?: ComparasionType<Id>;\n  to_id?: ComparasionType<Id>;\n  type_id?: ComparasionType<Id>;\n  _id?: ComparasionType<Id>;\n  _from_id?: ComparasionType<Id>;\n  _to_id?: ComparasionType<Id>;\n  _type_id?: ComparasionType<Id>;\n  from?: BoolExpLink;\n  to?: BoolExpLink;\n  type?: BoolExpLink;\n  /** Links related to current by to_id field */\n  in?: BoolExpLink | BoolExpLink[];\n  /** Links related to current by from_id field */\n  out?: BoolExpLink | BoolExpLink[];\n  /** Links related to current by type_id field */\n  typed?: BoolExpLink | BoolExpLink[];\n  /** Selected by this link as selector (usable only for Selector typed links) */\n  selected?: BoolExpSelector | BoolExpSelector[];\n  /** Selectors that select current link. */\n  selectors?: BoolExpSelector | BoolExpSelector[];\n  /** Value type number definition. */\n  number?: BoolExpValue<number>;\n  /** Value type string definition. */\n  string?: BoolExpValue<string>;\n  /** Value type object definition. */\n  object?: BoolExpValue<object>;\n  /** Value (number/string/object shortly). */\n  value?: BoolExpValue<any>;\n  /** Relation to current rule. */\n  can_rule?: BoolExpCan;\n  /** Relation to rules where current link used as action. */\n  can_action?: BoolExpCan;\n  /** Relation to rules where current link used as object. */\n  can_object?: BoolExpCan;\n  /** Relation to rules where current link used as subject. */\n  can_subject?: BoolExpCan;\n  /** Links down by all available trees. (Use link_id for search) */\n  down?: BoolExpTree;\n  /** Links up by all available trees. (Use parent_id for search) */\n  up?: BoolExpTree;\n  /** Links using this link as a tree. */\n  tree?: BoolExpTree;\n  /** Links using this link as a root. */\n  root?: BoolExpTree;\n}\nexport interface BoolExpValue<T> extends BoolExp<BoolExpValue<T>> {\n  id?: ComparasionType<Id>;\n  /** If of link that contains this value. */\n  link_id?: ComparasionType<Id>;\n  /** Relation to the link that contains this value. */\n  link?: BoolExpLink;\n  value?: ComparasionType<T>;\n}\nexport interface BoolExpCan extends BoolExp<BoolExpCan> {\n  /** Link of current rule. */\n  rule_id?: ComparasionType<Id>;\n  /** Id of link symbolizing action, as AllowSelect/AllowInsertType/AllowUpdat e/AllowDelete...*/\n  action_id?: ComparasionType<Id>;\n  /** Id of link symbolizing object to which the rule applies. */\n  object_id?: ComparasionType<Id>;\n  /** Id of link for which, as an authorized link, the rule to action on the object i s granted.*/\n  subject_id?: ComparasionType<Id>;\n  /** Relation to link symbolizing action, as AllowSelect/AllowInsertType/AllowUpdat e/AllowDelete...*/\n  rule?: BoolExpLink;\n  /** Relation to link symbolizing object to which the rule applies. */\n  action?: BoolExpLink;\n  /** Relation to link symbolizing object to which the rule applies. */\n  object?: BoolExpLink;\n  /** Relation to link for which, as an authorized link, the rule to action on th e object is granted.*/\n  subject?: BoolExpLink;\n}\nexport interface BoolExpSelector extends BoolExp<BoolExpCan> {\n  /** Id of link item to be matched by the selector. */\n  item_id?: ComparasionType<Id>;\n  /** Relation to link item to be matched by the selector. */\n  item?: BoolExpLink;\n  /** Id of link selector that the item includes. */\n  selector_id?: ComparasionType<Id>;\n  /** Relation to link selector that the item includes. */\n  selector?: BoolExpLink;\n  /** Id of Query - boolean expression attached to a selector. */\n  query_id?: ComparasionType<Id>;\n  /** Relation to Query - boolean expression attached to a selector. */\n  query?: BoolExpLink;\n  selector_include_id?: ComparasionType<Id>;\n}\nexport interface BoolExpTree extends BoolExp<BoolExpCan> {\n  id?: ComparasionType<Id>;\n  /** Current link id. */\n  link_id?: ComparasionType<Id>;\n  /** Id of link used as tree. */\n  tree_id?: ComparasionType<Id>;\n  /** Root link id by current subtree. */\n  root_id?: ComparasionType<Id>;\n  /** Each parent link id where found upper from link_id */\n  parent_id?: ComparasionType<Id>;\n  /** Depth in subtree of parent_id from root_id */\n  depth?: ComparasionType<string>;\n  /** Equal string for all parent_id in subtree from root_id to link_id. */\n  position_id?: ComparasionType<string>;\n  /** Relation to current link. */\n  link?: BoolExpLink;\n  /** Relation to link used as tree. */\n  tree?: BoolExpLink;\n  /** Relation to root link by current subtree. */\n  root?: BoolExpLink;\n  /** Relation to each parent link found upper from link_id. */\n  parent?: BoolExpLink;\n  /** Relation to all tree rows with equal link_id. */\n  by_link?: BoolExpTree;\n  /** Relation to all tree rows with equal tree_id. */\n  by_tree?: BoolExpTree;\n  /** Relation to all tree rows with equal root_id. */\n  by_root?: BoolExpTree;\n  /** Relation to all tree rows with equal parent_id. */\n  by_parent?: BoolExpTree;\n  /** Relation to all tree rows with equal position_id. */\n  by_position?: BoolExpTree;\n}\nexport interface BoolExpHandler extends BoolExp<BoolExpCan> {\n  /** Id of link with distribution version of executable handler content. */\n  dist_id?: ComparasionType<Id>;\n  /** Relation to link with distribution version of executable handler content. */\n  dist?: BoolExpLink;\n  /** Id of link with source version of executable handler content. */\n  src_id?: ComparasionType<Id>;\n  /** Relation to link with source version of executable handler content. */\n  src?: BoolExpLink;\n  /** Id of link ExecutionProvider. */\n  execution_provider_id?: ComparasionType<Id>;\n  /** Relation to link ExecutionProvider. */\n  execution_provider?: BoolExpLink;\n  /** Id of link IsolationProvider. */\n  isolation_provider_id?: ComparasionType<Id>;\n  /** Relation to link IsolationProvider. */\n  isolation_provider?: BoolExpLink;\n  /** Id of Handler link. */\n  handler_id?: ComparasionType<Id>;\n  /** Relation to Handler link. */\n  handler?: BoolExpLink;\n}\nexport type ComparasionType<T> = ComparasionExp<T> | T;\nexport interface ComparasionExp<T> {\n  _eq?: T;\n  _neq?: T;\n  _gt?: T;\n  _gte?: T;\n  _lt?: T;\n  _lte?: T;\n  _is_null?: boolean;\n  _in?: T[];\n  _nin?: T[];\n  _type_of?: T;\n  _id?: [any, ...any[]];\n  _like?: string;\n  _ilike?: string;\n  _nlike?: string;\n  _nilike?: string;\n  _regex?: string;\n  _nregex?: string;\n  _iregex?: string;\n  _niregex?: string;\n}\nexport interface MutationInput {}\nexport interface MutationInputLinkPlain {\n  id?: Id;\n  from_id?: Id;\n  to_id?: Id;\n  type_id?: Id;\n  from?: { data: MutationInputLink } | MutationInputLink;\n  to?: { data: MutationInputLink } | MutationInputLink;\n  out?: { data: MutationInputLink | MutationInputLink[] } | MutationInputLink | MutationInputLink[];\n  in?: { data: MutationInputLink | MutationInputLink[] } | MutationInputLink | MutationInputLink[];\n  number?: { data: MutationInputValue<number> } | number;\n  string?: { data: MutationInputValue<string> } | string;\n  object?: { data: MutationInputValue<any> } | any;\n  typed?: { data: MutationInputLink | MutationInputLink[] };\n}\nexport interface MutationInputLink extends MutationInputLinkPlain {\n  from?: { data: MutationInputLink } | MutationInputLink;\n  to?: { data: MutationInputLink } | MutationInputLink;\n  out?: { data: MutationInputLink | MutationInputLink[] } | MutationInputLink | MutationInputLink[];\n  in?: { data: MutationInputLink | MutationInputLink[] } | MutationInputLink | MutationInputLink[];\n  number?: { data: MutationInputValue<number> } | number;\n  string?: { data: MutationInputValue<string> } | string;\n  object?: { data: MutationInputValue<any> } | any;\n  typed?: { data: MutationInputLink | MutationInputLink[] };\n}\nexport interface MutationInputValue<T> {\n  link_id?: Id;\n  link?: { data: MutationInputLink };\n  value?: T;\n}\n\nexport type Exp<TTable extends Table = 'links'> = (\n  TTable extends 'numbers' ? BoolExpValue<number> :\n  TTable extends 'strings' ? BoolExpValue<string> :\n  TTable extends 'objects' ? BoolExpValue<object> :\n  TTable extends 'can' ? BoolExpCan :\n  TTable extends 'selectors' ? BoolExpSelector :\n  TTable extends 'tree' ? BoolExpTree :\n  TTable extends 'handlers' ? BoolExpHandler :\n  QueryLink\n) | Id | Id[];\n\nexport type UpdateValue<TTable extends Table = 'links'> = (\n  TTable extends 'numbers' ? MutationInputValue<number> :\n  TTable extends 'strings' ? MutationInputValue<string> :\n  TTable extends 'objects' ? MutationInputValue<any> :\n  MutationInputLinkPlain\n);\n\nexport type InsertObjects<TTable extends Table = 'links'> = (\n  TTable extends 'numbers' ? MutationInputValue<number> :\n  TTable extends 'strings' ? MutationInputValue<string> :\n  TTable extends 'objects' ? MutationInputValue<any> :\n  MutationInputLink\n) | (\n  TTable extends 'numbers' ? MutationInputValue<number> :\n  TTable extends 'strings' ? MutationInputValue<string> :\n  TTable extends 'objects' ? MutationInputValue<any> :\n  MutationInputLink\n)[]\n\nexport type Options<TTable extends Table = 'links'> = {\n  table?: TTable;\n  tableNamePostfix?: string;\n  returning?: string;\n  variables?: any;\n  name?: string;\n  aggregate?: 'count' | 'sum' | 'avg' | 'min' | 'max';\n  mini?: string;\n  deep?: DeepClient<Link<Id>>;\n  subscription?: boolean;\n};\n\nexport type ReadOptions<TTable extends Table = 'links'> = Options<TTable>;\n\nexport type WriteOptions<TTable extends Table = 'links'>  = Options<TTable> & {\n  silent?: boolean;\n  remote?: boolean;\n  local?: boolean;\n}\n\nexport interface DeepClientInstance<L extends Link<Id> = Link<Id>> {\n  linkId?: Id;\n\n  select<TTable extends 'links'|'numbers'|'strings'|'objects'|'can'|'selectors'|'tree'|'handlers', LL = L>(exp: Exp<TTable>, options?: ReadOptions<TTable>): Promise<DeepClientResult<LL[] | number>>;\n  subscribe<TTable extends 'links'|'numbers'|'strings'|'objects'|'can'|'selectors'|'tree'|'handlers', LL = L>(exp: Exp<TTable>, options?: ReadOptions<TTable>): Observable<LL[] | number>;\n\n  insert<TTable extends 'links'|'numbers'|'strings'|'objects', LL = L>(objects: InsertObjects<TTable> , options?: WriteOptions<TTable>):Promise<DeepClientResult<{ id }[]>>;\n\n  update<TTable extends 'links'|'numbers'|'strings'|'objects'>(exp: Exp<TTable>, value: UpdateValue<TTable>, options?: WriteOptions<TTable>):Promise<DeepClientResult<{ id }[]>>;\n\n  delete<TTable extends 'links'|'numbers'|'strings'|'objects'>(exp: Exp<TTable>, options?: WriteOptions<TTable>):Promise<DeepClientResult<{ id }[]>>;\n\n  serial(options: AsyncSerialParams): Promise<DeepClientResult<{ id }[]>>;\n\n  reserve<LL = L>(count: number): Promise<Id[]>;\n\n  await(id: Id): Promise<boolean>;\n \n  id(start: DeepClientStartItem | Exp, ...path: DeepClientPathItem[]): Promise<Id>;\n  idLocal(start: DeepClientStartItem, ...path: DeepClientPathItem[]): Id;\n\n  guest(options: DeepClientGuestOptions): Promise<DeepClientAuthResult>;\n\n  jwt(options: DeepClientJWTOptions): Promise<DeepClientAuthResult>;\n\n  login(options: DeepClientJWTOptions): Promise<DeepClientAuthResult>;\n\n  logout(): Promise<DeepClientAuthResult>;\n\n  can(objectIds: Id[], subjectIds: Id[], actionIds: Id[]): Promise<boolean>;\n\n  Traveler(links: Link<Id>[]): NativeTraveler;\n}\n\nЕсли пишешь код, ВСЕГДА выделяй его тремся косыми ковычками ууказывая javascript, и пиши перед ним ключевое слово DEEP_MEMORY_EXECUTE. Тогда код будет выполняться автоматически и ты будешь получать результаты, имея возможность продолжать твою работу. Если тебя просят осмотреться, посмотреть на что-то, найти что-то или изучить - это может значить: напиши код результат выполнения которого позволит тебе ответить на этот вопрос, если он будет выполнен. То что ты хочешь получить из исполняемого кода, верни с помощью return. Не используй console.log.",
        "link_id": 1600
      }
    },
    {
      "id": 1601,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 615,
        "value": "async ({ deep, data: { newLink } }) => {\n    const selector = await deep.id(deep.linkId, 'inSelector');\n    const executor = await deep.id(deep.linkId, 'executor');\n    const reader = await deep.id(deep.linkId, 'reader');\n    const HandleTelegramBotIn = await deep.id('@deep-foundation/telegram-bot', 'HandleTelegramBotIn');\n    const onTelegramBotInHandler = await deep.id(deep.linkId, 'onTelegramBotInHandler');\n    const HandleTelegramBotOut = await deep.id('@deep-foundation/telegram-bot', 'HandleTelegramBotOut');\n    const onTelegramBotOutHandler = await deep.id(deep.linkId, 'onTelegramBotOutHandler');\n    const messagingTree = await deep.id('@deep-foundation/messaging', 'messagingTree');\n    const systemMessage = await deep.id(deep.linkId, 'systemMessage');\n    const System = await deep.id('@deep-foundation/chatgpt-azure', 'System');\n\n    const Join = deep.idLocal('@deep-foundation/core', 'Join');\n    const Contain = deep.idLocal('@deep-foundation/core', 'Contain');\n    const SelectorTree = deep.idLocal('@deep-foundation/core', 'SelectorTree');\n    const SelectorInclude = deep.idLocal('@deep-foundation/core', 'SelectorInclude');\n\n    const contain = (value, from_id) => ({\n        in: { data: {\n            type_id: Contain,\n            from_id: from_id,\n            string: { data: { value } },\n        } },\n    });\n\n    await deep.insert([\n        {\n            type_id: SelectorInclude,\n            from_id: selector,\n            to_id: newLink.to_id,\n            ...contain('include'+newLink.to_id, selector),\n            out: { data: {\n                type_id: SelectorTree,\n                to_id: messagingTree,\n                ...contain('tree'+newLink.to_id, selector),\n            } },\n        },\n        {\n            type_id: HandleTelegramBotIn,\n            from_id: newLink.to_id,\n            to_id: onTelegramBotInHandler,\n            ...contain('handleTelegramBotIn'+newLink.to_id, selector),\n        },\n        {\n            type_id: HandleTelegramBotOut,\n            from_id: newLink.to_id,\n            to_id: onTelegramBotOutHandler,\n            ...contain('handleTelegramBotOut'+newLink.to_id, selector),\n        },\n        {\n            type_id: Join,\n            from_id: executor,\n            to_id: deep.linkId,\n            ...contain('executorJoin'+newLink.to_id, selector),\n        },\n        {\n            type_id: System,\n            from_id: systemMessage,\n            to_id: await deep.id('@deep-foundation/chatgpt-azure-templates'),\n            ...contain('system'+newLink.to_id, selector),\n        },\n    ]);\n}",
        "link_id": 1601
      }
    },
    {
      "id": 1602,
      "type_id": 35,
      "from_id": 83,
      "to_id": 1601
    },
    {
      "id": 1607,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 617,
        "value": "async ({ deep, data: { newLink, triggeredByLinkId } }) => {\n    const Bot = await deep.id('@deep-foundation/telegram-bot', 'Bot');\n    const Token = await deep.id('@deep-foundation/telegram-bot', 'Token');\n    const Active = await deep.id('@deep-foundation/deepmemorybot', 'Active');\n    const Contain = await deep.id('@deep-foundation/core', 'Contain');\n    const Message = await deep.id('@deep-foundation/messaging', 'Message');\n    const messagingTree = await deep.id('@deep-foundation/messaging', 'messagingTree');\n    const Reply = await deep.id('@deep-foundation/messaging', 'Reply');\n    const containTree = deep.idLocal('@deep-foundation/core', 'containTree');\n    var bConversation = await deep.id('@deep-foundation/telegram-bot', 'Conversation');\n    var gptConversation = await deep.id('@deep-foundation/chatgpt-azure', 'Conversation');\n\n    const reader = await deep.id('@deep-foundation/deepmemorybot', 'reader');\n    const executor = await deep.id('@deep-foundation/deepmemorybot', 'executor');\n\n    const botIdByContain = (await deep.select({\n        type_id: Bot,\n        down: {\n            tree_id: containTree,\n            link_id: triggeredByLinkId\n        },\n    }))?.data?.[0]?.id;\n    // found gpt convesations before\n    var { data: [bconv] } = await deep.select({ type_id: bConversation, down: { tree_id: messagingTree, link_id: newLink.id } });\n    const gptconv = bconv ? (await deep.select({\n        type_id: gptConversation,\n        down: {\n            tree_id: messagingTree,\n            link: {\n                up: {\n                    tree_id: messagingTree,\n                    parent_id: bconv.id,\n                },\n            },\n        },\n    }))?.data?.[0] : undefined;\n    // const conversationId = (await deep.select({\n    //     type_id: Conversation,\n    //     down: {\n    //         tree_id: messagingTree,\n    //         link_id: newLink.id,\n    //     },\n    // }))?.data?.[0]?.id;\n    if (!!botIdByContain || triggeredByLinkId == reader || triggeredByLinkId == executor) {\n        const botId = botIdByContain || (await deep.select({\n            type_id: Bot,\n            down: {\n                tree_id: messagingTree,\n                link_id: newLink.id,\n            },\n        }))?.data?.[0]?.id;\n        if (!botId) return { error: '!botId', botId, triggeredByLinkId, botIdByContain, executor, reader }\n        const { data: [active] } = await deep.select({\n            type_id: Active,\n            to_id: botId,\n        });\n        if (!active) return { error: '!active', botId, triggeredByLinkId }\n        const { data: [{ id }] } = await deep.insert({\n            type_id: await deep.id('@deep-foundation/chatgpt-azure-templates', 'Apply'),\n            from_id: await deep.id('@deep-foundation/deepmemorybot', 'template'),\n            to_id: newLink.from_id,\n            ...(gptconv ? {\n                out: { data: {\n                    type_id: await deep.id('@deep-foundation/chatgpt-azure-templates', 'Continue'),\n                    to_id: gptconv.id,\n                    in: { data: {\n                        type_id: Contain,\n                        from_id: active.id\n                    } },\n                } }\n            } : {}),\n            in: { data: {\n                type_id: Contain,\n                from_id: active.id\n            } },\n        });\n        const { data: [apply] } = await deep.select(id);\n        \n        const response = await new Promise(async (res, rej) => {\n            let counter = 0;\n            const interval = setInterval(async () => {\n                const { data: [response] } = await deep.Traveler([apply])\n                    .out({ type_id: await deep.id('@deep-foundation/chatgpt-azure-templates', 'Result') })\n                    .to().in({ type_id: await deep.id('@deep-foundation/chatgpt-azure', 'Reply') }).from()\n                    .select();\n                if (response) res(response);\n                else {\n                    if (counter > 500) {\n                        clearInterval(interval);\n                        rej(new Error(`timeout ${counter} times`));\n                    } else {\n                        counter++;\n                    }\n                }\n            }, 1000);\n        });\n\n        if (!response) return { error: '!response' };\n\n        await deep.insert({\n            type_id: Reply,\n            from_id: response?.id,\n            to_id: newLink.from_id,\n            in: { data: {\n                type_id: Contain,\n                from_id: active.id\n            } },\n        });\n        return { botId, triggeredByLinkId };\n    } else {\n        return { botId: botIdByContain, triggeredByLinkId };\n    }\n}",
        "link_id": 1607
      }
    },
    {
      "id": 1608,
      "type_id": 35,
      "from_id": 83,
      "to_id": 1607
    },
    {
      "id": 1609,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 618,
        "value": "async ({ deep, data: {\n    state,\n    req, res,\n    botId,\n    userId,\n    conversationId,\n    handlerId,\n    udeep,\n}, require }) => {\n    const Active = await deep.id('@deep-foundation/deepmemorybot', 'Active');\n    const Contain = await deep.id('@deep-foundation/core', 'Contain');\n    const Message = await deep.id('@deep-foundation/messaging', 'Message');\n    const Reply = await deep.id('@deep-foundation/messaging', 'Reply');\n\n    const reader = await deep.id('@deep-foundation/deepmemorybot', 'reader');\n    const executor = await deep.id('@deep-foundation/deepmemorybot', 'executor');\n\n    const { serializeError } = await deep.import('serialize-error');\n\n    const edeep = new deep.DeepClient({\n        deep, ...(await deep.jwt({ linkId: executor }))\n    });\n\n    if (req?.body?.callback_query?.data) {\n        const data = JSON.parse(req?.body?.callback_query?.data);\n        if (data.messageId) {\n            state.defaultHandling = false;\n            const { data: [active] } = await edeep.select({\n                type_id: Active,\n                to_id: botId,\n            });\n            if (!active) return { error: '!active' }\n            let result;\n            try {\n                result = await edeep.eval({\n                    linkId: data.messageId,\n                    handlerId: data.handlerId,\n                });\n                if (result.error) result.error = serializeError(result.error);\n            } catch(error) {\n                result = { error: serializeError(error) };\n            }\n            const { data: [reply] } = await edeep.insert({\n                type_id: Reply,\n                from: { data: {\n                    type_id: Message,\n                    string: { data: { value: `${JSON.stringify(result, null, 2)}` } },\n                    in: { data: {\n                        type_id: Contain,\n                        from_id: executor,\n                    } },\n                } },\n                to_id: data.messageId,\n                in: { data: {\n                    type_id: Contain,\n                    from_id: executor,\n                } },\n            });\n            if (reply) await deep.await(reply.id);\n            res.send(JSON.stringify({\n                userId: executor,\n                replyId: reply.id,\n                result,\n            }));\n        }\n    }\n}",
        "link_id": 1609
      }
    },
    {
      "id": 1835,
      "type_id": 35,
      "from_id": 83,
      "to_id": 1834
    },
    {
      "id": 1839,
      "type_id": 108,
      "from_id": 1838,
      "to_id": 1835
    },
    {
      "id": 1840,
      "type_id": 163,
      "from_id": 162,
      "to_id": 1839
    },
    {
      "id": 1855,
      "type_id": 3,
      "from_id": 1849,
      "to_id": 1847,
      "value": {
        "id": 708,
        "value": "positionValue",
        "link_id": 1855
      }
    },
    {
      "id": 1856,
      "type_id": 3,
      "from_id": 1849,
      "to_id": 1848,
      "value": {
        "id": 709,
        "value": "handleUpdatePosition",
        "link_id": 1856
      }
    },
    {
      "id": 1857,
      "type_id": 3,
      "from_id": 1849,
      "to_id": 1844,
      "value": {
        "id": 710,
        "value": "handleUpdateDevice",
        "link_id": 1857
      }
    },
    {
      "id": 52,
      "type_id": 1,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 53,
      "type_id": 4,
      "from_id": 52,
      "to_id": 7
    },
    {
      "id": 54,
      "type_id": 1,
      "from_id": 8,
      "to_id": 8
    },
    {
      "id": 55,
      "type_id": 1,
      "from_id": 8,
      "to_id": 8
    },
    {
      "id": 56,
      "type_id": 4,
      "from_id": 55,
      "to_id": 7
    },
    {
      "id": 57,
      "type_id": 29,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 58,
      "type_id": 1,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 59,
      "type_id": 4,
      "from_id": 58,
      "to_id": 7
    },
    {
      "id": 60,
      "type_id": 1,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 61,
      "type_id": 4,
      "from_id": 60,
      "to_id": 7
    },
    {
      "id": 62,
      "type_id": 1,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 63,
      "type_id": 4,
      "from_id": 62,
      "to_id": 5
    },
    {
      "id": 64,
      "type_id": 23,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 65,
      "type_id": 8,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 66,
      "type_id": 1,
      "from_id": 8,
      "to_id": 8
    },
    {
      "id": 67,
      "type_id": 36,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 68,
      "type_id": 38,
      "from_id": 67,
      "to_id": 66
    },
    {
      "id": 69,
      "type_id": 39,
      "from_id": 67,
      "to_id": 8
    },
    {
      "id": 70,
      "type_id": 1,
      "from_id": 8,
      "to_id": 36
    },
    {
      "id": 71,
      "type_id": 23,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 72,
      "type_id": 1,
      "from_id": 15,
      "to_id": 8
    },
    {
      "id": 73,
      "type_id": 1,
      "from_id": 15,
      "to_id": 58
    },
    {
      "id": 74,
      "type_id": 48,
      "from_id": 8,
      "to_id": 35
    },
    {
      "id": 75,
      "type_id": 1,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 76,
      "type_id": 4,
      "from_id": 75,
      "to_id": 5
    },
    {
      "id": 77,
      "type_id": 1,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1,
        "value": "Router",
        "link_id": 77
      }
    },
    {
      "id": 78,
      "type_id": 1,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 79,
      "type_id": 78,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 80,
      "type_id": 4,
      "from_id": 79,
      "to_id": 5
    },
    {
      "id": 81,
      "type_id": 79,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 2,
        "value": "deepf/js-docker-isolation-provider:main",
        "link_id": 81
      }
    },
    {
      "id": 82,
      "type_id": 1,
      "from_id": 8,
      "to_id": 8
    },
    {
      "id": 83,
      "type_id": 82,
      "from_id": 81,
      "to_id": 33
    },
    {
      "id": 84,
      "type_id": 1,
      "from_id": 8,
      "to_id": 97
    },
    {
      "id": 87,
      "type_id": 35,
      "from_id": 83,
      "to_id": 86
    },
    {
      "id": 88,
      "type_id": 49,
      "from_id": 84,
      "to_id": 87
    },
    {
      "id": 201,
      "type_id": 3,
      "from_id": 184,
      "to_id": 17,
      "value": {
        "id": 23,
        "value": "Rule",
        "link_id": 201
      }
    },
    {
      "id": 233,
      "type_id": 3,
      "from_id": 184,
      "to_id": 49,
      "value": {
        "id": 55,
        "value": "HandleInsert",
        "link_id": 233
      }
    },
    {
      "id": 234,
      "type_id": 3,
      "from_id": 184,
      "to_id": 50,
      "value": {
        "id": 56,
        "value": "HandleUpdate",
        "link_id": 234
      }
    },
    {
      "id": 1627,
      "type_id": 3,
      "from_id": 1616,
      "to_id": 1599,
      "value": {
        "id": 628,
        "value": "executor",
        "link_id": 1627
      }
    },
    {
      "id": 1628,
      "type_id": 3,
      "from_id": 1616,
      "to_id": 1600,
      "value": {
        "id": 629,
        "value": "systemMessage",
        "link_id": 1628
      }
    },
    {
      "id": 1631,
      "type_id": 3,
      "from_id": 1616,
      "to_id": 1605,
      "value": {
        "id": 632,
        "value": "onActiveDeleteHandler",
        "link_id": 1631
      }
    },
    {
      "id": 1729,
      "type_id": 3,
      "from_id": 1721,
      "to_id": 1718,
      "value": {
        "id": 661,
        "value": "Boolean",
        "link_id": 1729
      }
    },
    {
      "id": 5239,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 5236,
      "value": {
        "id": 1141,
        "value": "MenuComponent",
        "link_id": 5239
      }
    },
    {
      "id": 553,
      "type_id": 2,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 207,
        "value": "@deep-foundation/core-symbols",
        "link_id": 553
      }
    },
    {
      "id": 559,
      "type_id": 146,
      "from_id": 553,
      "to_id": 146,
      "value": {
        "id": 209,
        "value": "🙂",
        "link_id": 559
      }
    },
    {
      "id": 560,
      "type_id": 3,
      "from_id": 553,
      "to_id": 559,
      "value": {
        "id": 210,
        "value": "SymbolSymbol",
        "link_id": 560
      }
    },
    {
      "id": 586,
      "type_id": 3,
      "from_id": 553,
      "to_id": 585,
      "value": {
        "id": 236,
        "value": "RouterSymbol",
        "link_id": 586
      }
    },
    {
      "id": 587,
      "type_id": 146,
      "from_id": 553,
      "to_id": 75,
      "value": {
        "id": 237,
        "value": "⏲",
        "link_id": 587
      }
    },
    {
      "id": 593,
      "type_id": 146,
      "from_id": 553,
      "to_id": 66,
      "value": {
        "id": 243,
        "value": "🤝",
        "link_id": 593
      }
    },
    {
      "id": 594,
      "type_id": 3,
      "from_id": 553,
      "to_id": 593,
      "value": {
        "id": 244,
        "value": "JoinSymbol",
        "link_id": 594
      }
    },
    {
      "id": 595,
      "type_id": 146,
      "from_id": 553,
      "to_id": 62,
      "value": {
        "id": 245,
        "value": "🔮",
        "link_id": 595
      }
    },
    {
      "id": 603,
      "type_id": 146,
      "from_id": 553,
      "to_id": 52,
      "value": {
        "id": 253,
        "value": "🔖",
        "link_id": 603
      }
    },
    {
      "id": 606,
      "type_id": 3,
      "from_id": 553,
      "to_id": 605,
      "value": {
        "id": 256,
        "value": "HandleOperationSymbol",
        "link_id": 606
      }
    },
    {
      "id": 607,
      "type_id": 146,
      "from_id": 553,
      "to_id": 46,
      "value": {
        "id": 257,
        "value": "🏷",
        "link_id": 607
      }
    },
    {
      "id": 752,
      "type_id": 1,
      "from_id": 8,
      "to_id": 97
    },
    {
      "id": 946,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 399,
        "value": "({ deep, require }) => {\n  const React = require('react');\n  const { Wrap, WrapItem, Stack, HStack, VStack, Flex, StackDivider, Box, Button, Text, Input } = require('@chakra-ui/react');\n  const { Resize } = require('@deep-foundation/deepcase');\n  const MonacoEditor = require('@monaco-editor/react');\n  const json5 = require('json5');\n  const {TbArrowMoveLeft, TbArrowMoveRight } =require('react-icons/tb');\n  const { useDebounceCallback } = require('@react-hook/debounce');\n  const { useColorModeValue, useColorMode } = require('@chakra-ui/react');\n\n  const getSymbol = (link) => link?.inByType?.[deep.idLocal('@deep-foundation/core', 'Symbol')]?.[0]?.value?.value\n\n  const getTypes = (link) => {\n    const types = [];\n    for (let l = link; l?.type && l?.id !== 1; l = link?.type) types.push(link?.type_id);\n    return types;\n  };\n\n  const Contain = deep.idLocal('@deep-foundation/core', 'Contain');\n\n  const ListItem = ({ link, current, setCurrent,  setMode, ...props }) => {\n    // const [__symbol] = deep.useMinilinksSubscription({\n    //   type_id: deep.idLocal('@deep-foundation/core', 'Symbol'),\n    //   to_id: { _in: getTypes(link) },```\n    // });\n    // const _symbol = __symbol?.value?.value;\n    const _symbol = getSymbol(link) || getSymbol(link?.type) || getSymbol(link?.type?.type);\n    const _value = deep.stringify(link?.value?.value);\n    const __value = _value?.length > 29 ? _value.slice(0, 20)+'...'+_value.slice(-9, _value.length) : _value;\n\n    const [fromL] = deep.useMinilinksSubscription({\n      out: { id: link.id, type_id: Contain }\n    });\n    const [parentL] = deep.useMinilinksSubscription(link.type_id === Contain ? {\n      out: { type_id: Contain, to_id: link.from_id },\n    } : {\n      out: { type_id: Contain, to_id: link.id },\n    });\n    const broadcrumbs = [];\n    if (fromL) broadcrumbs.push(fromL.id);\n    let next = parentL;\n    do {\n      if (next) {\n        if (deep.nameLocal(next?.id)) broadcrumbs.push(next?.id);\n        next = next?.inByType?.[Contain]?.[0]?.from;\n      }\n    } while (next);\n    // if (parentL) broadcrumbs.push(parentL.id);\n\n    return (<Box\n      background='backgroundModal' p='0.2rem' {...props}\n      xs={{\n        border: current?.id === link?.id ? '3px #ffffff solid' : '0px transparent solid',\n        transition: 'all 1s ease',\n        cursor: 'pointer',\n      }}\n      _hover={{ border: '3px #ffffff7d solid' }}\n    >\n      <Box mr='0.5rem'><Text>{_symbol} {link?.id} {deep.nameLocal(link?.id)}</Text></Box>\n      <Box mr='0.5rem'><Text>\n        {broadcrumbs.map(id => <Button\n          key={id}\n          size=\"xs\"\n          onClick={async () => {\n            const { data: [next] } = await deep.select(id);\n            setCurrent(next);\n            setMode('Contains');\n          }}\n        >{deep.nameLocal(id)}</Button>)}\n      </Text></Box>\n      <Box mr='0.5rem'><Text>{__value}</Text></Box>\n      <Flex \n        divider={<StackDivider borderColor='borderColor' />}\n        spacing={2}\n        justifyContent='space-between'\n        alignItems='center'\n        sx={{\n          '& > *:not(:last-of-type)': {\n            mr: '0.5rem'\n          }\n        }}\n      >\n        {!!link?.from_id && <Button \n          size='sm'\n          variant=\"outline\" \n          width='max-content'\n          rightIcon={<TbArrowMoveLeft size='1.3rem' />}\n          onClick={async () => {\n            const { data: [next] } = await deep.select(link?.from_id);\n            setCurrent(next);\n          }}\n        ><Text fontSize='sm'>{link?.from_id || 0}</Text></Button>}\n        {!!link?.to_id && <Button \n          size='sm'\n          fontSize='sm'\n          variant=\"outline\"\n          leftIcon={<TbArrowMoveRight size='1.3rem' />} \n            onClick={async () => {\n            const { data: [next] } = await deep.select(link?.to_id);\n            setCurrent(next);\n          }}\n        ><Text>{link?.to_id || 0}</Text></Button>}\n        {!!link?.type_id && <Button\n          size='sm' \n          fontSize='sm'\n          variant=\"outline\" \n            onClick={async () => {\n            const { data: [next] } = await deep.select(link?.type_id);\n            setCurrent(next);\n          }}\n        ><Text>{link?.type_id} {deep.nameLocal(link?.type_id)}</Text></Button>}\n      </Flex>\n    </Box>);\n  };\n\n  const List = ({\n    link, parentsQuery, childrenQuery, current, setCurrent, setMode\n  }) => {\n    const { data: parents } = deep.useDeepSubscription(parentsQuery);\n\n    const { data: children } = deep.useDeepSubscription(childrenQuery);\n\n    const descriptionQuery = React.useMemo(() => {\n      return {\n        to: { down: {\n          tree_id: deep.idLocal('@deep-foundation/core', 'typesTree'),\n          link_id: { _in: [\n            ...(current?.id ? [current.id] : []),\n            ...parents?.map(l => l.id),\n            ...children?.map(l => l.id),\n            ...parents?.map(l => l.from_id),\n            ...children?.map(l => l.from_id),\n            ...parents?.map(l => l.to_id),\n            ...children?.map(l => l.to_id),\n          ] },\n         } },\n        type_id: { _in: [deep.idLocal('@deep-foundation/core', 'Contain'), deep.idLocal('@deep-foundation/core', 'Symbol')] },\n      };\n    }, [current, parents, children]);\n    const description = deep.useDeepSubscription(descriptionQuery);\n\n    deep.useDeepSubscription({\n      down: {\n        tree_id: { _in: [\n          deep.idLocal('@deep-foundation/core', 'typesTree'),\n          deep.idLocal('@deep-foundation/core', 'containTree'),\n        ] },\n        link_id: { _in: [\n          ...(current?.id ? [current.id] : []),\n          ...parents?.map(l => l.id),\n          ...children?.map(l => l.id),\n          ...parents?.map(l => l.from_id),\n          ...children?.map(l => l.from_id),\n          ...parents?.map(l => l.to_id),\n          ...children?.map(l => l.to_id),\n        ] },\n      },\n    });\n\n    return <>{!description.loading &&\n      <VStack\n        divider={<StackDivider borderColor='borderColor' />}\n        spacing={1}\n        align='stretch'\n        fontSize='sm'\n      >\n        {parents?.map(c => (\n          <ListItem key={c?.id} current={current} setMode={setMode} setCurrent={setCurrent} link={c} onClick={() => setCurrent(c)} bg='backgroundModal' p='0.2rem' />\n        ))}\n        {!!current && <ListItem current={current} setMode={setMode}  setCurrent={setCurrent} link={current}  p='0.2rem' />}\n        {children?.map(c => (\n          <ListItem key={c?.id} current={current} setMode={setMode}  setCurrent={setCurrent} link={c} onClick={() => setCurrent(c)}/>\n        ))}\n      </VStack>\n    }</>;\n  };\n\n  return ({\n    style,\n    link,\n    onChange,\n    search,\n    query,\n    fillSize,\n    children = null,\n  }: {\n    style: any;\n    link: any;\n    onChange?: any;\n    search?: any;\n    query?: any;\n    fillSize?: boolean;\n    children?: any;\n  }) => {\n    const [currentId, setCurrentId] = React.useState<number>(link?.id || 0)\n    const setCurrent = React.useCallback((link) => setCurrentId(link?.id || 0));\n    const { data: [current] = [] } = deep.useDeepSubscription({ id: currentId });\n    const [mode, setMode] = React.useState(typeof(search) === 'string' ? 'Search' : typeof(query) === 'object' ? 'Query' : 'Contains');\n    const [ viewSize, setViewSize ] = React.useState({ height: 400, width: 450 });\n\n    React.useEffect(() => onChange && onChange(current), [current]);\n\n    const [trees, setTrees] = React.useState([]);\n    React.useEffect(() => { mode === 'Trees' && (async () => {\n      setTrees((await deep.select({\n        link_id: { _eq: current?.id },\n        parent_id: { _eq: current?.id }\n        distinct_on: ['tree_id'],\n      }, {\n        table: 'tree',\n        returning: `\n          id link_id tree_id root_id depth position_id\n        `,\n      }))?.data);\n    })() }, [mode, current]);\n    const [tree, setTree] = React.useState();\n    React.useEffect(() => setTree(), [mode, current]);\n\n    const [q, setQ] = React.useState(query);\n    const setQoDebounce = useDebounceCallback((q) => {\n      try {\n        setQo(json5.parse(q));\n      } catch(error) {}\n    }, 1000);\n    const [qo setQo] = React.useState(q);\n\n    const [s, setS] = React.useState(search || '');\n    const setSoDebounce = useDebounceCallback((s) => {\n      const num = parseFloat(s);\n      const _or = [];\n      if (!Number.isNaN(num)) {\n        _or.push({ id: num }, { number: { value: num } });\n      }\n      _or.push(\n        { string: { value: s } },\n        { string: { value: { _ilike: `%${s}%` } } },\n        { string: { value: { _similar: s } } },\n        { in: { type_id: deep.idLocal('@deep-foundation/core', 'Contain'), string: { value: s } } },\n        { in: { type_id: deep.idLocal('@deep-foundation/core', 'Contain'), string: { value: { _ilike: `%${s}%` } } } },\n        { in: { type_id: deep.idLocal('@deep-foundation/core', 'Contain'), string: { value: { _similar: s } } } },\n      );\n      \n      \n      const query = JSON.stringify({\n        _not: { type_id: deep.idLocal('@deep-foundation/core', 'Contain') },\n        _or,\n      });\n      setQ(query);\n      // setQoDebounce(query);\n      try {\n        setQo(json5.parse(query));\n      } catch(error) {}\n    }, 1000);\n\n    const { colorMode } = useColorMode();\n\n    const bg = useColorModeValue('#eeeeee', '#434343');\n    const hover = useColorModeValue('white', '#1e1e1e');\n    const borderColor = useColorModeValue('#434343', '#eeeeee');\n    const color = useColorModeValue('#1e1e1e', 'white');\n\n    const body = <Box sx={{ \n        height: fillSize ? '100%' : viewSize.height, \n        width: fillSize ? '100%' : viewSize.width, \n        overflowY: 'auto', \n        position: 'relative', \n        borderColor: 'borderColor', \n        borderWidth: 'thin',\n        borderRadius: '0.5rem',\n        p: '0.2rem',\n        ...style }}\n      >\n      <HStack\n        // divider={<StackDivider borderColor='borderColor' />}\n        // spacing={1}\n        align='stretch'\n        justifyContent='space-between'\n        sx={{ position: 'sticky', top: 0, mb: '0.3rem' }}\n        bg='transparent'\n      >\n        <Button variant='solid' size='sm' background={!(mode === 'Search') ? 'backgroundModal' : 'gray.400'} borderColor={!(mode === 'Search') ? 'borderColor' : 'backgroundModal'} borderWidth='thin' onClick={() => setMode('Search')}>🪬</Button>\n        <Button variant='solid' size='sm' background={!(mode === 'Query') ? 'backgroundModal' : 'gray.400'} borderColor={!(mode === 'Query') ? 'borderColor' : 'backgroundModal'} borderWidth='thin' onClick={() => setMode('Query')}>🔍</Button>\n        <Button variant='solid' size='sm' background={!(mode === 'Contains') ? 'backgroundModal' : 'gray.400'} borderColor={!(mode === 'Contains') ? 'borderColor' : 'backgroundModal'} borderWidth='thin' onClick={() => setMode('Contains')}>🗂</Button>\n        <Button variant='solid' size='sm' background={!(mode === 'In/Out') ? 'backgroundModal' : 'gray.400'} borderColor={!(mode === 'In/Out') ? 'borderColor' : 'backgroundModal'} borderWidth='thin' onClick={() => setMode('In/Out')}>In/Out</Button>\n        <Button variant='solid' size='sm' background={!(mode === 'Trees') ? 'backgroundModal' : 'gray.400'} borderColor={!(mode === 'Trees') ? 'borderColor' : 'backgroundModal'} borderWidth='thin' onClick={() => setMode('Trees')}>🌲</Button>\n      </HStack>\n      {mode === 'Search' && <>\n        {current && <List\n          link={link}\n          current={current}\n          setMode={setMode}\n          setCurrent={setCurrent}\n          parentsQuery={{ id: 0 }}\n          childrenQuery={{ id: 0 }}\n        />}\n        <Input\n          autoFocus\n          type=\"text\"\n          variant='filled'\n          variant='filled'\n          bg={bg}\n          color={color}\n          borderWidth='thin'\n          borderColor={borderColor}\n          _hover={{bg: hover}}\n          _focus={{bg: bg}}\n          sx={{\n            width: '100%',\n          }}\n          onChange={(e) => {\n            setS(e.target.value);\n            setSoDebounce(e.target.value);\n          }}\n          value={s}\n        />\n        {<List\n          link={link}\n          current={null}\n          setMode={setMode}\n          setCurrent={setCurrent}\n          parentsQuery={{ id: 0 }}\n          childrenQuery={{\n            ...qo,\n            limit: 30,\n          }}\n        />}\n      </>}\n      {mode === 'Query' && <>\n        {current && <List\n          link={link}\n          current={current}\n          setMode={setMode}\n          setCurrent={setCurrent}\n          parentsQuery={{ id: 0 }}\n          childrenQuery={{ id: 0 }}\n        />}\n        <MonacoEditor\n          options={{\n            minimap: {\n              enabled: false\n            },\n            lineNumbers: 'off',\n            wordWrap: true,\n          }}\n          height=\"200px\"\n          width=\"100%\"\n          theme={colorMode === 'light' ? 'light' : \"vs-dark\"}\n          defaultLanguage=\"json\"\n          defaultValue={q || ''}\n          onChange={(value) => {\n            setQ(value);\n            setQoDebounce(value);\n          }}\n          // onMount={handleEditorDidMount}\n        />\n        <List\n          link={link}\n          current={null}\n          setMode={setMode}\n          setCurrent={setCurrent}\n          parentsQuery={{ id: 0 }}\n          childrenQuery={{\n            ...qo,\n            limit: 30,\n          }}\n        />\n      </>}\n      {mode === 'Contains' && current && <List\n        link={link}\n        current={current}\n        setMode={setMode}\n        setCurrent={setCurrent}\n        parentsQuery={{\n          out: {\n            type_id: deep.idLocal('@deep-foundation/core', 'Contain'),\n            to_id: current?.id,\n          }\n        }}\n        childrenQuery={{\n          in: {\n            type_id: deep.idLocal('@deep-foundation/core', 'Contain'),\n            from_id: current?.id,\n          }\n        }}\n      />}\n      {mode === 'In/Out' && current && <>\n        <List\n          link={link}\n          current={current}\n          setMode={setMode}\n          setCurrent={setCurrent}\n          parentsQuery={{\n            to_id: current?.id\n          }}\n          childrenQuery={{\n            from_id: current?.id\n          }}\n        />\n      </>}\n      {mode === 'Trees' && <>\n        <VStack\n          divider={<StackDivider borderColor='borderColor' />}\n          spacing={1}\n          align='stretch'\n          bg='gray.800'\n        >\n          {[<Wrap key={tree?.id || 0} spacing={1} justify='center'>\n            {trees?.map(t => <WrapItem key={t?.id}>\n              <Button size='sm' variant={tree?.id === t?.id ? 'solid' : \"outline\"} onClick={() => setTree(t)}>{deep.nameLocal(t?.tree_id)}</Button>\n            </WrapItem>)}\n          </Wrap>]}\n        </VStack>\n        {!tree && <>\n          <List\n            link={link}\n            current={current}\n            setMode={setMode}\n            setCurrent={setCurrent}\n            parentsQuery={{\n              id: 0\n            }}\n            childrenQuery={{ \n              id: 0\n            }}\n          />\n        </>}\n        {!!tree && !!current?.id && <>\n          {[<List\n            key={tree?.id}\n            link={link}\n            current={current}\n            setMode={setMode}\n            setCurrent={setCurrent}\n            parentsQuery={{\n              down: {\n                tree_id: tree?.tree_id,\n                position_id: tree?.position_id,\n                link_id: current?.id\n              },\n            }}\n            childrenQuery={{ _and: [\n              { up: {\n                tree_id: tree?.tree_id,\n                root_id: tree?.root_id,\n                parent_id: tree?.link_id,\n                depth: tree?.depth,\n              } },\n              { down: {\n                tree_id: tree?.tree_id,\n                root_id: tree?.root_id,\n                depth: tree?.depth + 1,\n              } },\n            ]}}\n          />]}\n        </>}\n      </>}\n      {children}\n    </div>\n    \n    return <>\n      {fillSize \n      ? body \n      : <Resize\n          onChangeSize={(viewSize) => setViewSize(viewSize)} \n          style={{\n          // position: 'relative',\n          // overflow: nested ? 'hidden' : 'inherit',\n          borderRadius: 5,\n          border: 'none',\n        }}\n      >{body}</Resize>}\n    </>;\n  };\n}\n",
        "link_id": 946
      }
    },
    {
      "id": 1057,
      "type_id": 3,
      "from_id": 1051,
      "to_id": 1050,
      "value": {
        "id": 427,
        "value": "AllowUnsafe",
        "link_id": 1057
      }
    },
    {
      "id": 1152,
      "type_id": 3,
      "from_id": 1146,
      "to_id": 1145,
      "value": {
        "id": 457,
        "value": "Dependency",
        "link_id": 1152
      }
    },
    {
      "id": 1185,
      "type_id": 1,
      "from_id": 8,
      "to_id": 1184
    },
    {
      "id": 85,
      "type_id": 1,
      "from_id": 2,
      "to_id": 97
    },
    {
      "id": 86,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 3,
        "value": "\nasync ({ deep, require, gql, data: { newLink } }) => {\n  const { data: [pq] } = await deep.select({ id: newLink.to_id });\n  const { data: { packager_install: imported }, error } = await deep.apolloClient.query({\n    query: gql`query PACKAGE_INSTALL($address: String!) {\n      packager_install(input: { address: $address }) {\n        ids\n        packageId\n        errors\n      }\n    }`,\n    variables: {\n      address: pq?.value?.value,\n    },\n  });\n  if (error) throw error;\n  if (imported?.errors?.length) throw imported.errors;\n  await deep.insert({\n    type_id: deep.idLocal('@deep-foundation/core', 'Contain'),\n    from_id: newLink.from_id,\n    to_id: imported.packageId,\n  });\n  return imported;\n}\n    ",
        "link_id": 86
      }
    },
    {
      "id": 89,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 4,
        "value": "\nasync ({ deep, require, gql, data: { newLink } }) => {\n  const { data: [pq] } = await deep.select({ id: newLink.to_id });\n  const { data: { packager_publish: exported }, error } = await deep.apolloClient.query({\n    query: gql`query PACKAGE_PUBLISH($address: String!, $id: Int) {\n      packager_publish(input: { address: $address, id: $id }) {\n        address\n        errors\n      }\n    }`,\n    variables: {\n      address: pq?.value?.value,\n      id: newLink.from_id,\n    },\n  });\n  if (error) throw error;\n  if (exported?.errors?.length) throw exported.errors;\n  return exported;\n}\n    ",
        "link_id": 89
      }
    },
    {
      "id": 90,
      "type_id": 35,
      "from_id": 83,
      "to_id": 89
    },
    {
      "id": 91,
      "type_id": 49,
      "from_id": 85,
      "to_id": 90
    },
    {
      "id": 92,
      "type_id": 1,
      "from_id": 8,
      "to_id": 8
    },
    {
      "id": 93,
      "type_id": 23,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 94,
      "type_id": 23,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 118,
      "type_id": 34,
      "from_id": 36,
      "to_id": 8
    },
    {
      "id": 131,
      "type_id": 37,
      "from_id": 129,
      "to_id": 20
    },
    {
      "id": 132,
      "type_id": 37,
      "from_id": 129,
      "to_id": 19
    },
    {
      "id": 227,
      "type_id": 3,
      "from_id": 184,
      "to_id": 43,
      "value": {
        "id": 49,
        "value": "PackageNamespace",
        "link_id": 227
      }
    },
    {
      "id": 278,
      "type_id": 3,
      "from_id": 184,
      "to_id": 94,
      "value": {
        "id": 100,
        "value": "AllowPackagePublish",
        "link_id": 278
      }
    },
    {
      "id": 279,
      "type_id": 3,
      "from_id": 184,
      "to_id": 95,
      "value": {
        "id": 101,
        "value": "PromiseOut",
        "link_id": 279
      }
    },
    {
      "id": 280,
      "type_id": 3,
      "from_id": 184,
      "to_id": 96,
      "value": {
        "id": 102,
        "value": "promiseOutValue",
        "link_id": 280
      }
    },
    {
      "id": 281,
      "type_id": 3,
      "from_id": 184,
      "to_id": 97,
      "value": {
        "id": 103,
        "value": "PackageQuery",
        "link_id": 281
      }
    },
    {
      "id": 282,
      "type_id": 3,
      "from_id": 184,
      "to_id": 98,
      "value": {
        "id": 104,
        "value": "packageQueryValue",
        "link_id": 282
      }
    },
    {
      "id": 283,
      "type_id": 3,
      "from_id": 184,
      "to_id": 99,
      "value": {
        "id": 105,
        "value": "Port",
        "link_id": 283
      }
    },
    {
      "id": 284,
      "type_id": 3,
      "from_id": 184,
      "to_id": 100,
      "value": {
        "id": 106,
        "value": "portValue",
        "link_id": 284
      }
    },
    {
      "id": 285,
      "type_id": 3,
      "from_id": 184,
      "to_id": 101,
      "value": {
        "id": 107,
        "value": "HandlePort",
        "link_id": 285
      }
    },
    {
      "id": 286,
      "type_id": 3,
      "from_id": 184,
      "to_id": 102,
      "value": {
        "id": 108,
        "value": "PackageInstalled",
        "link_id": 286
      }
    },
    {
      "id": 287,
      "type_id": 3,
      "from_id": 184,
      "to_id": 103,
      "value": {
        "id": 109,
        "value": "PackagePublished",
        "link_id": 287
      }
    },
    {
      "id": 332,
      "type_id": 3,
      "from_id": 184,
      "to_id": 148,
      "value": {
        "id": 154,
        "value": "containTreeSymbol",
        "link_id": 332
      }
    },
    {
      "id": 333,
      "type_id": 3,
      "from_id": 184,
      "to_id": 149,
      "value": {
        "id": 155,
        "value": "containTreeThen",
        "link_id": 333
      }
    },
    {
      "id": 334,
      "type_id": 3,
      "from_id": 184,
      "to_id": 150,
      "value": {
        "id": 156,
        "value": "containTreeResolved",
        "link_id": 334
      }
    },
    {
      "id": 335,
      "type_id": 3,
      "from_id": 184,
      "to_id": 151,
      "value": {
        "id": 157,
        "value": "containTreeRejected",
        "link_id": 335
      }
    },
    {
      "id": 336,
      "type_id": 3,
      "from_id": 184,
      "to_id": 152,
      "value": {
        "id": 158,
        "value": "handlersTree",
        "link_id": 336
      }
    },
    {
      "id": 337,
      "type_id": 3,
      "from_id": 184,
      "to_id": 153,
      "value": {
        "id": 159,
        "value": "handlersTreeHandler",
        "link_id": 337
      }
    },
    {
      "id": 338,
      "type_id": 3,
      "from_id": 184,
      "to_id": 154,
      "value": {
        "id": 160,
        "value": "handlersTreeSupports",
        "link_id": 338
      }
    },
    {
      "id": 356,
      "type_id": 3,
      "from_id": 184,
      "to_id": 172,
      "value": {
        "id": 178,
        "value": "dockerJSSupportsCompatableHandlePort",
        "link_id": 356
      }
    },
    {
      "id": 357,
      "type_id": 3,
      "from_id": 184,
      "to_id": 173,
      "value": {
        "id": 179,
        "value": "dockerJSSupportsCompatableHandleRoute",
        "link_id": 357
      }
    },
    {
      "id": 561,
      "type_id": 146,
      "from_id": 553,
      "to_id": 143,
      "value": {
        "id": 211,
        "value": "🏗",
        "link_id": 561
      }
    },
    {
      "id": 562,
      "type_id": 3,
      "from_id": 553,
      "to_id": 561,
      "value": {
        "id": 212,
        "value": "GeneratedFromSymbol",
        "link_id": 562
      }
    },
    {
      "id": 563,
      "type_id": 146,
      "from_id": 553,
      "to_id": 142,
      "value": {
        "id": 213,
        "value": "🔑",
        "link_id": 563
      }
    },
    {
      "id": 564,
      "type_id": 3,
      "from_id": 553,
      "to_id": 563,
      "value": {
        "id": 214,
        "value": "AuthorizationSymbol",
        "link_id": 564
      }
    },
    {
      "id": 571,
      "type_id": 146,
      "from_id": 553,
      "to_id": 99,
      "value": {
        "id": 221,
        "value": "🗜",
        "link_id": 571
      }
    },
    {
      "id": 588,
      "type_id": 3,
      "from_id": 553,
      "to_id": 587,
      "value": {
        "id": 238,
        "value": "ScheduleSymbol",
        "link_id": 588
      }
    },
    {
      "id": 589,
      "type_id": 146,
      "from_id": 553,
      "to_id": 73,
      "value": {
        "id": 239,
        "value": "🔎",
        "link_id": 589
      }
    },
    {
      "id": 590,
      "type_id": 3,
      "from_id": 553,
      "to_id": 589,
      "value": {
        "id": 240,
        "value": "SelectorFilterSymbol",
        "link_id": 590
      }
    },
    {
      "id": 591,
      "type_id": 146,
      "from_id": 553,
      "to_id": 70,
      "value": {
        "id": 241,
        "value": "🌲",
        "link_id": 591
      }
    },
    {
      "id": 596,
      "type_id": 3,
      "from_id": 553,
      "to_id": 595,
      "value": {
        "id": 246,
        "value": "SpaceSymbol",
        "link_id": 596
      }
    },
    {
      "id": 601,
      "type_id": 146,
      "from_id": 553,
      "to_id": 54,
      "value": {
        "id": 251,
        "value": "🧲",
        "link_id": 601
      }
    },
    {
      "id": 762,
      "type_id": 3,
      "from_id": 756,
      "to_id": 753,
      "value": {
        "id": 330,
        "value": "Installed",
        "link_id": 762
      }
    },
    {
      "id": 967,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 401,
        "value": "({ deep, require }) => {\n    const React = require('react');\n    const { Wrap, WrapItem, Stack, HStack, VStack, Flex, StackDivider, Box, Button, Text, Input } = require('@chakra-ui/react');\n    const { Resize } = require('@deep-foundation/deepcase');\n    const MonacoEditor = require('@monaco-editor/react');\n    const json5 = require('json5');\n    const { TbArrowMoveLeft, TbArrowMoveRight } = require('react-icons/tb');\n    const { useDebounceCallback } = require('@react-hook/debounce');\n    const { useColorModeValue, useColorMode } = require('@chakra-ui/react');\n    const getSymbol = (link) => link?.inByType?.[deep.idLocal('@deep-foundation/core', 'Symbol')]?.[0]?.value?.value;\n    const getTypes = (link) => {\n        const types = [];\n        for (let l = link; l?.type && l?.id !== 1; l = link?.type)\n            types.push(link?.type_id);\n        return types;\n    };\n    const Contain = deep.idLocal('@deep-foundation/core', 'Contain');\n    const ListItem = ({ link, current, setCurrent, setMode, ...props }) => {\n        const _symbol = getSymbol(link) || getSymbol(link?.type) || getSymbol(link?.type?.type);\n        const _value = deep.stringify(link?.value?.value);\n        const __value = _value?.length > 29 ? _value.slice(0, 20) + '...' + _value.slice(-9, _value.length) : _value;\n        const [fromL] = deep.useMinilinksSubscription({\n            out: { id: link.id, type_id: Contain }\n        });\n        const [parentL] = deep.useMinilinksSubscription(link.type_id === Contain ? {\n            out: { type_id: Contain, to_id: link.from_id },\n        } : {\n            out: { type_id: Contain, to_id: link.id },\n        });\n        const broadcrumbs = [];\n        if (fromL)\n            broadcrumbs.push(fromL.id);\n        let next = parentL;\n        do {\n            if (next) {\n                if (deep.nameLocal(next?.id))\n                    broadcrumbs.push(next?.id);\n                next = next?.inByType?.[Contain]?.[0]?.from;\n            }\n        } while (next);\n        return (React.createElement(Box, { background: 'backgroundModal', p: '0.2rem', ...props, xs: {\n                border: current?.id === link?.id ? '3px #ffffff solid' : '0px transparent solid',\n                transition: 'all 1s ease',\n                cursor: 'pointer',\n            }, _hover: { border: '3px #ffffff7d solid' } },\n            React.createElement(Box, { mr: '0.5rem' },\n                React.createElement(Text, null,\n                    _symbol,\n                    \" \",\n                    link?.id,\n                    \" \",\n                    deep.nameLocal(link?.id))),\n            React.createElement(Box, { mr: '0.5rem' },\n                React.createElement(Text, null, broadcrumbs.map(id => React.createElement(Button, { key: id, size: \"xs\", onClick: async () => {\n                        const { data: [next] } = await deep.select(id);\n                        setCurrent(next);\n                        setMode('Contains');\n                    } }, deep.nameLocal(id))))),\n            React.createElement(Box, { mr: '0.5rem' },\n                React.createElement(Text, null, __value)),\n            React.createElement(Flex, { divider: React.createElement(StackDivider, { borderColor: 'borderColor' }), spacing: 2, justifyContent: 'space-between', alignItems: 'center', sx: {\n                    '& > *:not(:last-of-type)': {\n                        mr: '0.5rem'\n                    }\n                } },\n                !!link?.from_id && React.createElement(Button, { size: 'sm', variant: \"outline\", width: 'max-content', rightIcon: React.createElement(TbArrowMoveLeft, { size: '1.3rem' }), onClick: async () => {\n                        const { data: [next] } = await deep.select(link?.from_id);\n                        setCurrent(next);\n                    } },\n                    React.createElement(Text, { fontSize: 'sm' }, link?.from_id || 0)),\n                !!link?.to_id && React.createElement(Button, { size: 'sm', fontSize: 'sm', variant: \"outline\", leftIcon: React.createElement(TbArrowMoveRight, { size: '1.3rem' }), onClick: async () => {\n                        const { data: [next] } = await deep.select(link?.to_id);\n                        setCurrent(next);\n                    } },\n                    React.createElement(Text, null, link?.to_id || 0)),\n                !!link?.type_id && React.createElement(Button, { size: 'sm', fontSize: 'sm', variant: \"outline\", onClick: async () => {\n                        const { data: [next] } = await deep.select(link?.type_id);\n                        setCurrent(next);\n                    } },\n                    React.createElement(Text, null,\n                        link?.type_id,\n                        \" \",\n                        deep.nameLocal(link?.type_id))))));\n    };\n    const List = ({ link, parentsQuery, childrenQuery, current, setCurrent, setMode }) => {\n        const { data: parents } = deep.useDeepSubscription(parentsQuery);\n        const { data: children } = deep.useDeepSubscription(childrenQuery);\n        const descriptionQuery = React.useMemo(() => {\n            return {\n                to: { down: {\n                        tree_id: deep.idLocal('@deep-foundation/core', 'typesTree'),\n                        link_id: { _in: [\n                                ...(current?.id ? [current.id] : []),\n                                ...parents?.map(l => l.id),\n                                ...children?.map(l => l.id),\n                                ...parents?.map(l => l.from_id),\n                                ...children?.map(l => l.from_id),\n                                ...parents?.map(l => l.to_id),\n                                ...children?.map(l => l.to_id),\n                            ] },\n                    } },\n                type_id: { _in: [deep.idLocal('@deep-foundation/core', 'Contain'), deep.idLocal('@deep-foundation/core', 'Symbol')] },\n            };\n        }, [current, parents, children]);\n        const description = deep.useDeepSubscription(descriptionQuery);\n        deep.useDeepSubscription({\n            down: {\n                tree_id: { _in: [\n                        deep.idLocal('@deep-foundation/core', 'typesTree'),\n                        deep.idLocal('@deep-foundation/core', 'containTree'),\n                    ] },\n                link_id: { _in: [\n                        ...(current?.id ? [current.id] : []),\n                        ...parents?.map(l => l.id),\n                        ...children?.map(l => l.id),\n                        ...parents?.map(l => l.from_id),\n                        ...children?.map(l => l.from_id),\n                        ...parents?.map(l => l.to_id),\n                        ...children?.map(l => l.to_id),\n                    ] },\n            },\n        });\n        return React.createElement(React.Fragment, null, !description.loading &&\n            React.createElement(VStack, { divider: React.createElement(StackDivider, { borderColor: 'borderColor' }), spacing: 1, align: 'stretch', fontSize: 'sm' },\n                parents?.map(c => (React.createElement(ListItem, { key: c?.id, current: current, setMode: setMode, setCurrent: setCurrent, link: c, onClick: () => setCurrent(c), bg: 'backgroundModal', p: '0.2rem' }))),\n                !!current && React.createElement(ListItem, { current: current, setMode: setMode, setCurrent: setCurrent, link: current, p: '0.2rem' }),\n                children?.map(c => (React.createElement(ListItem, { key: c?.id, current: current, setMode: setMode, setCurrent: setCurrent, link: c, onClick: () => setCurrent(c) })))));\n    };\n    return ({ style, link, onChange, search, query, fillSize, children = null, }) => {\n        const [currentId, setCurrentId] = React.useState(link?.id || 0);\n        const setCurrent = React.useCallback((link) => setCurrentId(link?.id || 0));\n        const { data: [current] = [] } = deep.useDeepSubscription({ id: currentId });\n        const [mode, setMode] = React.useState(typeof (search) === 'string' ? 'Search' : typeof (query) === 'object' ? 'Query' : 'Contains');\n        const [viewSize, setViewSize] = React.useState({ height: 400, width: 450 });\n        React.useEffect(() => onChange && onChange(current), [current]);\n        const [trees, setTrees] = React.useState([]);\n        React.useEffect(() => {\n            mode === 'Trees' && (async () => {\n                setTrees((await deep.select({\n                    link_id: { _eq: current?.id },\n                    parent_id: { _eq: current?.id },\n                    distinct_on: ['tree_id'],\n                }, {\n                    table: 'tree',\n                    returning: `\n          id link_id tree_id root_id depth position_id\n        `,\n                }))?.data);\n            })();\n        }, [mode, current]);\n        const [tree, setTree] = React.useState();\n        React.useEffect(() => setTree(), [mode, current]);\n        const [q, setQ] = React.useState(query);\n        const setQoDebounce = useDebounceCallback((q) => {\n            try {\n                setQo(json5.parse(q));\n            }\n            catch (error) { }\n        }, 1000);\n        const [qo, setQo] = React.useState(q);\n        const [s, setS] = React.useState(search || '');\n        const setSoDebounce = useDebounceCallback((s) => {\n            const num = parseFloat(s);\n            const _or = [];\n            if (!Number.isNaN(num)) {\n                _or.push({ id: num }, { number: { value: num } });\n            }\n            _or.push({ string: { value: s } }, { string: { value: { _ilike: `%${s}%` } } }, { string: { value: { _similar: s } } }, { in: { type_id: deep.idLocal('@deep-foundation/core', 'Contain'), string: { value: s } } }, { in: { type_id: deep.idLocal('@deep-foundation/core', 'Contain'), string: { value: { _ilike: `%${s}%` } } } }, { in: { type_id: deep.idLocal('@deep-foundation/core', 'Contain'), string: { value: { _similar: s } } } });\n            const query = JSON.stringify({\n                _not: { type_id: deep.idLocal('@deep-foundation/core', 'Contain') },\n                _or,\n            });\n            setQ(query);\n            try {\n                setQo(json5.parse(query));\n            }\n            catch (error) { }\n        }, 1000);\n        const { colorMode } = useColorMode();\n        const bg = useColorModeValue('#eeeeee', '#434343');\n        const hover = useColorModeValue('white', '#1e1e1e');\n        const borderColor = useColorModeValue('#434343', '#eeeeee');\n        const color = useColorModeValue('#1e1e1e', 'white');\n        const body = React.createElement(Box, { sx: {\n                height: fillSize ? '100%' : viewSize.height,\n                width: fillSize ? '100%' : viewSize.width,\n                overflowY: 'auto',\n                position: 'relative',\n                borderColor: 'borderColor',\n                borderWidth: 'thin',\n                borderRadius: '0.5rem',\n                p: '0.2rem',\n                ...style\n            } },\n            React.createElement(HStack, { align: 'stretch', justifyContent: 'space-between', sx: { position: 'sticky', top: 0, mb: '0.3rem' }, bg: 'transparent' },\n                React.createElement(Button, { variant: 'solid', size: 'sm', background: !(mode === 'Search') ? 'backgroundModal' : 'gray.400', borderColor: !(mode === 'Search') ? 'borderColor' : 'backgroundModal', borderWidth: 'thin', onClick: () => setMode('Search') }, \"\\uD83E\\uDEAC\"),\n                React.createElement(Button, { variant: 'solid', size: 'sm', background: !(mode === 'Query') ? 'backgroundModal' : 'gray.400', borderColor: !(mode === 'Query') ? 'borderColor' : 'backgroundModal', borderWidth: 'thin', onClick: () => setMode('Query') }, \"\\uD83D\\uDD0D\"),\n                React.createElement(Button, { variant: 'solid', size: 'sm', background: !(mode === 'Contains') ? 'backgroundModal' : 'gray.400', borderColor: !(mode === 'Contains') ? 'borderColor' : 'backgroundModal', borderWidth: 'thin', onClick: () => setMode('Contains') }, \"\\uD83D\\uDDC2\"),\n                React.createElement(Button, { variant: 'solid', size: 'sm', background: !(mode === 'In/Out') ? 'backgroundModal' : 'gray.400', borderColor: !(mode === 'In/Out') ? 'borderColor' : 'backgroundModal', borderWidth: 'thin', onClick: () => setMode('In/Out') }, \"In/Out\"),\n                React.createElement(Button, { variant: 'solid', size: 'sm', background: !(mode === 'Trees') ? 'backgroundModal' : 'gray.400', borderColor: !(mode === 'Trees') ? 'borderColor' : 'backgroundModal', borderWidth: 'thin', onClick: () => setMode('Trees') }, \"\\uD83C\\uDF32\")),\n            mode === 'Search' && React.createElement(React.Fragment, null,\n                current && React.createElement(List, { link: link, current: current, setMode: setMode, setCurrent: setCurrent, parentsQuery: { id: 0 }, childrenQuery: { id: 0 } }),\n                React.createElement(Input, { autoFocus: true, type: \"text\", variant: 'filled', variant: 'filled', bg: bg, color: color, borderWidth: 'thin', borderColor: borderColor, _hover: { bg: hover }, _focus: { bg: bg }, sx: {\n                        width: '100%',\n                    }, onChange: (e) => {\n                        setS(e.target.value);\n                        setSoDebounce(e.target.value);\n                    }, value: s }),\n                React.createElement(List, { link: link, current: null, setMode: setMode, setCurrent: setCurrent, parentsQuery: { id: 0 }, childrenQuery: {\n                        ...qo,\n                        limit: 30,\n                    } })),\n            mode === 'Query' && React.createElement(React.Fragment, null,\n                current && React.createElement(List, { link: link, current: current, setMode: setMode, setCurrent: setCurrent, parentsQuery: { id: 0 }, childrenQuery: { id: 0 } }),\n                React.createElement(MonacoEditor, { options: {\n                        minimap: {\n                            enabled: false\n                        },\n                        lineNumbers: 'off',\n                        wordWrap: true,\n                    }, height: \"200px\", width: \"100%\", theme: colorMode === 'light' ? 'light' : \"vs-dark\", defaultLanguage: \"json\", defaultValue: q || '', onChange: (value) => {\n                        setQ(value);\n                        setQoDebounce(value);\n                    } }),\n                React.createElement(List, { link: link, current: null, setMode: setMode, setCurrent: setCurrent, parentsQuery: { id: 0 }, childrenQuery: {\n                        ...qo,\n                        limit: 30,\n                    } })),\n            mode === 'Contains' && current && React.createElement(List, { link: link, current: current, setMode: setMode, setCurrent: setCurrent, parentsQuery: {\n                    out: {\n                        type_id: deep.idLocal('@deep-foundation/core', 'Contain'),\n                        to_id: current?.id,\n                    }\n                }, childrenQuery: {\n                    in: {\n                        type_id: deep.idLocal('@deep-foundation/core', 'Contain'),\n                        from_id: current?.id,\n                    }\n                } }),\n            mode === 'In/Out' && current && React.createElement(React.Fragment, null,\n                React.createElement(List, { link: link, current: current, setMode: setMode, setCurrent: setCurrent, parentsQuery: {\n                        to_id: current?.id\n                    }, childrenQuery: {\n                        from_id: current?.id\n                    } })),\n            mode === 'Trees' && React.createElement(React.Fragment, null,\n                React.createElement(VStack, { divider: React.createElement(StackDivider, { borderColor: 'borderColor' }), spacing: 1, align: 'stretch', bg: 'gray.800' }, [React.createElement(Wrap, { key: tree?.id || 0, spacing: 1, justify: 'center' }, trees?.map(t => React.createElement(WrapItem, { key: t?.id },\n                        React.createElement(Button, { size: 'sm', variant: tree?.id === t?.id ? 'solid' : \"outline\", onClick: () => setTree(t) }, deep.nameLocal(t?.tree_id)))))]),\n                !tree && React.createElement(React.Fragment, null,\n                    React.createElement(List, { link: link, current: current, setMode: setMode, setCurrent: setCurrent, parentsQuery: {\n                            id: 0\n                        }, childrenQuery: {\n                            id: 0\n                        } })),\n                !!tree && !!current?.id && React.createElement(React.Fragment, null, [React.createElement(List, { key: tree?.id, link: link, current: current, setMode: setMode, setCurrent: setCurrent, parentsQuery: {\n                            down: {\n                                tree_id: tree?.tree_id,\n                                position_id: tree?.position_id,\n                                link_id: current?.id\n                            },\n                        }, childrenQuery: { _and: [\n                                { up: {\n                                        tree_id: tree?.tree_id,\n                                        root_id: tree?.root_id,\n                                        parent_id: tree?.link_id,\n                                        depth: tree?.depth,\n                                    } },\n                                { down: {\n                                        tree_id: tree?.tree_id,\n                                        root_id: tree?.root_id,\n                                        depth: tree?.depth + 1,\n                                    } },\n                            ] } })])),\n            children);\n        return React.createElement(React.Fragment, null, fillSize\n            ? body\n            : React.createElement(Resize, { onChangeSize: (viewSize) => setViewSize(viewSize), style: {\n                    borderRadius: 5,\n                    border: 'none',\n                } }, body));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxDQUFDLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxFQUFFLEVBQUU7SUFDcEIsTUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQy9CLE1BQU0sRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxZQUFZLEVBQUUsR0FBRyxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLEdBQUcsT0FBTyxDQUFDLGtCQUFrQixDQUFDLENBQUM7SUFDNUgsTUFBTSxFQUFFLE1BQU0sRUFBRSxHQUFHLE9BQU8sQ0FBQywyQkFBMkIsQ0FBQyxDQUFDO0lBQ3hELE1BQU0sWUFBWSxHQUFHLE9BQU8sQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO0lBQ3JELE1BQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUMvQixNQUFNLEVBQUMsZUFBZSxFQUFFLGdCQUFnQixFQUFFLEdBQUUsT0FBTyxDQUFDLGdCQUFnQixDQUFDLENBQUM7SUFDdEUsTUFBTSxFQUFFLG1CQUFtQixFQUFFLEdBQUcsT0FBTyxDQUFDLHNCQUFzQixDQUFDLENBQUM7SUFDaEUsTUFBTSxFQUFFLGlCQUFpQixFQUFFLFlBQVksRUFBRSxHQUFHLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBRXhFLE1BQU0sU0FBUyxHQUFHLENBQUMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxJQUFJLEVBQUUsUUFBUSxFQUFFLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyx1QkFBdUIsRUFBRSxRQUFRLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLEtBQUssQ0FBQTtJQUVoSCxNQUFNLFFBQVEsR0FBRyxDQUFDLElBQUksRUFBRSxFQUFF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RUFBRSxPQUFPO3dDQUN0QixLQUFLLEVBQUUsSUFBSSxFQUFFLEtBQUssR0FBRyxDQUFDO3FDQUN2QixFQUFFOzZCQUNKLEVBQUMsR0FDRixDQUFDLENBQ0YsQ0FDRjtZQUNGLFFBQVEsQ0FDTCxDQUFBO1FBRU4sT0FBTywwQ0FDSixRQUFRO1lBQ1QsQ0FBQyxDQUFDLElBQUk7WUFDTixDQUFDLENBQUMsb0JBQUMsTUFBTSxJQUNMLFlBQVksRUFBRSxDQUFDLFFBQVEsRUFBRSxFQUFFLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxFQUNqRCxLQUFLLEVBQUU7b0JBR1AsWUFBWSxFQUFFLENBQUM7b0JBQ2YsTUFBTSxFQUFFLE1BQU07aUJBQ2YsSUFDRCxJQUFJLENBQVUsQ0FDZixDQUFDO0lBQ04sQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiKHsgZGVlcCwgcmVxdWlyZSB9KSA9PiB7XG4gIGNvbnN0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbiAgY29uc3QgeyBXcmFwLCBXcmFwSXRlbSwgU3RhY2ssIEhTdGFjaywgVlN0YWNrLCBGbGV4LCBTdGFja0RpdmlkZXIsIEJveCwgQnV0dG9uLCBUZXh0LCBJbnB1dCB9ID0gcmVxdWlyZSgnQGNoYWtyYS11aS9yZWFjdCcpO1xuICBjb25zdCB7IFJlc2l6ZSB9ID0gcmVxdWlyZSgnQGRlZXAtZm91bmRhdGlvbi9kZWVwY2FzZScpO1xuICBjb25zdCBNb25hY29FZGl0b3IgPSByZXF1aXJlKCdAbW9uYWNvLWVkaXRvci9yZWFjdCcpO1xuICBjb25zdCBqc29uNSA9IHJlcXVpcmUoJ2pzb241Jyk7XG4gIGNvbnN0IHtUYkFycm93TW92ZUxlZnQsIFRiQXJyb3dNb3ZlUmlnaHQgfSA9cmVxdWlyZSgncmVhY3QtaWNvbnMvdGInKTtcbiAgY29uc3QgeyB1c2VEZWJvdW5jZUNhbGxiYWNrIH0gPSByZXF1aXJlKCdAcmVhY3QtaG9vay9kZWJvdW5jZScpO1xuICBjb25zdCB7IHVzZUNvbG9yTW9kZVZhbHVlLCB1c2VDb2xvck1vZGUgfSA9IHJlcXVpcmUoJ0BjaGFrcmEtdWkvcmVhY3QnKTtcblxuICBjb25zdCBnZXRTeW1ib2wgPSAobGluaykgPT4gbGluaz8uaW5CeVR5cGU/LltkZWVwLmlkTG9jYWwoJ0BkZWVwLWZvdW5kYXRpb24vY29yZScsICdTeW1ib2wnKV0/LlswXT8udmFsdWU/LnZhbHVlXG5cbiAgY29uc3QgZ2V0VHlwZXMgPSAobGluaykgPT4ge1xuICAgIGNvbnN0IHR5cGVzID0gW107XG4gICAgZm9yIChsZXQgbCA9IGxpbms7IGw/LnR5cGUgJiYgbD8uaWQgIT09IDE7IGwgPSBsaW5rPy50eXBlKSB0eXBlcy5wdXNoKGxpbms/LnR5cGVfaWQpO1xuICAgIHJldHVybiB0eXBlcztcbiAgfTtcblxuICBjb25zdCBDb250YWluID0gZGVlcC5pZExvY2FsKCdAZGVlcC1mb3VuZGF0aW9uL2NvcmUnLCAnQ29udGFpbicpO1xuXG4gIGNvbnN0IExpc3RJdGVtID0gKHsgbGluaywgY3VycmVudCwgc2V0Q3VycmVudCwgIHNldE1vZGUsIC4uLnByb3BzIH0pID0+IHtcbiAgICAvLyBjb25zdCBbX19zeW1ib2xdID0gZGVlcC51c2VNaW5pbGlua3NTdWJzY3JpcHRpb24oe1xuICAgIC8vICAgdHlwZV9pZDogZGVlcC5pZExvY2FsKCdAZGVlcC1mb3VuZGF0aW9uL2NvcmUnLCAnU3ltYm9sJyksXG4gICAgLy8gICB0b19pZDogeyBfaW46IGdldFR5cGVzKGxpbmspIH0sYGBgXG4gICAgLy8gfSk7XG4gICAgLy8gY29uc3QgX3N5bWJvbCA9IF9fc3ltYm9sPy52YWx1ZT8udmFsdWU7XG4gICAgY29uc3QgX3N5bWJvbCA9IGdldFN5bWJvbChsaW5rKSB8fCBnZXRTeW1ib2wobGluaz8udHlwZSkgfHwgZ2V0U3ltYm9sKGxpbms/LnR5cGU/LnR5cGUpO1xuICAgIGNvbnN0IF92YWx1ZSA9IGRlZXAuc3RyaW5naWZ5KGxpbms/LnZhbHVlPy52YWx1ZSk7XG4gICAgY29uc3QgX192YWx1ZSA9IF92YWx1ZT8ubGVuZ3RoID4gMjkgPyBfdmFsdWUuc2xpY2UoMCwgMjApKycuLi4nK192YWx1ZS5zbGljZSgtOSwgX3ZhbHVlLmxlbmd0aCkgOiBfdmFsdWU7XG5cbiAgICBjb25zdCBbZnJvbUxdID0gZGVlcC51c2VNaW5pbGlua3NTdWJzY3JpcHRpb24oe1xuICAgICAgb3V0OiB7IGlkOiBsaW5rLmlkLCB0eXBlX2lkOiBDb250YWluIH1cbiAgICB9KTtcbiAgICBjb25zdCBbcGFyZW50TF0gPSBkZWVwLnVzZU1pbmlsaW5rc1N1YnNjcmlwdGlvbihsaW5rLnR5cGVfaWQgPT09IENvbnRhaW4gPyB7XG4gICAgICBvdXQ6IHsgdHlwZV9pZDogQ29udGFpbiwgdG9faWQ6IGxpbmsuZnJvbV9pZCB9LFxuICAgIH0gOiB7XG4gICAgICBvdXQ6IHsgdHlwZV9pZDogQ29udGFpbiwgdG9faWQ6IGxpbmsuaWQgfSxcbiAgICB9KTtcbiAgICBjb25zdCBicm9hZGNydW1icyA9IFtdO1xuICAgIGlmIChmcm9tTCkgYnJvYWRjcnVtYnMucHVzaChmcm9tTC5pZCk7XG4gICAgbGV0IG5leHQgPSBwYXJlbnRMO1xuICAgIGRvIHtcbiAgICAgIGlmIChuZXh0KSB7XG4gICAgICAgIGlmIChkZWVwLm5hbWVMb2NhbChuZXh0Py5pZCkpIGJyb2FkY3J1bWJzLnB1c2gobmV4dD8uaWQpO1xuICAgICAgICBuZXh0ID0gbmV4dD8uaW5CeVR5cGU/LltDb250YWluXT8uWzBdPy5mcm9tO1xuICAgICAgfVxuICAgIH0gd2hpbGUgKG5leHQpO1xuICAgIC8vIGlmIChwYXJlbnRMKSBicm9hZGNydW1icy5wdXNoKHBhcmVudEwuaWQpO1xuXG4gICAgcmV0dXJuICg8Qm94XG4gICAgICBiYWNrZ3JvdW5kPSdiYWNrZ3JvdW5kTW9kYWwnIHA9JzAuMnJlbScgey4uLnByb3BzfVxuICAgICAgeHM9e3tcbiAgICAgICAgYm9yZGVyOiBjdXJyZW50Py5pZCA9PT0gbGluaz8uaWQgPyAnM3B4ICNmZmZmZmYgc29saWQnIDogJzBweCB0cmFuc3BhcmVudCBzb2xpZCcsXG4gICAgICAgIHRyYW5zaXRpb246ICdhbGwgMXMgZWFzZScsXG4gICAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxuICAgICAgfX1cbiAgICAgIF9ob3Zlcj17eyBib3JkZXI6ICczcHggI2ZmZmZmZjdkIHNvbGlkJyB9fVxuICAgID5cbiAgICAgIDxCb3ggbXI9JzAuNXJlbSc+PFRleHQ+e19zeW1ib2x9IHtsaW5rPy5pZH0ge2RlZXAubmFtZUxvY2FsKGxpbms/LmlkKX08L1RleHQ+PC9Cb3g+XG4gICAgICA8Qm94IG1yPScwLjVyZW0nPjxUZXh0PlxuICAgICAgICB7YnJvYWRjcnVtYnMubWFwKGlkID0+IDxCdXR0b25cbiAgICAgICAgICBrZXk9e2lkfVxuICAgICAgICAgIHNpemU9XCJ4c1wiXG4gICAgICAgICAgb25DbGljaz17YXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgeyBkYXRhOiBbbmV4dF0gfSA9IGF3YWl0IGRlZXAuc2VsZWN0KGlkKTtcbiAgICAgICAgICAgIHNldEN1cnJlbnQobmV4dCk7XG4gICAgICAgICAgICBzZXRNb2RlKCdDb250YWlucycpO1xuICAgICAgICAgIH19XG4gICAgICAgID57ZGVlcC5uYW1lTG9jYWwoaWQpfTwvQnV0dG9uPil9XG4gICAgICA8L1RleHQ+PC9Cb3g+XG4gICAgICA8Qm94IG1yPScwLjVyZW0nPjxUZXh0PntfX3ZhbHVlfTwvVGV4dD48L0JveD5cbiAgICAgIDxGbGV4IFxuICAgICAgICBkaXZpZGVyPXs8U3RhY2tEaXZpZGVyIGJvcmRlckNvbG9yPSdib3JkZXJDb2xvcicgLz59XG4gICAgICAgIHNwYWNpbmc9ezJ9XG4gICAgICAgIGp1c3RpZnlDb250ZW50PSdzcGFjZS1iZXR3ZWVuJ1xuICAgICAgICBhbGlnbkl0ZW1zPSdjZW50ZXInXG4gICAgICAgIHN4PXt7XG4gICAgICAgICAgJyYgPiAqOm5vdCg6bGFzdC1vZi10eXBlKSc6IHtcbiAgICAgICAgICAgIG1yOiAnMC41cmVtJ1xuICAgICAgICAgIH1cbiAgICAgICAgfX1cbiAgICAgID5cbiAgICAgICAgeyEhbGluaz8uZnJvbV9pZCAmJiA8QnV0dG9uIFxuICAgICAgICAgIHNpemU9J3NtJ1xuICAgICAgICAgIHZhcmlhbnQ9XCJvdXRsaW5lXCIgXG4gICAgICAgICAgd2lkdGg9J21heC1jb250ZW50J1xuICAgICAgICAgIHJpZ2h0SWNvbj17PFRiQXJyb3dNb3ZlTGVmdCBzaXplPScxLjNyZW0nIC8+fVxuICAgICAgICAgIG9uQ2xpY2s9e2FzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgZGF0YTogW25leHRdIH0gPSBhd2FpdCBkZWVwLnNlbGVjdChsaW5rPy5mcm9tX2lkKTtcbiAgICAgICAgICAgIHNldEN1cnJlbnQobmV4dCk7XG4gICAgICAgICAgfX1cbiAgICAgICAgPjxUZXh0IGZvbnRTaXplPSdzbSc+e2xpbms/LmZyb21faWQgfHwgMH08L1RleHQ+PC9CdXR0b24+fVxuICAgICAgICB7ISFsaW5rPy50b19pZCAmJiA8QnV0dG9uIFxuICAgICAgICAgIHNpemU9J3NtJ1xuICAgICAgICAgIGZvbnRTaXplPSdzbSdcbiAgICAgICAgICB2YXJpYW50PVwib3V0bGluZVwiXG4gICAgICAgICAgbGVmdEljb249ezxUYkFycm93TW92ZVJpZ2h0IHNpemU9JzEuM3JlbScgLz59IFxuICAgICAgICAgICAgb25DbGljaz17YXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgeyBkYXRhOiBbbmV4dF0gfSA9IGF3YWl0IGRlZXAuc2VsZWN0KGxpbms/LnRvX2lkKTtcbiAgICAgICAgICAgIHNldEN1cnJlbnQobmV4dCk7XG4gICAgICAgICAgfX1cbiAgICAgICAgPjxUZXh0PntsaW5rPy50b19pZCB8fCAwfTwvVGV4dD48L0J1dHRvbj59XG4gICAgICAgIHshIWxpbms/LnR5cGVfaWQgJiYgPEJ1dHRvblxuICAgICAgICAgIHNpemU9J3NtJyBcbiAgICAgICAgICBmb250U2l6ZT0nc20nXG4gICAgICAgICAgdmFyaWFudD1cIm91dGxpbmVcIiBcbiAgICAgICAgICAgIG9uQ2xpY2s9e2FzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgZGF0YTogW25leHRdIH0gPSBhd2FpdCBkZWVwLnNlbGVjdChsaW5rPy50eXBlX2lkKTtcbiAgICAgICAgICAgIHNldEN1cnJlbnQobmV4dCk7XG4gICAgICAgICAgfX1cbiAgICAgICAgPjxUZXh0PntsaW5rPy50eXBlX2lkfSB7ZGVlcC5uYW1lTG9jYWwobGluaz8udHlwZV9pZCl9PC9UZXh0PjwvQnV0dG9uPn1cbiAgICAgIDwvRmxleD5cbiAgICA8L0JveD4pO1xuICB9O1xuXG4gIGNvbnN0IExpc3QgPSAoe1xuICAgIGxpbmssIHBhcmVudHNRdWVyeSwgY2hpbGRyZW5RdWVyeSwgY3VycmVudCwgc2V0Q3VycmVudCwgc2V0TW9kZVxuICB9KSA9PiB7XG4gICAgY29uc3QgeyBkYXRhOiBwYXJlbnRzIH0gPSBkZWVwLnVzZURlZXBTdWJzY3JpcHRpb24ocGFyZW50c1F1ZXJ5KTtcblxuICAgIGNvbnN0IHsgZGF0YTogY2hpbGRyZW4gfSA9IGRlZXAudXNlRGVlcFN1YnNjcmlwdGlvbihjaGlsZHJlblF1ZXJ5KTtcblxuICAgIGNvbnN0IGRlc2NyaXB0aW9uUXVlcnkgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRvOiB7IGRvd246IHtcbiAgICAgICAgICB0cmVlX2lkOiBkZWVwLmlkTG9jYWwoJ0BkZWVwLWZvdW5kYXRpb24vY29yZScsICd0eXBlc1RyZWUnKSxcbiAgICAgICAgICBsaW5rX2lkOiB7IF9pbjogW1xuICAgICAgICAgICAgLi4uKGN1cnJlbnQ/LmlkID8gW2N1cnJlbnQuaWRdIDogW10pLFxuICAgICAgICAgICAgLi4ucGFyZW50cz8ubWFwKGwgPT4gbC5pZCksXG4gICAgICAgICAgICAuLi5jaGlsZHJlbj8ubWFwKGwgPT4gbC5pZCksXG4gICAgICAgICAgICAuLi5wYXJlbnRzPy5tYXAobCA9PiBsLmZyb21faWQpLFxuICAgICAgICAgICAgLi4uY2hpbGRyZW4/Lm1hcChsID0+IGwuZnJvbV9pZCksXG4gICAgICAgICAgICAuLi5wYXJlbnRzPy5tYXAobCA9PiBsLnRvX2lkKSxcbiAgICAgICAgICAgIC4uLmNoaWxkcmVuPy5tYXAobCA9PiBsLnRvX2lkKSxcbiAgICAgICAgICBdIH0sXG4gICAgICAgICB9IH0sXG4gICAgICAgIHR5cGVfaWQ6IHsgX2luOiBbZGVlcC5pZExvY2FsKCdAZGVlcC1mb3VuZGF0aW9uL2NvcmUnLCAnQ29udGFpbicpLCBkZWVwLmlkTG9jYWwoJ0BkZWVwLWZvdW5kYXRpb24vY29yZScsICdTeW1ib2wnKV0gfSxcbiAgICAgIH07XG4gICAgfSwgW2N1cnJlbnQsIHBhcmVudHMsIGNoaWxkcmVuXSk7XG4gICAgY29uc3QgZGVzY3JpcHRpb24gPSBkZWVwLnVzZURlZXBTdWJzY3JpcHRpb24oZGVzY3JpcHRpb25RdWVyeSk7XG5cbiAgICBkZWVwLnVzZURlZXBTdWJzY3JpcHRpb24oe1xuICAgICAgZG93bjoge1xuICAgICAgICB0cmVlX2lkOiB7IF9pbjogW1xuICAgICAgICAgIGRlZXAuaWRMb2NhbCgnQGRlZXAtZm91bmRhdGlvbi9jb3JlJywgJ3R5cGVzVHJlZScpLFxuICAgICAgICAgIGRlZXAuaWRMb2NhbCgnQGRlZXAtZm91bmRhdGlvbi9jb3JlJywgJ2NvbnRhaW5UcmVlJyksXG4gICAgICAgIF0gfSxcbiAgICAgICAgbGlua19pZDogeyBfaW46IFtcbiAgICAgICAgICAuLi4oY3VycmVudD8uaWQgPyBbY3VycmVudC5pZF0gOiBbXSksXG4gICAgICAgICAgLi4ucGFyZW50cz8ubWFwKGwgPT4gbC5pZCksXG4gICAgICAgICAgLi4uY2hpbGRyZW4/Lm1hcChsID0+IGwuaWQpLFxuICAgICAgICAgIC4uLnBhcmVudHM/Lm1hcChsID0+IGwuZnJvbV9pZCksXG4gICAgICAgICAgLi4uY2hpbGRyZW4/Lm1hcChsID0+IGwuZnJvbV9pZCksXG4gICAgICAgICAgLi4ucGFyZW50cz8ubWFwKGwgPT4gbC50b19pZCksXG4gICAgICAgICAgLi4uY2hpbGRyZW4/Lm1hcChsID0+IGwudG9faWQpLFxuICAgICAgICBdIH0sXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIDw+eyFkZXNjcmlwdGlvbi5sb2FkaW5nICYmXG4gICAgICA8VlN0YWNrXG4gICAgICAgIGRpdmlkZXI9ezxTdGFja0RpdmlkZXIgYm9yZGVyQ29sb3I9J2JvcmRlckNvbG9yJyAvPn1cbiAgICAgICAgc3BhY2luZz17MX1cbiAgICAgICAgYWxpZ249J3N0cmV0Y2gnXG4gICAgICAgIGZvbnRTaXplPSdzbSdcbiAgICAgID5cbiAgICAgICAge3BhcmVudHM/Lm1hcChjID0+IChcbiAgICAgICAgICA8TGlzdEl0ZW0ga2V5PXtjPy5pZH0gY3VycmVudD17Y3VycmVudH0gc2V0TW9kZT17c2V0TW9kZX0gc2V0Q3VycmVudD17c2V0Q3VycmVudH0gbGluaz17Y30gb25DbGljaz17KCkgPT4gc2V0Q3VycmVudChjKX0gYmc9J2JhY2tncm91bmRNb2RhbCcgcD0nMC4ycmVtJyAvPlxuICAgICAgICApKX1cbiAgICAgICAgeyEhY3VycmVudCAmJiA8TGlzdEl0ZW0gY3VycmVudD17Y3VycmVudH0gc2V0TW9kZT17c2V0TW9kZX0gIHNldEN1cnJlbnQ9e3NldEN1cnJlbnR9IGxpbms9e2N1cnJlbnR9ICBwPScwLjJyZW0nIC8+fVxuICAgICAgICB7Y2hpbGRyZW4/Lm1hcChjID0+IChcbiAgICAgICAgICA8TGlzdEl0ZW0ga2V5PXtjPy5pZH0gY3VycmVudD17Y3VycmVudH0gc2V0TW9kZT17c2V0TW9kZX0gIHNldEN1cnJlbnQ9e3NldEN1cnJlbnR9IGxpbms9e2N9IG9uQ2xpY2s9eygpID0+IHNldEN1cnJlbnQoYyl9Lz5cbiAgICAgICAgKSl9XG4gICAgICA8L1ZTdGFjaz5cbiAgICB9PC8+O1xuICB9O1xuXG4gIHJldHVybiAoe1xuICAgIHN0eWxlLFxuICAgIGxpbmssXG4gICAgb25DaGFuZ2UsXG4gICAgc2VhcmNoLFxuICAgIHF1ZXJ5LFxuICAgIGZpbGxTaXplLFxuICAgIGNoaWxkcmVuID0gbnVsbCxcbiAgfToge1xuICAgIHN0eWxlOiBhbnk7XG4gICAgbGluazogYW55O1xuICAgIG9uQ2hhbmdlPzogYW55O1xuICAgIHNlYXJjaD86IGFueTtcbiAgICBxdWVyeT86IGFueTtcbiAgICBmaWxsU2l6ZT86IGJvb2xlYW47XG4gICAgY2hpbGRyZW4/OiBhbnk7XG4gIH0pID0+IHtcbiAgICBjb25zdCBbY3VycmVudElkLCBzZXRDdXJyZW50SWRdID0gUmVhY3QudXNlU3RhdGU8bnVtYmVyPihsaW5rPy5pZCB8fCAwKVxuICAgIGNvbnN0IHNldEN1cnJlbnQgPSBSZWFjdC51c2VDYWxsYmFjaygobGluaykgPT4gc2V0Q3VycmVudElkKGxpbms/LmlkIHx8IDApKTtcbiAgICBjb25zdCB7IGRhdGE6IFtjdXJyZW50XSA9IFtdIH0gPSBkZWVwLnVzZURlZXBTdWJzY3JpcHRpb24oeyBpZDogY3VycmVudElkIH0pO1xuICAgIGNvbnN0IFttb2RlLCBzZXRNb2RlXSA9IFJlYWN0LnVzZVN0YXRlKHR5cGVvZihzZWFyY2gpID09PSAnc3RyaW5nJyA/ICdTZWFyY2gnIDogdHlwZW9mKHF1ZXJ5KSA9PT0gJ29iamVjdCcgPyAnUXVlcnknIDogJ0NvbnRhaW5zJyk7XG4gICAgY29uc3QgWyB2aWV3U2l6ZSwgc2V0Vmlld1NpemUgXSA9IFJlYWN0LnVzZVN0YXRlKHsgaGVpZ2h0OiA0MDAsIHdpZHRoOiA0NTAgfSk7XG5cbiAgICBSZWFjdC51c2VFZmZlY3QoKCkgPT4gb25DaGFuZ2UgJiYgb25DaGFuZ2UoY3VycmVudCksIFtjdXJyZW50XSk7XG5cbiAgICBjb25zdCBbdHJlZXMsIHNldFRyZWVzXSA9IFJlYWN0LnVzZVN0YXRlKFtdKTtcbiAgICBSZWFjdC51c2VFZmZlY3QoKCkgPT4geyBtb2RlID09PSAnVHJlZXMnICYmIChhc3luYyAoKSA9PiB7XG4gICAgICBzZXRUcmVlcygoYXdhaXQgZGVlcC5zZWxlY3Qoe1xuICAgICAgICBsaW5rX2lkOiB7IF9lcTogY3VycmVudD8uaWQgfSxcbiAgICAgICAgcGFyZW50X2lkOiB7IF9lcTogY3VycmVudD8uaWQgfVxuICAgICAgICBkaXN0aW5jdF9vbjogWyd0cmVlX2lkJ10sXG4gICAgICB9LCB7XG4gICAgICAgIHRhYmxlOiAndHJlZScsXG4gICAgICAgIHJldHVybmluZzogYFxuICAgICAgICAgIGlkIGxpbmtfaWQgdHJlZV9pZCByb290X2lkIGRlcHRoIHBvc2l0aW9uX2lkXG4gICAgICAgIGAsXG4gICAgICB9KSk/LmRhdGEpO1xuICAgIH0pKCkgfSwgW21vZGUsIGN1cnJlbnRdKTtcbiAgICBjb25zdCBbdHJlZSwgc2V0VHJlZV0gPSBSZWFjdC51c2VTdGF0ZSgpO1xuICAgIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiBzZXRUcmVlKCksIFttb2RlLCBjdXJyZW50XSk7XG5cbiAgICBjb25zdCBbcSwgc2V0UV0gPSBSZWFjdC51c2VTdGF0ZShxdWVyeSk7XG4gICAgY29uc3Qgc2V0UW9EZWJvdW5jZSA9IHVzZURlYm91bmNlQ2FsbGJhY2soKHEpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHNldFFvKGpzb241LnBhcnNlKHEpKTtcbiAgICAgIH0gY2F0Y2goZXJyb3IpIHt9XG4gICAgfSwgMTAwMCk7XG4gICAgY29uc3QgW3FvIHNldFFvXSA9IFJlYWN0LnVzZVN0YXRlKHEpO1xuXG4gICAgY29uc3QgW3MsIHNldFNdID0gUmVhY3QudXNlU3RhdGUoc2VhcmNoIHx8ICcnKTtcbiAgICBjb25zdCBzZXRTb0RlYm91bmNlID0gdXNlRGVib3VuY2VDYWxsYmFjaygocykgPT4ge1xuICAgICAgY29uc3QgbnVtID0gcGFyc2VGbG9hdChzKTtcbiAgICAgIGNvbnN0IF9vciA9IFtdO1xuICAgICAgaWYgKCFOdW1iZXIuaXNOYU4obnVtKSkge1xuICAgICAgICBfb3IucHVzaCh7IGlkOiBudW0gfSwgeyBudW1iZXI6IHsgdmFsdWU6IG51bSB9IH0pO1xuICAgICAgfVxuICAgICAgX29yLnB1c2goXG4gICAgICAgIHsgc3RyaW5nOiB7IHZhbHVlOiBzIH0gfSxcbiAgICAgICAgeyBzdHJpbmc6IHsgdmFsdWU6IHsgX2lsaWtlOiBgJSR7c30lYCB9IH0gfSxcbiAgICAgICAgeyBzdHJpbmc6IHsgdmFsdWU6IHsgX3NpbWlsYXI6IHMgfSB9IH0sXG4gICAgICAgIHsgaW46IHsgdHlwZV9pZDogZGVlcC5pZExvY2FsKCdAZGVlcC1mb3VuZGF0aW9uL2NvcmUnLCAnQ29udGFpbicpLCBzdHJpbmc6IHsgdmFsdWU6IHMgfSB9IH0sXG4gICAgICAgIHsgaW46IHsgdHlwZV9pZDogZGVlcC5pZExvY2FsKCdAZGVlcC1mb3VuZGF0aW9uL2NvcmUnLCAnQ29udGFpbicpLCBzdHJpbmc6IHsgdmFsdWU6IHsgX2lsaWtlOiBgJSR7c30lYCB9IH0gfSB9LFxuICAgICAgICB7IGluOiB7IHR5cGVfaWQ6IGRlZXAuaWRMb2NhbCgnQGRlZXAtZm91bmRhdGlvbi9jb3JlJywgJ0NvbnRhaW4nKSwgc3RyaW5nOiB7IHZhbHVlOiB7IF9zaW1pbGFyOiBzIH0gfSB9IH0sXG4gICAgICApO1xuICAgICAgXG4gICAgICBcbiAgICAgIGNvbnN0IHF1ZXJ5ID0gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBfbm90OiB7IHR5cGVfaWQ6IGRlZXAuaWRMb2NhbCgnQGRlZXAtZm91bmRhdGlvbi9jb3JlJywgJ0NvbnRhaW4nKSB9LFxuICAgICAgICBfb3IsXG4gICAgICB9KTtcbiAgICAgIHNldFEocXVlcnkpO1xuICAgICAgLy8gc2V0UW9EZWJvdW5jZShxdWVyeSk7XG4gICAgICB0cnkge1xuICAgICAgICBzZXRRbyhqc29uNS5wYXJzZShxdWVyeSkpO1xuICAgICAgfSBjYXRjaChlcnJvcikge31cbiAgICB9LCAxMDAwKTtcblxuICAgIGNvbnN0IHsgY29sb3JNb2RlIH0gPSB1c2VDb2xvck1vZGUoKTtcblxuICAgIGNvbnN0IGJnID0gdXNlQ29sb3JNb2RlVmFsdWUoJyNlZWVlZWUnLCAnIzQzNDM0MycpO1xuICAgIGNvbnN0IGhvdmVyID0gdXNlQ29sb3JNb2RlVmFsdWUoJ3doaXRlJywgJyMxZTFlMWUnKTtcbiAgICBjb25zdCBib3JkZXJDb2xvciA9IHVzZUNvbG9yTW9kZVZhbHVlKCcjNDM0MzQzJywgJyNlZWVlZWUnKTtcbiAgICBjb25zdCBjb2xvciA9IHVzZUNvbG9yTW9kZVZhbHVlKCcjMWUxZTFlJywgJ3doaXRlJyk7XG5cbiAgICBjb25zdCBib2R5ID0gPEJveCBzeD17eyBcbiAgICAgICAgaGVpZ2h0OiBmaWxsU2l6ZSA/ICcxMDAlJyA6IHZpZXdTaXplLmhlaWdodCwgXG4gICAgICAgIHdpZHRoOiBmaWxsU2l6ZSA/ICcxMDAlJyA6IHZpZXdTaXplLndpZHRoLCBcbiAgICAgICAgb3ZlcmZsb3dZOiAnYXV0bycsIFxuICAgICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJywgXG4gICAgICAgIGJvcmRlckNvbG9yOiAnYm9yZGVyQ29sb3InLCBcbiAgICAgICAgYm9yZGVyV2lkdGg6ICd0aGluJyxcbiAgICAgICAgYm9yZGVyUmFkaXVzOiAnMC41cmVtJyxcbiAgICAgICAgcDogJzAuMnJlbScsXG4gICAgICAgIC4uLnN0eWxlIH19XG4gICAgICA+XG4gICAgICA8SFN0YWNrXG4gICAgICAgIC8vIGRpdmlkZXI9ezxTdGFja0RpdmlkZXIgYm9yZGVyQ29sb3I9J2JvcmRlckNvbG9yJyAvPn1cbiAgICAgICAgLy8gc3BhY2luZz17MX1cbiAgICAgICAgYWxpZ249J3N0cmV0Y2gnXG4gICAgICAgIGp1c3RpZnlDb250ZW50PSdzcGFjZS1iZXR3ZWVuJ1xuICAgICAgICBzeD17eyBwb3NpdGlvbjogJ3N0aWNreScsIHRvcDogMCwgbWI6ICcwLjNyZW0nIH19XG4gICAgICAgIGJnPSd0cmFuc3BhcmVudCdcbiAgICAgID5cbiAgICAgICAgPEJ1dHRvbiB2YXJpYW50PSdzb2xpZCcgc2l6ZT0nc20nIGJhY2tncm91bmQ9eyEobW9kZSA9PT0gJ1NlYXJjaCcpID8gJ2JhY2tncm91bmRNb2RhbCcgOiAnZ3JheS40MDAnfSBib3JkZXJDb2xvcj17IShtb2RlID09PSAnU2VhcmNoJykgPyAnYm9yZGVyQ29sb3InIDogJ2JhY2tncm91bmRNb2RhbCd9IGJvcmRlcldpZHRoPSd0aGluJyBvbkNsaWNrPXsoKSA9PiBzZXRNb2RlKCdTZWFyY2gnKX0+8J+qrDwvQnV0dG9uPlxuICAgICAgICA8QnV0dG9uIHZhcmlhbnQ9J3NvbGlkJyBzaXplPSdzbScgYmFja2dyb3VuZD17IShtb2RlID09PSAnUXVlcnknKSA/ICdiYWNrZ3JvdW5kTW9kYWwnIDogJ2dyYXkuNDAwJ30gYm9yZGVyQ29sb3I9eyEobW9kZSA9PT0gJ1F1ZXJ5JykgPyAnYm9yZGVyQ29sb3InIDogJ2JhY2tncm91bmRNb2RhbCd9IGJvcmRlcldpZHRoPSd0aGluJyBvbkNsaWNrPXsoKSA9PiBzZXRNb2RlKCdRdWVyeScpfT7wn5SNPC9CdXR0b24+XG4gICAgICAgIDxCdXR0b24gdmFyaWFudD0nc29saWQnIHNpemU9J3NtJyBiYWNrZ3JvdW5kPXshKG1vZGUgPT09ICdDb250YWlucycpID8gJ2JhY2tncm91bmRNb2RhbCcgOiAnZ3JheS40MDAnfSBib3JkZXJDb2xvcj17IShtb2RlID09PSAnQ29udGFpbnMnKSA/ICdib3JkZXJDb2xvcicgOiAnYmFja2dyb3VuZE1vZGFsJ30gYm9yZGVyV2lkdGg9J3RoaW4nIG9uQ2xpY2s9eygpID0+IHNldE1vZGUoJ0NvbnRhaW5zJyl9PvCfl4I8L0J1dHRvbj5cbiAgICAgICAgPEJ1dHRvbiB2YXJpYW50PSdzb2xpZCcgc2l6ZT0nc20nIGJhY2tncm91bmQ9eyEobW9kZSA9PT0gJ0luL091dCcpID8gJ2JhY2tncm91bmRNb2RhbCcgOiAnZ3JheS40MDAnfSBib3JkZXJDb2xvcj17IShtb2RlID09PSAnSW4vT3V0JykgPyAnYm9yZGVyQ29sb3InIDogJ2JhY2tncm91bmRNb2RhbCd9IGJvcmRlcldpZHRoPSd0aGluJyBvbkNsaWNrPXsoKSA9PiBzZXRNb2RlKCdJbi9PdXQnKX0+SW4vT3V0PC9CdXR0b24+XG4gICAgICAgIDxCdXR0b24gdmFyaWFudD0nc29saWQnIHNpemU9J3NtJyBiYWNrZ3JvdW5kPXshKG1vZGUgPT09ICdUcmVlcycpID8gJ2JhY2tncm91bmRNb2RhbCcgOiAnZ3JheS40MDAnfSBib3JkZXJDb2xvcj17IShtb2RlID09PSAnVHJlZXMnKSA/ICdib3JkZXJDb2xvcicgOiAnYmFja2dyb3VuZE1vZGFsJ30gYm9yZGVyV2lkdGg9J3RoaW4nIG9uQ2xpY2s9eygpID0+IHNldE1vZGUoJ1RyZWVzJyl9PvCfjLI8L0J1dHRvbj5cbiAgICAgIDwvSFN0YWNrPlxuICAgICAge21vZGUgPT09ICdTZWFyY2gnICYmIDw+XG4gICAgICAgIHtjdXJyZW50ICYmIDxMaXN0XG4gICAgICAgICAgbGluaz17bGlua31cbiAgICAgICAgICBjdXJyZW50PXtjdXJyZW50fVxuICAgICAgICAgIHNldE1vZGU9e3NldE1vZGV9XG4gICAgICAgICAgc2V0Q3VycmVudD17c2V0Q3VycmVudH1cbiAgICAgICAgICBwYXJlbnRzUXVlcnk9e3sgaWQ6IDAgfX1cbiAgICAgICAgICBjaGlsZHJlblF1ZXJ5PXt7IGlkOiAwIH19XG4gICAgICAgIC8+fVxuICAgICAgICA8SW5wdXRcbiAgICAgICAgICBhdXRvRm9jdXNcbiAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgdmFyaWFudD0nZmlsbGVkJ1xuICAgICAgICAgIHZhcmlhbnQ9J2ZpbGxlZCdcbiAgICAgICAgICBiZz17Ymd9XG4gICAgICAgICAgY29sb3I9e2NvbG9yfVxuICAgICAgICAgIGJvcmRlcldpZHRoPSd0aGluJ1xuICAgICAgICAgIGJvcmRlckNvbG9yPXtib3JkZXJDb2xvcn1cbiAgICAgICAgICBfaG92ZXI9e3tiZzogaG92ZXJ9fVxuICAgICAgICAgIF9mb2N1cz17e2JnOiBiZ319XG4gICAgICAgICAgc3g9e3tcbiAgICAgICAgICAgIHdpZHRoOiAnMTAwJScsXG4gICAgICAgICAgfX1cbiAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgIHNldFMoZS50YXJnZXQudmFsdWUpO1xuICAgICAgICAgICAgc2V0U29EZWJvdW5jZShlLnRhcmdldC52YWx1ZSk7XG4gICAgICAgICAgfX1cbiAgICAgICAgICB2YWx1ZT17c31cbiAgICAgICAgLz5cbiAgICAgICAgezxMaXN0XG4gICAgICAgICAgbGluaz17bGlua31cbiAgICAgICAgICBjdXJyZW50PXtudWxsfVxuICAgICAgICAgIHNldE1vZGU9e3NldE1vZGV9XG4gICAgICAgICAgc2V0Q3VycmVudD17c2V0Q3VycmVudH1cbiAgICAgICAgICBwYXJlbnRzUXVlcnk9e3sgaWQ6IDAgfX1cbiAgICAgICAgICBjaGlsZHJlblF1ZXJ5PXt7XG4gICAgICAgICAgICAuLi5xbyxcbiAgICAgICAgICAgIGxpbWl0OiAzMCxcbiAgICAgICAgICB9fVxuICAgICAgICAvPn1cbiAgICAgIDwvPn1cbiAgICAgIHttb2RlID09PSAnUXVlcnknICYmIDw+XG4gICAgICAgIHtjdXJyZW50ICYmIDxMaXN0XG4gICAgICAgICAgbGluaz17bGlua31cbiAgICAgICAgICBjdXJyZW50PXtjdXJyZW50fVxuICAgICAgICAgIHNldE1vZGU9e3NldE1vZGV9XG4gICAgICAgICAgc2V0Q3VycmVudD17c2V0Q3VycmVudH1cbiAgICAgICAgICBwYXJlbnRzUXVlcnk9e3sgaWQ6IDAgfX1cbiAgICAgICAgICBjaGlsZHJlblF1ZXJ5PXt7IGlkOiAwIH19XG4gICAgICAgIC8+fVxuICAgICAgICA8TW9uYWNvRWRpdG9yXG4gICAgICAgICAgb3B0aW9ucz17e1xuICAgICAgICAgICAgbWluaW1hcDoge1xuICAgICAgICAgICAgICBlbmFibGVkOiBmYWxzZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGxpbmVOdW1iZXJzOiAnb2ZmJyxcbiAgICAgICAgICAgIHdvcmRXcmFwOiB0cnVlLFxuICAgICAgICAgIH19XG4gICAgICAgICAgaGVpZ2h0PVwiMjAwcHhcIlxuICAgICAgICAgIHdpZHRoPVwiMTAwJVwiXG4gICAgICAgICAgdGhlbWU9e2NvbG9yTW9kZSA9PT0gJ2xpZ2h0JyA/ICdsaWdodCcgOiBcInZzLWRhcmtcIn1cbiAgICAgICAgICBkZWZhdWx0TGFuZ3VhZ2U9XCJqc29uXCJcbiAgICAgICAgICBkZWZhdWx0VmFsdWU9e3EgfHwgJyd9XG4gICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgc2V0USh2YWx1ZSk7XG4gICAgICAgICAgICBzZXRRb0RlYm91bmNlKHZhbHVlKTtcbiAgICAgICAgICB9fVxuICAgICAgICAgIC8vIG9uTW91bnQ9e2hhbmRsZUVkaXRvckRpZE1vdW50fVxuICAgICAgICAvPlxuICAgICAgICA8TGlzdFxuICAgICAgICAgIGxpbms9e2xpbmt9XG4gICAgICAgICAgY3VycmVudD17bnVsbH1cbiAgICAgICAgICBzZXRNb2RlPXtzZXRNb2RlfVxuICAgICAgICAgIHNldEN1cnJlbnQ9e3NldEN1cnJlbnR9XG4gICAgICAgICAgcGFyZW50c1F1ZXJ5PXt7IGlkOiAwIH19XG4gICAgICAgICAgY2hpbGRyZW5RdWVyeT17e1xuICAgICAgICAgICAgLi4ucW8sXG4gICAgICAgICAgICBsaW1pdDogMzAsXG4gICAgICAgICAgfX1cbiAgICAgICAgLz5cbiAgICAgIDwvPn1cbiAgICAgIHttb2RlID09PSAnQ29udGFpbnMnICYmIGN1cnJlbnQgJiYgPExpc3RcbiAgICAgICAgbGluaz17bGlua31cbiAgICAgICAgY3VycmVudD17Y3VycmVudH1cbiAgICAgICAgc2V0TW9kZT17c2V0TW9kZX1cbiAgICAgICAgc2V0Q3VycmVudD17c2V0Q3VycmVudH1cbiAgICAgICAgcGFyZW50c1F1ZXJ5PXt7XG4gICAgICAgICAgb3V0OiB7XG4gICAgICAgICAgICB0eXBlX2lkOiBkZWVwLmlkTG9jYWwoJ0BkZWVwLWZvdW5kYXRpb24vY29yZScsICdDb250YWluJyksXG4gICAgICAgICAgICB0b19pZDogY3VycmVudD8uaWQsXG4gICAgICAgICAgfVxuICAgICAgICB9fVxuICAgICAgICBjaGlsZHJlblF1ZXJ5PXt7XG4gICAgICAgICAgaW46IHtcbiAgICAgICAgICAgIHR5cGVfaWQ6IGRlZXAuaWRMb2NhbCgnQGRlZXAtZm91bmRhdGlvbi9jb3JlJywgJ0NvbnRhaW4nKSxcbiAgICAgICAgICAgIGZyb21faWQ6IGN1cnJlbnQ/LmlkLFxuICAgICAgICAgIH1cbiAgICAgICAgfX1cbiAgICAgIC8+fVxuICAgICAge21vZGUgPT09ICdJbi9PdXQnICYmIGN1cnJlbnQgJiYgPD5cbiAgICAgICAgPExpc3RcbiAgICAgICAgICBsaW5rPXtsaW5rfVxuICAgICAgICAgIGN1cnJlbnQ9e2N1cnJlbnR9XG4gICAgICAgICAgc2V0TW9kZT17c2V0TW9kZX1cbiAgICAgICAgICBzZXRDdXJyZW50PXtzZXRDdXJyZW50fVxuICAgICAgICAgIHBhcmVudHNRdWVyeT17e1xuICAgICAgICAgICAgdG9faWQ6IGN1cnJlbnQ/LmlkXG4gICAgICAgICAgfX1cbiAgICAgICAgICBjaGlsZHJlblF1ZXJ5PXt7XG4gICAgICAgICAgICBmcm9tX2lkOiBjdXJyZW50Py5pZFxuICAgICAgICAgIH19XG4gICAgICAgIC8+XG4gICAgICA8Lz59XG4gICAgICB7bW9kZSA9PT0gJ1RyZWVzJyAmJiA8PlxuICAgICAgICA8VlN0YWNrXG4gICAgICAgICAgZGl2aWRlcj17PFN0YWNrRGl2aWRlciBib3JkZXJDb2xvcj0nYm9yZGVyQ29sb3InIC8+fVxuICAgICAgICAgIHNwYWNpbmc9ezF9XG4gICAgICAgICAgYWxpZ249J3N0cmV0Y2gnXG4gICAgICAgICAgYmc9J2dyYXkuODAwJ1xuICAgICAgICA+XG4gICAgICAgICAge1s8V3JhcCBrZXk9e3RyZWU/LmlkIHx8IDB9IHNwYWNpbmc9ezF9IGp1c3RpZnk9J2NlbnRlcic+XG4gICAgICAgICAgICB7dHJlZXM/Lm1hcCh0ID0+IDxXcmFwSXRlbSBrZXk9e3Q/LmlkfT5cbiAgICAgICAgICAgICAgPEJ1dHRvbiBzaXplPSdzbScgdmFyaWFudD17dHJlZT8uaWQgPT09IHQ/LmlkID8gJ3NvbGlkJyA6IFwib3V0bGluZVwifSBvbkNsaWNrPXsoKSA9PiBzZXRUcmVlKHQpfT57ZGVlcC5uYW1lTG9jYWwodD8udHJlZV9pZCl9PC9CdXR0b24+XG4gICAgICAgICAgICA8L1dyYXBJdGVtPil9XG4gICAgICAgICAgPC9XcmFwPl19XG4gICAgICAgIDwvVlN0YWNrPlxuICAgICAgICB7IXRyZWUgJiYgPD5cbiAgICAgICAgICA8TGlzdFxuICAgICAgICAgICAgbGluaz17bGlua31cbiAgICAgICAgICAgIGN1cnJlbnQ9e2N1cnJlbnR9XG4gICAgICAgICAgICBzZXRNb2RlPXtzZXRNb2RlfVxuICAgICAgICAgICAgc2V0Q3VycmVudD17c2V0Q3VycmVudH1cbiAgICAgICAgICAgIHBhcmVudHNRdWVyeT17e1xuICAgICAgICAgICAgICBpZDogMFxuICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIGNoaWxkcmVuUXVlcnk9e3sgXG4gICAgICAgICAgICAgIGlkOiAwXG4gICAgICAgICAgICB9fVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvPn1cbiAgICAgICAgeyEhdHJlZSAmJiAhIWN1cnJlbnQ/LmlkICYmIDw+XG4gICAgICAgICAge1s8TGlzdFxuICAgICAgICAgICAga2V5PXt0cmVlPy5pZH1cbiAgICAgICAgICAgIGxpbms9e2xpbmt9XG4gICAgICAgICAgICBjdXJyZW50PXtjdXJyZW50fVxuICAgICAgICAgICAgc2V0TW9kZT17c2V0TW9kZX1cbiAgICAgICAgICAgIHNldEN1cnJlbnQ9e3NldEN1cnJlbnR9XG4gICAgICAgICAgICBwYXJlbnRzUXVlcnk9e3tcbiAgICAgICAgICAgICAgZG93bjoge1xuICAgICAgICAgICAgICAgIHRyZWVfaWQ6IHRyZWU/LnRyZWVfaWQsXG4gICAgICAgICAgICAgICAgcG9zaXRpb25faWQ6IHRyZWU/LnBvc2l0aW9uX2lkLFxuICAgICAgICAgICAgICAgIGxpbmtfaWQ6IGN1cnJlbnQ/LmlkXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAgY2hpbGRyZW5RdWVyeT17eyBfYW5kOiBbXG4gICAgICAgICAgICAgIHsgdXA6IHtcbiAgICAgICAgICAgICAgICB0cmVlX2lkOiB0cmVlPy50cmVlX2lkLFxuICAgICAgICAgICAgICAgIHJvb3RfaWQ6IHRyZWU/LnJvb3RfaWQsXG4gICAgICAgICAgICAgICAgcGFyZW50X2lkOiB0cmVlPy5saW5rX2lkLFxuICAgICAgICAgICAgICAgIGRlcHRoOiB0cmVlPy5kZXB0aCxcbiAgICAgICAgICAgICAgfSB9LFxuICAgICAgICAgICAgICB7IGRvd246IHtcbiAgICAgICAgICAgICAgICB0cmVlX2lkOiB0cmVlPy50cmVlX2lkLFxuICAgICAgICAgICAgICAgIHJvb3RfaWQ6IHRyZWU/LnJvb3RfaWQsXG4gICAgICAgICAgICAgICAgZGVwdGg6IHRyZWU/LmRlcHRoICsgMSxcbiAgICAgICAgICAgICAgfSB9LFxuICAgICAgICAgICAgXX19XG4gICAgICAgICAgLz5dfVxuICAgICAgICA8Lz59XG4gICAgICA8Lz59XG4gICAgICB7Y2hpbGRyZW59XG4gICAgPC9kaXY+XG4gICAgXG4gICAgcmV0dXJuIDw+XG4gICAgICB7ZmlsbFNpemUgXG4gICAgICA/IGJvZHkgXG4gICAgICA6IDxSZXNpemVcbiAgICAgICAgICBvbkNoYW5nZVNpemU9eyh2aWV3U2l6ZSkgPT4gc2V0Vmlld1NpemUodmlld1NpemUpfSBcbiAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgIC8vIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgICAgICAgIC8vIG92ZXJmbG93OiBuZXN0ZWQgPyAnaGlkZGVuJyA6ICdpbmhlcml0JyxcbiAgICAgICAgICBib3JkZXJSYWRpdXM6IDUsXG4gICAgICAgICAgYm9yZGVyOiAnbm9uZScsXG4gICAgICAgIH19XG4gICAgICA+e2JvZHl9PC9SZXNpemU+fVxuICAgIDwvPjtcbiAgfTtcbn1cbiJdfQ==",
        "link_id": 967
      }
    },
    {
      "id": 968,
      "type_id": 3,
      "from_id": 946,
      "to_id": 967,
      "value": {
        "id": 400,
        "value": "generated",
        "link_id": 968
      }
    },
    {
      "id": 969,
      "type_id": 143,
      "from_id": 967,
      "to_id": 946
    },
    {
      "id": 970,
      "type_id": 3,
      "from_id": 946,
      "to_id": 969
    },
    {
      "id": 980,
      "type_id": 1,
      "from_id": 8,
      "to_id": 8
    },
    {
      "id": 981,
      "type_id": 1,
      "from_id": 980,
      "to_id": 35
    },
    {
      "id": 982,
      "type_id": 2,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 410,
        "value": "@deep-foundation/deepcase-opened",
        "link_id": 982
      }
    },
    {
      "id": 1074,
      "type_id": 82,
      "from_id": 1072,
      "to_id": 1073
    },
    {
      "id": 1075,
      "type_id": 164,
      "from_id": 1074,
      "to_id": 49
    },
    {
      "id": 1268,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 480,
        "value": "async ({ deep, require }) => {\n    const PACKAGE_NAME = \"@deep-foundation/chatgpt-azure-discord-bot\";\n    const logsPrefix = \"@chatgpt-azure\" + \" \" + \"manager\" + \"ClientHandler\";\n    const React = await deep.import(\"react\");\n    const { useState, useMemo, useRef } = React;\n    const Chakra = await deep.import(\"@chakra-ui/react\");\n    console.log(logsPrefix, { Chakra });\n    const { Input, InputGroup, InputRightElement, IconButton, Popover, PopoverTrigger, PopoverContent, PopoverArrow, PopoverBody, FormControl, FormLabel, Box, PopoverHeader, PopoverCloseButton, HStack, Stack, Text, Link, Select, Tooltip, Button, NumberInput, NumberInputField, FormHelperText, FormErrorMessage, Divider, } = Chakra;\n    const ChakraIcons = await deep.import(\"@chakra-ui/icons\");\n    const { InfoOutlineIcon } = ChakraIcons;\n    console.log(logsPrefix, ChakraIcons);\n    const DeepCase = await deep.import(\"@deep-foundation/deepcase\");\n    const { FinderPopover } = await deep.import(\"./cyto/hooks\");\n    const { ClientHandler } = DeepCase;\n    console.log(logsPrefix, { DeepCase });\n    console.log(logsPrefix, { FinderPopover });\n    const ReactHookForm = await deep.import(\"react-hook-form\");\n    console.log(logsPrefix, { ReactHookForm });\n    const { useForm, Controller } = ReactHookForm;\n    const containTypeLinkId = await deep.id(\"@deep-foundation/core\", \"Contain\");\n    const chatGPTAzureClientHandlerLinkId = await deep.id(\"@deep-foundation/chatgpt-azure\", \"managerClientHandler\");\n    return ({ fillSize, style, link }) => {\n        const { handleSubmit, register, formState: { errors, isSubmitting }, control, setValue, setError, } = useForm();\n        async function onSubmit(values) {\n            const { apiKey, chatGPTModelLinkId, userLinkId, containerLinkId } = values;\n            const containTypeLinkId = await deep.id(\"@deep-foundation/core\", \"Contain\");\n            const reservedLinkIds = await deep.reserve(6);\n            const apiKeyLinkId = reservedLinkIds.pop();\n            const containForApiKeyLinkId = reservedLinkIds.pop();\n            const usesApiKeyLinkId = reservedLinkIds.pop();\n            const containForUsesApiKeyLinkId = reservedLinkIds.pop();\n            const usesModelLinkId = reservedLinkIds.pop();\n            const containForUsesModelLinkId = reservedLinkIds.pop();\n            await deep\n                .serial({\n                operations: [\n                    {\n                        type: \"insert\",\n                        table: \"links\",\n                        objects: {\n                            id: apiKeyLinkId,\n                            type_id: await deep.id(\"@deep-foundation/openai\", \"ApiKey\"),\n                        },\n                    },\n                    {\n                        type: \"insert\",\n                        table: \"strings\",\n                        objects: {\n                            link_id: apiKeyLinkId,\n                            value: apiKey,\n                        },\n                    },\n                    {\n                        type: \"insert\",\n                        table: \"links\",\n                        objects: {\n                            id: containForApiKeyLinkId,\n                            type_id: containTypeLinkId,\n                            from_id: containerLinkId,\n                            to_id: apiKeyLinkId,\n                        },\n                    },\n                    {\n                        type: \"insert\",\n                        table: \"links\",\n                        objects: {\n                            id: usesApiKeyLinkId,\n                            type_id: await deep.id(\"@deep-foundation/openai\", \"UsesApiKey\"),\n                            from_id: userLinkId,\n                            to_id: apiKeyLinkId,\n                        },\n                    },\n                    {\n                        type: \"insert\",\n                        table: \"links\",\n                        objects: {\n                            id: containForUsesApiKeyLinkId,\n                            type_id: containTypeLinkId,\n                            from_id: containerLinkId,\n                            to_id: usesApiKeyLinkId,\n                        },\n                    },\n                    {\n                        type: \"insert\",\n                        table: \"links\",\n                        objects: {\n                            id: usesModelLinkId,\n                            type_id: await deep.id(\"@deep-foundation/openai\", \"UsesModel\"),\n                            from_id: userLinkId,\n                            to_id: chatGPTModelLinkId,\n                        },\n                    },\n                    {\n                        type: \"insert\",\n                        table: \"links\",\n                        objects: {\n                            id: containForUsesModelLinkId,\n                            type_id: containTypeLinkId,\n                            from_id: containerLinkId,\n                            to_id: usesModelLinkId,\n                        },\n                    },\n                ],\n            })\n                .catch(setError);\n        }\n        return (React.createElement(Box, { style: { minWidth: 450, ...style }, bg: \"bgColor\", color: \"text\", borderColor: \"borderColor\", borderWidth: \"1px\", borderRadius: \"lg\", padding: 4 },\n            React.createElement(\"form\", { onSubmit: handleSubmit(onSubmit) },\n                React.createElement(FormControl, { isInvalid: errors.root },\n                    React.createElement(Stack, { spacing: 6, divider: React.createElement(Divider, null), display: \"flex\", justifyContent: \"center\" },\n                        React.createElement(ApiKeyTextField, { register: register, error: errors.apiKey && errors.apiKey.message }),\n                        React.createElement(ModelLinkIdSelect, { register: register, error: errors.chatGPTModelLinkId && errors.chatGPTModelLinkId.message }),\n                        React.createElement(UserLinkIdTextField, { control: control, error: errors.userLinkId && errors.userLinkId.message, setValue: setValue }),\n                        React.createElement(ContainerLinkIdTextField, { control: control, setValue: setValue, error: errors.containerLinkId && errors.containerLinkId.message }),\n                        errors.root && React.createElement(FormErrorMessage, null, JSON.stringify(errors.root, null, 2)),\n                        React.createElement(Button, { isLoading: isSubmitting, type: \"submit\" }, \"Submit\"))))));\n    };\n    function ModelLinkIdSelect(options) {\n        const { register, error } = options;\n        const { data: modelLinks } = deep.useDeepSubscription({\n            type_id: {\n                _id: [\"@deep-foundation/openai\", \"Model\"],\n            },\n        });\n        const modelOptions = useMemo(() => {\n            if (!modelLinks || modelLinks.length === 0)\n                return null;\n            return modelLinks.map((link) => {\n                const name = link.value.value;\n                return React.createElement(\"option\", { value: link.id }, name);\n            });\n        }, [modelLinks]);\n        console.log({ modelOptions });\n        return (React.createElement(Tooltip, { label: `No model links of type [\"@deep-foundation/openai\", \"Model\"] available to choose from. You can install \"@deep-foundation/chatgpt-azure-deep\" for already configured chatgpt models`, isDisabled: modelLinks.length > 0 },\n            React.createElement(FormControl, { isInvalid: error },\n                React.createElement(FormLabel, { htmlFor: \"chatGPTModelLinkId\" }, \"ChatGPT Model Link ID\"),\n                React.createElement(Select, { placeholder: \"ChatGPT Model link ID\", ...register(\"chatGPTModelLinkId\", {\n                        required: \"ChatGPT Model link ID is required\",\n                    }), isDisabled: modelLinks.length === 0 }, modelOptions),\n                React.createElement(FormErrorMessage, null, error),\n                React.createElement(FormHelperText, null, \"ChatGPT model is required to know which model should be used for requests\"))));\n    }\n    function ApiKeyTextField(options) {\n        const { error, register } = options;\n        return (React.createElement(HStack, null,\n            React.createElement(FormControl, { isInvalid: error },\n                React.createElement(FormLabel, { htmlFor: \"apiKey\" }, \"ApiKey Link ID\"),\n                React.createElement(Input, { ...register(\"apiKey\", {\n                        required: \"Api Key is required\",\n                    }) }),\n                React.createElement(FormErrorMessage, null, error),\n                React.createElement(FormHelperText, null,\n                    React.createElement(Stack, null,\n                        React.createElement(Text, null, \"Api Key is required to make requests to openai on your behalf\"),\n                        React.createElement(Link, { isExternal: true, href: \"https://platform.openai.com/api-keys\" }, \"Obtain Api Key\"))))));\n    }\n    function UserLinkIdTextField(options) {\n        const { setValue, error, control } = options;\n        return (React.createElement(FormControl, { isInvalid: error },\n            React.createElement(FormLabel, { htmlFor: \"userLinkId\" }, \"User Link ID\"),\n            React.createElement(Controller, { name: \"userLinkId\", control: control, defaultValue: undefined, rules: {\n                    required: {\n                        value: true,\n                        message: \"User link ID is required\",\n                    },\n                    validate: async (value) => {\n                        const valueNumber = parseInt(value);\n                        if (isNaN(valueNumber)) {\n                            return \"User link ID must be a number\";\n                        }\n                        const { data: [link], } = await deep.select({ id: valueNumber });\n                        if (!link) {\n                            return `Link ${valueNumber} does not exist`;\n                        }\n                        else {\n                            return true;\n                        }\n                    },\n                }, render: ({ field }) => (React.createElement(HStack, null,\n                    React.createElement(NumberInput, { ...field, min: 0 },\n                        React.createElement(NumberInputField, { ref: field.ref, name: field.name })),\n                    React.createElement(FinderPopover, { link: deep.linkId, onSubmit: async (link) => {\n                            setValue(\"containerLinkId\", link.id);\n                        } },\n                        React.createElement(IconButton, { \"aria-label\": \"finder\", icon: React.createElement(React.Fragment, null, \"\\uD83E\\uDEAC\") })))) }),\n            React.createElement(FormErrorMessage, null, error),\n            React.createElement(FormHelperText, null, \"User link is a link that is considered as a user of ApiKey. User link will be \\\"from\\\" for UsesApiKey\")));\n    }\n    function ContainerLinkIdTextField(options) {\n        const { setValue, error, control } = options;\n        const helpContent = `Container link is a link that will contain newly created ApiKey, UsesApiKey`;\n        return (React.createElement(FormControl, { isInvalid: error },\n            React.createElement(FormLabel, { htmlFor: \"containerLinkId\" }, \"Container Link ID\"),\n            React.createElement(HStack, null,\n                React.createElement(Controller, { name: \"containerLinkId\", control: control, defaultValue: undefined, rules: {\n                        required: {\n                            value: true,\n                            message: \"Container link id is required\",\n                        },\n                        validate: async (value) => {\n                            const valueNumber = parseInt(value);\n                            if (isNaN(valueNumber)) {\n                                return \"Container link id must be a number\";\n                            }\n                            const { data: [link], } = await deep.select({ id: valueNumber });\n                            if (!link) {\n                                return `Link ${valueNumber} does not exist`;\n                            }\n                            else {\n                                return true;\n                            }\n                        },\n                    }, render: ({ field }) => (React.createElement(NumberInput, { ...field, min: 0 },\n                        React.createElement(NumberInputField, { ref: field.ref, name: field.name }))) }),\n                React.createElement(FinderPopover, { link: deep.linkId, onSubmit: async (link) => {\n                        setValue(\"containerLinkId\", link.id);\n                    } },\n                    React.createElement(IconButton, { \"aria-label\": \"finder\", icon: React.createElement(React.Fragment, null, \"\\uD83E\\uDEAC\") }))),\n            React.createElement(FormErrorMessage, null, error),\n            React.createElement(FormHelperText, null, \"Container link is a link that will contain newly created ApiKey, UsesApiKey\")));\n    }\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLEVBQUUsRUFBRTtJQUMxQixNQUFNLFlBQVksR0FBRyw0Q0FBNEMsQ0FBQztJQUNsRSxNQUFNLFVBQVUsR0FBRyxnQkFBZ0IsR0FBRyxHQUFHLEdBQUcsU0FBUyxHQUFHLGVBQWUsQ0FBQztJQUN4RSxNQUFNLEtBQUssR0FBRyxNQUFNLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDekMsTUFBTSxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsTUFBTSxFQUFFLEdBQUcsS0FBSyxDQUFDO0lBQzVDLE1BQU0sTUFBTSxHQUFHLE1BQU0sSUFBSSxDQUFDLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBQ3JELE9BQU8sQ0FBQyxHQUFHLENBQUMsVUFBVSxFQUFFLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQztJQUNwQyxNQUFNLEVBQ0osS0FBSyxFQUNMLFVBQVUsRUFDVixpQkFBaUIsRUFDakIsVUFBVSxFQUNWLE9BQU8sRUFDUCxjQUFjLEVBQ2QsY0FBYyxFQUNkLFlBQVksRUFDWixXQUFXLEVBQ1gsV0FBVyxFQUNYLFNBQVMsRUFDVCxHQUFHLEVBQ0gsYUFBYSxFQUNiLGtCQUFrQixFQUNsQixNQUFNLEVBQ04sS0FBSyxFQUNMLElBQUksRUFDSixJQUFJLEVBQ0osTUFBTSxFQUNOLE9BQU8sRUFDUCxNQUFNLEVBQ04sV0FBVyxFQUNYLGdCQUFnQixFQUNoQixjQUFjLEVBQ2QsZ0JBQWdCLEVBQ2hCLE9BQU8sR0FDUixHQUFHLE1BQU0sQ0FBQztJQUNYLE1BQU0sV0FBVyxHQUFHLE1BQU0sSUFBSSxDQUFDLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBQzFELE1BQU0sRUFBRSxlQUFlLEVBQUUsR0FBRyxXQUFXLENBQUM7SUFDeEMs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RUFBRSxXQUFXLEVBQUUsQ0FBQyxDQUFDOzRCQUMzQyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7Z0NBQ1YsT0FBTyxRQUFRLFdBQVcsaUJBQWlCLENBQUM7NEJBQzlDLENBQUM7aUNBQU0sQ0FBQztnQ0FDTixPQUFPLElBQUksQ0FBQzs0QkFDZCxDQUFDO3dCQUNILENBQUM7cUJBQ0YsRUFDRCxNQUFNLEVBQUUsQ0FBQyxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUNyQixvQkFBQyxXQUFXLE9BQUssS0FBSyxFQUFFLEdBQUcsRUFBRSxDQUFDO3dCQUM1QixvQkFBQyxnQkFBZ0IsSUFBQyxHQUFHLEVBQUUsS0FBSyxDQUFDLEdBQUcsRUFBRSxJQUFJLEVBQUUsS0FBSyxDQUFDLElBQUksR0FBSSxDQUMxQyxDQUNmLEdBQ0Q7Z0JBQ0Ysb0JBQUMsYUFBYSxJQUNaLElBQUksRUFBRSxJQUFJLENBQUMsTUFBTSxFQUNqQixRQUFRLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxFQUFFO3dCQUN2QixRQUFRLENBQUMsaUJBQWlCLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO29CQUN2QyxDQUFDO29CQUVELG9CQUFDLFVBQVUsa0JBQVksUUFBUSxFQUFDLElBQUksRUFBRSx5REFBTyxHQUFJLENBQ25DLENBQ1Q7WUFDVCxvQkFBQyxnQkFBZ0IsUUFBRSxLQUFLLENBQW9CO1lBQzVDLG9CQUFDLGNBQWMsc0ZBR0UsQ0FDTCxDQUNmLENBQUM7SUFDSixDQUFDO0FBQ0gsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiYXN5bmMgKHsgZGVlcCwgcmVxdWlyZSB9KSA9PiB7XG4gIGNvbnN0IFBBQ0tBR0VfTkFNRSA9IFwiQGRlZXAtZm91bmRhdGlvbi9jaGF0Z3B0LWF6dXJlLWRpc2NvcmQtYm90XCI7XG4gIGNvbnN0IGxvZ3NQcmVmaXggPSBcIkBjaGF0Z3B0LWF6dXJlXCIgKyBcIiBcIiArIFwibWFuYWdlclwiICsgXCJDbGllbnRIYW5kbGVyXCI7XG4gIGNvbnN0IFJlYWN0ID0gYXdhaXQgZGVlcC5pbXBvcnQoXCJyZWFjdFwiKTtcbiAgY29uc3QgeyB1c2VTdGF0ZSwgdXNlTWVtbywgdXNlUmVmIH0gPSBSZWFjdDtcbiAgY29uc3QgQ2hha3JhID0gYXdhaXQgZGVlcC5pbXBvcnQoXCJAY2hha3JhLXVpL3JlYWN0XCIpO1xuICBjb25zb2xlLmxvZyhsb2dzUHJlZml4LCB7IENoYWtyYSB9KTtcbiAgY29uc3Qge1xuICAgIElucHV0LFxuICAgIElucHV0R3JvdXAsXG4gICAgSW5wdXRSaWdodEVsZW1lbnQsXG4gICAgSWNvbkJ1dHRvbixcbiAgICBQb3BvdmVyLFxuICAgIFBvcG92ZXJUcmlnZ2VyLFxuICAgIFBvcG92ZXJDb250ZW50LFxuICAgIFBvcG92ZXJBcnJvdyxcbiAgICBQb3BvdmVyQm9keSxcbiAgICBGb3JtQ29udHJvbCxcbiAgICBGb3JtTGFiZWwsXG4gICAgQm94LFxuICAgIFBvcG92ZXJIZWFkZXIsXG4gICAgUG9wb3ZlckNsb3NlQnV0dG9uLFxuICAgIEhTdGFjayxcbiAgICBTdGFjayxcbiAgICBUZXh0LFxuICAgIExpbmssXG4gICAgU2VsZWN0LFxuICAgIFRvb2x0aXAsXG4gICAgQnV0dG9uLFxuICAgIE51bWJlcklucHV0LFxuICAgIE51bWJlcklucHV0RmllbGQsXG4gICAgRm9ybUhlbHBlclRleHQsXG4gICAgRm9ybUVycm9yTWVzc2FnZSxcbiAgICBEaXZpZGVyLFxuICB9ID0gQ2hha3JhO1xuICBjb25zdCBDaGFrcmFJY29ucyA9IGF3YWl0IGRlZXAuaW1wb3J0KFwiQGNoYWtyYS11aS9pY29uc1wiKTtcbiAgY29uc3QgeyBJbmZvT3V0bGluZUljb24gfSA9IENoYWtyYUljb25zO1xuICBjb25zb2xlLmxvZyhsb2dzUHJlZml4LCBDaGFrcmFJY29ucyk7XG4gIGNvbnN0IERlZXBDYXNlID0gYXdhaXQgZGVlcC5pbXBvcnQoXCJAZGVlcC1mb3VuZGF0aW9uL2RlZXBjYXNlXCIpO1xuICBjb25zdCB7IEZpbmRlclBvcG92ZXIgfSA9IGF3YWl0IGRlZXAuaW1wb3J0KFwiLi9jeXRvL2hvb2tzXCIpO1xuICBjb25zdCB7IENsaWVudEhhbmRsZXIgfSA9IERlZXBDYXNlO1xuICBjb25zb2xlLmxvZyhsb2dzUHJlZml4LCB7IERlZXBDYXNlIH0pO1xuICBjb25zb2xlLmxvZyhsb2dzUHJlZml4LCB7IEZpbmRlclBvcG92ZXIgfSk7XG4gIGNvbnN0IFJlYWN0SG9va0Zvcm0gPSBhd2FpdCBkZWVwLmltcG9ydChcInJlYWN0LWhvb2stZm9ybVwiKTtcbiAgY29uc29sZS5sb2cobG9nc1ByZWZpeCwgeyBSZWFjdEhvb2tGb3JtIH0pO1xuICBjb25zdCB7IHVzZUZvcm0sIENvbnRyb2xsZXIgfSA9IFJlYWN0SG9va0Zvcm07XG4gIGNvbnN0IGNvbnRhaW5UeXBlTGlua0lkID0gYXdhaXQgZGVlcC5pZChcIkBkZWVwLWZvdW5kYXRpb24vY29yZVwiLCBcIkNvbnRhaW5cIik7XG5cbiAgY29uc3QgY2hhdEdQVEF6dXJlQ2xpZW50SGFuZGxlckxpbmtJZCA9IGF3YWl0IGRlZXAuaWQoXG4gICAgXCJAZGVlcC1mb3VuZGF0aW9uL2NoYXRncHQtYXp1cmVcIixcbiAgICBcIm1hbmFnZXJDbGllbnRIYW5kbGVyXCJcbiAgKTtcblxuICByZXR1cm4gKHsgZmlsbFNpemUsIHN0eWxlLCBsaW5rIH0pID0+IHtcbiAgICBjb25zdCB7XG4gICAgICBoYW5kbGVTdWJtaXQsXG4gICAgICByZWdpc3RlcixcbiAgICAgIGZvcm1TdGF0ZTogeyBlcnJvcnMsIGlzU3VibWl0dGluZyB9LFxuICAgICAgY29udHJvbCxcbiAgICAgIHNldFZhbHVlLFxuICAgICAgc2V0RXJyb3IsXG4gICAgfSA9IHVzZUZvcm0oKTtcblxuICAgIGFzeW5jIGZ1bmN0aW9uIG9uU3VibWl0KHZhbHVlczoge1xuICAgICAgYXBpS2V5OiBzdHJpbmc7XG4gICAgICBjaGF0R1BUTW9kZWxMaW5rSWQ6IHN0cmluZztcbiAgICAgIHVzZXJMaW5rSWQ6IHN0cmluZztcbiAgICAgIGNvbnRhaW5lckxpbmtJZDogc3RyaW5nO1xuICAgIH0pIHtcbiAgICAgIGNvbnN0IHsgYXBpS2V5LCBjaGF0R1BUTW9kZWxMaW5rSWQsIHVzZXJMaW5rSWQsIGNvbnRhaW5lckxpbmtJZCB9ID1cbiAgICAgICAgdmFsdWVzO1xuXG4gICAgICBjb25zdCBjb250YWluVHlwZUxpbmtJZCA9IGF3YWl0IGRlZXAuaWQoXG4gICAgICAgIFwiQGRlZXAtZm91bmRhdGlvbi9jb3JlXCIsXG4gICAgICAgIFwiQ29udGFpblwiXG4gICAgICApO1xuICAgICAgY29uc3QgcmVzZXJ2ZWRMaW5rSWRzID0gYXdhaXQgZGVlcC5yZXNlcnZlKDYpO1xuICAgICAgY29uc3QgYXBpS2V5TGlua0lkID0gcmVzZXJ2ZWRMaW5rSWRzLnBvcCgpO1xuICAgICAgY29uc3QgY29udGFpbkZvckFwaUtleUxpbmtJZCA9IHJlc2VydmVkTGlua0lkcy5wb3AoKTtcbiAgICAgIGNvbnN0IHVzZXNBcGlLZXlMaW5rSWQgPSByZXNlcnZlZExpbmtJZHMucG9wKCk7XG4gICAgICBjb25zdCBjb250YWluRm9yVXNlc0FwaUtleUxpbmtJZCA9IHJlc2VydmVkTGlua0lkcy5wb3AoKTtcbiAgICAgIGNvbnN0IHVzZXNNb2RlbExpbmtJZCA9IHJlc2VydmVkTGlua0lkcy5wb3AoKTtcbiAgICAgIGNvbnN0IGNvbnRhaW5Gb3JVc2VzTW9kZWxMaW5rSWQgPSByZXNlcnZlZExpbmtJZHMucG9wKCk7XG5cbiAgICAgIGF3YWl0IGRlZXBcbiAgICAgICAgLnNlcmlhbCh7XG4gICAgICAgICAgb3BlcmF0aW9uczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICB0eXBlOiBcImluc2VydFwiLFxuICAgICAgICAgICAgICB0YWJsZTogXCJsaW5rc1wiLFxuICAgICAgICAgICAgICBvYmplY3RzOiB7XG4gICAgICAgICAgICAgICAgaWQ6IGFwaUtleUxpbmtJZCxcbiAgICAgICAgICAgICAgICB0eXBlX2lkOiBhd2FpdCBkZWVwLmlkKFwiQGRlZXAtZm91bmRhdGlvbi9vcGVuYWlcIiwgXCJBcGlLZXlcIiksXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICB0eXBlOiBcImluc2VydFwiLFxuICAgICAgICAgICAgICB0YWJsZTogXCJzdHJpbmdzXCIsXG4gICAgICAgICAgICAgIG9iamVjdHM6IHtcbiAgICAgICAgICAgICAgICBsaW5rX2lkOiBhcGlLZXlMaW5rSWQsXG4gICAgICAgICAgICAgICAgdmFsdWU6IGFwaUtleSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHR5cGU6IFwiaW5zZXJ0XCIsXG4gICAgICAgICAgICAgIHRhYmxlOiBcImxpbmtzXCIsXG4gICAgICAgICAgICAgIG9iamVjdHM6IHtcbiAgICAgICAgICAgICAgICBpZDogY29udGFpbkZvckFwaUtleUxpbmtJZCxcbiAgICAgICAgICAgICAgICB0eXBlX2lkOiBjb250YWluVHlwZUxpbmtJZCxcbiAgICAgICAgICAgICAgICBmcm9tX2lkOiBjb250YWluZXJMaW5rSWQsXG4gICAgICAgICAgICAgICAgdG9faWQ6IGFwaUtleUxpbmtJZCxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHR5cGU6IFwiaW5zZXJ0XCIsXG4gICAgICAgICAgICAgIHRhYmxlOiBcImxpbmtzXCIsXG4gICAgICAgICAgICAgIG9iamVjdHM6IHtcbiAgICAgICAgICAgICAgICBpZDogdXNlc0FwaUtleUxpbmtJZCxcbiAgICAgICAgICAgICAgICB0eXBlX2lkOiBhd2FpdCBkZWVwLmlkKFwiQGRlZXAtZm91bmRhdGlvbi9vcGVuYWlcIiwgXCJVc2VzQXBpS2V5XCIpLFxuICAgICAgICAgICAgICAgIGZyb21faWQ6IHVzZXJMaW5rSWQsXG4gICAgICAgICAgICAgICAgdG9faWQ6IGFwaUtleUxpbmtJZCxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHR5cGU6IFwiaW5zZXJ0XCIsXG4gICAgICAgICAgICAgIHRhYmxlOiBcImxpbmtzXCIsXG4gICAgICAgICAgICAgIG9iamVjdHM6IHtcbiAgICAgICAgICAgICAgICBpZDogY29udGFpbkZvclVzZXNBcGlLZXlMaW5rSWQsXG4gICAgICAgICAgICAgICAgdHlwZV9pZDogY29udGFpblR5cGVMaW5rSWQsXG4gICAgICAgICAgICAgICAgZnJvbV9pZDogY29udGFpbmVyTGlua0lkLFxuICAgICAgICAgICAgICAgIHRvX2lkOiB1c2VzQXBpS2V5TGlua0lkLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgdHlwZTogXCJpbnNlcnRcIixcbiAgICAgICAgICAgICAgdGFibGU6IFwibGlua3NcIixcbiAgICAgICAgICAgICAgb2JqZWN0czoge1xuICAgICAgICAgICAgICAgIGlkOiB1c2VzTW9kZWxMaW5rSWQsXG4gICAgICAgICAgICAgICAgdHlwZV9pZDogYXdhaXQgZGVlcC5pZChcIkBkZWVwLWZvdW5kYXRpb24vb3BlbmFpXCIsIFwiVXNlc01vZGVsXCIpLFxuICAgICAgICAgICAgICAgIGZyb21faWQ6IHVzZXJMaW5rSWQsXG4gICAgICAgICAgICAgICAgdG9faWQ6IGNoYXRHUFRNb2RlbExpbmtJZCxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHR5cGU6IFwiaW5zZXJ0XCIsXG4gICAgICAgICAgICAgIHRhYmxlOiBcImxpbmtzXCIsXG4gICAgICAgICAgICAgIG9iamVjdHM6IHtcbiAgICAgICAgICAgICAgICBpZDogY29udGFpbkZvclVzZXNNb2RlbExpbmtJZCxcbiAgICAgICAgICAgICAgICB0eXBlX2lkOiBjb250YWluVHlwZUxpbmtJZCxcbiAgICAgICAgICAgICAgICBmcm9tX2lkOiBjb250YWluZXJMaW5rSWQsXG4gICAgICAgICAgICAgICAgdG9faWQ6IHVzZXNNb2RlbExpbmtJZCxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgXSxcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKHNldEVycm9yKTtcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgPEJveFxuICAgICAgICBzdHlsZT17eyBtaW5XaWR0aDogNDUwLCAuLi5zdHlsZSB9fVxuICAgICAgICBiZz17XCJiZ0NvbG9yXCJ9XG4gICAgICAgIGNvbG9yPXtcInRleHRcIn1cbiAgICAgICAgYm9yZGVyQ29sb3I9e1wiYm9yZGVyQ29sb3JcIn1cbiAgICAgICAgYm9yZGVyV2lkdGg9XCIxcHhcIlxuICAgICAgICBib3JkZXJSYWRpdXM9XCJsZ1wiXG4gICAgICAgIHBhZGRpbmc9ezR9XG4gICAgICA+XG4gICAgICAgIDxmb3JtIG9uU3VibWl0PXtoYW5kbGVTdWJtaXQob25TdWJtaXQpfT5cbiAgICAgICAgICA8Rm9ybUNvbnRyb2wgaXNJbnZhbGlkPXtlcnJvcnMucm9vdH0+XG4gICAgICAgICAgICA8U3RhY2tcbiAgICAgICAgICAgICAgc3BhY2luZz17Nn1cbiAgICAgICAgICAgICAgZGl2aWRlcj17PERpdmlkZXIgLz59XG4gICAgICAgICAgICAgIGRpc3BsYXk9XCJmbGV4XCJcbiAgICAgICAgICAgICAganVzdGlmeUNvbnRlbnQ9XCJjZW50ZXJcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8QXBpS2V5VGV4dEZpZWxkXG4gICAgICAgICAgICAgICAgcmVnaXN0ZXI9e3JlZ2lzdGVyfVxuICAgICAgICAgICAgICAgIGVycm9yPXtlcnJvcnMuYXBpS2V5ICYmIGVycm9ycy5hcGlLZXkubWVzc2FnZX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPE1vZGVsTGlua0lkU2VsZWN0XG4gICAgICAgICAgICAgICAgcmVnaXN0ZXI9e3JlZ2lzdGVyfVxuICAgICAgICAgICAgICAgIGVycm9yPXtcbiAgICAgICAgICAgICAgICAgIGVycm9ycy5jaGF0R1BUTW9kZWxMaW5rSWQgJiYgZXJyb3JzLmNoYXRHUFRNb2RlbExpbmtJZC5tZXNzYWdlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8VXNlckxpbmtJZFRleHRGaWVsZFxuICAgICAgICAgICAgICAgIGNvbnRyb2w9e2NvbnRyb2x9XG4gICAgICAgICAgICAgICAgZXJyb3I9e2Vycm9ycy51c2VyTGlua0lkICYmIGVycm9ycy51c2VyTGlua0lkLm1lc3NhZ2V9XG4gICAgICAgICAgICAgICAgc2V0VmFsdWU9e3NldFZhbHVlfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8Q29udGFpbmVyTGlua0lkVGV4dEZpZWxkXG4gICAgICAgICAgICAgICAgY29udHJvbD17Y29udHJvbH1cbiAgICAgICAgICAgICAgICBzZXRWYWx1ZT17c2V0VmFsdWV9XG4gICAgICAgICAgICAgICAgZXJyb3I9e2Vycm9ycy5jb250YWluZXJMaW5rSWQgJiYgZXJyb3JzLmNvbnRhaW5lckxpbmtJZC5tZXNzYWdlfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICB7ZXJyb3JzLnJvb3QgJiYgPEZvcm1FcnJvck1lc3NhZ2U+XG4gICAgICAgICAgICAgICAge0pTT04uc3RyaW5naWZ5KGVycm9ycy5yb290LCBudWxsLCAyKX1cbiAgICAgICAgICAgICAgPC9Gb3JtRXJyb3JNZXNzYWdlPn1cbiAgICAgICAgICAgICAgPEJ1dHRvbiBpc0xvYWRpbmc9e2lzU3VibWl0dGluZ30gdHlwZT1cInN1Ym1pdFwiPlxuICAgICAgICAgICAgICAgIFN1Ym1pdFxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgIDwvU3RhY2s+XG4gICAgICAgICAgPC9Gb3JtQ29udHJvbD5cbiAgICAgICAgPC9mb3JtPlxuICAgICAgPC9Cb3g+XG4gICAgKTtcbiAgfTtcblxuICBmdW5jdGlvbiBNb2RlbExpbmtJZFNlbGVjdChvcHRpb25zOiB7IHJlZ2lzdGVyOiBGdW5jdGlvbjsgZXJyb3I6IHN0cmluZyB9KSB7XG4gICAgY29uc3QgeyByZWdpc3RlciwgZXJyb3IgfSA9IG9wdGlvbnM7XG4gICAgY29uc3QgeyBkYXRhOiBtb2RlbExpbmtzIH0gPSBkZWVwLnVzZURlZXBTdWJzY3JpcHRpb24oe1xuICAgICAgdHlwZV9pZDoge1xuICAgICAgICBfaWQ6IFtcIkBkZWVwLWZvdW5kYXRpb24vb3BlbmFpXCIsIFwiTW9kZWxcIl0sXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgY29uc3QgbW9kZWxPcHRpb25zID0gdXNlTWVtbygoKSA9PiB7XG4gICAgICBpZiAoIW1vZGVsTGlua3MgfHwgbW9kZWxMaW5rcy5sZW5ndGggPT09IDApIHJldHVybiBudWxsO1xuICAgICAgcmV0dXJuIG1vZGVsTGlua3MubWFwKChsaW5rKSA9PiB7XG4gICAgICAgIGNvbnN0IG5hbWUgPSBsaW5rLnZhbHVlLnZhbHVlO1xuICAgICAgICByZXR1cm4gPG9wdGlvbiB2YWx1ZT17bGluay5pZH0+e25hbWV9PC9vcHRpb24+O1xuICAgICAgfSk7XG4gICAgfSwgW21vZGVsTGlua3NdKTtcbiAgICBjb25zb2xlLmxvZyh7IG1vZGVsT3B0aW9ucyB9KTtcblxuICAgIHJldHVybiAoXG4gICAgICA8VG9vbHRpcFxuICAgICAgICBsYWJlbD17YE5vIG1vZGVsIGxpbmtzIG9mIHR5cGUgW1wiQGRlZXAtZm91bmRhdGlvbi9vcGVuYWlcIiwgXCJNb2RlbFwiXSBhdmFpbGFibGUgdG8gY2hvb3NlIGZyb20uIFlvdSBjYW4gaW5zdGFsbCBcIkBkZWVwLWZvdW5kYXRpb24vY2hhdGdwdC1henVyZS1kZWVwXCIgZm9yIGFscmVhZHkgY29uZmlndXJlZCBjaGF0Z3B0IG1vZGVsc2B9XG4gICAgICAgIGlzRGlzYWJsZWQ9e21vZGVsTGlua3MubGVuZ3RoID4gMH1cbiAgICAgID5cbiAgICAgICAgPEZvcm1Db250cm9sIGlzSW52YWxpZD17ZXJyb3J9PlxuICAgICAgICAgIDxGb3JtTGFiZWwgaHRtbEZvcj1cImNoYXRHUFRNb2RlbExpbmtJZFwiPlxuICAgICAgICAgICAgQ2hhdEdQVCBNb2RlbCBMaW5rIElEXG4gICAgICAgICAgPC9Gb3JtTGFiZWw+XG4gICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJDaGF0R1BUIE1vZGVsIGxpbmsgSURcIlxuICAgICAgICAgICAgey4uLnJlZ2lzdGVyKFwiY2hhdEdQVE1vZGVsTGlua0lkXCIsIHtcbiAgICAgICAgICAgICAgcmVxdWlyZWQ6IFwiQ2hhdEdQVCBNb2RlbCBsaW5rIElEIGlzIHJlcXVpcmVkXCIsXG4gICAgICAgICAgICB9KX1cbiAgICAgICAgICAgIGlzRGlzYWJsZWQ9e21vZGVsTGlua3MubGVuZ3RoID09PSAwfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIHttb2RlbE9wdGlvbnN9XG4gICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgPEZvcm1FcnJvck1lc3NhZ2U+e2Vycm9yfTwvRm9ybUVycm9yTWVzc2FnZT5cbiAgICAgICAgICA8Rm9ybUhlbHBlclRleHQ+XG4gICAgICAgICAgICBDaGF0R1BUIG1vZGVsIGlzIHJlcXVpcmVkIHRvIGtub3cgd2hpY2ggbW9kZWwgc2hvdWxkIGJlIHVzZWQgZm9yXG4gICAgICAgICAgICByZXF1ZXN0c1xuICAgICAgICAgIDwvRm9ybUhlbHBlclRleHQ+XG4gICAgICAgIDwvRm9ybUNvbnRyb2w+XG4gICAgICA8L1Rvb2x0aXA+XG4gICAgKTtcbiAgfVxuXG4gIC8vIGZ1bmN0aW9uIEFwaUtleVRleHRGaWVsZChvcHRpb25zOiB7XG4gIC8vICAgYXBpS2V5OiBzdHJpbmc7XG4gIC8vICAgaGFuZGxlQXBpS2V5Q2hhbmdlOiAoYXBpS2V5OiBzdHJpbmcpID0+IHZvaWQ7XG4gIC8vIH0pIHtcbiAgLy8gICBjb25zdCB7IGFwaUtleTogYXBpS2V5LCBoYW5kbGVBcGlLZXlDaGFuZ2U6IGhhbmRsZUFwaUtleUNoYW5nZSB9ID0gb3B0aW9ucztcblxuICAvLyAgIGNvbnN0IGhlbHBDb250ZW50ID0gKFxuICAvLyAgICAgPFN0YWNrPlxuICAvLyAgICAgICA8VGV4dD5cbiAgLy8gICAgICAgICBBcGkgS2V5IGlzIHJlcXVpcmVkIHRvIG1ha2UgcmVxdWVzdHMgdG8gZGlzY29yZCBvbiB5b3VyIGJlaGFsZlxuICAvLyAgICAgICA8L1RleHQ+XG4gIC8vICAgICAgIDxMaW5rXG4gIC8vICAgICAgICAgaXNFeHRlcm5hbFxuICAvLyAgICAgICAgIGhyZWY9XCJodHRwczovL2Rpc2NvcmQuY29tL2RldmVsb3BlcnMvZG9jcy9nZXR0aW5nLXN0YXJ0ZWQjY29uZmlndXJpbmcteW91ci1ib3RcIlxuICAvLyAgICAgICA+XG4gIC8vICAgICAgICAgT2J0YWluIEFwaSBLZXlcbiAgLy8gICAgICAgPC9MaW5rPlxuICAvLyAgICAgPC9TdGFjaz5cbiAgLy8gICApO1xuXG4gIC8vICAgcmV0dXJuIChcbiAgLy8gICAgIDxTdGFjaz5cbiAgLy8gICAgICAgPEhTdGFjaz5cbiAgLy8gICAgICAgICA8SW5wdXRcbiAgLy8gICAgICAgICAgIHBsYWNlaG9sZGVyPVwiRW50ZXIgQXBpIEtleVwiXG4gIC8vICAgICAgICAgICB2YXJpYW50PVwib3V0bGluZWRcIlxuICAvLyAgICAgICAgICAgdmFsdWU9e2FwaUtleX1cbiAgLy8gICAgICAgICAgIG9uQ2hhbmdlPXsoZXZlbnQpID0+IHtcbiAgLy8gICAgICAgICAgICAgaGFuZGxlQXBpS2V5Q2hhbmdlKGV2ZW50LnRhcmdldC52YWx1ZSk7XG4gIC8vICAgICAgICAgICB9fVxuICAvLyAgICAgICAgIC8+XG4gIC8vICAgICAgICAgPFBvcG92ZXI+XG4gIC8vICAgICAgICAgICA8UG9wb3ZlclRyaWdnZXI+XG4gIC8vICAgICAgICAgICAgIDxJY29uQnV0dG9uIGFyaWEtbGFiZWw9XCJoZWxwXCIgaWNvbj17PEluZm9PdXRsaW5lSWNvbiAvPn0gLz5cbiAgLy8gICAgICAgICAgIDwvUG9wb3ZlclRyaWdnZXI+XG4gIC8vICAgICAgICAgICA8UG9wb3ZlckNvbnRlbnQ+XG4gIC8vICAgICAgICAgICAgIDxQb3BvdmVyQXJyb3cgLz5cbiAgLy8gICAgICAgICAgICAgPFBvcG92ZXJDbG9zZUJ1dHRvbiAvPlxuICAvLyAgICAgICAgICAgICA8UG9wb3ZlckJvZHk+e2hlbHBDb250ZW50fTwvUG9wb3ZlckJvZHk+XG4gIC8vICAgICAgICAgICA8L1BvcG92ZXJDb250ZW50PlxuICAvLyAgICAgICAgIDwvUG9wb3Zlcj5cbiAgLy8gICAgICAgPC9IU3RhY2s+XG4gIC8vICAgICA8L1N0YWNrPlxuICAvLyAgICk7XG4gIC8vIH1cblxuICAvLyBmdW5jdGlvbiBVc2VyTGlua0lkVGV4dEZpZWxkKG9wdGlvbnM6IHtcbiAgLy8gICB1c2VyTGlua0lkOiBudW1iZXI7XG4gIC8vICAgaGFuZGxlVXNlckxpbmtJZENoYW5nZTogKHZhbHVlOiBudW1iZXIpID0+IHZvaWQ7XG4gIC8vIH0pIHtcbiAgLy8gICBjb25zdCB7IHVzZXJMaW5rSWQsIGhhbmRsZVVzZXJMaW5rSWRDaGFuZ2UgfSA9IG9wdGlvbnM7XG4gIC8vICAgY29uc3QgW2lzUG9wb3Zlck9wZW4sIHNldElzUG9wb3Zlck9wZW5dID0gdXNlU3RhdGUoZmFsc2UpO1xuXG4gIC8vICAgY29uc3QgaGFuZGxlSGVscENsaWNrID0gKCkgPT4ge1xuICAvLyAgICAgc2V0SXNQb3BvdmVyT3BlbighaXNQb3BvdmVyT3Blbik7XG4gIC8vICAgfTtcblxuICAvLyAgIGNvbnN0IGhlbHBDb250ZW50ID0gYFVzZXIgbGluayBpcyBhIGxpbmsgdGhhdCBpcyBjb25zaWRlcmVkIGFzIGEgdXNlciBvZiBBcGlLZXkuIFVzZXIgbGluayB3aWxsIGJlIFwiZnJvbVwiIGZvciBVc2VzQXBpS2V5YDtcblxuICAvLyAgIHJldHVybiAoXG4gIC8vICAgICA8SFN0YWNrPlxuICAvLyAgICAgICA8Rm9ybUNvbnRyb2w+XG4gIC8vICAgICAgICAgPElucHV0R3JvdXA+XG4gIC8vICAgICAgICAgICA8SW5wdXRcbiAgLy8gICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJVc2VyIExpbmsgSURcIlxuICAvLyAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gIC8vICAgICAgICAgICAgIHZhcmlhbnQ9XCJvdXRsaW5lXCJcbiAgLy8gICAgICAgICAgICAgdmFsdWU9e3VzZXJMaW5rSWR9XG4gIC8vICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZXZlbnQpID0+IHtcbiAgLy8gICAgICAgICAgICAgICBoYW5kbGVVc2VyTGlua0lkQ2hhbmdlKGV2ZW50LnRhcmdldC52YWx1ZSk7XG4gIC8vICAgICAgICAgICAgIH19XG4gIC8vICAgICAgICAgICAgIHJlcXVpcmVkXG4gIC8vICAgICAgICAgICAvPlxuICAvLyAgICAgICAgIDwvSW5wdXRHcm91cD5cbiAgLy8gICAgICAgPC9Gb3JtQ29udHJvbD5cbiAgLy8gICAgICAgPFBvcG92ZXI+XG4gIC8vICAgICAgICAgPFBvcG92ZXJUcmlnZ2VyPlxuICAvLyAgICAgICAgICAgPEljb25CdXR0b24gYXJpYS1sYWJlbD1cImhlbHBcIiBpY29uPXs8SW5mb091dGxpbmVJY29uIC8+fSAvPlxuICAvLyAgICAgICAgIDwvUG9wb3ZlclRyaWdnZXI+XG4gIC8vICAgICAgICAgPFBvcG92ZXJDb250ZW50PlxuICAvLyAgICAgICAgICAgPFBvcG92ZXJBcnJvdyAvPlxuICAvLyAgICAgICAgICAgPFBvcG92ZXJDbG9zZUJ1dHRvbiAvPlxuICAvLyAgICAgICAgICAgPFBvcG92ZXJCb2R5PntoZWxwQ29udGVudH08L1BvcG92ZXJCb2R5PlxuICAvLyAgICAgICAgIDwvUG9wb3ZlckNvbnRlbnQ+XG4gIC8vICAgICAgIDwvUG9wb3Zlcj5cbiAgLy8gICAgICAgPEZpbmRlclBvcG92ZXJcbiAgLy8gICAgICAgICBsaW5rPXtkZWVwLmxpbmtJZH1cbiAgLy8gICAgICAgICBvblN1Ym1pdD17YXN5bmMgKGxpbmspID0+IHtcbiAgLy8gICAgICAgICAgIGhhbmRsZVVzZXJMaW5rSWRDaGFuZ2UobGluay5pZCk7XG4gIC8vICAgICAgICAgfX1cbiAgLy8gICAgICAgPlxuICAvLyAgICAgICAgIDxJY29uQnV0dG9uIGFyaWEtbGFiZWw9XCJmaW5kZXJcIiBpY29uPXs8PvCfqqw8Lz59IC8+XG4gIC8vICAgICAgIDwvRmluZGVyUG9wb3Zlcj5cbiAgLy8gICAgIDwvSFN0YWNrPlxuICAvLyAgICk7XG4gIC8vIH1cblxuICBmdW5jdGlvbiBBcGlLZXlUZXh0RmllbGQob3B0aW9uczogeyBlcnJvcjogc3RyaW5nOyByZWdpc3RlcjogRnVuY3Rpb24gfSkge1xuICAgIGNvbnN0IHsgZXJyb3IsIHJlZ2lzdGVyIH0gPSBvcHRpb25zO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxIU3RhY2s+XG4gICAgICAgIDxGb3JtQ29udHJvbCBpc0ludmFsaWQ9e2Vycm9yfT5cbiAgICAgICAgICA8Rm9ybUxhYmVsIGh0bWxGb3I9XCJhcGlLZXlcIj5BcGlLZXkgTGluayBJRDwvRm9ybUxhYmVsPlxuICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgey4uLnJlZ2lzdGVyKFwiYXBpS2V5XCIsIHtcbiAgICAgICAgICAgICAgcmVxdWlyZWQ6IFwiQXBpIEtleSBpcyByZXF1aXJlZFwiLFxuICAgICAgICAgICAgfSl9XG4gICAgICAgICAgLz5cbiAgICAgICAgICA8Rm9ybUVycm9yTWVzc2FnZT57ZXJyb3J9PC9Gb3JtRXJyb3JNZXNzYWdlPlxuICAgICAgICAgIDxGb3JtSGVscGVyVGV4dD5cbiAgICAgICAgICAgIDxTdGFjaz5cbiAgICAgICAgICAgICAgPFRleHQ+XG4gICAgICAgICAgICAgICAgQXBpIEtleSBpcyByZXF1aXJlZCB0byBtYWtlIHJlcXVlc3RzIHRvIG9wZW5haSBvbiB5b3VyIGJlaGFsZlxuICAgICAgICAgICAgICA8L1RleHQ+XG4gICAgICAgICAgICAgIDxMaW5rXG4gICAgICAgICAgICAgICAgaXNFeHRlcm5hbFxuICAgICAgICAgICAgICAgIGhyZWY9XCJodHRwczovL3BsYXRmb3JtLm9wZW5haS5jb20vYXBpLWtleXNcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgT2J0YWluIEFwaSBLZXlcbiAgICAgICAgICAgICAgPC9MaW5rPlxuICAgICAgICAgICAgPC9TdGFjaz5cbiAgICAgICAgICA8L0Zvcm1IZWxwZXJUZXh0PlxuICAgICAgICA8L0Zvcm1Db250cm9sPlxuICAgICAgPC9IU3RhY2s+XG4gICAgKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIFVzZXJMaW5rSWRUZXh0RmllbGQob3B0aW9uczoge1xuICAgIHNldFZhbHVlOiBhbnk7XG4gICAgZXJyb3I6IHN0cmluZztcbiAgICBjb250cm9sOiBhbnk7XG4gIH0pIHtcbiAgICBjb25zdCB7IHNldFZhbHVlLCBlcnJvciwgY29udHJvbCB9ID0gb3B0aW9ucztcblxuICAgIHJldHVybiAoXG4gICAgICA8Rm9ybUNvbnRyb2wgaXNJbnZhbGlkPXtlcnJvcn0+XG4gICAgICAgIDxGb3JtTGFiZWwgaHRtbEZvcj1cInVzZXJMaW5rSWRcIj5Vc2VyIExpbmsgSUQ8L0Zvcm1MYWJlbD5cbiAgICAgICAgPENvbnRyb2xsZXJcbiAgICAgICAgICBuYW1lPVwidXNlckxpbmtJZFwiXG4gICAgICAgICAgY29udHJvbD17Y29udHJvbH1cbiAgICAgICAgICBkZWZhdWx0VmFsdWU9e3VuZGVmaW5lZH1cbiAgICAgICAgICBydWxlcz17e1xuICAgICAgICAgICAgcmVxdWlyZWQ6IHtcbiAgICAgICAgICAgICAgdmFsdWU6IHRydWUsXG4gICAgICAgICAgICAgIG1lc3NhZ2U6IFwiVXNlciBsaW5rIElEIGlzIHJlcXVpcmVkXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdmFsaWRhdGU6IGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCB2YWx1ZU51bWJlciA9IHBhcnNlSW50KHZhbHVlKTtcbiAgICAgICAgICAgICAgaWYgKGlzTmFOKHZhbHVlTnVtYmVyKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBcIlVzZXIgbGluayBJRCBtdXN0IGJlIGEgbnVtYmVyXCI7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgICAgIGRhdGE6IFtsaW5rXSxcbiAgICAgICAgICAgICAgfSA9IGF3YWl0IGRlZXAuc2VsZWN0KHsgaWQ6IHZhbHVlTnVtYmVyIH0pO1xuICAgICAgICAgICAgICBpZiAoIWxpbmspIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYExpbmsgJHt2YWx1ZU51bWJlcn0gZG9lcyBub3QgZXhpc3RgO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH19XG4gICAgICAgICAgcmVuZGVyPXsoeyBmaWVsZCB9KSA9PiAoXG4gICAgICAgICAgICA8SFN0YWNrPlxuICAgICAgICAgICAgICA8TnVtYmVySW5wdXQgey4uLmZpZWxkfSBtaW49ezB9PlxuICAgICAgICAgICAgICAgIDxOdW1iZXJJbnB1dEZpZWxkIHJlZj17ZmllbGQucmVmfSBuYW1lPXtmaWVsZC5uYW1lfSAvPlxuICAgICAgICAgICAgICA8L051bWJlcklucHV0PlxuICAgICAgICAgICAgICA8RmluZGVyUG9wb3ZlclxuICAgICAgICAgICAgICAgIGxpbms9e2RlZXAubGlua0lkfVxuICAgICAgICAgICAgICAgIG9uU3VibWl0PXthc3luYyAobGluaykgPT4ge1xuICAgICAgICAgICAgICAgICAgc2V0VmFsdWUoXCJjb250YWluZXJMaW5rSWRcIiwgbGluay5pZCk7XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxJY29uQnV0dG9uIGFyaWEtbGFiZWw9XCJmaW5kZXJcIiBpY29uPXs8PvCfqqw8Lz59IC8+XG4gICAgICAgICAgICAgIDwvRmluZGVyUG9wb3Zlcj5cbiAgICAgICAgICAgIDwvSFN0YWNrPlxuICAgICAgICAgICl9XG4gICAgICAgIC8+XG4gICAgICAgIDxGb3JtRXJyb3JNZXNzYWdlPntlcnJvcn08L0Zvcm1FcnJvck1lc3NhZ2U+XG4gICAgICAgIDxGb3JtSGVscGVyVGV4dD5cbiAgICAgICAgICBVc2VyIGxpbmsgaXMgYSBsaW5rIHRoYXQgaXMgY29uc2lkZXJlZCBhcyBhIHVzZXIgb2YgQXBpS2V5LiBVc2VyIGxpbmtcbiAgICAgICAgICB3aWxsIGJlIFwiZnJvbVwiIGZvciBVc2VzQXBpS2V5XG4gICAgICAgIDwvRm9ybUhlbHBlclRleHQ+XG4gICAgICA8L0Zvcm1Db250cm9sPlxuICAgICk7XG4gIH1cblxuICBmdW5jdGlvbiBDb250YWluZXJMaW5rSWRUZXh0RmllbGQob3B0aW9uczoge1xuICAgIHNldFZhbHVlOiBhbnk7XG4gICAgZXJyb3I6IHN0cmluZztcbiAgICBjb250cm9sOiBhbnk7XG4gIH0pIHtcbiAgICBjb25zdCB7IHNldFZhbHVlLCBlcnJvciwgY29udHJvbCB9ID0gb3B0aW9ucztcblxuICAgIGNvbnN0IGhlbHBDb250ZW50ID0gYENvbnRhaW5lciBsaW5rIGlzIGEgbGluayB0aGF0IHdpbGwgY29udGFpbiBuZXdseSBjcmVhdGVkIEFwaUtleSwgVXNlc0FwaUtleWA7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPEZvcm1Db250cm9sIGlzSW52YWxpZD17ZXJyb3J9PlxuICAgICAgICA8Rm9ybUxhYmVsIGh0bWxGb3I9XCJjb250YWluZXJMaW5rSWRcIj5Db250YWluZXIgTGluayBJRDwvRm9ybUxhYmVsPlxuICAgICAgICA8SFN0YWNrPlxuICAgICAgICAgIDxDb250cm9sbGVyXG4gICAgICAgICAgICBuYW1lPVwiY29udGFpbmVyTGlua0lkXCJcbiAgICAgICAgICAgIGNvbnRyb2w9e2NvbnRyb2x9XG4gICAgICAgICAgICBkZWZhdWx0VmFsdWU9e3VuZGVmaW5lZH1cbiAgICAgICAgICAgIHJ1bGVzPXt7XG4gICAgICAgICAgICAgIHJlcXVpcmVkOiB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHRydWUsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogXCJDb250YWluZXIgbGluayBpZCBpcyByZXF1aXJlZFwiLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB2YWxpZGF0ZTogYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWVOdW1iZXIgPSBwYXJzZUludCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKGlzTmFOKHZhbHVlTnVtYmVyKSkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiQ29udGFpbmVyIGxpbmsgaWQgbXVzdCBiZSBhIG51bWJlclwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICAgICAgICBkYXRhOiBbbGlua10sXG4gICAgICAgICAgICAgICAgfSA9IGF3YWl0IGRlZXAuc2VsZWN0KHsgaWQ6IHZhbHVlTnVtYmVyIH0pO1xuICAgICAgICAgICAgICAgIGlmICghbGluaykge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIGBMaW5rICR7dmFsdWVOdW1iZXJ9IGRvZXMgbm90IGV4aXN0YDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIHJlbmRlcj17KHsgZmllbGQgfSkgPT4gKFxuICAgICAgICAgICAgICA8TnVtYmVySW5wdXQgey4uLmZpZWxkfSBtaW49ezB9PlxuICAgICAgICAgICAgICAgIDxOdW1iZXJJbnB1dEZpZWxkIHJlZj17ZmllbGQucmVmfSBuYW1lPXtmaWVsZC5uYW1lfSAvPlxuICAgICAgICAgICAgICA8L051bWJlcklucHV0PlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAvPlxuICAgICAgICAgIDxGaW5kZXJQb3BvdmVyXG4gICAgICAgICAgICBsaW5rPXtkZWVwLmxpbmtJZH1cbiAgICAgICAgICAgIG9uU3VibWl0PXthc3luYyAobGluaykgPT4ge1xuICAgICAgICAgICAgICBzZXRWYWx1ZShcImNvbnRhaW5lckxpbmtJZFwiLCBsaW5rLmlkKTtcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgPlxuICAgICAgICAgICAgPEljb25CdXR0b24gYXJpYS1sYWJlbD1cImZpbmRlclwiIGljb249ezw+8J+qrDwvPn0gLz5cbiAgICAgICAgICA8L0ZpbmRlclBvcG92ZXI+XG4gICAgICAgIDwvSFN0YWNrPlxuICAgICAgICA8Rm9ybUVycm9yTWVzc2FnZT57ZXJyb3J9PC9Gb3JtRXJyb3JNZXNzYWdlPlxuICAgICAgICA8Rm9ybUhlbHBlclRleHQ+XG4gICAgICAgICAgQ29udGFpbmVyIGxpbmsgaXMgYSBsaW5rIHRoYXQgd2lsbCBjb250YWluIG5ld2x5IGNyZWF0ZWQgQXBpS2V5LFxuICAgICAgICAgIFVzZXNBcGlLZXlcbiAgICAgICAgPC9Gb3JtSGVscGVyVGV4dD5cbiAgICAgIDwvRm9ybUNvbnRyb2w+XG4gICAgKTtcbiAgfVxufTtcbiJdfQ==",
        "link_id": 1268
      }
    },
    {
      "id": 1269,
      "type_id": 3,
      "from_id": 1211,
      "to_id": 1268,
      "value": {
        "id": 479,
        "value": "generated",
        "link_id": 1269
      }
    },
    {
      "id": 1270,
      "type_id": 143,
      "from_id": 1268,
      "to_id": 1211
    },
    {
      "id": 1271,
      "type_id": 3,
      "from_id": 1211,
      "to_id": 1270
    },
    {
      "id": 1301,
      "type_id": 1187,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 507,
        "value": "gpt-4-32k",
        "link_id": 1301
      }
    },
    {
      "id": 1306,
      "type_id": 1221,
      "from_id": 1304,
      "to_id": 1297
    },
    {
      "id": 1307,
      "type_id": 1187,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 509,
        "value": "gpt-4-128k",
        "link_id": 1307
      }
    },
    {
      "id": 1308,
      "type_id": 1100,
      "from_id": 1307,
      "to_id": 1307,
      "value": {
        "id": 3,
        "value": 128000,
        "link_id": 1308
      }
    },
    {
      "id": 1405,
      "type_id": 1,
      "from_id": 1403,
      "to_id": 1223
    },
    {
      "id": 1406,
      "type_id": 4,
      "from_id": 1402,
      "to_id": 5
    },
    {
      "id": 1411,
      "type_id": 2,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 546,
        "value": "@deep-foundation/chatgpt-azure-templates",
        "link_id": 1411
      }
    },
    {
      "id": 1455,
      "type_id": 18,
      "from_id": 1452,
      "to_id": 1454
    },
    {
      "id": 1477,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 562,
        "value": "async ({ deep, data: { newLink, deeplinksUrl }, require }) => {\n    const axios = require('axios');\n    const router = await deep.id('@deep-foundation/telegram-bot', 'router');\n    const onTelegramInHandler = await deep.id('@deep-foundation/telegram-bot', 'onTelegramInHandler');\n    const selector = await deep.id('@deep-foundation/telegram-bot', 'botSelector');\n    const tuaimRuleSubjectSelector = await deep.id('@deep-foundation/telegram-bot', 'tuaimRuleSubjectSelector');\n    const messagingTree = await deep.id('@deep-foundation/messaging', 'messagingTree');\n    const joinTree = await deep.id('@deep-foundation/core', 'joinTree');\n\n    let { data: [token] } = await deep.select({ id: newLink.to_id });\n\n    const Route = deep.idLocal('@deep-foundation/core', 'Route');\n    const RouterStringUse = deep.idLocal('@deep-foundation/core', 'RouterStringUse');\n    const HandleRoute = deep.idLocal('@deep-foundation/core', 'HandleRoute');\n    const Contain = deep.idLocal('@deep-foundation/core', 'Contain');\n    const SelectorTree = deep.idLocal('@deep-foundation/core', 'SelectorTree');\n    const SelectorInclude = deep.idLocal('@deep-foundation/core', 'SelectorInclude');\n\n    const contain = (value, from_id) => ({\n        in: { data: {\n            type_id: Contain,\n            from_id: from_id,\n            string: { data: { value } },\n        } },\n    });\n\n    const { data: insertedLinks } = await deep.insert([\n        {\n            type_id: SelectorInclude,\n            from_id: tuaimRuleSubjectSelector,\n            to_id: newLink.from_id,\n            ...contain('ruleInclude'+newLink.from_id, tuaimRuleSubjectSelector),\n            out: { data: {\n                type_id: SelectorTree,\n                to_id: joinTree,\n                ...contain('ruleTree'+newLink.from_id, tuaimRuleSubjectSelector),\n            } },\n        },\n        {\n            type_id: SelectorInclude,\n            from_id: selector,\n            to_id: newLink.from_id,\n            ...contain('include'+newLink.from_id, selector),\n            out: { data: {\n                type_id: SelectorTree,\n                to_id: messagingTree,\n                ...contain('tree'+newLink.from_id, selector),\n            } },\n        },\n        {\n            type_id: Route,\n            ...contain('route'+newLink.from_id, router),\n            out: { data: [\n                {\n                    type_id: HandleRoute,\n                    to_id: onTelegramInHandler,\n                    ...contain('handle'+newLink.from_id, router),\n                },\n                {\n                    type_id: RouterStringUse,\n                    to_id: router,\n                    string: { data: { value: '/packages/deep-foundation/telegram-bot/'+newLink.from_id } },\n                    ...contain('use'+newLink.from_id, router),\n                },\n            ] },\n        },\n    ]);\n\n    const { data: insertedWebhook } = await axios.get(`https://api.telegram.org/bot${token?.value?.value}/setWebhook?url=${deeplinksUrl}/packages/deep-foundation/telegram-bot/${newLink.from_id}`);\n\n    return {\n        insertedLinks,\n        insertedWebhook,\n    };\n}",
        "link_id": 1477
      }
    },
    {
      "id": 1527,
      "type_id": 3,
      "from_id": 1495,
      "to_id": 1463,
      "value": {
        "id": 594,
        "value": "tuaimRuleObjectContainTree",
        "link_id": 1527
      }
    },
    {
      "id": 1528,
      "type_id": 3,
      "from_id": 1495,
      "to_id": 1462,
      "value": {
        "id": 595,
        "value": "tuaimRuleObjectContain",
        "link_id": 1528
      }
    },
    {
      "id": 1531,
      "type_id": 3,
      "from_id": 1495,
      "to_id": 1466,
      "value": {
        "id": 598,
        "value": "tuaimRuleActionSelectorInclude",
        "link_id": 1531
      }
    },
    {
      "id": 1536,
      "type_id": 3,
      "from_id": 1495,
      "to_id": 1470,
      "value": {
        "id": 603,
        "value": "onActiveDelete",
        "link_id": 1536
      }
    },
    {
      "id": 1538,
      "type_id": 3,
      "from_id": 1495,
      "to_id": 1472,
      "value": {
        "id": 605,
        "value": "onReplyInsert",
        "link_id": 1538
      }
    },
    {
      "id": 1539,
      "type_id": 3,
      "from_id": 1495,
      "to_id": 1476,
      "value": {
        "id": 606,
        "value": "onTelegramInHandler",
        "link_id": 1539
      }
    },
    {
      "id": 1540,
      "type_id": 3,
      "from_id": 1495,
      "to_id": 1475,
      "value": {
        "id": 607,
        "value": "onTelegramIn",
        "link_id": 1540
      }
    },
    {
      "id": 1541,
      "type_id": 3,
      "from_id": 1495,
      "to_id": 1478,
      "value": {
        "id": 608,
        "value": "onActiveInsertHandler",
        "link_id": 1541
      }
    },
    {
      "id": 1599,
      "type_id": 22,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 1611,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 619,
        "value": "async ({ deep, data: {\n    state,\n    bot,\n    botId,\n    userId,\n    conversationId,\n    handlerId,\n    reply,\n    message,\n} }) => {\n    if ((message?.value?.value || '').includes('DEEP_MEMORY_EXECUTE')) {\n        const codeMatch = message?.value?.value.matchAll(/```javascript([\\s\\S]*?)```/g);\n        const codes = [...codeMatch].map(c => c[1].trim());\n        for (let c in codes) {\n            const { data: [{ id: newHandlerId }] } = await deep.insert({\n                type_id: deep.idLocal('@deep-foundation/core', 'Handler'),\n                to: { data: {\n                    type_id: deep.idLocal('@deep-foundation/core', 'SyncTextFile'),\n                    string: { data: { value: `async ({ deep, sql }) => { ${codes[c]} }` } },\n                    in: { data: {\n                        type_id: deep.idLocal('@deep-foundation/core', 'Contain'),\n                        from_id: await deep.id('@deep-foundation/deepmemorybot', 'executor'),\n                    } },\n                } },\n                from_id: 83,\n                in: { data: {\n                    type_id: deep.idLocal('@deep-foundation/core', 'Contain'),\n                    from_id: await deep.id('@deep-foundation/deepmemorybot', 'executor'),\n                } },\n            });\n            bot.telegram.sendMessage(\n                await deep.name(conversationId),\n                codes[c],\n                { reply_markup: { inline_keyboard: [[\n                    {\n                        text: 'Execute',\n                        callback_data: JSON.stringify({\n                            messageId: message.id,\n                            handlerId: newHandlerId,\n                        }),\n                    },\n                ]] } },\n            );\n        }\n    }\n}",
        "link_id": 1611
      }
    },
    {
      "id": 1633,
      "type_id": 3,
      "from_id": 1616,
      "to_id": 1614,
      "value": {
        "id": 634,
        "value": "onTelegramHandle",
        "link_id": 1633
      }
    },
    {
      "id": 1636,
      "type_id": 3,
      "from_id": 1616,
      "to_id": 1610,
      "value": {
        "id": 637,
        "value": "onTelegramBotInHandler",
        "link_id": 1636
      }
    },
    {
      "id": 1637,
      "type_id": 3,
      "from_id": 1616,
      "to_id": 1609,
      "value": {
        "id": 638,
        "value": "onTelegramBotIn",
        "link_id": 1637
      }
    },
    {
      "id": 1640,
      "type_id": 3,
      "from_id": 1616,
      "to_id": 1613,
      "value": {
        "id": 641,
        "value": "inSelector",
        "link_id": 1640
      }
    },
    {
      "id": 1675,
      "type_id": 16,
      "from_id": 1613,
      "to_id": 1665
    },
    {
      "id": 1676,
      "type_id": 3,
      "from_id": 1613,
      "to_id": 1675,
      "value": {
        "id": 648,
        "value": "include1665",
        "link_id": 1676
      }
    },
    {
      "id": 1677,
      "type_id": 70,
      "from_id": 1675,
      "to_id": 1120
    },
    {
      "id": 1678,
      "type_id": 3,
      "from_id": 1613,
      "to_id": 1677,
      "value": {
        "id": 649,
        "value": "tree1665",
        "link_id": 1678
      }
    },
    {
      "id": 1680,
      "type_id": 1489,
      "from_id": 1665,
      "to_id": 1610
    },
    {
      "id": 1682,
      "type_id": 3,
      "from_id": 1613,
      "to_id": 1680,
      "value": {
        "id": 650,
        "value": "handleTelegramBotIn1665",
        "link_id": 1682
      }
    },
    {
      "id": 1685,
      "type_id": 1487,
      "from_id": 1665,
      "to_id": 1612
    },
    {
      "id": 1687,
      "type_id": 3,
      "from_id": 1613,
      "to_id": 1685,
      "value": {
        "id": 651,
        "value": "handleTelegramBotOut1665",
        "link_id": 1687
      }
    },
    {
      "id": 1689,
      "type_id": 66,
      "from_id": 1599,
      "to_id": 1616
    },
    {
      "id": 1690,
      "type_id": 3,
      "from_id": 1613,
      "to_id": 1689,
      "value": {
        "id": 653,
        "value": "executorJoin1665",
        "link_id": 1690
      }
    },
    {
      "id": 1691,
      "type_id": 1222,
      "from_id": 1600,
      "to_id": 1411
    },
    {
      "id": 1692,
      "type_id": 3,
      "from_id": 1613,
      "to_id": 1691,
      "value": {
        "id": 654,
        "value": "system1665",
        "link_id": 1692
      }
    },
    {
      "id": 5240,
      "type_id": 35,
      "from_id": 145,
      "to_id": 5236
    },
    {
      "id": 5241,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 5240,
      "value": {
        "id": 1145,
        "value": "Menu",
        "link_id": 5241
      }
    },
    {
      "id": 95,
      "type_id": 1,
      "from_id": 9,
      "to_id": 8
    },
    {
      "id": 96,
      "type_id": 4,
      "from_id": 95,
      "to_id": 5
    },
    {
      "id": 97,
      "type_id": 1,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 98,
      "type_id": 4,
      "from_id": 97,
      "to_id": 5
    },
    {
      "id": 99,
      "type_id": 1,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 5,
        "value": "Port",
        "link_id": 99
      }
    },
    {
      "id": 100,
      "type_id": 4,
      "from_id": 99,
      "to_id": 6
    },
    {
      "id": 101,
      "type_id": 48,
      "from_id": 99,
      "to_id": 8
    },
    {
      "id": 102,
      "type_id": 1,
      "from_id": 2,
      "to_id": 97
    },
    {
      "id": 103,
      "type_id": 1,
      "from_id": 2,
      "to_id": 97
    },
    {
      "id": 104,
      "type_id": 1,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 105,
      "type_id": 1,
      "from_id": 77,
      "to_id": 99
    },
    {
      "id": 106,
      "type_id": 1,
      "from_id": 104,
      "to_id": 77
    },
    {
      "id": 107,
      "type_id": 4,
      "from_id": 106,
      "to_id": 5
    },
    {
      "id": 108,
      "type_id": 48,
      "from_id": 104,
      "to_id": 35
    },
    {
      "id": 109,
      "type_id": 36,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 111,
      "type_id": 39,
      "from_id": 109,
      "to_id": 77
    },
    {
      "id": 112,
      "type_id": 39,
      "from_id": 109,
      "to_id": 104
    },
    {
      "id": 113,
      "type_id": 39,
      "from_id": 109,
      "to_id": 35
    },
    {
      "id": 114,
      "type_id": 38,
      "from_id": 109,
      "to_id": 105
    },
    {
      "id": 115,
      "type_id": 38,
      "from_id": 109,
      "to_id": 106
    },
    {
      "id": 116,
      "type_id": 37,
      "from_id": 109,
      "to_id": 108
    },
    {
      "id": 117,
      "type_id": 34,
      "from_id": 36,
      "to_id": 8
    },
    {
      "id": 133,
      "type_id": 37,
      "from_id": 129,
      "to_id": 18
    },
    {
      "id": 142,
      "type_id": 1,
      "from_id": 8,
      "to_id": 8
    },
    {
      "id": 143,
      "type_id": 1,
      "from_id": 8,
      "to_id": 8
    },
    {
      "id": 144,
      "type_id": 78,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 145,
      "type_id": 82,
      "from_id": 144,
      "to_id": 33
    },
    {
      "id": 146,
      "type_id": 1,
      "from_id": 8,
      "to_id": 8
    },
    {
      "id": 147,
      "type_id": 4,
      "from_id": 146,
      "to_id": 5
    },
    {
      "id": 148,
      "type_id": 120,
      "from_id": 40,
      "to_id": 146
    },
    {
      "id": 149,
      "type_id": 123,
      "from_id": 40,
      "to_id": 10
    },
    {
      "id": 150,
      "type_id": 123,
      "from_id": 40,
      "to_id": 11
    },
    {
      "id": 151,
      "type_id": 123,
      "from_id": 40,
      "to_id": 12
    },
    {
      "id": 152,
      "type_id": 36,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 153,
      "type_id": 38,
      "from_id": 152,
      "to_id": 35
    },
    {
      "id": 256,
      "type_id": 3,
      "from_id": 184,
      "to_id": 72,
      "value": {
        "id": 78,
        "value": "SelectorExclude",
        "link_id": 256
      }
    },
    {
      "id": 257,
      "type_id": 3,
      "from_id": 184,
      "to_id": 73,
      "value": {
        "id": 79,
        "value": "SelectorFilter",
        "link_id": 257
      }
    },
    {
      "id": 258,
      "type_id": 3,
      "from_id": 184,
      "to_id": 74,
      "value": {
        "id": 80,
        "value": "HandleSchedule",
        "link_id": 258
      }
    },
    {
      "id": 259,
      "type_id": 3,
      "from_id": 184,
      "to_id": 75,
      "value": {
        "id": 81,
        "value": "Schedule",
        "link_id": 259
      }
    },
    {
      "id": 261,
      "type_id": 3,
      "from_id": 184,
      "to_id": 77,
      "value": {
        "id": 83,
        "value": "Router",
        "link_id": 261
      }
    },
    {
      "id": 271,
      "type_id": 3,
      "from_id": 184,
      "to_id": 87,
      "value": {
        "id": 93,
        "value": "packageInstallCodeHandler",
        "link_id": 271
      }
    },
    {
      "id": 272,
      "type_id": 3,
      "from_id": 184,
      "to_id": 88,
      "value": {
        "id": 94,
        "value": "packageInstallCodeHandleInsert",
        "link_id": 272
      }
    },
    {
      "id": 295,
      "type_id": 3,
      "from_id": 184,
      "to_id": 111,
      "value": {
        "id": 117,
        "value": "routeTreeRouter",
        "link_id": 295
      }
    },
    {
      "id": 296,
      "type_id": 3,
      "from_id": 184,
      "to_id": 112,
      "value": {
        "id": 118,
        "value": "routeTreeRoute",
        "link_id": 296
      }
    },
    {
      "id": 297,
      "type_id": 3,
      "from_id": 184,
      "to_id": 113,
      "value": {
        "id": 119,
        "value": "routeTreeHandler",
        "link_id": 297
      }
    },
    {
      "id": 298,
      "type_id": 3,
      "from_id": 184,
      "to_id": 114,
      "value": {
        "id": 120,
        "value": "routeTreeRouterListening",
        "link_id": 298
      }
    },
    {
      "id": 299,
      "type_id": 3,
      "from_id": 184,
      "to_id": 115,
      "value": {
        "id": 121,
        "value": "routeTreeRouterStringUse",
        "link_id": 299
      }
    },
    {
      "id": 300,
      "type_id": 3,
      "from_id": 184,
      "to_id": 116,
      "value": {
        "id": 122,
        "value": "routeTreeHandleRoute",
        "link_id": 300
      }
    },
    {
      "id": 351,
      "type_id": 3,
      "from_id": 184,
      "to_id": 167,
      "value": {
        "id": 173,
        "value": "plv8JSSupportsCompatableHandleDelete",
        "link_id": 351
      }
    },
    {
      "id": 352,
      "type_id": 3,
      "from_id": 184,
      "to_id": 168,
      "value": {
        "id": 174,
        "value": "dockerJSSupportsCompatableHandleInsert",
        "link_id": 352
      }
    },
    {
      "id": 353,
      "type_id": 3,
      "from_id": 184,
      "to_id": 169,
      "value": {
        "id": 175,
        "value": "dockerJSSupportsCompatableHandleUpdate",
        "link_id": 353
      }
    },
    {
      "id": 354,
      "type_id": 3,
      "from_id": 184,
      "to_id": 170,
      "value": {
        "id": 176,
        "value": "dockerJSSupportsCompatableHandleDelete",
        "link_id": 354
      }
    },
    {
      "id": 355,
      "type_id": 3,
      "from_id": 184,
      "to_id": 171,
      "value": {
        "id": 177,
        "value": "dockerJSSupportsCompatableHandleSchedule",
        "link_id": 355
      }
    },
    {
      "id": 358,
      "type_id": 3,
      "from_id": 184,
      "to_id": 174,
      "value": {
        "id": 180,
        "value": "clientJSSupportsCompatableHandleClient",
        "link_id": 358
      }
    },
    {
      "id": 359,
      "type_id": 3,
      "from_id": 184,
      "to_id": 175,
      "value": {
        "id": 181,
        "value": "promiseTree",
        "link_id": 359
      }
    },
    {
      "id": 360,
      "type_id": 3,
      "from_id": 184,
      "to_id": 176,
      "value": {
        "id": 182,
        "value": "promiseTreeAny",
        "link_id": 360
      }
    },
    {
      "id": 361,
      "type_id": 3,
      "from_id": 184,
      "to_id": 177,
      "value": {
        "id": 183,
        "value": "promiseTreeThen",
        "link_id": 361
      }
    },
    {
      "id": 362,
      "type_id": 3,
      "from_id": 184,
      "to_id": 178,
      "value": {
        "id": 184,
        "value": "promiseTreePromise",
        "link_id": 362
      }
    },
    {
      "id": 363,
      "type_id": 3,
      "from_id": 184,
      "to_id": 179,
      "value": {
        "id": 185,
        "value": "promiseTreeResolved",
        "link_id": 363
      }
    },
    {
      "id": 364,
      "type_id": 3,
      "from_id": 184,
      "to_id": 180,
      "value": {
        "id": 186,
        "value": "promiseTreeRejected",
        "link_id": 364
      }
    },
    {
      "id": 565,
      "type_id": 146,
      "from_id": 553,
      "to_id": 106,
      "value": {
        "id": 215,
        "value": "🔗",
        "link_id": 565
      }
    },
    {
      "id": 592,
      "type_id": 3,
      "from_id": 553,
      "to_id": 591,
      "value": {
        "id": 242,
        "value": "SelectorTreeSymbol",
        "link_id": 592
      }
    },
    {
      "id": 604,
      "type_id": 3,
      "from_id": 553,
      "to_id": 603,
      "value": {
        "id": 254,
        "value": "PromiseResultSymbol",
        "link_id": 604
      }
    },
    {
      "id": 608,
      "type_id": 3,
      "from_id": 553,
      "to_id": 607,
      "value": {
        "id": 258,
        "value": "PackageVersionSymbol",
        "link_id": 608
      }
    },
    {
      "id": 609,
      "type_id": 146,
      "from_id": 553,
      "to_id": 45,
      "value": {
        "id": 259,
        "value": "📯",
        "link_id": 609
      }
    },
    {
      "id": 610,
      "type_id": 3,
      "from_id": 553,
      "to_id": 609,
      "value": {
        "id": 260,
        "value": "PackageActiveSymbol",
        "link_id": 610
      }
    },
    {
      "id": 611,
      "type_id": 146,
      "from_id": 553,
      "to_id": 43,
      "value": {
        "id": 261,
        "value": "🎁",
        "link_id": 611
      }
    },
    {
      "id": 612,
      "type_id": 3,
      "from_id": 553,
      "to_id": 611,
      "value": {
        "id": 262,
        "value": "PackageNamespaceSymbol",
        "link_id": 612
      }
    },
    {
      "id": 613,
      "type_id": 146,
      "from_id": 553,
      "to_id": 34,
      "value": {
        "id": 263,
        "value": "🌿",
        "link_id": 613
      }
    },
    {
      "id": 614,
      "type_id": 3,
      "from_id": 553,
      "to_id": 613,
      "value": {
        "id": 264,
        "value": "TreeIncludeSymbol",
        "link_id": 614
      }
    },
    {
      "id": 615,
      "type_id": 146,
      "from_id": 553,
      "to_id": 36,
      "value": {
        "id": 265,
        "value": "🌲",
        "link_id": 615
      }
    },
    {
      "id": 616,
      "type_id": 3,
      "from_id": 553,
      "to_id": 615,
      "value": {
        "id": 266,
        "value": "TreeSymbol",
        "link_id": 616
      }
    },
    {
      "id": 617,
      "type_id": 146,
      "from_id": 553,
      "to_id": 35,
      "value": {
        "id": 267,
        "value": "💡",
        "link_id": 617
      }
    },
    {
      "id": 633,
      "type_id": 146,
      "from_id": 553,
      "to_id": 17,
      "value": {
        "id": 283,
        "value": "🔥",
        "link_id": 633
      }
    },
    {
      "id": 947,
      "type_id": 35,
      "from_id": 145,
      "to_id": 946
    },
    {
      "id": 948,
      "type_id": 794,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 949,
      "type_id": 797,
      "from_id": 948,
      "to_id": 947
    },
    {
      "id": 950,
      "type_id": 2,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 402,
        "value": "@deep-foundation/finder",
        "link_id": 950
      }
    },
    {
      "id": 1076,
      "type_id": 164,
      "from_id": 1074,
      "to_id": 51
    },
    {
      "id": 1077,
      "type_id": 164,
      "from_id": 1074,
      "to_id": 50
    },
    {
      "id": 1101,
      "type_id": 4,
      "from_id": 1100,
      "to_id": 6
    },
    {
      "id": 1102,
      "type_id": 2,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 440,
        "value": "@deep-foundation/tokens",
        "link_id": 1102
      }
    },
    {
      "id": 1117,
      "type_id": 4,
      "from_id": 1116,
      "to_id": 5
    },
    {
      "id": 1135,
      "type_id": 3,
      "from_id": 1123,
      "to_id": 1120,
      "value": {
        "id": 453,
        "value": "messagingTree",
        "link_id": 1135
      }
    },
    {
      "id": 1169,
      "type_id": 3,
      "from_id": 1162,
      "to_id": 1158,
      "value": {
        "id": 463,
        "value": "MessageHandler",
        "link_id": 1169
      }
    },
    {
      "id": 1170,
      "type_id": 3,
      "from_id": 1162,
      "to_id": 1157,
      "value": {
        "id": 464,
        "value": "MessageUpdateHandlerCode",
        "link_id": 1170
      }
    },
    {
      "id": 1171,
      "type_id": 3,
      "from_id": 1162,
      "to_id": 1160,
      "value": {
        "id": 465,
        "value": "Dependency",
        "link_id": 1171
      }
    },
    {
      "id": 1212,
      "type_id": 35,
      "from_id": 145,
      "to_id": 1211
    },
    {
      "id": 1213,
      "type_id": 1118,
      "from_id": 1116,
      "to_id": 8
    },
    {
      "id": 1214,
      "type_id": 49,
      "from_id": 1213,
      "to_id": 1210
    },
    {
      "id": 1215,
      "type_id": 38,
      "from_id": 1120,
      "to_id": 1213
    },
    {
      "id": 1217,
      "type_id": 1,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 1241,
      "type_id": 3,
      "from_id": 1225,
      "to_id": 1209,
      "value": {
        "id": 493,
        "value": "gpt4EncoderDependency",
        "link_id": 1241
      }
    },
    {
      "id": 1302,
      "type_id": 1100,
      "from_id": 1301,
      "to_id": 1301,
      "value": {
        "id": 1,
        "value": 32768,
        "link_id": 1302
      }
    },
    {
      "id": 1303,
      "type_id": 1221,
      "from_id": 1301,
      "to_id": 1298
    },
    {
      "id": 1304,
      "type_id": 1187,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 508,
        "value": "gpt-35-16k",
        "link_id": 1304
      }
    },
    {
      "id": 1305,
      "type_id": 1100,
      "from_id": 1304,
      "to_id": 1304,
      "value": {
        "id": 2,
        "value": 16384,
        "link_id": 1305
      }
    },
    {
      "id": 1310,
      "type_id": 1187,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 510,
        "value": "gpt-4o",
        "link_id": 1310
      }
    },
    {
      "id": 1315,
      "type_id": 1221,
      "from_id": 1313,
      "to_id": 1296
    },
    {
      "id": 1316,
      "type_id": 2,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 512,
        "value": "@deep-foundation/chatgpt-azure-deep",
        "link_id": 1316
      }
    },
    {
      "id": 1331,
      "type_id": 3,
      "from_id": 1316,
      "to_id": 1307,
      "value": {
        "id": 523,
        "value": "gpt-4-128k",
        "link_id": 1331
      }
    },
    {
      "id": 1410,
      "type_id": 49,
      "from_id": 1403,
      "to_id": 1409
    },
    {
      "id": 1462,
      "type_id": 16,
      "from_id": 1456,
      "to_id": 3
    },
    {
      "id": 1463,
      "type_id": 70,
      "from_id": 1462,
      "to_id": 40
    },
    {
      "id": 1464,
      "type_id": 15,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 1465,
      "type_id": 20,
      "from_id": 1452,
      "to_id": 1464
    },
    {
      "id": 1468,
      "type_id": 77,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 1480,
      "type_id": 146,
      "from_id": 1479,
      "to_id": 1479,
      "value": {
        "id": 563,
        "value": "🔑",
        "link_id": 1480
      }
    },
    {
      "id": 1481,
      "type_id": 4,
      "from_id": 1479,
      "to_id": 5
    },
    {
      "id": 1483,
      "type_id": 39,
      "from_id": 1120,
      "to_id": 1482
    },
    {
      "id": 1508,
      "type_id": 3,
      "from_id": 1495,
      "to_id": 1493,
      "value": {
        "id": 575,
        "value": "onActiveDeleteHandle",
        "link_id": 1508
      }
    },
    {
      "id": 1510,
      "type_id": 3,
      "from_id": 1495,
      "to_id": 1491,
      "value": {
        "id": 577,
        "value": "Active",
        "link_id": 1510
      }
    },
    {
      "id": 1511,
      "type_id": 3,
      "from_id": 1495,
      "to_id": 1480,
      "value": {
        "id": 578,
        "value": "tokenSymbol",
        "link_id": 1511
      }
    },
    {
      "id": 1512,
      "type_id": 3,
      "from_id": 1495,
      "to_id": 1481,
      "value": {
        "id": 579,
        "value": "tokenValue",
        "link_id": 1512
      }
    },
    {
      "id": 1513,
      "type_id": 3,
      "from_id": 1495,
      "to_id": 1479,
      "value": {
        "id": 580,
        "value": "Token",
        "link_id": 1513
      }
    },
    {
      "id": 119,
      "type_id": 34,
      "from_id": 36,
      "to_id": 8
    },
    {
      "id": 120,
      "type_id": 34,
      "from_id": 36,
      "to_id": 8
    },
    {
      "id": 121,
      "type_id": 34,
      "from_id": 36,
      "to_id": 8
    },
    {
      "id": 122,
      "type_id": 34,
      "from_id": 36,
      "to_id": 8
    },
    {
      "id": 123,
      "type_id": 34,
      "from_id": 36,
      "to_id": 8
    },
    {
      "id": 124,
      "type_id": 34,
      "from_id": 36,
      "to_id": 8
    },
    {
      "id": 125,
      "type_id": 23,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 126,
      "type_id": 23,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 127,
      "type_id": 23,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 128,
      "type_id": 23,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 129,
      "type_id": 36,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 130,
      "type_id": 39,
      "from_id": 129,
      "to_id": 17
    },
    {
      "id": 566,
      "type_id": 3,
      "from_id": 553,
      "to_id": 565,
      "value": {
        "id": 216,
        "value": "RouterStringUseSymbol",
        "link_id": 566
      }
    },
    {
      "id": 597,
      "type_id": 146,
      "from_id": 553,
      "to_id": 58,
      "value": {
        "id": 247,
        "value": "🔎",
        "link_id": 597
      }
    },
    {
      "id": 598,
      "type_id": 3,
      "from_id": 553,
      "to_id": 597,
      "value": {
        "id": 248,
        "value": "QuerySymbol",
        "link_id": 598
      }
    },
    {
      "id": 599,
      "type_id": 146,
      "from_id": 553,
      "to_id": 55,
      "value": {
        "id": 249,
        "value": "📌",
        "link_id": 599
      }
    },
    {
      "id": 600,
      "type_id": 3,
      "from_id": 553,
      "to_id": 599,
      "value": {
        "id": 250,
        "value": "FocusSymbol",
        "link_id": 600
      }
    },
    {
      "id": 602,
      "type_id": 3,
      "from_id": 553,
      "to_id": 601,
      "value": {
        "id": 252,
        "value": "PromiseReasonSymbol",
        "link_id": 602
      }
    },
    {
      "id": 644,
      "type_id": 3,
      "from_id": 553,
      "to_id": 643,
      "value": {
        "id": 294,
        "value": "SelectorIncludeSymbol",
        "link_id": 644
      }
    },
    {
      "id": 645,
      "type_id": 146,
      "from_id": 553,
      "to_id": 15,
      "value": {
        "id": 295,
        "value": "🪢",
        "link_id": 645
      }
    },
    {
      "id": 715,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 314,
        "value": "\nasync ({ deep, require, gql, data: { newLink } }) => {\n    const ts = require('typescript');\n  const { data: [generatedFrom] } = await deep.select({\n      type_id: await deep.id('@deep-foundation/core', 'GeneratedFrom'),\n    to_id: newLink.id, \n  });\n  const value = newLink?.value?.value;\n  let compiledString = '';\n  if (value) {\n    const result = ts.transpileModule(value, {\n      \"compilerOptions\": {\n        \"allowSyntheticDefaultImports\": true,\n        \"experimentalDecorators\": true,\n        \"inlineSourceMap\": true,\n        inlineSources: true,\n        \"noImplicitAny\": false,\n        \"removeComments\": true,\n        \"jsx\": \"react\",\n        \"module\": \"ESNext\",\n        \"moduleResolution\": \"node\",\n        \"target\": \"ESNext\",\n        \"skipLibCheck\": true,\n        \"resolveJsonModule\": true,\n        \"esModuleInterop\": true,\n        \"isolatedModules\": true\n      }\n    });\n    if (!result.outputText) {\n      throw result;\n    }\n    compiledString = result.outputText || '';\n  }\n  if (!generatedFrom) {\n      await deep.insert({\n        type_id: await deep.id('@deep-foundation/core', 'GeneratedFrom'),\n      to_id: newLink.id,\n      in: { data: {\n          type_id: await deep.id('@deep-foundation/core', 'Contain'),\n        from_id: newLink.id,\n      } },\n      from: { data: {\n          type_id: await deep.id('@deep-foundation/core', 'SyncTextFile'),\n        string: { data: { value: compiledString } },\n        in: { data: {\n            type_id: await deep.id('@deep-foundation/core', 'Contain'),\n          from_id: newLink.id,\n          string: { data: { value: 'generated' } },\n        } },\n      } },\n    });\n  } else {\n      await deep.update({\n        link_id: { _eq: generatedFrom.from_id },\n    }, {\n        value: compiledString,\n    }, { table: 'strings' });\n  }\n}\n",
        "link_id": 715
      }
    },
    {
      "id": 956,
      "type_id": 3,
      "from_id": 950,
      "to_id": 949,
      "value": {
        "id": 404,
        "value": "context",
        "link_id": 956
      }
    },
    {
      "id": 957,
      "type_id": 3,
      "from_id": 950,
      "to_id": 947,
      "value": {
        "id": 405,
        "value": "handler",
        "link_id": 957
      }
    },
    {
      "id": 958,
      "type_id": 3,
      "from_id": 950,
      "to_id": 946,
      "value": {
        "id": 406,
        "value": "tsx",
        "link_id": 958
      }
    },
    {
      "id": 959,
      "type_id": 3,
      "from_id": 950,
      "to_id": 948,
      "value": {
        "id": 407,
        "value": "Finder",
        "link_id": 959
      }
    },
    {
      "id": 1078,
      "type_id": 2,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 431,
        "value": "@konard/python-docker-isolation-provider",
        "link_id": 1078
      }
    },
    {
      "id": 1085,
      "type_id": 3,
      "from_id": 1078,
      "to_id": 1076,
      "value": {
        "id": 434,
        "value": "dockerPythonSupportsCompatableHandleDelete",
        "link_id": 1085
      }
    },
    {
      "id": 1634,
      "type_id": 3,
      "from_id": 1616,
      "to_id": 1608,
      "value": {
        "id": 635,
        "value": "onTelegramInHandler",
        "link_id": 1634
      }
    },
    {
      "id": 1145,
      "type_id": 1,
      "from_id": 8,
      "to_id": 8
    },
    {
      "id": 1233,
      "type_id": 3,
      "from_id": 1225,
      "to_id": 1218,
      "value": {
        "id": 485,
        "value": "handlleManagerClient",
        "link_id": 1233
      }
    },
    {
      "id": 1236,
      "type_id": 3,
      "from_id": 1225,
      "to_id": 1221,
      "value": {
        "id": 488,
        "value": "ProvidedBy",
        "link_id": 1236
      }
    },
    {
      "id": 1237,
      "type_id": 3,
      "from_id": 1225,
      "to_id": 1219,
      "value": {
        "id": 489,
        "value": "Endpoint",
        "link_id": 1237
      }
    },
    {
      "id": 1242,
      "type_id": 3,
      "from_id": 1225,
      "to_id": 1212,
      "value": {
        "id": 494,
        "value": "managerClientHandler",
        "link_id": 1242
      }
    },
    {
      "id": 1243,
      "type_id": 3,
      "from_id": 1225,
      "to_id": 1211,
      "value": {
        "id": 495,
        "value": "managerClientHandlerCode",
        "link_id": 1243
      }
    },
    {
      "id": 1309,
      "type_id": 1221,
      "from_id": 1307,
      "to_id": 1300
    },
    {
      "id": 1322,
      "type_id": 3,
      "from_id": 1316,
      "to_id": 1314,
      "value": {
        "id": 514,
        "value": "gpt-4-max-tokens",
        "link_id": 1322
      }
    },
    {
      "id": 1323,
      "type_id": 3,
      "from_id": 1316,
      "to_id": 1302,
      "value": {
        "id": 515,
        "value": "gpt-4-32k-max-tokens",
        "link_id": 1323
      }
    },
    {
      "id": 1338,
      "type_id": 3,
      "from_id": 1316,
      "to_id": 1298,
      "value": {
        "id": 530,
        "value": "gpt-4-32k-endpoint",
        "link_id": 1338
      }
    },
    {
      "id": 1418,
      "type_id": 3,
      "from_id": 1411,
      "to_id": 1409,
      "value": {
        "id": 549,
        "value": "TemplateHandler",
        "link_id": 1418
      }
    },
    {
      "id": 1419,
      "type_id": 3,
      "from_id": 1411,
      "to_id": 1404,
      "value": {
        "id": 550,
        "value": "Result",
        "link_id": 1419
      }
    },
    {
      "id": 1420,
      "type_id": 3,
      "from_id": 1411,
      "to_id": 1405,
      "value": {
        "id": 551,
        "value": "Continue",
        "link_id": 1420
      }
    },
    {
      "id": 1421,
      "type_id": 3,
      "from_id": 1411,
      "to_id": 1403,
      "value": {
        "id": 552,
        "value": "Apply",
        "link_id": 1421
      }
    },
    {
      "id": 1422,
      "type_id": 3,
      "from_id": 1411,
      "to_id": 1406,
      "value": {
        "id": 553,
        "value": "TemplateString",
        "link_id": 1422
      }
    },
    {
      "id": 1423,
      "type_id": 3,
      "from_id": 1411,
      "to_id": 1402,
      "value": {
        "id": 554,
        "value": "Template",
        "link_id": 1423
      }
    },
    {
      "id": 1469,
      "type_id": 105,
      "from_id": 1468,
      "to_id": 1004
    },
    {
      "id": 1470,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 559,
        "value": "async ({ deep, data: { oldLink }, require }) => {\n    const axios = require('axios');\n    const router = await deep.id('@deep-foundation/telegram-bot', 'router');\n    const onTelegramInHandler = await deep.id('@deep-foundation/telegram-bot', 'onTelegramInHandler');\n\n    const containTree = deep.idLocal('@deep-foundation/core', 'containTree');\n    const Contain = deep.idLocal('@deep-foundation/core', 'Contain');\n\n    const { data: deletedLinks } = await deep.delete({\n        up: {\n            tree_id: containTree,\n            parent: {\n                type_id: Contain,\n                string: { value: { _in: [\n                    'route'+oldLink.from_id,\n                    'handle'+oldLink.from_id,\n                    'use'+oldLink.from_id,\n                    'include'+oldLink.from_id,\n                    'tree'+oldLink.from_id,\n                    'ruleInclude'+oldLink.from_id,\n                    'ruleTree'+oldLink.from_id,\n                ] } },\n            },\n        },\n    });\n\n    const { data: deletedWebhook } = await axios.get(`https://api.telegram.org/bot${token?.value?.value}/deleteWebhook`);\n\n    return {\n        deletedLinks,\n        deletedWebhook\n    };\n}",
        "link_id": 1470
      }
    },
    {
      "id": 1479,
      "type_id": 1,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 794,
      "type_id": 1,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 795,
      "type_id": 1,
      "from_id": 8,
      "to_id": 58
    },
    {
      "id": 1514,
      "type_id": 3,
      "from_id": 1495,
      "to_id": 1483,
      "value": {
        "id": 581,
        "value": "messagingTreeIncludeConversation",
        "link_id": 1514
      }
    },
    {
      "id": 1515,
      "type_id": 3,
      "from_id": 1495,
      "to_id": 1482,
      "value": {
        "id": 582,
        "value": "Conversation",
        "link_id": 1515
      }
    },
    {
      "id": 1516,
      "type_id": 3,
      "from_id": 1495,
      "to_id": 1455,
      "value": {
        "id": 583,
        "value": "tuaimRuleSubject",
        "link_id": 1516
      }
    },
    {
      "id": 1517,
      "type_id": 3,
      "from_id": 1495,
      "to_id": 1457,
      "value": {
        "id": 584,
        "value": "tuaimRuleObject",
        "link_id": 1517
      }
    },
    {
      "id": 1518,
      "type_id": 3,
      "from_id": 1495,
      "to_id": 1465,
      "value": {
        "id": 585,
        "value": "tuaimRuleAction",
        "link_id": 1518
      }
    },
    {
      "id": 1523,
      "type_id": 3,
      "from_id": 1495,
      "to_id": 1459,
      "value": {
        "id": 590,
        "value": "tuaimRuleObjectMessageTree",
        "link_id": 1523
      }
    },
    {
      "id": 1537,
      "type_id": 3,
      "from_id": 1495,
      "to_id": 1473,
      "value": {
        "id": 604,
        "value": "onReplyInsertHandler",
        "link_id": 1537
      }
    },
    {
      "id": 1596,
      "type_id": 1,
      "from_id": 1484,
      "to_id": 1484
    },
    {
      "id": 1612,
      "type_id": 35,
      "from_id": 83,
      "to_id": 1611
    },
    {
      "id": 1615,
      "type_id": 1402,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 620,
        "value": "${await (async () => {\n    const message = (await deep.select(linkId))?.data?.[0];\n    console.log('TEMPLATE', { message, linkId, value: message?.value?.value });\n    const user = message ? (await deep.select({\n        type_id: deep.idLocal('@deep-foundation/core', 'User'),\n        out: {\n            type_id: deep.idLocal('@deep-foundation/core', 'Contain'),\n            to_id: message?.id,\n        },\n    }))?.data?.[0] : undefined;\n    return `\n${user ? `\nuser: ${JSON.stringify(user)}\nname: ${await deep.name(user?.id)}\n` : ''}\nmessage: ${message?.value?.value}\n    `;\n})()}",
        "link_id": 1615
      }
    },
    {
      "id": 1616,
      "type_id": 2,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 621,
        "value": "@deep-foundation/deepmemorybot",
        "link_id": 1616
      }
    },
    {
      "id": 4621,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1030,
        "value": "({ deep, data, require, go }) => {\n    const React = require('react');\n    const c = require('@chakra-ui/react');\n    const dpl = '@deep-foundation/perception-links';\n    const dc = '@deep-foundation/core';\n    return ({ go, linkId, containerId, disclosure: _disclosure, isActive, }, ref) => {\n        if (!linkId)\n            throw new Error('!linkId');\n        const __disclosure = c.useDisclosure();\n        const disclosure = _disclosure || __disclosure;\n        return React.createElement(go.On, { do: {\n                'exec': () => disclosure.onOpen(),\n            } },\n            React.createElement(c.Button, { ref: ref, variant: isActive ? 'active' : undefined, justifyContent: 'center', position: 'relative', onClick: () => go.do('exec') },\n                React.createElement(c.Box, { position: 'absolute', right: 1, top: 1 }, true ? '🔓' : '🔒'),\n                React.createElement(c.Text, { pr: 1 }, \"x\"),\n                \" delete\"),\n            React.createElement(go.Component, { path: [dpl, 'LinkDeleteModal'], disclosure: disclosure, linkId: linkId, containerId: containerId }));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxDQUFDLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRTtJQUM5QixNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDL0IsTUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLGtCQUFrQixDQUFDLENBQUM7SUFFdEMsTUFBTSxHQUFHLEdBQUcsbUNBQW1DLENBQUM7SUFDaEQsTUFBTSxFQUFFLEdBQUcsdUJBQXVCLENBQUM7SUFFbkMsT0FBTyxDQUFDLEVBQ04sRUFBRSxFQUVGLE1BQU0sRUFDTixXQUFXLEVBRVgsVUFBVSxFQUFFLFdBQVcsRUFDdkIsUUFBUSxHQUNULEVBQUUsR0FBRyxFQUFFLEVBQUU7UUFDUixJQUFJLENBQUMsTUFBTTtZQUFFLE1BQU0sSUFBSSxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUM7UUFFeEMsTUFBTSxZQUFZLEdBQUcsQ0FBQyxDQUFDLGFBQWEsRUFBRSxDQUFDO1FBQ3ZDLE1BQU0sVUFBVSxHQUFHLFdBQVcsSUFBSSxZQUFZLENBQUM7UUFFL0MsT0FBTyxvQkFBQyxFQUFFLENBQUMsRUFBRSxJQUFDLEVBQUUsRUFBRTtnQkFDaEIsTUFBTSxFQUFFLEdBQUcsRUFBRSxDQUFDLFVBQVUsQ0FBQyxNQUFNLEVBQUU7YUFDbEM7WUFDQyxvQkFBQyxDQUFDLENBQUMsTUFBTSxJQUNQLEdBQUcsRUFBRSxHQUFHLEVBQ1IsT0FBTyxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQUUsY0FBYyxFQUFDLFFBQVEsRUFBQyxRQUFRLEVBQUMsVUFBVSxFQUNyRixPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUM7Z0JBRTVCLG9CQUFDLENBQUMsQ0FBQyxHQUFHLElBQUMsUUFBUSxFQUFDLFVBQVUsRUFBQyxLQUFLLEVBQUUsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLElBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBUztnQkFDekUsb0JBQUMsQ0FBQyxDQUFDLElBQUksSUFBQyxFQUFFLEVBQUUsQ0FBQyxRQUFZOzBCQUNoQjtZQUNYLG9CQUFDLEVBQUUsQ0FBQyxTQUFTLElBQUMsSUFBSSxFQUFFLENBQUMsR0FBRyxFQUFFLGlCQUFpQixDQUFDLEVBQUUsVUFBVSxFQUFFLFVBQVUsRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLFdBQVcsRUFBRSxXQUFXLEdBQUcsQ0FDckcsQ0FBQztJQUNqQixDQUFDLENBQUM7QUFDSixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIoeyBkZWVwLCBkYXRhLCByZXF1aXJlLCBnbyB9KSA9PiB7XG4gIGNvbnN0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbiAgY29uc3QgYyA9IHJlcXVpcmUoJ0BjaGFrcmEtdWkvcmVhY3QnKTtcblxuICBjb25zdCBkcGwgPSAnQGRlZXAtZm91bmRhdGlvbi9wZXJjZXB0aW9uLWxpbmtzJztcbiAgY29uc3QgZGMgPSAnQGRlZXAtZm91bmRhdGlvbi9jb3JlJztcblxuICByZXR1cm4gKHtcbiAgICBnbyxcblxuICAgIGxpbmtJZCxcbiAgICBjb250YWluZXJJZCxcblxuICAgIGRpc2Nsb3N1cmU6IF9kaXNjbG9zdXJlLFxuICAgIGlzQWN0aXZlLFxuICB9LCByZWYpID0+IHtcbiAgICBpZiAoIWxpbmtJZCkgdGhyb3cgbmV3IEVycm9yKCchbGlua0lkJyk7XG5cbiAgICBjb25zdCBfX2Rpc2Nsb3N1cmUgPSBjLnVzZURpc2Nsb3N1cmUoKTtcbiAgICBjb25zdCBkaXNjbG9zdXJlID0gX2Rpc2Nsb3N1cmUgfHwgX19kaXNjbG9zdXJlO1xuXG4gICAgcmV0dXJuIDxnby5PbiBkbz17e1xuICAgICAgJ2V4ZWMnOiAoKSA9PiBkaXNjbG9zdXJlLm9uT3BlbigpLFxuICAgIH19PlxuICAgICAgPGMuQnV0dG9uXG4gICAgICAgIHJlZj17cmVmfVxuICAgICAgICB2YXJpYW50PXtpc0FjdGl2ZSA/ICdhY3RpdmUnIDogdW5kZWZpbmVkfSBqdXN0aWZ5Q29udGVudD0nY2VudGVyJyBwb3NpdGlvbj0ncmVsYXRpdmUnXG4gICAgICAgIG9uQ2xpY2s9eygpID0+IGdvLmRvKCdleGVjJyl9XG4gICAgICA+XG4gICAgICAgIDxjLkJveCBwb3NpdGlvbj0nYWJzb2x1dGUnIHJpZ2h0PXsxfSB0b3A9ezF9Pnt0cnVlID8gJ/CflJMnIDogJ/CflJInfTwvYy5Cb3g+XG4gICAgICAgIDxjLlRleHQgcHI9ezF9Png8L2MuVGV4dD4gZGVsZXRlXG4gICAgICA8L2MuQnV0dG9uPlxuICAgICAgPGdvLkNvbXBvbmVudCBwYXRoPXtbZHBsLCAnTGlua0RlbGV0ZU1vZGFsJ119IGRpc2Nsb3N1cmU9e2Rpc2Nsb3N1cmV9IGxpbmtJZD17bGlua0lkfSBjb250YWluZXJJZD17Y29udGFpbmVySWR9Lz5cbiAgICA8L2dvLlByb3ZpZGVyPjtcbiAgfTtcbn0iXX0=",
        "link_id": 4621
      }
    },
    {
      "id": 4622,
      "type_id": 3,
      "from_id": 3983,
      "to_id": 4621,
      "value": {
        "id": 1029,
        "value": "generated",
        "link_id": 4622
      }
    },
    {
      "id": 4623,
      "type_id": 143,
      "from_id": 4621,
      "to_id": 3983
    },
    {
      "id": 4624,
      "type_id": 3,
      "from_id": 3983,
      "to_id": 4623
    },
    {
      "id": 139,
      "type_id": 78,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 140,
      "type_id": 32,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 141,
      "type_id": 82,
      "from_id": 139,
      "to_id": 140
    },
    {
      "id": 567,
      "type_id": 146,
      "from_id": 553,
      "to_id": 105,
      "value": {
        "id": 217,
        "value": "🔗",
        "link_id": 567
      }
    },
    {
      "id": 605,
      "type_id": 146,
      "from_id": 553,
      "to_id": 48,
      "value": {
        "id": 255,
        "value": "🛠",
        "link_id": 605
      }
    },
    {
      "id": 619,
      "type_id": 146,
      "from_id": 553,
      "to_id": 57,
      "value": {
        "id": 269,
        "value": "💽",
        "link_id": 619
      }
    },
    {
      "id": 1086,
      "type_id": 3,
      "from_id": 1078,
      "to_id": 1077,
      "value": {
        "id": 435,
        "value": "dockerPythonSupportsCompatableHandleUpdate",
        "link_id": 1086
      }
    },
    {
      "id": 1246,
      "type_id": 3,
      "from_id": 1225,
      "to_id": 1213,
      "value": {
        "id": 498,
        "value": "Reply",
        "link_id": 1246
      }
    },
    {
      "id": 1313,
      "type_id": 1187,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 511,
        "value": "gpt-4",
        "link_id": 1313
      }
    },
    {
      "id": 1314,
      "type_id": 1100,
      "from_id": 1313,
      "to_id": 1313,
      "value": {
        "id": 5,
        "value": 8192,
        "link_id": 1314
      }
    },
    {
      "id": 1360,
      "type_id": 1,
      "from_id": 8,
      "to_id": 8
    },
    {
      "id": 1424,
      "type_id": 3,
      "from_id": 1411,
      "to_id": 1407,
      "value": {
        "id": 555,
        "value": "DependsPackageChatgptFree",
        "link_id": 1424
      }
    },
    {
      "id": 1425,
      "type_id": 3,
      "from_id": 1411,
      "to_id": 1408,
      "value": {
        "id": 556,
        "value": "TemplateHandlerCode",
        "link_id": 1425
      }
    },
    {
      "id": 1473,
      "type_id": 35,
      "from_id": 83,
      "to_id": 1472
    },
    {
      "id": 1474,
      "type_id": 49,
      "from_id": 1453,
      "to_id": 1473
    },
    {
      "id": 1475,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 561,
        "value": "async (req, res, next, { deep, require, data: { baseUrl, originalUrl, path } }) => {\n    const { DeepClient } = await import('@deep-foundation/deeplinks/imports/client.js');\n\n    const User = deep.idLocal('@deep-foundation/core', 'User');\n    const Join = deep.idLocal('@deep-foundation/core', 'Join');\n    const Contain = deep.idLocal('@deep-foundation/core', 'Contain');\n    const Message = await deep.id('@deep-foundation/messaging', 'Message');\n    const Reply = await deep.id('@deep-foundation/messaging', 'Reply');\n    const Conversation = await deep.id('@deep-foundation/telegram-bot', 'Conversation');\n\n    const HandleTelegramBotIn = await deep.id('@deep-foundation/telegram-bot', 'HandleTelegramBotIn');\n\n    const m = req?.body?.message || req?.body?.callback_query?.message;\n    const _message_id = m?.message_id;\n    const _date = m?.date;\n    const _message = m?.text;\n    const _voice = m?.voice;\n    const _audio = m?.audio;\n    const _userId = m?.from?.id;\n    const _is_bot = m?.from?.is_bot;\n    const _username = m?.from?.username;\n    const _conversationId = m?.chat?.id;\n    const _replyId = m?.reply_to_message?.message_id;\n\n    const botId = +baseUrl.split('/').slice(-1)[0];\n    \n    // found or insert user based on telegram nick\n    let userId;\n    userId = (await deep.select({\n        type_id: User,\n        in: {\n            type_id: Contain, from_id: botId,\n            string: { value: `${_userId}` },\n        },\n    }))?.data?.[0]?.id;\n    if (!userId) {\n        userId = (await deep.insert({\n            type_id: User,\n            out: { data: [\n                {\n                    type_id: Join,\n                    to_id: await deep.id('deep', 'users'),\n                },\n                {\n                    type_id: Join,\n                    to_id: botId,\n                },\n            ] },\n            in: { data: {\n                type_id: Contain, from_id: botId,\n                string: { data: { value: `${_userId}` } }, // telegram nick\n            } },\n        }))?.data?.[0]?.id;\n    }\n\n    const udeep = new DeepClient({ deep, ...(await deep.jwt({ linkId: userId })) });\n\n    // found or insert user based on telegram nick\n    let conversationId;\n    conversationId = (await deep.select({\n        type_id: Conversation,\n        in: {\n            type_id: Contain, from_id: userId,\n            string: { value: `${_conversationId}` },\n        },\n    }))?.data?.[0]?.id;\n    if (!conversationId) {\n        conversationId = (await deep.insert({\n            type_id: Conversation,\n            in: { data: {\n                type_id: Contain, from_id: userId,\n                string: { data: { value: `${_conversationId}` } }, // telegram conversation id\n            } },\n            out: { data: {\n                type_id: Reply,\n                to_id: botId,\n                in: { data: {\n                    type_id: Contain, from_id: userId,\n                } },\n            } },\n        }))?.data?.[0]?.id;\n    }\n\n    const { data: handles } = await deep.select({\n        type_id: HandleTelegramBotIn,\n        from_id: botId,\n        order_by: { id: 'asc' },\n    });\n\n    const state = {\n        defaultHandling: true,\n    };\n    const handled = {};\n    for (let h in handles) {\n        const packageId = (await deep.select({\n            out: { type_id: Contain, to_id: handles[h].to_id },\n        }))?.data?.[0]?.id;\n        if (!packageId) {\n            handled[handles[h].to_id] = { error: `!packageId by handler(${handles[h].to_id}).in(Contain).from` };\n            continue;\n        }\n        const hdeep = new deep.DeepClient({\n            deep, ...(await deep.jwt({ linkId: packageId }))\n        });\n        handled[handles[h].to_id] = await hdeep.eval({\n            linkId: botId,\n            handlerId: handles[h].to_id,\n            input: {\n                data: {\n                    state,\n                    req, res,\n                    botId,\n                    userId,\n                    conversationId,\n                    handlerId: handles[h].to_id,\n                    udeep,\n                },\n            },\n        });\n    }\n\n    if (state.defaultHandling) {\n        // found or insert user based on telegram nick\n        let replyId = conversationId; // if not exists, then convers\n        if (_replyId) replyId = (await deep.select({ \n            type_id: Contain,\n            string: { value: `${_replyId}` },\n        }))?.data?.[0]?.to_id;\n        const messageInserted = await udeep.insert({\n            type_id: Message,\n            string: { data: { value: _message } },\n            in: { data: {\n                type_id: Contain, from_id: userId,\n                string: { data: { value: `${_message_id}` } },\n            } },\n            out: { data: {\n                type_id: Reply,\n                to_id: replyId,\n                in: { data: {\n                    type_id: Contain, from_id: userId,\n                } },\n            } },\n        });\n        const { data: messageId } = messageInserted;\n        res.send(JSON.stringify({\n            userId,\n            conversationId,\n            messageId,\n        }));\n    }\n}",
        "link_id": 1475
      }
    },
    {
      "id": 1476,
      "type_id": 35,
      "from_id": 83,
      "to_id": 1475
    },
    {
      "id": 1478,
      "type_id": 35,
      "from_id": 83,
      "to_id": 1477
    },
    {
      "id": 1482,
      "type_id": 1,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 1520,
      "type_id": 3,
      "from_id": 1495,
      "to_id": 1474,
      "value": {
        "id": 587,
        "value": "onReplyInsertHandle",
        "link_id": 1520
      }
    },
    {
      "id": 1521,
      "type_id": 3,
      "from_id": 1495,
      "to_id": 1453,
      "value": {
        "id": 588,
        "value": "botSelector",
        "link_id": 1521
      }
    },
    {
      "id": 732,
      "type_id": 3,
      "from_id": 721,
      "to_id": 717,
      "value": {
        "id": 324,
        "value": "TSX",
        "link_id": 732
      }
    },
    {
      "id": 746,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 327,
        "value": "async ({ deep, gql, data: { triggeredByLinkId, newLink } }) => {\n  const deepFileName = 'deep.json';\n  const fs = await deep.import('fs');\n\n  const makeTempDirectory = async () => {\n    const os = await deep.import('os');\n    const { v4: uuid } = await deep.import('uuid');\n    \n    const baseTempDirectory = os.tmpdir();\n    const randomId = uuid();\n    const tempDirectory = [baseTempDirectory,randomId].join('/');\n    fs.mkdirSync(tempDirectory);\n    console.log(tempDirectory);\n    return tempDirectory;\n  };\n  const npmInstall = async (packageName, tempDirectory) => {\n    const execSync = (await deep.import('child_process')).execSync;\n\n    const command = `npm --prefix \"${tempDirectory}\" i ${packageName}`;\n    const output = execSync(command, { \n        encoding: 'utf-8',\n        cwd: tempDirectory\n    });\n    console.log(`${command}\\n`, output);\n    return output;\n  };\n  const npmLogin = async (token, tempDirectory) => {\n    const execSync = (await deep.import('child_process')).execSync;\n  \n    const command = `npm set \"//registry.npmjs.org/:_authToken\" ${token}`;\n    const output = execSync(command, { \n        encoding: 'utf-8',\n        cwd: tempDirectory\n    });\n    console.log(`${command}\\n`, output);\n    return output;\n  };\n  const makePackagePath = (tempDirectory, packageName) => [tempDirectory, 'node_modules', packageName].join('/');\n  const makeDeepJsonPath = (packagePath) => [packagePath, deepFileName].join('/');\n  const makePackageJsonPath = (packagePath) => [packagePath, 'package.json'].join('/');\n  const loadNpmToken = async () => {\n    const containTreeId = await deep.id('@deep-foundation/core', 'containTree');\n    const tokenTypeId = await deep.id('@deep-foundation/npm-packager', 'Token');\n    const { data: [{ value: { value: npmToken = undefined } = {}} = {}] = []} = await deep.select({\n      up: {\n        tree_id: { _eq: containTreeId },\n        parent: { id: { _eq: triggeredByLinkId } },\n        link: { type_id: { _eq: tokenTypeId } }\n      }\n    });\n    return npmToken;\n  };\n  const deepImport = async (deepJson, packageJson) => {\n    if (deepJson.package.name !== packageJson.name) {\n      throw new Error(`Package name is not synchronized between ${deepFileName} and package.json files.\n  ${deepFileName} package name: ${deepJson.package.name}.\n  package.json package name: ${packageJson.name}.`);\n    }\n    if (deepJson.package.version !== packageJson.version) {\n      throw new Error(`Package version is not synchronized between ${deepFileName} and package.json files.\n  ${deepFileName} package version: ${deepJson.package.version}.\n  package.json package version: ${packageJson.version}.`);\n    }\n    const packager = new (await deep.import('@deep-foundation/deeplinks/imports/packager.js')).Packager(deep);\n    const imported = await packager.import(deepJson);\n    console.log(imported);\n    if (imported?.errors?.length) throw imported;\n    return imported;\n  };\n  const getDeepPackagesList = async (rootPath) => {\n    const execSync = (await deep.import('child_process')).execSync;\n\n    const deepFileName = 'deep.json';\n    const deepFileNameLength = deepFileName.length;\n\n    const command = `find . -name ${deepFileName}`;\n    const output = execSync(command, { \n        encoding: 'utf-8',\n        cwd: rootPath\n    });\n    console.log('', `${command}\\n`, output);\n\n    const packages = output\n      .split(/\\r?\\n/)\n      .filter(line => line.trim())\n      .map(line => line.slice(2).slice(0, -deepFileNameLength - 1))\n      .map(line => line.split('/node_modules/'));\n    return packages;\n  };\n  const getDeepPackagesDependencies = async (rootPath, packages, packageName) => {\n    const dictionary = {};\n    for (const pkg of packages) {\n      const packagePath = [rootPath, pkg.join('/node_modules/')].join('/');\n      console.log('packagePath', packagePath);\n      const packageJsonPath = makePackageJsonPath(packagePath);\n      console.log('packageJsonPath', packageJsonPath);\n      if (!fs.existsSync(packageJsonPath)) {\n        throw new Error(`package.json for dependency ${pkg} is not found at ${packageJsonPath}. Looks like ${packageName} does not contain ${pkg} dependency in package.json.`);\n      }\n      const packageJson = await deep.import(packageJsonPath);\n      console.log('packageJson', packageJson);\n      const deepJsonPath = makeDeepJsonPath(packagePath);\n      console.log('deepJsonPath', deepJsonPath);\n      if (!fs.existsSync(deepJsonPath)) {\n        throw new Error(`deep.json for dependency ${pkg} is not found at ${deepJsonPath}. Looks like ${pkg} installed, but it does not contain deep.json. Make sure ${pkg} is a deep package.`);\n      }\n      const deepJson = await deep.import(deepJsonPath);\n      console.log('deepJson', deepJson);\n      const dependencies = packageJson.dependencies ?? {};\n      console.log('dependencies', dependencies);\n      const dependencyPackageName = pkg.at(-1);\n      console.log('dependencyPackageName', dependencyPackageName);\n      if (dictionary[dependencyPackageName]) {\n        if (packageJson.version === dictionary[dependencyPackageName].packageJson.version) {\n          console.log(`${dependencyPackageName}@${packageJson.version} was already added to a list of dependencies, no need to add it again.`)\n          continue;\n        } else {\n          throw new Error(`Multiple versions of the same package are not supported yet.\n${dependencyPackageName}@${dictionary[dependencyPackageName].packageJson.version} was already added to a list of dependencies from ${dictionary[dependencyPackageName].packagePath}.\nBut ${packageName} also contains ${dependencyPackageName}@${packageJson.version} dependency at ${packagePath}.`);\n        }\n      }\n      dictionary[dependencyPackageName] = { deepJson, packageJson, dependencies, packagePath };\n    }\n    for (const pkg in dictionary) {\n      const sourceDependencies = dictionary[pkg].dependencies;\n      const targetDependencies = [];\n      for (const dependency in sourceDependencies)\n      {\n        if (dictionary[dependency]) {\n          targetDependencies.push(dependency);\n        }\n      }\n      dictionary[pkg].dependencies = targetDependencies;\n    }\n    return dictionary;\n  }\n  const buildInstallationQueueCore = (deepPackagesDependencies, queue, set, packageName) => {\n    const dependencies = deepPackagesDependencies[packageName].dependencies;\n    for (const dependency of dependencies) {\n      if (!set[dependency]) {\n        buildInstallationQueueCore(deepPackagesDependencies, queue, set, dependency);\n      }\n    }\n    if(!set[packageName]) {\n      const deepJson = deepPackagesDependencies[packageName].deepJson;\n      const packageJson = deepPackagesDependencies[packageName].packageJson;\n      queue.push({ name: packageName, deepJson, packageJson });\n      set[packageName] = true;\n    }\n  }\n  const buildInstallationQueue = (deepPackagesDependencies, queue, set) => {\n    for (const packageName in deepPackagesDependencies) {\n      buildInstallationQueueCore(deepPackagesDependencies, queue, set, packageName);\n    }\n  }\n  const getExistingPackages = async (packageNames) => {\n    const packageTypeId = await deep.id('@deep-foundation/core', 'Package');\n    const packageVersionTypeId = await deep.id('@deep-foundation/core', 'PackageVersion');\n    const { data: packages } = await deep.select({\n      type_id: { _eq: packageTypeId },\n      string: { value: { _in: packageNames } }\n    }, {\n      name: 'GET_EXISTING_PACKAGES_WITH_VERSIONS',\n      returning: `\n        id\n        name: value\n        versions: in(where: {type_id: {_eq: ${packageVersionTypeId}}, string: {value: {_is_null: false}}}) {\n          id\n          version: value\n        }\n      `\n    })\n    console.log('packages', packages);\n    const existingPackages = packages.reduce(\n      (accumulator, currentValue) => {\n        const packageId = currentValue?.id;\n        const packageName = currentValue?.name?.value;\n        if (currentValue?.versions.length !== 1) {\n          throw new Error(`'${packageName}' package must have exactly one version. Now it has ${currentValue?.versions.length} versions.`);\n        }\n        if (accumulator[packageName]) {\n          throw new Error(`Multiple packages with name '${packageName}' exist.`)\n        }\n        const packageVersion = currentValue?.versions?.[0]?.version?.value;\n        accumulator[packageName] = { id: packageId, version: packageVersion };\n        return accumulator;\n      },\n      {}\n    );\n    console.log('existingPackages', existingPackages);\n    return existingPackages;\n  };\n\n  if (!triggeredByLinkId) {\n    throw new Error('Install link should be inserted using JWT token (role link), it cannot be inserted using hasura secret (role admin).');\n  }\n\n  const { data: [{ value: { value: packageQuery } }] } = await deep.select({ id: newLink.to_id });\n  const packageQueryParts = packageQuery.split('@');\n  if (packageQueryParts.length === 3) {\n    const packageVersion = packageQueryParts.pop();\n  }\n  const packageName = packageQueryParts.join('@');\n  if (!packageName) {\n    throw new Error('Package query value is empty.');\n  }\n  const tempDirectory = await makeTempDirectory();\n  let deepJson;\n  let packageJson;\n  const installationQueue = [];\n  const installationSet = {};\n  try {\n    const npmToken = await loadNpmToken();\n    if (npmToken) {\n      await npmLogin(npmToken, tempDirectory);\n    }\n    const nodeModulesPath = [tempDirectory, 'node_modules'].join('/');\n    await npmInstall(packageQuery, tempDirectory);\n    const packagePath = makePackagePath(tempDirectory, packageName);\n    const deepJsonPath = makeDeepJsonPath(packagePath);\n    const packageJsonPath = makePackageJsonPath(packagePath);\n    deepJson = await deep.import(deepJsonPath);\n    packageJson = await deep.import(packageJsonPath);\n\n    const packages = await getDeepPackagesList(nodeModulesPath);\n    console.log('packages', packages);\n    \n    const deepPackagesDependencies = await getDeepPackagesDependencies(nodeModulesPath, packages, packageName);\n    delete deepPackagesDependencies[packageName];\n    console.log('deepPackagesDependencies', deepPackagesDependencies);\n    \n    buildInstallationQueue(deepPackagesDependencies, installationQueue, installationSet);\n    \n    console.log('installationQueue', installationQueue);\n    console.log('installationSet', installationSet);\n  } finally {\n    fs.rmSync(tempDirectory, { recursive: true, force: true });\n  }\n  \n  const existingPackages = await getExistingPackages(installationQueue.map(e => e.name));\n  console.log('existingPackages', existingPackages);\n\n  for (const dependencyPackage of installationQueue) {\n    const dependencyPackageName = dependencyPackage.name;\n    const existingPackage = existingPackages[dependencyPackageName];\n    if (existingPackage) {\n      await deep.insert({\n        type_id: await deep.id('@deep-foundation/npm-packager', 'Used'),\n        from_id: newLink.id,\n        to_id: existingPackage.id,\n      });\n    } else {\n      const importedDependency = await deepImport(dependencyPackage.deepJson, dependencyPackage.packageJson);\n      if (importedDependency?.errors?.length > 0 || !importedDependency?.packageId) {\n        console.log(`Unable to install dependency ${dependencyPackageName}.`, importedDependency);\n        throw new Error(`Unable to install dependency ${dependencyPackageName}.`);\n      }\n      await deep.insert({\n        type_id: await deep.id('@deep-foundation/npm-packager', 'Installed'),\n        from_id: newLink.id,\n        to_id: importedDependency.packageId,\n      });\n      // TODO: Should it be inserted?\n      // await deep.insert({\n      //   type_id: await deep.id('@deep-foundation/core', 'Contain'),\n      //   from_id: newLink.from_id,\n      //   to_id: importedDependency.packageId,\n      // });\n    }\n  }\n\n  const imported = await deepImport(deepJson, packageJson);\n  await deep.insert({\n    type_id: await deep.id('@deep-foundation/core', 'Contain'),\n    from_id: newLink.from_id,\n    to_id: imported.packageId,\n  });\n  await deep.insert({\n    type_id: await deep.id('@deep-foundation/npm-packager', 'Installed'),\n    from_id: newLink.id,\n    to_id: imported.packageId,\n  });\n  return imported;\n}",
        "link_id": 746
      }
    },
    {
      "id": 747,
      "type_id": 35,
      "from_id": 83,
      "to_id": 746
    },
    {
      "id": 748,
      "type_id": 1,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 749,
      "type_id": 4,
      "from_id": 748,
      "to_id": 5
    },
    {
      "id": 750,
      "type_id": 1,
      "from_id": 2,
      "to_id": 97
    },
    {
      "id": 796,
      "type_id": 146,
      "from_id": 795,
      "to_id": 795,
      "value": {
        "id": 344,
        "value": "🧳",
        "link_id": 796
      }
    },
    {
      "id": 1542,
      "type_id": 3,
      "from_id": 1495,
      "to_id": 1477,
      "value": {
        "id": 609,
        "value": "onActiveInsert",
        "link_id": 1542
      }
    },
    {
      "id": 1543,
      "type_id": 3,
      "from_id": 1495,
      "to_id": 1484,
      "value": {
        "id": 610,
        "value": "Bot",
        "link_id": 1543
      }
    },
    {
      "id": 1641,
      "type_id": 3,
      "from_id": 1616,
      "to_id": 1615,
      "value": {
        "id": 642,
        "value": "template",
        "link_id": 1641
      }
    },
    {
      "id": 1733,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 663,
        "value": "async (options) => {\n    const { deep, data: { newLink: parseItLink }, } = options;\n    const { default: ts } = await import(\"typescript\");\n    const { default: util } = await import(\"util\");\n    try {\n        const result = await main();\n        return {\n            result: util.inspect(result),\n        };\n    }\n    catch (error) {\n        throw {\n            error: util.inspect(error),\n        };\n    }\n    async function main() {\n        const { data: [rootLink], } = await deep.select({\n            id: parseItLink.from_id,\n        });\n        if (!rootLink) {\n            throw new Error(`parseIt.to does not exist: ##${parseItLink.from_id}`);\n        }\n        let obj;\n        if (typeof rootLink.value?.value === 'object') {\n            obj = rootLink.value?.value;\n        }\n        else if (typeof rootLink.value?.value === 'string') {\n            try {\n                obj = JSON.parse(rootLink.value?.value);\n            }\n            catch (error) {\n                throw new Error(`##${rootLink.id} must be valid JSON if it is a string`);\n            }\n        }\n        else {\n            throw new Error(`##${rootLink.id} must have value`);\n        }\n        if (!obj) {\n            throw new Error(`##${rootLink.id} must have value`);\n        }\n        const clientHandlerResult = await callClientHandler({\n            deep,\n            linkId: await deep.id(deep.linkId, \"clientHandler\"),\n            args: [\n                {\n                    deep: deep,\n                    obj: obj,\n                    rootLinkId: rootLink.id,\n                    resultLinkId: parseItLink.to_id,\n                },\n            ],\n        });\n        return clientHandlerResult;\n    }\n    async function callClientHandler(options) {\n        const { linkId, deep, args } = options;\n        const code = await deep\n            .select({\n            in: {\n                id: linkId,\n            },\n        })\n            .then((result) => {\n            const link = result.data[0];\n            if (!link)\n                throw new Error(`Unable to find SyncTextFile for ##${linkId}`);\n            const code = link.value?.value;\n            if (!code)\n                throw new Error(`##${link.id} must have value`);\n            return code;\n        });\n        const functionExpressionString = ts\n            .transpileModule(code, {\n            compilerOptions: {\n                module: ts.ModuleKind.ESNext,\n                sourceMap: true,\n                target: ts.ScriptTarget.ESNext,\n            },\n        })\n            .outputText.replace(\"export {}\", \"\");\n        const fn = eval(functionExpressionString);\n        const result = await fn(...args);\n        return result;\n    }\n};\n//# sourceMappingURL=module.js.map",
        "link_id": 1733
      }
    },
    {
      "id": 1734,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 664,
        "value": "async (options) => {\n    const { deep, data: { newLink: rootLink }, } = options;\n    const { default: ts } = await import(\"typescript\");\n    const { default: util } = await import(\"util\");\n    try {\n        const result = await main();\n        return {\n            result: util.inspect(result),\n        };\n    }\n    catch (error) {\n        throw {\n            error: util.inspect(error),\n        };\n    }\n    async function main() {\n        let obj;\n        if (typeof rootLink.value?.value === \"object\") {\n            obj = rootLink.value?.value;\n        }\n        else if (typeof rootLink.value?.value === \"string\") {\n            try {\n                obj = JSON.parse(rootLink.value?.value);\n            }\n            catch (error) {\n                throw new Error(`##${rootLink.id} must be valid JSON if it is a string`);\n            }\n        }\n        else {\n            throw new Error(`##${rootLink.id} must have value`);\n        }\n        if (!obj) {\n            throw new Error(`##${rootLink.id} must have value`);\n        }\n        const clientHandlerResult = await callClientHandler({\n            deep,\n            linkId: await deep.id(deep.linkId, \"clientHandler\"),\n            args: [\n                {\n                    deep: deep,\n                    obj: obj,\n                    rootLinkId: rootLink.id,\n                    resultLinkId: rootLink.to_id,\n                },\n            ],\n        });\n        return clientHandlerResult;\n    }\n    async function callClientHandler(options) {\n        const { linkId, deep, args } = options;\n        const code = await deep\n            .select({\n            in: {\n                id: linkId,\n            },\n        })\n            .then((result) => {\n            const link = result.data[0];\n            if (!link)\n                throw new Error(`Unable to find SyncTextFile for ##${linkId}`);\n            const code = link.value?.value;\n            if (!code)\n                throw new Error(`##${link.id} must have value`);\n            return code;\n        });\n        const functionExpressionString = ts\n            .transpileModule(code, {\n            compilerOptions: {\n                module: ts.ModuleKind.ESNext,\n                sourceMap: true,\n                target: ts.ScriptTarget.ESNext,\n            },\n        })\n            .outputText.replace(\"export {}\", \"\");\n        const fn = eval(functionExpressionString);\n        const result = await fn(...args);\n        return result;\n    }\n};\n//# sourceMappingURL=module.js.map",
        "link_id": 1734
      }
    },
    {
      "id": 1745,
      "type_id": 1,
      "from_id": 8,
      "to_id": 8
    },
    {
      "id": 1781,
      "type_id": 3,
      "from_id": 1758,
      "to_id": 1747,
      "value": {
        "id": 693,
        "value": "rootValue",
        "link_id": 1781
      }
    },
    {
      "id": 1782,
      "type_id": 3,
      "from_id": 1758,
      "to_id": 1746,
      "value": {
        "id": 694,
        "value": "Root",
        "link_id": 1782
      }
    },
    {
      "id": 1785,
      "type_id": 3,
      "from_id": 1758,
      "to_id": 1749,
      "value": {
        "id": 697,
        "value": "Boolean",
        "link_id": 1785
      }
    },
    {
      "id": 1786,
      "type_id": 3,
      "from_id": 1758,
      "to_id": 1750,
      "value": {
        "id": 698,
        "value": "dependency@deep-foundation/boolean",
        "link_id": 1786
      }
    },
    {
      "id": 1787,
      "type_id": 3,
      "from_id": 1758,
      "to_id": 1751,
      "value": {
        "id": 699,
        "value": "ParseIt",
        "link_id": 1787
      }
    },
    {
      "id": 1788,
      "type_id": 3,
      "from_id": 1758,
      "to_id": 1752,
      "value": {
        "id": 700,
        "value": "propertiesTree",
        "link_id": 1788
      }
    },
    {
      "id": 1836,
      "type_id": 77,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 1837,
      "type_id": 105,
      "from_id": 1836,
      "to_id": 1004
    },
    {
      "id": 1838,
      "type_id": 104,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 1841,
      "type_id": 106,
      "from_id": 1838,
      "to_id": 1836,
      "value": {
        "id": 705,
        "value": "/deepmemo-upload",
        "link_id": 1841
      }
    },
    {
      "id": 1842,
      "type_id": 50,
      "from_id": 57,
      "to_id": 1363
    },
    {
      "id": 1843,
      "type_id": 1,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 1844,
      "type_id": 50,
      "from_id": 1843,
      "to_id": 1736
    },
    {
      "id": 1845,
      "type_id": 4,
      "from_id": 1843,
      "to_id": 7
    },
    {
      "id": 1858,
      "type_id": 3,
      "from_id": 1849,
      "to_id": 1845,
      "value": {
        "id": 711,
        "value": "deviceValue",
        "link_id": 1858
      }
    },
    {
      "id": 1859,
      "type_id": 3,
      "from_id": 1849,
      "to_id": 1843,
      "value": {
        "id": 712,
        "value": "Device",
        "link_id": 1859
      }
    },
    {
      "id": 1864,
      "type_id": 3,
      "from_id": 1849,
      "to_id": 1837,
      "value": {
        "id": 717,
        "value": "routerListening",
        "link_id": 1864
      }
    },
    {
      "id": 1865,
      "type_id": 3,
      "from_id": 1849,
      "to_id": 1841,
      "value": {
        "id": 718,
        "value": "routeUploadString",
        "link_id": 1865
      }
    },
    {
      "id": 1866,
      "type_id": 3,
      "from_id": 1849,
      "to_id": 1836,
      "value": {
        "id": 719,
        "value": "router",
        "link_id": 1866
      }
    },
    {
      "id": 1867,
      "type_id": 3,
      "from_id": 1849,
      "to_id": 1838,
      "value": {
        "id": 720,
        "value": "routeUpload",
        "link_id": 1867
      }
    },
    {
      "id": 1868,
      "type_id": 3,
      "from_id": 1849,
      "to_id": 1842,
      "value": {
        "id": 721,
        "value": "asyncFileHandleUpdate",
        "link_id": 1868
      }
    },
    {
      "id": 154,
      "type_id": 118,
      "from_id": 152,
      "to_id": 82
    },
    {
      "id": 155,
      "type_id": 38,
      "from_id": 152,
      "to_id": 48
    },
    {
      "id": 156,
      "type_id": 48,
      "from_id": 8,
      "to_id": 35
    },
    {
      "id": 157,
      "type_id": 1,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 158,
      "type_id": 4,
      "from_id": 157,
      "to_id": 7
    },
    {
      "id": 159,
      "type_id": 1,
      "from_id": 157,
      "to_id": 8
    },
    {
      "id": 160,
      "type_id": 1,
      "from_id": 157,
      "to_id": 8
    },
    {
      "id": 198,
      "type_id": 3,
      "from_id": 184,
      "to_id": 14,
      "value": {
        "id": 20,
        "value": "packageValue",
        "link_id": 198
      }
    },
    {
      "id": 199,
      "type_id": 3,
      "from_id": 184,
      "to_id": 15,
      "value": {
        "id": 21,
        "value": "Selector",
        "link_id": 199
      }
    },
    {
      "id": 235,
      "type_id": 3,
      "from_id": 184,
      "to_id": 51,
      "value": {
        "id": 57,
        "value": "HandleDelete",
        "link_id": 235
      }
    },
    {
      "id": 236,
      "type_id": 3,
      "from_id": 184,
      "to_id": 52,
      "value": {
        "id": 58,
        "value": "PromiseResult",
        "link_id": 236
      }
    },
    {
      "id": 237,
      "type_id": 3,
      "from_id": 184,
      "to_id": 53,
      "value": {
        "id": 59,
        "value": "promiseResultValueRelationTable",
        "link_id": 237
      }
    },
    {
      "id": 238,
      "type_id": 3,
      "from_id": 184,
      "to_id": 54,
      "value": {
        "id": 60,
        "value": "PromiseReason",
        "link_id": 238
      }
    },
    {
      "id": 239,
      "type_id": 3,
      "from_id": 184,
      "to_id": 55,
      "value": {
        "id": 61,
        "value": "Focus",
        "link_id": 239
      }
    },
    {
      "id": 240,
      "type_id": 3,
      "from_id": 184,
      "to_id": 56,
      "value": {
        "id": 62,
        "value": "focusValue",
        "link_id": 240
      }
    },
    {
      "id": 241,
      "type_id": 3,
      "from_id": 184,
      "to_id": 57,
      "value": {
        "id": 63,
        "value": "AsyncFile",
        "link_id": 241
      }
    },
    {
      "id": 242,
      "type_id": 3,
      "from_id": 184,
      "to_id": 58,
      "value": {
        "id": 64,
        "value": "Query",
        "link_id": 242
      }
    },
    {
      "id": 243,
      "type_id": 3,
      "from_id": 184,
      "to_id": 59,
      "value": {
        "id": 65,
        "value": "queryValue",
        "link_id": 243
      }
    },
    {
      "id": 244,
      "type_id": 3,
      "from_id": 184,
      "to_id": 60,
      "value": {
        "id": 66,
        "value": "Fixed",
        "link_id": 244
      }
    },
    {
      "id": 245,
      "type_id": 3,
      "from_id": 184,
      "to_id": 61,
      "value": {
        "id": 67,
        "value": "fixedValue",
        "link_id": 245
      }
    },
    {
      "id": 246,
      "type_id": 3,
      "from_id": 184,
      "to_id": 62,
      "value": {
        "id": 68,
        "value": "Space",
        "link_id": 246
      }
    },
    {
      "id": 247,
      "type_id": 3,
      "from_id": 184,
      "to_id": 63,
      "value": {
        "id": 69,
        "value": "spaceValue",
        "link_id": 247
      }
    },
    {
      "id": 248,
      "type_id": 3,
      "from_id": 184,
      "to_id": 64,
      "value": {
        "id": 70,
        "value": "AllowLogin",
        "link_id": 248
      }
    },
    {
      "id": 249,
      "type_id": 3,
      "from_id": 184,
      "to_id": 65,
      "value": {
        "id": 71,
        "value": "guests",
        "link_id": 249
      }
    },
    {
      "id": 277,
      "type_id": 3,
      "from_id": 184,
      "to_id": 93,
      "value": {
        "id": 99,
        "value": "AllowPackageInstall",
        "link_id": 277
      }
    },
    {
      "id": 289,
      "type_id": 3,
      "from_id": 184,
      "to_id": 105,
      "value": {
        "id": 111,
        "value": "RouterListening",
        "link_id": 289
      }
    },
    {
      "id": 290,
      "type_id": 3,
      "from_id": 184,
      "to_id": 106,
      "value": {
        "id": 112,
        "value": "RouterStringUse",
        "link_id": 290
      }
    },
    {
      "id": 291,
      "type_id": 3,
      "from_id": 184,
      "to_id": 107,
      "value": {
        "id": 113,
        "value": "routerStringUseValue",
        "link_id": 291
      }
    },
    {
      "id": 292,
      "type_id": 3,
      "from_id": 184,
      "to_id": 108,
      "value": {
        "id": 114,
        "value": "HandleRoute",
        "link_id": 292
      }
    },
    {
      "id": 293,
      "type_id": 3,
      "from_id": 184,
      "to_id": 109,
      "value": {
        "id": 115,
        "value": "routeTree",
        "link_id": 293
      }
    },
    {
      "id": 302,
      "type_id": 3,
      "from_id": 184,
      "to_id": 118,
      "value": {
        "id": 124,
        "value": "TreeIncludeOut",
        "link_id": 302
      }
    },
    {
      "id": 303,
      "type_id": 3,
      "from_id": 184,
      "to_id": 119,
      "value": {
        "id": 125,
        "value": "TreeIncludeFromCurrent",
        "link_id": 303
      }
    },
    {
      "id": 304,
      "type_id": 3,
      "from_id": 184,
      "to_id": 120,
      "value": {
        "id": 126,
        "value": "TreeIncludeToCurrent",
        "link_id": 304
      }
    },
    {
      "id": 305,
      "type_id": 3,
      "from_id": 184,
      "to_id": 121,
      "value": {
        "id": 127,
        "value": "TreeIncludeCurrentFrom",
        "link_id": 305
      }
    },
    {
      "id": 306,
      "type_id": 3,
      "from_id": 184,
      "to_id": 122,
      "value": {
        "id": 128,
        "value": "TreeIncludeCurrentTo",
        "link_id": 306
      }
    },
    {
      "id": 307,
      "type_id": 3,
      "from_id": 184,
      "to_id": 123,
      "value": {
        "id": 129,
        "value": "TreeIncludeFromCurrentTo",
        "link_id": 307
      }
    },
    {
      "id": 308,
      "type_id": 3,
      "from_id": 184,
      "to_id": 124,
      "value": {
        "id": 130,
        "value": "TreeIncludeToCurrentFrom",
        "link_id": 308
      }
    },
    {
      "id": 309,
      "type_id": 3,
      "from_id": 184,
      "to_id": 125,
      "value": {
        "id": 131,
        "value": "AllowInsertType",
        "link_id": 309
      }
    },
    {
      "id": 310,
      "type_id": 3,
      "from_id": 184,
      "to_id": 126,
      "value": {
        "id": 132,
        "value": "AllowUpdateType",
        "link_id": 310
      }
    },
    {
      "id": 311,
      "type_id": 3,
      "from_id": 184,
      "to_id": 127,
      "value": {
        "id": 133,
        "value": "AllowDeleteType",
        "link_id": 311
      }
    },
    {
      "id": 312,
      "type_id": 3,
      "from_id": 184,
      "to_id": 128,
      "value": {
        "id": 134,
        "value": "AllowSelectType",
        "link_id": 312
      }
    },
    {
      "id": 366,
      "type_id": 3,
      "from_id": 184,
      "to_id": 182,
      "value": {
        "id": 188,
        "value": "MigrationsEnd",
        "link_id": 366
      }
    },
    {
      "id": 568,
      "type_id": 3,
      "from_id": 553,
      "to_id": 567,
      "value": {
        "id": 218,
        "value": "RouterListeningSymbol",
        "link_id": 568
      }
    },
    {
      "id": 618,
      "type_id": 3,
      "from_id": 553,
      "to_id": 617,
      "value": {
        "id": 268,
        "value": "HandlerSymbol",
        "link_id": 618
      }
    },
    {
      "id": 621,
      "type_id": 146,
      "from_id": 553,
      "to_id": 78,
      "value": {
        "id": 271,
        "value": "📡",
        "link_id": 621
      }
    },
    {
      "id": 622,
      "type_id": 3,
      "from_id": 553,
      "to_id": 621,
      "value": {
        "id": 272,
        "value": "IsolationProviderSymbol",
        "link_id": 622
      }
    },
    {
      "id": 623,
      "type_id": 146,
      "from_id": 553,
      "to_id": 32,
      "value": {
        "id": 273,
        "value": "🔌",
        "link_id": 623
      }
    },
    {
      "id": 624,
      "type_id": 3,
      "from_id": 553,
      "to_id": 623,
      "value": {
        "id": 274,
        "value": "ExecutionProviderSymbol",
        "link_id": 624
      }
    },
    {
      "id": 638,
      "type_id": 3,
      "from_id": 553,
      "to_id": 637,
      "value": {
        "id": 288,
        "value": "RuleSubjectSymbol",
        "link_id": 638
      }
    },
    {
      "id": 639,
      "type_id": 146,
      "from_id": 553,
      "to_id": 17,
      "value": {
        "id": 289,
        "value": "📜",
        "link_id": 639
      }
    },
    {
      "id": 640,
      "type_id": 3,
      "from_id": 553,
      "to_id": 639,
      "value": {
        "id": 290,
        "value": "RuleSymbol",
        "link_id": 640
      }
    },
    {
      "id": 642,
      "type_id": 3,
      "from_id": 553,
      "to_id": 641,
      "value": {
        "id": 292,
        "value": "SelectorExcludeSymbol",
        "link_id": 642
      }
    },
    {
      "id": 652,
      "type_id": 3,
      "from_id": 553,
      "to_id": 651,
      "value": {
        "id": 302,
        "value": "ThenSymbol",
        "link_id": 652
      }
    },
    {
      "id": 653,
      "type_id": 146,
      "from_id": 553,
      "to_id": 9,
      "value": {
        "id": 303,
        "value": "⏳",
        "link_id": 653
      }
    },
    {
      "id": 745,
      "type_id": 35,
      "from_id": 83,
      "to_id": 744
    },
    {
      "id": 797,
      "type_id": 1,
      "from_id": 794,
      "to_id": 35
    },
    {
      "id": 798,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 345,
        "value": "({ deep, require }) => {\n  const React = require('react');\n  const { useState } = React;\n  const json5 = require('json5');\n  const { useContainer, CytoEditorPreview } = require('@deep-foundation/deepcase');\n  const { Box, SimpleGrid } = require('@chakra-ui/react');\n  // Only objects editor.\n  return ({ fillSize, style, link }) => {\n    const currentValue = deep.stringify(link?.value?.value) || '';\n    const [value, setValue] = useState(currentValue);\n    const isSaved = value == currentValue;\n    const [container] = useContainer();\n    const { data } = deep.useDeepSubscription({\n      type_id: { _in: [\n        deep.idLocal('@deep-foundation/core', 'Active'),\n        deep.idLocal('@deep-foundation/core', 'Contain'),\n      ] },\n      to_id: { _eq: link.id },\n    });\n    const contain = data?.find(l => l.type_id === deep.idLocal('@deep-foundation/core', 'Contain'))\n    const active = data?.find(l => l.type_id === deep.idLocal('@deep-foundation/core', 'Active'))\n    return <div\n      style={{\n        width: 600,\n        height: 600,\n        ...style,\n        position: 'relative',\n      }}\n    >\n      <CytoEditorPreview link={link} compact/>\n    </div>;\n  }\n}",
        "link_id": 798
      }
    },
    {
      "id": 800,
      "type_id": 156,
      "from_id": 717,
      "to_id": 799,
      "value": {
        "id": 349,
        "value": "",
        "link_id": 800
      }
    },
    {
      "id": 801,
      "type_id": 156,
      "from_id": 30,
      "to_id": 799,
      "value": {
        "id": 350,
        "value": "",
        "link_id": 801
      }
    },
    {
      "id": 862,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 353,
        "value": "({ deep, require }) => {\n    const React = require('react');\n    const { useState, useEffect } = React;\n    const json5 = require('json5');\n    const { useContainer, Resize, CustomizableIcon } = require('@deep-foundation/deepcase');\n    const MonacoEditor = require('@monaco-editor/react');\n    const { Box, IconButton, useColorModeValue, useColorMode } = require('@chakra-ui/react');\n    const { BsCheck2, BsLightbulbFill, BsLightbulbOff } = require('react-icons/bs');\n    const { motion, useAnimation } = require('framer-motion');\n    const variants = {\n        view: {\n            opacity: 1,\n            scale: 1,\n            transition: {\n                duration: 1,\n                delay: 0.3,\n                scale: { delay: 0.5, }\n            }\n        },\n        hide: {\n            opacity: 0,\n            scale: 0,\n            transition: {\n                type: 'spring'\n            }\n        },\n        initial: {\n            originX: 1,\n            opacity: 1,\n            scale: 1,\n        }\n    };\n    const stackVariants = {\n        outside: {\n            x: '0%',\n            opacity: 1,\n            scale: 1,\n            originX: 0,\n            transition: {\n                type: 'spring',\n                duration: 0.5,\n                delay: 0.2,\n                scale: { delay: 0.3, }\n            }\n        },\n        nested: {\n            x: '-100%',\n            opacity: 1,\n            scale: 1,\n            originX: 1,\n            transition: {\n                type: 'spring',\n                duration: 0.5,\n                delay: 0.2,\n                scale: { delay: 0.3, }\n            }\n        },\n        initial: {\n            x: '0%',\n            opacity: 0,\n            scale: 0,\n        }\n    };\n    return ({ fillSize, style, link }) => {\n        const currentValue = deep.stringify(link?.value?.value) || '';\n        const [value, setValue] = useState(currentValue);\n        const isSaved = value == currentValue;\n        const [container] = useContainer();\n        const { data } = deep.useDeepSubscription({\n            type_id: { _in: [\n                    deep.idLocal('@deep-foundation/core', 'Active'),\n                    deep.idLocal('@deep-foundation/core', 'Contain'),\n                ] },\n            to_id: { _eq: link.id },\n        });\n        const contain = data?.find(l => l.type_id === deep.idLocal('@deep-foundation/core', 'Contain'));\n        const active = data?.find(l => l.type_id === deep.idLocal('@deep-foundation/core', 'Active'));\n        const [viewSize, setViewSize] = useState({ width: 300, height: 300 });\n        const terminalBorderWidth = viewSize.width - 1;\n        const terminalBorderHeight = viewSize.height - 1;\n        const control = useAnimation();\n        const controlStack = useAnimation();\n        useEffect(() => {\n            if (value) {\n                control.start('view');\n            }\n            else {\n                control.start('hide');\n            }\n            ;\n            if (fillSize === true) {\n                controlStack.start('nested');\n            }\n            else {\n                controlStack.start('outside');\n            }\n            ;\n        }, [control, controlStack, value, fillSize]);\n        const { colorMode } = useColorMode();\n        const body = React.createElement(\"div\", { style: {\n                width: viewSize.width,\n                height: viewSize.height,\n                ...style,\n                position: 'relative',\n            } },\n            React.createElement(Box, { position: 'relative', display: 'grid', gridTemplateColumns: '1fr max-content', height: 'inherit' },\n                React.createElement(Box, { position: 'relative', overflow: 'hidden', sx: { borderRadius: 5 }, border: '1px dashed #605c60' },\n                    React.createElement(MonacoEditor, { options: {\n                            minimap: {\n                                enabled: false\n                            },\n                            lineNumbers: 'off',\n                            wordWrap: true,\n                        }, height: \"100%\", width: \"100%\", theme: colorMode === 'light' ? 'light' : \"vs-dark\", defaultLanguage: \"json\", defaultValue: value || '', onChange: (value) => setValue(value) })),\n                React.createElement(Box, { as: motion.div, animate: controlStack, variants: stackVariants, initial: 'initial', height: fillSize ? '100%' : viewSize.height, display: 'flex', justifyContent: 'space-between', flexDirection: 'column', ml: fillSize ? 0 : '0.2rem' },\n                    React.createElement(IconButton, { as: motion.div, variants: variants, initial: 'initial', animate: 'view', \"aria-label\": 'activate/inactivate button', bg: active && colorMode === 'dark' ? 'gray.700' : 'blue.50', _hover: {\n                            bg: 'blue.100'\n                        }, isRound: true, variant: 'outline', sx: { borderColor: active ? '#111' : 'rgb(0, 128, 255)' }, mr: fillSize ? '0.2rem' : 0, mt: fillSize ? '0.2rem' : 0, size: 'xs', onClick: async () => {\n                            if (active) {\n                                await deep.delete({\n                                    _or: [{\n                                            id: { _eq: active?.id },\n                                        }, {\n                                            type_id: deep.idLocal('@deep-foundation/core', 'Contain'),\n                                            from_id: link.id,\n                                            to_id: active.id,\n                                        }],\n                                });\n                            }\n                            else {\n                                await deep.insert({\n                                    type_id: deep.idLocal('@deep-foundation/core', 'Active'),\n                                    from_id: contain.from_id,\n                                    to_id: contain.to_id,\n                                    in: { data: {\n                                            type_id: deep.idLocal('@deep-foundation/core', 'Contain'),\n                                            from_id: link.id,\n                                        } },\n                                });\n                            }\n                        }, icon: active ? React.createElement(BsLightbulbOff, null) : React.createElement(CustomizableIcon, { Component: BsLightbulbFill, value: { color: 'rgb(0, 128, 255)' } }) }),\n                    React.createElement(IconButton, { as: motion.div, variants: variants, initial: 'initial', animate: control, whileInView: 'view', \"aria-label\": 'save button', isRound: true, bg: 'blue.50', _hover: {\n                            bg: 'blue.100'\n                        }, variant: 'outline', sx: { borderColor: 'rgb(0, 128, 255)' }, mr: fillSize ? '0.2rem' : 0, mb: fillSize ? '0.2rem' : 0, size: 'xs', icon: React.createElement(CustomizableIcon, { Component: BsCheck2, value: { color: 'rgb(0, 128, 255)' } }), onClick: () => {\n                            try {\n                                const _value = json5.parse(value);\n                                if (!link.value)\n                                    deep.insert({\n                                        link_id: link.id, value: _value,\n                                    }, { table: 'objects' });\n                                deep.update({ link_id: link.id }, { value: _value }, { table: 'objects' });\n                            }\n                            catch (error) { }\n                        } }))));\n        return React.createElement(React.Fragment, null, fillSize\n            ? body\n            : React.createElement(Resize, { onChangeSize: (viewSize) => setViewSize(viewSize), style: {\n                    borderRadius: 5,\n                    border: 'none',\n                } }, body));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxDQUFDLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxFQUFFLEVBQUU7SUFDbEIsTUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQy9CLE1BQU0sRUFBRSxRQUFRLEVBQUUsU0FBUyxFQUFFLEdBQUcsS0FBSyxDQUFDO0lBQ3RDLE1BQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUMvQixNQUFNLEVBQUUsWUFBWSxFQUFFLE1BQU0sRUFBRSxnQkFBZ0IsRUFBRSxHQUFHLE9BQU8sQ0FBQywyQkFBMkIsQ0FBQyxDQUFDO0lBQ3hGLE1BQU0sWUFBWSxHQUFHLE9BQU8sQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO0lBQ3JELE1BQU0sRUFBRSxHQUFHLEVBQUUsVUFBVSxFQUFFLGlCQUFpQixFQUFFLFlBQVksRUFBRSxHQUFHLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBQ3pGLE1BQU0sRUFBRSxRQUFRLEVBQUUsZUFBZSxFQUFFLGNBQWMsRUFBRSxHQUFHLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0lBQ2hGLE1BQU0sRUFBRSxNQUFNLEVBQUUsWUFBWSxFQUFFLEdBQUcsT0FBTyxDQUFDLGVBQWUsQ0FBQyxDQUFDO0lBRTFELE1BQU0sUUFBUSxHQUFHO1FBQ2YsSUFBSSxFQUFFO1lBQ0osT0FBTyxFQUFFLENBQUM7WUFDVixLQUFLLEVBQUUsQ0FBQztZQUNSLFVBQVUsRUFBRTtnQkFDVixRQUFRLEVBQUUsQ0FBQztnQkFDWCxLQUFLLEVBQUUsR0FBRztnQkFDVixLQUFLLEVBQUUsRUFBRSxLQUFLLEVBQUUsR0FBRyxHQUFHO2FBQ3ZCO1NBQ0Y7UUFDRCxJQUFJLEVBQUU7WUFDSixPQUFPLEVBQUUsQ0FBQztZQUNWLEtBQUssRUFBRSxDQUFDO1lBQ1IsVUFBVSxFQUFF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LE9BQU8sRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLENBQUMsQ0FBQzs0QkFDN0UsQ0FBQzs0QkFBQyxPQUFNLEtBQUssRUFBRSxDQUFDLENBQUEsQ0FBQzt3QkFDbkIsQ0FBQyxHQUNELENBQ0UsQ0FDRixDQUNGLENBQUM7UUFFVCxPQUFRLDBDQUNMLFFBQVE7WUFDVCxDQUFDLENBQUMsSUFBSTtZQUNOLENBQUMsQ0FBQyxvQkFBQyxNQUFNLElBQ0wsWUFBWSxFQUFFLENBQUMsUUFBUSxFQUFFLEVBQUUsQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLEVBQ2pELEtBQUssRUFBRTtvQkFHUCxZQUFZLEVBQUUsQ0FBQztvQkFDZixNQUFNLEVBQUUsTUFBTTtpQkFDZixJQUNELElBQUksQ0FBVSxDQUNmLENBQUM7SUFDTixDQUFDLENBQUE7QUFDSCxDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIoeyBkZWVwLCByZXF1aXJlIH0pID0+IHtcbiAgICBjb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG4gICAgY29uc3QgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gPSBSZWFjdDtcbiAgICBjb25zdCBqc29uNSA9IHJlcXVpcmUoJ2pzb241Jyk7XG4gICAgY29uc3QgeyB1c2VDb250YWluZXIsIFJlc2l6ZSwgQ3VzdG9taXphYmxlSWNvbiB9ID0gcmVxdWlyZSgnQGRlZXAtZm91bmRhdGlvbi9kZWVwY2FzZScpO1xuICAgIGNvbnN0IE1vbmFjb0VkaXRvciA9IHJlcXVpcmUoJ0Btb25hY28tZWRpdG9yL3JlYWN0Jyk7XG4gICAgY29uc3QgeyBCb3gsIEljb25CdXR0b24sIHVzZUNvbG9yTW9kZVZhbHVlLCB1c2VDb2xvck1vZGUgfSA9IHJlcXVpcmUoJ0BjaGFrcmEtdWkvcmVhY3QnKTtcbiAgICBjb25zdCB7IEJzQ2hlY2syLCBCc0xpZ2h0YnVsYkZpbGwsIEJzTGlnaHRidWxiT2ZmIH0gPSByZXF1aXJlKCdyZWFjdC1pY29ucy9icycpO1xuICAgIGNvbnN0IHsgbW90aW9uLCB1c2VBbmltYXRpb24gfSA9IHJlcXVpcmUoJ2ZyYW1lci1tb3Rpb24nKTtcblxuICAgIGNvbnN0IHZhcmlhbnRzID0ge1xuICAgICAgdmlldzoge1xuICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICBzY2FsZTogMSxcbiAgICAgICAgdHJhbnNpdGlvbjoge1xuICAgICAgICAgIGR1cmF0aW9uOiAxLFxuICAgICAgICAgIGRlbGF5OiAwLjMsXG4gICAgICAgICAgc2NhbGU6IHsgZGVsYXk6IDAuNSwgfSBcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGhpZGU6IHtcbiAgICAgICAgb3BhY2l0eTogMCwgXG4gICAgICAgIHNjYWxlOiAwLFxuICAgICAgICB0cmFuc2l0aW9uOiB7XG4gICAgICAgICAgdHlwZTogJ3NwcmluZydcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGluaXRpYWw6IHtcbiAgICAgICAgb3JpZ2luWDogMSxcbiAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgc2NhbGU6IDEsXG4gICAgICB9XG4gICAgfTtcbiAgXG4gICAgY29uc3Qgc3RhY2tWYXJpYW50cyA9IHtcbiAgICAgIG91dHNpZGU6IHtcbiAgICAgICAgeDogJzAlJyxcbiAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgc2NhbGU6IDEsXG4gICAgICAgIG9yaWdpblg6IDAsXG4gICAgICAgIHRyYW5zaXRpb246IHtcbiAgICAgICAgICB0eXBlOiAnc3ByaW5nJyxcblxuICAgICAgICAgIGR1cmF0aW9uOiAwLjUsXG4gICAgICAgICAgZGVsYXk6IDAuMixcbiAgICAgICAgICBzY2FsZTogeyBkZWxheTogMC4zLCB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBuZXN0ZWQ6IHtcbiAgICAgICAgeDogJy0xMDAlJyxcbiAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgc2NhbGU6IDEsXG4gICAgICAgIG9yaWdpblg6IDEsXG4gICAgICAgIHRyYW5zaXRpb246IHtcbiAgICAgICAgICB0eXBlOiAnc3ByaW5nJyxcbiAgICAgICAgICBkdXJhdGlvbjogMC41LFxuICAgICAgICAgIGRlbGF5OiAwLjIsXG4gICAgICAgICAgc2NhbGU6IHsgZGVsYXk6IDAuMywgfVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgaW5pdGlhbDoge1xuICAgICAgICB4OiAnMCUnLFxuICAgICAgICBvcGFjaXR5OiAwLFxuICAgICAgICBzY2FsZTogMCxcbiAgICAgIH1cbiAgICB9O1xuICAgIFxuICAgIC8vIE9ubHkgb2JqZWN0cyBlZGl0b3IuXG4gICAgcmV0dXJuICh7IGZpbGxTaXplLCBzdHlsZSwgbGluayB9KSA9PiB7XG4gICAgICBjb25zdCBjdXJyZW50VmFsdWUgPSBkZWVwLnN0cmluZ2lmeShsaW5rPy52YWx1ZT8udmFsdWUpIHx8ICcnO1xuICAgICAgY29uc3QgW3ZhbHVlLCBzZXRWYWx1ZV0gPSB1c2VTdGF0ZShjdXJyZW50VmFsdWUpO1xuICAgICAgY29uc3QgaXNTYXZlZCA9IHZhbHVlID09IGN1cnJlbnRWYWx1ZTtcbiAgICAgIGNvbnN0IFtjb250YWluZXJdID0gdXNlQ29udGFpbmVyKCk7XG4gICAgICBjb25zdCB7IGRhdGEgfSA9IGRlZXAudXNlRGVlcFN1YnNjcmlwdGlvbih7XG4gICAgICAgIHR5cGVfaWQ6IHsgX2luOiBbXG4gICAgICAgICAgZGVlcC5pZExvY2FsKCdAZGVlcC1mb3VuZGF0aW9uL2NvcmUnLCAnQWN0aXZlJyksXG4gICAgICAgICAgZGVlcC5pZExvY2FsKCdAZGVlcC1mb3VuZGF0aW9uL2NvcmUnLCAnQ29udGFpbicpLFxuICAgICAgICBdIH0sXG4gICAgICAgIHRvX2lkOiB7IF9lcTogbGluay5pZCB9LFxuICAgICAgfSk7XG4gICAgICBjb25zdCBjb250YWluID0gZGF0YT8uZmluZChsID0+IGwudHlwZV9pZCA9PT0gZGVlcC5pZExvY2FsKCdAZGVlcC1mb3VuZGF0aW9uL2NvcmUnLCAnQ29udGFpbicpKVxuICAgICAgY29uc3QgYWN0aXZlID0gZGF0YT8uZmluZChsID0+IGwudHlwZV9pZCA9PT0gZGVlcC5pZExvY2FsKCdAZGVlcC1mb3VuZGF0aW9uL2NvcmUnLCAnQWN0aXZlJykpXG5cbiAgICAgIGNvbnN0IFt2aWV3U2l6ZSwgc2V0Vmlld1NpemVdID0gdXNlU3RhdGUoe3dpZHRoOiAzMDAsIGhlaWdodDogMzAwfSk7XG4gICAgICBjb25zdCB0ZXJtaW5hbEJvcmRlcldpZHRoID0gdmlld1NpemUud2lkdGggLSAxO1xuICAgICAgY29uc3QgdGVybWluYWxCb3JkZXJIZWlnaHQgPSB2aWV3U2l6ZS5oZWlnaHQgLSAxO1xuXG4gICAgICBjb25zdCBjb250cm9sID0gdXNlQW5pbWF0aW9uKCk7XG4gICAgICBjb25zdCBjb250cm9sU3RhY2sgPSB1c2VBbmltYXRpb24oKTtcblxuICAgICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgY29udHJvbC5zdGFydCgndmlldycpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29udHJvbC5zdGFydCgnaGlkZScpXG4gICAgICAgIH07XG4gICAgICAgIGlmIChmaWxsU2l6ZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgIGNvbnRyb2xTdGFjay5zdGFydCgnbmVzdGVkJylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBjb250cm9sU3RhY2suc3RhcnQoJ2luaXRpYWwnKVxuICAgICAgICAgIGNvbnRyb2xTdGFjay5zdGFydCgnb3V0c2lkZScpXG4gICAgICAgIH07XG5cbiAgICAgIH0sIFtjb250cm9sLCBjb250cm9sU3RhY2ssIHZhbHVlLCBmaWxsU2l6ZV0pXG5cbiAgICAgIGNvbnN0IHsgY29sb3JNb2RlIH0gPSB1c2VDb2xvck1vZGUoKTtcblxuICAgICAgY29uc3QgYm9keSA9IDxkaXZcbiAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgd2lkdGg6IHZpZXdTaXplLndpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0OiB2aWV3U2l6ZS5oZWlnaHQsXG4gICAgICAgICAgICAuLi5zdHlsZSxcbiAgICAgICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgICAgICAgIH19XG4gICAgICAgID5cbiAgICAgICAgICA8Qm94IFxuICAgICAgICAgICAgcG9zaXRpb249J3JlbGF0aXZlJ1xuICAgICAgICAgICAgZGlzcGxheT0nZ3JpZCcgXG4gICAgICAgICAgICBncmlkVGVtcGxhdGVDb2x1bW5zPScxZnIgbWF4LWNvbnRlbnQnIFxuICAgICAgICAgICAgaGVpZ2h0PSdpbmhlcml0J1xuICAgICAgICAgID5cbiAgICAgICAgICAgIDxCb3hcbiAgICAgICAgICAgICAgcG9zaXRpb249J3JlbGF0aXZlJ1xuICAgICAgICAgICAgICBvdmVyZmxvdz0naGlkZGVuJyBzeD17eyBib3JkZXJSYWRpdXM6IDUgfX1cbiAgICAgICAgICAgICAgYm9yZGVyPScxcHggZGFzaGVkICM2MDVjNjAnXG4gICAgICAgICAgICA+IFxuICAgICAgICAgICAgICA8TW9uYWNvRWRpdG9yXG4gICAgICAgICAgICAgICAgb3B0aW9ucz17e1xuICAgICAgICAgICAgICAgICAgbWluaW1hcDoge1xuICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIGxpbmVOdW1iZXJzOiAnb2ZmJyxcbiAgICAgICAgICAgICAgICAgIHdvcmRXcmFwOiB0cnVlLFxuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgaGVpZ2h0PVwiMTAwJVwiXG4gICAgICAgICAgICAgICAgd2lkdGg9XCIxMDAlXCJcbiAgICAgICAgICAgICAgICB0aGVtZT17Y29sb3JNb2RlID09PSAnbGlnaHQnID8gJ2xpZ2h0JyA6IFwidnMtZGFya1wifVxuICAgICAgICAgICAgICAgIGRlZmF1bHRMYW5ndWFnZT1cImpzb25cIlxuICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17dmFsdWUgfHwgJyd9XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4gc2V0VmFsdWUodmFsdWUpfVxuICAgICAgICAgICAgICAgIC8vIG9uTW91bnQ9e2hhbmRsZUVkaXRvckRpZE1vdW50fVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9Cb3g+XG4gICAgICAgICAgICA8Qm94XG4gICAgICAgICAgICAgIGFzPXttb3Rpb24uZGl2fVxuICAgICAgICAgICAgICBhbmltYXRlPXtjb250cm9sU3RhY2t9XG4gICAgICAgICAgICAgIHZhcmlhbnRzPXtzdGFja1ZhcmlhbnRzfVxuICAgICAgICAgICAgICBpbml0aWFsPSdpbml0aWFsJ1xuICAgICAgICAgICAgICAvLyBoZWlnaHQ9e3N0YWNrSGVpZ2h0fVxuICAgICAgICAgICAgICBoZWlnaHQ9e2ZpbGxTaXplID8gJzEwMCUnIDogdmlld1NpemUuaGVpZ2h0fVxuICAgICAgICAgICAgICBkaXNwbGF5PSdmbGV4J1xuICAgICAgICAgICAgICBqdXN0aWZ5Q29udGVudD0nc3BhY2UtYmV0d2VlbidcbiAgICAgICAgICAgICAgZmxleERpcmVjdGlvbj0nY29sdW1uJ1xuICAgICAgICAgICAgICBtbD17ZmlsbFNpemUgPyAwIDogJzAuMnJlbSd9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxJY29uQnV0dG9uIFxuICAgICAgICAgICAgICAgIGFzPXttb3Rpb24uZGl2fVxuICAgICAgICAgICAgICAgIHZhcmlhbnRzPXt2YXJpYW50c31cbiAgICAgICAgICAgICAgICBpbml0aWFsPSdpbml0aWFsJ1xuICAgICAgICAgICAgICAgIC8vIHdoaWxlSW5WaWV3PSd2aWV3J1xuICAgICAgICAgICAgICAgIGFuaW1hdGU9J3ZpZXcnXG4gICAgICAgICAgICAgICAgYXJpYS1sYWJlbD0nYWN0aXZhdGUvaW5hY3RpdmF0ZSBidXR0b24nIFxuICAgICAgICAgICAgICAgIGJnPXthY3RpdmUgJiYgY29sb3JNb2RlID09PSAnZGFyaycgPyAnZ3JheS43MDAnIDogJ2JsdWUuNTAnfVxuICAgICAgICAgICAgICAgIF9ob3Zlcj17e1xuICAgICAgICAgICAgICAgICAgYmc6ICdibHVlLjEwMCdcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIGlzUm91bmRcbiAgICAgICAgICAgICAgICB2YXJpYW50PSdvdXRsaW5lJ1xuICAgICAgICAgICAgICAgIHN4PXt7IGJvcmRlckNvbG9yOiBhY3RpdmUgPyAnIzExMScgOiAncmdiKDAsIDEyOCwgMjU1KScgfX1cbiAgICAgICAgICAgICAgICBtcj17ZmlsbFNpemUgPyAnMC4ycmVtJyA6IDB9XG4gICAgICAgICAgICAgICAgbXQ9e2ZpbGxTaXplID8gJzAuMnJlbScgOiAwfVxuICAgICAgICAgICAgICAgIHNpemU9J3hzJ1xuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2FzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFjdGl2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGRlZXAuZGVsZXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9vcjogW3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHsgX2VxOiBhY3RpdmU/LmlkIH0sXG4gICAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlX2lkOiBkZWVwLmlkTG9jYWwoJ0BkZWVwLWZvdW5kYXRpb24vY29yZScsICdDb250YWluJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBmcm9tX2lkOiBsaW5rLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG9faWQ6IGFjdGl2ZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICB9XSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGRlZXAuaW5zZXJ0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVfaWQ6IGRlZXAuaWRMb2NhbCgnQGRlZXAtZm91bmRhdGlvbi9jb3JlJywgJ0FjdGl2ZScpLFxuICAgICAgICAgICAgICAgICAgICAgIGZyb21faWQ6IGNvbnRhaW4uZnJvbV9pZCxcbiAgICAgICAgICAgICAgICAgICAgICB0b19pZDogY29udGFpbi50b19pZCxcbiAgICAgICAgICAgICAgICAgICAgICBpbjogeyBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVfaWQ6IGRlZXAuaWRMb2NhbCgnQGRlZXAtZm91bmRhdGlvbi9jb3JlJywgJ0NvbnRhaW4nKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyb21faWQ6IGxpbmsuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgfSB9LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIGljb249e2FjdGl2ZSA/IDxCc0xpZ2h0YnVsYk9mZiAvPiA6IDxDdXN0b21pemFibGVJY29uIENvbXBvbmVudD17QnNMaWdodGJ1bGJGaWxsfSB2YWx1ZT17eyBjb2xvcjogJ3JnYigwLCAxMjgsIDI1NSknIH19IC8+fVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8SWNvbkJ1dHRvbiBcbiAgICAgICAgICAgICAgICBhcz17bW90aW9uLmRpdn1cbiAgICAgICAgICAgICAgICB2YXJpYW50cz17dmFyaWFudHN9XG4gICAgICAgICAgICAgICAgaW5pdGlhbD0naW5pdGlhbCdcbiAgICAgICAgICAgICAgICBhbmltYXRlPXtjb250cm9sfVxuICAgICAgICAgICAgICAgIHdoaWxlSW5WaWV3PSd2aWV3J1xuICAgICAgICAgICAgICAgIC8vIGlzRGlzYWJsZWQ9e2lzU2F2ZWR9XG4gICAgICAgICAgICAgICAgYXJpYS1sYWJlbD0nc2F2ZSBidXR0b24nIFxuICAgICAgICAgICAgICAgIGlzUm91bmRcbiAgICAgICAgICAgICAgICBiZz0nYmx1ZS41MCdcbiAgICAgICAgICAgICAgICBfaG92ZXI9e3tcbiAgICAgICAgICAgICAgICAgIGJnOiAnYmx1ZS4xMDAnXG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICB2YXJpYW50PSdvdXRsaW5lJ1xuICAgICAgICAgICAgICAgIHN4PXt7IGJvcmRlckNvbG9yOiAncmdiKDAsIDEyOCwgMjU1KScgfX1cbiAgICAgICAgICAgICAgICBtcj17ZmlsbFNpemUgPyAnMC4ycmVtJyA6IDB9XG4gICAgICAgICAgICAgICAgbWI9e2ZpbGxTaXplID8gJzAuMnJlbScgOiAwfVxuICAgICAgICAgICAgICAgIC8vIGlzTG9hZGluZz17IWlzU2F2ZWR9XG4gICAgICAgICAgICAgICAgc2l6ZT0neHMnXG4gICAgICAgICAgICAgICAgaWNvbj17PEN1c3RvbWl6YWJsZUljb24gQ29tcG9uZW50PXtCc0NoZWNrMn0gdmFsdWU9e3sgY29sb3I6ICdyZ2IoMCwgMTI4LCAyNTUpJyB9fSAvPn1cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBfdmFsdWUgPSBqc29uNS5wYXJzZSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghbGluay52YWx1ZSkgZGVlcC5pbnNlcnQoe1xuICAgICAgICAgICAgICAgICAgICAgIGxpbmtfaWQ6IGxpbmsuaWQsIHZhbHVlOiBfdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIH0sIHsgdGFibGU6ICdvYmplY3RzJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgZGVlcC51cGRhdGUoeyBsaW5rX2lkOiBsaW5rLmlkIH0sIHsgdmFsdWU6IF92YWx1ZSB9LCB7IHRhYmxlOiAnb2JqZWN0cycgfSk7XG4gICAgICAgICAgICAgICAgICB9IGNhdGNoKGVycm9yKSB7fVxuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L0JveD5cbiAgICAgICAgICA8L0JveD5cbiAgICAgICAgPC9kaXY+O1xuXG4gICAgICByZXR1cm4gIDw+XG4gICAgICAgIHtmaWxsU2l6ZSBcbiAgICAgICAgPyBib2R5IFxuICAgICAgICA6IDxSZXNpemVcbiAgICAgICAgICAgIG9uQ2hhbmdlU2l6ZT17KHZpZXdTaXplKSA9PiBzZXRWaWV3U2l6ZSh2aWV3U2l6ZSl9IFxuICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgIC8vIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgICAgICAgICAgLy8gb3ZlcmZsb3c6IG5lc3RlZCA/ICdoaWRkZW4nIDogJ2luaGVyaXQnLFxuICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiA1LFxuICAgICAgICAgICAgYm9yZGVyOiAnbm9uZScsXG4gICAgICAgICAgfX1cbiAgICAgICAgPntib2R5fTwvUmVzaXplPn1cbiAgICAgIDwvPjtcbiAgICB9XG4gIH1cbiJdfQ==",
        "link_id": 862
      }
    },
    {
      "id": 863,
      "type_id": 3,
      "from_id": 802,
      "to_id": 862,
      "value": {
        "id": 352,
        "value": "generated",
        "link_id": 863
      }
    },
    {
      "id": 864,
      "type_id": 143,
      "from_id": 862,
      "to_id": 802
    },
    {
      "id": 865,
      "type_id": 3,
      "from_id": 802,
      "to_id": 864
    },
    {
      "id": 803,
      "type_id": 35,
      "from_id": 145,
      "to_id": 802,
      "value": {
        "id": 354,
        "value": "",
        "link_id": 803
      }
    },
    {
      "id": 804,
      "type_id": 156,
      "from_id": 58,
      "to_id": 803,
      "value": {
        "id": 355,
        "value": "",
        "link_id": 804
      }
    },
    {
      "id": 805,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 356,
        "value": "({ deep, require }) => {\n      const React = require('react');\n    const { useState, useEffect } = React;\n    const json5 = require('json5');\n    const { Input, useColorModeValue } = require('@chakra-ui/react');\n    const { useHotkeys } = require('react-hotkeys-hook');\n    const { useDebounceCallback } = require('@react-hook/debounce');\n    const { useContainer } = require('@deep-foundation/deepcase');\n    // Only string editor.\n    return ({ fillSize, style, link, onClose }) => {\n      \n      \n      const currentValue = deep.stringify(link?.value?.value) || '';\n      const [value, setValue] = useState(currentValue);\n      const save = async (value) => {\n          if (!link.value) await deep.insert({\n            link_id: link.id, value: value,\n        }, { table: 'strings' });\n        deep.update({ link_id: link.id }, { value: value }, { table: 'strings' });\n        \n      };\n      const ref = useHotkeys('enter', async () => {\n        await save(value);\n        onClose && onClose();\n      }, { enableOnTags: [\"INPUT\"] });\n      \n      const setValuesDebounced = useDebounceCallback(async(value) => {await save(value)}, 500);\n\n      useEffect(() => {\n        setValuesDebounced(value);\n      }, [value])\n\n      const bg = useColorModeValue('#eeeeee', '#434343');\n      const hover = useColorModeValue('white', '#1e1e1e');\n      const borderColor = useColorModeValue('#434343', '#eeeeee');\n      const color = useColorModeValue('#1e1e1e', 'white');\n\n    return <div\n        style={{\n          width: 300,\n          ...style,\n          position: 'relative', \n          // background: 'red'\n        }}\n      >\n        <Input\n          ref={ref}\n          autoFocus\n          type=\"text\"\n          variant='filled'\n          variant='filled'\n          bg={bg}\n          color={color}\n          borderWidth='thin'\n          borderColor={borderColor}\n          _hover={{bg: hover}}\n          _focus={{bg: bg}}\n          sx={{\n            width: '100%',\n          }}\n          onChange={(e) => setValue(e.target.value)}\n          value={value}\n        />\n      </div>;\n    }\n  }",
        "link_id": 805
      }
    },
    {
      "id": 1735,
      "type_id": 35,
      "from_id": 83,
      "to_id": 1733
    },
    {
      "id": 988,
      "type_id": 3,
      "from_id": 982,
      "to_id": 981,
      "value": {
        "id": 412,
        "value": "OpenedHandler",
        "link_id": 988
      }
    },
    {
      "id": 989,
      "type_id": 3,
      "from_id": 982,
      "to_id": 980,
      "value": {
        "id": 413,
        "value": "Opened",
        "link_id": 989
      }
    },
    {
      "id": 1087,
      "type_id": 3,
      "from_id": 1078,
      "to_id": 1074,
      "value": {
        "id": 436,
        "value": "dockerSupportsPython",
        "link_id": 1087
      }
    },
    {
      "id": 1247,
      "type_id": 3,
      "from_id": 1225,
      "to_id": 1223,
      "value": {
        "id": 499,
        "value": "Conversation",
        "link_id": 1247
      }
    },
    {
      "id": 1742,
      "type_id": 143,
      "from_id": 1733,
      "to_id": 1741
    },
    {
      "id": 1743,
      "type_id": 1,
      "from_id": 8,
      "to_id": 8
    },
    {
      "id": 1744,
      "type_id": 1,
      "from_id": 8,
      "to_id": 8
    },
    {
      "id": 1771,
      "type_id": 3,
      "from_id": 1758,
      "to_id": 1738,
      "value": {
        "id": 683,
        "value": "clientHandler",
        "link_id": 1771
      }
    },
    {
      "id": 1772,
      "type_id": 3,
      "from_id": 1758,
      "to_id": 1737,
      "value": {
        "id": 684,
        "value": "clientHandlerCode",
        "link_id": 1772
      }
    },
    {
      "id": 1773,
      "type_id": 3,
      "from_id": 1758,
      "to_id": 1739,
      "value": {
        "id": 685,
        "value": "updateHandlerCode",
        "link_id": 1773
      }
    },
    {
      "id": 1778,
      "type_id": 3,
      "from_id": 1758,
      "to_id": 1744,
      "value": {
        "id": 690,
        "value": "Number",
        "link_id": 1778
      }
    },
    {
      "id": 1783,
      "type_id": 3,
      "from_id": 1758,
      "to_id": 1757,
      "value": {
        "id": 695,
        "value": "treeIncludeDownHasResult",
        "link_id": 1783
      }
    },
    {
      "id": 1846,
      "type_id": 1,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 1847,
      "type_id": 4,
      "from_id": 1846,
      "to_id": 7
    },
    {
      "id": 1848,
      "type_id": 50,
      "from_id": 1846,
      "to_id": 1736
    },
    {
      "id": 1361,
      "type_id": 4,
      "from_id": 5,
      "to_id": 1360
    },
    {
      "id": 1364,
      "type_id": 2,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 537,
        "value": "@deep-foundation/voice-to-sync-text-file",
        "link_id": 1364
      }
    },
    {
      "id": 1372,
      "type_id": 3,
      "from_id": 1364,
      "to_id": 1360,
      "value": {
        "id": 541,
        "value": "Text",
        "link_id": 1372
      }
    },
    {
      "id": 200,
      "type_id": 3,
      "from_id": 184,
      "to_id": 16,
      "value": {
        "id": 22,
        "value": "SelectorInclude",
        "link_id": 200
      }
    },
    {
      "id": 202,
      "type_id": 3,
      "from_id": 184,
      "to_id": 18,
      "value": {
        "id": 24,
        "value": "RuleSubject",
        "link_id": 202
      }
    },
    {
      "id": 203,
      "type_id": 3,
      "from_id": 184,
      "to_id": 19,
      "value": {
        "id": 25,
        "value": "RuleObject",
        "link_id": 203
      }
    },
    {
      "id": 204,
      "type_id": 3,
      "from_id": 184,
      "to_id": 20,
      "value": {
        "id": 26,
        "value": "RuleAction",
        "link_id": 204
      }
    },
    {
      "id": 205,
      "type_id": 3,
      "from_id": 184,
      "to_id": 21,
      "value": {
        "id": 27,
        "value": "containValue",
        "link_id": 205
      }
    },
    {
      "id": 206,
      "type_id": 3,
      "from_id": 184,
      "to_id": 22,
      "value": {
        "id": 28,
        "value": "User",
        "link_id": 206
      }
    },
    {
      "id": 207,
      "type_id": 3,
      "from_id": 184,
      "to_id": 23,
      "value": {
        "id": 29,
        "value": "Operation",
        "link_id": 207
      }
    },
    {
      "id": 208,
      "type_id": 3,
      "from_id": 184,
      "to_id": 24,
      "value": {
        "id": 30,
        "value": "operationValue",
        "link_id": 208
      }
    },
    {
      "id": 209,
      "type_id": 3,
      "from_id": 184,
      "to_id": 25,
      "value": {
        "id": 31,
        "value": "AllowInsert",
        "link_id": 209
      }
    },
    {
      "id": 210,
      "type_id": 3,
      "from_id": 184,
      "to_id": 26,
      "value": {
        "id": 32,
        "value": "AllowUpdate",
        "link_id": 210
      }
    },
    {
      "id": 211,
      "type_id": 3,
      "from_id": 184,
      "to_id": 27,
      "value": {
        "id": 33,
        "value": "AllowDelete",
        "link_id": 211
      }
    },
    {
      "id": 212,
      "type_id": 3,
      "from_id": 184,
      "to_id": 28,
      "value": {
        "id": 34,
        "value": "AllowSelect",
        "link_id": 212
      }
    },
    {
      "id": 213,
      "type_id": 3,
      "from_id": 184,
      "to_id": 29,
      "value": {
        "id": 35,
        "value": "File",
        "link_id": 213
      }
    },
    {
      "id": 214,
      "type_id": 3,
      "from_id": 184,
      "to_id": 30,
      "value": {
        "id": 36,
        "value": "SyncTextFile",
        "link_id": 214
      }
    },
    {
      "id": 215,
      "type_id": 3,
      "from_id": 184,
      "to_id": 31,
      "value": {
        "id": 37,
        "value": "syncTextFileValue",
        "link_id": 215
      }
    },
    {
      "id": 216,
      "type_id": 3,
      "from_id": 184,
      "to_id": 32,
      "value": {
        "id": 38,
        "value": "ExecutionProvider",
        "link_id": 216
      }
    },
    {
      "id": 217,
      "type_id": 3,
      "from_id": 184,
      "to_id": 33,
      "value": {
        "id": 39,
        "value": "JSExecutionProvider",
        "link_id": 217
      }
    },
    {
      "id": 218,
      "type_id": 3,
      "from_id": 184,
      "to_id": 34,
      "value": {
        "id": 40,
        "value": "TreeInclude",
        "link_id": 218
      }
    },
    {
      "id": 219,
      "type_id": 3,
      "from_id": 184,
      "to_id": 35,
      "value": {
        "id": 41,
        "value": "Handler",
        "link_id": 219
      }
    },
    {
      "id": 220,
      "type_id": 3,
      "from_id": 184,
      "to_id": 36,
      "value": {
        "id": 42,
        "value": "Tree",
        "link_id": 220
      }
    },
    {
      "id": 221,
      "type_id": 3,
      "from_id": 184,
      "to_id": 37,
      "value": {
        "id": 43,
        "value": "TreeIncludeDown",
        "link_id": 221
      }
    },
    {
      "id": 222,
      "type_id": 3,
      "from_id": 184,
      "to_id": 38,
      "value": {
        "id": 44,
        "value": "TreeIncludeUp",
        "link_id": 222
      }
    },
    {
      "id": 262,
      "type_id": 3,
      "from_id": 184,
      "to_id": 78,
      "value": {
        "id": 84,
        "value": "IsolationProvider",
        "link_id": 262
      }
    },
    {
      "id": 263,
      "type_id": 3,
      "from_id": 184,
      "to_id": 79,
      "value": {
        "id": 85,
        "value": "DockerIsolationProvider",
        "link_id": 263
      }
    },
    {
      "id": 264,
      "type_id": 3,
      "from_id": 184,
      "to_id": 80,
      "value": {
        "id": 86,
        "value": "dockerIsolationProviderValue",
        "link_id": 264
      }
    },
    {
      "id": 265,
      "type_id": 3,
      "from_id": 184,
      "to_id": 81,
      "value": {
        "id": 87,
        "value": "JSDockerIsolationProvider",
        "link_id": 265
      }
    },
    {
      "id": 266,
      "type_id": 3,
      "from_id": 184,
      "to_id": 82,
      "value": {
        "id": 88,
        "value": "Supports",
        "link_id": 266
      }
    },
    {
      "id": 267,
      "type_id": 3,
      "from_id": 184,
      "to_id": 83,
      "value": {
        "id": 89,
        "value": "dockerSupportsJs",
        "link_id": 267
      }
    },
    {
      "id": 268,
      "type_id": 3,
      "from_id": 184,
      "to_id": 84,
      "value": {
        "id": 90,
        "value": "PackageInstall",
        "link_id": 268
      }
    },
    {
      "id": 269,
      "type_id": 3,
      "from_id": 184,
      "to_id": 85,
      "value": {
        "id": 91,
        "value": "PackagePublish",
        "link_id": 269
      }
    },
    {
      "id": 270,
      "type_id": 3,
      "from_id": 184,
      "to_id": 86,
      "value": {
        "id": 92,
        "value": "packageInstallCode",
        "link_id": 270
      }
    },
    {
      "id": 329,
      "type_id": 3,
      "from_id": 184,
      "to_id": 145,
      "value": {
        "id": 151,
        "value": "clientSupportsJs",
        "link_id": 329
      }
    },
    {
      "id": 330,
      "type_id": 3,
      "from_id": 184,
      "to_id": 146,
      "value": {
        "id": 152,
        "value": "Symbol",
        "link_id": 330
      }
    },
    {
      "id": 350,
      "type_id": 3,
      "from_id": 184,
      "to_id": 166,
      "value": {
        "id": 172,
        "value": "plv8JSSupportsCompatableHandleUpdate",
        "link_id": 350
      }
    },
    {
      "id": 367,
      "type_id": 3,
      "from_id": 184,
      "to_id": 183,
      "value": {
        "id": 189,
        "value": "typesTree",
        "link_id": 367
      }
    },
    {
      "id": 569,
      "type_id": 146,
      "from_id": 553,
      "to_id": 104,
      "value": {
        "id": 219,
        "value": "🚏",
        "link_id": 569
      }
    },
    {
      "id": 620,
      "type_id": 3,
      "from_id": 553,
      "to_id": 619,
      "value": {
        "id": 270,
        "value": "AsyncFileSymbol",
        "link_id": 620
      }
    },
    {
      "id": 634,
      "type_id": 3,
      "from_id": 553,
      "to_id": 633,
      "value": {
        "id": 284,
        "value": "RuleActionSymbol",
        "link_id": 634
      }
    },
    {
      "id": 635,
      "type_id": 146,
      "from_id": 553,
      "to_id": 19,
      "value": {
        "id": 285,
        "value": "🍏",
        "link_id": 635
      }
    },
    {
      "id": 636,
      "type_id": 3,
      "from_id": 553,
      "to_id": 635,
      "value": {
        "id": 286,
        "value": "RuleObjectSymbol",
        "link_id": 636
      }
    },
    {
      "id": 643,
      "type_id": 146,
      "from_id": 553,
      "to_id": 16,
      "value": {
        "id": 293,
        "value": "🪡",
        "link_id": 643
      }
    },
    {
      "id": 646,
      "type_id": 3,
      "from_id": 553,
      "to_id": 645,
      "value": {
        "id": 296,
        "value": "SelectorSymbol",
        "link_id": 646
      }
    },
    {
      "id": 647,
      "type_id": 146,
      "from_id": 553,
      "to_id": 12,
      "value": {
        "id": 297,
        "value": "🔴",
        "link_id": 647
      }
    },
    {
      "id": 648,
      "type_id": 3,
      "from_id": 553,
      "to_id": 647,
      "value": {
        "id": 298,
        "value": "RejectedSymbol",
        "link_id": 648
      }
    },
    {
      "id": 649,
      "type_id": 146,
      "from_id": 553,
      "to_id": 11,
      "value": {
        "id": 299,
        "value": "🟢",
        "link_id": 649
      }
    },
    {
      "id": 650,
      "type_id": 3,
      "from_id": 553,
      "to_id": 649,
      "value": {
        "id": 300,
        "value": "ResolvedSymbol",
        "link_id": 650
      }
    },
    {
      "id": 654,
      "type_id": 3,
      "from_id": 553,
      "to_id": 653,
      "value": {
        "id": 304,
        "value": "PromiseSymbol",
        "link_id": 654
      }
    },
    {
      "id": 655,
      "type_id": 146,
      "from_id": 553,
      "to_id": 4,
      "value": {
        "id": 305,
        "value": "📎",
        "link_id": 655
      }
    },
    {
      "id": 853,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 347,
        "value": "({ deep, require }) => {\n    const React = require('react');\n    const { useState } = React;\n    const json5 = require('json5');\n    const { useContainer, CytoEditorPreview } = require('@deep-foundation/deepcase');\n    const { Box, SimpleGrid } = require('@chakra-ui/react');\n    return ({ fillSize, style, link }) => {\n        const currentValue = deep.stringify(link?.value?.value) || '';\n        const [value, setValue] = useState(currentValue);\n        const isSaved = value == currentValue;\n        const [container] = useContainer();\n        const { data } = deep.useDeepSubscription({\n            type_id: { _in: [\n                    deep.idLocal('@deep-foundation/core', 'Active'),\n                    deep.idLocal('@deep-foundation/core', 'Contain'),\n                ] },\n            to_id: { _eq: link.id },\n        });\n        const contain = data?.find(l => l.type_id === deep.idLocal('@deep-foundation/core', 'Contain'));\n        const active = data?.find(l => l.type_id === deep.idLocal('@deep-foundation/core', 'Active'));\n        return React.createElement(\"div\", { style: {\n                width: 600,\n                height: 600,\n                ...style,\n                position: 'relative',\n            } },\n            React.createElement(CytoEditorPreview, { link: link, compact: true }));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxDQUFDLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxFQUFFLEVBQUU7SUFDcEIsTUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQy9CLE1BQU0sRUFBRSxRQUFRLEVBQUUsR0FBRyxLQUFLLENBQUM7SUFDM0IsTUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQy9CLE1BQU0sRUFBRSxZQUFZLEVBQUUsaUJBQWlCLEVBQUUsR0FBRyxPQUFPLENBQUMsMkJBQTJCLENBQUMsQ0FBQztJQUNqRixNQUFNLEVBQUUsR0FBRyxFQUFFLFVBQVUsRUFBRSxHQUFHLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBRXhELE9BQU8sQ0FBQyxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRTtRQUNuQyxNQUFNLFlBQVksR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksRUFBRSxLQUFLLEVBQUUsS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDO1FBQzlELE1BQU0sQ0FBQyxLQUFLLEVBQUUsUUFBUSxDQUFDLEdBQUcsUUFBUSxDQUFDLFlBQVksQ0FBQyxDQUFDO1FBQ2pELE1BQU0sT0FBTyxHQUFHLEtBQUssSUFBSSxZQUFZLENBQUM7UUFDdEMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxHQUFHLFlBQVksRUFBRSxDQUFDO1FBQ25DLE1BQU0sRUFBRSxJQUFJLEVBQUUsR0FBRyxJQUFJLENBQUMsbUJBQW1CLENBQUM7WUFDeEMsT0FBTyxFQUFFLEVBQUUsR0FBRyxFQUFFO29CQUNkLElBQUksQ0FBQyxPQUFPLENBQUMsdUJBQXVCLEVBQUUsUUFBUSxDQUFDO29CQUMvQyxJQUFJLENBQUMsT0FBTyxDQUFDLHVCQUF1QixFQUFFLFNBQVMsQ0FBQztpQkFDakQsRUFBRTtZQUNILEtBQUssRUFBRSxFQUFFLEdBQUcsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1NBQ3hCLENBQUMsQ0FBQztRQUNILE1BQU0sT0FBTyxHQUFHLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxLQUFLLElBQUksQ0FBQyxPQUFPLENBQUMsdUJBQXVCLEVBQUUsU0FBUyxDQUFDLENBQUMsQ0FBQTtRQUMvRixNQUFNLE1BQU0sR0FBRyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sS0FBSyxJQUFJLENBQUMsT0FBTyxDQUFDLHVCQUF1QixFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUE7UUFDN0YsT0FBTyw2QkFDTCxLQUFLLEVBQUU7Z0JBQ0wsS0FBSyxFQUFFLEdBQUc7Z0JBQ1YsTUFBTSxFQUFFLEdBQUc7Z0JBQ1gsR0FBRyxLQUFLO2dCQUNSLFFBQVEsRUFBRSxVQUFVO2FBQ3JCO1lBRUQsb0JBQUMsaUJBQWlCLElBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxPQUFPLFNBQUUsQ0FDcEMsQ0FBQztJQUNULENBQUMsQ0FBQTtBQUNILENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbIih7IGRlZXAsIHJlcXVpcmUgfSkgPT4ge1xuICBjb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG4gIGNvbnN0IHsgdXNlU3RhdGUgfSA9IFJlYWN0O1xuICBjb25zdCBqc29uNSA9IHJlcXVpcmUoJ2pzb241Jyk7XG4gIGNvbnN0IHsgdXNlQ29udGFpbmVyLCBDeXRvRWRpdG9yUHJldmlldyB9ID0gcmVxdWlyZSgnQGRlZXAtZm91bmRhdGlvbi9kZWVwY2FzZScpO1xuICBjb25zdCB7IEJveCwgU2ltcGxlR3JpZCB9ID0gcmVxdWlyZSgnQGNoYWtyYS11aS9yZWFjdCcpO1xuICAvLyBPbmx5IG9iamVjdHMgZWRpdG9yLlxuICByZXR1cm4gKHsgZmlsbFNpemUsIHN0eWxlLCBsaW5rIH0pID0+IHtcbiAgICBjb25zdCBjdXJyZW50VmFsdWUgPSBkZWVwLnN0cmluZ2lmeShsaW5rPy52YWx1ZT8udmFsdWUpIHx8ICcnO1xuICAgIGNvbnN0IFt2YWx1ZSwgc2V0VmFsdWVdID0gdXNlU3RhdGUoY3VycmVudFZhbHVlKTtcbiAgICBjb25zdCBpc1NhdmVkID0gdmFsdWUgPT0gY3VycmVudFZhbHVlO1xuICAgIGNvbnN0IFtjb250YWluZXJdID0gdXNlQ29udGFpbmVyKCk7XG4gICAgY29uc3QgeyBkYXRhIH0gPSBkZWVwLnVzZURlZXBTdWJzY3JpcHRpb24oe1xuICAgICAgdHlwZV9pZDogeyBfaW46IFtcbiAgICAgICAgZGVlcC5pZExvY2FsKCdAZGVlcC1mb3VuZGF0aW9uL2NvcmUnLCAnQWN0aXZlJyksXG4gICAgICAgIGRlZXAuaWRMb2NhbCgnQGRlZXAtZm91bmRhdGlvbi9jb3JlJywgJ0NvbnRhaW4nKSxcbiAgICAgIF0gfSxcbiAgICAgIHRvX2lkOiB7IF9lcTogbGluay5pZCB9LFxuICAgIH0pO1xuICAgIGNvbnN0IGNvbnRhaW4gPSBkYXRhPy5maW5kKGwgPT4gbC50eXBlX2lkID09PSBkZWVwLmlkTG9jYWwoJ0BkZWVwLWZvdW5kYXRpb24vY29yZScsICdDb250YWluJykpXG4gICAgY29uc3QgYWN0aXZlID0gZGF0YT8uZmluZChsID0+IGwudHlwZV9pZCA9PT0gZGVlcC5pZExvY2FsKCdAZGVlcC1mb3VuZGF0aW9uL2NvcmUnLCAnQWN0aXZlJykpXG4gICAgcmV0dXJuIDxkaXZcbiAgICAgIHN0eWxlPXt7XG4gICAgICAgIHdpZHRoOiA2MDAsXG4gICAgICAgIGhlaWdodDogNjAwLFxuICAgICAgICAuLi5zdHlsZSxcbiAgICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gICAgICB9fVxuICAgID5cbiAgICAgIDxDeXRvRWRpdG9yUHJldmlldyBsaW5rPXtsaW5rfSBjb21wYWN0Lz5cbiAgICA8L2Rpdj47XG4gIH1cbn0iXX0=",
        "link_id": 853
      }
    },
    {
      "id": 854,
      "type_id": 3,
      "from_id": 798,
      "to_id": 853,
      "value": {
        "id": 346,
        "value": "generated",
        "link_id": 854
      }
    },
    {
      "id": 855,
      "type_id": 143,
      "from_id": 853,
      "to_id": 798
    },
    {
      "id": 856,
      "type_id": 3,
      "from_id": 798,
      "to_id": 855
    },
    {
      "id": 799,
      "type_id": 35,
      "from_id": 145,
      "to_id": 798,
      "value": {
        "id": 348,
        "value": "",
        "link_id": 799
      }
    },
    {
      "id": 807,
      "type_id": 156,
      "from_id": 3,
      "to_id": 806,
      "value": {
        "id": 360,
        "value": "",
        "link_id": 807
      }
    },
    {
      "id": 808,
      "type_id": 156,
      "from_id": 97,
      "to_id": 806,
      "value": {
        "id": 361,
        "value": "",
        "link_id": 808
      }
    },
    {
      "id": 809,
      "type_id": 156,
      "from_id": 66,
      "to_id": 806,
      "value": {
        "id": 362,
        "value": "",
        "link_id": 809
      }
    },
    {
      "id": 810,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 363,
        "value": "({ deep, require }) => {\n  const React = require('react');\n  const { useState } = require('react');\n  const axiosHooks = require(\"axios-hooks\");\n  const axios = require(\"axios\");\n  const useAxios = axiosHooks.makeUseAxios({ axios: axios.create() });\n\n  return ({ fillSize, style, link }) => {\n\n    const ssl = deep.apolloClient.ssl;\n    const path = deep.apolloClient.path.slice(0, -4);\n    const url = `${ssl ? \"https://\" : \"http://\"}${path}/file?linkId=${link.id}`;\n\n    const [{ data, loading, error }, refetch] = useAxios({ \n      method: 'get',\n      url,\n      headers: {\n        'Authorization': `Bearer ${deep.token}`\n      },\n      \n      responseType: \"blob\",\n    });\n\n    const [src, setSrc] = useState(\"test\");\n    if (!loading && data) {\n      const reader = new window.FileReader();\n      reader.onload = () => {\n        setSrc(reader.result);\n      }\n      reader.readAsDataURL(data);\n    }\n\n    const renderMedia = () => {\n      if (src.startsWith('data:image')) {\n        return <img src={src} alt=\"An image from Deep file storage.\" style={style}></img>;\n      } else if (src.startsWith('data:audio')) {\n        return <audio src={src} controls style={style}>Your browser does not support the audio element.</audio>;\n      } else {\n        return <div>Unsupported file type.</div>;\n      }\n    } \n\n    return renderMedia();\n  }\n}\n",
        "link_id": 810
      }
    },
    {
      "id": 820,
      "type_id": 3,
      "from_id": 813,
      "to_id": 801,
      "value": {
        "id": 369,
        "value": "editorHandleClientTSX",
        "link_id": 820
      }
    },
    {
      "id": 821,
      "type_id": 3,
      "from_id": 813,
      "to_id": 799,
      "value": {
        "id": 370,
        "value": "editorHandler",
        "link_id": 821
      }
    },
    {
      "id": 822,
      "type_id": 3,
      "from_id": 813,
      "to_id": 798,
      "value": {
        "id": 371,
        "value": "editorClientHandler",
        "link_id": 822
      }
    },
    {
      "id": 823,
      "type_id": 3,
      "from_id": 813,
      "to_id": 804,
      "value": {
        "id": 372,
        "value": "queryHandleClient",
        "link_id": 823
      }
    },
    {
      "id": 824,
      "type_id": 3,
      "from_id": 813,
      "to_id": 803,
      "value": {
        "id": 373,
        "value": "queryHandler",
        "link_id": 824
      }
    },
    {
      "id": 825,
      "type_id": 3,
      "from_id": 813,
      "to_id": 802,
      "value": {
        "id": 374,
        "value": "queryClientHandler",
        "link_id": 825
      }
    },
    {
      "id": 830,
      "type_id": 3,
      "from_id": 813,
      "to_id": 805,
      "value": {
        "id": 379,
        "value": "stringClientHandler",
        "link_id": 830
      }
    },
    {
      "id": 1736,
      "type_id": 35,
      "from_id": 83,
      "to_id": 1734
    },
    {
      "id": 1004,
      "type_id": 99,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 1005,
      "type_id": 2,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 416,
        "value": "@deep-foundation/main-port",
        "link_id": 1005
      }
    },
    {
      "id": 1011,
      "type_id": 3,
      "from_id": 1005,
      "to_id": 1004,
      "value": {
        "id": 418,
        "value": "port",
        "link_id": 1011
      }
    },
    {
      "id": 1108,
      "type_id": 3,
      "from_id": 1102,
      "to_id": 1101,
      "value": {
        "id": 442,
        "value": "TokensValue",
        "link_id": 1108
      }
    },
    {
      "id": 1109,
      "type_id": 3,
      "from_id": 1102,
      "to_id": 1100,
      "value": {
        "id": 443,
        "value": "Tokens",
        "link_id": 1109
      }
    },
    {
      "id": 1168,
      "type_id": 3,
      "from_id": 1162,
      "to_id": 1159,
      "value": {
        "id": 462,
        "value": "MessageHandleUpdate",
        "link_id": 1168
      }
    },
    {
      "id": 1184,
      "type_id": 1,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 1209,
      "type_id": 1145,
      "from_id": 1161,
      "to_id": 1161
    },
    {
      "id": 1210,
      "type_id": 35,
      "from_id": 83,
      "to_id": 1208
    },
    {
      "id": 1211,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 478,
        "value": "async ({ deep, require }) => {\n  const PACKAGE_NAME = \"@deep-foundation/chatgpt-azure-discord-bot\";\n  const logsPrefix = \"@chatgpt-azure\" + \" \" + \"manager\" + \"ClientHandler\";\n  const React = await deep.import(\"react\");\n  const { useState, useMemo, useRef } = React;\n  const Chakra = await deep.import(\"@chakra-ui/react\");\n  console.log(logsPrefix, { Chakra });\n  const {\n    Input,\n    InputGroup,\n    InputRightElement,\n    IconButton,\n    Popover,\n    PopoverTrigger,\n    PopoverContent,\n    PopoverArrow,\n    PopoverBody,\n    FormControl,\n    FormLabel,\n    Box,\n    PopoverHeader,\n    PopoverCloseButton,\n    HStack,\n    Stack,\n    Text,\n    Link,\n    Select,\n    Tooltip,\n    Button,\n    NumberInput,\n    NumberInputField,\n    FormHelperText,\n    FormErrorMessage,\n    Divider,\n  } = Chakra;\n  const ChakraIcons = await deep.import(\"@chakra-ui/icons\");\n  const { InfoOutlineIcon } = ChakraIcons;\n  console.log(logsPrefix, ChakraIcons);\n  const DeepCase = await deep.import(\"@deep-foundation/deepcase\");\n  const { FinderPopover } = await deep.import(\"./cyto/hooks\");\n  const { ClientHandler } = DeepCase;\n  console.log(logsPrefix, { DeepCase });\n  console.log(logsPrefix, { FinderPopover });\n  const ReactHookForm = await deep.import(\"react-hook-form\");\n  console.log(logsPrefix, { ReactHookForm });\n  const { useForm, Controller } = ReactHookForm;\n  const containTypeLinkId = await deep.id(\"@deep-foundation/core\", \"Contain\");\n\n  const chatGPTAzureClientHandlerLinkId = await deep.id(\n    \"@deep-foundation/chatgpt-azure\",\n    \"managerClientHandler\"\n  );\n\n  return ({ fillSize, style, link }) => {\n    const {\n      handleSubmit,\n      register,\n      formState: { errors, isSubmitting },\n      control,\n      setValue,\n      setError,\n    } = useForm();\n\n    async function onSubmit(values: {\n      apiKey: string;\n      chatGPTModelLinkId: string;\n      userLinkId: string;\n      containerLinkId: string;\n    }) {\n      const { apiKey, chatGPTModelLinkId, userLinkId, containerLinkId } =\n        values;\n\n      const containTypeLinkId = await deep.id(\n        \"@deep-foundation/core\",\n        \"Contain\"\n      );\n      const reservedLinkIds = await deep.reserve(6);\n      const apiKeyLinkId = reservedLinkIds.pop();\n      const containForApiKeyLinkId = reservedLinkIds.pop();\n      const usesApiKeyLinkId = reservedLinkIds.pop();\n      const containForUsesApiKeyLinkId = reservedLinkIds.pop();\n      const usesModelLinkId = reservedLinkIds.pop();\n      const containForUsesModelLinkId = reservedLinkIds.pop();\n\n      await deep\n        .serial({\n          operations: [\n            {\n              type: \"insert\",\n              table: \"links\",\n              objects: {\n                id: apiKeyLinkId,\n                type_id: await deep.id(\"@deep-foundation/openai\", \"ApiKey\"),\n              },\n            },\n            {\n              type: \"insert\",\n              table: \"strings\",\n              objects: {\n                link_id: apiKeyLinkId,\n                value: apiKey,\n              },\n            },\n            {\n              type: \"insert\",\n              table: \"links\",\n              objects: {\n                id: containForApiKeyLinkId,\n                type_id: containTypeLinkId,\n                from_id: containerLinkId,\n                to_id: apiKeyLinkId,\n              },\n            },\n            {\n              type: \"insert\",\n              table: \"links\",\n              objects: {\n                id: usesApiKeyLinkId,\n                type_id: await deep.id(\"@deep-foundation/openai\", \"UsesApiKey\"),\n                from_id: userLinkId,\n                to_id: apiKeyLinkId,\n              },\n            },\n            {\n              type: \"insert\",\n              table: \"links\",\n              objects: {\n                id: containForUsesApiKeyLinkId,\n                type_id: containTypeLinkId,\n                from_id: containerLinkId,\n                to_id: usesApiKeyLinkId,\n              },\n            },\n            {\n              type: \"insert\",\n              table: \"links\",\n              objects: {\n                id: usesModelLinkId,\n                type_id: await deep.id(\"@deep-foundation/openai\", \"UsesModel\"),\n                from_id: userLinkId,\n                to_id: chatGPTModelLinkId,\n              },\n            },\n            {\n              type: \"insert\",\n              table: \"links\",\n              objects: {\n                id: containForUsesModelLinkId,\n                type_id: containTypeLinkId,\n                from_id: containerLinkId,\n                to_id: usesModelLinkId,\n              },\n            },\n          ],\n        })\n        .catch(setError);\n    }\n\n    return (\n      <Box\n        style={{ minWidth: 450, ...style }}\n        bg={\"bgColor\"}\n        color={\"text\"}\n        borderColor={\"borderColor\"}\n        borderWidth=\"1px\"\n        borderRadius=\"lg\"\n        padding={4}\n      >\n        <form onSubmit={handleSubmit(onSubmit)}>\n          <FormControl isInvalid={errors.root}>\n            <Stack\n              spacing={6}\n              divider={<Divider />}\n              display=\"flex\"\n              justifyContent=\"center\"\n            >\n              <ApiKeyTextField\n                register={register}\n                error={errors.apiKey && errors.apiKey.message}\n              />\n              <ModelLinkIdSelect\n                register={register}\n                error={\n                  errors.chatGPTModelLinkId && errors.chatGPTModelLinkId.message\n                }\n              />\n              <UserLinkIdTextField\n                control={control}\n                error={errors.userLinkId && errors.userLinkId.message}\n                setValue={setValue}\n              />\n              <ContainerLinkIdTextField\n                control={control}\n                setValue={setValue}\n                error={errors.containerLinkId && errors.containerLinkId.message}\n              />\n              {errors.root && <FormErrorMessage>\n                {JSON.stringify(errors.root, null, 2)}\n              </FormErrorMessage>}\n              <Button isLoading={isSubmitting} type=\"submit\">\n                Submit\n              </Button>\n            </Stack>\n          </FormControl>\n        </form>\n      </Box>\n    );\n  };\n\n  function ModelLinkIdSelect(options: { register: Function; error: string }) {\n    const { register, error } = options;\n    const { data: modelLinks } = deep.useDeepSubscription({\n      type_id: {\n        _id: [\"@deep-foundation/openai\", \"Model\"],\n      },\n    });\n\n    const modelOptions = useMemo(() => {\n      if (!modelLinks || modelLinks.length === 0) return null;\n      return modelLinks.map((link) => {\n        const name = link.value.value;\n        return <option value={link.id}>{name}</option>;\n      });\n    }, [modelLinks]);\n    console.log({ modelOptions });\n\n    return (\n      <Tooltip\n        label={`No model links of type [\"@deep-foundation/openai\", \"Model\"] available to choose from. You can install \"@deep-foundation/chatgpt-azure-deep\" for already configured chatgpt models`}\n        isDisabled={modelLinks.length > 0}\n      >\n        <FormControl isInvalid={error}>\n          <FormLabel htmlFor=\"chatGPTModelLinkId\">\n            ChatGPT Model Link ID\n          </FormLabel>\n          <Select\n            placeholder=\"ChatGPT Model link ID\"\n            {...register(\"chatGPTModelLinkId\", {\n              required: \"ChatGPT Model link ID is required\",\n            })}\n            isDisabled={modelLinks.length === 0}\n          >\n            {modelOptions}\n          </Select>\n          <FormErrorMessage>{error}</FormErrorMessage>\n          <FormHelperText>\n            ChatGPT model is required to know which model should be used for\n            requests\n          </FormHelperText>\n        </FormControl>\n      </Tooltip>\n    );\n  }\n\n  // function ApiKeyTextField(options: {\n  //   apiKey: string;\n  //   handleApiKeyChange: (apiKey: string) => void;\n  // }) {\n  //   const { apiKey: apiKey, handleApiKeyChange: handleApiKeyChange } = options;\n\n  //   const helpContent = (\n  //     <Stack>\n  //       <Text>\n  //         Api Key is required to make requests to discord on your behalf\n  //       </Text>\n  //       <Link\n  //         isExternal\n  //         href=\"https://discord.com/developers/docs/getting-started#configuring-your-bot\"\n  //       >\n  //         Obtain Api Key\n  //       </Link>\n  //     </Stack>\n  //   );\n\n  //   return (\n  //     <Stack>\n  //       <HStack>\n  //         <Input\n  //           placeholder=\"Enter Api Key\"\n  //           variant=\"outlined\"\n  //           value={apiKey}\n  //           onChange={(event) => {\n  //             handleApiKeyChange(event.target.value);\n  //           }}\n  //         />\n  //         <Popover>\n  //           <PopoverTrigger>\n  //             <IconButton aria-label=\"help\" icon={<InfoOutlineIcon />} />\n  //           </PopoverTrigger>\n  //           <PopoverContent>\n  //             <PopoverArrow />\n  //             <PopoverCloseButton />\n  //             <PopoverBody>{helpContent}</PopoverBody>\n  //           </PopoverContent>\n  //         </Popover>\n  //       </HStack>\n  //     </Stack>\n  //   );\n  // }\n\n  // function UserLinkIdTextField(options: {\n  //   userLinkId: number;\n  //   handleUserLinkIdChange: (value: number) => void;\n  // }) {\n  //   const { userLinkId, handleUserLinkIdChange } = options;\n  //   const [isPopoverOpen, setIsPopoverOpen] = useState(false);\n\n  //   const handleHelpClick = () => {\n  //     setIsPopoverOpen(!isPopoverOpen);\n  //   };\n\n  //   const helpContent = `User link is a link that is considered as a user of ApiKey. User link will be \"from\" for UsesApiKey`;\n\n  //   return (\n  //     <HStack>\n  //       <FormControl>\n  //         <InputGroup>\n  //           <Input\n  //             placeholder=\"User Link ID\"\n  //             type=\"text\"\n  //             variant=\"outline\"\n  //             value={userLinkId}\n  //             onChange={(event) => {\n  //               handleUserLinkIdChange(event.target.value);\n  //             }}\n  //             required\n  //           />\n  //         </InputGroup>\n  //       </FormControl>\n  //       <Popover>\n  //         <PopoverTrigger>\n  //           <IconButton aria-label=\"help\" icon={<InfoOutlineIcon />} />\n  //         </PopoverTrigger>\n  //         <PopoverContent>\n  //           <PopoverArrow />\n  //           <PopoverCloseButton />\n  //           <PopoverBody>{helpContent}</PopoverBody>\n  //         </PopoverContent>\n  //       </Popover>\n  //       <FinderPopover\n  //         link={deep.linkId}\n  //         onSubmit={async (link) => {\n  //           handleUserLinkIdChange(link.id);\n  //         }}\n  //       >\n  //         <IconButton aria-label=\"finder\" icon={<>🪬</>} />\n  //       </FinderPopover>\n  //     </HStack>\n  //   );\n  // }\n\n  function ApiKeyTextField(options: { error: string; register: Function }) {\n    const { error, register } = options;\n\n    return (\n      <HStack>\n        <FormControl isInvalid={error}>\n          <FormLabel htmlFor=\"apiKey\">ApiKey Link ID</FormLabel>\n          <Input\n            {...register(\"apiKey\", {\n              required: \"Api Key is required\",\n            })}\n          />\n          <FormErrorMessage>{error}</FormErrorMessage>\n          <FormHelperText>\n            <Stack>\n              <Text>\n                Api Key is required to make requests to openai on your behalf\n              </Text>\n              <Link\n                isExternal\n                href=\"https://platform.openai.com/api-keys\"\n              >\n                Obtain Api Key\n              </Link>\n            </Stack>\n          </FormHelperText>\n        </FormControl>\n      </HStack>\n    );\n  }\n\n  function UserLinkIdTextField(options: {\n    setValue: any;\n    error: string;\n    control: any;\n  }) {\n    const { setValue, error, control } = options;\n\n    return (\n      <FormControl isInvalid={error}>\n        <FormLabel htmlFor=\"userLinkId\">User Link ID</FormLabel>\n        <Controller\n          name=\"userLinkId\"\n          control={control}\n          defaultValue={undefined}\n          rules={{\n            required: {\n              value: true,\n              message: \"User link ID is required\",\n            },\n            validate: async (value) => {\n              const valueNumber = parseInt(value);\n              if (isNaN(valueNumber)) {\n                return \"User link ID must be a number\";\n              }\n              const {\n                data: [link],\n              } = await deep.select({ id: valueNumber });\n              if (!link) {\n                return `Link ${valueNumber} does not exist`;\n              } else {\n                return true;\n              }\n            },\n          }}\n          render={({ field }) => (\n            <HStack>\n              <NumberInput {...field} min={0}>\n                <NumberInputField ref={field.ref} name={field.name} />\n              </NumberInput>\n              <FinderPopover\n                link={deep.linkId}\n                onSubmit={async (link) => {\n                  setValue(\"containerLinkId\", link.id);\n                }}\n              >\n                <IconButton aria-label=\"finder\" icon={<>🪬</>} />\n              </FinderPopover>\n            </HStack>\n          )}\n        />\n        <FormErrorMessage>{error}</FormErrorMessage>\n        <FormHelperText>\n          User link is a link that is considered as a user of ApiKey. User link\n          will be \"from\" for UsesApiKey\n        </FormHelperText>\n      </FormControl>\n    );\n  }\n\n  function ContainerLinkIdTextField(options: {\n    setValue: any;\n    error: string;\n    control: any;\n  }) {\n    const { setValue, error, control } = options;\n\n    const helpContent = `Container link is a link that will contain newly created ApiKey, UsesApiKey`;\n\n    return (\n      <FormControl isInvalid={error}>\n        <FormLabel htmlFor=\"containerLinkId\">Container Link ID</FormLabel>\n        <HStack>\n          <Controller\n            name=\"containerLinkId\"\n            control={control}\n            defaultValue={undefined}\n            rules={{\n              required: {\n                value: true,\n                message: \"Container link id is required\",\n              },\n              validate: async (value) => {\n                const valueNumber = parseInt(value);\n                if (isNaN(valueNumber)) {\n                  return \"Container link id must be a number\";\n                }\n                const {\n                  data: [link],\n                } = await deep.select({ id: valueNumber });\n                if (!link) {\n                  return `Link ${valueNumber} does not exist`;\n                } else {\n                  return true;\n                }\n              },\n            }}\n            render={({ field }) => (\n              <NumberInput {...field} min={0}>\n                <NumberInputField ref={field.ref} name={field.name} />\n              </NumberInput>\n            )}\n          />\n          <FinderPopover\n            link={deep.linkId}\n            onSubmit={async (link) => {\n              setValue(\"containerLinkId\", link.id);\n            }}\n          >\n            <IconButton aria-label=\"finder\" icon={<>🪬</>} />\n          </FinderPopover>\n        </HStack>\n        <FormErrorMessage>{error}</FormErrorMessage>\n        <FormHelperText>\n          Container link is a link that will contain newly created ApiKey,\n          UsesApiKey\n        </FormHelperText>\n      </FormControl>\n    );\n  }\n};\n",
        "link_id": 1211
      }
    },
    {
      "id": 1298,
      "type_id": 1219,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 504,
        "value": "https://deep-ai.openai.azure.com/openai/deployments/gpt-4-32k/chat/completions?api-version=2023-03-15-preview",
        "link_id": 1298
      }
    },
    {
      "id": 1324,
      "type_id": 3,
      "from_id": 1316,
      "to_id": 1303,
      "value": {
        "id": 516,
        "value": "gpt-4-32k-providedBy",
        "link_id": 1324
      }
    },
    {
      "id": 224,
      "type_id": 3,
      "from_id": 184,
      "to_id": 40,
      "value": {
        "id": 46,
        "value": "containTree",
        "link_id": 224
      }
    },
    {
      "id": 225,
      "type_id": 3,
      "from_id": 184,
      "to_id": 41,
      "value": {
        "id": 47,
        "value": "containTreeContain",
        "link_id": 225
      }
    },
    {
      "id": 226,
      "type_id": 3,
      "from_id": 184,
      "to_id": 42,
      "value": {
        "id": 48,
        "value": "containTreeAny",
        "link_id": 226
      }
    },
    {
      "id": 228,
      "type_id": 3,
      "from_id": 184,
      "to_id": 44,
      "value": {
        "id": 50,
        "value": "packageNamespaceValue",
        "link_id": 228
      }
    },
    {
      "id": 229,
      "type_id": 3,
      "from_id": 184,
      "to_id": 45,
      "value": {
        "id": 51,
        "value": "PackageActive",
        "link_id": 229
      }
    },
    {
      "id": 230,
      "type_id": 3,
      "from_id": 184,
      "to_id": 46,
      "value": {
        "id": 52,
        "value": "PackageVersion",
        "link_id": 230
      }
    },
    {
      "id": 231,
      "type_id": 3,
      "from_id": 184,
      "to_id": 47,
      "value": {
        "id": 53,
        "value": "packageVersionValue",
        "link_id": 231
      }
    },
    {
      "id": 232,
      "type_id": 3,
      "from_id": 184,
      "to_id": 48,
      "value": {
        "id": 54,
        "value": "HandleOperation",
        "link_id": 232
      }
    },
    {
      "id": 570,
      "type_id": 3,
      "from_id": 553,
      "to_id": 569,
      "value": {
        "id": 220,
        "value": "RouteSymbol",
        "link_id": 570
      }
    },
    {
      "id": 583,
      "type_id": 146,
      "from_id": 553,
      "to_id": 82,
      "value": {
        "id": 233,
        "value": "🔋",
        "link_id": 583
      }
    },
    {
      "id": 625,
      "type_id": 146,
      "from_id": 553,
      "to_id": 30,
      "value": {
        "id": 275,
        "value": "📄",
        "link_id": 625
      }
    },
    {
      "id": 626,
      "type_id": 3,
      "from_id": 553,
      "to_id": 625,
      "value": {
        "id": 276,
        "value": "SyncTextFileSymbol",
        "link_id": 626
      }
    },
    {
      "id": 637,
      "type_id": 146,
      "from_id": 553,
      "to_id": 18,
      "value": {
        "id": 287,
        "value": "👤",
        "link_id": 637
      }
    },
    {
      "id": 651,
      "type_id": 146,
      "from_id": 553,
      "to_id": 10,
      "value": {
        "id": 301,
        "value": "🔗",
        "link_id": 651
      }
    },
    {
      "id": 802,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 351,
        "value": "({ deep, require }) => {\n    const React = require('react');\n    const { useState, useEffect } = React;\n    const json5 = require('json5');\n    const { useContainer, Resize, CustomizableIcon } = require('@deep-foundation/deepcase');\n    const MonacoEditor = require('@monaco-editor/react');\n    const { Box, IconButton, useColorModeValue, useColorMode } = require('@chakra-ui/react');\n    const { BsCheck2, BsLightbulbFill, BsLightbulbOff } = require('react-icons/bs');\n    const { motion, useAnimation } = require('framer-motion');\n\n    const variants = {\n      view: {\n        opacity: 1,\n        scale: 1,\n        transition: {\n          duration: 1,\n          delay: 0.3,\n          scale: { delay: 0.5, } \n        }\n      },\n      hide: {\n        opacity: 0, \n        scale: 0,\n        transition: {\n          type: 'spring'\n        }\n      },\n      initial: {\n        originX: 1,\n        opacity: 1,\n        scale: 1,\n      }\n    };\n  \n    const stackVariants = {\n      outside: {\n        x: '0%',\n        opacity: 1,\n        scale: 1,\n        originX: 0,\n        transition: {\n          type: 'spring',\n\n          duration: 0.5,\n          delay: 0.2,\n          scale: { delay: 0.3, }\n        }\n      },\n      nested: {\n        x: '-100%',\n        opacity: 1,\n        scale: 1,\n        originX: 1,\n        transition: {\n          type: 'spring',\n          duration: 0.5,\n          delay: 0.2,\n          scale: { delay: 0.3, }\n        }\n      },\n      initial: {\n        x: '0%',\n        opacity: 0,\n        scale: 0,\n      }\n    };\n    \n    // Only objects editor.\n    return ({ fillSize, style, link }) => {\n      const currentValue = deep.stringify(link?.value?.value) || '';\n      const [value, setValue] = useState(currentValue);\n      const isSaved = value == currentValue;\n      const [container] = useContainer();\n      const { data } = deep.useDeepSubscription({\n        type_id: { _in: [\n          deep.idLocal('@deep-foundation/core', 'Active'),\n          deep.idLocal('@deep-foundation/core', 'Contain'),\n        ] },\n        to_id: { _eq: link.id },\n      });\n      const contain = data?.find(l => l.type_id === deep.idLocal('@deep-foundation/core', 'Contain'))\n      const active = data?.find(l => l.type_id === deep.idLocal('@deep-foundation/core', 'Active'))\n\n      const [viewSize, setViewSize] = useState({width: 300, height: 300});\n      const terminalBorderWidth = viewSize.width - 1;\n      const terminalBorderHeight = viewSize.height - 1;\n\n      const control = useAnimation();\n      const controlStack = useAnimation();\n\n      useEffect(() => {\n        if (value) {\n          control.start('view')\n        } else {\n          control.start('hide')\n        };\n        if (fillSize === true) {\n          controlStack.start('nested')\n        } else {\n          // controlStack.start('initial')\n          controlStack.start('outside')\n        };\n\n      }, [control, controlStack, value, fillSize])\n\n      const { colorMode } = useColorMode();\n\n      const body = <div\n          style={{\n            width: viewSize.width,\n            height: viewSize.height,\n            ...style,\n            position: 'relative',\n          }}\n        >\n          <Box \n            position='relative'\n            display='grid' \n            gridTemplateColumns='1fr max-content' \n            height='inherit'\n          >\n            <Box\n              position='relative'\n              overflow='hidden' sx={{ borderRadius: 5 }}\n              border='1px dashed #605c60'\n            > \n              <MonacoEditor\n                options={{\n                  minimap: {\n                    enabled: false\n                  },\n                  lineNumbers: 'off',\n                  wordWrap: true,\n                }}\n                height=\"100%\"\n                width=\"100%\"\n                theme={colorMode === 'light' ? 'light' : \"vs-dark\"}\n                defaultLanguage=\"json\"\n                defaultValue={value || ''}\n                onChange={(value) => setValue(value)}\n                // onMount={handleEditorDidMount}\n              />\n            </Box>\n            <Box\n              as={motion.div}\n              animate={controlStack}\n              variants={stackVariants}\n              initial='initial'\n              // height={stackHeight}\n              height={fillSize ? '100%' : viewSize.height}\n              display='flex'\n              justifyContent='space-between'\n              flexDirection='column'\n              ml={fillSize ? 0 : '0.2rem'}\n            >\n              <IconButton \n                as={motion.div}\n                variants={variants}\n                initial='initial'\n                // whileInView='view'\n                animate='view'\n                aria-label='activate/inactivate button' \n                bg={active && colorMode === 'dark' ? 'gray.700' : 'blue.50'}\n                _hover={{\n                  bg: 'blue.100'\n                }}\n                isRound\n                variant='outline'\n                sx={{ borderColor: active ? '#111' : 'rgb(0, 128, 255)' }}\n                mr={fillSize ? '0.2rem' : 0}\n                mt={fillSize ? '0.2rem' : 0}\n                size='xs'\n                onClick={async () => {\n                    if (active) {\n                      await deep.delete({\n                        _or: [{\n                          id: { _eq: active?.id },\n                      }, {\n                          type_id: deep.idLocal('@deep-foundation/core', 'Contain'),\n                        from_id: link.id,\n                        to_id: active.id,\n                      }],\n                    });\n                  } else {\n                      await deep.insert({\n                        type_id: deep.idLocal('@deep-foundation/core', 'Active'),\n                      from_id: contain.from_id,\n                      to_id: contain.to_id,\n                      in: { data: {\n                          type_id: deep.idLocal('@deep-foundation/core', 'Contain'),\n                        from_id: link.id,\n                      } },\n                    });\n                  }\n                }}\n                icon={active ? <BsLightbulbOff /> : <CustomizableIcon Component={BsLightbulbFill} value={{ color: 'rgb(0, 128, 255)' }} />}\n              />\n              <IconButton \n                as={motion.div}\n                variants={variants}\n                initial='initial'\n                animate={control}\n                whileInView='view'\n                // isDisabled={isSaved}\n                aria-label='save button' \n                isRound\n                bg='blue.50'\n                _hover={{\n                  bg: 'blue.100'\n                }}\n                variant='outline'\n                sx={{ borderColor: 'rgb(0, 128, 255)' }}\n                mr={fillSize ? '0.2rem' : 0}\n                mb={fillSize ? '0.2rem' : 0}\n                // isLoading={!isSaved}\n                size='xs'\n                icon={<CustomizableIcon Component={BsCheck2} value={{ color: 'rgb(0, 128, 255)' }} />}\n                onClick={() => {\n                  try {\n                    const _value = json5.parse(value);\n                    if (!link.value) deep.insert({\n                      link_id: link.id, value: _value,\n                    }, { table: 'objects' });\n                    deep.update({ link_id: link.id }, { value: _value }, { table: 'objects' });\n                  } catch(error) {}\n                }}\n              />\n            </Box>\n          </Box>\n        </div>;\n\n      return  <>\n        {fillSize \n        ? body \n        : <Resize\n            onChangeSize={(viewSize) => setViewSize(viewSize)} \n            style={{\n            // position: 'relative',\n            // overflow: nested ? 'hidden' : 'inherit',\n            borderRadius: 5,\n            border: 'none',\n          }}\n        >{body}</Resize>}\n      </>;\n    }\n  }\n",
        "link_id": 802
      }
    },
    {
      "id": 871,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 358,
        "value": "({ deep, require }) => {\n    const React = require('react');\n    const { useState, useEffect } = React;\n    const json5 = require('json5');\n    const { Input, useColorModeValue } = require('@chakra-ui/react');\n    const { useHotkeys } = require('react-hotkeys-hook');\n    const { useDebounceCallback } = require('@react-hook/debounce');\n    const { useContainer } = require('@deep-foundation/deepcase');\n    return ({ fillSize, style, link, onClose }) => {\n        const currentValue = deep.stringify(link?.value?.value) || '';\n        const [value, setValue] = useState(currentValue);\n        const save = async (value) => {\n            if (!link.value)\n                await deep.insert({\n                    link_id: link.id, value: value,\n                }, { table: 'strings' });\n            deep.update({ link_id: link.id }, { value: value }, { table: 'strings' });\n        };\n        const ref = useHotkeys('enter', async () => {\n            await save(value);\n            onClose && onClose();\n        }, { enableOnTags: [\"INPUT\"] });\n        const setValuesDebounced = useDebounceCallback(async (value) => { await save(value); }, 500);\n        useEffect(() => {\n            setValuesDebounced(value);\n        }, [value]);\n        const bg = useColorModeValue('#eeeeee', '#434343');\n        const hover = useColorModeValue('white', '#1e1e1e');\n        const borderColor = useColorModeValue('#434343', '#eeeeee');\n        const color = useColorModeValue('#1e1e1e', 'white');\n        return React.createElement(\"div\", { style: {\n                width: 300,\n                ...style,\n                position: 'relative',\n            } },\n            React.createElement(Input, { ref: ref, autoFocus: true, type: \"text\", variant: 'filled', variant: 'filled', bg: bg, color: color, borderWidth: 'thin', borderColor: borderColor, _hover: { bg: hover }, _focus: { bg: bg }, sx: {\n                    width: '100%',\n                }, onChange: (e) => setValue(e.target.value), value: value }));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxDQUFDLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxFQUFFLEVBQUU7SUFDaEIsTUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQ2pDLE1BQU0sRUFBRSxRQUFRLEVBQUUsU0FBUyxFQUFFLEdBQUcsS0FBSyxDQUFDO0lBQ3RDLE1BQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUMvQixNQUFNLEVBQUUsS0FBSyxFQUFFLGlCQUFpQixFQUFFLEdBQUcsT0FBTyxDQUFDLGtCQUFrQixDQUFDLENBQUM7SUFDakUsTUFBTSxFQUFFLFVBQVUsRUFBRSxHQUFHLE9BQU8sQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDO0lBQ3JELE1BQU0sRUFBRSxtQkFBbUIsRUFBRSxHQUFHLE9BQU8sQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO0lBQ2hFLE1BQU0sRUFBRSxZQUFZLEVBQUUsR0FBRyxPQUFPLENBQUMsMkJBQTJCLENBQUMsQ0FBQztJQUU5RCxPQUFPLENBQUMsRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFO1FBRzVDLE1BQU0sWUFBWSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxFQUFFLEtBQUssRUFBRSxLQUFLLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDOUQsTUFBTSxDQUFDLEtBQUssRUFBRSxRQUFRLENBQUMsR0FBRyxRQUFRLENBQUMsWUFBWSxDQUFDLENBQUM7UUFDakQsTUFBTSxJQUFJLEdBQUcsS0FBSyxFQUFFLEtBQUssRUFBRSxFQUFFO1lBQ3pCLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSztnQkFBRSxNQUFNLElBQUksQ0FBQyxNQUFNLENBQUM7b0JBQ2pDLE9BQU8sRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFLEtBQUssRUFBRSxLQUFLO2lCQUNqQyxFQUFFLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRSxDQUFDLENBQUM7WUFDekIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFLE9BQU8sRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLENBQUMsQ0FBQztRQUU1RSxDQUFDLENBQUM7UUFDRixNQUFNLEdBQUcsR0FBRyxVQUFVLENBQUMsT0FBTyxFQUFFLEtBQUssSUFBSSxFQUFFO1lBQ3pDLE1BQU0sSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ2xCLE9BQU8sSUFBSSxPQUFPLEVBQUUsQ0FBQztRQUN2QixDQUFDLEVBQUUsRUFBRSxZQUFZLEVBQUUsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLENBQUM7UUFFaEMsTUFBTSxrQkFBa0IsR0FBRyxtQkFBbUIsQ0FBQyxLQUFLLEVBQUMsS0FBSyxFQUFFLEVBQUUsR0FBRSxNQUFNLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQSxDQUFBLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztRQUV6RixTQUFTLENBQUMsR0FBRyxFQUFFO1lBQ2Isa0JBQWtCLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDNUIsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQTtRQUVYLE1BQU0sRUFBRSxHQUFHLGlCQUFpQixDQUFDLFNBQVMsRUFBRSxTQUFTLENBQUMsQ0FBQztRQUNuRCxNQUFNLEtBQUssR0FBRyxpQkFBaUIsQ0FBQyxPQUFPLEVBQUUsU0FBUyxDQUFDLENBQUM7UUFDcEQsTUFBTSxXQUFXLEdBQUcsaUJBQWlCLENBQUMsU0FBUyxFQUFFLFNBQVMsQ0FBQyxDQUFDO1FBQzVELE1BQU0sS0FBSyxHQUFHLGlCQUFpQixDQUFDLFNBQVMsRUFBRSxPQUFPLENBQUMsQ0FBQztRQUV0RCxPQUFPLDZCQUNILEtBQUssRUFBRTtnQkFDTCxLQUFLLEVBQUUsR0FBRztnQkFDVixHQUFHLEtBQUs7Z0JBQ1IsUUFBUSxFQUFFLFVBQVU7YUFFckI7WUFFRCxvQkFBQyxLQUFLLElBQ0osR0FBRyxFQUFFLEdBQUcsRUFDUixTQUFTLFFBQ1QsSUFBSSxFQUFDLE1BQU0sRUFDWCxPQUFPLEVBQUMsUUFBUSxFQUNoQixPQUFPLEVBQUMsUUFBUSxFQUNoQixFQUFFLEVBQUUsRUFBRSxFQUNOLEtBQUssRUFBRSxLQUFLLEVBQ1osV0FBVyxFQUFDLE1BQU0sRUFDbEIsV0FBVyxFQUFFLFdBQVcsRUFDeEIsTUFBTSxFQUFFLEVBQUMsRUFBRSxFQUFFLEtBQUssRUFBQyxFQUNuQixNQUFNLEVBQUUsRUFBQyxFQUFFLEVBQUUsRUFBRSxFQUFDLEVBQ2hCLEVBQUUsRUFBRTtvQkFDRixLQUFLLEVBQUUsTUFBTTtpQkFDZCxFQUNELFFBQVEsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLEVBQ3pDLEtBQUssRUFBRSxLQUFLLEdBQ1osQ0FDRSxDQUFDO0lBQ1QsQ0FBQyxDQUFBO0FBQ0gsQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiKHsgZGVlcCwgcmVxdWlyZSB9KSA9PiB7XG4gICAgICBjb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG4gICAgY29uc3QgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gPSBSZWFjdDtcbiAgICBjb25zdCBqc29uNSA9IHJlcXVpcmUoJ2pzb241Jyk7XG4gICAgY29uc3QgeyBJbnB1dCwgdXNlQ29sb3JNb2RlVmFsdWUgfSA9IHJlcXVpcmUoJ0BjaGFrcmEtdWkvcmVhY3QnKTtcbiAgICBjb25zdCB7IHVzZUhvdGtleXMgfSA9IHJlcXVpcmUoJ3JlYWN0LWhvdGtleXMtaG9vaycpO1xuICAgIGNvbnN0IHsgdXNlRGVib3VuY2VDYWxsYmFjayB9ID0gcmVxdWlyZSgnQHJlYWN0LWhvb2svZGVib3VuY2UnKTtcbiAgICBjb25zdCB7IHVzZUNvbnRhaW5lciB9ID0gcmVxdWlyZSgnQGRlZXAtZm91bmRhdGlvbi9kZWVwY2FzZScpO1xuICAgIC8vIE9ubHkgc3RyaW5nIGVkaXRvci5cbiAgICByZXR1cm4gKHsgZmlsbFNpemUsIHN0eWxlLCBsaW5rLCBvbkNsb3NlIH0pID0+IHtcbiAgICAgIFxuICAgICAgXG4gICAgICBjb25zdCBjdXJyZW50VmFsdWUgPSBkZWVwLnN0cmluZ2lmeShsaW5rPy52YWx1ZT8udmFsdWUpIHx8ICcnO1xuICAgICAgY29uc3QgW3ZhbHVlLCBzZXRWYWx1ZV0gPSB1c2VTdGF0ZShjdXJyZW50VmFsdWUpO1xuICAgICAgY29uc3Qgc2F2ZSA9IGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgIGlmICghbGluay52YWx1ZSkgYXdhaXQgZGVlcC5pbnNlcnQoe1xuICAgICAgICAgICAgbGlua19pZDogbGluay5pZCwgdmFsdWU6IHZhbHVlLFxuICAgICAgICB9LCB7IHRhYmxlOiAnc3RyaW5ncycgfSk7XG4gICAgICAgIGRlZXAudXBkYXRlKHsgbGlua19pZDogbGluay5pZCB9LCB7IHZhbHVlOiB2YWx1ZSB9LCB7IHRhYmxlOiAnc3RyaW5ncycgfSk7XG4gICAgICAgIFxuICAgICAgfTtcbiAgICAgIGNvbnN0IHJlZiA9IHVzZUhvdGtleXMoJ2VudGVyJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCBzYXZlKHZhbHVlKTtcbiAgICAgICAgb25DbG9zZSAmJiBvbkNsb3NlKCk7XG4gICAgICB9LCB7IGVuYWJsZU9uVGFnczogW1wiSU5QVVRcIl0gfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHNldFZhbHVlc0RlYm91bmNlZCA9IHVzZURlYm91bmNlQ2FsbGJhY2soYXN5bmModmFsdWUpID0+IHthd2FpdCBzYXZlKHZhbHVlKX0sIDUwMCk7XG5cbiAgICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIHNldFZhbHVlc0RlYm91bmNlZCh2YWx1ZSk7XG4gICAgICB9LCBbdmFsdWVdKVxuXG4gICAgICBjb25zdCBiZyA9IHVzZUNvbG9yTW9kZVZhbHVlKCcjZWVlZWVlJywgJyM0MzQzNDMnKTtcbiAgICAgIGNvbnN0IGhvdmVyID0gdXNlQ29sb3JNb2RlVmFsdWUoJ3doaXRlJywgJyMxZTFlMWUnKTtcbiAgICAgIGNvbnN0IGJvcmRlckNvbG9yID0gdXNlQ29sb3JNb2RlVmFsdWUoJyM0MzQzNDMnLCAnI2VlZWVlZScpO1xuICAgICAgY29uc3QgY29sb3IgPSB1c2VDb2xvck1vZGVWYWx1ZSgnIzFlMWUxZScsICd3aGl0ZScpO1xuXG4gICAgcmV0dXJuIDxkaXZcbiAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICB3aWR0aDogMzAwLFxuICAgICAgICAgIC4uLnN0eWxlLFxuICAgICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLCBcbiAgICAgICAgICAvLyBiYWNrZ3JvdW5kOiAncmVkJ1xuICAgICAgICB9fVxuICAgICAgPlxuICAgICAgICA8SW5wdXRcbiAgICAgICAgICByZWY9e3JlZn1cbiAgICAgICAgICBhdXRvRm9jdXNcbiAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgdmFyaWFudD0nZmlsbGVkJ1xuICAgICAgICAgIHZhcmlhbnQ9J2ZpbGxlZCdcbiAgICAgICAgICBiZz17Ymd9XG4gICAgICAgICAgY29sb3I9e2NvbG9yfVxuICAgICAgICAgIGJvcmRlcldpZHRoPSd0aGluJ1xuICAgICAgICAgIGJvcmRlckNvbG9yPXtib3JkZXJDb2xvcn1cbiAgICAgICAgICBfaG92ZXI9e3tiZzogaG92ZXJ9fVxuICAgICAgICAgIF9mb2N1cz17e2JnOiBiZ319XG4gICAgICAgICAgc3g9e3tcbiAgICAgICAgICAgIHdpZHRoOiAnMTAwJScsXG4gICAgICAgICAgfX1cbiAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldFZhbHVlKGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICB2YWx1ZT17dmFsdWV9XG4gICAgICAgIC8+XG4gICAgICA8L2Rpdj47XG4gICAgfVxuICB9Il19",
        "link_id": 871
      }
    },
    {
      "id": 872,
      "type_id": 3,
      "from_id": 805,
      "to_id": 871,
      "value": {
        "id": 357,
        "value": "generated",
        "link_id": 872
      }
    },
    {
      "id": 873,
      "type_id": 143,
      "from_id": 871,
      "to_id": 805
    },
    {
      "id": 874,
      "type_id": 3,
      "from_id": 805,
      "to_id": 873
    },
    {
      "id": 811,
      "type_id": 35,
      "from_id": 145,
      "to_id": 810
    },
    {
      "id": 812,
      "type_id": 156,
      "from_id": 57,
      "to_id": 811
    },
    {
      "id": 813,
      "type_id": 2,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 366,
        "value": "@deep-foundation/deepcase",
        "link_id": 813
      }
    },
    {
      "id": 1100,
      "type_id": 1,
      "from_id": 8,
      "to_id": 8
    },
    {
      "id": 1737,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 665,
        "value": "import {\r\n  DeepClient,\r\n  DeepClientResult,\r\n  SerialOperation,\r\n  Table,\r\n} from \"@deep-foundation/deeplinks/imports/client.js\";\r\nimport { BoolExpLink } from \"@deep-foundation/deeplinks/imports/client_types.js\";\r\nimport {\r\n  Link,\r\n  MinilinksResult,\r\n} from \"@deep-foundation/deeplinks/imports/minilinks.js\";\r\n\r\nasync (options: {\r\n  deep: DeepClient;\r\n  rootLinkId?: number;\r\n  obj: Obj;\r\n  customMethods?: Record<string, Function>;\r\n  resultLinkId?: number;\r\n}) => {\r\n  const { deep, rootLinkId, obj, customMethods, resultLinkId } = options;\r\n  const { createSerialOperation } = await import(\r\n    \"@deep-foundation/deeplinks/imports/gql/index.js\"\r\n  );\r\n  const { pascalCase } = await import(\"case-anything\");\r\n  const { default: debug } = await import(\"debug\");\r\n  const { default: util } = await import(\"util\");\r\n  const logs: Array<any> = [];\r\n  const packageLog = debug(\"@deep-foundation/object-to-links-async-converter\");\r\n  packageLog({ options });\r\n\r\n  class ObjectToLinksConverter {\r\n    reservedLinkIds: Array<number>;\r\n    rootLink: Link<number>;\r\n    obj: Obj;\r\n    resultLink: Link<number>;\r\n    deep = deep;\r\n    static requiredPackageNames = {\r\n      core: \"@deep-foundation/core\",\r\n      boolean: \"@deep-foundation/boolean\",\r\n    };\r\n    static requiredPackagesInMinilinks = {\r\n      ...this.requiredPackageNames,\r\n      objectToLinksConverter:\r\n        \"@deep-foundation/object-to-links-async-converter\",\r\n    };\r\n\r\n    constructor(options: ObjectToLinksConverterOptions) {\r\n      this.rootLink = options.rootLink;\r\n      this.reservedLinkIds = options.reservedLinkIds;\r\n      this.obj = options.obj;\r\n      this.resultLink = options.resultLink;\r\n    }\r\n\r\n    static getLogger(namespace: string) {\r\n      const getLoggerLogger = debug(this.getLogger.name);\r\n      getLoggerLogger({ options });\r\n      const resultLogger = packageLog.extend(\r\n        `${ObjectToLinksConverter.name}${namespace ? `:${namespace}` : \"\"}`,\r\n      );\r\n      resultLogger.enabled = true;\r\n      resultLogger.log = (...content: Array<any>) => {\r\n        logs.push(...content);\r\n      };\r\n      return resultLogger;\r\n    }\r\n\r\n    static async applyContainTreeLinksDownToParentToMinilinks(\r\n      options: ApplyContainTreeLinksDownToParentToMinilinksOptions,\r\n    ) {\r\n      const log = ObjectToLinksConverter.getLogger(\r\n        ObjectToLinksConverter.applyContainTreeLinksDownToParentToMinilinks\r\n          .name,\r\n      );\r\n      const links = (await this.getContainTreeLinksDownToParent({\r\n        linkExp: options.linkExp,\r\n      })) as DeepClientResult<Link<number>[]>;\r\n      log({ links });\r\n      const minilinksApplyResult = options.minilinks.apply(links.data);\r\n      log({ minilinksApplyResult });\r\n      return minilinksApplyResult;\r\n    }\r\n\r\n    static async getContainTreeLinksDownToParent(\r\n      options: GetContainTreeLinksDownToLinkOptions,\r\n    ) {\r\n      const log = ObjectToLinksConverter.getLogger(\r\n        ObjectToLinksConverter.getContainTreeLinksDownToParent.name,\r\n      );\r\n      const { linkExp } = options;\r\n      const query: BoolExpLink = {\r\n        up: {\r\n          tree_id: await deep.id(\"@deep-foundation/core\", \"containTree\"),\r\n          parent: linkExp,\r\n        },\r\n      };\r\n      log({ query });\r\n      const result = await deep.select(query);\r\n      log({ result });\r\n      return result;\r\n    }\r\n\r\n    /**\r\n     * Undefined is returned of root object is empty\r\n     */\r\n    static async init(\r\n      options: ObjectToLinksConverterInitOptions,\r\n    ): Promise<ObjectToLinksConverter> {\r\n      const log = ObjectToLinksConverter.getLogger(\r\n        ObjectToLinksConverter.init.name,\r\n      );\r\n      const { obj } = options;\r\n      const containTreeLinksDownToCoreAndThisPackageLinkApplyMinilinksResult =\r\n        await this.applyContainTreeLinksDownToParentToMinilinks({\r\n          linkExp: {\r\n            _or: Object.values(\r\n              ObjectToLinksConverter.requiredPackagesInMinilinks,\r\n            ).map((packageName) => ({\r\n              id: {\r\n                _id: [packageName],\r\n              },\r\n            })),\r\n          },\r\n          minilinks: deep.minilinks,\r\n        });\r\n      log({ containTreeLinksDownToCoreAndThisPackageLinkApplyMinilinksResult });\r\n      const rootLink: Link<number> = options.rootLinkId\r\n        ? await deep.select(options.rootLinkId).then((result) => result.data[0])\r\n        : await deep\r\n            .insert(\r\n              {\r\n                // TODO: Replace id with idLocal when it work properly\r\n                type_id: await deep.id(deep.linkId!, \"Root\"),\r\n              },\r\n              {\r\n                returning: deep.linksSelectReturning,\r\n              },\r\n            )\r\n            .then((result) => result.data[0] as Link<number>);\r\n      log({ rootLink });\r\n      const containTreeLinksDownToRootLinkApplyMinilinksResult =\r\n        await this.applyContainTreeLinksDownToParentToMinilinks({\r\n          linkExp: {\r\n            id: rootLink.id,\r\n          },\r\n          minilinks: deep.minilinks,\r\n        });\r\n      log({ containTreeLinksDownToRootLinkApplyMinilinksResult });\r\n      const linkIdsToReserveCount = this.getLinksToReserveCount({ value: obj });\r\n      log({ linkIdsToReserveCount });\r\n      const reservedLinkIds = await deep.reserve(linkIdsToReserveCount);\r\n      log({ reservedLinkIds });\r\n      const resultLink = options.resultLinkId\r\n        ? await deep\r\n            .select(options.resultLinkId)\r\n            .then((result) => result.data[0])\r\n        : rootLink;\r\n      if (options.resultLinkId && !resultLink) {\r\n        throw new Error(\r\n          `Result link with id ${options.resultLinkId} not found`,\r\n        );\r\n      }\r\n      const converter = new this({\r\n        reservedLinkIds,\r\n        rootLink,\r\n        obj,\r\n        resultLink,\r\n      });\r\n      log({ converter });\r\n      return converter;\r\n    }\r\n\r\n    async convert() {\r\n      const log = ObjectToLinksConverter.getLogger(\"convert\");\r\n\r\n      const operations = await this.makeUpdateOperationsForObjectValue({\r\n        link: this.resultLink,\r\n        value: this.obj,\r\n      });\r\n      log({ operations });\r\n\r\n      const hasResultTypeLinkId = await deep.id(deep.linkId!, \"HasResult\");\r\n      const {\r\n        data: [hasResultLink],\r\n      } = await deep.select({\r\n        type_id: hasResultTypeLinkId,\r\n        from_id: this.rootLink.id,\r\n      });\r\n      if (hasResultLink) {\r\n        operations.push(\r\n          createSerialOperation({\r\n            type: \"update\",\r\n            table: \"links\",\r\n            exp: {\r\n              type_id: hasResultTypeLinkId,\r\n              from_id: this.rootLink.id,\r\n            },\r\n            value: {\r\n              to_id: this.resultLink.id,\r\n            },\r\n          }),\r\n        );\r\n      } else {\r\n        operations.push(\r\n          createSerialOperation({\r\n            type: \"insert\",\r\n            table: \"links\",\r\n            objects: {\r\n              type_id: hasResultTypeLinkId,\r\n              from_id: this.rootLink.id,\r\n              to_id: this.resultLink.id,\r\n            },\r\n          }),\r\n        );\r\n      }\r\n\r\n      const serialResult = await deep.serial({\r\n        operations,\r\n      });\r\n      log({ serialResult });\r\n\r\n      return {\r\n        serialResult,\r\n        rootLinkId: this.rootLink.id,\r\n        resultLinkId: this.resultLink.id,\r\n      };\r\n    }\r\n\r\n    static getLinksToReserveCount(options: {\r\n      value: string | number | boolean | object;\r\n    }): number {\r\n      const { value } = options;\r\n      const log = ObjectToLinksConverter.getLogger(\r\n        ObjectToLinksConverter.getLinksToReserveCount.name,\r\n      );\r\n      let count = 0;\r\n      const typeOfValue = typeof value;\r\n      log({ typeOfValue });\r\n      const reservedLinksCountForOneLink =\r\n        1 + // Type\r\n        1; // Contain for type\r\n      if (typeOfValue === \"string\") {\r\n        count = reservedLinksCountForOneLink;\r\n      } else if (typeOfValue === \"number\") {\r\n        count = reservedLinksCountForOneLink;\r\n      } else if (typeOfValue === \"boolean\") {\r\n        count = reservedLinksCountForOneLink;\r\n      } else if (Array.isArray(value)) {\r\n        const array = value as Array<any>;\r\n        for (const arrayValue of array) {\r\n          if (!arrayValue) return count;\r\n          count += this.getLinksToReserveCount({ value: arrayValue });\r\n        }\r\n      } else if (typeOfValue === \"object\") {\r\n        count += reservedLinksCountForOneLink;\r\n        for (const [propertyKey, propertyValue] of Object.entries(value)) {\r\n          if (!value) return count;\r\n          count += this.getLinksToReserveCount({ value: propertyValue });\r\n        }\r\n      }\r\n      log({ count });\r\n      return count;\r\n    }\r\n\r\n    async makeUpdateOperationsForBooleanValue(\r\n      options: MakeUpdateOperationsForBooleanValueOptions,\r\n    ) {\r\n      const log = ObjectToLinksConverter.getLogger(\r\n        this.makeUpdateOperationsForBooleanValue.name,\r\n      );\r\n      log({ options });\r\n      const { link, value } = options;\r\n      const operations: Array<SerialOperation> = [];\r\n      operations.push(\r\n        createSerialOperation({\r\n          type: \"update\",\r\n          table: \"links\",\r\n          exp: {\r\n            id: link.id,\r\n          },\r\n          value: {\r\n            to_id: await deep.id(\r\n              ObjectToLinksConverter.requiredPackageNames.boolean,\r\n              value.toString(),\r\n            ),\r\n          },\r\n        }),\r\n      );\r\n      log({ operations });\r\n      return operations;\r\n    }\r\n\r\n    async makeUpdateOperationsForStringValue(\r\n      options: MakeUpdateOperationsForStringValueOptions,\r\n    ) {\r\n      const log = ObjectToLinksConverter.getLogger(\r\n        this.makeUpdateOperationsForStringValue.name,\r\n      );\r\n      log({ options });\r\n      const { link, value } = options;\r\n      const operations: Array<SerialOperation> = [];\r\n      operations.push(\r\n        createSerialOperation({\r\n          type: \"update\",\r\n          table: `strings` as Table<\"update\">,\r\n          exp: {\r\n            link_id: link.id,\r\n          },\r\n          value: {\r\n            value: value,\r\n          },\r\n        }),\r\n      );\r\n      log({ operations });\r\n      return operations;\r\n    }\r\n\r\n    async makeUpdateOperationsForNumberValue(\r\n      options: MakeUpdateOperationsForNumberValueOptions,\r\n    ) {\r\n      const log = ObjectToLinksConverter.getLogger(\r\n        this.makeUpdateOperationsForNumberValue.name,\r\n      );\r\n      log({ options });\r\n      const { link, value } = options;\r\n      const operations: Array<SerialOperation> = [];\r\n      operations.push(\r\n        createSerialOperation({\r\n          type: \"update\",\r\n          table: `numbers` as Table<\"update\">,\r\n          exp: {\r\n            link_id: link.id,\r\n          },\r\n          value: {\r\n            value: value,\r\n          },\r\n        }),\r\n      );\r\n      log({ operations });\r\n      return operations;\r\n    }\r\n\r\n    async makeUpdateOperationsForArrayValue<TValue extends AllowedArray>(\r\n      options: MakeUpdateOperationsForAnyValueOptions<TValue>,\r\n    ) {\r\n      const log = ObjectToLinksConverter.getLogger(\r\n        this.makeUpdateOperationsForAnyValue.name,\r\n      );\r\n      const { link, value } = options;\r\n      const operations: Array<SerialOperation> = [];\r\n\r\n      await deep.delete({\r\n        up: {\r\n          tree_id: await deep.id(\r\n            ObjectToLinksConverter.requiredPackagesInMinilinks.core,\r\n            \"ContainTree\",\r\n          ),\r\n          parent_id: link.id,\r\n        },\r\n      });\r\n\r\n      for (let i = 0; i < value.length; i++) {\r\n        const element = value[i];\r\n        operations.push(\r\n          ...(await this.makeInsertOperationsForAnyValue({\r\n            value: element,\r\n            linkId: this.reservedLinkIds.pop()!,\r\n            name: i.toString(0),\r\n            parentLinkId: link.id,\r\n          })),\r\n        );\r\n      }\r\n\r\n      return operations;\r\n    }\r\n\r\n    async makeUpdateOperationsForAnyValue<TValue extends AllowedValue>(\r\n      options: MakeUpdateOperationsForAnyValueOptions<TValue>,\r\n    ) {\r\n      const log = ObjectToLinksConverter.getLogger(\r\n        this.makeUpdateOperationsForAnyValue.name,\r\n      );\r\n      const { link, value } = options;\r\n      const operations: Array<SerialOperation> = [];\r\n      if (typeof value === \"boolean\") {\r\n        operations.push(\r\n          ...(await this.makeUpdateOperationsForBooleanValue({\r\n            ...options,\r\n            value,\r\n          })),\r\n        );\r\n      } else if (typeof value === \"string\") {\r\n        operations.push(\r\n          ...(await this.makeUpdateOperationsForStringValue({\r\n            ...options,\r\n            value,\r\n          })),\r\n        );\r\n      } else if (typeof value === \"number\") {\r\n        operations.push(\r\n          ...(await this.makeUpdateOperationsForNumberValue({\r\n            ...options,\r\n            value,\r\n          })),\r\n        );\r\n      } else if (Array.isArray(value)) {\r\n        operations.push(\r\n          ...(await this.makeUpdateOperationsForArrayValue({\r\n            ...options,\r\n            value,\r\n          })),\r\n        );\r\n      } else if (typeof value === \"object\") {\r\n        operations.push(\r\n          ...(await this.makeUpdateOperationsForObjectValue({\r\n            ...options,\r\n            value,\r\n          })),\r\n        );\r\n      } else {\r\n        throw new Error(`Type of value ${typeof value} is not supported`);\r\n      }\r\n\r\n      return operations;\r\n    }\r\n\r\n    async makeUpdateOperationsForObjectValue(\r\n      options: MakeUpdateOperationsForObjectValueOptions,\r\n    ) {\r\n      const log = ObjectToLinksConverter.getLogger(\r\n        this.makeUpdateOperationsForObjectValue.name,\r\n      );\r\n      const { link, value } = options;\r\n      log({ options });\r\n      const operations: Array<SerialOperation> = [];\r\n\r\n      for (const [propertyKey, propertyValue] of Object.entries(value)) {\r\n        log({ propertyKey, propertyValue });\r\n        const [propertyLink] = deep.minilinks.query({\r\n          id: {\r\n            _id: [link.id, propertyKey],\r\n          },\r\n        });\r\n        log({ propertyLink });\r\n        if (propertyLink) {\r\n          let propertyUpdateOperations: Array<SerialOperation> = [];\r\n          propertyUpdateOperations = await this.makeUpdateOperationsForAnyValue(\r\n            {\r\n              link: propertyLink,\r\n              value: propertyValue,\r\n            },\r\n          );\r\n          log({ propertyUpdateOperations });\r\n          operations.push(...propertyUpdateOperations);\r\n        } else {\r\n          if (\r\n            typeof propertyValue !== \"string\" &&\r\n            typeof propertyValue !== \"number\" &&\r\n            typeof propertyValue !== \"boolean\" &&\r\n            !Array.isArray(propertyValue) &&\r\n            typeof propertyValue !== \"object\"\r\n          ) {\r\n            log(\r\n              `Skipping property ${propertyKey} because its type ${typeof value} is not supported`,\r\n            );\r\n            continue;\r\n          }\r\n\r\n          log(\"TEMPORARY! REMOVE THIS!\");\r\n          log(`minilinks.links`, deep.minilinks.links);\r\n          log(\r\n            `package link`,\r\n            deep.minilinks.query({\r\n              id: deep.linkId!,\r\n            }),\r\n          );\r\n          log(\r\n            `contain to string`,\r\n            deep.minilinks.query({\r\n              // TODO: Replace id with idLocal when it work properly\r\n              type_id: await deep.id(\"@deep-foundation/core\", \"Contain\"),\r\n              string: {\r\n                value: \"String\",\r\n              },\r\n              from_id: deep.linkId!,\r\n            }),\r\n          );\r\n          log(\r\n            `contain to string`,\r\n            deep.minilinks.query({\r\n              id: {\r\n                _id: [deep.linkId!, \"String\"],\r\n              },\r\n            }),\r\n          );\r\n\r\n          const propertyLinkId = this.reservedLinkIds.pop();\r\n          log({ propertyLinkId });\r\n          if (!propertyLinkId) {\r\n            throw new Error(`Not enough reserved link ids`);\r\n          }\r\n          const propertyInsertOperations =\r\n            await this.makeInsertOperationsForAnyValue({\r\n              linkId: propertyLinkId,\r\n              parentLinkId: link.id,\r\n              value: propertyValue,\r\n              name: propertyKey,\r\n            });\r\n          log({ propertyInsertOperations });\r\n          operations.push(...propertyInsertOperations);\r\n        }\r\n\r\n        log({ operations });\r\n      }\r\n\r\n      return operations;\r\n    }\r\n\r\n    async makeInsertOperationsForBooleanValue(\r\n      options: MakeInsertOperationsForBooleanOptions,\r\n    ) {\r\n      const operations: Array<SerialOperation> = [];\r\n      const { value, parentLinkId, linkId, name } = options;\r\n      const log = ObjectToLinksConverter.getLogger(\r\n        this.makeInsertOperationsForBooleanValue.name,\r\n      );\r\n\r\n      const linkInsertSerialOperation = createSerialOperation({\r\n        type: \"insert\",\r\n        table: \"links\",\r\n        objects: {\r\n          id: linkId,\r\n          type_id: await deep.id(deep.linkId!, pascalCase(typeof value)),\r\n          from_id: parentLinkId,\r\n          to_id: await deep.id(\r\n            ObjectToLinksConverter.requiredPackageNames.boolean,\r\n            value.toString(),\r\n          ),\r\n        },\r\n      });\r\n      log({ linkInsertSerialOperation });\r\n      operations.push(linkInsertSerialOperation);\r\n\r\n      const containInsertSerialOperation = createSerialOperation({\r\n        type: \"insert\",\r\n        table: \"links\",\r\n        objects: {\r\n          // TODO: Replace id with idLocal when it work properly\r\n          type_id: await deep.id(\"@deep-foundation/core\", \"Contain\"),\r\n          from_id: parentLinkId,\r\n          to_id: linkId,\r\n          string: {\r\n            data: {\r\n              value: name,\r\n            },\r\n          },\r\n        },\r\n      });\r\n      log({ containInsertSerialOperation });\r\n      operations.push(containInsertSerialOperation);\r\n\r\n      log({ operations });\r\n      return operations;\r\n    }\r\n    async makeInsertOperationsForStringValue(\r\n      options: MakeInsertOperationsForStringOptions,\r\n    ) {\r\n      const operations: Array<SerialOperation> = [];\r\n      const { value, parentLinkId, linkId, name } = options;\r\n      const log = ObjectToLinksConverter.getLogger(\r\n        \"makeInsertOperationsForStringValue\",\r\n      );\r\n      const linkInsertSerialOperation = createSerialOperation({\r\n        type: \"insert\",\r\n        table: \"links\",\r\n        objects: {\r\n          id: linkId,\r\n          from_id: parentLinkId,\r\n          to_id: parentLinkId,\r\n          type_id: await deep.id(deep.linkId!, pascalCase(typeof value)),\r\n        },\r\n      });\r\n      log({ linkInsertSerialOperation });\r\n      operations.push(linkInsertSerialOperation);\r\n\r\n      const stringValueInsertSerialOperation = createSerialOperation({\r\n        type: \"insert\",\r\n        table: `${typeof value}s` as Table<\"insert\">,\r\n        objects: {\r\n          link_id: linkId,\r\n          value: value,\r\n        },\r\n      });\r\n      log({ stringValueInsertSerialOperation });\r\n      operations.push(stringValueInsertSerialOperation);\r\n\r\n      const containInsertSerialOperation = createSerialOperation({\r\n        type: \"insert\",\r\n        table: \"links\",\r\n        objects: {\r\n          // TODO: Replace id with idLocal when it work properly\r\n          type_id: await deep.id(\"@deep-foundation/core\", \"Contain\"),\r\n          from_id: parentLinkId,\r\n          to_id: linkId,\r\n          string: {\r\n            data: {\r\n              value: name,\r\n            },\r\n          },\r\n        },\r\n      });\r\n      log({ containInsertSerialOperation });\r\n      operations.push(containInsertSerialOperation);\r\n\r\n      log({ operations });\r\n      return operations;\r\n    }\r\n\r\n    async makeInsertOperationsForNumberValue(\r\n      options: MakeInsertOperationsForNumberOptions,\r\n    ) {\r\n      const operations: Array<SerialOperation> = [];\r\n      const { value, parentLinkId, linkId, name } = options;\r\n      const log = ObjectToLinksConverter.getLogger(\r\n        \"makeInsertOperationsForStringValue\",\r\n      );\r\n      const linkInsertSerialOperation = createSerialOperation({\r\n        type: \"insert\",\r\n        table: \"links\",\r\n        objects: {\r\n          id: linkId,\r\n          from_id: parentLinkId,\r\n          to_id: parentLinkId,\r\n          type_id: await deep.id(deep.linkId!, pascalCase(typeof value)),\r\n        },\r\n      });\r\n      log({ linkInsertSerialOperation });\r\n      operations.push(linkInsertSerialOperation);\r\n\r\n      const stringValueInsertSerialOperation = createSerialOperation({\r\n        type: \"insert\",\r\n        table: `${typeof value}s` as Table<\"insert\">,\r\n        objects: {\r\n          link_id: linkId,\r\n          value: value,\r\n        },\r\n      });\r\n      log({ stringValueInsertSerialOperation });\r\n      operations.push(stringValueInsertSerialOperation);\r\n\r\n      const containInsertSerialOperation = createSerialOperation({\r\n        type: \"insert\",\r\n        table: \"links\",\r\n        objects: {\r\n          // TODO: Replace id with idLocal when it work properly\r\n          type_id: await deep.id(\"@deep-foundation/core\", \"Contain\"),\r\n          from_id: parentLinkId,\r\n          to_id: linkId,\r\n          string: {\r\n            data: {\r\n              value: name,\r\n            },\r\n          },\r\n        },\r\n      });\r\n      log({ containInsertSerialOperation });\r\n      operations.push(containInsertSerialOperation);\r\n\r\n      log({ operations });\r\n      return operations;\r\n    }\r\n\r\n    async makeInsertOperationsForArrayValue(\r\n      options: MakeInsertOperationsForArrayValueOptions,\r\n    ) {\r\n      const operations: Array<SerialOperation> = [];\r\n      const { value, linkId, name, parentLinkId } = options;\r\n      const log = ObjectToLinksConverter.getLogger(\r\n        \"makeInsertOperationsForStringValue\",\r\n      );\r\n\r\n      const linkInsertSerialOperation = createSerialOperation({\r\n        type: \"insert\",\r\n        table: \"links\",\r\n        objects: {\r\n          id: linkId,\r\n          type_id: await deep.id(deep.linkId!, pascalCase(typeof value)),\r\n          from_id: parentLinkId,\r\n          to_id: parentLinkId,\r\n        },\r\n      });\r\n      log({ linkInsertSerialOperation });\r\n      operations.push(linkInsertSerialOperation);\r\n\r\n      const containInsertSerialOperation = createSerialOperation({\r\n        type: \"insert\",\r\n        table: \"links\",\r\n        objects: {\r\n          // TODO: Replace id with idLocal when it work properly\r\n          type_id: await deep.id(\"@deep-foundation/core\", \"Contain\"),\r\n          from_id: parentLinkId,\r\n          to_id: linkId,\r\n          string: {\r\n            data: {\r\n              value: name,\r\n            },\r\n          },\r\n        },\r\n      });\r\n      log({ containInsertSerialOperation });\r\n      operations.push(containInsertSerialOperation);\r\n\r\n      for (let i = 0; i < value.length; i++) {\r\n        const element = value[i];\r\n        operations.push(\r\n          ...(await this.makeInsertOperationsForAnyValue({\r\n            value: element,\r\n            parentLinkId: linkId,\r\n            linkId: this.reservedLinkIds.pop()!,\r\n            name: i.toString(),\r\n          })),\r\n        );\r\n      }\r\n\r\n      return operations;\r\n    }\r\n\r\n    async makeInsertOperationsForPrimitiveValue(\r\n      options: MakeInsertOperationsForPrimitiveValueOptions,\r\n    ) {\r\n      const operations: Array<SerialOperation> = [];\r\n      const { value } = options;\r\n      if (typeof value === \"string\") {\r\n        operations.push(\r\n          ...(await this.makeInsertOperationsForStringValue({\r\n            ...options,\r\n            value,\r\n          })),\r\n        );\r\n      } else if (typeof value === \"number\") {\r\n        operations.push(\r\n          ...(await this.makeInsertOperationsForNumberValue({\r\n            ...options,\r\n            value,\r\n          })),\r\n        );\r\n      } else if (typeof value === \"boolean\") {\r\n        operations.push(\r\n          ...(await this.makeInsertOperationsForBooleanValue({\r\n            ...options,\r\n            value,\r\n          })),\r\n        );\r\n      }\r\n      return operations;\r\n    }\r\n\r\n    async makeInsertOperationsForObjectValue(\r\n      options: MakeInsertOperationsForObjectValue,\r\n    ) {\r\n      const operations: Array<SerialOperation> = [];\r\n      const { value, linkId, name, parentLinkId } = options;\r\n      const log = ObjectToLinksConverter.getLogger(\r\n        this.makeInsertOperationsForObjectValue.name,\r\n      );\r\n\r\n      const linkInsertSerialOperation = createSerialOperation({\r\n        type: \"insert\",\r\n        table: \"links\",\r\n        objects: {\r\n          id: linkId,\r\n          type_id: await deep.id(deep.linkId!, pascalCase(typeof value)),\r\n          from_id: parentLinkId,\r\n          to_id: parentLinkId,\r\n        },\r\n      });\r\n      log({ linkInsertSerialOperation });\r\n      operations.push(linkInsertSerialOperation);\r\n\r\n      const containInsertSerialOperation = createSerialOperation({\r\n        type: \"insert\",\r\n        table: \"links\",\r\n        objects: {\r\n          // TODO: Replace id with idLocal when it work properly\r\n          type_id: await deep.id(\"@deep-foundation/core\", \"Contain\"),\r\n          from_id: parentLinkId,\r\n          to_id: linkId,\r\n          string: {\r\n            data: {\r\n              value: name,\r\n            },\r\n          },\r\n        },\r\n      });\r\n      log({ containInsertSerialOperation });\r\n      operations.push(containInsertSerialOperation);\r\n\r\n      for (const [propertyKey, propertyValue] of Object.entries(value)) {\r\n        if (\r\n          typeof propertyValue !== \"string\" &&\r\n          typeof propertyValue !== \"number\" &&\r\n          typeof propertyValue !== \"boolean\" &&\r\n          !Array.isArray(propertyValue) &&\r\n          typeof propertyValue !== \"object\"\r\n        ) {\r\n          log(\r\n            `Skipping property ${propertyKey} because its type ${typeof value} is not supported`,\r\n          );\r\n          continue;\r\n        }\r\n        const propertyLinkId = this.reservedLinkIds.pop();\r\n        log({ propertyLinkId });\r\n        if (!propertyLinkId) {\r\n          throw new Error(`Not enough reserved link ids`);\r\n        }\r\n        const propertyInsertOperations =\r\n          await this.makeInsertOperationsForAnyValue({\r\n            linkId: propertyLinkId,\r\n            parentLinkId: linkId,\r\n            value: propertyValue,\r\n            name: propertyKey,\r\n          });\r\n        operations.push(...propertyInsertOperations);\r\n      }\r\n\r\n      return operations;\r\n    }\r\n\r\n    async makeInsertOperationsForAnyValue(\r\n      options: MakeInsertOperationsForAnyValueOptions,\r\n    ) {\r\n      const operations: Array<SerialOperation> = [];\r\n      const { value } = options;\r\n      const log = ObjectToLinksConverter.getLogger(\r\n        this.makeInsertOperationsForAnyValue.name,\r\n      );\r\n\r\n      if (\r\n        typeof value === \"string\" ||\r\n        typeof value === \"number\" ||\r\n        typeof value === \"boolean\"\r\n      ) {\r\n        operations.push(\r\n          ...(await this.makeInsertOperationsForPrimitiveValue({\r\n            ...options,\r\n            value,\r\n          })),\r\n        );\r\n      } else if (Array.isArray(value)) {\r\n        operations.push(\r\n          ...(await this.makeInsertOperationsForArrayValue({\r\n            ...options,\r\n            value,\r\n          })),\r\n        );\r\n      } else if (typeof value === \"object\") {\r\n        operations.push(\r\n          ...(await this.makeInsertOperationsForObjectValue({\r\n            ...options,\r\n            value,\r\n          })),\r\n        );\r\n      } else {\r\n        throw new Error(`Type of value ${typeof value} is not supported`);\r\n      }\r\n\r\n      log({ operations });\r\n      return operations;\r\n    }\r\n  }\r\n\r\n  function getObjectToLinksConverterProxy(options: {\r\n    target: ObjectToLinksConverter;\r\n    customMethods?: Record<string, Function>;\r\n  }): ObjectToLinksConverter {\r\n    const { target, customMethods } = options;\r\n\r\n    return new Proxy(target, {\r\n      get: function (obj: ObjectToLinksConverter, prop: string | symbol) {\r\n        if (customMethods && prop in customMethods) {\r\n          // If the property is in the customMethods object, return that.\r\n          return customMethods[prop as string];\r\n        }\r\n\r\n        // Otherwise, return the property from the original object.\r\n        return obj[prop as keyof ObjectToLinksConverter];\r\n      },\r\n    }) as ObjectToLinksConverter;\r\n  }\r\n\r\n  try {\r\n    const result = await main();\r\n    return {\r\n      result,\r\n      logs: logs,\r\n    };\r\n  } catch (error) {\r\n    throw {\r\n      error: util.inspect(error),\r\n      logs: logs,\r\n    };\r\n  }\r\n\r\n  async function main() {\r\n    const log = ObjectToLinksConverter.getLogger(main.name);\r\n\r\n    if (Object.keys(obj).length === 0) {\r\n      return;\r\n    }\r\n\r\n    const objectToLinksConverter = await ObjectToLinksConverter.init({\r\n      obj,\r\n      rootLinkId,\r\n      resultLinkId,\r\n    });\r\n    log({ objectToLinksConverter });\r\n\r\n    const proxiedObjectToLinksConverter = getObjectToLinksConverterProxy({\r\n      target: objectToLinksConverter,\r\n      customMethods,\r\n    });\r\n    log({ proxiedObjectToLinksConverter });\r\n\r\n    const convertResult = await proxiedObjectToLinksConverter.convert();\r\n    log({ convertResult });\r\n\r\n    return convertResult;\r\n  }\r\n\r\n  type ApplyContainTreeLinksDownToParentToMinilinksOptions = Omit<\r\n    GetContainTreeLinksDownToLinkOptions,\r\n    \"useMinilinks\"\r\n  > & {\r\n    minilinks: MinilinksResult<Link<number>>;\r\n  };\r\n\r\n  interface GetContainTreeLinksDownToLinkOptions {\r\n    linkExp: BoolExpLink;\r\n  }\r\n\r\n  type CustomMethods = {\r\n    convert: typeof ObjectToLinksConverter.prototype.convert;\r\n    makeInsertOperationsForAnyValue: typeof ObjectToLinksConverter.prototype.makeInsertOperationsForAnyValue;\r\n    makeUpdateOperationsForAnyValue: typeof ObjectToLinksConverter.prototype.makeUpdateOperationsForAnyValue;\r\n    makeInsertOperationsForPrimitiveValue: typeof ObjectToLinksConverter.prototype.makeInsertOperationsForPrimitiveValue;\r\n    makeInsertOperationsForArrayValue: typeof ObjectToLinksConverter.prototype.makeInsertOperationsForArrayValue;\r\n    makeInsertOperationsForObjectValue: typeof ObjectToLinksConverter.prototype.makeInsertOperationsForObjectValue;\r\n    makeInsertOperationsForStringValue: typeof ObjectToLinksConverter.prototype.makeInsertOperationsForStringValue;\r\n    makeInsertOperationsForNumberValue: typeof ObjectToLinksConverter.prototype.makeInsertOperationsForNumberValue;\r\n    makeInsertOperationsForBooleanValue: typeof ObjectToLinksConverter.prototype.makeInsertOperationsForBooleanValue;\r\n    makeUpdateOperationsForBooleanValue: typeof ObjectToLinksConverter.prototype.makeUpdateOperationsForBooleanValue;\r\n    makeUpdateOperationsForStringOrNumberValue: typeof ObjectToLinksConverter.prototype.makeUpdateOperationsForStringValue;\r\n    makeUpdateOperationsForArrayValue: typeof ObjectToLinksConverter.prototype.makeUpdateOperationsForArrayValue;\r\n    makeUpdateOperationsForObjectValue: typeof ObjectToLinksConverter.prototype.makeUpdateOperationsForObjectValue;\r\n    applyContainTreeLinksDownToParentToMinilinks: typeof ObjectToLinksConverter.applyContainTreeLinksDownToParentToMinilinks;\r\n    getContainTreeLinksDownToParent: typeof ObjectToLinksConverter.getContainTreeLinksDownToParent;\r\n    getLinksToReserveCount: typeof ObjectToLinksConverter.getLinksToReserveCount;\r\n    init: typeof ObjectToLinksConverter.init;\r\n  };\r\n\r\n  interface ObjectToLinksConverterOptions {\r\n    rootLink: Link<number>;\r\n    reservedLinkIds: Array<number>;\r\n    obj: Obj;\r\n    customMethods?: CustomMethods;\r\n    resultLink: Link<number>;\r\n  }\r\n\r\n  interface ObjectToLinksConverterInitOptions {\r\n    obj: Obj;\r\n    rootLinkId?: number;\r\n    customMethods?: CustomMethods;\r\n    resultLinkId?: number;\r\n  }\r\n\r\n  type AllowedPrimitive = string | number | boolean;\r\n\r\n  interface AllowedObject {\r\n    [key: string]: AllowedValue;\r\n  }\r\n\r\n  type AllowedArray = Array<AllowedValue>;\r\n\r\n  type AllowedValue = AllowedPrimitive | AllowedObject | AllowedArray;\r\n\r\n  type MakeInsertOperationsForStringOptions =\r\n    MakeInsertOperationsForValueOptions<string>;\r\n\r\n  type MakeInsertOperationsForNumberOptions =\r\n    MakeInsertOperationsForValueOptions<number>;\r\n\r\n  type MakeInsertOperationsForBooleanOptions =\r\n    MakeInsertOperationsForValueOptions<boolean>;\r\n\r\n  type MakeInsertOperationsForObjectValue =\r\n    MakeInsertOperationsForValueOptions<AllowedObject>;\r\n\r\n  type MakeInsertOperationsForArrayValueOptions =\r\n    MakeInsertOperationsForValueOptions<AllowedArray>;\r\n\r\n  type MakeInsertOperationsForPrimitiveValueOptions =\r\n    MakeInsertOperationsForValueOptions<AllowedPrimitive>;\r\n\r\n  type MakeInsertOperationsForAnyValueOptions = Omit<\r\n    MakeInsertOperationsForValueOptions<AllowedValue>,\r\n    \"typeLinkId\"\r\n  >;\r\n\r\n  type MakeInsertOperationsForValueOptions<TValue extends AllowedValue> = {\r\n    parentLinkId: number;\r\n    linkId: number;\r\n    value: TValue;\r\n    name: string;\r\n  };\r\n\r\n  interface MakeUpdateOperationsForValueOptions<TValue extends AllowedValue> {\r\n    link: Link<number>;\r\n    value: TValue;\r\n  }\r\n\r\n  type MakeUpdateOperationsForAnyValueOptions<TValue extends AllowedValue> =\r\n    MakeUpdateOperationsForValueOptions<TValue>;\r\n\r\n  type MakeUpdateOperationsForObjectValueOptions =\r\n    MakeUpdateOperationsForValueOptions<AllowedObject>;\r\n\r\n  type MakeUpdateOperationsForStringValueOptions =\r\n    MakeUpdateOperationsForValueOptions<string>;\r\n\r\n  type MakeUpdateOperationsForArrayValueOptions =\r\n    MakeUpdateOperationsForValueOptions<AllowedArray>;\r\n\r\n  type MakeUpdateOperationsForBooleanValueOptions =\r\n    MakeUpdateOperationsForValueOptions<boolean>;\r\n\r\n  type MakeUpdateOperationsForNumberValueOptions =\r\n    MakeUpdateOperationsForValueOptions<number>;\r\n};\r\n\r\ninterface Obj {\r\n  [key: string]: string | number | Obj | boolean;\r\n}\r\n",
        "link_id": 1737
      }
    },
    {
      "id": 1755,
      "type_id": 119,
      "from_id": 1752,
      "to_id": 1744
    },
    {
      "id": 1756,
      "type_id": 119,
      "from_id": 1752,
      "to_id": 1745
    },
    {
      "id": 1757,
      "type_id": 37,
      "from_id": 1752,
      "to_id": 1748
    },
    {
      "id": 1758,
      "type_id": 2,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 674,
        "value": "@deep-foundation/object-to-links-async-converter",
        "link_id": 1758
      }
    },
    {
      "id": 1770,
      "type_id": 3,
      "from_id": 1758,
      "to_id": 1734,
      "value": {
        "id": 682,
        "value": "updateHandlerTranspiledCode",
        "link_id": 1770
      }
    },
    {
      "id": 1774,
      "type_id": 3,
      "from_id": 1758,
      "to_id": 1741,
      "value": {
        "id": 686,
        "value": "parseItInsertHandlerCode",
        "link_id": 1774
      }
    },
    {
      "id": 1775,
      "type_id": 3,
      "from_id": 1758,
      "to_id": 1754,
      "value": {
        "id": 687,
        "value": "treeIncludeFromCurrentString",
        "link_id": 1775
      }
    },
    {
      "id": 1776,
      "type_id": 3,
      "from_id": 1758,
      "to_id": 1743,
      "value": {
        "id": 688,
        "value": "String",
        "link_id": 1776
      }
    },
    {
      "id": 1777,
      "type_id": 3,
      "from_id": 1758,
      "to_id": 1755,
      "value": {
        "id": 689,
        "value": "treeIncludeFromCurrentNumber",
        "link_id": 1777
      }
    },
    {
      "id": 1779,
      "type_id": 3,
      "from_id": 1758,
      "to_id": 1756,
      "value": {
        "id": 691,
        "value": "treeIncludeFromCurrentObject",
        "link_id": 1779
      }
    },
    {
      "id": 1784,
      "type_id": 3,
      "from_id": 1758,
      "to_id": 1748,
      "value": {
        "id": 696,
        "value": "HasResult",
        "link_id": 1784
      }
    },
    {
      "id": 1116,
      "type_id": 1,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 1186,
      "type_id": 4,
      "from_id": 1184,
      "to_id": 5
    },
    {
      "id": 1187,
      "type_id": 1,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 1189,
      "type_id": 4,
      "from_id": 1187,
      "to_id": 5
    },
    {
      "id": 1218,
      "type_id": 156,
      "from_id": 1217,
      "to_id": 1212
    },
    {
      "id": 1219,
      "type_id": 1,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 1223,
      "type_id": 1,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 1224,
      "type_id": 4,
      "from_id": 1223,
      "to_id": 5
    },
    {
      "id": 1240,
      "type_id": 3,
      "from_id": 1225,
      "to_id": 1208,
      "value": {
        "id": 492,
        "value": "replyInsertHandlerCode",
        "link_id": 1240
      }
    },
    {
      "id": 3986,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 3983,
      "value": {
        "id": 961,
        "value": "TreeLinkDeleteComponent",
        "link_id": 3986
      }
    },
    {
      "id": 3983,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1028,
        "value": "({ deep, data, require, go }) => {\n  const React = require('react');\n  const c = require('@chakra-ui/react');\n\n  const dpl = '@deep-foundation/perception-links';\n  const dc = '@deep-foundation/core';\n\n  return ({\n    go,\n\n    linkId,\n    containerId,\n\n    disclosure: _disclosure,\n    isActive,\n  }, ref) => {\n    if (!linkId) throw new Error('!linkId');\n\n    const __disclosure = c.useDisclosure();\n    const disclosure = _disclosure || __disclosure;\n\n    return <go.On do={{\n      'exec': () => disclosure.onOpen(),\n    }}>\n      <c.Button\n        ref={ref}\n        variant={isActive ? 'active' : undefined} justifyContent='center' position='relative'\n        onClick={() => go.do('exec')}\n      >\n        <c.Box position='absolute' right={1} top={1}>{true ? '🔓' : '🔒'}</c.Box>\n        <c.Text pr={1}>x</c.Text> delete\n      </c.Button>\n      <go.Component path={[dpl, 'LinkDeleteModal']} disclosure={disclosure} linkId={linkId} containerId={containerId}/>\n    </go.Provider>;\n  };\n}",
        "link_id": 3983
      }
    },
    {
      "id": 4001,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1024,
        "value": "({ deep, data, require, go }) => {\n  const React = require('react');\n  const c = require('@chakra-ui/react');\n\n  const dpl = '@deep-foundation/perception-links';\n  const dc = '@deep-foundation/core';\n\n  return ({\n    go,\n\n    disclosure: _disclosure,\n\n    defaultContainerId,\n    defaultTypeId,\n    defaultFromId,\n    defaultToId,\n\n    isActive,\n  }, ref) => {\n    const __disclosure = c.useDisclosure();\n    const disclosure = _disclosure || __disclosure;\n\n    return <go.On do={{\n      'exec': () => disclosure.onOpen(),\n    }}>\n      <c.Button\n        ref={ref}\n        variant={isActive ? 'active' : undefined} justifyContent='center' position='relative'\n        onClick={() => go.do('exec')}\n      >\n        <c.Box position='absolute' right={1} top={1}>{true ? '🔓' : '🔒'}</c.Box>\n        <c.Text pr={1}>+</c.Text> insert\n      </c.Button>\n      <go.Component path={[dpl, 'LinkInsertModal']} disclosure={disclosure}\n        defaultContainerId={defaultContainerId}\n        defaultTypeId={defaultTypeId}\n        defaultFromId={defaultFromId}\n        defaultToId={defaultToId}\n      />\n    </go.On>;\n  };\n}",
        "link_id": 4001
      }
    },
    {
      "id": 4004,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 4001,
      "value": {
        "id": 967,
        "value": "TreeLinkInsertComponent",
        "link_id": 4004
      }
    },
    {
      "id": 4005,
      "type_id": 35,
      "from_id": 145,
      "to_id": 4001
    },
    {
      "id": 4006,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 4005,
      "value": {
        "id": 968,
        "value": "TreeLinkInsert",
        "link_id": 4006
      }
    },
    {
      "id": 1328,
      "type_id": 3,
      "from_id": 1316,
      "to_id": 1304,
      "value": {
        "id": 520,
        "value": "gpt-35-16k",
        "link_id": 1328
      }
    },
    {
      "id": 1329,
      "type_id": 3,
      "from_id": 1316,
      "to_id": 1308,
      "value": {
        "id": 521,
        "value": "gpt-4-128k-max-tokens",
        "link_id": 1329
      }
    },
    {
      "id": 1330,
      "type_id": 3,
      "from_id": 1316,
      "to_id": 1309,
      "value": {
        "id": 522,
        "value": "gpt-4-128k-providedBy",
        "link_id": 1330
      }
    },
    {
      "id": 1333,
      "type_id": 3,
      "from_id": 1316,
      "to_id": 1312,
      "value": {
        "id": 525,
        "value": "gpt-4o-providedBy",
        "link_id": 1333
      }
    },
    {
      "id": 1335,
      "type_id": 3,
      "from_id": 1316,
      "to_id": 1315,
      "value": {
        "id": 527,
        "value": "gpt-4-providedBy",
        "link_id": 1335
      }
    },
    {
      "id": 1336,
      "type_id": 3,
      "from_id": 1316,
      "to_id": 1296,
      "value": {
        "id": 528,
        "value": "gpt-4-endpoint",
        "link_id": 1336
      }
    },
    {
      "id": 1362,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 536,
        "value": "import librosa\r\nfrom transformers import pipeline\r\nimport requests\r\nimport io\r\nimport torch\r\nasync def fn(arg):\r\n  deep = arg['deep']\r\n  data = arg['data']\r\n\r\n  AsyncFile = await deep.id(\"@deep-foundation/core\", \"AsyncFile\")\r\n\r\n  newLink = data['newLink']\r\n\r\n  if newLink['type_id'] != AsyncFile:\r\n    return None\r\n\r\n  SyncTextFile = await deep.id(\"@deep-foundation/core\", \"SyncTextFile\")\r\n  Contain = await deep.id(\"@deep-foundation/core\", \"Contain\")\r\n\r\n  url = f\"https://{GQL_URN[:-4]}/file?linkId={newLink['id']}\" if bool(int(GQL_SSL)) else f\"http://{GQL_URN[:-4]}/file?linkId={newLink['id']}\"\r\n  print(url)\r\n  headers = {\r\n    \"Authorization\": deep.client.transport.headers['Authorization'],\r\n    \"Accept\": \"audio/\"\r\n  }\r\n\r\n  response = requests.get(url, headers=headers)\r\n  response.raise_for_status()\r\n  buffer = io.BytesIO(response.content)\r\n  audio_array, _ = librosa.load(buffer, sr=16000)\r\n\r\n  device = \"cuda:0\" if torch.cuda.is_available() else \"cpu\"\r\n  pipe = pipeline(\r\n    \"automatic-speech-recognition\",\r\n    model=\"openai/whisper-medium\",\r\n    chunk_length_s=30,\r\n    device=device,\r\n    generate_kwargs = {\"language\":\"<|ru|>\",\"task\": \"transcribe\"}\r\n  )\r\n\r\n  prediction = pipe(audio_array.copy(), batch_size=8)[\"text\"]\r\n  result = await deep.insert({\r\n    'type_id': SyncTextFile,\r\n    'string': {'data': { 'value': prediction } },\r\n    'in': { 'data': {\r\n      'type_id': Contain,\r\n      'from_id': newLink['id'],\r\n    } }\r\n  })\r\n  return result",
        "link_id": 1362
      }
    },
    {
      "id": 1363,
      "type_id": 35,
      "from_id": 1074,
      "to_id": 1362
    },
    {
      "id": 250,
      "type_id": 3,
      "from_id": 184,
      "to_id": 66,
      "value": {
        "id": 72,
        "value": "Join",
        "link_id": 250
      }
    },
    {
      "id": 251,
      "type_id": 3,
      "from_id": 184,
      "to_id": 67,
      "value": {
        "id": 73,
        "value": "joinTree",
        "link_id": 251
      }
    },
    {
      "id": 252,
      "type_id": 3,
      "from_id": 184,
      "to_id": 68,
      "value": {
        "id": 74,
        "value": "joinTreeJoin",
        "link_id": 252
      }
    },
    {
      "id": 253,
      "type_id": 3,
      "from_id": 184,
      "to_id": 69,
      "value": {
        "id": 75,
        "value": "joinTreeAny",
        "link_id": 253
      }
    },
    {
      "id": 254,
      "type_id": 3,
      "from_id": 184,
      "to_id": 70,
      "value": {
        "id": 76,
        "value": "SelectorTree",
        "link_id": 254
      }
    },
    {
      "id": 255,
      "type_id": 3,
      "from_id": 184,
      "to_id": 71,
      "value": {
        "id": 77,
        "value": "AllowAdmin",
        "link_id": 255
      }
    },
    {
      "id": 273,
      "type_id": 3,
      "from_id": 184,
      "to_id": 89,
      "value": {
        "id": 95,
        "value": "packagePublishCode",
        "link_id": 273
      }
    },
    {
      "id": 274,
      "type_id": 3,
      "from_id": 184,
      "to_id": 90,
      "value": {
        "id": 96,
        "value": "packagePublishCodeHandler",
        "link_id": 274
      }
    },
    {
      "id": 275,
      "type_id": 3,
      "from_id": 184,
      "to_id": 91,
      "value": {
        "id": 97,
        "value": "packagePublishCodeHandleInsert",
        "link_id": 275
      }
    },
    {
      "id": 276,
      "type_id": 3,
      "from_id": 184,
      "to_id": 92,
      "value": {
        "id": 98,
        "value": "Active",
        "link_id": 276
      }
    },
    {
      "id": 288,
      "type_id": 3,
      "from_id": 184,
      "to_id": 104,
      "value": {
        "id": 110,
        "value": "Route",
        "link_id": 288
      }
    },
    {
      "id": 294,
      "type_id": 3,
      "from_id": 184,
      "to_id": 110,
      "value": {
        "id": 116,
        "value": "routeTreePort",
        "link_id": 294
      }
    },
    {
      "id": 301,
      "type_id": 3,
      "from_id": 184,
      "to_id": 117,
      "value": {
        "id": 123,
        "value": "TreeIncludeIn",
        "link_id": 301
      }
    },
    {
      "id": 313,
      "type_id": 3,
      "from_id": 184,
      "to_id": 129,
      "value": {
        "id": 135,
        "value": "ruleTree",
        "link_id": 313
      }
    },
    {
      "id": 314,
      "type_id": 3,
      "from_id": 184,
      "to_id": 130,
      "value": {
        "id": 136,
        "value": "ruleTreeRule",
        "link_id": 314
      }
    },
    {
      "id": 315,
      "type_id": 3,
      "from_id": 184,
      "to_id": 131,
      "value": {
        "id": 137,
        "value": "ruleTreeRuleAction",
        "link_id": 315
      }
    },
    {
      "id": 320,
      "type_id": 3,
      "from_id": 184,
      "to_id": 136,
      "value": {
        "id": 142,
        "value": "ruleTreeRuleSelectorInclude",
        "link_id": 320
      }
    },
    {
      "id": 321,
      "type_id": 3,
      "from_id": 184,
      "to_id": 137,
      "value": {
        "id": 143,
        "value": "ruleTreeRuleSelectorExclude",
        "link_id": 321
      }
    },
    {
      "id": 322,
      "type_id": 3,
      "from_id": 184,
      "to_id": 138,
      "value": {
        "id": 144,
        "value": "ruleTreeRuleSelectorFilter",
        "link_id": 322
      }
    },
    {
      "id": 323,
      "type_id": 3,
      "from_id": 184,
      "to_id": 139,
      "value": {
        "id": 145,
        "value": "Plv8IsolationProvider",
        "link_id": 323
      }
    },
    {
      "id": 324,
      "type_id": 3,
      "from_id": 184,
      "to_id": 140,
      "value": {
        "id": 146,
        "value": "JSminiExecutionProvider",
        "link_id": 324
      }
    },
    {
      "id": 325,
      "type_id": 3,
      "from_id": 184,
      "to_id": 141,
      "value": {
        "id": 147,
        "value": "plv8SupportsJs",
        "link_id": 325
      }
    },
    {
      "id": 326,
      "type_id": 3,
      "from_id": 184,
      "to_id": 142,
      "value": {
        "id": 148,
        "value": "Authorization",
        "link_id": 326
      }
    },
    {
      "id": 327,
      "type_id": 3,
      "from_id": 184,
      "to_id": 143,
      "value": {
        "id": 149,
        "value": "GeneratedFrom",
        "link_id": 327
      }
    },
    {
      "id": 328,
      "type_id": 3,
      "from_id": 184,
      "to_id": 144,
      "value": {
        "id": 150,
        "value": "ClientJSIsolationProvider",
        "link_id": 328
      }
    },
    {
      "id": 331,
      "type_id": 3,
      "from_id": 184,
      "to_id": 147,
      "value": {
        "id": 153,
        "value": "symbolValue",
        "link_id": 331
      }
    },
    {
      "id": 339,
      "type_id": 3,
      "from_id": 184,
      "to_id": 155,
      "value": {
        "id": 161,
        "value": "handlersTreeHandleOperation",
        "link_id": 339
      }
    },
    {
      "id": 340,
      "type_id": 3,
      "from_id": 184,
      "to_id": 156,
      "value": {
        "id": 162,
        "value": "HandleClient",
        "link_id": 340
      }
    },
    {
      "id": 341,
      "type_id": 3,
      "from_id": 184,
      "to_id": 157,
      "value": {
        "id": 163,
        "value": "HandlingError",
        "link_id": 341
      }
    },
    {
      "id": 342,
      "type_id": 3,
      "from_id": 184,
      "to_id": 158,
      "value": {
        "id": 164,
        "value": "handlingErrorValue",
        "link_id": 342
      }
    },
    {
      "id": 343,
      "type_id": 3,
      "from_id": 184,
      "to_id": 159,
      "value": {
        "id": 165,
        "value": "HandlingErrorReason",
        "link_id": 343
      }
    },
    {
      "id": 344,
      "type_id": 3,
      "from_id": 184,
      "to_id": 160,
      "value": {
        "id": 166,
        "value": "HandlingErrorLink",
        "link_id": 344
      }
    },
    {
      "id": 345,
      "type_id": 3,
      "from_id": 184,
      "to_id": 161,
      "value": {
        "id": 167,
        "value": "GqlEndpoint",
        "link_id": 345
      }
    },
    {
      "id": 346,
      "type_id": 3,
      "from_id": 184,
      "to_id": 162,
      "value": {
        "id": 168,
        "value": "MainGqlEndpoint",
        "link_id": 346
      }
    },
    {
      "id": 347,
      "type_id": 3,
      "from_id": 184,
      "to_id": 163,
      "value": {
        "id": 169,
        "value": "HandleGql",
        "link_id": 347
      }
    },
    {
      "id": 365,
      "type_id": 3,
      "from_id": 184,
      "to_id": 181,
      "value": {
        "id": 187,
        "value": "promiseTreePromiseResult",
        "link_id": 365
      }
    },
    {
      "id": 572,
      "type_id": 3,
      "from_id": 553,
      "to_id": 571,
      "value": {
        "id": 222,
        "value": "PortSymbol",
        "link_id": 572
      }
    },
    {
      "id": 627,
      "type_id": 146,
      "from_id": 553,
      "to_id": 29,
      "value": {
        "id": 277,
        "value": "💾",
        "link_id": 627
      }
    },
    {
      "id": 628,
      "type_id": 3,
      "from_id": 553,
      "to_id": 627,
      "value": {
        "id": 278,
        "value": "FileSymbol",
        "link_id": 628
      }
    },
    {
      "id": 629,
      "type_id": 146,
      "from_id": 553,
      "to_id": 23,
      "value": {
        "id": 279,
        "value": "🔥",
        "link_id": 629
      }
    },
    {
      "id": 630,
      "type_id": 3,
      "from_id": 553,
      "to_id": 629,
      "value": {
        "id": 280,
        "value": "OperationSymbol",
        "link_id": 630
      }
    },
    {
      "id": 631,
      "type_id": 146,
      "from_id": 553,
      "to_id": 22,
      "value": {
        "id": 281,
        "value": "👤",
        "link_id": 631
      }
    },
    {
      "id": 632,
      "type_id": 3,
      "from_id": 553,
      "to_id": 631,
      "value": {
        "id": 282,
        "value": "UserSymbol",
        "link_id": 632
      }
    },
    {
      "id": 641,
      "type_id": 146,
      "from_id": 553,
      "to_id": 72,
      "value": {
        "id": 291,
        "value": "🪡",
        "link_id": 641
      }
    },
    {
      "id": 806,
      "type_id": 35,
      "from_id": 145,
      "to_id": 805,
      "value": {
        "id": 359,
        "value": "",
        "link_id": 806
      }
    },
    {
      "id": 834,
      "type_id": 3,
      "from_id": 813,
      "to_id": 795,
      "value": {
        "id": 383,
        "value": "Traveler",
        "link_id": 834
      }
    },
    {
      "id": 1118,
      "type_id": 1,
      "from_id": 8,
      "to_id": 8
    },
    {
      "id": 1119,
      "type_id": 1,
      "from_id": 8,
      "to_id": 8
    },
    {
      "id": 1120,
      "type_id": 36,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 1121,
      "type_id": 39,
      "from_id": 1120,
      "to_id": 8
    },
    {
      "id": 1122,
      "type_id": 38,
      "from_id": 1120,
      "to_id": 1118
    },
    {
      "id": 1123,
      "type_id": 2,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 445,
        "value": "@deep-foundation/messaging",
        "link_id": 1123
      }
    },
    {
      "id": 1158,
      "type_id": 35,
      "from_id": 1074,
      "to_id": 1157
    },
    {
      "id": 1159,
      "type_id": 50,
      "from_id": 1116,
      "to_id": 1158
    },
    {
      "id": 1160,
      "type_id": 1145,
      "from_id": 1100,
      "to_id": 1100
    },
    {
      "id": 1161,
      "type_id": 1,
      "from_id": 8,
      "to_id": 8
    },
    {
      "id": 1231,
      "type_id": 3,
      "from_id": 1225,
      "to_id": 1224,
      "value": {
        "id": 483,
        "value": "conversationValue",
        "link_id": 1231
      }
    },
    {
      "id": 1232,
      "type_id": 3,
      "from_id": 1225,
      "to_id": 1216,
      "value": {
        "id": 484,
        "value": "ChatGPT",
        "link_id": 1232
      }
    },
    {
      "id": 1234,
      "type_id": 3,
      "from_id": 1225,
      "to_id": 1217,
      "value": {
        "id": 486,
        "value": "manager",
        "link_id": 1234
      }
    },
    {
      "id": 1235,
      "type_id": 3,
      "from_id": 1225,
      "to_id": 1220,
      "value": {
        "id": 487,
        "value": "endpointValue",
        "link_id": 1235
      }
    },
    {
      "id": 1339,
      "type_id": 3,
      "from_id": 1316,
      "to_id": 1299,
      "value": {
        "id": 531,
        "value": "gpt-4o-endpoint",
        "link_id": 1339
      }
    },
    {
      "id": 1340,
      "type_id": 3,
      "from_id": 1316,
      "to_id": 1300,
      "value": {
        "id": 532,
        "value": "gpt-4-128k-endpoint",
        "link_id": 1340
      }
    },
    {
      "id": 1341,
      "type_id": 3,
      "from_id": 1316,
      "to_id": 1313,
      "value": {
        "id": 533,
        "value": "gpt-4",
        "link_id": 1341
      }
    },
    {
      "id": 1805,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 667,
        "value": "async (options) => {\n    const { deep, rootLinkId, obj, customMethods, resultLinkId } = options;\n    const { createSerialOperation } = await import(\"@deep-foundation/deeplinks/imports/gql/index.js\");\n    const { pascalCase } = await import(\"case-anything\");\n    const { default: debug } = await import(\"debug\");\n    const { default: util } = await import(\"util\");\n    const logs = [];\n    const packageLog = debug(\"@deep-foundation/object-to-links-async-converter\");\n    packageLog({ options });\n    class ObjectToLinksConverter {\n        reservedLinkIds;\n        rootLink;\n        obj;\n        resultLink;\n        deep = deep;\n        static requiredPackageNames = {\n            core: \"@deep-foundation/core\",\n            boolean: \"@deep-foundation/boolean\",\n        };\n        static requiredPackagesInMinilinks = {\n            ...this.requiredPackageNames,\n            objectToLinksConverter: \"@deep-foundation/object-to-links-async-converter\",\n        };\n        constructor(options) {\n            this.rootLink = options.rootLink;\n            this.reservedLinkIds = options.reservedLinkIds;\n            this.obj = options.obj;\n            this.resultLink = options.resultLink;\n        }\n        static getLogger(namespace) {\n            const getLoggerLogger = debug(this.getLogger.name);\n            getLoggerLogger({ options });\n            const resultLogger = packageLog.extend(`${ObjectToLinksConverter.name}${namespace ? `:${namespace}` : \"\"}`);\n            resultLogger.enabled = true;\n            resultLogger.log = (...content) => {\n                logs.push(...content);\n            };\n            return resultLogger;\n        }\n        static async applyContainTreeLinksDownToParentToMinilinks(options) {\n            const log = ObjectToLinksConverter.getLogger(ObjectToLinksConverter.applyContainTreeLinksDownToParentToMinilinks\n                .name);\n            const links = (await this.getContainTreeLinksDownToParent({\n                linkExp: options.linkExp,\n            }));\n            log({ links });\n            const minilinksApplyResult = options.minilinks.apply(links.data);\n            log({ minilinksApplyResult });\n            return minilinksApplyResult;\n        }\n        static async getContainTreeLinksDownToParent(options) {\n            const log = ObjectToLinksConverter.getLogger(ObjectToLinksConverter.getContainTreeLinksDownToParent.name);\n            const { linkExp } = options;\n            const query = {\n                up: {\n                    tree_id: await deep.id(\"@deep-foundation/core\", \"containTree\"),\n                    parent: linkExp,\n                },\n            };\n            log({ query });\n            const result = await deep.select(query);\n            log({ result });\n            return result;\n        }\n        static async init(options) {\n            const log = ObjectToLinksConverter.getLogger(ObjectToLinksConverter.init.name);\n            const { obj } = options;\n            const containTreeLinksDownToCoreAndThisPackageLinkApplyMinilinksResult = await this.applyContainTreeLinksDownToParentToMinilinks({\n                linkExp: {\n                    _or: Object.values(ObjectToLinksConverter.requiredPackagesInMinilinks).map((packageName) => ({\n                        id: {\n                            _id: [packageName],\n                        },\n                    })),\n                },\n                minilinks: deep.minilinks,\n            });\n            log({ containTreeLinksDownToCoreAndThisPackageLinkApplyMinilinksResult });\n            const rootLink = options.rootLinkId\n                ? await deep.select(options.rootLinkId).then((result) => result.data[0])\n                : await deep\n                    .insert({\n                    type_id: await deep.id(deep.linkId, \"Root\"),\n                }, {\n                    returning: deep.linksSelectReturning,\n                })\n                    .then((result) => result.data[0]);\n            log({ rootLink });\n            const containTreeLinksDownToRootLinkApplyMinilinksResult = await this.applyContainTreeLinksDownToParentToMinilinks({\n                linkExp: {\n                    id: rootLink.id,\n                },\n                minilinks: deep.minilinks,\n            });\n            log({ containTreeLinksDownToRootLinkApplyMinilinksResult });\n            const linkIdsToReserveCount = this.getLinksToReserveCount({ value: obj });\n            log({ linkIdsToReserveCount });\n            const reservedLinkIds = await deep.reserve(linkIdsToReserveCount);\n            log({ reservedLinkIds });\n            const resultLink = options.resultLinkId\n                ? await deep\n                    .select(options.resultLinkId)\n                    .then((result) => result.data[0])\n                : rootLink;\n            if (options.resultLinkId && !resultLink) {\n                throw new Error(`Result link with id ${options.resultLinkId} not found`);\n            }\n            const converter = new this({\n                reservedLinkIds,\n                rootLink,\n                obj,\n                resultLink,\n            });\n            log({ converter });\n            return converter;\n        }\n        async convert() {\n            const log = ObjectToLinksConverter.getLogger(\"convert\");\n            const operations = await this.makeUpdateOperationsForObjectValue({\n                link: this.resultLink,\n                value: this.obj,\n            });\n            log({ operations });\n            const hasResultTypeLinkId = await deep.id(deep.linkId, \"HasResult\");\n            const { data: [hasResultLink], } = await deep.select({\n                type_id: hasResultTypeLinkId,\n                from_id: this.rootLink.id,\n            });\n            if (hasResultLink) {\n                operations.push(createSerialOperation({\n                    type: \"update\",\n                    table: \"links\",\n                    exp: {\n                        type_id: hasResultTypeLinkId,\n                        from_id: this.rootLink.id,\n                    },\n                    value: {\n                        to_id: this.resultLink.id,\n                    },\n                }));\n            }\n            else {\n                operations.push(createSerialOperation({\n                    type: \"insert\",\n                    table: \"links\",\n                    objects: {\n                        type_id: hasResultTypeLinkId,\n                        from_id: this.rootLink.id,\n                        to_id: this.resultLink.id,\n                    },\n                }));\n            }\n            const serialResult = await deep.serial({\n                operations,\n            });\n            log({ serialResult });\n            return {\n                serialResult,\n                rootLinkId: this.rootLink.id,\n                resultLinkId: this.resultLink.id,\n            };\n        }\n        static getLinksToReserveCount(options) {\n            const { value } = options;\n            const log = ObjectToLinksConverter.getLogger(ObjectToLinksConverter.getLinksToReserveCount.name);\n            let count = 0;\n            const typeOfValue = typeof value;\n            log({ typeOfValue });\n            const reservedLinksCountForOneLink = 1 +\n                1;\n            if (typeOfValue === \"string\") {\n                count = reservedLinksCountForOneLink;\n            }\n            else if (typeOfValue === \"number\") {\n                count = reservedLinksCountForOneLink;\n            }\n            else if (typeOfValue === \"boolean\") {\n                count = reservedLinksCountForOneLink;\n            }\n            else if (Array.isArray(value)) {\n                const array = value;\n                for (const arrayValue of array) {\n                    if (!arrayValue)\n                        return count;\n                    count += this.getLinksToReserveCount({ value: arrayValue });\n                }\n            }\n            else if (typeOfValue === \"object\") {\n                count += reservedLinksCountForOneLink;\n                for (const [propertyKey, propertyValue] of Object.entries(value)) {\n                    if (!value)\n                        return count;\n                    count += this.getLinksToReserveCount({ value: propertyValue });\n                }\n            }\n            log({ count });\n            return count;\n        }\n        async makeUpdateOperationsForBooleanValue(options) {\n            const log = ObjectToLinksConverter.getLogger(this.makeUpdateOperationsForBooleanValue.name);\n            log({ options });\n            const { link, value } = options;\n            const operations = [];\n            operations.push(createSerialOperation({\n                type: \"update\",\n                table: \"links\",\n                exp: {\n                    id: link.id,\n                },\n                value: {\n                    to_id: await deep.id(ObjectToLinksConverter.requiredPackageNames.boolean, value.toString()),\n                },\n            }));\n            log({ operations });\n            return operations;\n        }\n        async makeUpdateOperationsForStringValue(options) {\n            const log = ObjectToLinksConverter.getLogger(this.makeUpdateOperationsForStringValue.name);\n            log({ options });\n            const { link, value } = options;\n            const operations = [];\n            operations.push(createSerialOperation({\n                type: \"update\",\n                table: `strings`,\n                exp: {\n                    link_id: link.id,\n                },\n                value: {\n                    value: value,\n                },\n            }));\n            log({ operations });\n            return operations;\n        }\n        async makeUpdateOperationsForNumberValue(options) {\n            const log = ObjectToLinksConverter.getLogger(this.makeUpdateOperationsForNumberValue.name);\n            log({ options });\n            const { link, value } = options;\n            const operations = [];\n            operations.push(createSerialOperation({\n                type: \"update\",\n                table: `numbers`,\n                exp: {\n                    link_id: link.id,\n                },\n                value: {\n                    value: value,\n                },\n            }));\n            log({ operations });\n            return operations;\n        }\n        async makeUpdateOperationsForArrayValue(options) {\n            const log = ObjectToLinksConverter.getLogger(this.makeUpdateOperationsForAnyValue.name);\n            const { link, value } = options;\n            const operations = [];\n            await deep.delete({\n                up: {\n                    tree_id: await deep.id(ObjectToLinksConverter.requiredPackagesInMinilinks.core, \"ContainTree\"),\n                    parent_id: link.id,\n                },\n            });\n            for (let i = 0; i < value.length; i++) {\n                const element = value[i];\n                operations.push(...(await this.makeInsertOperationsForAnyValue({\n                    value: element,\n                    linkId: this.reservedLinkIds.pop(),\n                    name: i.toString(0),\n                    parentLinkId: link.id,\n                })));\n            }\n            return operations;\n        }\n        async makeUpdateOperationsForAnyValue(options) {\n            const log = ObjectToLinksConverter.getLogger(this.makeUpdateOperationsForAnyValue.name);\n            const { link, value } = options;\n            const operations = [];\n            if (typeof value === \"boolean\") {\n                operations.push(...(await this.makeUpdateOperationsForBooleanValue({\n                    ...options,\n                    value,\n                })));\n            }\n            else if (typeof value === \"string\") {\n                operations.push(...(await this.makeUpdateOperationsForStringValue({\n                    ...options,\n                    value,\n                })));\n            }\n            else if (typeof value === \"number\") {\n                operations.push(...(await this.makeUpdateOperationsForNumberValue({\n                    ...options,\n                    value,\n                })));\n            }\n            else if (Array.isArray(value)) {\n                operations.push(...(await this.makeUpdateOperationsForArrayValue({\n                    ...options,\n                    value,\n                })));\n            }\n            else if (typeof value === \"object\") {\n                operations.push(...(await this.makeUpdateOperationsForObjectValue({\n                    ...options,\n                    value,\n                })));\n            }\n            else {\n                throw new Error(`Type of value ${typeof value} is not supported`);\n            }\n            return operations;\n        }\n        async makeUpdateOperationsForObjectValue(options) {\n            const log = ObjectToLinksConverter.getLogger(this.makeUpdateOperationsForObjectValue.name);\n            const { link, value } = options;\n            log({ options });\n            const operations = [];\n            for (const [propertyKey, propertyValue] of Object.entries(value)) {\n                log({ propertyKey, propertyValue });\n                const [propertyLink] = deep.minilinks.query({\n                    id: {\n                        _id: [link.id, propertyKey],\n                    },\n                });\n                log({ propertyLink });\n                if (propertyLink) {\n                    let propertyUpdateOperations = [];\n                    propertyUpdateOperations = await this.makeUpdateOperationsForAnyValue({\n                        link: propertyLink,\n                        value: propertyValue,\n                    });\n                    log({ propertyUpdateOperations });\n                    operations.push(...propertyUpdateOperations);\n                }\n                else {\n                    if (typeof propertyValue !== \"string\" &&\n                        typeof propertyValue !== \"number\" &&\n                        typeof propertyValue !== \"boolean\" &&\n                        !Array.isArray(propertyValue) &&\n                        typeof propertyValue !== \"object\") {\n                        log(`Skipping property ${propertyKey} because its type ${typeof value} is not supported`);\n                        continue;\n                    }\n                    log(\"TEMPORARY! REMOVE THIS!\");\n                    log(`minilinks.links`, deep.minilinks.links);\n                    log(`package link`, deep.minilinks.query({\n                        id: deep.linkId,\n                    }));\n                    log(`contain to string`, deep.minilinks.query({\n                        type_id: await deep.id(\"@deep-foundation/core\", \"Contain\"),\n                        string: {\n                            value: \"String\",\n                        },\n                        from_id: deep.linkId,\n                    }));\n                    log(`contain to string`, deep.minilinks.query({\n                        id: {\n                            _id: [deep.linkId, \"String\"],\n                        },\n                    }));\n                    const propertyLinkId = this.reservedLinkIds.pop();\n                    log({ propertyLinkId });\n                    if (!propertyLinkId) {\n                        throw new Error(`Not enough reserved link ids`);\n                    }\n                    const propertyInsertOperations = await this.makeInsertOperationsForAnyValue({\n                        linkId: propertyLinkId,\n                        parentLinkId: link.id,\n                        value: propertyValue,\n                        name: propertyKey,\n                    });\n                    log({ propertyInsertOperations });\n                    operations.push(...propertyInsertOperations);\n                }\n                log({ operations });\n            }\n            return operations;\n        }\n        async makeInsertOperationsForBooleanValue(options) {\n            const operations = [];\n            const { value, parentLinkId, linkId, name } = options;\n            const log = ObjectToLinksConverter.getLogger(this.makeInsertOperationsForBooleanValue.name);\n            const linkInsertSerialOperation = createSerialOperation({\n                type: \"insert\",\n                table: \"links\",\n                objects: {\n                    id: linkId,\n                    type_id: await deep.id(deep.linkId, pascalCase(typeof value)),\n                    from_id: parentLinkId,\n                    to_id: await deep.id(ObjectToLinksConverter.requiredPackageNames.boolean, value.toString()),\n                },\n            });\n            log({ linkInsertSerialOperation });\n            operations.push(linkInsertSerialOperation);\n            const containInsertSerialOperation = createSerialOperation({\n                type: \"insert\",\n                table: \"links\",\n                objects: {\n                    type_id: await deep.id(\"@deep-foundation/core\", \"Contain\"),\n                    from_id: parentLinkId,\n                    to_id: linkId,\n                    string: {\n                        data: {\n                            value: name,\n                        },\n                    },\n                },\n            });\n            log({ containInsertSerialOperation });\n            operations.push(containInsertSerialOperation);\n            log({ operations });\n            return operations;\n        }\n        async makeInsertOperationsForStringValue(options) {\n            const operations = [];\n            const { value, parentLinkId, linkId, name } = options;\n            const log = ObjectToLinksConverter.getLogger(\"makeInsertOperationsForStringValue\");\n            const linkInsertSerialOperation = createSerialOperation({\n                type: \"insert\",\n                table: \"links\",\n                objects: {\n                    id: linkId,\n                    from_id: parentLinkId,\n                    to_id: parentLinkId,\n                    type_id: await deep.id(deep.linkId, pascalCase(typeof value)),\n                },\n            });\n            log({ linkInsertSerialOperation });\n            operations.push(linkInsertSerialOperation);\n            const stringValueInsertSerialOperation = createSerialOperation({\n                type: \"insert\",\n                table: `${typeof value}s`,\n                objects: {\n                    link_id: linkId,\n                    value: value,\n                },\n            });\n            log({ stringValueInsertSerialOperation });\n            operations.push(stringValueInsertSerialOperation);\n            const containInsertSerialOperation = createSerialOperation({\n                type: \"insert\",\n                table: \"links\",\n                objects: {\n                    type_id: await deep.id(\"@deep-foundation/core\", \"Contain\"),\n                    from_id: parentLinkId,\n                    to_id: linkId,\n                    string: {\n                        data: {\n                            value: name,\n                        },\n                    },\n                },\n            });\n            log({ containInsertSerialOperation });\n            operations.push(containInsertSerialOperation);\n            log({ operations });\n            return operations;\n        }\n        async makeInsertOperationsForNumberValue(options) {\n            const operations = [];\n            const { value, parentLinkId, linkId, name } = options;\n            const log = ObjectToLinksConverter.getLogger(\"makeInsertOperationsForStringValue\");\n            const linkInsertSerialOperation = createSerialOperation({\n                type: \"insert\",\n                table: \"links\",\n                objects: {\n                    id: linkId,\n                    from_id: parentLinkId,\n                    to_id: parentLinkId,\n                    type_id: await deep.id(deep.linkId, pascalCase(typeof value)),\n                },\n            });\n            log({ linkInsertSerialOperation });\n            operations.push(linkInsertSerialOperation);\n            const stringValueInsertSerialOperation = createSerialOperation({\n                type: \"insert\",\n                table: `${typeof value}s`,\n                objects: {\n                    link_id: linkId,\n                    value: value,\n                },\n            });\n            log({ stringValueInsertSerialOperation });\n            operations.push(stringValueInsertSerialOperation);\n            const containInsertSerialOperation = createSerialOperation({\n                type: \"insert\",\n                table: \"links\",\n                objects: {\n                    type_id: await deep.id(\"@deep-foundation/core\", \"Contain\"),\n                    from_id: parentLinkId,\n                    to_id: linkId,\n                    string: {\n                        data: {\n                            value: name,\n                        },\n                    },\n                },\n            });\n            log({ containInsertSerialOperation });\n            operations.push(containInsertSerialOperation);\n            log({ operations });\n            return operations;\n        }\n        async makeInsertOperationsForArrayValue(options) {\n            const operations = [];\n            const { value, linkId, name, parentLinkId } = options;\n            const log = ObjectToLinksConverter.getLogger(\"makeInsertOperationsForStringValue\");\n            const linkInsertSerialOperation = createSerialOperation({\n                type: \"insert\",\n                table: \"links\",\n                objects: {\n                    id: linkId,\n                    type_id: await deep.id(deep.linkId, pascalCase(typeof value)),\n                    from_id: parentLinkId,\n                    to_id: parentLinkId,\n                },\n            });\n            log({ linkInsertSerialOperation });\n            operations.push(linkInsertSerialOperation);\n            const containInsertSerialOperation = createSerialOperation({\n                type: \"insert\",\n                table: \"links\",\n                objects: {\n                    type_id: await deep.id(\"@deep-foundation/core\", \"Contain\"),\n                    from_id: parentLinkId,\n                    to_id: linkId,\n                    string: {\n                        data: {\n                            value: name,\n                        },\n                    },\n                },\n            });\n            log({ containInsertSerialOperation });\n            operations.push(containInsertSerialOperation);\n            for (let i = 0; i < value.length; i++) {\n                const element = value[i];\n                operations.push(...(await this.makeInsertOperationsForAnyValue({\n                    value: element,\n                    parentLinkId: linkId,\n                    linkId: this.reservedLinkIds.pop(),\n                    name: i.toString(),\n                })));\n            }\n            return operations;\n        }\n        async makeInsertOperationsForPrimitiveValue(options) {\n            const operations = [];\n            const { value } = options;\n            if (typeof value === \"string\") {\n                operations.push(...(await this.makeInsertOperationsForStringValue({\n                    ...options,\n                    value,\n                })));\n            }\n            else if (typeof value === \"number\") {\n                operations.push(...(await this.makeInsertOperationsForNumberValue({\n                    ...options,\n                    value,\n                })));\n            }\n            else if (typeof value === \"boolean\") {\n                operations.push(...(await this.makeInsertOperationsForBooleanValue({\n                    ...options,\n                    value,\n                })));\n            }\n            return operations;\n        }\n        async makeInsertOperationsForObjectValue(options) {\n            const operations = [];\n            const { value, linkId, name, parentLinkId } = options;\n            const log = ObjectToLinksConverter.getLogger(this.makeInsertOperationsForObjectValue.name);\n            const linkInsertSerialOperation = createSerialOperation({\n                type: \"insert\",\n                table: \"links\",\n                objects: {\n                    id: linkId,\n                    type_id: await deep.id(deep.linkId, pascalCase(typeof value)),\n                    from_id: parentLinkId,\n                    to_id: parentLinkId,\n                },\n            });\n            log({ linkInsertSerialOperation });\n            operations.push(linkInsertSerialOperation);\n            const containInsertSerialOperation = createSerialOperation({\n                type: \"insert\",\n                table: \"links\",\n                objects: {\n                    type_id: await deep.id(\"@deep-foundation/core\", \"Contain\"),\n                    from_id: parentLinkId,\n                    to_id: linkId,\n                    string: {\n                        data: {\n                            value: name,\n                        },\n                    },\n                },\n            });\n            log({ containInsertSerialOperation });\n            operations.push(containInsertSerialOperation);\n            for (const [propertyKey, propertyValue] of Object.entries(value)) {\n                if (typeof propertyValue !== \"string\" &&\n                    typeof propertyValue !== \"number\" &&\n                    typeof propertyValue !== \"boolean\" &&\n                    !Array.isArray(propertyValue) &&\n                    typeof propertyValue !== \"object\") {\n                    log(`Skipping property ${propertyKey} because its type ${typeof value} is not supported`);\n                    continue;\n                }\n                const propertyLinkId = this.reservedLinkIds.pop();\n                log({ propertyLinkId });\n                if (!propertyLinkId) {\n                    throw new Error(`Not enough reserved link ids`);\n                }\n                const propertyInsertOperations = await this.makeInsertOperationsForAnyValue({\n                    linkId: propertyLinkId,\n                    parentLinkId: linkId,\n                    value: propertyValue,\n                    name: propertyKey,\n                });\n                operations.push(...propertyInsertOperations);\n            }\n            return operations;\n        }\n        async makeInsertOperationsForAnyValue(options) {\n            const operations = [];\n            const { value } = options;\n            const log = ObjectToLinksConverter.getLogger(this.makeInsertOperationsForAnyValue.name);\n            if (typeof value === \"string\" ||\n                typeof value === \"number\" ||\n                typeof value === \"boolean\") {\n                operations.push(...(await this.makeInsertOperationsForPrimitiveValue({\n                    ...options,\n                    value,\n                })));\n            }\n            else if (Array.isArray(value)) {\n                operations.push(...(await this.makeInsertOperationsForArrayValue({\n                    ...options,\n                    value,\n                })));\n            }\n            else if (typeof value === \"object\") {\n                operations.push(...(await this.makeInsertOperationsForObjectValue({\n                    ...options,\n                    value,\n                })));\n            }\n            else {\n                throw new Error(`Type of value ${typeof value} is not supported`);\n            }\n            log({ operations });\n            return operations;\n        }\n    }\n    function getObjectToLinksConverterProxy(options) {\n        const { target, customMethods } = options;\n        return new Proxy(target, {\n            get: function (obj, prop) {\n                if (customMethods && prop in customMethods) {\n                    return customMethods[prop];\n                }\n                return obj[prop];\n            },\n        });\n    }\n    try {\n        const result = await main();\n        return {\n            result,\n            logs: logs,\n        };\n    }\n    catch (error) {\n        throw {\n            error: util.inspect(error),\n            logs: logs,\n        };\n    }\n    async function main() {\n        const log = ObjectToLinksConverter.getLogger(main.name);\n        if (Object.keys(obj).length === 0) {\n            return;\n        }\n        const objectToLinksConverter = await ObjectToLinksConverter.init({\n            obj,\n            rootLinkId,\n            resultLinkId,\n        });\n        log({ objectToLinksConverter });\n        const proxiedObjectToLinksConverter = getObjectToLinksConverterProxy({\n            target: objectToLinksConverter,\n            customMethods,\n        });\n        log({ proxiedObjectToLinksConverter });\n        const convertResult = await proxiedObjectToLinksConverter.convert();\n        log({ convertResult });\n        return convertResult;\n    }\n};\nexport {};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFZQSxLQUFLLEVBQUUsT0FNTixFQUFFLEVBQUU7SUFDSCxNQUFNLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRSxHQUFHLEVBQUUsYUFBYSxFQUFFLFlBQVksRUFBRSxHQUFHLE9BQU8sQ0FBQztJQUN2RSxNQUFNLEVBQUUscUJBQXFCLEVBQUUsR0FBRyxNQUFNLE1BQU0sQ0FDNUMsaURBQWlELENBQ2xELENBQUM7SUFDRixNQUFNLEVBQUUsVUFBVSxFQUFFLEdBQUcsTUFBTSxNQUFNLENBQUMsZUFBZSxDQUFDLENBQUM7SUFDckQsTUFBTSxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsR0FBRyxNQUFNLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUNqRCxNQUFNLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxHQUFHLE1BQU0sTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQy9DLE1BQU0sSUFBSSxHQUFlLEVBQUUsQ0FBQztJQUM1QixNQUFNLFVBQVUsR0FBRyxLQUFLLENBQUMsa0RBQWtELENBQUMsQ0FBQztJQUM3RSxVQUFVLENBQUMsRUFBRSxPQUFPLEVBQUUsQ0FBQyxDQUFDO0lBRXhCLE1BQU0sc0JBQXNCO1FBQzFCLGVBQWUsQ0FBZ0I7UUFDL0IsUUFBUSxDQUFlO1FBQ3ZCLEdBQUcsQ0FBTTtRQUNULFVBQVUsQ0FBZTtRQUN6QixJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ1osTUFBTSxDQUFDLG9CQUFvQixHQUFHO1lBQzVCLElBQUksRUFBRSx1QkFBdUI7WUFDN0IsT0FBTyxFQUFFLDBCQUEwQjtTQUNwQyxDQUFDO1FBQ0YsTUFBTSxDQUFDLDJCQUEyQixHQUFHO1lBQ25DLEdBQUcsSUFBSSxDQUFDLG9CQUFvQjtZQUM1QixzQkFBc0IsRUFDcEIsa0RBQWtEO1NBQ3JELENBQUM7UUFFRixZQUFZLE9BQXNDO1lBQ2hELElBQUksQ0FBQyxRQUFRLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQztZQUNqQyxJQUFJLENBQUMsZUFBZSxHQUFHLE9BQU8sQ0FBQyxlQUFlLENBQUM7WUFDL0MsSUFBSSxDQUFDLEdBQUcsR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDO1lBQ3ZCLElBQUksQ0FBQyxVQUFVLEdBQUcsT0FBTyxDQUFDLFVBQVUsQ0FBQztRQUN2QyxDQUFDO1FBRUQsTUFBTSxDQUFDLFNBQVMsQ0FBQyxTQUFpQjtZQUNoQyxNQUFNLGVBQWUsR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUNuRCxlQUFlLENBQUMsRUFBRSxPQUFPLEVBQUUsQ0FBQyxDQUFDO1lBQzdCLE1BQU0sWUFBWSxHQUFHLFVBQVUsQ0FBQyxNQUFNLENBQ3BDLEdBQUcsc0JBQXNCLENBQUMsSUFBSSxHQUFHLFNBQVMsQ0FBQyxDQUFDLENBQUMsSUFBSSxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQ3BFLENBQUM7WUFDRixZQUFZLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQztZQUM1QixZQUFZLENBQUMsR0FBRyxHQUFHLENBQUMsR0FBRyxPQUFtQixFQUFFLEVBQUU7Z0JBQzVDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxPQUFPLENBQUMsQ0FBQztZQUN4QixDQUFDLENBQUM7WUFDRixPQUFPLFlBQVksQ0FBQztRQUN0QixDQUFDO1FBRUQsTUFBTSxDQUFDLEtBQUssQ0FBQyw0Q0FBNEMsQ0FDdkQsT0FBNEQ7WUFFNUQsTUFBTSxHQUFHLEdBQUcsc0JBQXNCLENBQUMsU0FBUyxDQUMxQyxzQkFBc0IsQ0FBQyw0Q0FBNEM7aUJBQ2hFLElBQUksQ0FDUixDQUFDO1lBQ0YsTUFBTSxLQUFLLEdBQUcsQ0FBQyxNQUFNLElBQUksQ0FBQywrQkFBK0IsQ0FBQztnQkFDeEQsT0FBTyxFQUFFLE9BQU8sQ0FBQyxPQUFPO2FBQ3pCLENBQUMsQ0FBcUMsQ0FBQztZQUN4QyxHQUFHLENBQUMsRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDO1lBQ2YsTUFBTSxvQkFBb0IsR0FBRyxPQUFPLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDakUsR0FBRyxDQUFDLEVBQUUsb0JBQW9CLEVBQUUsQ0FBQyxDQUFDO1lBQzlCLE9BQU8sb0JBQW9CLENBQUM7UUFDOUIsQ0FBQztRQUVELE1BQU0sQ0FBQyxLQUFLLENBQUMsK0JBQStCLENBQzFDLE9BQTZDO1lBRTdDLE1BQU0sR0FBRyxHQUFHLHNCQUFzQixDQUFDLFNBQVMsQ0FDMUMsc0JBQXNCLENBQUMsK0JBQStCLENBQUMsSUFBSSxDQUM1RCxDQUFDO1lBQ0YsTUFBTSxFQUFFLE9BQU8sRUFBRSxHQUFHLE9BQU8sQ0FBQztZQUM1QixNQUFNLEtBQUssR0FBZ0I7Z0JBQ3pCLEVBQUUsRUFBRTtvQkFDRixPQUFPLEVBQUUsTUFBTSxJQUFJLENBQUMsRUFBRSxDQUFDLHVCQUF1QixFQUFFLGFBQWEsQ0FBQztvQkFDOUQsTUFBTSxFQUFFLE9BQU87aUJBQ2hCO2FBQ0YsQ0FBQztZQUNGLEdBQUcsQ0FBQyxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUM7WUFDZixNQUFNLE1BQU0sR0FBRyxNQUFNLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDeEMsR0FBRyxDQUFDLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQztZQUNoQixPQUFPLE1BQU0sQ0FBQztRQUNoQixDQUFDO1FBS0QsTUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQ2YsT0FBMEM7WUFFMUMsTUFBTSxHQUFHLEdBQUcsc0JBQXNCLENBQUMsU0FBUyxDQUMxQyxzQkFBc0IsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUNqQyxDQUFDO1lBQ0YsTUFBTSxFQUFFLEdBQUcsRUFBRSxHQUFHLE9BQU8sQ0FBQztZQUN4QixNQUFNLGdFQUFnRSxHQUNwRSxNQUFNLElBQUksQ0FBQyw0Q0FBNEMsQ0FBQztnQkFDdEQsT0FBTyxFQUFFO29CQUNQLEdBQUcsRUFBRSxNQUFNLENBQUMsTUFBTSxDQUNoQixzQkFBc0IsQ0FBQywyQkFBMkIsQ0FDbkQsQ0FBQyxHQUFHLENBQUMsQ0FBQyxXQUFXLEVBQUUsRUFBRSxDQUFDLENBQUM7d0JBQ3RCLEVBQUUsRUFBRTs0QkFDRixHQUFHLEVBQUUsQ0FBQyxXQUFXLENBQUM7eUJBQ25CO3FCQUNGLENBQUMsQ0FBQztpQkFDSjtnQkFDRCxTQUFTLEVBQUUsSUFBSSxDQUFDLFNBQVM7YUFDMUIsQ0FBQyxDQUFDO1lBQ0wsR0FBRyxDQUFDLEVBQUUsZ0VBQWdFLEVBQUUsQ0FBQyxDQUFDO1lBQzFFLE1BQU0sUUFBUSxHQUFpQixPQUFPLENBQUMsVUFBVTtnQkFDL0MsQ0FBQyxDQUFDLE1BQU0sSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUN4RSxDQUFDLENBQUMsTUFBTSxJQUFJO3FCQUNQLE1BQU0sQ0FDTDtvQkFFRSxPQUFPLEVBQUUsTUFBTSxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxNQUFPLEVBQUUsTUFBTSxDQUFDO2lCQUM3QyxFQUNEO29CQUNFLFNBQVMsRUFBRSxJQUFJLENBQUMsb0JBQW9CO2lCQUNyQyxDQUNGO3FCQUNBLElBQUksQ0FBQyxDQUFDLE1BQU0sRUFBRSxFQUFFLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQWlCLENBQUMsQ0FBQztZQUN4RCxHQUFHLENBQUMsRUFBRSxRQUFRLEVBQUUsQ0FBQyxDQUFDO1lBQ2xCLE1BQU0sa0RBQWtELEdBQ3RELE1BQU0sSUFBSSxDQUFDLDRDQUE0QyxDQUFDO2dCQUN0RCxPQUFPLEVBQUU7b0JBQ1AsRUFBRSxFQUFFLFFBQVEsQ0FBQyxFQUFFO2lCQUNoQjtnQkFDRCxTQUFTLEVBQUUsSUFBSSxDQUFDLFNBQVM7YUFDMUIsQ0FBQyxDQUFDO1lBQ0wsR0FBRyxDQUFDLEVBQUUsa0RBQWtELEVBQUUsQ0FBQyxDQUFDO1lBQzVELE1BQU0scUJBQXFCLEdBQUcsSUFBSSxDQUFDLHNCQUFzQixDQUFDLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7WUFDMUUsR0FBRyxDQUFDLEVBQUUscUJBQXFCLEVBQUUsQ0FBQyxDQUFDO1lBQy9CLE1BQU0sZUFBZSxHQUFHLE1BQU0sSUFBSSxDQUFDLE9BQU8sQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO1lBQ2xFLEdBQUcsQ0FBQyxFQUFFLGVBQWUsRUFBRSxDQUFDLENBQUM7WUFDekIsTUFBTSxVQUFVLEdBQUcsT0FBTyxDQUFDLFlBQVk7Z0JBQ3JDLENBQUMsQ0FBQyxNQUFNLElBQUk7cUJBQ1AsTUFBTSxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUM7cUJBQzVCLElBQUksQ0FBQyxDQUFDLE1BQU0sRUFBRSxFQUFFLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDckMsQ0FBQyxDQUFDLFFBQVEsQ0FBQztZQUNiLElBQUksT0FBTyxDQUFDLFlBQVksSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO2dCQUN4QyxNQUFNLElBQUksS0FBSyxDQUNiLHVCQUF1QixPQUFPLENBQUMsWUFBWSxZQUFZLENBQ3hELENBQUM7WUFDSixDQUFDO1lBQ0QsTUFBTSxTQUFTLEdBQUcsSUFBSSxJQUFJLENBQUM7Z0JBQ3pCLGVBQWU7Z0JBQ2YsUUFBUTtnQkFDUixHQUFHO2dCQUNILFVBQVU7YUFDWCxDQUFDLENBQUM7WUFDSCxHQUFHLENBQUMsRUFBRSxTQUFTLEVBQUUsQ0FBQyxDQUFDO1lBQ25CLE9BQU8sU0FBUyxDQUFDO1FBQ25CLENBQUM7UUFFRCxLQUFLLENBQUMsT0FBTztZQUNYLE1BQU0sR0FBRyxHQUFHLHNCQUFzQixDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUV4RCxNQUFNLFVBQVUsR0FBRyxNQUFNLElBQUksQ0FBQyxrQ0FBa0MsQ0FBQztnQkFDL0QsSUFBSSxFQUFFLElBQUksQ0FBQyxVQUFVO2dCQUNyQixLQUFLLEVBQUUsSUFBSSxDQUFDLEdBQUc7YUFDaEIsQ0FBQyxDQUFDO1lBQ0gsR0FBRyxDQUFDLEVBQUUsVUFBVSxFQUFFLENBQUMsQ0FBQztZQUVwQixNQUFNLG1CQUFtQixHQUFHLE1BQU0sSUFBSSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTyxFQUFFLFdBQVcsQ0FBQyxDQUFDO1lBQ3JFLE1BQU0sRUFDSixJQUFJLEVBQUUsQ0FBQyxhQUFhLENBQUMsR0FDdEIsR0FBRyxNQUFNLElBQUksQ0FBQyxNQUFNLENBQUM7Z0JBQ3BCLE9BQU8sRUFBRSxtQkFBbUI7Z0JBQzVCLE9BQU8sRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUU7YUFDMUIsQ0FBQyxDQUFDO1lBQ0gsSUFBSSxhQUFhLEVBQUUsQ0FBQztnQkFDbEIsVUFBVSxDQUFDLElBQUksQ0FDYixxQkFBcUIsQ0FBQztvQkFDcEIsSUFBSSxFQUFFLFFBQVE7b0JBQ2QsS0FBSyxFQUFFLE9BQU87b0JBQ2QsR0FBRyxFQUFFO3dCQUNILE9BQU8sRUFBRSxtQkFBbUI7d0JBQzVCLE9BQU8sRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUU7cUJBQzFCO29CQUNELEtBQUssRUFBRTt3QkFDTCxLQUFLLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxFQUFFO3FCQUMxQjtpQkFDRixDQUFDLENBQ0gsQ0FBQztZQUNKLENBQUM7aUJBQU0sQ0FBQztnQkFDTixVQUFVLENBQUMsSUFBSSxDQUNiLHFCQUFxQixDQUFDO29CQUNwQixJQUFJLEVBQUUsUUFBUTtvQkFDZCxLQUFLLEVBQUUsT0FBTztvQkFDZCxPQUFPLEVBQUU7d0JBQ1AsT0FBTyxFQUFFLG1CQUFtQjt3QkFDNUIsT0FBTyxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRTt3QkFDekIsS0FBSyxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsRUFBRTtxQkFDMUI7aUJBQ0YsQ0FBQyxDQUNILENBQUM7WUFDSixDQUFDO1lBRUQsTUFBTSxZQUFZLEdBQUcsTUFBTSxJQUFJLENBQUMsTUFBTSxDQUFDO2dCQUNyQyxVQUFVO2FBQ1gsQ0FBQyxDQUFDO1lBQ0gsR0FBRyxDQUFDLEVBQUUsWUFBWSxFQUFFLENBQUMsQ0FBQztZQUV0QixPQUFPO2dCQUNMLFlBQVk7Z0JBQ1osVUFBVSxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRTtnQkFDNUIsWUFBWSxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsRUFBRTthQUNqQyxDQUFDO1FBQ0osQ0FBQztRQUVELE1BQU0sQ0FBQyxzQkFBc0IsQ0FBQyxPQUU3QjtZQUNDLE1BQU0sRUFBRSxLQUFLLEVBQUUsR0FBRyxPQUFPLENBQUM7WUFDMUIsTUFBTSxHQUFHLEdBQUcsc0JBQXNCLENBQUMsU0FBUyxDQUMxQyxzQkFBc0IsQ0FBQyxzQkFBc0IsQ0FBQyxJQUFJLENBQ25ELENBQUM7WUFDRixJQUFJLEtBQUssR0FBRyxDQUFDLENBQUM7WUFDZCxNQUFNLFdBQVcsR0FBRyxPQUFPLEtBQUssQ0FBQztZQUNqQyxHQUFHLENBQUMsRUFBRSxXQUFXLEVBQUUsQ0FBQyxDQUFDO1lBQ3JCLE1BQU0sNEJBQTRCLEdBQ2hDLENBQUM7Z0JBQ0QsQ0FBQyxDQUFDO1lBQ0osSUFBSSxXQUFXLEtBQUssUUFBUSxFQUFFLENBQUM7Z0JBQzdCLEtBQUssR0FBRyw0QkFBNEIsQ0FBQztZQUN2QyxDQUFDO2lCQUFNLElBQUksV0FBVyxLQUFLLFFBQVEsRUFBRSxDQUFDO2dCQUNwQyxLQUFLLEdBQUcsNEJBQTRCLENBQUM7WUFDdkMsQ0FBQztpQkFBTSxJQUFJLFdBQVcsS0FBSyxTQUFTLEVBQUUsQ0FBQztnQkFDckMsS0FBSyxHQUFHLDRCQUE0QixDQUFDO1lBQ3ZDLENBQUM7aUJBQU0sSUFBSSxLQUFLLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUM7Z0JBQ2hDLE1BQU0sS0FBSyxHQUFHLEtBQW1CLENBQUM7Z0JBQ2xDLEtBQUssTUFBTSxVQUFVLElBQUksS0FBSyxFQUFFLENBQUM7b0JBQy9CLElBQUksQ0FBQyxVQUFVO3dCQUFFLE9BQU8sS0FBSyxDQUFDO29CQUM5QixLQUFLLElBQUksSUFBSSxDQUFDLHNCQUFzQixDQUFDLEVBQUUsS0FBSyxFQUFFLFVBQVUsRUFBRSxDQUFDLENBQUM7Z0JBQzlELENBQUM7WUFDSCxDQUFDO2lCQUFNLElBQUksV0FBVyxLQUFLLFFBQVEsRUFBRSxDQUFDO2dCQUNwQyxLQUFLLElBQUksNEJBQTRCLENBQUM7Z0JBQ3RDLEtBQUssTUFBTSxDQUFDLFdBQVcsRUFBRSxhQUFhLENBQUMsSUFBSSxNQUFNLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUM7b0JBQ2pFLElBQUksQ0FBQyxLQUFLO3dCQUFFLE9BQU8sS0FBSyxDQUFDO29CQUN6QixLQUFLLElBQUksSUFBSSxDQUFDLHNCQUFzQixDQUFDLEVBQUUsS0FBSyxFQUFFLGFBQWEsRUFBRSxDQUFDLENBQUM7Z0JBQ2pFLENBQUM7WUFDSCxDQUFDO1lBQ0QsR0FBRyxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQztZQUNmLE9BQU8sS0FBSyxDQUFDO1FBQ2YsQ0FBQztRQUVELEtBQUssQ0FBQyxtQ0FBbUMsQ0FDdkMsT0FBbUQ7WUFFbkQsTUFBTSxHQUFHLEdBQUcsc0JBQXNCLENBQUMsU0FBUyxDQUMxQyxJQUFJLENBQUMsbUNBQW1DLENBQUMsSUFBSSxDQUM5QyxDQUFDO1lBQ0YsR0FBRyxDQUFDLEVBQUUsT0FBTyxFQUFFLENBQUMsQ0FBQztZQUNqQixNQUFNLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxHQUFHLE9BQU8sQ0FBQztZQUNoQyxNQUFNLFVBQVUsR0FBMkIsRUFBRSxDQUFDO1lBQzlDLFVBQVUsQ0FBQyxJQUFJLENBQ2IscUJBQXFCLENBQUM7Z0JBQ3BCLElBQUksRUFBRSxRQUFRO2dCQUNkLEtBQUssRUFBRSxPQUFPO2dCQUNkLEdBQUcsRUFBRTtvQkFDSCxFQUFFLEVBQUUsSUFBSSxDQUFDLEVBQUU7aUJBQ1o7Z0JBQ0QsS0FBSyxFQUFFO29CQUNMLEtBQUssRUFBRSxNQUFNLElBQUksQ0FBQyxFQUFFLENBQ2xCLHNCQUFzQixDQUFDLG9CQUFvQixDQUFDLE9BQU8sRUFDbkQsS0FBSyxDQUFDLFFBQVEsRUFBRSxDQUNqQjtpQkFDRjthQUNGLENBQUMsQ0FDSCxDQUFDO1lBQ0YsR0FBRyxDQUFDLEVBQUUsVUFBVSxFQUFFLENBQUMsQ0FBQztZQUNwQixPQUFPLFVBQVUsQ0FBQztRQUNwQixDQUFDO1FBRUQsS0FBSyxDQUFDLGtDQUFrQyxDQUN0QyxPQUFrRDtZQUVsRCxNQUFNLEdBQUcsR0FBRyxzQkFBc0IsQ0FBQyxTQUFTLENBQzFDLElBQUksQ0FBQyxrQ0FBa0MsQ0FBQyxJQUFJLENBQzdDLENBQUM7WUFDRixHQUFHLENBQUMsRUFBRSxPQUFPLEVBQUUsQ0FBQyxDQUFDO1lBQ2pCLE1BQU0sRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLEdBQUcsT0FBTyxDQUFDO1lBQ2hDLE1BQU0sVUFBVSxHQUEyQixFQUFFLENBQUM7WUFDOUMsVUFBVSxDQUFDLElBQUksQ0FDYixxQkFBcUIsQ0FBQztnQkFDcEIsSUFBSSxFQUFFLFFBQVE7Z0JBQ2QsS0FBSyxFQUFFLFNBQTRCO2dCQUNuQyxHQUFHLEVBQUU7b0JBQ0gsT0FBTyxFQUFFLElBQUksQ0FBQyxFQUFFO2lCQUNqQjtnQkFDRCxLQUFLLEVBQUU7b0JBQ0wsS0FBSyxFQUFFLEtBQUs7aUJBQ2I7YUFDRixDQUFDLENBQ0gsQ0FBQztZQUNGLEdBQUcsQ0FBQyxFQUFFLFVBQVUsRUFBRSxDQUFDLENBQUM7WUFDcEIsT0FBTyxVQUFVLENBQUM7UUFDcEIsQ0FBQztRQUVELEtBQUssQ0FBQyxrQ0FBa0MsQ0FDdEMsT0FBa0Q7WUFFbEQsTUFBTSxHQUFHLEdBQUcsc0JBQXNCLENBQUMsU0FBUyxDQUMxQyxJQUFJLENBQUMsa0NBQWtDLENBQUMsSUFBSSxDQUM3QyxDQUFDO1lBQ0YsR0FBRyxDQUFDLEVBQUUsT0FBTyxFQUFFLENBQUMsQ0FBQztZQUNqQixNQUFNLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxHQUFHLE9BQU8sQ0FBQztZQUNoQyxNQUFNLFVBQVUsR0FBMkIsRUFBRSxDQUFDO1lBQzlDLFVBQVUsQ0FBQyxJQUFJLENBQ2IscUJBQXFCLENBQUM7Z0JBQ3BCLElBQUksRUFBRSxRQUFRO2dCQUNkLEtBQUssRUFBRSxTQUE0QjtnQkFDbkMsR0FBRyxFQUFFO29CQUNILE9BQU8sRUFBRSxJQUFJLENBQUMsRUFBRTtpQkFDakI7Z0JBQ0QsS0FBSyxFQUFFO29CQUNMLEtBQUssRUFBRSxLQUFLO2lCQUNiO2FBQ0YsQ0FBQyxDQUNILENBQUM7WUFDRixHQUFHLENBQUMsRUFBRSxVQUFVLEVBQUUsQ0FBQyxDQUFDO1lBQ3BCLE9BQU8sVUFBVSxDQUFDO1FBQ3BCLENBQUM7UUFFRCxLQUFLLENBQUMsaUNBQWlDLENBQ3JDLE9BQXVEO1lBRXZELE1BQU0sR0FBRyxHQUFHLHNCQUFzQixDQUFDLFNBQVMsQ0FDMUMsSUFBSSxDQUFDLCtCQUErQixDQUFDLElBQUksQ0FDMUMsQ0FBQztZQUNGLE1BQU0sRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLEdBQUcsT0FBTyxDQUFDO1lBQ2hDLE1BQU0sVUFBVSxHQUEyQixFQUFFLENBQUM7WUFFOUMsTUFBTSxJQUFJLENBQUMsTUFBTSxDQUFDO2dCQUNoQixFQUFFLEVBQUU7b0JBQ0YsT0FBTyxFQUFFLE1BQU0sSUFBSSxDQUFDLEVBQUUsQ0FDcEIsc0JBQXNCLENBQUMsMkJBQTJCLENBQUMsSUFBSSxFQUN2RCxhQUFhLENBQ2Q7b0JBQ0QsU0FBUyxFQUFFLElBQUksQ0FBQyxFQUFFO2lCQUNuQjthQUNGLENBQUMsQ0FBQztZQUVILEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxLQUFLLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUM7Z0JBQ3RDLE1BQU0sT0FBTyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDekIsVUFBVSxDQUFDLElBQUksQ0FDYixHQUFHLENBQUMsTUFBTSxJQUFJLENBQUMsK0JBQStCLENBQUM7b0JBQzdDLEtBQUssRUFBRSxPQUFPO29CQUNkLE1BQU0sRUFBRSxJQUFJLENBQUMsZUFBZSxDQUFDLEdBQUcsRUFBRztvQkFDbkMsSUFBSSxFQUFFLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO29CQUNuQixZQUFZLEVBQUUsSUFBSSxDQUFDLEVBQUU7aUJBQ3RCLENBQUMsQ0FBQyxDQUNKLENBQUM7WUFDSixDQUFDO1lBRUQsT0FBTyxVQUFVLENBQUM7UUFDcEIsQ0FBQztRQUVELEtBQUssQ0FBQywrQkFBK0IsQ0FDbkMsT0FBdUQ7WUFFdkQsTUFBTSxHQUFHLEdBQUcsc0JBQXNCLENBQUMsU0FBUyxDQUMxQyxJQUFJLENBQUMsK0JBQStCLENBQUMsSUFBSSxDQUMxQyxDQUFDO1lBQ0YsTUFBTSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsR0FBRyxPQUFPLENBQUM7WUFDaEMsTUFBTSxVQUFVLEdBQTJCLEVBQUUsQ0FBQztZQUM5QyxJQUFJLE9BQU8sS0FBSyxLQUFLLFNBQVMsRUFBRSxDQUFDO2dCQUMvQixVQUFVLENBQUMsSUFBSSxDQUNiLEdBQUcsQ0FBQyxNQUFNLElBQUksQ0FBQyxtQ0FBbUMsQ0FBQztvQkFDakQsR0FBRyxPQUFPO29CQUNWLEtBQUs7aUJBQ04sQ0FBQyxDQUFDLENBQ0osQ0FBQztZQUNKLENBQUM7aUJBQU0sSUFBSSxPQUFPLEtBQUssS0FBSyxRQUFRLEVBQUUsQ0FBQztnQkFDckMsVUFBVSxDQUFDLElBQUksQ0FDYixHQUFHLENBQUMsTUFBTSxJQUFJLENBQUMsa0NBQWtDLENBQUM7b0JBQ2hELEdBQUcsT0FBTztvQkFDVixLQUFLO2lCQUNOLENBQUMsQ0FBQyxDQUNKLENBQUM7WUFDSixDQUFDO2lCQUFNLElBQUksT0FBTyxLQUFLLEtBQUssUUFBUSxFQUFFLENBQUM7Z0JBQ3JDLFVBQVUsQ0FBQyxJQUFJLENBQ2IsR0FBRyxDQUFDLE1BQU0sSUFBSSxDQUFDLGtDQUFrQyxDQUFDO29CQUNoRCxHQUFHLE9BQU87b0JBQ1YsS0FBSztpQkFDTixDQUFDLENBQUMsQ0FDSixDQUFDO1lBQ0osQ0FBQztpQkFBTSxJQUFJLEtBQUssQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQztnQkFDaEMsVUFBVSxDQUFDLElBQUksQ0FDYixHQUFHLENBQUMsTUFBTSxJQUFJLENBQUMsaUNBQWlDLENBQUM7b0JBQy9DLEdBQUcsT0FBTztvQkFDVixLQUFLO2lCQUNOLENBQUMsQ0FBQyxDQUNKLENBQUM7WUFDSixDQUFDO2lCQUFNLElBQUksT0FBTyxLQUFLLEtBQUssUUFBUSxFQUFFLENBQUM7Z0JBQ3JDLFVBQVUsQ0FBQyxJQUFJLENBQ2IsR0FBRyxDQUFDLE1BQU0sSUFBSSxDQUFDLGtDQUFrQyxDQUFDO29CQUNoRCxHQUFHLE9BQU87b0JBQ1YsS0FBSztpQkFDTixDQUFDLENBQUMsQ0FDSixDQUFDO1lBQ0osQ0FBQztpQkFBTSxDQUFDO2dCQUNOLE1BQU0sSUFBSSxLQUFLLENBQUMsaUJBQWlCLE9BQU8sS0FBSyxtQkFBbUIsQ0FBQyxDQUFDO1lBQ3BFLENBQUM7WUFFRCxPQUFPLFVBQVUsQ0FBQztRQUNwQixDQUFDO1FBRUQsS0FBSyxDQUFDLGtDQUFrQyxDQUN0QyxPQUFrRDtZQUVsRCxNQUFNLEdBQUcsR0FBRyxzQkFBc0IsQ0FBQyxTQUFTLENBQzFDLElBQUksQ0FBQyxrQ0FBa0MsQ0FBQyxJQUFJLENBQzdDLENBQUM7WUFDRixNQUFNLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxHQUFHLE9BQU8sQ0FBQztZQUNoQyxHQUFHLENBQUMsRUFBRSxPQUFPLEVBQUUsQ0FBQyxDQUFDO1lBQ2pCLE1BQU0sVUFBVSxHQUEyQixFQUFFLENBQUM7WUFFOUMsS0FBSyxNQUFNLENBQUMsV0FBVyxFQUFFLGFBQWEsQ0FBQyxJQUFJLE1BQU0sQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQztnQkFDakUsR0FBRyxDQUFDLEVBQUUsV0FBVyxFQUFFLGFBQWEsRUFBRSxDQUFDLENBQUM7Z0JBQ3BDLE1BQU0sQ0FBQyxZQUFZLENBQUMsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQztvQkFDMUMsRUFBRSxFQUFFO3dCQUNGLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQUUsV0FBVyxDQUFDO3FCQUM1QjtpQkFDRixDQUFDLENBQUM7Z0JBQ0gsR0FBRyxDQUFDLEVBQUUsWUFBWSxFQUFFLENBQUMsQ0FBQztnQkFDdEIsSUFBSSxZQUFZLEVBQUUsQ0FBQztvQkFDakIsSUFBSSx3QkFBd0IsR0FBMkIsRUFBRSxDQUFDO29CQUMxRCx3QkFBd0IsR0FBRyxNQUFNLElBQUksQ0FBQywrQkFBK0IsQ0FDbkU7d0JBQ0UsSUFBSSxFQUFFLFlBQVk7d0JBQ2xCLEtBQUssRUFBRSxhQUFhO3FCQUNyQixDQUNGLENBQUM7b0JBQ0YsR0FBRyxDQUFDLEVBQUUsd0JBQXdCLEVBQUUsQ0FBQyxDQUFDO29CQUNsQyxVQUFVLENBQUMsSUFBSSxDQUFDLEdBQUcsd0JBQXdCLENBQUMsQ0FBQztnQkFDL0MsQ0FBQztxQkFBTSxDQUFDO29CQUNOLElBQ0UsT0FBTyxhQUFhLEtBQUssUUFBUTt3QkFDakMsT0FBTyxhQUFhLEtBQUssUUFBUTt3QkFDakMsT0FBTyxhQUFhLEtBQUssU0FBUzt3QkFDbEMsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQzt3QkFDN0IsT0FBTyxhQUFhLEtBQUssUUFBUSxFQUNqQyxDQUFDO3dCQUNELEdBQUcsQ0FDRCxxQkFBcUIsV0FBVyxxQkFBcUIsT0FBTyxLQUFLLG1CQUFtQixDQUNyRixDQUFDO3dCQUNGLFNBQVM7b0JBQ1gsQ0FBQztvQkFFRCxHQUFHLENBQUMseUJBQXlCLENBQUMsQ0FBQztvQkFDL0IsR0FBRyxDQUFDLGlCQUFpQixFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUM7b0JBQzdDLEdBQUcsQ0FDRCxjQUFjLEVBQ2QsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUM7d0JBQ25CLEVBQUUsRUFBRSxJQUFJLENBQUMsTUFBTztxQkFDakIsQ0FBQyxDQUNILENBQUM7b0JBQ0YsR0FBRyxDQUNELG1CQUFtQixFQUNuQixJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQzt3QkFFbkIsT0FBTyxFQUFFLE1BQU0sSUFBSSxDQUFDLEVBQUUsQ0FBQyx1QkFBdUIsRUFBRSxTQUFTLENBQUM7d0JBQzFELE1BQU0sRUFBRTs0QkFDTixLQUFLLEVBQUUsUUFBUTt5QkFDaEI7d0JBQ0QsT0FBTyxFQUFFLElBQUksQ0FBQyxNQUFPO3FCQUN0QixDQUFDLENBQ0gsQ0FBQztvQkFDRixHQUFHLENBQ0QsbUJBQW1CLEVBQ25CLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDO3dCQUNuQixFQUFFLEVBQUU7NEJBQ0YsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU8sRUFBRSxRQUFRLENBQUM7eUJBQzlCO3FCQUNGLENBQUMsQ0FDSCxDQUFDO29CQUVGLE1BQU0sY0FBYyxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsR0FBRyxFQUFFLENBQUM7b0JBQ2xELEdBQUcsQ0FBQyxFQUFFLGNBQWMsRUFBRSxDQUFDLENBQUM7b0JBQ3hCLElBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQzt3QkFDcEIsTUFBTSxJQUFJLEtBQUssQ0FBQyw4QkFBOEIsQ0FBQyxDQUFDO29CQUNsRCxDQUFDO29CQUNELE1BQU0sd0JBQXdCLEdBQzVCLE1BQU0sSUFBSSxDQUFDLCtCQUErQixDQUFDO3dCQUN6QyxNQUFNLEVBQUUsY0FBYzt3QkFDdEIsWUFBWSxFQUFFLElBQUksQ0FBQyxFQUFFO3dCQUNyQixLQUFLLEVBQUUsYUFBYTt3QkFDcEIsSUFBSSxFQUFFLFdBQVc7cUJBQ2xCLENBQUMsQ0FBQztvQkFDTCxHQUFHLENBQUMsRUFBRSx3QkFBd0IsRUFBRSxDQUFDLENBQUM7b0JBQ2xDLFVBQVUsQ0FBQyxJQUFJLENBQUMsR0FBRyx3QkFBd0IsQ0FBQyxDQUFDO2dCQUMvQyxDQUFDO2dCQUVELEdBQUcsQ0FBQyxFQUFFLFVBQVUsRUFBRSxDQUFDLENBQUM7WUFDdEIsQ0FBQztZQUVELE9BQU8sVUFBVSxDQUFDO1FBQ3BCLENBQUM7UUFFRCxLQUFLLENBQUMsbUNBQW1DLENBQ3ZDLE9BQThDO1lBRTlDLE1BQU0sVUFBVSxHQUEyQixFQUFFLENBQUM7WUFDOUMsTUFBTSxFQUFFLEtBQUssRUFBRSxZQUFZLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxHQUFHLE9BQU8sQ0FBQztZQUN0RCxNQUFNLEdBQUcsR0FBRyxzQkFBc0IsQ0FBQyxTQUFTLENBQzFDLElBQUksQ0FBQyxtQ0FBbUMsQ0FBQyxJQUFJLENBQzlDLENBQUM7WUFFRixNQUFNLHlCQUF5QixHQUFHLHFCQUFxQixDQUFDO2dCQUN0RCxJQUFJLEVBQUUsUUFBUTtnQkFDZCxLQUFLLEVBQUUsT0FBTztnQkFDZCxPQUFPLEVBQUU7b0JBQ1AsRUFBRSxFQUFFLE1BQU07b0JBQ1YsT0FBTyxFQUFFLE1BQU0sSUFBSSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTyxFQUFFLFVBQVUsQ0FBQyxPQUFPLEtBQUssQ0FBQyxDQUFDO29CQUM5RCxPQUFPLEVBQUUsWUFBWTtvQkFDckIsS0FBSyxFQUFFLE1BQU0sSUFBSSxDQUFDLEVBQUUsQ0FDbEIsc0JBQXNCLENBQUMsb0JBQW9CLENBQUMsT0FBTyxFQUNuRCxLQUFLLENBQUMsUUFBUSxFQUFFLENBQ2pCO2lCQUNGO2FBQ0YsQ0FBQyxDQUFDO1lBQ0gsR0FBRyxDQUFDLEVBQUUseUJBQXlCLEVBQUUsQ0FBQyxDQUFDO1lBQ25DLFVBQVUsQ0FBQyxJQUFJLENBQUMseUJBQXlCLENBQUMsQ0FBQztZQUUzQyxNQUFNLDRCQUE0QixHQUFHLHFCQUFxQixDQUFDO2dCQUN6RCxJQUFJLEVBQUUsUUFBUTtnQkFDZCxLQUFLLEVBQUUsT0FBTztnQkFDZCxPQUFPLEVBQUU7b0JBRVAsT0FBTyxFQUFFLE1BQU0sSUFBSSxDQUFDLEVBQUUsQ0FBQyx1QkFBdUIsRUFBRSxTQUFTLENBQUM7b0JBQzFELE9BQU8sRUFBRSxZQUFZO29CQUNyQixLQUFLLEVBQUUsTUFBTTtvQkFDYixNQUFNLEVBQUU7d0JBQ04sSUFBSSxFQUFFOzRCQUNKLEtBQUssRUFBRSxJQUFJO3lCQUNaO3FCQUNGO2lCQUNGO2FBQ0YsQ0FBQyxDQUFDO1lBQ0gsR0FBRyxDQUFDLEVBQUUsNEJBQTRCLEVBQUUsQ0FBQyxDQUFDO1lBQ3RDLFVBQVUsQ0FBQyxJQUFJLENBQUMsNEJBQTRCLENBQUMsQ0FBQztZQUU5QyxHQUFHLENBQUMsRUFBRSxVQUFVLEVBQUUsQ0FBQyxDQUFDO1lBQ3BCLE9BQU8sVUFBVSxDQUFDO1FBQ3BCLENBQUM7UUFDRCxLQUFLLENBQUMsa0NBQWtDLENBQ3RDLE9BQTZDO1lBRTdDLE1BQU0sVUFBVSxHQUEyQixFQUFFLENBQUM7WUFDOUMsTUFBTSxFQUFFLEtBQUssRUFBRSxZQUFZLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxHQUFHLE9BQU8sQ0FBQztZQUN0RCxNQUFNLEdBQUcsR0FBRyxzQkFBc0IsQ0FBQyxTQUFTLENBQzFDLG9DQUFvQyxDQUNyQyxDQUFDO1lBQ0YsTUFBTSx5QkFBeUIsR0FBRyxxQkFBcUIsQ0FBQztnQkFDdEQsSUFBSSxFQUFFLFFBQVE7Z0JBQ2QsS0FBSyxFQUFFLE9BQU87Z0JBQ2QsT0FBTyxFQUFFO29CQUNQLEVBQUUsRUFBRSxNQUFNO29CQUNWLE9BQU8sRUFBRSxZQUFZO29CQUNyQixLQUFLLEVBQUUsWUFBWTtvQkFDbkIsT0FBTyxFQUFFLE1BQU0sSUFBSSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTyxFQUFFLFVBQVUsQ0FBQyxPQUFPLEtBQUssQ0FBQyxDQUFDO2lCQUMvRDthQUNGLENBQUMsQ0FBQztZQUNILEdBQUcsQ0FBQyxFQUFFLHlCQUF5QixFQUFFLENBQUMsQ0FBQztZQUNuQyxVQUFVLENBQUMsSUFBSSxDQUFDLHlCQUF5QixDQUFDLENBQUM7WUFFM0MsTUFBTSxnQ0FBZ0MsR0FBRyxxQkFBcUIsQ0FBQztnQkFDN0QsSUFBSSxFQUFFLFFBQVE7Z0JBQ2QsS0FBSyxFQUFFLEdBQUcsT0FBTyxLQUFLLEdBQXNCO2dCQUM1QyxPQUFPLEVBQUU7b0JBQ1AsT0FBTyxFQUFFLE1BQU07b0JBQ2YsS0FBSyxFQUFFLEtBQUs7aUJBQ2I7YUFDRixDQUFDLENBQUM7WUFDSCxHQUFHLENBQUMsRUFBRSxnQ0FBZ0MsRUFBRSxDQUFDLENBQUM7WUFDMUMsVUFBVSxDQUFDLElBQUksQ0FBQyxnQ0FBZ0MsQ0FBQyxDQUFDO1lBRWxELE1BQU0sNEJBQTRCLEdBQUcscUJBQXFCLENBQUM7Z0JBQ3pELElBQUksRUFBRSxRQUFRO2dCQUNkLEtBQUssRUFBRSxPQUFPO2dCQUNkLE9BQU8sRUFBRTtvQkFFUCxPQUFPLEVBQUUsTUFBTSxJQUFJLENBQUMsRUFBRSxDQUFDLHVCQUF1QixFQUFFLFNBQVMsQ0FBQztvQkFDMUQsT0FBTyxFQUFFLFlBQVk7b0JBQ3JCLEtBQUssRUFBRSxNQUFNO29CQUNiLE1BQU0sRUFBRTt3QkFDTixJQUFJLEVBQUU7NEJBQ0osS0FBSyxFQUFFLElBQUk7eUJBQ1o7cUJBQ0Y7aUJBQ0Y7YUFDRixDQUFDLENBQUM7WUFDSCxHQUFHLENBQUMsRUFBRSw0QkFBNEIsRUFBRSxDQUFDLENBQUM7WUFDdEMsVUFBVSxDQUFDLElBQUksQ0FBQyw0QkFBNEIsQ0FBQyxDQUFDO1lBRTlDLEdBQUcsQ0FBQyxFQUFFLFVBQVUsRUFBRSxDQUFDLENBQUM7WUFDcEIsT0FBTyxVQUFVLENBQUM7UUFDcEIsQ0FBQztRQUVELEtBQUssQ0FBQyxrQ0FBa0MsQ0FDdEMsT0FBNkM7WUFFN0MsTUFBTSxVQUFVLEdBQTJCLEVBQUUsQ0FBQztZQUM5QyxNQUFNLEVBQUUsS0FBSyxFQUFFLFlBQVksRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLEdBQUcsT0FBTyxDQUFDO1lBQ3RELE1BQU0sR0FBRyxHQUFHLHNCQUFzQixDQUFDLFNBQVMsQ0FDMUMsb0NBQW9DLENBQ3JDLENBQUM7WUFDRixNQUFNLHlCQUF5QixHQUFHLHFCQUFxQixDQUFDO2dCQUN0RCxJQUFJLEVBQUUsUUFBUTtnQkFDZCxLQUFLLEVBQUUsT0FBTztnQkFDZCxPQUFPLEVBQUU7b0JBQ1AsRUFBRSxFQUFFLE1BQU07b0JBQ1YsT0FBTyxFQUFFLFlBQVk7b0JBQ3JCLEtBQUssRUFBRSxZQUFZO29CQUNuQixPQUFPLEVBQUUsTUFBTSxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxNQUFPLEVBQUUsVUFBVSxDQUFDLE9BQU8sS0FBSyxDQUFDLENBQUM7aUJBQy9EO2FBQ0YsQ0FBQyxDQUFDO1lBQ0gsR0FBRyxDQUFDLEVBQUUseUJBQXlCLEVBQUUsQ0FBQyxDQUFDO1lBQ25DLFVBQVUsQ0FBQyxJQUFJLENBQUMseUJBQXlCLENBQUMsQ0FBQztZQUUzQyxNQUFNLGdDQUFnQyxHQUFHLHFCQUFxQixDQUFDO2dCQUM3RCxJQUFJLEVBQUUsUUFBUTtnQkFDZCxLQUFLLEVBQUUsR0FBRyxPQUFPLEtBQUssR0FBc0I7Z0JBQzVDLE9BQU8sRUFBRTtvQkFDUCxPQUFPLEVBQUUsTUFBTTtvQkFDZixLQUFLLEVBQUUsS0FBSztpQkFDYjthQUNGLENBQUMsQ0FBQztZQUNILEdBQUcsQ0FBQyxFQUFFLGdDQUFnQyxFQUFFLENBQUMsQ0FBQztZQUMxQyxVQUFVLENBQUMsSUFBSSxDQUFDLGdDQUFnQyxDQUFDLENBQUM7WUFFbEQsTUFBTSw0QkFBNEIsR0FBRyxxQkFBcUIsQ0FBQztnQkFDekQsSUFBSSxFQUFFLFFBQVE7Z0JBQ2QsS0FBSyxFQUFFLE9BQU87Z0JBQ2QsT0FBTyxFQUFFO29CQUVQLE9BQU8sRUFBRSxNQUFNLElBQUksQ0FBQyxFQUFFLENBQUMsdUJBQXVCLEVBQUUsU0FBUyxDQUFDO29CQUMxRCxPQUFPLEVBQUUsWUFBWTtvQkFDckIsS0FBSyxFQUFFLE1BQU07b0JBQ2IsTUFBTSxFQUFFO3dCQUNOLElBQUksRUFBRTs0QkFDSixLQUFLLEVBQUUsSUFBSTt5QkFDWjtxQkFDRjtpQkFDRjthQUNGLENBQUMsQ0FBQztZQUNILEdBQUcsQ0FBQyxFQUFFLDRCQUE0QixFQUFFLENBQUMsQ0FBQztZQUN0QyxVQUFVLENBQUMsSUFBSSxDQUFDLDRCQUE0QixDQUFDLENBQUM7WUFFOUMsR0FBRyxDQUFDLEVBQUUsVUFBVSxFQUFFLENBQUMsQ0FBQztZQUNwQixPQUFPLFVBQVUsQ0FBQztRQUNwQixDQUFDO1FBRUQsS0FBSyxDQUFDLGlDQUFpQyxDQUNyQyxPQUFpRDtZQUVqRCxNQUFNLFVBQVUsR0FBMkIsRUFBRSxDQUFDO1lBQzlDLE1BQU0sRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxZQUFZLEVBQUUsR0FBRyxPQUFPLENBQUM7WUFDdEQsTUFBTSxHQUFHLEdBQUcsc0JBQXNCLENBQUMsU0FBUyxDQUMxQyxvQ0FBb0MsQ0FDckMsQ0FBQztZQUVGLE1BQU0seUJBQXlCLEdBQUcscUJBQXFCLENBQUM7Z0JBQ3RELElBQUksRUFBRSxRQUFRO2dCQUNkLEtBQUssRUFBRSxPQUFPO2dCQUNkLE9BQU8sRUFBRTtvQkFDUCxFQUFFLEVBQUUsTUFBTTtvQkFDVixPQUFPLEVBQUUsTUFBTSxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxNQUFPLEVBQUUsVUFBVSxDQUFDLE9BQU8sS0FBSyxDQUFDLENBQUM7b0JBQzlELE9BQU8sRUFBRSxZQUFZO29CQUNyQixLQUFLLEVBQUUsWUFBWTtpQkFDcEI7YUFDRixDQUFDLENBQUM7WUFDSCxHQUFHLENBQUMsRUFBRSx5QkFBeUIsRUFBRSxDQUFDLENBQUM7WUFDbkMsVUFBVSxDQUFDLElBQUksQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDO1lBRTNDLE1BQU0sNEJBQTRCLEdBQUcscUJBQXFCLENBQUM7Z0JBQ3pELElBQUksRUFBRSxRQUFRO2dCQUNkLEtBQUssRUFBRSxPQUFPO2dCQUNkLE9BQU8sRUFBRTtvQkFFUCxPQUFPLEVBQUUsTUFBTSxJQUFJLENBQUMsRUFBRSxDQUFDLHVCQUF1QixFQUFFLFNBQVMsQ0FBQztvQkFDMUQsT0FBTyxFQUFFLFlBQVk7b0JBQ3JCLEtBQUssRUFBRSxNQUFNO29CQUNiLE1BQU0sRUFBRTt3QkFDTixJQUFJLEVBQUU7NEJBQ0osS0FBSyxFQUFFLElBQUk7eUJBQ1o7cUJBQ0Y7aUJBQ0Y7YUFDRixDQUFDLENBQUM7WUFDSCxHQUFHLENBQUMsRUFBRSw0QkFBNEIsRUFBRSxDQUFDLENBQUM7WUFDdEMsVUFBVSxDQUFDLElBQUksQ0FBQyw0QkFBNEIsQ0FBQyxDQUFDO1lBRTlDLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxLQUFLLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUM7Z0JBQ3RDLE1BQU0sT0FBTyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDekIsVUFBVSxDQUFDLElBQUksQ0FDYixHQUFHLENBQUMsTUFBTSxJQUFJLENBQUMsK0JBQStCLENBQUM7b0JBQzdDLEtBQUssRUFBRSxPQUFPO29CQUNkLFlBQVksRUFBRSxNQUFNO29CQUNwQixNQUFNLEVBQUUsSUFBSSxDQUFDLGVBQWUsQ0FBQyxHQUFHLEVBQUc7b0JBQ25DLElBQUksRUFBRSxDQUFDLENBQUMsUUFBUSxFQUFFO2lCQUNuQixDQUFDLENBQUMsQ0FDSixDQUFDO1lBQ0osQ0FBQztZQUVELE9BQU8sVUFBVSxDQUFDO1FBQ3BCLENBQUM7UUFFRCxLQUFLLENBQUMscUNBQXFDLENBQ3pDLE9BQXFEO1lBRXJELE1BQU0sVUFBVSxHQUEyQixFQUFFLENBQUM7WUFDOUMsTUFBTSxFQUFFLEtBQUssRUFBRSxHQUFHLE9BQU8sQ0FBQztZQUMxQixJQUFJLE9BQU8sS0FBSyxLQUFLLFFBQVEsRUFBRSxDQUFDO2dCQUM5QixVQUFVLENBQUMsSUFBSSxDQUNiLEdBQUcsQ0FBQyxNQUFNLElBQUksQ0FBQyxrQ0FBa0MsQ0FBQztvQkFDaEQsR0FBRyxPQUFPO29CQUNWLEtBQUs7aUJBQ04sQ0FBQyxDQUFDLENBQ0osQ0FBQztZQUNKLENBQUM7aUJBQU0sSUFBSSxPQUFPLEtBQUssS0FBSyxRQUFRLEVBQUUsQ0FBQztnQkFDckMsVUFBVSxDQUFDLElBQUksQ0FDYixHQUFHLENBQUMsTUFBTSxJQUFJLENBQUMsa0NBQWtDLENBQUM7b0JBQ2hELEdBQUcsT0FBTztvQkFDVixLQUFLO2lCQUNOLENBQUMsQ0FBQyxDQUNKLENBQUM7WUFDSixDQUFDO2lCQUFNLElBQUksT0FBTyxLQUFLLEtBQUssU0FBUyxFQUFFLENBQUM7Z0JBQ3RDLFVBQVUsQ0FBQyxJQUFJLENBQ2IsR0FBRyxDQUFDLE1BQU0sSUFBSSxDQUFDLG1DQUFtQyxDQUFDO29CQUNqRCxHQUFHLE9BQU87b0JBQ1YsS0FBSztpQkFDTixDQUFDLENBQUMsQ0FDSixDQUFDO1lBQ0osQ0FBQztZQUNELE9BQU8sVUFBVSxDQUFDO1FBQ3BCLENBQUM7UUFFRCxLQUFLLENBQUMsa0NBQWtDLENBQ3RDLE9BQTJDO1lBRTNDLE1BQU0sVUFBVSxHQUEyQixFQUFFLENBQUM7WUFDOUMsTUFBTSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLFlBQVksRUFBRSxHQUFHLE9BQU8sQ0FBQztZQUN0RCxNQUFNLEdBQUcsR0FBRyxzQkFBc0IsQ0FBQyxTQUFTLENBQzFDLElBQUksQ0FBQyxrQ0FBa0MsQ0FBQyxJQUFJLENBQzdDLENBQUM7WUFFRixNQUFNLHlCQUF5QixHQUFHLHFCQUFxQixDQUFDO2dCQUN0RCxJQUFJLEVBQUUsUUFBUTtnQkFDZCxLQUFLLEVBQUUsT0FBTztnQkFDZCxPQUFPLEVBQUU7b0JBQ1AsRUFBRSxFQUFFLE1BQU07b0JBQ1YsT0FBTyxFQUFFLE1BQU0sSUFBSSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTyxFQUFFLFVBQVUsQ0FBQyxPQUFPLEtBQUssQ0FBQyxDQUFDO29CQUM5RCxPQUFPLEVBQUUsWUFBWTtvQkFDckIsS0FBSyxFQUFFLFlBQVk7aUJBQ3BCO2FBQ0YsQ0FBQyxDQUFDO1lBQ0gsR0FBRyxDQUFDLEVBQUUseUJBQXlCLEVBQUUsQ0FBQyxDQUFDO1lBQ25DLFVBQVUsQ0FBQyxJQUFJLENBQUMseUJBQXlCLENBQUMsQ0FBQztZQUUzQyxNQUFNLDRCQUE0QixHQUFHLHFCQUFxQixDQUFDO2dCQUN6RCxJQUFJLEVBQUUsUUFBUTtnQkFDZCxLQUFLLEVBQUUsT0FBTztnQkFDZCxPQUFPLEVBQUU7b0JBRVAsT0FBTyxFQUFFLE1BQU0sSUFBSSxDQUFDLEVBQUUsQ0FBQyx1QkFBdUIsRUFBRSxTQUFTLENBQUM7b0JBQzFELE9BQU8sRUFBRSxZQUFZO29CQUNyQixLQUFLLEVBQUUsTUFBTTtvQkFDYixNQUFNLEVBQUU7d0JBQ04sSUFBSSxFQUFFOzRCQUNKLEtBQUssRUFBRSxJQUFJO3lCQUNaO3FCQUNGO2lCQUNGO2FBQ0YsQ0FBQyxDQUFDO1lBQ0gsR0FBRyxDQUFDLEVBQUUsNEJBQTRCLEVBQUUsQ0FBQyxDQUFDO1lBQ3RDLFVBQVUsQ0FBQyxJQUFJLENBQUMsNEJBQTRCLENBQUMsQ0FBQztZQUU5QyxLQUFLLE1BQU0sQ0FBQyxXQUFXLEVBQUUsYUFBYSxDQUFDLElBQUksTUFBTSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDO2dCQUNqRSxJQUNFLE9BQU8sYUFBYSxLQUFLLFFBQVE7b0JBQ2pDLE9BQU8sYUFBYSxLQUFLLFFBQVE7b0JBQ2pDLE9BQU8sYUFBYSxLQUFLLFNBQVM7b0JBQ2xDLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUM7b0JBQzdCLE9BQU8sYUFBYSxLQUFLLFFBQVEsRUFDakMsQ0FBQztvQkFDRCxHQUFHLENBQ0QscUJBQXFCLFdBQVcscUJBQXFCLE9BQU8sS0FBSyxtQkFBbUIsQ0FDckYsQ0FBQztvQkFDRixTQUFTO2dCQUNYLENBQUM7Z0JBQ0QsTUFBTSxjQUFjLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQyxHQUFHLEVBQUUsQ0FBQztnQkFDbEQsR0FBRyxDQUFDLEVBQUUsY0FBYyxFQUFFLENBQUMsQ0FBQztnQkFDeEIsSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFDO29CQUNwQixNQUFNLElBQUksS0FBSyxDQUFDLDhCQUE4QixDQUFDLENBQUM7Z0JBQ2xELENBQUM7Z0JBQ0QsTUFBTSx3QkFBd0IsR0FDNUIsTUFBTSxJQUFJLENBQUMsK0JBQStCLENBQUM7b0JBQ3pDLE1BQU0sRUFBRSxjQUFjO29CQUN0QixZQUFZLEVBQUUsTUFBTTtvQkFDcEIsS0FBSyxFQUFFLGFBQWE7b0JBQ3BCLElBQUksRUFBRSxXQUFXO2lCQUNsQixDQUFDLENBQUM7Z0JBQ0wsVUFBVSxDQUFDLElBQUksQ0FBQyxHQUFHLHdCQUF3QixDQUFDLENBQUM7WUFDL0MsQ0FBQztZQUVELE9BQU8sVUFBVSxDQUFDO1FBQ3BCLENBQUM7UUFFRCxLQUFLLENBQUMsK0JBQStCLENBQ25DLE9BQStDO1lBRS9DLE1BQU0sVUFBVSxHQUEyQixFQUFFLENBQUM7WUFDOUMsTUFBTSxFQUFFLEtBQUssRUFBRSxHQUFHLE9BQU8sQ0FBQztZQUMxQixNQUFNLEdBQUcsR0FBRyxzQkFBc0IsQ0FBQyxTQUFTLENBQzFDLElBQUksQ0FBQywrQkFBK0IsQ0FBQyxJQUFJLENBQzFDLENBQUM7WUFFRixJQUNFLE9BQU8sS0FBSyxLQUFLLFFBQVE7Z0JBQ3pCLE9BQU8sS0FBSyxLQUFLLFFBQVE7Z0JBQ3pCLE9BQU8sS0FBSyxLQUFLLFNBQVMsRUFDMUIsQ0FBQztnQkFDRCxVQUFVLENBQUMsSUFBSSxDQUNiLEdBQUcsQ0FBQyxNQUFNLElBQUksQ0FBQyxxQ0FBcUMsQ0FBQztvQkFDbkQsR0FBRyxPQUFPO29CQUNWLEtBQUs7aUJBQ04sQ0FBQyxDQUFDLENBQ0osQ0FBQztZQUNKLENBQUM7aUJBQU0sSUFBSSxLQUFLLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUM7Z0JBQ2hDLFVBQVUsQ0FBQyxJQUFJLENBQ2IsR0FBRyxDQUFDLE1BQU0sSUFBSSxDQUFDLGlDQUFpQyxDQUFDO29CQUMvQyxHQUFHLE9BQU87b0JBQ1YsS0FBSztpQkFDTixDQUFDLENBQUMsQ0FDSixDQUFDO1lBQ0osQ0FBQztpQkFBTSxJQUFJLE9BQU8sS0FBSyxLQUFLLFFBQVEsRUFBRSxDQUFDO2dCQUNyQyxVQUFVLENBQUMsSUFBSSxDQUNiLEdBQUcsQ0FBQyxNQUFNLElBQUksQ0FBQyxrQ0FBa0MsQ0FBQztvQkFDaEQsR0FBRyxPQUFPO29CQUNWLEtBQUs7aUJBQ04sQ0FBQyxDQUFDLENBQ0osQ0FBQztZQUNKLENBQUM7aUJBQU0sQ0FBQztnQkFDTixNQUFNLElBQUksS0FBSyxDQUFDLGlCQUFpQixPQUFPLEtBQUssbUJBQW1CLENBQUMsQ0FBQztZQUNwRSxDQUFDO1lBRUQsR0FBRyxDQUFDLEVBQUUsVUFBVSxFQUFFLENBQUMsQ0FBQztZQUNwQixPQUFPLFVBQVUsQ0FBQztRQUNwQixDQUFDOztJQUdILFNBQVMsOEJBQThCLENBQUMsT0FHdkM7UUFDQyxNQUFNLEVBQUUsTUFBTSxFQUFFLGFBQWEsRUFBRSxHQUFHLE9BQU8sQ0FBQztRQUUxQyxPQUFPLElBQUksS0FBSyxDQUFDLE1BQU0sRUFBRTtZQUN2QixHQUFHLEVBQUUsVUFBVSxHQUEyQixFQUFFLElBQXFCO2dCQUMvRCxJQUFJLGFBQWEsSUFBSSxJQUFJLElBQUksYUFBYSxFQUFFLENBQUM7b0JBRTNDLE9BQU8sYUFBYSxDQUFDLElBQWMsQ0FBQyxDQUFDO2dCQUN2QyxDQUFDO2dCQUdELE9BQU8sR0FBRyxDQUFDLElBQW9DLENBQUMsQ0FBQztZQUNuRCxDQUFDO1NBQ0YsQ0FBMkIsQ0FBQztJQUMvQixDQUFDO0lBRUQsSUFBSSxDQUFDO1FBQ0gsTUFBTSxNQUFNLEdBQUcsTUFBTSxJQUFJLEVBQUUsQ0FBQztRQUM1QixPQUFPO1lBQ0wsTUFBTTtZQUNOLElBQUksRUFBRSxJQUFJO1NBQ1gsQ0FBQztJQUNKLENBQUM7SUFBQyxPQUFPLEtBQUssRUFBRSxDQUFDO1FBQ2YsTUFBTTtZQUNKLEtBQUssRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQztZQUMxQixJQUFJLEVBQUUsSUFBSTtTQUNYLENBQUM7SUFDSixDQUFDO0lBRUQsS0FBSyxVQUFVLElBQUk7UUFDakIsTUFBTSxHQUFHLEdBQUcsc0JBQXNCLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUV4RCxJQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRSxDQUFDO1lBQ2xDLE9BQU87UUFDVCxDQUFDO1FBRUQsTUFBTSxzQkFBc0IsR0FBRyxNQUFNLHNCQUFzQixDQUFDLElBQUksQ0FBQztZQUMvRCxHQUFHO1lBQ0gsVUFBVTtZQUNWLFlBQVk7U0FDYixDQUFDLENBQUM7UUFDSCxHQUFHLENBQUMsRUFBRSxzQkFBc0IsRUFBRSxDQUFDLENBQUM7UUFFaEMsTUFBTSw2QkFBNkIsR0FBRyw4QkFBOEIsQ0FBQztZQUNuRSxNQUFNLEVBQUUsc0JBQXNCO1lBQzlCLGFBQWE7U0FDZCxDQUFDLENBQUM7UUFDSCxHQUFHLENBQUMsRUFBRSw2QkFBNkIsRUFBRSxDQUFDLENBQUM7UUFFdkMsTUFBTSxhQUFhLEdBQUcsTUFBTSw2QkFBNkIsQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUNwRSxHQUFHLENBQUMsRUFBRSxhQUFhLEVBQUUsQ0FBQyxDQUFDO1FBRXZCLE9BQU8sYUFBYSxDQUFDO0lBQ3ZCLENBQUM7QUE4R0gsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcclxuICBEZWVwQ2xpZW50LFxyXG4gIERlZXBDbGllbnRSZXN1bHQsXHJcbiAgU2VyaWFsT3BlcmF0aW9uLFxyXG4gIFRhYmxlLFxyXG59IGZyb20gXCJAZGVlcC1mb3VuZGF0aW9uL2RlZXBsaW5rcy9pbXBvcnRzL2NsaWVudC5qc1wiO1xyXG5pbXBvcnQgeyBCb29sRXhwTGluayB9IGZyb20gXCJAZGVlcC1mb3VuZGF0aW9uL2RlZXBsaW5rcy9pbXBvcnRzL2NsaWVudF90eXBlcy5qc1wiO1xyXG5pbXBvcnQge1xyXG4gIExpbmssXHJcbiAgTWluaWxpbmtzUmVzdWx0LFxyXG59IGZyb20gXCJAZGVlcC1mb3VuZGF0aW9uL2RlZXBsaW5rcy9pbXBvcnRzL21pbmlsaW5rcy5qc1wiO1xyXG5cclxuYXN5bmMgKG9wdGlvbnM6IHtcclxuICBkZWVwOiBEZWVwQ2xpZW50O1xyXG4gIHJvb3RMaW5rSWQ/OiBudW1iZXI7XHJcbiAgb2JqOiBPYmo7XHJcbiAgY3VzdG9tTWV0aG9kcz86IFJlY29yZDxzdHJpbmcsIEZ1bmN0aW9uPjtcclxuICByZXN1bHRMaW5rSWQ/OiBudW1iZXI7XHJcbn0pID0+IHtcclxuICBjb25zdCB7IGRlZXAsIHJvb3RMaW5rSWQsIG9iaiwgY3VzdG9tTWV0aG9kcywgcmVzdWx0TGlua0lkIH0gPSBvcHRpb25zO1xyXG4gIGNvbnN0IHsgY3JlYXRlU2VyaWFsT3BlcmF0aW9uIH0gPSBhd2FpdCBpbXBvcnQoXHJcbiAgICBcIkBkZWVwLWZvdW5kYXRpb24vZGVlcGxpbmtzL2ltcG9ydHMvZ3FsL2luZGV4LmpzXCJcclxuICApO1xyXG4gIGNvbnN0IHsgcGFzY2FsQ2FzZSB9ID0gYXdhaXQgaW1wb3J0KFwiY2FzZS1hbnl0aGluZ1wiKTtcclxuICBjb25zdCB7IGRlZmF1bHQ6IGRlYnVnIH0gPSBhd2FpdCBpbXBvcnQoXCJkZWJ1Z1wiKTtcclxuICBjb25zdCB7IGRlZmF1bHQ6IHV0aWwgfSA9IGF3YWl0IGltcG9ydChcInV0aWxcIik7XHJcbiAgY29uc3QgbG9nczogQXJyYXk8YW55PiA9IFtdO1xyXG4gIGNvbnN0IHBhY2thZ2VMb2cgPSBkZWJ1ZyhcIkBkZWVwLWZvdW5kYXRpb24vb2JqZWN0LXRvLWxpbmtzLWFzeW5jLWNvbnZlcnRlclwiKTtcclxuICBwYWNrYWdlTG9nKHsgb3B0aW9ucyB9KTtcclxuXHJcbiAgY2xhc3MgT2JqZWN0VG9MaW5rc0NvbnZlcnRlciB7XHJcbiAgICByZXNlcnZlZExpbmtJZHM6IEFycmF5PG51bWJlcj47XHJcbiAgICByb290TGluazogTGluazxudW1iZXI+O1xyXG4gICAgb2JqOiBPYmo7XHJcbiAgICByZXN1bHRMaW5rOiBMaW5rPG51bWJlcj47XHJcbiAgICBkZWVwID0gZGVlcDtcclxuICAgIHN0YXRpYyByZXF1aXJlZFBhY2thZ2VOYW1lcyA9IHtcclxuICAgICAgY29yZTogXCJAZGVlcC1mb3VuZGF0aW9uL2NvcmVcIixcclxuICAgICAgYm9vbGVhbjogXCJAZGVlcC1mb3VuZGF0aW9uL2Jvb2xlYW5cIixcclxuICAgIH07XHJcbiAgICBzdGF0aWMgcmVxdWlyZWRQYWNrYWdlc0luTWluaWxpbmtzID0ge1xyXG4gICAgICAuLi50aGlzLnJlcXVpcmVkUGFja2FnZU5hbWVzLFxyXG4gICAgICBvYmplY3RUb0xpbmtzQ29udmVydGVyOlxyXG4gICAgICAgIFwiQGRlZXAtZm91bmRhdGlvbi9vYmplY3QtdG8tbGlua3MtYXN5bmMtY29udmVydGVyXCIsXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnM6IE9iamVjdFRvTGlua3NDb252ZXJ0ZXJPcHRpb25zKSB7XHJcbiAgICAgIHRoaXMucm9vdExpbmsgPSBvcHRpb25zLnJvb3RMaW5rO1xyXG4gICAgICB0aGlzLnJlc2VydmVkTGlua0lkcyA9IG9wdGlvbnMucmVzZXJ2ZWRMaW5rSWRzO1xyXG4gICAgICB0aGlzLm9iaiA9IG9wdGlvbnMub2JqO1xyXG4gICAgICB0aGlzLnJlc3VsdExpbmsgPSBvcHRpb25zLnJlc3VsdExpbms7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldExvZ2dlcihuYW1lc3BhY2U6IHN0cmluZykge1xyXG4gICAgICBjb25zdCBnZXRMb2dnZXJMb2dnZXIgPSBkZWJ1Zyh0aGlzLmdldExvZ2dlci5uYW1lKTtcclxuICAgICAgZ2V0TG9nZ2VyTG9nZ2VyKHsgb3B0aW9ucyB9KTtcclxuICAgICAgY29uc3QgcmVzdWx0TG9nZ2VyID0gcGFja2FnZUxvZy5leHRlbmQoXHJcbiAgICAgICAgYCR7T2JqZWN0VG9MaW5rc0NvbnZlcnRlci5uYW1lfSR7bmFtZXNwYWNlID8gYDoke25hbWVzcGFjZX1gIDogXCJcIn1gLFxyXG4gICAgICApO1xyXG4gICAgICByZXN1bHRMb2dnZXIuZW5hYmxlZCA9IHRydWU7XHJcbiAgICAgIHJlc3VsdExvZ2dlci5sb2cgPSAoLi4uY29udGVudDogQXJyYXk8YW55PikgPT4ge1xyXG4gICAgICAgIGxvZ3MucHVzaCguLi5jb250ZW50KTtcclxuICAgICAgfTtcclxuICAgICAgcmV0dXJuIHJlc3VsdExvZ2dlcjtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgYXN5bmMgYXBwbHlDb250YWluVHJlZUxpbmtzRG93blRvUGFyZW50VG9NaW5pbGlua3MoXHJcbiAgICAgIG9wdGlvbnM6IEFwcGx5Q29udGFpblRyZWVMaW5rc0Rvd25Ub1BhcmVudFRvTWluaWxpbmtzT3B0aW9ucyxcclxuICAgICkge1xyXG4gICAgICBjb25zdCBsb2cgPSBPYmplY3RUb0xpbmtzQ29udmVydGVyLmdldExvZ2dlcihcclxuICAgICAgICBPYmplY3RUb0xpbmtzQ29udmVydGVyLmFwcGx5Q29udGFpblRyZWVMaW5rc0Rvd25Ub1BhcmVudFRvTWluaWxpbmtzXHJcbiAgICAgICAgICAubmFtZSxcclxuICAgICAgKTtcclxuICAgICAgY29uc3QgbGlua3MgPSAoYXdhaXQgdGhpcy5nZXRDb250YWluVHJlZUxpbmtzRG93blRvUGFyZW50KHtcclxuICAgICAgICBsaW5rRXhwOiBvcHRpb25zLmxpbmtFeHAsXHJcbiAgICAgIH0pKSBhcyBEZWVwQ2xpZW50UmVzdWx0PExpbms8bnVtYmVyPltdPjtcclxuICAgICAgbG9nKHsgbGlua3MgfSk7XHJcbiAgICAgIGNvbnN0IG1pbmlsaW5rc0FwcGx5UmVzdWx0ID0gb3B0aW9ucy5taW5pbGlua3MuYXBwbHkobGlua3MuZGF0YSk7XHJcbiAgICAgIGxvZyh7IG1pbmlsaW5rc0FwcGx5UmVzdWx0IH0pO1xyXG4gICAgICByZXR1cm4gbWluaWxpbmtzQXBwbHlSZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGFzeW5jIGdldENvbnRhaW5UcmVlTGlua3NEb3duVG9QYXJlbnQoXHJcbiAgICAgIG9wdGlvbnM6IEdldENvbnRhaW5UcmVlTGlua3NEb3duVG9MaW5rT3B0aW9ucyxcclxuICAgICkge1xyXG4gICAgICBjb25zdCBsb2cgPSBPYmplY3RUb0xpbmtzQ29udmVydGVyLmdldExvZ2dlcihcclxuICAgICAgICBPYmplY3RUb0xpbmtzQ29udmVydGVyLmdldENvbnRhaW5UcmVlTGlua3NEb3duVG9QYXJlbnQubmFtZSxcclxuICAgICAgKTtcclxuICAgICAgY29uc3QgeyBsaW5rRXhwIH0gPSBvcHRpb25zO1xyXG4gICAgICBjb25zdCBxdWVyeTogQm9vbEV4cExpbmsgPSB7XHJcbiAgICAgICAgdXA6IHtcclxuICAgICAgICAgIHRyZWVfaWQ6IGF3YWl0IGRlZXAuaWQoXCJAZGVlcC1mb3VuZGF0aW9uL2NvcmVcIiwgXCJjb250YWluVHJlZVwiKSxcclxuICAgICAgICAgIHBhcmVudDogbGlua0V4cCxcclxuICAgICAgICB9LFxyXG4gICAgICB9O1xyXG4gICAgICBsb2coeyBxdWVyeSB9KTtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGVlcC5zZWxlY3QocXVlcnkpO1xyXG4gICAgICBsb2coeyByZXN1bHQgfSk7XHJcbiAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVbmRlZmluZWQgaXMgcmV0dXJuZWQgb2Ygcm9vdCBvYmplY3QgaXMgZW1wdHlcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGFzeW5jIGluaXQoXHJcbiAgICAgIG9wdGlvbnM6IE9iamVjdFRvTGlua3NDb252ZXJ0ZXJJbml0T3B0aW9ucyxcclxuICAgICk6IFByb21pc2U8T2JqZWN0VG9MaW5rc0NvbnZlcnRlcj4ge1xyXG4gICAgICBjb25zdCBsb2cgPSBPYmplY3RUb0xpbmtzQ29udmVydGVyLmdldExvZ2dlcihcclxuICAgICAgICBPYmplY3RUb0xpbmtzQ29udmVydGVyLmluaXQubmFtZSxcclxuICAgICAgKTtcclxuICAgICAgY29uc3QgeyBvYmogfSA9IG9wdGlvbnM7XHJcbiAgICAgIGNvbnN0IGNvbnRhaW5UcmVlTGlua3NEb3duVG9Db3JlQW5kVGhpc1BhY2thZ2VMaW5rQXBwbHlNaW5pbGlua3NSZXN1bHQgPVxyXG4gICAgICAgIGF3YWl0IHRoaXMuYXBwbHlDb250YWluVHJlZUxpbmtzRG93blRvUGFyZW50VG9NaW5pbGlua3Moe1xyXG4gICAgICAgICAgbGlua0V4cDoge1xyXG4gICAgICAgICAgICBfb3I6IE9iamVjdC52YWx1ZXMoXHJcbiAgICAgICAgICAgICAgT2JqZWN0VG9MaW5rc0NvbnZlcnRlci5yZXF1aXJlZFBhY2thZ2VzSW5NaW5pbGlua3MsXHJcbiAgICAgICAgICAgICkubWFwKChwYWNrYWdlTmFtZSkgPT4gKHtcclxuICAgICAgICAgICAgICBpZDoge1xyXG4gICAgICAgICAgICAgICAgX2lkOiBbcGFja2FnZU5hbWVdLFxyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0pKSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBtaW5pbGlua3M6IGRlZXAubWluaWxpbmtzLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICBsb2coeyBjb250YWluVHJlZUxpbmtzRG93blRvQ29yZUFuZFRoaXNQYWNrYWdlTGlua0FwcGx5TWluaWxpbmtzUmVzdWx0IH0pO1xyXG4gICAgICBjb25zdCByb290TGluazogTGluazxudW1iZXI+ID0gb3B0aW9ucy5yb290TGlua0lkXHJcbiAgICAgICAgPyBhd2FpdCBkZWVwLnNlbGVjdChvcHRpb25zLnJvb3RMaW5rSWQpLnRoZW4oKHJlc3VsdCkgPT4gcmVzdWx0LmRhdGFbMF0pXHJcbiAgICAgICAgOiBhd2FpdCBkZWVwXHJcbiAgICAgICAgICAgIC5pbnNlcnQoXHJcbiAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgLy8gVE9ETzogUmVwbGFjZSBpZCB3aXRoIGlkTG9jYWwgd2hlbiBpdCB3b3JrIHByb3Blcmx5XHJcbiAgICAgICAgICAgICAgICB0eXBlX2lkOiBhd2FpdCBkZWVwLmlkKGRlZXAubGlua0lkISwgXCJSb290XCIpLFxyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuaW5nOiBkZWVwLmxpbmtzU2VsZWN0UmV0dXJuaW5nLFxyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgLnRoZW4oKHJlc3VsdCkgPT4gcmVzdWx0LmRhdGFbMF0gYXMgTGluazxudW1iZXI+KTtcclxuICAgICAgbG9nKHsgcm9vdExpbmsgfSk7XHJcbiAgICAgIGNvbnN0IGNvbnRhaW5UcmVlTGlua3NEb3duVG9Sb290TGlua0FwcGx5TWluaWxpbmtzUmVzdWx0ID1cclxuICAgICAgICBhd2FpdCB0aGlzLmFwcGx5Q29udGFpblRyZWVMaW5rc0Rvd25Ub1BhcmVudFRvTWluaWxpbmtzKHtcclxuICAgICAgICAgIGxpbmtFeHA6IHtcclxuICAgICAgICAgICAgaWQ6IHJvb3RMaW5rLmlkLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIG1pbmlsaW5rczogZGVlcC5taW5pbGlua3MsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIGxvZyh7IGNvbnRhaW5UcmVlTGlua3NEb3duVG9Sb290TGlua0FwcGx5TWluaWxpbmtzUmVzdWx0IH0pO1xyXG4gICAgICBjb25zdCBsaW5rSWRzVG9SZXNlcnZlQ291bnQgPSB0aGlzLmdldExpbmtzVG9SZXNlcnZlQ291bnQoeyB2YWx1ZTogb2JqIH0pO1xyXG4gICAgICBsb2coeyBsaW5rSWRzVG9SZXNlcnZlQ291bnQgfSk7XHJcbiAgICAgIGNvbnN0IHJlc2VydmVkTGlua0lkcyA9IGF3YWl0IGRlZXAucmVzZXJ2ZShsaW5rSWRzVG9SZXNlcnZlQ291bnQpO1xyXG4gICAgICBsb2coeyByZXNlcnZlZExpbmtJZHMgfSk7XHJcbiAgICAgIGNvbnN0IHJlc3VsdExpbmsgPSBvcHRpb25zLnJlc3VsdExpbmtJZFxyXG4gICAgICAgID8gYXdhaXQgZGVlcFxyXG4gICAgICAgICAgICAuc2VsZWN0KG9wdGlvbnMucmVzdWx0TGlua0lkKVxyXG4gICAgICAgICAgICAudGhlbigocmVzdWx0KSA9PiByZXN1bHQuZGF0YVswXSlcclxuICAgICAgICA6IHJvb3RMaW5rO1xyXG4gICAgICBpZiAob3B0aW9ucy5yZXN1bHRMaW5rSWQgJiYgIXJlc3VsdExpbmspIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXHJcbiAgICAgICAgICBgUmVzdWx0IGxpbmsgd2l0aCBpZCAke29wdGlvbnMucmVzdWx0TGlua0lkfSBub3QgZm91bmRgLFxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgY29udmVydGVyID0gbmV3IHRoaXMoe1xyXG4gICAgICAgIHJlc2VydmVkTGlua0lkcyxcclxuICAgICAgICByb290TGluayxcclxuICAgICAgICBvYmosXHJcbiAgICAgICAgcmVzdWx0TGluayxcclxuICAgICAgfSk7XHJcbiAgICAgIGxvZyh7IGNvbnZlcnRlciB9KTtcclxuICAgICAgcmV0dXJuIGNvbnZlcnRlcjtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBjb252ZXJ0KCkge1xyXG4gICAgICBjb25zdCBsb2cgPSBPYmplY3RUb0xpbmtzQ29udmVydGVyLmdldExvZ2dlcihcImNvbnZlcnRcIik7XHJcblxyXG4gICAgICBjb25zdCBvcGVyYXRpb25zID0gYXdhaXQgdGhpcy5tYWtlVXBkYXRlT3BlcmF0aW9uc0Zvck9iamVjdFZhbHVlKHtcclxuICAgICAgICBsaW5rOiB0aGlzLnJlc3VsdExpbmssXHJcbiAgICAgICAgdmFsdWU6IHRoaXMub2JqLFxyXG4gICAgICB9KTtcclxuICAgICAgbG9nKHsgb3BlcmF0aW9ucyB9KTtcclxuXHJcbiAgICAgIGNvbnN0IGhhc1Jlc3VsdFR5cGVMaW5rSWQgPSBhd2FpdCBkZWVwLmlkKGRlZXAubGlua0lkISwgXCJIYXNSZXN1bHRcIik7XHJcbiAgICAgIGNvbnN0IHtcclxuICAgICAgICBkYXRhOiBbaGFzUmVzdWx0TGlua10sXHJcbiAgICAgIH0gPSBhd2FpdCBkZWVwLnNlbGVjdCh7XHJcbiAgICAgICAgdHlwZV9pZDogaGFzUmVzdWx0VHlwZUxpbmtJZCxcclxuICAgICAgICBmcm9tX2lkOiB0aGlzLnJvb3RMaW5rLmlkLFxyXG4gICAgICB9KTtcclxuICAgICAgaWYgKGhhc1Jlc3VsdExpbmspIHtcclxuICAgICAgICBvcGVyYXRpb25zLnB1c2goXHJcbiAgICAgICAgICBjcmVhdGVTZXJpYWxPcGVyYXRpb24oe1xyXG4gICAgICAgICAgICB0eXBlOiBcInVwZGF0ZVwiLFxyXG4gICAgICAgICAgICB0YWJsZTogXCJsaW5rc1wiLFxyXG4gICAgICAgICAgICBleHA6IHtcclxuICAgICAgICAgICAgICB0eXBlX2lkOiBoYXNSZXN1bHRUeXBlTGlua0lkLFxyXG4gICAgICAgICAgICAgIGZyb21faWQ6IHRoaXMucm9vdExpbmsuaWQsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHZhbHVlOiB7XHJcbiAgICAgICAgICAgICAgdG9faWQ6IHRoaXMucmVzdWx0TGluay5pZCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgIH0pLFxyXG4gICAgICAgICk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgb3BlcmF0aW9ucy5wdXNoKFxyXG4gICAgICAgICAgY3JlYXRlU2VyaWFsT3BlcmF0aW9uKHtcclxuICAgICAgICAgICAgdHlwZTogXCJpbnNlcnRcIixcclxuICAgICAgICAgICAgdGFibGU6IFwibGlua3NcIixcclxuICAgICAgICAgICAgb2JqZWN0czoge1xyXG4gICAgICAgICAgICAgIHR5cGVfaWQ6IGhhc1Jlc3VsdFR5cGVMaW5rSWQsXHJcbiAgICAgICAgICAgICAgZnJvbV9pZDogdGhpcy5yb290TGluay5pZCxcclxuICAgICAgICAgICAgICB0b19pZDogdGhpcy5yZXN1bHRMaW5rLmlkLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgfSksXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3Qgc2VyaWFsUmVzdWx0ID0gYXdhaXQgZGVlcC5zZXJpYWwoe1xyXG4gICAgICAgIG9wZXJhdGlvbnMsXHJcbiAgICAgIH0pO1xyXG4gICAgICBsb2coeyBzZXJpYWxSZXN1bHQgfSk7XHJcblxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHNlcmlhbFJlc3VsdCxcclxuICAgICAgICByb290TGlua0lkOiB0aGlzLnJvb3RMaW5rLmlkLFxyXG4gICAgICAgIHJlc3VsdExpbmtJZDogdGhpcy5yZXN1bHRMaW5rLmlkLFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXRMaW5rc1RvUmVzZXJ2ZUNvdW50KG9wdGlvbnM6IHtcclxuICAgICAgdmFsdWU6IHN0cmluZyB8IG51bWJlciB8IGJvb2xlYW4gfCBvYmplY3Q7XHJcbiAgICB9KTogbnVtYmVyIHtcclxuICAgICAgY29uc3QgeyB2YWx1ZSB9ID0gb3B0aW9ucztcclxuICAgICAgY29uc3QgbG9nID0gT2JqZWN0VG9MaW5rc0NvbnZlcnRlci5nZXRMb2dnZXIoXHJcbiAgICAgICAgT2JqZWN0VG9MaW5rc0NvbnZlcnRlci5nZXRMaW5rc1RvUmVzZXJ2ZUNvdW50Lm5hbWUsXHJcbiAgICAgICk7XHJcbiAgICAgIGxldCBjb3VudCA9IDA7XHJcbiAgICAgIGNvbnN0IHR5cGVPZlZhbHVlID0gdHlwZW9mIHZhbHVlO1xyXG4gICAgICBsb2coeyB0eXBlT2ZWYWx1ZSB9KTtcclxuICAgICAgY29uc3QgcmVzZXJ2ZWRMaW5rc0NvdW50Rm9yT25lTGluayA9XHJcbiAgICAgICAgMSArIC8vIFR5cGVcclxuICAgICAgICAxOyAvLyBDb250YWluIGZvciB0eXBlXHJcbiAgICAgIGlmICh0eXBlT2ZWYWx1ZSA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgIGNvdW50ID0gcmVzZXJ2ZWRMaW5rc0NvdW50Rm9yT25lTGluaztcclxuICAgICAgfSBlbHNlIGlmICh0eXBlT2ZWYWx1ZSA9PT0gXCJudW1iZXJcIikge1xyXG4gICAgICAgIGNvdW50ID0gcmVzZXJ2ZWRMaW5rc0NvdW50Rm9yT25lTGluaztcclxuICAgICAgfSBlbHNlIGlmICh0eXBlT2ZWYWx1ZSA9PT0gXCJib29sZWFuXCIpIHtcclxuICAgICAgICBjb3VudCA9IHJlc2VydmVkTGlua3NDb3VudEZvck9uZUxpbms7XHJcbiAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcclxuICAgICAgICBjb25zdCBhcnJheSA9IHZhbHVlIGFzIEFycmF5PGFueT47XHJcbiAgICAgICAgZm9yIChjb25zdCBhcnJheVZhbHVlIG9mIGFycmF5KSB7XHJcbiAgICAgICAgICBpZiAoIWFycmF5VmFsdWUpIHJldHVybiBjb3VudDtcclxuICAgICAgICAgIGNvdW50ICs9IHRoaXMuZ2V0TGlua3NUb1Jlc2VydmVDb3VudCh7IHZhbHVlOiBhcnJheVZhbHVlIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIGlmICh0eXBlT2ZWYWx1ZSA9PT0gXCJvYmplY3RcIikge1xyXG4gICAgICAgIGNvdW50ICs9IHJlc2VydmVkTGlua3NDb3VudEZvck9uZUxpbms7XHJcbiAgICAgICAgZm9yIChjb25zdCBbcHJvcGVydHlLZXksIHByb3BlcnR5VmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHZhbHVlKSkge1xyXG4gICAgICAgICAgaWYgKCF2YWx1ZSkgcmV0dXJuIGNvdW50O1xyXG4gICAgICAgICAgY291bnQgKz0gdGhpcy5nZXRMaW5rc1RvUmVzZXJ2ZUNvdW50KHsgdmFsdWU6IHByb3BlcnR5VmFsdWUgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGxvZyh7IGNvdW50IH0pO1xyXG4gICAgICByZXR1cm4gY291bnQ7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgbWFrZVVwZGF0ZU9wZXJhdGlvbnNGb3JCb29sZWFuVmFsdWUoXHJcbiAgICAgIG9wdGlvbnM6IE1ha2VVcGRhdGVPcGVyYXRpb25zRm9yQm9vbGVhblZhbHVlT3B0aW9ucyxcclxuICAgICkge1xyXG4gICAgICBjb25zdCBsb2cgPSBPYmplY3RUb0xpbmtzQ29udmVydGVyLmdldExvZ2dlcihcclxuICAgICAgICB0aGlzLm1ha2VVcGRhdGVPcGVyYXRpb25zRm9yQm9vbGVhblZhbHVlLm5hbWUsXHJcbiAgICAgICk7XHJcbiAgICAgIGxvZyh7IG9wdGlvbnMgfSk7XHJcbiAgICAgIGNvbnN0IHsgbGluaywgdmFsdWUgfSA9IG9wdGlvbnM7XHJcbiAgICAgIGNvbnN0IG9wZXJhdGlvbnM6IEFycmF5PFNlcmlhbE9wZXJhdGlvbj4gPSBbXTtcclxuICAgICAgb3BlcmF0aW9ucy5wdXNoKFxyXG4gICAgICAgIGNyZWF0ZVNlcmlhbE9wZXJhdGlvbih7XHJcbiAgICAgICAgICB0eXBlOiBcInVwZGF0ZVwiLFxyXG4gICAgICAgICAgdGFibGU6IFwibGlua3NcIixcclxuICAgICAgICAgIGV4cDoge1xyXG4gICAgICAgICAgICBpZDogbGluay5pZCxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICB2YWx1ZToge1xyXG4gICAgICAgICAgICB0b19pZDogYXdhaXQgZGVlcC5pZChcclxuICAgICAgICAgICAgICBPYmplY3RUb0xpbmtzQ29udmVydGVyLnJlcXVpcmVkUGFja2FnZU5hbWVzLmJvb2xlYW4sXHJcbiAgICAgICAgICAgICAgdmFsdWUudG9TdHJpbmcoKSxcclxuICAgICAgICAgICAgKSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSksXHJcbiAgICAgICk7XHJcbiAgICAgIGxvZyh7IG9wZXJhdGlvbnMgfSk7XHJcbiAgICAgIHJldHVybiBvcGVyYXRpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIG1ha2VVcGRhdGVPcGVyYXRpb25zRm9yU3RyaW5nVmFsdWUoXHJcbiAgICAgIG9wdGlvbnM6IE1ha2VVcGRhdGVPcGVyYXRpb25zRm9yU3RyaW5nVmFsdWVPcHRpb25zLFxyXG4gICAgKSB7XHJcbiAgICAgIGNvbnN0IGxvZyA9IE9iamVjdFRvTGlua3NDb252ZXJ0ZXIuZ2V0TG9nZ2VyKFxyXG4gICAgICAgIHRoaXMubWFrZVVwZGF0ZU9wZXJhdGlvbnNGb3JTdHJpbmdWYWx1ZS5uYW1lLFxyXG4gICAgICApO1xyXG4gICAgICBsb2coeyBvcHRpb25zIH0pO1xyXG4gICAgICBjb25zdCB7IGxpbmssIHZhbHVlIH0gPSBvcHRpb25zO1xyXG4gICAgICBjb25zdCBvcGVyYXRpb25zOiBBcnJheTxTZXJpYWxPcGVyYXRpb24+ID0gW107XHJcbiAgICAgIG9wZXJhdGlvbnMucHVzaChcclxuICAgICAgICBjcmVhdGVTZXJpYWxPcGVyYXRpb24oe1xyXG4gICAgICAgICAgdHlwZTogXCJ1cGRhdGVcIixcclxuICAgICAgICAgIHRhYmxlOiBgc3RyaW5nc2AgYXMgVGFibGU8XCJ1cGRhdGVcIj4sXHJcbiAgICAgICAgICBleHA6IHtcclxuICAgICAgICAgICAgbGlua19pZDogbGluay5pZCxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICB2YWx1ZToge1xyXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0pLFxyXG4gICAgICApO1xyXG4gICAgICBsb2coeyBvcGVyYXRpb25zIH0pO1xyXG4gICAgICByZXR1cm4gb3BlcmF0aW9ucztcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBtYWtlVXBkYXRlT3BlcmF0aW9uc0Zvck51bWJlclZhbHVlKFxyXG4gICAgICBvcHRpb25zOiBNYWtlVXBkYXRlT3BlcmF0aW9uc0Zvck51bWJlclZhbHVlT3B0aW9ucyxcclxuICAgICkge1xyXG4gICAgICBjb25zdCBsb2cgPSBPYmplY3RUb0xpbmtzQ29udmVydGVyLmdldExvZ2dlcihcclxuICAgICAgICB0aGlzLm1ha2VVcGRhdGVPcGVyYXRpb25zRm9yTnVtYmVyVmFsdWUubmFtZSxcclxuICAgICAgKTtcclxuICAgICAgbG9nKHsgb3B0aW9ucyB9KTtcclxuICAgICAgY29uc3QgeyBsaW5rLCB2YWx1ZSB9ID0gb3B0aW9ucztcclxuICAgICAgY29uc3Qgb3BlcmF0aW9uczogQXJyYXk8U2VyaWFsT3BlcmF0aW9uPiA9IFtdO1xyXG4gICAgICBvcGVyYXRpb25zLnB1c2goXHJcbiAgICAgICAgY3JlYXRlU2VyaWFsT3BlcmF0aW9uKHtcclxuICAgICAgICAgIHR5cGU6IFwidXBkYXRlXCIsXHJcbiAgICAgICAgICB0YWJsZTogYG51bWJlcnNgIGFzIFRhYmxlPFwidXBkYXRlXCI+LFxyXG4gICAgICAgICAgZXhwOiB7XHJcbiAgICAgICAgICAgIGxpbmtfaWQ6IGxpbmsuaWQsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgdmFsdWU6IHtcclxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9KSxcclxuICAgICAgKTtcclxuICAgICAgbG9nKHsgb3BlcmF0aW9ucyB9KTtcclxuICAgICAgcmV0dXJuIG9wZXJhdGlvbnM7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgbWFrZVVwZGF0ZU9wZXJhdGlvbnNGb3JBcnJheVZhbHVlPFRWYWx1ZSBleHRlbmRzIEFsbG93ZWRBcnJheT4oXHJcbiAgICAgIG9wdGlvbnM6IE1ha2VVcGRhdGVPcGVyYXRpb25zRm9yQW55VmFsdWVPcHRpb25zPFRWYWx1ZT4sXHJcbiAgICApIHtcclxuICAgICAgY29uc3QgbG9nID0gT2JqZWN0VG9MaW5rc0NvbnZlcnRlci5nZXRMb2dnZXIoXHJcbiAgICAgICAgdGhpcy5tYWtlVXBkYXRlT3BlcmF0aW9uc0ZvckFueVZhbHVlLm5hbWUsXHJcbiAgICAgICk7XHJcbiAgICAgIGNvbnN0IHsgbGluaywgdmFsdWUgfSA9IG9wdGlvbnM7XHJcbiAgICAgIGNvbnN0IG9wZXJhdGlvbnM6IEFycmF5PFNlcmlhbE9wZXJhdGlvbj4gPSBbXTtcclxuXHJcbiAgICAgIGF3YWl0IGRlZXAuZGVsZXRlKHtcclxuICAgICAgICB1cDoge1xyXG4gICAgICAgICAgdHJlZV9pZDogYXdhaXQgZGVlcC5pZChcclxuICAgICAgICAgICAgT2JqZWN0VG9MaW5rc0NvbnZlcnRlci5yZXF1aXJlZFBhY2thZ2VzSW5NaW5pbGlua3MuY29yZSxcclxuICAgICAgICAgICAgXCJDb250YWluVHJlZVwiLFxyXG4gICAgICAgICAgKSxcclxuICAgICAgICAgIHBhcmVudF9pZDogbGluay5pZCxcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsdWUubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb25zdCBlbGVtZW50ID0gdmFsdWVbaV07XHJcbiAgICAgICAgb3BlcmF0aW9ucy5wdXNoKFxyXG4gICAgICAgICAgLi4uKGF3YWl0IHRoaXMubWFrZUluc2VydE9wZXJhdGlvbnNGb3JBbnlWYWx1ZSh7XHJcbiAgICAgICAgICAgIHZhbHVlOiBlbGVtZW50LFxyXG4gICAgICAgICAgICBsaW5rSWQ6IHRoaXMucmVzZXJ2ZWRMaW5rSWRzLnBvcCgpISxcclxuICAgICAgICAgICAgbmFtZTogaS50b1N0cmluZygwKSxcclxuICAgICAgICAgICAgcGFyZW50TGlua0lkOiBsaW5rLmlkLFxyXG4gICAgICAgICAgfSkpLFxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBvcGVyYXRpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIG1ha2VVcGRhdGVPcGVyYXRpb25zRm9yQW55VmFsdWU8VFZhbHVlIGV4dGVuZHMgQWxsb3dlZFZhbHVlPihcclxuICAgICAgb3B0aW9uczogTWFrZVVwZGF0ZU9wZXJhdGlvbnNGb3JBbnlWYWx1ZU9wdGlvbnM8VFZhbHVlPixcclxuICAgICkge1xyXG4gICAgICBjb25zdCBsb2cgPSBPYmplY3RUb0xpbmtzQ29udmVydGVyLmdldExvZ2dlcihcclxuICAgICAgICB0aGlzLm1ha2VVcGRhdGVPcGVyYXRpb25zRm9yQW55VmFsdWUubmFtZSxcclxuICAgICAgKTtcclxuICAgICAgY29uc3QgeyBsaW5rLCB2YWx1ZSB9ID0gb3B0aW9ucztcclxuICAgICAgY29uc3Qgb3BlcmF0aW9uczogQXJyYXk8U2VyaWFsT3BlcmF0aW9uPiA9IFtdO1xyXG4gICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcImJvb2xlYW5cIikge1xyXG4gICAgICAgIG9wZXJhdGlvbnMucHVzaChcclxuICAgICAgICAgIC4uLihhd2FpdCB0aGlzLm1ha2VVcGRhdGVPcGVyYXRpb25zRm9yQm9vbGVhblZhbHVlKHtcclxuICAgICAgICAgICAgLi4ub3B0aW9ucyxcclxuICAgICAgICAgICAgdmFsdWUsXHJcbiAgICAgICAgICB9KSksXHJcbiAgICAgICAgKTtcclxuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICBvcGVyYXRpb25zLnB1c2goXHJcbiAgICAgICAgICAuLi4oYXdhaXQgdGhpcy5tYWtlVXBkYXRlT3BlcmF0aW9uc0ZvclN0cmluZ1ZhbHVlKHtcclxuICAgICAgICAgICAgLi4ub3B0aW9ucyxcclxuICAgICAgICAgICAgdmFsdWUsXHJcbiAgICAgICAgICB9KSksXHJcbiAgICAgICAgKTtcclxuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09IFwibnVtYmVyXCIpIHtcclxuICAgICAgICBvcGVyYXRpb25zLnB1c2goXHJcbiAgICAgICAgICAuLi4oYXdhaXQgdGhpcy5tYWtlVXBkYXRlT3BlcmF0aW9uc0Zvck51bWJlclZhbHVlKHtcclxuICAgICAgICAgICAgLi4ub3B0aW9ucyxcclxuICAgICAgICAgICAgdmFsdWUsXHJcbiAgICAgICAgICB9KSksXHJcbiAgICAgICAgKTtcclxuICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xyXG4gICAgICAgIG9wZXJhdGlvbnMucHVzaChcclxuICAgICAgICAgIC4uLihhd2FpdCB0aGlzLm1ha2VVcGRhdGVPcGVyYXRpb25zRm9yQXJyYXlWYWx1ZSh7XHJcbiAgICAgICAgICAgIC4uLm9wdGlvbnMsXHJcbiAgICAgICAgICAgIHZhbHVlLFxyXG4gICAgICAgICAgfSkpLFxyXG4gICAgICAgICk7XHJcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiKSB7XHJcbiAgICAgICAgb3BlcmF0aW9ucy5wdXNoKFxyXG4gICAgICAgICAgLi4uKGF3YWl0IHRoaXMubWFrZVVwZGF0ZU9wZXJhdGlvbnNGb3JPYmplY3RWYWx1ZSh7XHJcbiAgICAgICAgICAgIC4uLm9wdGlvbnMsXHJcbiAgICAgICAgICAgIHZhbHVlLFxyXG4gICAgICAgICAgfSkpLFxyXG4gICAgICAgICk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUeXBlIG9mIHZhbHVlICR7dHlwZW9mIHZhbHVlfSBpcyBub3Qgc3VwcG9ydGVkYCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBvcGVyYXRpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIG1ha2VVcGRhdGVPcGVyYXRpb25zRm9yT2JqZWN0VmFsdWUoXHJcbiAgICAgIG9wdGlvbnM6IE1ha2VVcGRhdGVPcGVyYXRpb25zRm9yT2JqZWN0VmFsdWVPcHRpb25zLFxyXG4gICAgKSB7XHJcbiAgICAgIGNvbnN0IGxvZyA9IE9iamVjdFRvTGlua3NDb252ZXJ0ZXIuZ2V0TG9nZ2VyKFxyXG4gICAgICAgIHRoaXMubWFrZVVwZGF0ZU9wZXJhdGlvbnNGb3JPYmplY3RWYWx1ZS5uYW1lLFxyXG4gICAgICApO1xyXG4gICAgICBjb25zdCB7IGxpbmssIHZhbHVlIH0gPSBvcHRpb25zO1xyXG4gICAgICBsb2coeyBvcHRpb25zIH0pO1xyXG4gICAgICBjb25zdCBvcGVyYXRpb25zOiBBcnJheTxTZXJpYWxPcGVyYXRpb24+ID0gW107XHJcblxyXG4gICAgICBmb3IgKGNvbnN0IFtwcm9wZXJ0eUtleSwgcHJvcGVydHlWYWx1ZV0gb2YgT2JqZWN0LmVudHJpZXModmFsdWUpKSB7XHJcbiAgICAgICAgbG9nKHsgcHJvcGVydHlLZXksIHByb3BlcnR5VmFsdWUgfSk7XHJcbiAgICAgICAgY29uc3QgW3Byb3BlcnR5TGlua10gPSBkZWVwLm1pbmlsaW5rcy5xdWVyeSh7XHJcbiAgICAgICAgICBpZDoge1xyXG4gICAgICAgICAgICBfaWQ6IFtsaW5rLmlkLCBwcm9wZXJ0eUtleV0sXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGxvZyh7IHByb3BlcnR5TGluayB9KTtcclxuICAgICAgICBpZiAocHJvcGVydHlMaW5rKSB7XHJcbiAgICAgICAgICBsZXQgcHJvcGVydHlVcGRhdGVPcGVyYXRpb25zOiBBcnJheTxTZXJpYWxPcGVyYXRpb24+ID0gW107XHJcbiAgICAgICAgICBwcm9wZXJ0eVVwZGF0ZU9wZXJhdGlvbnMgPSBhd2FpdCB0aGlzLm1ha2VVcGRhdGVPcGVyYXRpb25zRm9yQW55VmFsdWUoXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBsaW5rOiBwcm9wZXJ0eUxpbmssXHJcbiAgICAgICAgICAgICAgdmFsdWU6IHByb3BlcnR5VmFsdWUsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgICAgbG9nKHsgcHJvcGVydHlVcGRhdGVPcGVyYXRpb25zIH0pO1xyXG4gICAgICAgICAgb3BlcmF0aW9ucy5wdXNoKC4uLnByb3BlcnR5VXBkYXRlT3BlcmF0aW9ucyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgdHlwZW9mIHByb3BlcnR5VmFsdWUgIT09IFwic3RyaW5nXCIgJiZcclxuICAgICAgICAgICAgdHlwZW9mIHByb3BlcnR5VmFsdWUgIT09IFwibnVtYmVyXCIgJiZcclxuICAgICAgICAgICAgdHlwZW9mIHByb3BlcnR5VmFsdWUgIT09IFwiYm9vbGVhblwiICYmXHJcbiAgICAgICAgICAgICFBcnJheS5pc0FycmF5KHByb3BlcnR5VmFsdWUpICYmXHJcbiAgICAgICAgICAgIHR5cGVvZiBwcm9wZXJ0eVZhbHVlICE9PSBcIm9iamVjdFwiXHJcbiAgICAgICAgICApIHtcclxuICAgICAgICAgICAgbG9nKFxyXG4gICAgICAgICAgICAgIGBTa2lwcGluZyBwcm9wZXJ0eSAke3Byb3BlcnR5S2V5fSBiZWNhdXNlIGl0cyB0eXBlICR7dHlwZW9mIHZhbHVlfSBpcyBub3Qgc3VwcG9ydGVkYCxcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgbG9nKFwiVEVNUE9SQVJZISBSRU1PVkUgVEhJUyFcIik7XHJcbiAgICAgICAgICBsb2coYG1pbmlsaW5rcy5saW5rc2AsIGRlZXAubWluaWxpbmtzLmxpbmtzKTtcclxuICAgICAgICAgIGxvZyhcclxuICAgICAgICAgICAgYHBhY2thZ2UgbGlua2AsXHJcbiAgICAgICAgICAgIGRlZXAubWluaWxpbmtzLnF1ZXJ5KHtcclxuICAgICAgICAgICAgICBpZDogZGVlcC5saW5rSWQhLFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgICBsb2coXHJcbiAgICAgICAgICAgIGBjb250YWluIHRvIHN0cmluZ2AsXHJcbiAgICAgICAgICAgIGRlZXAubWluaWxpbmtzLnF1ZXJ5KHtcclxuICAgICAgICAgICAgICAvLyBUT0RPOiBSZXBsYWNlIGlkIHdpdGggaWRMb2NhbCB3aGVuIGl0IHdvcmsgcHJvcGVybHlcclxuICAgICAgICAgICAgICB0eXBlX2lkOiBhd2FpdCBkZWVwLmlkKFwiQGRlZXAtZm91bmRhdGlvbi9jb3JlXCIsIFwiQ29udGFpblwiKSxcclxuICAgICAgICAgICAgICBzdHJpbmc6IHtcclxuICAgICAgICAgICAgICAgIHZhbHVlOiBcIlN0cmluZ1wiLFxyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgZnJvbV9pZDogZGVlcC5saW5rSWQhLFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgICBsb2coXHJcbiAgICAgICAgICAgIGBjb250YWluIHRvIHN0cmluZ2AsXHJcbiAgICAgICAgICAgIGRlZXAubWluaWxpbmtzLnF1ZXJ5KHtcclxuICAgICAgICAgICAgICBpZDoge1xyXG4gICAgICAgICAgICAgICAgX2lkOiBbZGVlcC5saW5rSWQhLCBcIlN0cmluZ1wiXSxcclxuICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgY29uc3QgcHJvcGVydHlMaW5rSWQgPSB0aGlzLnJlc2VydmVkTGlua0lkcy5wb3AoKTtcclxuICAgICAgICAgIGxvZyh7IHByb3BlcnR5TGlua0lkIH0pO1xyXG4gICAgICAgICAgaWYgKCFwcm9wZXJ0eUxpbmtJZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE5vdCBlbm91Z2ggcmVzZXJ2ZWQgbGluayBpZHNgKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGNvbnN0IHByb3BlcnR5SW5zZXJ0T3BlcmF0aW9ucyA9XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMubWFrZUluc2VydE9wZXJhdGlvbnNGb3JBbnlWYWx1ZSh7XHJcbiAgICAgICAgICAgICAgbGlua0lkOiBwcm9wZXJ0eUxpbmtJZCxcclxuICAgICAgICAgICAgICBwYXJlbnRMaW5rSWQ6IGxpbmsuaWQsXHJcbiAgICAgICAgICAgICAgdmFsdWU6IHByb3BlcnR5VmFsdWUsXHJcbiAgICAgICAgICAgICAgbmFtZTogcHJvcGVydHlLZXksXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgbG9nKHsgcHJvcGVydHlJbnNlcnRPcGVyYXRpb25zIH0pO1xyXG4gICAgICAgICAgb3BlcmF0aW9ucy5wdXNoKC4uLnByb3BlcnR5SW5zZXJ0T3BlcmF0aW9ucyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsb2coeyBvcGVyYXRpb25zIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gb3BlcmF0aW9ucztcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBtYWtlSW5zZXJ0T3BlcmF0aW9uc0ZvckJvb2xlYW5WYWx1ZShcclxuICAgICAgb3B0aW9uczogTWFrZUluc2VydE9wZXJhdGlvbnNGb3JCb29sZWFuT3B0aW9ucyxcclxuICAgICkge1xyXG4gICAgICBjb25zdCBvcGVyYXRpb25zOiBBcnJheTxTZXJpYWxPcGVyYXRpb24+ID0gW107XHJcbiAgICAgIGNvbnN0IHsgdmFsdWUsIHBhcmVudExpbmtJZCwgbGlua0lkLCBuYW1lIH0gPSBvcHRpb25zO1xyXG4gICAgICBjb25zdCBsb2cgPSBPYmplY3RUb0xpbmtzQ29udmVydGVyLmdldExvZ2dlcihcclxuICAgICAgICB0aGlzLm1ha2VJbnNlcnRPcGVyYXRpb25zRm9yQm9vbGVhblZhbHVlLm5hbWUsXHJcbiAgICAgICk7XHJcblxyXG4gICAgICBjb25zdCBsaW5rSW5zZXJ0U2VyaWFsT3BlcmF0aW9uID0gY3JlYXRlU2VyaWFsT3BlcmF0aW9uKHtcclxuICAgICAgICB0eXBlOiBcImluc2VydFwiLFxyXG4gICAgICAgIHRhYmxlOiBcImxpbmtzXCIsXHJcbiAgICAgICAgb2JqZWN0czoge1xyXG4gICAgICAgICAgaWQ6IGxpbmtJZCxcclxuICAgICAgICAgIHR5cGVfaWQ6IGF3YWl0IGRlZXAuaWQoZGVlcC5saW5rSWQhLCBwYXNjYWxDYXNlKHR5cGVvZiB2YWx1ZSkpLFxyXG4gICAgICAgICAgZnJvbV9pZDogcGFyZW50TGlua0lkLFxyXG4gICAgICAgICAgdG9faWQ6IGF3YWl0IGRlZXAuaWQoXHJcbiAgICAgICAgICAgIE9iamVjdFRvTGlua3NDb252ZXJ0ZXIucmVxdWlyZWRQYWNrYWdlTmFtZXMuYm9vbGVhbixcclxuICAgICAgICAgICAgdmFsdWUudG9TdHJpbmcoKSxcclxuICAgICAgICAgICksXHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcbiAgICAgIGxvZyh7IGxpbmtJbnNlcnRTZXJpYWxPcGVyYXRpb24gfSk7XHJcbiAgICAgIG9wZXJhdGlvbnMucHVzaChsaW5rSW5zZXJ0U2VyaWFsT3BlcmF0aW9uKTtcclxuXHJcbiAgICAgIGNvbnN0IGNvbnRhaW5JbnNlcnRTZXJpYWxPcGVyYXRpb24gPSBjcmVhdGVTZXJpYWxPcGVyYXRpb24oe1xyXG4gICAgICAgIHR5cGU6IFwiaW5zZXJ0XCIsXHJcbiAgICAgICAgdGFibGU6IFwibGlua3NcIixcclxuICAgICAgICBvYmplY3RzOiB7XHJcbiAgICAgICAgICAvLyBUT0RPOiBSZXBsYWNlIGlkIHdpdGggaWRMb2NhbCB3aGVuIGl0IHdvcmsgcHJvcGVybHlcclxuICAgICAgICAgIHR5cGVfaWQ6IGF3YWl0IGRlZXAuaWQoXCJAZGVlcC1mb3VuZGF0aW9uL2NvcmVcIiwgXCJDb250YWluXCIpLFxyXG4gICAgICAgICAgZnJvbV9pZDogcGFyZW50TGlua0lkLFxyXG4gICAgICAgICAgdG9faWQ6IGxpbmtJZCxcclxuICAgICAgICAgIHN0cmluZzoge1xyXG4gICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgdmFsdWU6IG5hbWUsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgICBsb2coeyBjb250YWluSW5zZXJ0U2VyaWFsT3BlcmF0aW9uIH0pO1xyXG4gICAgICBvcGVyYXRpb25zLnB1c2goY29udGFpbkluc2VydFNlcmlhbE9wZXJhdGlvbik7XHJcblxyXG4gICAgICBsb2coeyBvcGVyYXRpb25zIH0pO1xyXG4gICAgICByZXR1cm4gb3BlcmF0aW9ucztcclxuICAgIH1cclxuICAgIGFzeW5jIG1ha2VJbnNlcnRPcGVyYXRpb25zRm9yU3RyaW5nVmFsdWUoXHJcbiAgICAgIG9wdGlvbnM6IE1ha2VJbnNlcnRPcGVyYXRpb25zRm9yU3RyaW5nT3B0aW9ucyxcclxuICAgICkge1xyXG4gICAgICBjb25zdCBvcGVyYXRpb25zOiBBcnJheTxTZXJpYWxPcGVyYXRpb24+ID0gW107XHJcbiAgICAgIGNvbnN0IHsgdmFsdWUsIHBhcmVudExpbmtJZCwgbGlua0lkLCBuYW1lIH0gPSBvcHRpb25zO1xyXG4gICAgICBjb25zdCBsb2cgPSBPYmplY3RUb0xpbmtzQ29udmVydGVyLmdldExvZ2dlcihcclxuICAgICAgICBcIm1ha2VJbnNlcnRPcGVyYXRpb25zRm9yU3RyaW5nVmFsdWVcIixcclxuICAgICAgKTtcclxuICAgICAgY29uc3QgbGlua0luc2VydFNlcmlhbE9wZXJhdGlvbiA9IGNyZWF0ZVNlcmlhbE9wZXJhdGlvbih7XHJcbiAgICAgICAgdHlwZTogXCJpbnNlcnRcIixcclxuICAgICAgICB0YWJsZTogXCJsaW5rc1wiLFxyXG4gICAgICAgIG9iamVjdHM6IHtcclxuICAgICAgICAgIGlkOiBsaW5rSWQsXHJcbiAgICAgICAgICBmcm9tX2lkOiBwYXJlbnRMaW5rSWQsXHJcbiAgICAgICAgICB0b19pZDogcGFyZW50TGlua0lkLFxyXG4gICAgICAgICAgdHlwZV9pZDogYXdhaXQgZGVlcC5pZChkZWVwLmxpbmtJZCEsIHBhc2NhbENhc2UodHlwZW9mIHZhbHVlKSksXHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcbiAgICAgIGxvZyh7IGxpbmtJbnNlcnRTZXJpYWxPcGVyYXRpb24gfSk7XHJcbiAgICAgIG9wZXJhdGlvbnMucHVzaChsaW5rSW5zZXJ0U2VyaWFsT3BlcmF0aW9uKTtcclxuXHJcbiAgICAgIGNvbnN0IHN0cmluZ1ZhbHVlSW5zZXJ0U2VyaWFsT3BlcmF0aW9uID0gY3JlYXRlU2VyaWFsT3BlcmF0aW9uKHtcclxuICAgICAgICB0eXBlOiBcImluc2VydFwiLFxyXG4gICAgICAgIHRhYmxlOiBgJHt0eXBlb2YgdmFsdWV9c2AgYXMgVGFibGU8XCJpbnNlcnRcIj4sXHJcbiAgICAgICAgb2JqZWN0czoge1xyXG4gICAgICAgICAgbGlua19pZDogbGlua0lkLFxyXG4gICAgICAgICAgdmFsdWU6IHZhbHVlLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgICBsb2coeyBzdHJpbmdWYWx1ZUluc2VydFNlcmlhbE9wZXJhdGlvbiB9KTtcclxuICAgICAgb3BlcmF0aW9ucy5wdXNoKHN0cmluZ1ZhbHVlSW5zZXJ0U2VyaWFsT3BlcmF0aW9uKTtcclxuXHJcbiAgICAgIGNvbnN0IGNvbnRhaW5JbnNlcnRTZXJpYWxPcGVyYXRpb24gPSBjcmVhdGVTZXJpYWxPcGVyYXRpb24oe1xyXG4gICAgICAgIHR5cGU6IFwiaW5zZXJ0XCIsXHJcbiAgICAgICAgdGFibGU6IFwibGlua3NcIixcclxuICAgICAgICBvYmplY3RzOiB7XHJcbiAgICAgICAgICAvLyBUT0RPOiBSZXBsYWNlIGlkIHdpdGggaWRMb2NhbCB3aGVuIGl0IHdvcmsgcHJvcGVybHlcclxuICAgICAgICAgIHR5cGVfaWQ6IGF3YWl0IGRlZXAuaWQoXCJAZGVlcC1mb3VuZGF0aW9uL2NvcmVcIiwgXCJDb250YWluXCIpLFxyXG4gICAgICAgICAgZnJvbV9pZDogcGFyZW50TGlua0lkLFxyXG4gICAgICAgICAgdG9faWQ6IGxpbmtJZCxcclxuICAgICAgICAgIHN0cmluZzoge1xyXG4gICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgdmFsdWU6IG5hbWUsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgICBsb2coeyBjb250YWluSW5zZXJ0U2VyaWFsT3BlcmF0aW9uIH0pO1xyXG4gICAgICBvcGVyYXRpb25zLnB1c2goY29udGFpbkluc2VydFNlcmlhbE9wZXJhdGlvbik7XHJcblxyXG4gICAgICBsb2coeyBvcGVyYXRpb25zIH0pO1xyXG4gICAgICByZXR1cm4gb3BlcmF0aW9ucztcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBtYWtlSW5zZXJ0T3BlcmF0aW9uc0Zvck51bWJlclZhbHVlKFxyXG4gICAgICBvcHRpb25zOiBNYWtlSW5zZXJ0T3BlcmF0aW9uc0Zvck51bWJlck9wdGlvbnMsXHJcbiAgICApIHtcclxuICAgICAgY29uc3Qgb3BlcmF0aW9uczogQXJyYXk8U2VyaWFsT3BlcmF0aW9uPiA9IFtdO1xyXG4gICAgICBjb25zdCB7IHZhbHVlLCBwYXJlbnRMaW5rSWQsIGxpbmtJZCwgbmFtZSB9ID0gb3B0aW9ucztcclxuICAgICAgY29uc3QgbG9nID0gT2JqZWN0VG9MaW5rc0NvbnZlcnRlci5nZXRMb2dnZXIoXHJcbiAgICAgICAgXCJtYWtlSW5zZXJ0T3BlcmF0aW9uc0ZvclN0cmluZ1ZhbHVlXCIsXHJcbiAgICAgICk7XHJcbiAgICAgIGNvbnN0IGxpbmtJbnNlcnRTZXJpYWxPcGVyYXRpb24gPSBjcmVhdGVTZXJpYWxPcGVyYXRpb24oe1xyXG4gICAgICAgIHR5cGU6IFwiaW5zZXJ0XCIsXHJcbiAgICAgICAgdGFibGU6IFwibGlua3NcIixcclxuICAgICAgICBvYmplY3RzOiB7XHJcbiAgICAgICAgICBpZDogbGlua0lkLFxyXG4gICAgICAgICAgZnJvbV9pZDogcGFyZW50TGlua0lkLFxyXG4gICAgICAgICAgdG9faWQ6IHBhcmVudExpbmtJZCxcclxuICAgICAgICAgIHR5cGVfaWQ6IGF3YWl0IGRlZXAuaWQoZGVlcC5saW5rSWQhLCBwYXNjYWxDYXNlKHR5cGVvZiB2YWx1ZSkpLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgICBsb2coeyBsaW5rSW5zZXJ0U2VyaWFsT3BlcmF0aW9uIH0pO1xyXG4gICAgICBvcGVyYXRpb25zLnB1c2gobGlua0luc2VydFNlcmlhbE9wZXJhdGlvbik7XHJcblxyXG4gICAgICBjb25zdCBzdHJpbmdWYWx1ZUluc2VydFNlcmlhbE9wZXJhdGlvbiA9IGNyZWF0ZVNlcmlhbE9wZXJhdGlvbih7XHJcbiAgICAgICAgdHlwZTogXCJpbnNlcnRcIixcclxuICAgICAgICB0YWJsZTogYCR7dHlwZW9mIHZhbHVlfXNgIGFzIFRhYmxlPFwiaW5zZXJ0XCI+LFxyXG4gICAgICAgIG9iamVjdHM6IHtcclxuICAgICAgICAgIGxpbmtfaWQ6IGxpbmtJZCxcclxuICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuICAgICAgbG9nKHsgc3RyaW5nVmFsdWVJbnNlcnRTZXJpYWxPcGVyYXRpb24gfSk7XHJcbiAgICAgIG9wZXJhdGlvbnMucHVzaChzdHJpbmdWYWx1ZUluc2VydFNlcmlhbE9wZXJhdGlvbik7XHJcblxyXG4gICAgICBjb25zdCBjb250YWluSW5zZXJ0U2VyaWFsT3BlcmF0aW9uID0gY3JlYXRlU2VyaWFsT3BlcmF0aW9uKHtcclxuICAgICAgICB0eXBlOiBcImluc2VydFwiLFxyXG4gICAgICAgIHRhYmxlOiBcImxpbmtzXCIsXHJcbiAgICAgICAgb2JqZWN0czoge1xyXG4gICAgICAgICAgLy8gVE9ETzogUmVwbGFjZSBpZCB3aXRoIGlkTG9jYWwgd2hlbiBpdCB3b3JrIHByb3Blcmx5XHJcbiAgICAgICAgICB0eXBlX2lkOiBhd2FpdCBkZWVwLmlkKFwiQGRlZXAtZm91bmRhdGlvbi9jb3JlXCIsIFwiQ29udGFpblwiKSxcclxuICAgICAgICAgIGZyb21faWQ6IHBhcmVudExpbmtJZCxcclxuICAgICAgICAgIHRvX2lkOiBsaW5rSWQsXHJcbiAgICAgICAgICBzdHJpbmc6IHtcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgIHZhbHVlOiBuYW1lLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuICAgICAgbG9nKHsgY29udGFpbkluc2VydFNlcmlhbE9wZXJhdGlvbiB9KTtcclxuICAgICAgb3BlcmF0aW9ucy5wdXNoKGNvbnRhaW5JbnNlcnRTZXJpYWxPcGVyYXRpb24pO1xyXG5cclxuICAgICAgbG9nKHsgb3BlcmF0aW9ucyB9KTtcclxuICAgICAgcmV0dXJuIG9wZXJhdGlvbnM7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgbWFrZUluc2VydE9wZXJhdGlvbnNGb3JBcnJheVZhbHVlKFxyXG4gICAgICBvcHRpb25zOiBNYWtlSW5zZXJ0T3BlcmF0aW9uc0ZvckFycmF5VmFsdWVPcHRpb25zLFxyXG4gICAgKSB7XHJcbiAgICAgIGNvbnN0IG9wZXJhdGlvbnM6IEFycmF5PFNlcmlhbE9wZXJhdGlvbj4gPSBbXTtcclxuICAgICAgY29uc3QgeyB2YWx1ZSwgbGlua0lkLCBuYW1lLCBwYXJlbnRMaW5rSWQgfSA9IG9wdGlvbnM7XHJcbiAgICAgIGNvbnN0IGxvZyA9IE9iamVjdFRvTGlua3NDb252ZXJ0ZXIuZ2V0TG9nZ2VyKFxyXG4gICAgICAgIFwibWFrZUluc2VydE9wZXJhdGlvbnNGb3JTdHJpbmdWYWx1ZVwiLFxyXG4gICAgICApO1xyXG5cclxuICAgICAgY29uc3QgbGlua0luc2VydFNlcmlhbE9wZXJhdGlvbiA9IGNyZWF0ZVNlcmlhbE9wZXJhdGlvbih7XHJcbiAgICAgICAgdHlwZTogXCJpbnNlcnRcIixcclxuICAgICAgICB0YWJsZTogXCJsaW5rc1wiLFxyXG4gICAgICAgIG9iamVjdHM6IHtcclxuICAgICAgICAgIGlkOiBsaW5rSWQsXHJcbiAgICAgICAgICB0eXBlX2lkOiBhd2FpdCBkZWVwLmlkKGRlZXAubGlua0lkISwgcGFzY2FsQ2FzZSh0eXBlb2YgdmFsdWUpKSxcclxuICAgICAgICAgIGZyb21faWQ6IHBhcmVudExpbmtJZCxcclxuICAgICAgICAgIHRvX2lkOiBwYXJlbnRMaW5rSWQsXHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcbiAgICAgIGxvZyh7IGxpbmtJbnNlcnRTZXJpYWxPcGVyYXRpb24gfSk7XHJcbiAgICAgIG9wZXJhdGlvbnMucHVzaChsaW5rSW5zZXJ0U2VyaWFsT3BlcmF0aW9uKTtcclxuXHJcbiAgICAgIGNvbnN0IGNvbnRhaW5JbnNlcnRTZXJpYWxPcGVyYXRpb24gPSBjcmVhdGVTZXJpYWxPcGVyYXRpb24oe1xyXG4gICAgICAgIHR5cGU6IFwiaW5zZXJ0XCIsXHJcbiAgICAgICAgdGFibGU6IFwibGlua3NcIixcclxuICAgICAgICBvYmplY3RzOiB7XHJcbiAgICAgICAgICAvLyBUT0RPOiBSZXBsYWNlIGlkIHdpdGggaWRMb2NhbCB3aGVuIGl0IHdvcmsgcHJvcGVybHlcclxuICAgICAgICAgIHR5cGVfaWQ6IGF3YWl0IGRlZXAuaWQoXCJAZGVlcC1mb3VuZGF0aW9uL2NvcmVcIiwgXCJDb250YWluXCIpLFxyXG4gICAgICAgICAgZnJvbV9pZDogcGFyZW50TGlua0lkLFxyXG4gICAgICAgICAgdG9faWQ6IGxpbmtJZCxcclxuICAgICAgICAgIHN0cmluZzoge1xyXG4gICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgdmFsdWU6IG5hbWUsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgICBsb2coeyBjb250YWluSW5zZXJ0U2VyaWFsT3BlcmF0aW9uIH0pO1xyXG4gICAgICBvcGVyYXRpb25zLnB1c2goY29udGFpbkluc2VydFNlcmlhbE9wZXJhdGlvbik7XHJcblxyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZhbHVlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IHZhbHVlW2ldO1xyXG4gICAgICAgIG9wZXJhdGlvbnMucHVzaChcclxuICAgICAgICAgIC4uLihhd2FpdCB0aGlzLm1ha2VJbnNlcnRPcGVyYXRpb25zRm9yQW55VmFsdWUoe1xyXG4gICAgICAgICAgICB2YWx1ZTogZWxlbWVudCxcclxuICAgICAgICAgICAgcGFyZW50TGlua0lkOiBsaW5rSWQsXHJcbiAgICAgICAgICAgIGxpbmtJZDogdGhpcy5yZXNlcnZlZExpbmtJZHMucG9wKCkhLFxyXG4gICAgICAgICAgICBuYW1lOiBpLnRvU3RyaW5nKCksXHJcbiAgICAgICAgICB9KSksXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIG9wZXJhdGlvbnM7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgbWFrZUluc2VydE9wZXJhdGlvbnNGb3JQcmltaXRpdmVWYWx1ZShcclxuICAgICAgb3B0aW9uczogTWFrZUluc2VydE9wZXJhdGlvbnNGb3JQcmltaXRpdmVWYWx1ZU9wdGlvbnMsXHJcbiAgICApIHtcclxuICAgICAgY29uc3Qgb3BlcmF0aW9uczogQXJyYXk8U2VyaWFsT3BlcmF0aW9uPiA9IFtdO1xyXG4gICAgICBjb25zdCB7IHZhbHVlIH0gPSBvcHRpb25zO1xyXG4gICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgb3BlcmF0aW9ucy5wdXNoKFxyXG4gICAgICAgICAgLi4uKGF3YWl0IHRoaXMubWFrZUluc2VydE9wZXJhdGlvbnNGb3JTdHJpbmdWYWx1ZSh7XHJcbiAgICAgICAgICAgIC4uLm9wdGlvbnMsXHJcbiAgICAgICAgICAgIHZhbHVlLFxyXG4gICAgICAgICAgfSkpLFxyXG4gICAgICAgICk7XHJcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSBcIm51bWJlclwiKSB7XHJcbiAgICAgICAgb3BlcmF0aW9ucy5wdXNoKFxyXG4gICAgICAgICAgLi4uKGF3YWl0IHRoaXMubWFrZUluc2VydE9wZXJhdGlvbnNGb3JOdW1iZXJWYWx1ZSh7XHJcbiAgICAgICAgICAgIC4uLm9wdGlvbnMsXHJcbiAgICAgICAgICAgIHZhbHVlLFxyXG4gICAgICAgICAgfSkpLFxyXG4gICAgICAgICk7XHJcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSBcImJvb2xlYW5cIikge1xyXG4gICAgICAgIG9wZXJhdGlvbnMucHVzaChcclxuICAgICAgICAgIC4uLihhd2FpdCB0aGlzLm1ha2VJbnNlcnRPcGVyYXRpb25zRm9yQm9vbGVhblZhbHVlKHtcclxuICAgICAgICAgICAgLi4ub3B0aW9ucyxcclxuICAgICAgICAgICAgdmFsdWUsXHJcbiAgICAgICAgICB9KSksXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gb3BlcmF0aW9ucztcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBtYWtlSW5zZXJ0T3BlcmF0aW9uc0Zvck9iamVjdFZhbHVlKFxyXG4gICAgICBvcHRpb25zOiBNYWtlSW5zZXJ0T3BlcmF0aW9uc0Zvck9iamVjdFZhbHVlLFxyXG4gICAgKSB7XHJcbiAgICAgIGNvbnN0IG9wZXJhdGlvbnM6IEFycmF5PFNlcmlhbE9wZXJhdGlvbj4gPSBbXTtcclxuICAgICAgY29uc3QgeyB2YWx1ZSwgbGlua0lkLCBuYW1lLCBwYXJlbnRMaW5rSWQgfSA9IG9wdGlvbnM7XHJcbiAgICAgIGNvbnN0IGxvZyA9IE9iamVjdFRvTGlua3NDb252ZXJ0ZXIuZ2V0TG9nZ2VyKFxyXG4gICAgICAgIHRoaXMubWFrZUluc2VydE9wZXJhdGlvbnNGb3JPYmplY3RWYWx1ZS5uYW1lLFxyXG4gICAgICApO1xyXG5cclxuICAgICAgY29uc3QgbGlua0luc2VydFNlcmlhbE9wZXJhdGlvbiA9IGNyZWF0ZVNlcmlhbE9wZXJhdGlvbih7XHJcbiAgICAgICAgdHlwZTogXCJpbnNlcnRcIixcclxuICAgICAgICB0YWJsZTogXCJsaW5rc1wiLFxyXG4gICAgICAgIG9iamVjdHM6IHtcclxuICAgICAgICAgIGlkOiBsaW5rSWQsXHJcbiAgICAgICAgICB0eXBlX2lkOiBhd2FpdCBkZWVwLmlkKGRlZXAubGlua0lkISwgcGFzY2FsQ2FzZSh0eXBlb2YgdmFsdWUpKSxcclxuICAgICAgICAgIGZyb21faWQ6IHBhcmVudExpbmtJZCxcclxuICAgICAgICAgIHRvX2lkOiBwYXJlbnRMaW5rSWQsXHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcbiAgICAgIGxvZyh7IGxpbmtJbnNlcnRTZXJpYWxPcGVyYXRpb24gfSk7XHJcbiAgICAgIG9wZXJhdGlvbnMucHVzaChsaW5rSW5zZXJ0U2VyaWFsT3BlcmF0aW9uKTtcclxuXHJcbiAgICAgIGNvbnN0IGNvbnRhaW5JbnNlcnRTZXJpYWxPcGVyYXRpb24gPSBjcmVhdGVTZXJpYWxPcGVyYXRpb24oe1xyXG4gICAgICAgIHR5cGU6IFwiaW5zZXJ0XCIsXHJcbiAgICAgICAgdGFibGU6IFwibGlua3NcIixcclxuICAgICAgICBvYmplY3RzOiB7XHJcbiAgICAgICAgICAvLyBUT0RPOiBSZXBsYWNlIGlkIHdpdGggaWRMb2NhbCB3aGVuIGl0IHdvcmsgcHJvcGVybHlcclxuICAgICAgICAgIHR5cGVfaWQ6IGF3YWl0IGRlZXAuaWQoXCJAZGVlcC1mb3VuZGF0aW9uL2NvcmVcIiwgXCJDb250YWluXCIpLFxyXG4gICAgICAgICAgZnJvbV9pZDogcGFyZW50TGlua0lkLFxyXG4gICAgICAgICAgdG9faWQ6IGxpbmtJZCxcclxuICAgICAgICAgIHN0cmluZzoge1xyXG4gICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgdmFsdWU6IG5hbWUsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgICBsb2coeyBjb250YWluSW5zZXJ0U2VyaWFsT3BlcmF0aW9uIH0pO1xyXG4gICAgICBvcGVyYXRpb25zLnB1c2goY29udGFpbkluc2VydFNlcmlhbE9wZXJhdGlvbik7XHJcblxyXG4gICAgICBmb3IgKGNvbnN0IFtwcm9wZXJ0eUtleSwgcHJvcGVydHlWYWx1ZV0gb2YgT2JqZWN0LmVudHJpZXModmFsdWUpKSB7XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgdHlwZW9mIHByb3BlcnR5VmFsdWUgIT09IFwic3RyaW5nXCIgJiZcclxuICAgICAgICAgIHR5cGVvZiBwcm9wZXJ0eVZhbHVlICE9PSBcIm51bWJlclwiICYmXHJcbiAgICAgICAgICB0eXBlb2YgcHJvcGVydHlWYWx1ZSAhPT0gXCJib29sZWFuXCIgJiZcclxuICAgICAgICAgICFBcnJheS5pc0FycmF5KHByb3BlcnR5VmFsdWUpICYmXHJcbiAgICAgICAgICB0eXBlb2YgcHJvcGVydHlWYWx1ZSAhPT0gXCJvYmplY3RcIlxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgbG9nKFxyXG4gICAgICAgICAgICBgU2tpcHBpbmcgcHJvcGVydHkgJHtwcm9wZXJ0eUtleX0gYmVjYXVzZSBpdHMgdHlwZSAke3R5cGVvZiB2YWx1ZX0gaXMgbm90IHN1cHBvcnRlZGAsXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHByb3BlcnR5TGlua0lkID0gdGhpcy5yZXNlcnZlZExpbmtJZHMucG9wKCk7XHJcbiAgICAgICAgbG9nKHsgcHJvcGVydHlMaW5rSWQgfSk7XHJcbiAgICAgICAgaWYgKCFwcm9wZXJ0eUxpbmtJZCkge1xyXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBOb3QgZW5vdWdoIHJlc2VydmVkIGxpbmsgaWRzYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHByb3BlcnR5SW5zZXJ0T3BlcmF0aW9ucyA9XHJcbiAgICAgICAgICBhd2FpdCB0aGlzLm1ha2VJbnNlcnRPcGVyYXRpb25zRm9yQW55VmFsdWUoe1xyXG4gICAgICAgICAgICBsaW5rSWQ6IHByb3BlcnR5TGlua0lkLFxyXG4gICAgICAgICAgICBwYXJlbnRMaW5rSWQ6IGxpbmtJZCxcclxuICAgICAgICAgICAgdmFsdWU6IHByb3BlcnR5VmFsdWUsXHJcbiAgICAgICAgICAgIG5hbWU6IHByb3BlcnR5S2V5LFxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgb3BlcmF0aW9ucy5wdXNoKC4uLnByb3BlcnR5SW5zZXJ0T3BlcmF0aW9ucyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBvcGVyYXRpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIG1ha2VJbnNlcnRPcGVyYXRpb25zRm9yQW55VmFsdWUoXHJcbiAgICAgIG9wdGlvbnM6IE1ha2VJbnNlcnRPcGVyYXRpb25zRm9yQW55VmFsdWVPcHRpb25zLFxyXG4gICAgKSB7XHJcbiAgICAgIGNvbnN0IG9wZXJhdGlvbnM6IEFycmF5PFNlcmlhbE9wZXJhdGlvbj4gPSBbXTtcclxuICAgICAgY29uc3QgeyB2YWx1ZSB9ID0gb3B0aW9ucztcclxuICAgICAgY29uc3QgbG9nID0gT2JqZWN0VG9MaW5rc0NvbnZlcnRlci5nZXRMb2dnZXIoXHJcbiAgICAgICAgdGhpcy5tYWtlSW5zZXJ0T3BlcmF0aW9uc0ZvckFueVZhbHVlLm5hbWUsXHJcbiAgICAgICk7XHJcblxyXG4gICAgICBpZiAoXHJcbiAgICAgICAgdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiIHx8XHJcbiAgICAgICAgdHlwZW9mIHZhbHVlID09PSBcIm51bWJlclwiIHx8XHJcbiAgICAgICAgdHlwZW9mIHZhbHVlID09PSBcImJvb2xlYW5cIlxyXG4gICAgICApIHtcclxuICAgICAgICBvcGVyYXRpb25zLnB1c2goXHJcbiAgICAgICAgICAuLi4oYXdhaXQgdGhpcy5tYWtlSW5zZXJ0T3BlcmF0aW9uc0ZvclByaW1pdGl2ZVZhbHVlKHtcclxuICAgICAgICAgICAgLi4ub3B0aW9ucyxcclxuICAgICAgICAgICAgdmFsdWUsXHJcbiAgICAgICAgICB9KSksXHJcbiAgICAgICAgKTtcclxuICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xyXG4gICAgICAgIG9wZXJhdGlvbnMucHVzaChcclxuICAgICAgICAgIC4uLihhd2FpdCB0aGlzLm1ha2VJbnNlcnRPcGVyYXRpb25zRm9yQXJyYXlWYWx1ZSh7XHJcbiAgICAgICAgICAgIC4uLm9wdGlvbnMsXHJcbiAgICAgICAgICAgIHZhbHVlLFxyXG4gICAgICAgICAgfSkpLFxyXG4gICAgICAgICk7XHJcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiKSB7XHJcbiAgICAgICAgb3BlcmF0aW9ucy5wdXNoKFxyXG4gICAgICAgICAgLi4uKGF3YWl0IHRoaXMubWFrZUluc2VydE9wZXJhdGlvbnNGb3JPYmplY3RWYWx1ZSh7XHJcbiAgICAgICAgICAgIC4uLm9wdGlvbnMsXHJcbiAgICAgICAgICAgIHZhbHVlLFxyXG4gICAgICAgICAgfSkpLFxyXG4gICAgICAgICk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUeXBlIG9mIHZhbHVlICR7dHlwZW9mIHZhbHVlfSBpcyBub3Qgc3VwcG9ydGVkYCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGxvZyh7IG9wZXJhdGlvbnMgfSk7XHJcbiAgICAgIHJldHVybiBvcGVyYXRpb25zO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZ2V0T2JqZWN0VG9MaW5rc0NvbnZlcnRlclByb3h5KG9wdGlvbnM6IHtcclxuICAgIHRhcmdldDogT2JqZWN0VG9MaW5rc0NvbnZlcnRlcjtcclxuICAgIGN1c3RvbU1ldGhvZHM/OiBSZWNvcmQ8c3RyaW5nLCBGdW5jdGlvbj47XHJcbiAgfSk6IE9iamVjdFRvTGlua3NDb252ZXJ0ZXIge1xyXG4gICAgY29uc3QgeyB0YXJnZXQsIGN1c3RvbU1ldGhvZHMgfSA9IG9wdGlvbnM7XHJcblxyXG4gICAgcmV0dXJuIG5ldyBQcm94eSh0YXJnZXQsIHtcclxuICAgICAgZ2V0OiBmdW5jdGlvbiAob2JqOiBPYmplY3RUb0xpbmtzQ29udmVydGVyLCBwcm9wOiBzdHJpbmcgfCBzeW1ib2wpIHtcclxuICAgICAgICBpZiAoY3VzdG9tTWV0aG9kcyAmJiBwcm9wIGluIGN1c3RvbU1ldGhvZHMpIHtcclxuICAgICAgICAgIC8vIElmIHRoZSBwcm9wZXJ0eSBpcyBpbiB0aGUgY3VzdG9tTWV0aG9kcyBvYmplY3QsIHJldHVybiB0aGF0LlxyXG4gICAgICAgICAgcmV0dXJuIGN1c3RvbU1ldGhvZHNbcHJvcCBhcyBzdHJpbmddO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gT3RoZXJ3aXNlLCByZXR1cm4gdGhlIHByb3BlcnR5IGZyb20gdGhlIG9yaWdpbmFsIG9iamVjdC5cclxuICAgICAgICByZXR1cm4gb2JqW3Byb3AgYXMga2V5b2YgT2JqZWN0VG9MaW5rc0NvbnZlcnRlcl07XHJcbiAgICAgIH0sXHJcbiAgICB9KSBhcyBPYmplY3RUb0xpbmtzQ29udmVydGVyO1xyXG4gIH1cclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG1haW4oKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHJlc3VsdCxcclxuICAgICAgbG9nczogbG9ncyxcclxuICAgIH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIHRocm93IHtcclxuICAgICAgZXJyb3I6IHV0aWwuaW5zcGVjdChlcnJvciksXHJcbiAgICAgIGxvZ3M6IGxvZ3MsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgZnVuY3Rpb24gbWFpbigpIHtcclxuICAgIGNvbnN0IGxvZyA9IE9iamVjdFRvTGlua3NDb252ZXJ0ZXIuZ2V0TG9nZ2VyKG1haW4ubmFtZSk7XHJcblxyXG4gICAgaWYgKE9iamVjdC5rZXlzKG9iaikubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBvYmplY3RUb0xpbmtzQ29udmVydGVyID0gYXdhaXQgT2JqZWN0VG9MaW5rc0NvbnZlcnRlci5pbml0KHtcclxuICAgICAgb2JqLFxyXG4gICAgICByb290TGlua0lkLFxyXG4gICAgICByZXN1bHRMaW5rSWQsXHJcbiAgICB9KTtcclxuICAgIGxvZyh7IG9iamVjdFRvTGlua3NDb252ZXJ0ZXIgfSk7XHJcblxyXG4gICAgY29uc3QgcHJveGllZE9iamVjdFRvTGlua3NDb252ZXJ0ZXIgPSBnZXRPYmplY3RUb0xpbmtzQ29udmVydGVyUHJveHkoe1xyXG4gICAgICB0YXJnZXQ6IG9iamVjdFRvTGlua3NDb252ZXJ0ZXIsXHJcbiAgICAgIGN1c3RvbU1ldGhvZHMsXHJcbiAgICB9KTtcclxuICAgIGxvZyh7IHByb3hpZWRPYmplY3RUb0xpbmtzQ29udmVydGVyIH0pO1xyXG5cclxuICAgIGNvbnN0IGNvbnZlcnRSZXN1bHQgPSBhd2FpdCBwcm94aWVkT2JqZWN0VG9MaW5rc0NvbnZlcnRlci5jb252ZXJ0KCk7XHJcbiAgICBsb2coeyBjb252ZXJ0UmVzdWx0IH0pO1xyXG5cclxuICAgIHJldHVybiBjb252ZXJ0UmVzdWx0O1xyXG4gIH1cclxuXHJcbiAgdHlwZSBBcHBseUNvbnRhaW5UcmVlTGlua3NEb3duVG9QYXJlbnRUb01pbmlsaW5rc09wdGlvbnMgPSBPbWl0PFxyXG4gICAgR2V0Q29udGFpblRyZWVMaW5rc0Rvd25Ub0xpbmtPcHRpb25zLFxyXG4gICAgXCJ1c2VNaW5pbGlua3NcIlxyXG4gID4gJiB7XHJcbiAgICBtaW5pbGlua3M6IE1pbmlsaW5rc1Jlc3VsdDxMaW5rPG51bWJlcj4+O1xyXG4gIH07XHJcblxyXG4gIGludGVyZmFjZSBHZXRDb250YWluVHJlZUxpbmtzRG93blRvTGlua09wdGlvbnMge1xyXG4gICAgbGlua0V4cDogQm9vbEV4cExpbms7XHJcbiAgfVxyXG5cclxuICB0eXBlIEN1c3RvbU1ldGhvZHMgPSB7XHJcbiAgICBjb252ZXJ0OiB0eXBlb2YgT2JqZWN0VG9MaW5rc0NvbnZlcnRlci5wcm90b3R5cGUuY29udmVydDtcclxuICAgIG1ha2VJbnNlcnRPcGVyYXRpb25zRm9yQW55VmFsdWU6IHR5cGVvZiBPYmplY3RUb0xpbmtzQ29udmVydGVyLnByb3RvdHlwZS5tYWtlSW5zZXJ0T3BlcmF0aW9uc0ZvckFueVZhbHVlO1xyXG4gICAgbWFrZVVwZGF0ZU9wZXJhdGlvbnNGb3JBbnlWYWx1ZTogdHlwZW9mIE9iamVjdFRvTGlua3NDb252ZXJ0ZXIucHJvdG90eXBlLm1ha2VVcGRhdGVPcGVyYXRpb25zRm9yQW55VmFsdWU7XHJcbiAgICBtYWtlSW5zZXJ0T3BlcmF0aW9uc0ZvclByaW1pdGl2ZVZhbHVlOiB0eXBlb2YgT2JqZWN0VG9MaW5rc0NvbnZlcnRlci5wcm90b3R5cGUubWFrZUluc2VydE9wZXJhdGlvbnNGb3JQcmltaXRpdmVWYWx1ZTtcclxuICAgIG1ha2VJbnNlcnRPcGVyYXRpb25zRm9yQXJyYXlWYWx1ZTogdHlwZW9mIE9iamVjdFRvTGlua3NDb252ZXJ0ZXIucHJvdG90eXBlLm1ha2VJbnNlcnRPcGVyYXRpb25zRm9yQXJyYXlWYWx1ZTtcclxuICAgIG1ha2VJbnNlcnRPcGVyYXRpb25zRm9yT2JqZWN0VmFsdWU6IHR5cGVvZiBPYmplY3RUb0xpbmtzQ29udmVydGVyLnByb3RvdHlwZS5tYWtlSW5zZXJ0T3BlcmF0aW9uc0Zvck9iamVjdFZhbHVlO1xyXG4gICAgbWFrZUluc2VydE9wZXJhdGlvbnNGb3JTdHJpbmdWYWx1ZTogdHlwZW9mIE9iamVjdFRvTGlua3NDb252ZXJ0ZXIucHJvdG90eXBlLm1ha2VJbnNlcnRPcGVyYXRpb25zRm9yU3RyaW5nVmFsdWU7XHJcbiAgICBtYWtlSW5zZXJ0T3BlcmF0aW9uc0Zvck51bWJlclZhbHVlOiB0eXBlb2YgT2JqZWN0VG9MaW5rc0NvbnZlcnRlci5wcm90b3R5cGUubWFrZUluc2VydE9wZXJhdGlvbnNGb3JOdW1iZXJWYWx1ZTtcclxuICAgIG1ha2VJbnNlcnRPcGVyYXRpb25zRm9yQm9vbGVhblZhbHVlOiB0eXBlb2YgT2JqZWN0VG9MaW5rc0NvbnZlcnRlci5wcm90b3R5cGUubWFrZUluc2VydE9wZXJhdGlvbnNGb3JCb29sZWFuVmFsdWU7XHJcbiAgICBtYWtlVXBkYXRlT3BlcmF0aW9uc0ZvckJvb2xlYW5WYWx1ZTogdHlwZW9mIE9iamVjdFRvTGlua3NDb252ZXJ0ZXIucHJvdG90eXBlLm1ha2VVcGRhdGVPcGVyYXRpb25zRm9yQm9vbGVhblZhbHVlO1xyXG4gICAgbWFrZVVwZGF0ZU9wZXJhdGlvbnNGb3JTdHJpbmdPck51bWJlclZhbHVlOiB0eXBlb2YgT2JqZWN0VG9MaW5rc0NvbnZlcnRlci5wcm90b3R5cGUubWFrZVVwZGF0ZU9wZXJhdGlvbnNGb3JTdHJpbmdWYWx1ZTtcclxuICAgIG1ha2VVcGRhdGVPcGVyYXRpb25zRm9yQXJyYXlWYWx1ZTogdHlwZW9mIE9iamVjdFRvTGlua3NDb252ZXJ0ZXIucHJvdG90eXBlLm1ha2VVcGRhdGVPcGVyYXRpb25zRm9yQXJyYXlWYWx1ZTtcclxuICAgIG1ha2VVcGRhdGVPcGVyYXRpb25zRm9yT2JqZWN0VmFsdWU6IHR5cGVvZiBPYmplY3RUb0xpbmtzQ29udmVydGVyLnByb3RvdHlwZS5tYWtlVXBkYXRlT3BlcmF0aW9uc0Zvck9iamVjdFZhbHVlO1xyXG4gICAgYXBwbHlDb250YWluVHJlZUxpbmtzRG93blRvUGFyZW50VG9NaW5pbGlua3M6IHR5cGVvZiBPYmplY3RUb0xpbmtzQ29udmVydGVyLmFwcGx5Q29udGFpblRyZWVMaW5rc0Rvd25Ub1BhcmVudFRvTWluaWxpbmtzO1xyXG4gICAgZ2V0Q29udGFpblRyZWVMaW5rc0Rvd25Ub1BhcmVudDogdHlwZW9mIE9iamVjdFRvTGlua3NDb252ZXJ0ZXIuZ2V0Q29udGFpblRyZWVMaW5rc0Rvd25Ub1BhcmVudDtcclxuICAgIGdldExpbmtzVG9SZXNlcnZlQ291bnQ6IHR5cGVvZiBPYmplY3RUb0xpbmtzQ29udmVydGVyLmdldExpbmtzVG9SZXNlcnZlQ291bnQ7XHJcbiAgICBpbml0OiB0eXBlb2YgT2JqZWN0VG9MaW5rc0NvbnZlcnRlci5pbml0O1xyXG4gIH07XHJcblxyXG4gIGludGVyZmFjZSBPYmplY3RUb0xpbmtzQ29udmVydGVyT3B0aW9ucyB7XHJcbiAgICByb290TGluazogTGluazxudW1iZXI+O1xyXG4gICAgcmVzZXJ2ZWRMaW5rSWRzOiBBcnJheTxudW1iZXI+O1xyXG4gICAgb2JqOiBPYmo7XHJcbiAgICBjdXN0b21NZXRob2RzPzogQ3VzdG9tTWV0aG9kcztcclxuICAgIHJlc3VsdExpbms6IExpbms8bnVtYmVyPjtcclxuICB9XHJcblxyXG4gIGludGVyZmFjZSBPYmplY3RUb0xpbmtzQ29udmVydGVySW5pdE9wdGlvbnMge1xyXG4gICAgb2JqOiBPYmo7XHJcbiAgICByb290TGlua0lkPzogbnVtYmVyO1xyXG4gICAgY3VzdG9tTWV0aG9kcz86IEN1c3RvbU1ldGhvZHM7XHJcbiAgICByZXN1bHRMaW5rSWQ/OiBudW1iZXI7XHJcbiAgfVxyXG5cclxuICB0eXBlIEFsbG93ZWRQcmltaXRpdmUgPSBzdHJpbmcgfCBudW1iZXIgfCBib29sZWFuO1xyXG5cclxuICBpbnRlcmZhY2UgQWxsb3dlZE9iamVjdCB7XHJcbiAgICBba2V5OiBzdHJpbmddOiBBbGxvd2VkVmFsdWU7XHJcbiAgfVxyXG5cclxuICB0eXBlIEFsbG93ZWRBcnJheSA9IEFycmF5PEFsbG93ZWRWYWx1ZT47XHJcblxyXG4gIHR5cGUgQWxsb3dlZFZhbHVlID0gQWxsb3dlZFByaW1pdGl2ZSB8IEFsbG93ZWRPYmplY3QgfCBBbGxvd2VkQXJyYXk7XHJcblxyXG4gIHR5cGUgTWFrZUluc2VydE9wZXJhdGlvbnNGb3JTdHJpbmdPcHRpb25zID1cclxuICAgIE1ha2VJbnNlcnRPcGVyYXRpb25zRm9yVmFsdWVPcHRpb25zPHN0cmluZz47XHJcblxyXG4gIHR5cGUgTWFrZUluc2VydE9wZXJhdGlvbnNGb3JOdW1iZXJPcHRpb25zID1cclxuICAgIE1ha2VJbnNlcnRPcGVyYXRpb25zRm9yVmFsdWVPcHRpb25zPG51bWJlcj47XHJcblxyXG4gIHR5cGUgTWFrZUluc2VydE9wZXJhdGlvbnNGb3JCb29sZWFuT3B0aW9ucyA9XHJcbiAgICBNYWtlSW5zZXJ0T3BlcmF0aW9uc0ZvclZhbHVlT3B0aW9uczxib29sZWFuPjtcclxuXHJcbiAgdHlwZSBNYWtlSW5zZXJ0T3BlcmF0aW9uc0Zvck9iamVjdFZhbHVlID1cclxuICAgIE1ha2VJbnNlcnRPcGVyYXRpb25zRm9yVmFsdWVPcHRpb25zPEFsbG93ZWRPYmplY3Q+O1xyXG5cclxuICB0eXBlIE1ha2VJbnNlcnRPcGVyYXRpb25zRm9yQXJyYXlWYWx1ZU9wdGlvbnMgPVxyXG4gICAgTWFrZUluc2VydE9wZXJhdGlvbnNGb3JWYWx1ZU9wdGlvbnM8QWxsb3dlZEFycmF5PjtcclxuXHJcbiAgdHlwZSBNYWtlSW5zZXJ0T3BlcmF0aW9uc0ZvclByaW1pdGl2ZVZhbHVlT3B0aW9ucyA9XHJcbiAgICBNYWtlSW5zZXJ0T3BlcmF0aW9uc0ZvclZhbHVlT3B0aW9uczxBbGxvd2VkUHJpbWl0aXZlPjtcclxuXHJcbiAgdHlwZSBNYWtlSW5zZXJ0T3BlcmF0aW9uc0ZvckFueVZhbHVlT3B0aW9ucyA9IE9taXQ8XHJcbiAgICBNYWtlSW5zZXJ0T3BlcmF0aW9uc0ZvclZhbHVlT3B0aW9uczxBbGxvd2VkVmFsdWU+LFxyXG4gICAgXCJ0eXBlTGlua0lkXCJcclxuICA+O1xyXG5cclxuICB0eXBlIE1ha2VJbnNlcnRPcGVyYXRpb25zRm9yVmFsdWVPcHRpb25zPFRWYWx1ZSBleHRlbmRzIEFsbG93ZWRWYWx1ZT4gPSB7XHJcbiAgICBwYXJlbnRMaW5rSWQ6IG51bWJlcjtcclxuICAgIGxpbmtJZDogbnVtYmVyO1xyXG4gICAgdmFsdWU6IFRWYWx1ZTtcclxuICAgIG5hbWU6IHN0cmluZztcclxuICB9O1xyXG5cclxuICBpbnRlcmZhY2UgTWFrZVVwZGF0ZU9wZXJhdGlvbnNGb3JWYWx1ZU9wdGlvbnM8VFZhbHVlIGV4dGVuZHMgQWxsb3dlZFZhbHVlPiB7XHJcbiAgICBsaW5rOiBMaW5rPG51bWJlcj47XHJcbiAgICB2YWx1ZTogVFZhbHVlO1xyXG4gIH1cclxuXHJcbiAgdHlwZSBNYWtlVXBkYXRlT3BlcmF0aW9uc0ZvckFueVZhbHVlT3B0aW9uczxUVmFsdWUgZXh0ZW5kcyBBbGxvd2VkVmFsdWU+ID1cclxuICAgIE1ha2VVcGRhdGVPcGVyYXRpb25zRm9yVmFsdWVPcHRpb25zPFRWYWx1ZT47XHJcblxyXG4gIHR5cGUgTWFrZVVwZGF0ZU9wZXJhdGlvbnNGb3JPYmplY3RWYWx1ZU9wdGlvbnMgPVxyXG4gICAgTWFrZVVwZGF0ZU9wZXJhdGlvbnNGb3JWYWx1ZU9wdGlvbnM8QWxsb3dlZE9iamVjdD47XHJcblxyXG4gIHR5cGUgTWFrZVVwZGF0ZU9wZXJhdGlvbnNGb3JTdHJpbmdWYWx1ZU9wdGlvbnMgPVxyXG4gICAgTWFrZVVwZGF0ZU9wZXJhdGlvbnNGb3JWYWx1ZU9wdGlvbnM8c3RyaW5nPjtcclxuXHJcbiAgdHlwZSBNYWtlVXBkYXRlT3BlcmF0aW9uc0ZvckFycmF5VmFsdWVPcHRpb25zID1cclxuICAgIE1ha2VVcGRhdGVPcGVyYXRpb25zRm9yVmFsdWVPcHRpb25zPEFsbG93ZWRBcnJheT47XHJcblxyXG4gIHR5cGUgTWFrZVVwZGF0ZU9wZXJhdGlvbnNGb3JCb29sZWFuVmFsdWVPcHRpb25zID1cclxuICAgIE1ha2VVcGRhdGVPcGVyYXRpb25zRm9yVmFsdWVPcHRpb25zPGJvb2xlYW4+O1xyXG5cclxuICB0eXBlIE1ha2VVcGRhdGVPcGVyYXRpb25zRm9yTnVtYmVyVmFsdWVPcHRpb25zID1cclxuICAgIE1ha2VVcGRhdGVPcGVyYXRpb25zRm9yVmFsdWVPcHRpb25zPG51bWJlcj47XHJcbn07XHJcblxyXG5pbnRlcmZhY2UgT2JqIHtcclxuICBba2V5OiBzdHJpbmddOiBzdHJpbmcgfCBudW1iZXIgfCBPYmogfCBib29sZWFuO1xyXG59XHJcbiJdfQ==",
        "link_id": 1805
      }
    },
    {
      "id": 1806,
      "type_id": 3,
      "from_id": 1737,
      "to_id": 1805,
      "value": {
        "id": 666,
        "value": "generated",
        "link_id": 1806
      }
    },
    {
      "id": 1807,
      "type_id": 143,
      "from_id": 1805,
      "to_id": 1737
    },
    {
      "id": 1808,
      "type_id": 3,
      "from_id": 1737,
      "to_id": 1807
    },
    {
      "id": 1764,
      "type_id": 3,
      "from_id": 1758,
      "to_id": 1753,
      "value": {
        "id": 676,
        "value": "treeIncludeFromCurrentBoolean",
        "link_id": 1764
      }
    },
    {
      "id": 1911,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 725,
        "value": "async ({ deep, data: { newLink, oldLink } }) => {\n    await deep.unsafe.hasura.query({\n        type: 'untrack_table',\n        args: {\n            table: {\n                schema: 'public',\n                name: `semantic`,\n            },\n            cascade: true,\n        },\n    });\n    await deep.unsafe.hasura.sql(`\ndrop view semantic;\ndrop view semantic_types;\n    `);\n}",
        "link_id": 1911
      }
    },
    {
      "id": 1943,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 727,
        "value": "async ({ deep, data: { newLink, oldLink } }) => {\n    await deep.unsafe.hasura.query({\n        type: 'untrack_table',\n        args: {\n            table: {\n                schema: 'public',\n                name: `semantic`,\n            },\n            cascade: true,\n        },\n    });\n    await deep.unsafe.hasura.sql(`\ndrop view semantic;\ndrop view semantic_types;\n    `);\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRSxFQUFFLEVBQUUsRUFBRTtJQUMzQyxNQUFNLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQztRQUMzQixJQUFJLEVBQUUsZUFBZTtRQUNyQixJQUFJLEVBQUU7WUFDRixLQUFLLEVBQUU7Z0JBQ0gsTUFBTSxFQUFFLFFBQVE7Z0JBQ2hCLElBQUksRUFBRSxVQUFVO2FBQ25CO1lBQ0QsT0FBTyxFQUFFLElBQUk7U0FDaEI7S0FDSixDQUFDLENBQUM7SUFDSCxNQUFNLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQzs7O0tBRzVCLENBQUMsQ0FBQztBQUNQLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImFzeW5jICh7IGRlZXAsIGRhdGE6IHsgbmV3TGluaywgb2xkTGluayB9IH0pID0+IHtcbiAgICBhd2FpdCBkZWVwLnVuc2FmZS5oYXN1cmEucXVlcnkoe1xuICAgICAgICB0eXBlOiAndW50cmFja190YWJsZScsXG4gICAgICAgIGFyZ3M6IHtcbiAgICAgICAgICAgIHRhYmxlOiB7XG4gICAgICAgICAgICAgICAgc2NoZW1hOiAncHVibGljJyxcbiAgICAgICAgICAgICAgICBuYW1lOiBgc2VtYW50aWNgLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNhc2NhZGU6IHRydWUsXG4gICAgICAgIH0sXG4gICAgfSk7XG4gICAgYXdhaXQgZGVlcC51bnNhZmUuaGFzdXJhLnNxbChgXG5kcm9wIHZpZXcgc2VtYW50aWM7XG5kcm9wIHZpZXcgc2VtYW50aWNfdHlwZXM7XG4gICAgYCk7XG59Il19",
        "link_id": 1943
      }
    },
    {
      "id": 1944,
      "type_id": 3,
      "from_id": 1911,
      "to_id": 1943,
      "value": {
        "id": 726,
        "value": "generated",
        "link_id": 1944
      }
    },
    {
      "id": 1945,
      "type_id": 143,
      "from_id": 1943,
      "to_id": 1911
    },
    {
      "id": 1946,
      "type_id": 3,
      "from_id": 1911,
      "to_id": 1945
    },
    {
      "id": 1912,
      "type_id": 35,
      "from_id": 83,
      "to_id": 1911
    },
    {
      "id": 1913,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 728,
        "value": "async ({ deep, data: { newLink, oldLink } }) => {\n    await deep.unsafe.hasura.sql(`\nCREATE OR REPLACE VIEW \"public\".\"semantic_types\" AS \n  SELECT\n    instance.id AS id,\n    instance.type_id AS type_id,\n    instance.from_id AS from_id,\n    (CASE WHEN instance.from_id = 0 THEN 0 ELSE (\n      SELECT type_id FROM links WHERE id = instance.from_id\n    ) END) as type_from_id,\n    instance.to_id AS to_id,\n    (CASE WHEN instance.from_id = 0 THEN 0 ELSE (\n      SELECT type_id FROM links WHERE id = instance.to_id\n    ) END) as type_to_id\n  FROM\n    links instance\n  WHERE instance.type_id != 0\n ;\n    `);\n    await deep.unsafe.hasura.sql(`\nCREATE OR REPLACE VIEW \"public\".\"semantic\" AS \n  SELECT DISTINCT ON (cst.type_id, cst.type_from_id, cst.type_to_id)\n    cst.type_id as type_id, cst.type_from_id as type_from_id, cst.type_to_id as type_to_id,\n    (\n      SELECT count(*) FROM semantic_types as st WHERE\n      st.type_id = cst.type_id AND\n      st.type_from_id = cst.type_from_id AND\n      st.type_to_id = cst.type_to_id\n    ) AS count\n  FROM semantic_types as cst\n;\n    `);\n    await deep.unsafe.hasura.query({\n        type: 'track_table',\n        args: {\n            schema: 'public',\n            name: `semantic`,\n        },\n    });\n    return 'ok';\n}",
        "link_id": 1913
      }
    },
    {
      "id": 1952,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 730,
        "value": "async ({ deep, data: { newLink, oldLink } }) => {\n    await deep.unsafe.hasura.sql(`\nCREATE OR REPLACE VIEW \"public\".\"semantic_types\" AS \n  SELECT\n    instance.id AS id,\n    instance.type_id AS type_id,\n    instance.from_id AS from_id,\n    (CASE WHEN instance.from_id = 0 THEN 0 ELSE (\n      SELECT type_id FROM links WHERE id = instance.from_id\n    ) END) as type_from_id,\n    instance.to_id AS to_id,\n    (CASE WHEN instance.from_id = 0 THEN 0 ELSE (\n      SELECT type_id FROM links WHERE id = instance.to_id\n    ) END) as type_to_id\n  FROM\n    links instance\n  WHERE instance.type_id != 0\n ;\n    `);\n    await deep.unsafe.hasura.sql(`\nCREATE OR REPLACE VIEW \"public\".\"semantic\" AS \n  SELECT DISTINCT ON (cst.type_id, cst.type_from_id, cst.type_to_id)\n    cst.type_id as type_id, cst.type_from_id as type_from_id, cst.type_to_id as type_to_id,\n    (\n      SELECT count(*) FROM semantic_types as st WHERE\n      st.type_id = cst.type_id AND\n      st.type_from_id = cst.type_from_id AND\n      st.type_to_id = cst.type_to_id\n    ) AS count\n  FROM semantic_types as cst\n;\n    `);\n    await deep.unsafe.hasura.query({\n        type: 'track_table',\n        args: {\n            schema: 'public',\n            name: `semantic`,\n        },\n    });\n    return 'ok';\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRSxFQUFFLEVBQUUsRUFBRTtJQUMzQyxNQUFNLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7S0FpQjVCLENBQUMsQ0FBQztJQUNILE1BQU0sSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDOzs7Ozs7Ozs7Ozs7S0FZNUIsQ0FBQyxDQUFDO0lBQ0gsTUFBTSxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUM7UUFDM0IsSUFBSSxFQUFFLGFBQWE7UUFDbkIsSUFBSSxFQUFFO1lBQ0YsTUFBTSxFQUFFLFFBQVE7WUFDaEIsSUFBSSxFQUFFLFVBQVU7U0FDbkI7S0FDSixDQUFDLENBQUM7SUFDSCxPQUFPLElBQUksQ0FBQztBQUNoQixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJhc3luYyAoeyBkZWVwLCBkYXRhOiB7IG5ld0xpbmssIG9sZExpbmsgfSB9KSA9PiB7XG4gICAgYXdhaXQgZGVlcC51bnNhZmUuaGFzdXJhLnNxbChgXG5DUkVBVEUgT1IgUkVQTEFDRSBWSUVXIFwicHVibGljXCIuXCJzZW1hbnRpY190eXBlc1wiIEFTIFxuICBTRUxFQ1RcbiAgICBpbnN0YW5jZS5pZCBBUyBpZCxcbiAgICBpbnN0YW5jZS50eXBlX2lkIEFTIHR5cGVfaWQsXG4gICAgaW5zdGFuY2UuZnJvbV9pZCBBUyBmcm9tX2lkLFxuICAgIChDQVNFIFdIRU4gaW5zdGFuY2UuZnJvbV9pZCA9IDAgVEhFTiAwIEVMU0UgKFxuICAgICAgU0VMRUNUIHR5cGVfaWQgRlJPTSBsaW5rcyBXSEVSRSBpZCA9IGluc3RhbmNlLmZyb21faWRcbiAgICApIEVORCkgYXMgdHlwZV9mcm9tX2lkLFxuICAgIGluc3RhbmNlLnRvX2lkIEFTIHRvX2lkLFxuICAgIChDQVNFIFdIRU4gaW5zdGFuY2UuZnJvbV9pZCA9IDAgVEhFTiAwIEVMU0UgKFxuICAgICAgU0VMRUNUIHR5cGVfaWQgRlJPTSBsaW5rcyBXSEVSRSBpZCA9IGluc3RhbmNlLnRvX2lkXG4gICAgKSBFTkQpIGFzIHR5cGVfdG9faWRcbiAgRlJPTVxuICAgIGxpbmtzIGluc3RhbmNlXG4gIFdIRVJFIGluc3RhbmNlLnR5cGVfaWQgIT0gMFxuIDtcbiAgICBgKTtcbiAgICBhd2FpdCBkZWVwLnVuc2FmZS5oYXN1cmEuc3FsKGBcbkNSRUFURSBPUiBSRVBMQUNFIFZJRVcgXCJwdWJsaWNcIi5cInNlbWFudGljXCIgQVMgXG4gIFNFTEVDVCBESVNUSU5DVCBPTiAoY3N0LnR5cGVfaWQsIGNzdC50eXBlX2Zyb21faWQsIGNzdC50eXBlX3RvX2lkKVxuICAgIGNzdC50eXBlX2lkIGFzIHR5cGVfaWQsIGNzdC50eXBlX2Zyb21faWQgYXMgdHlwZV9mcm9tX2lkLCBjc3QudHlwZV90b19pZCBhcyB0eXBlX3RvX2lkLFxuICAgIChcbiAgICAgIFNFTEVDVCBjb3VudCgqKSBGUk9NIHNlbWFudGljX3R5cGVzIGFzIHN0IFdIRVJFXG4gICAgICBzdC50eXBlX2lkID0gY3N0LnR5cGVfaWQgQU5EXG4gICAgICBzdC50eXBlX2Zyb21faWQgPSBjc3QudHlwZV9mcm9tX2lkIEFORFxuICAgICAgc3QudHlwZV90b19pZCA9IGNzdC50eXBlX3RvX2lkXG4gICAgKSBBUyBjb3VudFxuICBGUk9NIHNlbWFudGljX3R5cGVzIGFzIGNzdFxuO1xuICAgIGApO1xuICAgIGF3YWl0IGRlZXAudW5zYWZlLmhhc3VyYS5xdWVyeSh7XG4gICAgICAgIHR5cGU6ICd0cmFja190YWJsZScsXG4gICAgICAgIGFyZ3M6IHtcbiAgICAgICAgICAgIHNjaGVtYTogJ3B1YmxpYycsXG4gICAgICAgICAgICBuYW1lOiBgc2VtYW50aWNgLFxuICAgICAgICB9LFxuICAgIH0pO1xuICAgIHJldHVybiAnb2snO1xufSJdfQ==",
        "link_id": 1952
      }
    },
    {
      "id": 1953,
      "type_id": 3,
      "from_id": 1913,
      "to_id": 1952,
      "value": {
        "id": 729,
        "value": "generated",
        "link_id": 1953
      }
    },
    {
      "id": 1954,
      "type_id": 143,
      "from_id": 1952,
      "to_id": 1913
    },
    {
      "id": 1955,
      "type_id": 3,
      "from_id": 1913,
      "to_id": 1954
    },
    {
      "id": 1916,
      "type_id": 1,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 1917,
      "type_id": 1,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 1918,
      "type_id": 51,
      "from_id": 1917,
      "to_id": 1912
    },
    {
      "id": 1919,
      "type_id": 49,
      "from_id": 1917,
      "to_id": 1914
    },
    {
      "id": 1920,
      "type_id": 2,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 731,
        "value": "@deep-foundation/semantic",
        "link_id": 1920
      }
    },
    {
      "id": 1931,
      "type_id": 3,
      "from_id": 1920,
      "to_id": 1919,
      "value": {
        "id": 738,
        "value": "HandleInsert",
        "link_id": 1931
      }
    },
    {
      "id": 1932,
      "type_id": 3,
      "from_id": 1920,
      "to_id": 1914,
      "value": {
        "id": 739,
        "value": "InsertHandler",
        "link_id": 1932
      }
    },
    {
      "id": 1933,
      "type_id": 3,
      "from_id": 1920,
      "to_id": 1913,
      "value": {
        "id": 740,
        "value": "onInsert",
        "link_id": 1933
      }
    },
    {
      "id": 1914,
      "type_id": 35,
      "from_id": 83,
      "to_id": 1913
    },
    {
      "id": 1915,
      "type_id": 1,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 5646,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1357,
        "value": "async ({ deep, data, Go, require }) => {\n  const { GrClear } = require(\"react-icons/gr\");\n  const React = require('react');\n  const c = require('@chakra-ui/react');\n  const _ = require('lodash');\n  const { useDebounceCallback } = require('@react-hook/debounce');\n\n  const dpl = '@deep-foundation/perception-links';\n  const dc = '@deep-foundation/core';\n\n  const Contain = deep.idLocal(dc, 'Contain');\n  const containTree = deep.idLocal(dc, 'containTree');\n  const TreeLinkButton = deep.idLocal(dpl, 'TreeLinkButton');\n  const History = deep.idLocal(dpl, 'History');\n  const HistoryHandler = deep.idLocal(dpl, 'HistoryHandler');\n  const Menu = deep.idLocal(dpl, 'Menu');\n  const Stack = deep.idLocal(dpl, 'Stack');\n  const FinderButton = deep.idLocal(dpl, 'FinderButton');\n  \n  const Item = ({ link, isActive, isConcentrated }) => {\n    const go = Go.useGo();\n    return <Go.Handler\n      handlerId={TreeLinkButton}\n      linkId={link.id}\n      isActive={isActive}\n      minW={isConcentrated === false ? '3em' : '8em'} h='100%' maxH='100%' variant='short'\n      isConcentrated={isConcentrated}\n    />;\n  };\n  \n  return ({\n    go,\n\n    using = false,\n  }, ref) => {\n    const { data: history } = deep.useSubscription({\n      type_id: History,\n      from_id: deep.linkId,\n      order_by: { id: 'desc' },\n      limit: 30,\n      return: {\n        item: { relation: 'to' },\n      },\n    });\n\n    const [concentrate, setConcentrate] = React.useState('');\n    const concetrateDebounce = useDebounceCallback((concentrate) => {\n      go.root().do('concentrate', { value: concentrate });\n    }, 500);\n    React.useEffect(() => {\n      concetrateDebounce(concentrate);\n    }, [concentrate]);\n\n    const { data: items, ids } = React.useMemo(() => {\n      const _ids = [];\n      const filtered = _.uniqBy(history.map(h => h?.to), (l) => l?.id).filter(l => {\n        if (!!l?.id) _ids.push(l?.id);\n        return !!l?.id;\n      });\n      return { data: filtered, ids: _ids };\n    }, [history];\n\n    const nav = go.useNav();\n    nav(FinderButton, FinderButton, FinderButton, Stack, 'down');\n    nav(Stack, FinderButton, Stack, 'clear', 'down');\n    nav('clear', Stack, 'clear', 'clear', 'down');\n\n    const { ids: concentrated } = deep.useSearch(concentrate, {\n      db: false, sort: false,\n      query: { id: { _in: ids } },\n      skip: !!concentrate,\n    });\n\n    console.log({concentrated});\n\n    return <go.On do={{\n      exec: (g,v,o) => o?.id || go.value == Stack || !go.value ? go.root().do('open', { id: o?.id || go(Stack).value, focus: true }) : go.do(go.value),\n      use: (g,v,o) => go(Stack) && go(Stack).do('use',o),\n      focus: (g,v,linkId,o) => {\n        !go.value && go.focus(Stack);\n        o?.id && go(Stack).focus(o?.id);\n      },\n      right: (g,v,o) => go.focus(nav.get(go.value || Stack, 'right')),\n      left: (g,v,o) => go.focus(nav.get(go.value || Stack, 'left')),\n\n      finder: (g,v,o) => go(FinderButton).do('exec'),\n      clear: (g,v,o) => deep.delete({\n        up: {\n          tree_id: containTree,\n          parent: {\n            type_id: Contain,\n            to: { type_id: { _in: [History, HistoryHandler] } },\n          },\n        },\n      }),\n    }}>\n      <c.Flex ref={ref} w='100%'>\n        <go.Provider linkId={FinderButton}>\n          <go.Handler handlerId={FinderButton} isActive={go.value === FinderButton}/>\n        </go.Provider>\n        <c.Box w='12em' h='100%' position='relative'>\n          <go.Editor value={concentrate} onChange={setConcentrate} fillSize lineNumbers={false}/>\n        </c.Box>\n        <go.Provider linkId={Stack}>\n          <go.Component path={[dpl, 'Stack']}\n            links={items} direction='horizontal' Item={Item} flex='1' using={using}\n            concentrated={!!concentrate && concentrated}\n          />\n        </go.Provider>\n        <c.Button\n          h='3em' w='3em' variant={go.value === 'clear' ? 'active' : undefined}\n          onClick={() => go.focus('clear').go.do('clear')}\n        ><GrClear/></c.Button>\n      </c.Flex>\n    </go.On>;\n  };\n}",
        "link_id": 5646
      }
    },
    {
      "id": 5649,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 5646,
      "value": {
        "id": 1234,
        "value": "HeaderComponent",
        "link_id": 5649
      }
    },
    {
      "id": 5650,
      "type_id": 35,
      "from_id": 145,
      "to_id": 5646
    },
    {
      "id": 5651,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 5650,
      "value": {
        "id": 1236,
        "value": "Header",
        "link_id": 5651
      }
    },
    {
      "id": 1926,
      "type_id": 3,
      "from_id": 1920,
      "to_id": 1915,
      "value": {
        "id": 733,
        "value": "TypedCount",
        "link_id": 1926
      }
    },
    {
      "id": 1927,
      "type_id": 3,
      "from_id": 1920,
      "to_id": 1916,
      "value": {
        "id": 734,
        "value": "FromCount",
        "link_id": 1927
      }
    },
    {
      "id": 1928,
      "type_id": 3,
      "from_id": 1920,
      "to_id": 1918,
      "value": {
        "id": 735,
        "value": "HandleDelete",
        "link_id": 1928
      }
    },
    {
      "id": 1929,
      "type_id": 3,
      "from_id": 1920,
      "to_id": 1912,
      "value": {
        "id": 736,
        "value": "DeleteHandler",
        "link_id": 1929
      }
    },
    {
      "id": 1930,
      "type_id": 3,
      "from_id": 1920,
      "to_id": 1911,
      "value": {
        "id": 737,
        "value": "onDelete",
        "link_id": 1930
      }
    },
    {
      "id": 1934,
      "type_id": 3,
      "from_id": 1920,
      "to_id": 1917,
      "value": {
        "id": 741,
        "value": "Semantic",
        "link_id": 1934
      }
    },
    {
      "id": 2011,
      "type_id": 16,
      "from_id": 1454,
      "to_id": 1665
    },
    {
      "id": 2012,
      "type_id": 3,
      "from_id": 1454,
      "to_id": 2011,
      "value": {
        "id": 745,
        "value": "ruleInclude1665",
        "link_id": 2012
      }
    },
    {
      "id": 2013,
      "type_id": 70,
      "from_id": 2011,
      "to_id": 67
    },
    {
      "id": 2014,
      "type_id": 3,
      "from_id": 1454,
      "to_id": 2013,
      "value": {
        "id": 746,
        "value": "ruleTree1665",
        "link_id": 2014
      }
    },
    {
      "id": 2015,
      "type_id": 16,
      "from_id": 1453,
      "to_id": 1665
    },
    {
      "id": 2016,
      "type_id": 3,
      "from_id": 1453,
      "to_id": 2015,
      "value": {
        "id": 747,
        "value": "include1665",
        "link_id": 2016
      }
    },
    {
      "id": 2017,
      "type_id": 70,
      "from_id": 2015,
      "to_id": 1120
    },
    {
      "id": 2018,
      "type_id": 3,
      "from_id": 1453,
      "to_id": 2017,
      "value": {
        "id": 748,
        "value": "tree1665",
        "link_id": 2018
      }
    },
    {
      "id": 2019,
      "type_id": 104,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 2020,
      "type_id": 3,
      "from_id": 1468,
      "to_id": 2019,
      "value": {
        "id": 749,
        "value": "route1665",
        "link_id": 2020
      }
    },
    {
      "id": 2021,
      "type_id": 108,
      "from_id": 2019,
      "to_id": 1476
    },
    {
      "id": 2022,
      "type_id": 3,
      "from_id": 1468,
      "to_id": 2021,
      "value": {
        "id": 750,
        "value": "handle1665",
        "link_id": 2022
      }
    },
    {
      "id": 2023,
      "type_id": 106,
      "from_id": 2019,
      "to_id": 1468,
      "value": {
        "id": 752,
        "value": "/packages/deep-foundation/telegram-bot/1665",
        "link_id": 2023
      }
    },
    {
      "id": 2024,
      "type_id": 3,
      "from_id": 1468,
      "to_id": 2023,
      "value": {
        "id": 751,
        "value": "use1665",
        "link_id": 2024
      }
    },
    {
      "id": 2586,
      "type_id": 2,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 777,
        "value": "@deep-foundation/perception-links",
        "link_id": 2586
      }
    },
    {
      "id": 2608,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 2607,
      "value": {
        "id": 779,
        "value": "History",
        "link_id": 2608
      }
    },
    {
      "id": 2609,
      "type_id": 146,
      "from_id": 2607,
      "to_id": 2607,
      "value": {
        "id": 781,
        "value": "⏱️",
        "link_id": 2609
      }
    },
    {
      "id": 2610,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 2609,
      "value": {
        "id": 782,
        "value": "historySymbol",
        "link_id": 2610
      }
    },
    {
      "id": 5258,
      "type_id": 1,
      "from_id": 35,
      "to_id": 35
    },
    {
      "id": 5259,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 5258,
      "value": {
        "id": 1150,
        "value": "Compatable",
        "link_id": 5259
      }
    },
    {
      "id": 2619,
      "type_id": 4,
      "from_id": 2607,
      "to_id": 5
    },
    {
      "id": 2620,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 2619,
      "value": {
        "id": 786,
        "value": "historyValue",
        "link_id": 2620
      }
    },
    {
      "id": 2624,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 2621,
      "value": {
        "id": 783,
        "value": "HistoryHandler",
        "link_id": 2624
      }
    },
    {
      "id": 2621,
      "type_id": 1,
      "from_id": 2607,
      "to_id": 35
    },
    {
      "id": 2635,
      "type_id": 146,
      "from_id": 2621,
      "to_id": 2621,
      "value": {
        "id": 784,
        "value": "👁️",
        "link_id": 2635
      }
    },
    {
      "id": 2636,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 2635,
      "value": {
        "id": 785,
        "value": "viewHistoryHandler",
        "link_id": 2636
      }
    },
    {
      "id": 2637,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 815,
        "value": "async ({ deep, data, Go, require }) => {\n  const React = require('react');\n  const c = require('@chakra-ui/react');\n\n  const dpl = '@deep-foundation/perception-links';\n  const dc = '@deep-foundation/core';\n\n  const Stack = deep.idLocal(dpl, 'Stack');\n  const Any = deep.idLocal(dc, 'Any');\n  const Query = deep.idLocal(dc, 'Query');\n  const TreeList = deep.idLocal(dpl, 'TreeList');\n  const TreeLink = deep.idLocal(dpl, 'TreeLink');\n  const TreeQuery = deep.idLocal(dpl, 'TreeQuery');\n  const Menu = deep.idLocal(dpl, 'Menu');\n  const Layer = deep.idLocal(dpl, 'Layer');\n  const Header = deep.idLocal(dpl, 'Header');\n  const History = deep.idLocal(dpl, 'History');\n  const HistoryHandler = deep.idLocal(dpl, 'HistoryHandler');\n\n  interface ColumnI {\n    id: any;\n    handlerId: any;\n    focus?: boolean;\n  }\n\n  const handlers = {\n    [Any]: TreeLink,\n    [Query]: TreeQuery,\n  };\n\n  const getHandlerId = (linkId) => {\n    const l = deep.get(linkId);\n    console.log('getHandlerId', l);\n    return l?.type_id === Query ? TreeList : TreeLink;\n  }\n\n  function useStore(queryField, defaultValue) {\n    // return (queryField ? Go.useQueryStore(queryField, defaultValue) : React.useState(defaultValue));\n    return React.useState(defaultValue);\n  }\n\n  return ({\n    go,\n\n    using = false,\n    queryField = '',\n    saveHistory = false,\n    fullWidth = null,\n    initialId = deep.linkId,\n    initialHandlerId,\n    startProps = {},\n  }, ref) => {\n    const initialColumns = React.useMemo(() => {\n      if (!initialId) return [];\n      return [[initialId, initialHandlerId || getHandlerId(initialId)]]\n    }, []);\n    const [columns, setColumns] = useStore(queryField, initialColumns);\n    // const [test, setTest] = go.useQueryStore('test', 0);\n    \n    const Item = React.useCallback(({ link, isActive, ...props }) => {\n      const go = Go.useGo();\n      return <>\n        {!!saveHistory && !!isActive && <go.Save handlerId={link.handlerId}/>}\n        <go.Handler linkId={link.id} handlerId={link.handlerId}\n          isActive={isActive} fullWidth={fullWidth} saveHistory={saveHistory}\n          {...props}\n        />\n      </>;\n    }, [saveHistory, fullWidth]);\n    console.log({ columns });\n\n    const { data: list, ids } = React.useMemo(() => {\n      const ids = [];\n      const data = columns.map(c => {\n        ids.push(c[0]);\n        return { id: c[0], handlerId: c[1] };\n      });\n      return { data, ids };\n    }, [columns]);\n\n    const [concentrate, setConcentrate] = React.useState();\n    const { ids: concentrated } = deep.useSearch(concentrate, {\n      db: false, sort: false,\n      query: { id: { _in: ids } },\n      skip: !!concentrate,\n    });\n\n    return <go.On do={{\n      focus: (g,v,linkId,o) => {\n        !go.value && go.focus(Stack);\n        o?.id && go.do('open', o);\n      },\n      use: (g,v,o) => go(Stack).do('use',o),\n      open: (g,v,{ id, prevId, handlerId, focus } = {}) => {\n        if (!id) throw new Error(`open options must contains id ({ id, prevId?, handlerId? })`);\n        const founded = columns.find(c => c[0] === id);\n        const _prevId = prevId || columns[columns.length - 1][0];\n        if (founded) go.do('use',{ id });\n        else {\n          const prevI = columns.findIndex(c => c[0] === _prevId);\n          setColumns([\n            ...(!!~prevI ? columns.slice(0, prevI+1) : []),\n            [id, handlerId || getHandlerId(id)],\n            ...(!!~prevI ? columns.slice(prevI+1) : []),\n          ]);\n        }\n        if (focus) go(Stack).awaitRef(id).then(g => go(Stack).focus(id).go(id).scroll());\n      },\n      close: (g,v,o) => {\n        if (!o.id) throw new Error(`close options must contains id ({ id })`);\n        setColumns(columns.filter(c => c[0] !== o.id));\n      },\n      concentrate: (g,v,o) => {\n        setConcentrate(o?.value);\n      },\n    }}>\n      <go.Provider linkId={Stack}>\n        <go.Component path={[dpl, 'Stack']} concentrated={!!concentrate && concentrated} links={list} direction='horizontal' Item={Item} using={using} saveHistory={saveHistory} startProps={startProps}/>\n      </go.Provider>\n    </go.On>;\n  };\n}",
        "link_id": 2637
      }
    },
    {
      "id": 2638,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 2637,
      "value": {
        "id": 787,
        "value": "TreeComponent",
        "link_id": 2638
      }
    },
    {
      "id": 2639,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 789,
        "value": "({ deep, data, require, Go }) => {\n  const { MdEdit, MdPreview, MdSaveAlt } = require(\"react-icons/md\");\n  const React = require('react');\n\n  const {\n    TypedIcon, DownIcon, UpIcon, TypeIcon, InIcon, OutIcon, FromIcon, ToIcon,\n  } = require('@deep-foundation/perception-app');\n\n  const c = require('@chakra-ui/react');\n\n  const dpl = '@deep-foundation/perception-links';\n  const dc = '@deep-foundation/core';\n\n  const Stack = deep.idLocal(dpl, 'Stack');\n  const Selector = deep.idLocal(dc, 'Selector');\n  const Promise = deep.idLocal(dc, 'Promise');\n  const Rejected = deep.idLocal(dc, 'Rejected');\n  const promiseTree = deep.idLocal(dc, 'promiseTree');\n  const Value = deep.idLocal(dc, 'Value');\n  const String = deep.idLocal(dc, 'String');\n  const Number = deep.idLocal(dc, 'Number');\n  const Object = deep.idLocal(dc, 'Object');\n  const File = deep.idLocal(dc, 'File');\n  const Query = deep.idLocal(dc, 'Query');\n  const Contain = deep.idLocal(dc, 'Contain');\n  const History = deep.idLocal(dpl, 'History');\n  const Header = deep.idLocal(dpl, 'Header');\n  const TreeLink = deep.idLocal(dpl, 'TreeLink');\n  const TreeList = deep.idLocal(dpl, 'TreeList');\n  const TreeEditor = deep.idLocal(dpl, 'TreeEditor');\n  const TreeQuery = deep.idLocal(dpl, 'TreeQuery');\n  const TreeLinkInsert = deep.idLocal(dpl, 'TreeLinkInsert');\n  const TreeLinkDelete = deep.idLocal(dpl, 'TreeLinkDelete');\n  const TreeLinkButton = deep.idLocal(dpl, 'TreeLinkButton');\n\n  return ({\n    go,\n    handlerId,\n\n    isActive,\n    isConcentrated,\n\n    operations = true,\n    fullWidth = null,\n  }, ref) => {\n    const valueType = React.useMemo(() => go.link?.type?.outByType[Value]?.[0]?.to_id, [go]);\n    \n    const fromDisclosure = c.useDisclosure();\n    const toDisclosure = c.useDisclosure();\n\n    const queries = React.useMemo(() => ({\n      'parents': ({ out: { type_id: Contain, to_id: go.linkId }, order_by: { id: 'desc' } }),\n      'contains': ({ in: { type_id: Contain, from_id: go.linkId }, order_by: { id: 'desc' } }),\n      'out': ({ from_id: go.linkId, order_by: { id: 'desc' } }),\n      'typed': ({ type_id: go.linkId, order_by: { id: 'desc' } }),\n      'in': ({ to_id: go.linkId, order_by: { id: 'desc' } }),\n      'selectors': ({ type_id: Selector, selected: { item_id: { _eq: go.linkId } }, order_by: { id: 'desc' } }),\n      'selected': ({ selected: { selector_id: { _eq: go.linkId } }, order_by: { id: 'desc' } }),\n      'promises': ({ type_id: Promise, up: { tree_id: { _eq: promiseTree }, parent_id: { _eq: go.linkId } }, order_by: { id: 'desc' } }),\n      'rejects': ({ type_id: Rejected, up: { tree_id: { _eq: promiseTree }, parent_id: { _eq: go.linkId } }, order_by: { id: 'desc' } }),\n    }), []);\n\n    const [query, setQuery] = React.useState(null);\n    const { data: links } = deep.useQuery(query || {}, { skip: !query });\n    // const [links, setLinks] = React.useState([]);\n    // React.useEffect(() => setLinks([]), [query]);\n\n    const column = <c.VStack\n      position='relative' minW={fullWidth || '30em'} maxW={fullWidth || '30em'} h='100%' spacing={1}\n      bg={isActive ? 'deepBgDark' : null}\n    >\n      <c.Flex w='100%'>\n        <go.Handler\n          handlerId={TreeLinkButton} linkId={go.linkId} flex='1'\n          onClick={() => go.focus('current').go.do('exec')}\n          needParent={false} isActive={go.value === 'current'}\n        />\n        <c.Button\n          minW='3e,' w='3em' h='100%' minH='3em' p='0'\n          onClick={() => go.focus('close').go.do('close')}\n          variant={go.value === 'close' ? 'active' : null}\n        >x</c.Button>\n      </c.Flex>\n      <c.SimpleGrid spacing={1} w='100%' columns={2 + (operations ? 2 : 0)}>\n        <c.Button\n          variant={go.value === 'parents' ? 'active' : null}\n          justifyContent='center'\n          onClick={() => go.focus('parents').go.do('parents')}\n        >\n          <c.Text pr={1}>🗂️</c.Text> parents\n        </c.Button>\n        <c.Button\n          variant={go.value === 'contains' ? 'active' : null}\n          justifyContent='center'\n          onClick={() => go.focus('contains').go.do('contains')}\n        >\n          <c.Text pr={1}>🗂️</c.Text> contains\n        </c.Button>\n        {operations && <>\n          <go.Provider linkId={TreeLinkInsert}>\n            <go.Handler\n              isActive={go.value === 'insert' ? go.ref : null}\n              handlerId={TreeLinkInsert}\n              defaultContainerId={go.linkId} defaultTypeId={1}\n            />\n          </go.Provider>\n          <go.Provider linkId={TreeLinkDelete}>\n            <go.Handler\n              isActive={go.value === 'delete' ? go.ref : null}\n              handlerId={TreeLinkDelete}\n              linkId={go.linkId}\n            />\n          </go.Provider>\n        </>}\n      </c.SimpleGrid>\n      {(!!go.link.type_id === 1 || !!go.link.from_id) && <go.Component path={[dpl, 'Finder']}\n        disclosure={fromDisclosure} initialId={go.link.from_id} initialHandlerId={TreeList}\n        onSubmit={(id) => {\n          deep.update(go.linkId, { from_id: id });\n          fromDisclosure.onClose();\n        }}\n      />}\n      {(!!go.link.type_id === 1 || !!go.link.to_id) && <go.Component path={[dpl, 'Finder']}\n        disclosure={toDisclosure} initialId={go.link.to_id} initialHandlerId={TreeList}\n        onSubmit={(id) => {\n          deep.update(go.linkId, { to_id: id });\n          toDisclosure.onClose();\n        }}\n      />}\n      {[<go.Query key={`${fromDisclosure.isOpen}${toDisclosure.isOpen}`} query={{ id: go.linkId }}/>]}\n      <c.SimpleGrid spacing={1} w='100%' columns={3}>\n        <c.Flex>\n          <c.Button\n            variant={go.value === 'edit-from' ? 'active' : undefined}\n            justifyContent='right' textAlign='right' h='3em' disabled={!go.link?.from_id}\n            onClick={() => go.focus('edit-from').go.do('edit-from')}\n          ><c.Box>\n              <MdEdit />\n            </c.Box></c.Button>\n          <c.Button\n            variant={go.value === 'from' ? 'active' : undefined}\n            justifyContent='right' textAlign='right'\n            flex='1' h='3em'\n            onClick={() => go.focus('from').go.do('from')}\n            rightIcon={<FromIcon />}\n            overflow='hidden'\n          ><c.Box>\n              <c.Text>from</c.Text>\n              <c.Box><c.Text fontSize='xs'>{go.link?.from?.symbol} {!!go.link?.from && go.link.from.name} {go.link?.from_id}</c.Text></c.Box>\n            </c.Box></c.Button>\n        </c.Flex>\n        <c.Button\n          variant={go.value === 'type' ? 'active' : undefined}\n          disabled={!go.link?.type_id} leftIcon={<TypeIcon />}\n          onClick={() => go.focus('type').go.do('type')}\n          h='3em' overflow='hidden'\n        ><c.Box>\n            <c.Text>type</c.Text>\n            <c.Box><c.Text fontSize='xs'>{go.link?.type?.symbol} {!!go.link?.type && go.link.type.name} {go.link?.type_id}</c.Text></c.Box>\n          </c.Box></c.Button>\n        <c.Flex>\n          <c.Button\n            variant={go.value === 'to' ? 'active' : undefined}\n            justifyContent='left' textAlign='left' flex='1' h='3em' rightIcon={<ToIcon />}\n            onClick={() => go.focus('to').go.do('to')}\n            overflow='hidden'\n          ><c.Box>\n              <c.Text>to</c.Text>\n              <c.Box><c.Text fontSize='xs'>{go.link?.to?.symbol} {!!go.link?.to && go.link.to.name} {go.link?.to_id}</c.Text></c.Box>\n            </c.Box></c.Button>\n          <c.Button\n            variant={go.value === 'edit-to' ? 'active' : undefined}\n            justifyContent='right' textAlign='right' h='3em' disabled={!go.link?.to_id}\n            onClick={() => go.focus('edit-to').go.do('edit-to')}\n          ><c.Box>\n              <MdEdit />\n            </c.Box></c.Button>\n        </c.Flex>\n      </c.SimpleGrid>\n      <c.SimpleGrid spacing={1} w='100%' columns={5}>\n        <c.Button\n          variant={go.value === 'up-tree' ? 'active' : undefined} justifyContent='center'\n          onClick={() => go.focus('up-tree').go.do('up-tree')}\n          leftIcon={<UpIcon />}\n        >\n          <c.Text>up</c.Text>\n        </c.Button>\n        <c.Button\n          variant={go.value === 'out' ? 'active' : undefined} justifyContent='left' textAlign='left'\n          onClick={() => go.focus('out').go.do('out')}\n          leftIcon={<OutIcon />}\n        >\n          <c.Text>out</c.Text>\n        </c.Button>\n        {/* <IconButton aria-label='typed' icon={<TypedIcon />} /> */}\n        <c.Button\n          variant={go.value === 'typed' ? 'active' : undefined}\n          onClick={() => go.focus('typed').go.do('typed')}\n          leftIcon={<TypedIcon />}\n        >\n          <c.Text>typed</c.Text>\n        </c.Button>\n        <c.Button\n          variant={go.value === 'in' ? 'active' : undefined} justifyContent='right' textAlign='right'\n          onClick={() => go.focus('in').go.do('in')}\n          rightIcon={<InIcon />}\n        >\n          <c.Text>in</c.Text>\n        </c.Button>\n        <c.Button\n          variant={go.value === 'down-tree' ? 'active' : undefined} justifyContent='center'\n          onClick={() => go.focus('down-tree').go.do('down-tree')}\n          leftIcon={<DownIcon />}\n        >\n          <c.Text>down</c.Text>\n        </c.Button>\n      </c.SimpleGrid>\n      <c.SimpleGrid spacing={1} w='100%' columns={4}>\n        <c.Button\n          variant={go.value === 'selectors' ? 'active' : undefined} justifyContent='center'\n          onClick={() => go.focus('selectors').go.do('selectors')}\n        >\n          <c.Text pr={1}>🪡</c.Text> selectors\n        </c.Button>\n        <c.Button\n          variant={go.value === 'selected' ? 'active' : undefined} justifyContent='center'\n          onClick={() => go.focus('selected').go.do('selected')}\n        >\n          <c.Text pr={1}>🪡</c.Text> selected\n        </c.Button>\n        <c.Button\n          variant={go.value === 'promises' ? 'active' : undefined} justifyContent='center'\n          onClick={() => go.focus('promises').go.do('promises')}\n        >\n          <c.Text pr={1}>🤞</c.Text> promises\n        </c.Button>\n        <c.Button\n          variant={go.value === 'rejects' ? 'active' : undefined} justifyContent='center'\n          onClick={() => go.focus('rejects').go.do('rejects')}\n        >\n          <c.Text pr={1}>🔴</c.Text> rejects\n        </c.Button>\n      </c.SimpleGrid>\n      <c.SimpleGrid spacing={1} w='100%'>\n        {!valueType && <>\n          <c.Button\n            variant={go.value === 'value' ? 'active' : undefined} bg={go.value === TreeEditor ? 'deepBgDark' : null} justifyContent='center'\n            disabled\n          >\n            type can't have Value\n          </c.Button>\n        </>}\n        {valueType === String && <>\n          <c.Button\n            variant={go.value === 'value' ? 'active' : undefined} bg={go.value === TreeEditor ? 'deepBgDark' : null} justifyContent='center'\n            onClick={() => go.focus('value').go.do('value')}\n          >\n            <c.Text pr={1}>\"\".length === {go.link?.value?.value?.length || 0}</c.Text> string\n          </c.Button>\n        </>}\n        {valueType === Number && <>\n          <c.Button\n            variant={go.value === 'value' ? 'active' : undefined} bg={go.value === TreeEditor ? 'deepBgDark' : null} justifyContent='center'\n            onClick={() => go.focus('value').go.do('value')}\n          >\n            <c.Text pr={1}>{+go.link?.value?.value}</c.Text> number\n          </c.Button>\n        </>}\n        {valueType === Object && <>\n          <c.Button\n            variant={go.value === 'value' ? 'active' : undefined} bg={go.value === TreeEditor ? 'deepBgDark' : null} justifyContent='center'\n            onClick={() => go.focus('value').go.do('value')}\n          >\n            <c.Text pr={1}>{`{...}`}</c.Text> object\n          </c.Button>\n        </>}\n      </c.SimpleGrid>\n      {go.value === TreeEditor && <c.Box minW={fullWidth || '30em'} maxW={fullWidth || '30em'} flex='1' position='relative'>\n        <go.Handler handlerId={TreeEditor} linkId={go.linkId} fillSize autoFocus />\n      </c.Box>}\n      {!!links?.length && <go.Provider linkId={Stack}>\n        <go.Component path={[dpl, 'Stack']} links={links} direction='vertical' flex='1' />\n      </go.Provider>}\n    </c.VStack>;\n\n    const nav = go.useNav();\n    nav('current', 'left', 'up', 'close', 'contains');\n    \n    if (isConcentrated !== false) {\n      nav('close', 'current', 'up', 'right', 'contains');\n  \n      nav('parents', 'left', 'current', 'contains', 'type');\n      nav('contains', 'parents', 'current', 'insert', 'type');\n      nav('insert', 'contains', 'current', 'delete', 'type');\n      nav('delete', 'insert', 'close', 'right', 'type');\n  \n      nav('edit-from', 'left', 'contains', 'from', 'up-tree');\n      nav('from', 'edit-from', 'contains', 'to', 'out');\n      nav('type', 'from', 'contains', 'to', 'typed');\n      nav('to', 'type', 'contains', 'edit-to', 'in');\n      nav('edit-to', 'to', 'contains', 'right', 'down-tree');\n  \n      nav('up-tree', 'left', 'edit-from', 'out', 'selectors');\n      nav('out', 'up-tree', 'from', 'typed', 'selected');\n      nav('typed', 'out', 'type', 'in', 'promises');\n      nav('in', 'typed', 'to', 'down-tree', 'promises');\n      nav('down-tree', 'in', 'edit-to', 'right', 'rejects');\n  \n      nav('selectors', 'left', 'up-tree', 'selected', 'value');\n      nav('selected', 'selectors', 'out', 'promises', 'value');\n      nav('promises', 'selected', 'in', 'rejects', 'value');\n      nav('rejects', 'promises', 'down-tree', 'right', 'value');\n  \n      nav('value', 'left', 'promises', 'right', Stack);\n  \n      nav(Stack, 'left', 'value', 'right', 'down');\n    }\n\n    const openLink = async (id) => {\n      !!id && go.go.do('open', { handlerId: TreeLink, id: id, prevId: go.linkId })\n      await go.go.await(id);\n      go.go.focus(id);\n    };\n\n    const deconcentrated = <c.Button\n      h='100%' w='3em' pt='1em' variant={isActive ? 'active' : undefined}\n      alignItems='flex-start'\n    >\n      {go?.link?.symbol}\n    </c.Button>\n\n    const content = isConcentrated === false ? deconcentrated : column;\n\n    return <go.On\n      do={{\n        focus: (g, v, linkId, o) => !go.value && go.focus('current'),\n        use: (g, v, o) => o?.id && go.value === Stack ? (go(Stack).do('use', o)) : (go.set('current')),\n        close: (g, v, o) => go.go.do('close', { id: go.linkId }),\n        exec: (g, v, o) => o?.id ? go.go.do('open', { id: o.id, prevId: go.linkId, focus: true }) : go.value && go.do(go.value, o),\n\n        left: (g, v, o) => go.focus(nav.get(go.value || 'current', 'left'), { prev: go.value }),\n        up: (g, v, o) => go.focus(nav.get(go.value || 'current', 'up'), { prev: go.value }),\n        right: (g, v, o) => go.focus(nav.get(go.value || 'current', 'right'), { prev: go.value }),\n        down: (g, v, o) => go.focus(nav.get(go.value || 'current', 'down'), { prev: go.value }),\n\n        'current': () => { },\n        'parents': () => setQuery({ ...queries.parents, limit: 100 }),\n        'contains': () => setQuery({ ...queries.contains, limit: 100 }),\n\n        'edit-from': () => fromDisclosure.onOpen(),\n        'from': () => openLink(go.link.from_id),\n        'type': () => openLink(go.link.type_id),\n        'to': () => openLink(go.link.to_id),\n        'edit-to': () => toDisclosure.onOpen(),\n\n        'up-tree': () => { },\n        'out': () => setQuery({ ...queries.out, limit: 100 }),\n        'typed': () => setQuery({ ...queries.typed, limit: 100 }),\n        'in': () => setQuery({ ...queries.in, limit: 100 }),\n        'down-tree': () => { },\n\n        'selectors': () => setQuery({ ...queries.selectors, limit: 100 }),\n        'selected': () => setQuery({ ...queries.selected, limit: 100 }),\n        'promises': () => setQuery({ ...queries.promises, limit: 100 }),\n        'rejects': () => setQuery({ ...queries.rejects, limit: 100 }),\n\n        'value': () => {\n          setQuery(null);\n          go.focus(go.value === TreeEditor ? 'value' : TreeEditor);\n        },\n\n        [Stack]: (g, v, o) => openLink(o?.id),\n      }}\n      focus={{\n        up: (q, v, o) => go.set().go?.go?.do('up'),\n        down: (q, v, o) => go.set().go?.go?.do('down'),\n        left: (q, v, o) => go.set(o?.left).go?.go?.do('left'),\n        right: (q, v, o) => go.set(o?.right).go?.go?.do('right'),\n      }}\n    >\n      <c.HStack ref={ref} h='100%' overflow='hidden'>\n        {content}\n      </c.HStack>\n      {/* {!!query && <go.Query query={query} onChange={({ data }) => setLinks(data)} />} */}\n    </go.On>\n  };\n}\n",
        "link_id": 2639
      }
    },
    {
      "id": 2640,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 2639,
      "value": {
        "id": 788,
        "value": "TreeLinkComponent",
        "link_id": 2640
      }
    },
    {
      "id": 2643,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 791,
        "value": "({ deep, data, require, Go }) => {\n    const { MdEdit, MdPreview, MdSaveAlt } = require(\"react-icons/md\");\n    const React = require('react');\n    const { TypedIcon, DownIcon, UpIcon, TypeIcon, InIcon, OutIcon, FromIcon, ToIcon, } = require('@deep-foundation/perception-app');\n    const c = require('@chakra-ui/react');\n    const dpl = '@deep-foundation/perception-links';\n    const dc = '@deep-foundation/core';\n    const Stack = deep.idLocal(dpl, 'Stack');\n    const Selector = deep.idLocal(dc, 'Selector');\n    const Promise = deep.idLocal(dc, 'Promise');\n    const Rejected = deep.idLocal(dc, 'Rejected');\n    const promiseTree = deep.idLocal(dc, 'promiseTree');\n    const Value = deep.idLocal(dc, 'Value');\n    const String = deep.idLocal(dc, 'String');\n    const Number = deep.idLocal(dc, 'Number');\n    const Object = deep.idLocal(dc, 'Object');\n    const File = deep.idLocal(dc, 'File');\n    const Query = deep.idLocal(dc, 'Query');\n    const Contain = deep.idLocal(dc, 'Contain');\n    const History = deep.idLocal(dpl, 'History');\n    const Header = deep.idLocal(dpl, 'Header');\n    const TreeLink = deep.idLocal(dpl, 'TreeLink');\n    const TreeList = deep.idLocal(dpl, 'TreeList');\n    const TreeEditor = deep.idLocal(dpl, 'TreeEditor');\n    const TreeQuery = deep.idLocal(dpl, 'TreeQuery');\n    const TreeLinkInsert = deep.idLocal(dpl, 'TreeLinkInsert');\n    const TreeLinkDelete = deep.idLocal(dpl, 'TreeLinkDelete');\n    const TreeLinkButton = deep.idLocal(dpl, 'TreeLinkButton');\n    return ({ go, handlerId, isActive, isConcentrated, operations = true, fullWidth = null, }, ref) => {\n        const valueType = React.useMemo(() => go.link?.type?.outByType[Value]?.[0]?.to_id, [go]);\n        const fromDisclosure = c.useDisclosure();\n        const toDisclosure = c.useDisclosure();\n        const queries = React.useMemo(() => ({\n            'parents': ({ out: { type_id: Contain, to_id: go.linkId }, order_by: { id: 'desc' } }),\n            'contains': ({ in: { type_id: Contain, from_id: go.linkId }, order_by: { id: 'desc' } }),\n            'out': ({ from_id: go.linkId, order_by: { id: 'desc' } }),\n            'typed': ({ type_id: go.linkId, order_by: { id: 'desc' } }),\n            'in': ({ to_id: go.linkId, order_by: { id: 'desc' } }),\n            'selectors': ({ type_id: Selector, selected: { item_id: { _eq: go.linkId } }, order_by: { id: 'desc' } }),\n            'selected': ({ selected: { selector_id: { _eq: go.linkId } }, order_by: { id: 'desc' } }),\n            'promises': ({ type_id: Promise, up: { tree_id: { _eq: promiseTree }, parent_id: { _eq: go.linkId } }, order_by: { id: 'desc' } }),\n            'rejects': ({ type_id: Rejected, up: { tree_id: { _eq: promiseTree }, parent_id: { _eq: go.linkId } }, order_by: { id: 'desc' } }),\n        }), []);\n        const [query, setQuery] = React.useState(null);\n        const { data: links } = deep.useQuery(query || {}, { skip: !query });\n        const column = React.createElement(c.VStack, { position: 'relative', minW: fullWidth || '30em', maxW: fullWidth || '30em', h: '100%', spacing: 1, bg: isActive ? 'deepBgDark' : null },\n            React.createElement(c.Flex, { w: '100%' },\n                React.createElement(go.Handler, { handlerId: TreeLinkButton, linkId: go.linkId, flex: '1', onClick: () => go.focus('current').go.do('exec'), needParent: false, isActive: go.value === 'current' }),\n                React.createElement(c.Button, { minW: '3e,', w: '3em', h: '100%', minH: '3em', p: '0', onClick: () => go.focus('close').go.do('close'), variant: go.value === 'close' ? 'active' : null }, \"x\")),\n            React.createElement(c.SimpleGrid, { spacing: 1, w: '100%', columns: 2 + (operations ? 2 : 0) },\n                React.createElement(c.Button, { variant: go.value === 'parents' ? 'active' : null, justifyContent: 'center', onClick: () => go.focus('parents').go.do('parents') },\n                    React.createElement(c.Text, { pr: 1 }, \"\\uD83D\\uDDC2\\uFE0F\"),\n                    \" parents\"),\n                React.createElement(c.Button, { variant: go.value === 'contains' ? 'active' : null, justifyContent: 'center', onClick: () => go.focus('contains').go.do('contains') },\n                    React.createElement(c.Text, { pr: 1 }, \"\\uD83D\\uDDC2\\uFE0F\"),\n                    \" contains\"),\n                operations && React.createElement(React.Fragment, null,\n                    React.createElement(go.Provider, { linkId: TreeLinkInsert },\n                        React.createElement(go.Handler, { isActive: go.value === 'insert' ? go.ref : null, handlerId: TreeLinkInsert, defaultContainerId: go.linkId, defaultTypeId: 1 })),\n                    React.createElement(go.Provider, { linkId: TreeLinkDelete },\n                        React.createElement(go.Handler, { isActive: go.value === 'delete' ? go.ref : null, handlerId: TreeLinkDelete, linkId: go.linkId })))),\n            (!!go.link.type_id === 1 || !!go.link.from_id) && React.createElement(go.Component, { path: [dpl, 'Finder'], disclosure: fromDisclosure, initialId: go.link.from_id, initialHandlerId: TreeList, onSubmit: (id) => {\n                    deep.update(go.linkId, { from_id: id });\n                    fromDisclosure.onClose();\n                } }),\n            (!!go.link.type_id === 1 || !!go.link.to_id) && React.createElement(go.Component, { path: [dpl, 'Finder'], disclosure: toDisclosure, initialId: go.link.to_id, initialHandlerId: TreeList, onSubmit: (id) => {\n                    deep.update(go.linkId, { to_id: id });\n                    toDisclosure.onClose();\n                } }),\n            [React.createElement(go.Query, { key: `${fromDisclosure.isOpen}${toDisclosure.isOpen}`, query: { id: go.linkId } })],\n            React.createElement(c.SimpleGrid, { spacing: 1, w: '100%', columns: 3 },\n                React.createElement(c.Flex, null,\n                    React.createElement(c.Button, { variant: go.value === 'edit-from' ? 'active' : undefined, justifyContent: 'right', textAlign: 'right', h: '3em', disabled: !go.link?.from_id, onClick: () => go.focus('edit-from').go.do('edit-from') },\n                        React.createElement(c.Box, null,\n                            React.createElement(MdEdit, null))),\n                    React.createElement(c.Button, { variant: go.value === 'from' ? 'active' : undefined, justifyContent: 'right', textAlign: 'right', flex: '1', h: '3em', onClick: () => go.focus('from').go.do('from'), rightIcon: React.createElement(FromIcon, null), overflow: 'hidden' },\n                        React.createElement(c.Box, null,\n                            React.createElement(c.Text, null, \"from\"),\n                            React.createElement(c.Box, null,\n                                React.createElement(c.Text, { fontSize: 'xs' },\n                                    go.link?.from?.symbol,\n                                    \" \",\n                                    !!go.link?.from && go.link.from.name,\n                                    \" \",\n                                    go.link?.from_id))))),\n                React.createElement(c.Button, { variant: go.value === 'type' ? 'active' : undefined, disabled: !go.link?.type_id, leftIcon: React.createElement(TypeIcon, null), onClick: () => go.focus('type').go.do('type'), h: '3em', overflow: 'hidden' },\n                    React.createElement(c.Box, null,\n                        React.createElement(c.Text, null, \"type\"),\n                        React.createElement(c.Box, null,\n                            React.createElement(c.Text, { fontSize: 'xs' },\n                                go.link?.type?.symbol,\n                                \" \",\n                                !!go.link?.type && go.link.type.name,\n                                \" \",\n                                go.link?.type_id)))),\n                React.createElement(c.Flex, null,\n                    React.createElement(c.Button, { variant: go.value === 'to' ? 'active' : undefined, justifyContent: 'left', textAlign: 'left', flex: '1', h: '3em', rightIcon: React.createElement(ToIcon, null), onClick: () => go.focus('to').go.do('to'), overflow: 'hidden' },\n                        React.createElement(c.Box, null,\n                            React.createElement(c.Text, null, \"to\"),\n                            React.createElement(c.Box, null,\n                                React.createElement(c.Text, { fontSize: 'xs' },\n                                    go.link?.to?.symbol,\n                                    \" \",\n                                    !!go.link?.to && go.link.to.name,\n                                    \" \",\n                                    go.link?.to_id)))),\n                    React.createElement(c.Button, { variant: go.value === 'edit-to' ? 'active' : undefined, justifyContent: 'right', textAlign: 'right', h: '3em', disabled: !go.link?.to_id, onClick: () => go.focus('edit-to').go.do('edit-to') },\n                        React.createElement(c.Box, null,\n                            React.createElement(MdEdit, null))))),\n            React.createElement(c.SimpleGrid, { spacing: 1, w: '100%', columns: 5 },\n                React.createElement(c.Button, { variant: go.value === 'up-tree' ? 'active' : undefined, justifyContent: 'center', onClick: () => go.focus('up-tree').go.do('up-tree'), leftIcon: React.createElement(UpIcon, null) },\n                    React.createElement(c.Text, null, \"up\")),\n                React.createElement(c.Button, { variant: go.value === 'out' ? 'active' : undefined, justifyContent: 'left', textAlign: 'left', onClick: () => go.focus('out').go.do('out'), leftIcon: React.createElement(OutIcon, null) },\n                    React.createElement(c.Text, null, \"out\")),\n                React.createElement(c.Button, { variant: go.value === 'typed' ? 'active' : undefined, onClick: () => go.focus('typed').go.do('typed'), leftIcon: React.createElement(TypedIcon, null) },\n                    React.createElement(c.Text, null, \"typed\")),\n                React.createElement(c.Button, { variant: go.value === 'in' ? 'active' : undefined, justifyContent: 'right', textAlign: 'right', onClick: () => go.focus('in').go.do('in'), rightIcon: React.createElement(InIcon, null) },\n                    React.createElement(c.Text, null, \"in\")),\n                React.createElement(c.Button, { variant: go.value === 'down-tree' ? 'active' : undefined, justifyContent: 'center', onClick: () => go.focus('down-tree').go.do('down-tree'), leftIcon: React.createElement(DownIcon, null) },\n                    React.createElement(c.Text, null, \"down\"))),\n            React.createElement(c.SimpleGrid, { spacing: 1, w: '100%', columns: 4 },\n                React.createElement(c.Button, { variant: go.value === 'selectors' ? 'active' : undefined, justifyContent: 'center', onClick: () => go.focus('selectors').go.do('selectors') },\n                    React.createElement(c.Text, { pr: 1 }, \"\\uD83E\\uDEA1\"),\n                    \" selectors\"),\n                React.createElement(c.Button, { variant: go.value === 'selected' ? 'active' : undefined, justifyContent: 'center', onClick: () => go.focus('selected').go.do('selected') },\n                    React.createElement(c.Text, { pr: 1 }, \"\\uD83E\\uDEA1\"),\n                    \" selected\"),\n                React.createElement(c.Button, { variant: go.value === 'promises' ? 'active' : undefined, justifyContent: 'center', onClick: () => go.focus('promises').go.do('promises') },\n                    React.createElement(c.Text, { pr: 1 }, \"\\uD83E\\uDD1E\"),\n                    \" promises\"),\n                React.createElement(c.Button, { variant: go.value === 'rejects' ? 'active' : undefined, justifyContent: 'center', onClick: () => go.focus('rejects').go.do('rejects') },\n                    React.createElement(c.Text, { pr: 1 }, \"\\uD83D\\uDD34\"),\n                    \" rejects\")),\n            React.createElement(c.SimpleGrid, { spacing: 1, w: '100%' },\n                !valueType && React.createElement(React.Fragment, null,\n                    React.createElement(c.Button, { variant: go.value === 'value' ? 'active' : undefined, bg: go.value === TreeEditor ? 'deepBgDark' : null, justifyContent: 'center', disabled: true }, \"type can't have Value\")),\n                valueType === String && React.createElement(React.Fragment, null,\n                    React.createElement(c.Button, { variant: go.value === 'value' ? 'active' : undefined, bg: go.value === TreeEditor ? 'deepBgDark' : null, justifyContent: 'center', onClick: () => go.focus('value').go.do('value') },\n                        React.createElement(c.Text, { pr: 1 },\n                            \"\\\"\\\".length === \",\n                            go.link?.value?.value?.length || 0),\n                        \" string\")),\n                valueType === Number && React.createElement(React.Fragment, null,\n                    React.createElement(c.Button, { variant: go.value === 'value' ? 'active' : undefined, bg: go.value === TreeEditor ? 'deepBgDark' : null, justifyContent: 'center', onClick: () => go.focus('value').go.do('value') },\n                        React.createElement(c.Text, { pr: 1 }, +go.link?.value?.value),\n                        \" number\")),\n                valueType === Object && React.createElement(React.Fragment, null,\n                    React.createElement(c.Button, { variant: go.value === 'value' ? 'active' : undefined, bg: go.value === TreeEditor ? 'deepBgDark' : null, justifyContent: 'center', onClick: () => go.focus('value').go.do('value') },\n                        React.createElement(c.Text, { pr: 1 }, `{...}`),\n                        \" object\"))),\n            go.value === TreeEditor && React.createElement(c.Box, { minW: fullWidth || '30em', maxW: fullWidth || '30em', flex: '1', position: 'relative' },\n                React.createElement(go.Handler, { handlerId: TreeEditor, linkId: go.linkId, fillSize: true, autoFocus: true })),\n            !!links?.length && React.createElement(go.Provider, { linkId: Stack },\n                React.createElement(go.Component, { path: [dpl, 'Stack'], links: links, direction: 'vertical', flex: '1' })));\n        const nav = go.useNav();\n        nav('current', 'left', 'up', 'close', 'contains');\n        if (isConcentrated !== false) {\n            nav('close', 'current', 'up', 'right', 'contains');\n            nav('parents', 'left', 'current', 'contains', 'type');\n            nav('contains', 'parents', 'current', 'insert', 'type');\n            nav('insert', 'contains', 'current', 'delete', 'type');\n            nav('delete', 'insert', 'close', 'right', 'type');\n            nav('edit-from', 'left', 'contains', 'from', 'up-tree');\n            nav('from', 'edit-from', 'contains', 'to', 'out');\n            nav('type', 'from', 'contains', 'to', 'typed');\n            nav('to', 'type', 'contains', 'edit-to', 'in');\n            nav('edit-to', 'to', 'contains', 'right', 'down-tree');\n            nav('up-tree', 'left', 'edit-from', 'out', 'selectors');\n            nav('out', 'up-tree', 'from', 'typed', 'selected');\n            nav('typed', 'out', 'type', 'in', 'promises');\n            nav('in', 'typed', 'to', 'down-tree', 'promises');\n            nav('down-tree', 'in', 'edit-to', 'right', 'rejects');\n            nav('selectors', 'left', 'up-tree', 'selected', 'value');\n            nav('selected', 'selectors', 'out', 'promises', 'value');\n            nav('promises', 'selected', 'in', 'rejects', 'value');\n            nav('rejects', 'promises', 'down-tree', 'right', 'value');\n            nav('value', 'left', 'promises', 'right', Stack);\n            nav(Stack, 'left', 'value', 'right', 'down');\n        }\n        const openLink = async (id) => {\n            !!id && go.go.do('open', { handlerId: TreeLink, id: id, prevId: go.linkId });\n            await go.go.await(id);\n            go.go.focus(id);\n        };\n        const deconcentrated = React.createElement(c.Button, { h: '100%', w: '3em', pt: '1em', variant: isActive ? 'active' : undefined, alignItems: 'flex-start' }, go?.link?.symbol);\n        const content = isConcentrated === false ? deconcentrated : column;\n        return React.createElement(go.On, { do: {\n                focus: (g, v, linkId, o) => !go.value && go.focus('current'),\n                use: (g, v, o) => o?.id && go.value === Stack ? (go(Stack).do('use', o)) : (go.set('current')),\n                close: (g, v, o) => go.go.do('close', { id: go.linkId }),\n                exec: (g, v, o) => o?.id ? go.go.do('open', { id: o.id, prevId: go.linkId, focus: true }) : go.value && go.do(go.value, o),\n                left: (g, v, o) => go.focus(nav.get(go.value || 'current', 'left'), { prev: go.value }),\n                up: (g, v, o) => go.focus(nav.get(go.value || 'current', 'up'), { prev: go.value }),\n                right: (g, v, o) => go.focus(nav.get(go.value || 'current', 'right'), { prev: go.value }),\n                down: (g, v, o) => go.focus(nav.get(go.value || 'current', 'down'), { prev: go.value }),\n                'current': () => { },\n                'parents': () => setQuery({ ...queries.parents, limit: 100 }),\n                'contains': () => setQuery({ ...queries.contains, limit: 100 }),\n                'edit-from': () => fromDisclosure.onOpen(),\n                'from': () => openLink(go.link.from_id),\n                'type': () => openLink(go.link.type_id),\n                'to': () => openLink(go.link.to_id),\n                'edit-to': () => toDisclosure.onOpen(),\n                'up-tree': () => { },\n                'out': () => setQuery({ ...queries.out, limit: 100 }),\n                'typed': () => setQuery({ ...queries.typed, limit: 100 }),\n                'in': () => setQuery({ ...queries.in, limit: 100 }),\n                'down-tree': () => { },\n                'selectors': () => setQuery({ ...queries.selectors, limit: 100 }),\n                'selected': () => setQuery({ ...queries.selected, limit: 100 }),\n                'promises': () => setQuery({ ...queries.promises, limit: 100 }),\n                'rejects': () => setQuery({ ...queries.rejects, limit: 100 }),\n                'value': () => {\n                    setQuery(null);\n                    go.focus(go.value === TreeEditor ? 'value' : TreeEditor);\n                },\n                [Stack]: (g, v, o) => openLink(o?.id),\n            }, focus: {\n                up: (q, v, o) => go.set().go?.go?.do('up'),\n                down: (q, v, o) => go.set().go?.go?.do('down'),\n                left: (q, v, o) => go.set(o?.left).go?.go?.do('left'),\n                right: (q, v, o) => go.set(o?.right).go?.go?.do('right'),\n            } },\n            React.createElement(c.HStack, { ref: ref, h: '100%', overflow: 'hidden' }, content));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxDQUFDLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRTtJQUM5QixNQUFNLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztJQUNuRSxNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7SUFFL0IsTUFBTSxFQUNKLFNBQVMsRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLEdBQ3pFLEdBQUcsT0FBTyxDQUFDLGlDQUFpQyxDQUFDLENBQUM7SUFFL0MsTUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLGtCQUFrQixDQUFDLENBQUM7SUFFdEMsTUFBTSxHQUFHLEdBQUcsbUNBQW1DLENBQUM7SUFDaEQsTUFBTSxFQUFFLEdBQUcsdUJBQXVCLENBQUM7SUFFbkMsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDekMsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsVUFBVSxDQUFDLENBQUM7SUFDOUMsTUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsU0FBUyxDQUFDLENBQUM7SUFDNUMsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsVUFBVSxDQUFDLENBQUM7SUFDOUMsTUFBTSxXQUFXLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsYUFBYSxDQUFDLENBQUM7SUFDcEQsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDeEMsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsUUFBUSxDQUFDLENBQUM7SUFDMUMsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsUUFBUSxDQUFDLENBQUM7SUFDMUMsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsUUFBUSxDQUFDLENBQUM7SUFDMUMsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDdEMsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDeEMsTUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsU0FBUyxDQUFDLENBQUM7SUFDNUMsTUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsU0FBUyxDQUFDLENBQUM7SUFDN0MsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsUUFBUSxDQUFDLENBQUM7SUFDM0MsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsVUFBVSxDQUFDLENBQUM7SUFDL0MsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsVUFBVSxDQUFDLENBQUM7SUFDL0MsTUFBTSxVQUFVLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsWUFBWSxDQUFDLENBQUM7SUFDbkQsTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsV0FBVyxDQUFDLENBQUM7SUFDakQsTUFBTSxjQUFjLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQztJQUMzRCxNQUFNLGNBQWMsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxnQkFBZ0IsQ0FBQyxDQUFDO0lBQzNELE1BQU0sY0FBYyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLGdCQUFnQixDQUFDLENBQUM7SUFFM0QsT0FBTyxDQUFDLEVBQ04sRUFBRSxFQUNGLFNBQVMsRUFFVCxRQUFRLEVBQ1IsY0FBYyxFQUVkLFVBQVUsR0FBRyxJQUFJLEVBQ2pCLFNBQVMsR0FBRyxJQUFJLEdBQ2pCLEVBQUUsR0FBRyxFQUFFLEVBQUU7UUFDUixNQUFNLFNBQVMsR0FBRyxLQUFLLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLFNBQVMsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFFekYsTUFBTSxjQUFjLEdBQUcsQ0FBQyxDQUFDLGFBQWEsRUFBRSxDQUFDO1FBQ3pDLE1BQU0sWUFBWSxHQUFHLENBQUMsQ0FBQyxhQUFhLEVBQUUsQ0FBQztRQUV2QyxNQUFNLE9BQU8sR0FBRyxLQUFLLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUM7WUFDbkMsU0FBUyxFQUFFLENBQUMsRUFBRSxHQUFHLEVBQUUsRUFBRSxPQUFPLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxFQUFFLENBQUMsTUFBTSxFQUFFLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBRSxFQUFFLE1BQU0sRUFBRSxFQUFFLENBQUM7WUFDdEYsVUFBVSxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRSxFQUFFLENBQUMsTUFBTSxFQUFFLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBRSxFQUFFLE1BQU0sRUFBRSxFQUFFLENBQUM7WUFDeEYsS0FBSyxFQUFFLENBQUMsRUFBRSxPQUFPLEVBQUUsRUFBRSxDQUFDLE1BQU0sRUFBRSxRQUFRLEVBQUUsRUFBRSxFQUFFLEVBQUUsTUFBTSxFQUFFLEVBQUUsQ0FBQztZQUN6RCxPQUFPLEVBQUUsQ0FBQyxFQUFFLE9BQU8sRUFBRSxFQUFFLENBQUMsTUFBTSxFQUFFLFFBQVEsRUFBRSxFQUFFLEVBQUUsRUFBRSxNQUFNLEVBQUUsRUFBRSxDQUFDO1lBQzNELElBQUksRUFBRSxDQUFDLEVBQUUsS0FBSyxFQUFFLEVBQUUsQ0FBQyxNQUFNLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBRSxFQUFFLE1BQU0sRUFBRSxFQUFFLENBQUM7WUFDdEQsV0FBVyxFQUFFLENBQUMsRUFBRSxPQUFPLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxFQUFFLE9BQU8sRUFBRSxFQUFFLEdBQUcsRUFBRSxFQUFFLENBQUMsTUFBTSxFQUFFLEVBQUUsRUFBRSxRQUFRLEVBQUUsRUFBRSxFQUFFLEVBQUUsTUFBTSxFQUFFLEVBQUUsQ0FBQztZQUN6RyxVQUFVLEVBQUUsQ0FBQyxFQUFFLFFBQVEsRUFBRSxFQUFFLFdBQVcsRUFBRSxFQUFFLEdBQUcsRUFBRSxFQUFFLENBQUMsTUFBTSxFQUFFLEVBQUUsRUFBRSxRQUFRLEVBQUUsRUFBRSxFQUFFLEVBQUUsTUFBTSxFQUFFLEVBQUUsQ0FBQztZQUN6RixVQUFVLEVBQUUsQ0FBQyxFQUFFLE9BQU8sRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQUUsT0FBTyxFQUFFLEVBQUUsR0FBRyxFQUFFLFdBQVcsRUFBRSxFQUFFLFNBQVMsRUFBRSxFQUFFLEdBQUcsRUFBRSxFQUFFLENBQUMsTUFBTSxFQUFFLEVBQUUsRUFBRSxRQUFRLEVBQUUsRUFBRSxFQUFFLEVBQUUsTUFBTSxFQUFFLEVBQUUsQ0FBQztZQUNsSSxTQUFTLEVBQUUsQ0FBQyxFQUFFLE9BQU8sRUFBRSxRQUFRLEVBQUUsRUFBRSxFQUFFLEVBQUUsT0FBTyxFQUFFLEVBQUUsR0FBRyxFQUFFLFdBQVcsRUFBRSxFQUFFLFNBQVMsRUFBRSxFQUFFLEdBQUcsRUFBRSxFQUFFLENBQUMsTUFBTSxFQUFFLEVBQUUs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QyxLQUFLLENBQUMsU0FBUyxDQUFDO2dCQUM1RCxHQUFHLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsSUFBSSxFQUFFLENBQUMsS0FBSyxLQUFLLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLENBQUM7Z0JBQzlGLEtBQUssRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLE1BQU0sRUFBRSxDQUFDO2dCQUN4RCxJQUFJLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsTUFBTSxFQUFFLEVBQUUsQ0FBQyxNQUFNLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxLQUFLLElBQUksRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQztnQkFFMUgsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsS0FBSyxJQUFJLFNBQVMsRUFBRSxNQUFNLENBQUMsRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFLENBQUMsS0FBSyxFQUFFLENBQUM7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Q0FBQzthQUN6RDtZQUVELG9CQUFDLENBQUMsQ0FBQyxNQUFNLElBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUMsTUFBTSxFQUFDLFFBQVEsRUFBQyxRQUFRLElBQzNDLE9BQU8sQ0FDQyxDQUVMLENBQUE7SUFDVixDQUFDLENBQUM7QUFDSixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIoeyBkZWVwLCBkYXRhLCByZXF1aXJlLCBHbyB9KSA9PiB7XG4gIGNvbnN0IHsgTWRFZGl0LCBNZFByZXZpZXcsIE1kU2F2ZUFsdCB9ID0gcmVxdWlyZShcInJlYWN0LWljb25zL21kXCIpO1xuICBjb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG5cbiAgY29uc3Qge1xuICAgIFR5cGVkSWNvbiwgRG93bkljb24sIFVwSWNvbiwgVHlwZUljb24sIEluSWNvbiwgT3V0SWNvbiwgRnJvbUljb24sIFRvSWNvbixcbiAgfSA9IHJlcXVpcmUoJ0BkZWVwLWZvdW5kYXRpb24vcGVyY2VwdGlvbi1hcHAnKTtcblxuICBjb25zdCBjID0gcmVxdWlyZSgnQGNoYWtyYS11aS9yZWFjdCcpO1xuXG4gIGNvbnN0IGRwbCA9ICdAZGVlcC1mb3VuZGF0aW9uL3BlcmNlcHRpb24tbGlua3MnO1xuICBjb25zdCBkYyA9ICdAZGVlcC1mb3VuZGF0aW9uL2NvcmUnO1xuXG4gIGNvbnN0IFN0YWNrID0gZGVlcC5pZExvY2FsKGRwbCwgJ1N0YWNrJyk7XG4gIGNvbnN0IFNlbGVjdG9yID0gZGVlcC5pZExvY2FsKGRjLCAnU2VsZWN0b3InKTtcbiAgY29uc3QgUHJvbWlzZSA9IGRlZXAuaWRMb2NhbChkYywgJ1Byb21pc2UnKTtcbiAgY29uc3QgUmVqZWN0ZWQgPSBkZWVwLmlkTG9jYWwoZGMsICdSZWplY3RlZCcpO1xuICBjb25zdCBwcm9taXNlVHJlZSA9IGRlZXAuaWRMb2NhbChkYywgJ3Byb21pc2VUcmVlJyk7XG4gIGNvbnN0IFZhbHVlID0gZGVlcC5pZExvY2FsKGRjLCAnVmFsdWUnKTtcbiAgY29uc3QgU3RyaW5nID0gZGVlcC5pZExvY2FsKGRjLCAnU3RyaW5nJyk7XG4gIGNvbnN0IE51bWJlciA9IGRlZXAuaWRMb2NhbChkYywgJ051bWJlcicpO1xuICBjb25zdCBPYmplY3QgPSBkZWVwLmlkTG9jYWwoZGMsICdPYmplY3QnKTtcbiAgY29uc3QgRmlsZSA9IGRlZXAuaWRMb2NhbChkYywgJ0ZpbGUnKTtcbiAgY29uc3QgUXVlcnkgPSBkZWVwLmlkTG9jYWwoZGMsICdRdWVyeScpO1xuICBjb25zdCBDb250YWluID0gZGVlcC5pZExvY2FsKGRjLCAnQ29udGFpbicpO1xuICBjb25zdCBIaXN0b3J5ID0gZGVlcC5pZExvY2FsKGRwbCwgJ0hpc3RvcnknKTtcbiAgY29uc3QgSGVhZGVyID0gZGVlcC5pZExvY2FsKGRwbCwgJ0hlYWRlcicpO1xuICBjb25zdCBUcmVlTGluayA9IGRlZXAuaWRMb2NhbChkcGwsICdUcmVlTGluaycpO1xuICBjb25zdCBUcmVlTGlzdCA9IGRlZXAuaWRMb2NhbChkcGwsICdUcmVlTGlzdCcpO1xuICBjb25zdCBUcmVlRWRpdG9yID0gZGVlcC5pZExvY2FsKGRwbCwgJ1RyZWVFZGl0b3InKTtcbiAgY29uc3QgVHJlZVF1ZXJ5ID0gZGVlcC5pZExvY2FsKGRwbCwgJ1RyZWVRdWVyeScpO1xuICBjb25zdCBUcmVlTGlua0luc2VydCA9IGRlZXAuaWRMb2NhbChkcGwsICdUcmVlTGlua0luc2VydCcpO1xuICBjb25zdCBUcmVlTGlua0RlbGV0ZSA9IGRlZXAuaWRMb2NhbChkcGwsICdUcmVlTGlua0RlbGV0ZScpO1xuICBjb25zdCBUcmVlTGlua0J1dHRvbiA9IGRlZXAuaWRMb2NhbChkcGwsICdUcmVlTGlua0J1dHRvbicpO1xuXG4gIHJldHVybiAoe1xuICAgIGdvLFxuICAgIGhhbmRsZXJJZCxcblxuICAgIGlzQWN0aXZlLFxuICAgIGlzQ29uY2VudHJhdGVkLFxuXG4gICAgb3BlcmF0aW9ucyA9IHRydWUsXG4gICAgZnVsbFdpZHRoID0gbnVsbCxcbiAgfSwgcmVmKSA9PiB7XG4gICAgY29uc3QgdmFsdWVUeXBlID0gUmVhY3QudXNlTWVtbygoKSA9PiBnby5saW5rPy50eXBlPy5vdXRCeVR5cGVbVmFsdWVdPy5bMF0/LnRvX2lkLCBbZ29dKTtcbiAgICBcbiAgICBjb25zdCBmcm9tRGlzY2xvc3VyZSA9IGMudXNlRGlzY2xvc3VyZSgpO1xuICAgIGNvbnN0IHRvRGlzY2xvc3VyZSA9IGMudXNlRGlzY2xvc3VyZSgpO1xuXG4gICAgY29uc3QgcXVlcmllcyA9IFJlYWN0LnVzZU1lbW8oKCkgPT4gKHtcbiAgICAgICdwYXJlbnRzJzogKHsgb3V0OiB7IHR5cGVfaWQ6IENvbnRhaW4sIHRvX2lkOiBnby5saW5rSWQgfSwgb3JkZXJfYnk6IHsgaWQ6ICdkZXNjJyB9IH0pLFxuICAgICAgJ2NvbnRhaW5zJzogKHsgaW46IHsgdHlwZV9pZDogQ29udGFpbiwgZnJvbV9pZDogZ28ubGlua0lkIH0sIG9yZGVyX2J5OiB7IGlkOiAnZGVzYycgfSB9KSxcbiAgICAgICdvdXQnOiAoeyBmcm9tX2lkOiBnby5saW5rSWQsIG9yZGVyX2J5OiB7IGlkOiAnZGVzYycgfSB9KSxcbiAgICAgICd0eXBlZCc6ICh7IHR5cGVfaWQ6IGdvLmxpbmtJZCwgb3JkZXJfYnk6IHsgaWQ6ICdkZXNjJyB9IH0pLFxuICAgICAgJ2luJzogKHsgdG9faWQ6IGdvLmxpbmtJZCwgb3JkZXJfYnk6IHsgaWQ6ICdkZXNjJyB9IH0pLFxuICAgICAgJ3NlbGVjdG9ycyc6ICh7IHR5cGVfaWQ6IFNlbGVjdG9yLCBzZWxlY3RlZDogeyBpdGVtX2lkOiB7IF9lcTogZ28ubGlua0lkIH0gfSwgb3JkZXJfYnk6IHsgaWQ6ICdkZXNjJyB9IH0pLFxuICAgICAgJ3NlbGVjdGVkJzogKHsgc2VsZWN0ZWQ6IHsgc2VsZWN0b3JfaWQ6IHsgX2VxOiBnby5saW5rSWQgfSB9LCBvcmRlcl9ieTogeyBpZDogJ2Rlc2MnIH0gfSksXG4gICAgICAncHJvbWlzZXMnOiAoeyB0eXBlX2lkOiBQcm9taXNlLCB1cDogeyB0cmVlX2lkOiB7IF9lcTogcHJvbWlzZVRyZWUgfSwgcGFyZW50X2lkOiB7IF9lcTogZ28ubGlua0lkIH0gfSwgb3JkZXJfYnk6IHsgaWQ6ICdkZXNjJyB9IH0pLFxuICAgICAgJ3JlamVjdHMnOiAoeyB0eXBlX2lkOiBSZWplY3RlZCwgdXA6IHsgdHJlZV9pZDogeyBfZXE6IHByb21pc2VUcmVlIH0sIHBhcmVudF9pZDogeyBfZXE6IGdvLmxpbmtJZCB9IH0sIG9yZGVyX2J5OiB7IGlkOiAnZGVzYycgfSB9KSxcbiAgICB9KSwgW10pO1xuXG4gICAgY29uc3QgW3F1ZXJ5LCBzZXRRdWVyeV0gPSBSZWFjdC51c2VTdGF0ZShudWxsKTtcbiAgICBjb25zdCB7IGRhdGE6IGxpbmtzIH0gPSBkZWVwLnVzZVF1ZXJ5KHF1ZXJ5IHx8IHt9LCB7IHNraXA6ICFxdWVyeSB9KTtcbiAgICAvLyBjb25zdCBbbGlua3MsIHNldExpbmtzXSA9IFJlYWN0LnVzZVN0YXRlKFtdKTtcbiAgICAvLyBSZWFjdC51c2VFZmZlY3QoKCkgPT4gc2V0TGlua3MoW10pLCBbcXVlcnldKTtcblxuICAgIGNvbnN0IGNvbHVtbiA9IDxjLlZTdGFja1xuICAgICAgcG9zaXRpb249J3JlbGF0aXZlJyBtaW5XPXtmdWxsV2lkdGggfHwgJzMwZW0nfSBtYXhXPXtmdWxsV2lkdGggfHwgJzMwZW0nfSBoPScxMDAlJyBzcGFjaW5nPXsxfVxuICAgICAgYmc9e2lzQWN0aXZlID8gJ2RlZXBCZ0RhcmsnIDogbnVsbH1cbiAgICA+XG4gICAgICA8Yy5GbGV4IHc9JzEwMCUnPlxuICAgICAgICA8Z28uSGFuZGxlclxuICAgICAgICAgIGhhbmRsZXJJZD17VHJlZUxpbmtCdXR0b259IGxpbmtJZD17Z28ubGlua0lkfSBmbGV4PScxJ1xuICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGdvLmZvY3VzKCdjdXJyZW50JykuZ28uZG8oJ2V4ZWMnKX1cbiAgICAgICAgICBuZWVkUGFyZW50PXtmYWxzZX0gaXNBY3RpdmU9e2dvLnZhbHVlID09PSAnY3VycmVudCd9XG4gICAgICAgIC8+XG4gICAgICAgIDxjLkJ1dHRvblxuICAgICAgICAgIG1pblc9JzNlLCcgdz0nM2VtJyBoPScxMDAlJyBtaW5IPSczZW0nIHA9JzAnXG4gICAgICAgICAgb25DbGljaz17KCkgPT4gZ28uZm9jdXMoJ2Nsb3NlJykuZ28uZG8oJ2Nsb3NlJyl9XG4gICAgICAgICAgdmFyaWFudD17Z28udmFsdWUgPT09ICdjbG9zZScgPyAnYWN0aXZlJyA6IG51bGx9XG4gICAgICAgID54PC9jLkJ1dHRvbj5cbiAgICAgIDwvYy5GbGV4PlxuICAgICAgPGMuU2ltcGxlR3JpZCBzcGFjaW5nPXsxfSB3PScxMDAlJyBjb2x1bW5zPXsyICsgKG9wZXJhdGlvbnMgPyAyIDogMCl9PlxuICAgICAgICA8Yy5CdXR0b25cbiAgICAgICAgICB2YXJpYW50PXtnby52YWx1ZSA9PT0gJ3BhcmVudHMnID8gJ2FjdGl2ZScgOiBudWxsfVxuICAgICAgICAgIGp1c3RpZnlDb250ZW50PSdjZW50ZXInXG4gICAgICAgICAgb25DbGljaz17KCkgPT4gZ28uZm9jdXMoJ3BhcmVudHMnKS5nby5kbygncGFyZW50cycpfVxuICAgICAgICA+XG4gICAgICAgICAgPGMuVGV4dCBwcj17MX0+8J+Xgu+4jzwvYy5UZXh0PiBwYXJlbnRzXG4gICAgICAgIDwvYy5CdXR0b24+XG4gICAgICAgIDxjLkJ1dHRvblxuICAgICAgICAgIHZhcmlhbnQ9e2dvLnZhbHVlID09PSAnY29udGFpbnMnID8gJ2FjdGl2ZScgOiBudWxsfVxuICAgICAgICAgIGp1c3RpZnlDb250ZW50PSdjZW50ZXInXG4gICAgICAgICAgb25DbGljaz17KCkgPT4gZ28uZm9jdXMoJ2NvbnRhaW5zJykuZ28uZG8oJ2NvbnRhaW5zJyl9XG4gICAgICAgID5cbiAgICAgICAgICA8Yy5UZXh0IHByPXsxfT7wn5eC77iPPC9jLlRleHQ+IGNvbnRhaW5zXG4gICAgICAgIDwvYy5CdXR0b24+XG4gICAgICAgIHtvcGVyYXRpb25zICYmIDw+XG4gICAgICAgICAgPGdvLlByb3ZpZGVyIGxpbmtJZD17VHJlZUxpbmtJbnNlcnR9PlxuICAgICAgICAgICAgPGdvLkhhbmRsZXJcbiAgICAgICAgICAgICAgaXNBY3RpdmU9e2dvLnZhbHVlID09PSAnaW5zZXJ0JyA/IGdvLnJlZiA6IG51bGx9XG4gICAgICAgICAgICAgIGhhbmRsZXJJZD17VHJlZUxpbmtJbnNlcnR9XG4gICAgICAgICAgICAgIGRlZmF1bHRDb250YWluZXJJZD17Z28ubGlua0lkfSBkZWZhdWx0VHlwZUlkPXsxfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L2dvLlByb3ZpZGVyPlxuICAgICAgICAgIDxnby5Qcm92aWRlciBsaW5rSWQ9e1RyZWVMaW5rRGVsZXRlfT5cbiAgICAgICAgICAgIDxnby5IYW5kbGVyXG4gICAgICAgICAgICAgIGlzQWN0aXZlPXtnby52YWx1ZSA9PT0gJ2RlbGV0ZScgPyBnby5yZWYgOiBudWxsfVxuICAgICAgICAgICAgICBoYW5kbGVySWQ9e1RyZWVMaW5rRGVsZXRlfVxuICAgICAgICAgICAgICBsaW5rSWQ9e2dvLmxpbmtJZH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9nby5Qcm92aWRlcj5cbiAgICAgICAgPC8+fVxuICAgICAgPC9jLlNpbXBsZUdyaWQ+XG4gICAgICB7KCEhZ28ubGluay50eXBlX2lkID09PSAxIHx8ICEhZ28ubGluay5mcm9tX2lkKSAmJiA8Z28uQ29tcG9uZW50IHBhdGg9e1tkcGwsICdGaW5kZXInXX1cbiAgICAgICAgZGlzY2xvc3VyZT17ZnJvbURpc2Nsb3N1cmV9IGluaXRpYWxJZD17Z28ubGluay5mcm9tX2lkfSBpbml0aWFsSGFuZGxlcklkPXtUcmVlTGlzdH1cbiAgICAgICAgb25TdWJtaXQ9eyhpZCkgPT4ge1xuICAgICAgICAgIGRlZXAudXBkYXRlKGdvLmxpbmtJZCwgeyBmcm9tX2lkOiBpZCB9KTtcbiAgICAgICAgICBmcm9tRGlzY2xvc3VyZS5vbkNsb3NlKCk7XG4gICAgICAgIH19XG4gICAgICAvPn1cbiAgICAgIHsoISFnby5saW5rLnR5cGVfaWQgPT09IDEgfHwgISFnby5saW5rLnRvX2lkKSAmJiA8Z28uQ29tcG9uZW50IHBhdGg9e1tkcGwsICdGaW5kZXInXX1cbiAgICAgICAgZGlzY2xvc3VyZT17dG9EaXNjbG9zdXJlfSBpbml0aWFsSWQ9e2dvLmxpbmsudG9faWR9IGluaXRpYWxIYW5kbGVySWQ9e1RyZWVMaXN0fVxuICAgICAgICBvblN1Ym1pdD17KGlkKSA9PiB7XG4gICAgICAgICAgZGVlcC51cGRhdGUoZ28ubGlua0lkLCB7IHRvX2lkOiBpZCB9KTtcbiAgICAgICAgICB0b0Rpc2Nsb3N1cmUub25DbG9zZSgpO1xuICAgICAgICB9fVxuICAgICAgLz59XG4gICAgICB7Wzxnby5RdWVyeSBrZXk9e2Ake2Zyb21EaXNjbG9zdXJlLmlzT3Blbn0ke3RvRGlzY2xvc3VyZS5pc09wZW59YH0gcXVlcnk9e3sgaWQ6IGdvLmxpbmtJZCB9fS8+XX1cbiAgICAgIDxjLlNpbXBsZUdyaWQgc3BhY2luZz17MX0gdz0nMTAwJScgY29sdW1ucz17M30+XG4gICAgICAgIDxjLkZsZXg+XG4gICAgICAgICAgPGMuQnV0dG9uXG4gICAgICAgICAgICB2YXJpYW50PXtnby52YWx1ZSA9PT0gJ2VkaXQtZnJvbScgPyAnYWN0aXZlJyA6IHVuZGVmaW5lZH1cbiAgICAgICAgICAgIGp1c3RpZnlDb250ZW50PSdyaWdodCcgdGV4dEFsaWduPSdyaWdodCcgaD0nM2VtJyBkaXNhYmxlZD17IWdvLmxpbms/LmZyb21faWR9XG4gICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBnby5mb2N1cygnZWRpdC1mcm9tJykuZ28uZG8oJ2VkaXQtZnJvbScpfVxuICAgICAgICAgID48Yy5Cb3g+XG4gICAgICAgICAgICAgIDxNZEVkaXQgLz5cbiAgICAgICAgICAgIDwvYy5Cb3g+PC9jLkJ1dHRvbj5cbiAgICAgICAgICA8Yy5CdXR0b25cbiAgICAgICAgICAgIHZhcmlhbnQ9e2dvLnZhbHVlID09PSAnZnJvbScgPyAnYWN0aXZlJyA6IHVuZGVmaW5lZH1cbiAgICAgICAgICAgIGp1c3RpZnlDb250ZW50PSdyaWdodCcgdGV4dEFsaWduPSdyaWdodCdcbiAgICAgICAgICAgIGZsZXg9JzEnIGg9JzNlbSdcbiAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGdvLmZvY3VzKCdmcm9tJykuZ28uZG8oJ2Zyb20nKX1cbiAgICAgICAgICAgIHJpZ2h0SWNvbj17PEZyb21JY29uIC8+fVxuICAgICAgICAgICAgb3ZlcmZsb3c9J2hpZGRlbidcbiAgICAgICAgICA+PGMuQm94PlxuICAgICAgICAgICAgICA8Yy5UZXh0PmZyb208L2MuVGV4dD5cbiAgICAgICAgICAgICAgPGMuQm94PjxjLlRleHQgZm9udFNpemU9J3hzJz57Z28ubGluaz8uZnJvbT8uc3ltYm9sfSB7ISFnby5saW5rPy5mcm9tICYmIGdvLmxpbmsuZnJvbS5uYW1lfSB7Z28ubGluaz8uZnJvbV9pZH08L2MuVGV4dD48L2MuQm94PlxuICAgICAgICAgICAgPC9jLkJveD48L2MuQnV0dG9uPlxuICAgICAgICA8L2MuRmxleD5cbiAgICAgICAgPGMuQnV0dG9uXG4gICAgICAgICAgdmFyaWFudD17Z28udmFsdWUgPT09ICd0eXBlJyA/ICdhY3RpdmUnIDogdW5kZWZpbmVkfVxuICAgICAgICAgIGRpc2FibGVkPXshZ28ubGluaz8udHlwZV9pZH0gbGVmdEljb249ezxUeXBlSWNvbiAvPn1cbiAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBnby5mb2N1cygndHlwZScpLmdvLmRvKCd0eXBlJyl9XG4gICAgICAgICAgaD0nM2VtJyBvdmVyZmxvdz0naGlkZGVuJ1xuICAgICAgICA+PGMuQm94PlxuICAgICAgICAgICAgPGMuVGV4dD50eXBlPC9jLlRleHQ+XG4gICAgICAgICAgICA8Yy5Cb3g+PGMuVGV4dCBmb250U2l6ZT0neHMnPntnby5saW5rPy50eXBlPy5zeW1ib2x9IHshIWdvLmxpbms/LnR5cGUgJiYgZ28ubGluay50eXBlLm5hbWV9IHtnby5saW5rPy50eXBlX2lkfTwvYy5UZXh0PjwvYy5Cb3g+XG4gICAgICAgICAgPC9jLkJveD48L2MuQnV0dG9uPlxuICAgICAgICA8Yy5GbGV4PlxuICAgICAgICAgIDxjLkJ1dHRvblxuICAgICAgICAgICAgdmFyaWFudD17Z28udmFsdWUgPT09ICd0bycgPyAnYWN0aXZlJyA6IHVuZGVmaW5lZH1cbiAgICAgICAgICAgIGp1c3RpZnlDb250ZW50PSdsZWZ0JyB0ZXh0QWxpZ249J2xlZnQnIGZsZXg9JzEnIGg9JzNlbScgcmlnaHRJY29uPXs8VG9JY29uIC8+fVxuICAgICAgICAgICAgb25DbGljaz17KCkgPT4gZ28uZm9jdXMoJ3RvJykuZ28uZG8oJ3RvJyl9XG4gICAgICAgICAgICBvdmVyZmxvdz0naGlkZGVuJ1xuICAgICAgICAgID48Yy5Cb3g+XG4gICAgICAgICAgICAgIDxjLlRleHQ+dG88L2MuVGV4dD5cbiAgICAgICAgICAgICAgPGMuQm94PjxjLlRleHQgZm9udFNpemU9J3hzJz57Z28ubGluaz8udG8/LnN5bWJvbH0geyEhZ28ubGluaz8udG8gJiYgZ28ubGluay50by5uYW1lfSB7Z28ubGluaz8udG9faWR9PC9jLlRleHQ+PC9jLkJveD5cbiAgICAgICAgICAgIDwvYy5Cb3g+PC9jLkJ1dHRvbj5cbiAgICAgICAgICA8Yy5CdXR0b25cbiAgICAgICAgICAgIHZhcmlhbnQ9e2dvLnZhbHVlID09PSAnZWRpdC10bycgPyAnYWN0aXZlJyA6IHVuZGVmaW5lZH1cbiAgICAgICAgICAgIGp1c3RpZnlDb250ZW50PSdyaWdodCcgdGV4dEFsaWduPSdyaWdodCcgaD0nM2VtJyBkaXNhYmxlZD17IWdvLmxpbms/LnRvX2lkfVxuICAgICAgICAgICAgb25DbGljaz17KCkgPT4gZ28uZm9jdXMoJ2VkaXQtdG8nKS5nby5kbygnZWRpdC10bycpfVxuICAgICAgICAgID48Yy5Cb3g+XG4gICAgICAgICAgICAgIDxNZEVkaXQgLz5cbiAgICAgICAgICAgIDwvYy5Cb3g+PC9jLkJ1dHRvbj5cbiAgICAgICAgPC9jLkZsZXg+XG4gICAgICA8L2MuU2ltcGxlR3JpZD5cbiAgICAgIDxjLlNpbXBsZUdyaWQgc3BhY2luZz17MX0gdz0nMTAwJScgY29sdW1ucz17NX0+XG4gICAgICAgIDxjLkJ1dHRvblxuICAgICAgICAgIHZhcmlhbnQ9e2dvLnZhbHVlID09PSAndXAtdHJlZScgPyAnYWN0aXZlJyA6IHVuZGVmaW5lZH0ganVzdGlmeUNvbnRlbnQ9J2NlbnRlcidcbiAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBnby5mb2N1cygndXAtdHJlZScpLmdvLmRvKCd1cC10cmVlJyl9XG4gICAgICAgICAgbGVmdEljb249ezxVcEljb24gLz59XG4gICAgICAgID5cbiAgICAgICAgICA8Yy5UZXh0PnVwPC9jLlRleHQ+XG4gICAgICAgIDwvYy5CdXR0b24+XG4gICAgICAgIDxjLkJ1dHRvblxuICAgICAgICAgIHZhcmlhbnQ9e2dvLnZhbHVlID09PSAnb3V0JyA/ICdhY3RpdmUnIDogdW5kZWZpbmVkfSBqdXN0aWZ5Q29udGVudD0nbGVmdCcgdGV4dEFsaWduPSdsZWZ0J1xuICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGdvLmZvY3VzKCdvdXQnKS5nby5kbygnb3V0Jyl9XG4gICAgICAgICAgbGVmdEljb249ezxPdXRJY29uIC8+fVxuICAgICAgICA+XG4gICAgICAgICAgPGMuVGV4dD5vdXQ8L2MuVGV4dD5cbiAgICAgICAgPC9jLkJ1dHRvbj5cbiAgICAgICAgey8qIDxJY29uQnV0dG9uIGFyaWEtbGFiZWw9J3R5cGVkJyBpY29uPXs8VHlwZWRJY29uIC8+fSAvPiAqL31cbiAgICAgICAgPGMuQnV0dG9uXG4gICAgICAgICAgdmFyaWFudD17Z28udmFsdWUgPT09ICd0eXBlZCcgPyAnYWN0aXZlJyA6IHVuZGVmaW5lZH1cbiAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBnby5mb2N1cygndHlwZWQnKS5nby5kbygndHlwZWQnKX1cbiAgICAgICAgICBsZWZ0SWNvbj17PFR5cGVkSWNvbiAvPn1cbiAgICAgICAgPlxuICAgICAgICAgIDxjLlRleHQ+dHlwZWQ8L2MuVGV4dD5cbiAgICAgICAgPC9jLkJ1dHRvbj5cbiAgICAgICAgPGMuQnV0dG9uXG4gICAgICAgICAgdmFyaWFudD17Z28udmFsdWUgPT09ICdpbicgPyAnYWN0aXZlJyA6IHVuZGVmaW5lZH0ganVzdGlmeUNvbnRlbnQ9J3JpZ2h0JyB0ZXh0QWxpZ249J3JpZ2h0J1xuICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGdvLmZvY3VzKCdpbicpLmdvLmRvKCdpbicpfVxuICAgICAgICAgIHJpZ2h0SWNvbj17PEluSWNvbiAvPn1cbiAgICAgICAgPlxuICAgICAgICAgIDxjLlRleHQ+aW48L2MuVGV4dD5cbiAgICAgICAgPC9jLkJ1dHRvbj5cbiAgICAgICAgPGMuQnV0dG9uXG4gICAgICAgICAgdmFyaWFudD17Z28udmFsdWUgPT09ICdkb3duLXRyZWUnID8gJ2FjdGl2ZScgOiB1bmRlZmluZWR9IGp1c3RpZnlDb250ZW50PSdjZW50ZXInXG4gICAgICAgICAgb25DbGljaz17KCkgPT4gZ28uZm9jdXMoJ2Rvd24tdHJlZScpLmdvLmRvKCdkb3duLXRyZWUnKX1cbiAgICAgICAgICBsZWZ0SWNvbj17PERvd25JY29uIC8+fVxuICAgICAgICA+XG4gICAgICAgICAgPGMuVGV4dD5kb3duPC9jLlRleHQ+XG4gICAgICAgIDwvYy5CdXR0b24+XG4gICAgICA8L2MuU2ltcGxlR3JpZD5cbiAgICAgIDxjLlNpbXBsZUdyaWQgc3BhY2luZz17MX0gdz0nMTAwJScgY29sdW1ucz17NH0+XG4gICAgICAgIDxjLkJ1dHRvblxuICAgICAgICAgIHZhcmlhbnQ9e2dvLnZhbHVlID09PSAnc2VsZWN0b3JzJyA/ICdhY3RpdmUnIDogdW5kZWZpbmVkfSBqdXN0aWZ5Q29udGVudD0nY2VudGVyJ1xuICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGdvLmZvY3VzKCdzZWxlY3RvcnMnKS5nby5kbygnc2VsZWN0b3JzJyl9XG4gICAgICAgID5cbiAgICAgICAgICA8Yy5UZXh0IHByPXsxfT7wn6qhPC9jLlRleHQ+IHNlbGVjdG9yc1xuICAgICAgICA8L2MuQnV0dG9uPlxuICAgICAgICA8Yy5CdXR0b25cbiAgICAgICAgICB2YXJpYW50PXtnby52YWx1ZSA9PT0gJ3NlbGVjdGVkJyA/ICdhY3RpdmUnIDogdW5kZWZpbmVkfSBqdXN0aWZ5Q29udGVudD0nY2VudGVyJ1xuICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGdvLmZvY3VzKCdzZWxlY3RlZCcpLmdvLmRvKCdzZWxlY3RlZCcpfVxuICAgICAgICA+XG4gICAgICAgICAgPGMuVGV4dCBwcj17MX0+8J+qoTwvYy5UZXh0PiBzZWxlY3RlZFxuICAgICAgICA8L2MuQnV0dG9uPlxuICAgICAgICA8Yy5CdXR0b25cbiAgICAgICAgICB2YXJpYW50PXtnby52YWx1ZSA9PT0gJ3Byb21pc2VzJyA/ICdhY3RpdmUnIDogdW5kZWZpbmVkfSBqdXN0aWZ5Q29udGVudD0nY2VudGVyJ1xuICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGdvLmZvY3VzKCdwcm9taXNlcycpLmdvLmRvKCdwcm9taXNlcycpfVxuICAgICAgICA+XG4gICAgICAgICAgPGMuVGV4dCBwcj17MX0+8J+knjwvYy5UZXh0PiBwcm9taXNlc1xuICAgICAgICA8L2MuQnV0dG9uPlxuICAgICAgICA8Yy5CdXR0b25cbiAgICAgICAgICB2YXJpYW50PXtnby52YWx1ZSA9PT0gJ3JlamVjdHMnID8gJ2FjdGl2ZScgOiB1bmRlZmluZWR9IGp1c3RpZnlDb250ZW50PSdjZW50ZXInXG4gICAgICAgICAgb25DbGljaz17KCkgPT4gZ28uZm9jdXMoJ3JlamVjdHMnKS5nby5kbygncmVqZWN0cycpfVxuICAgICAgICA+XG4gICAgICAgICAgPGMuVGV4dCBwcj17MX0+8J+UtDwvYy5UZXh0PiByZWplY3RzXG4gICAgICAgIDwvYy5CdXR0b24+XG4gICAgICA8L2MuU2ltcGxlR3JpZD5cbiAgICAgIDxjLlNpbXBsZUdyaWQgc3BhY2luZz17MX0gdz0nMTAwJSc+XG4gICAgICAgIHshdmFsdWVUeXBlICYmIDw+XG4gICAgICAgICAgPGMuQnV0dG9uXG4gICAgICAgICAgICB2YXJpYW50PXtnby52YWx1ZSA9PT0gJ3ZhbHVlJyA/ICdhY3RpdmUnIDogdW5kZWZpbmVkfSBiZz17Z28udmFsdWUgPT09IFRyZWVFZGl0b3IgPyAnZGVlcEJnRGFyaycgOiBudWxsfSBqdXN0aWZ5Q29udGVudD0nY2VudGVyJ1xuICAgICAgICAgICAgZGlzYWJsZWRcbiAgICAgICAgICA+XG4gICAgICAgICAgICB0eXBlIGNhbid0IGhhdmUgVmFsdWVcbiAgICAgICAgICA8L2MuQnV0dG9uPlxuICAgICAgICA8Lz59XG4gICAgICAgIHt2YWx1ZVR5cGUgPT09IFN0cmluZyAmJiA8PlxuICAgICAgICAgIDxjLkJ1dHRvblxuICAgICAgICAgICAgdmFyaWFudD17Z28udmFsdWUgPT09ICd2YWx1ZScgPyAnYWN0aXZlJyA6IHVuZGVmaW5lZH0gYmc9e2dvLnZhbHVlID09PSBUcmVlRWRpdG9yID8gJ2RlZXBCZ0RhcmsnIDogbnVsbH0ganVzdGlmeUNvbnRlbnQ9J2NlbnRlcidcbiAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGdvLmZvY3VzKCd2YWx1ZScpLmdvLmRvKCd2YWx1ZScpfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxjLlRleHQgcHI9ezF9PlwiXCIubGVuZ3RoID09PSB7Z28ubGluaz8udmFsdWU/LnZhbHVlPy5sZW5ndGggfHwgMH08L2MuVGV4dD4gc3RyaW5nXG4gICAgICAgICAgPC9jLkJ1dHRvbj5cbiAgICAgICAgPC8+fVxuICAgICAgICB7dmFsdWVUeXBlID09PSBOdW1iZXIgJiYgPD5cbiAgICAgICAgICA8Yy5CdXR0b25cbiAgICAgICAgICAgIHZhcmlhbnQ9e2dvLnZhbHVlID09PSAndmFsdWUnID8gJ2FjdGl2ZScgOiB1bmRlZmluZWR9IGJnPXtnby52YWx1ZSA9PT0gVHJlZUVkaXRvciA/ICdkZWVwQmdEYXJrJyA6IG51bGx9IGp1c3RpZnlDb250ZW50PSdjZW50ZXInXG4gICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBnby5mb2N1cygndmFsdWUnKS5nby5kbygndmFsdWUnKX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8Yy5UZXh0IHByPXsxfT57K2dvLmxpbms/LnZhbHVlPy52YWx1ZX08L2MuVGV4dD4gbnVtYmVyXG4gICAgICAgICAgPC9jLkJ1dHRvbj5cbiAgICAgICAgPC8+fVxuICAgICAgICB7dmFsdWVUeXBlID09PSBPYmplY3QgJiYgPD5cbiAgICAgICAgICA8Yy5CdXR0b25cbiAgICAgICAgICAgIHZhcmlhbnQ9e2dvLnZhbHVlID09PSAndmFsdWUnID8gJ2FjdGl2ZScgOiB1bmRlZmluZWR9IGJnPXtnby52YWx1ZSA9PT0gVHJlZUVkaXRvciA/ICdkZWVwQmdEYXJrJyA6IG51bGx9IGp1c3RpZnlDb250ZW50PSdjZW50ZXInXG4gICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBnby5mb2N1cygndmFsdWUnKS5nby5kbygndmFsdWUnKX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8Yy5UZXh0IHByPXsxfT57YHsuLi59YH08L2MuVGV4dD4gb2JqZWN0XG4gICAgICAgICAgPC9jLkJ1dHRvbj5cbiAgICAgICAgPC8+fVxuICAgICAgPC9jLlNpbXBsZUdyaWQ+XG4gICAgICB7Z28udmFsdWUgPT09IFRyZWVFZGl0b3IgJiYgPGMuQm94IG1pblc9e2Z1bGxXaWR0aCB8fCAnMzBlbSd9IG1heFc9e2Z1bGxXaWR0aCB8fCAnMzBlbSd9IGZsZXg9JzEnIHBvc2l0aW9uPSdyZWxhdGl2ZSc+XG4gICAgICAgIDxnby5IYW5kbGVyIGhhbmRsZXJJZD17VHJlZUVkaXRvcn0gbGlua0lkPXtnby5saW5rSWR9IGZpbGxTaXplIGF1dG9Gb2N1cyAvPlxuICAgICAgPC9jLkJveD59XG4gICAgICB7ISFsaW5rcz8ubGVuZ3RoICYmIDxnby5Qcm92aWRlciBsaW5rSWQ9e1N0YWNrfT5cbiAgICAgICAgPGdvLkNvbXBvbmVudCBwYXRoPXtbZHBsLCAnU3RhY2snXX0gbGlua3M9e2xpbmtzfSBkaXJlY3Rpb249J3ZlcnRpY2FsJyBmbGV4PScxJyAvPlxuICAgICAgPC9nby5Qcm92aWRlcj59XG4gICAgPC9jLlZTdGFjaz47XG5cbiAgICBjb25zdCBuYXYgPSBnby51c2VOYXYoKTtcbiAgICBuYXYoJ2N1cnJlbnQnLCAnbGVmdCcsICd1cCcsICdjbG9zZScsICdjb250YWlucycpO1xuICAgIFxuICAgIGlmIChpc0NvbmNlbnRyYXRlZCAhPT0gZmFsc2UpIHtcbiAgICAgIG5hdignY2xvc2UnLCAnY3VycmVudCcsICd1cCcsICdyaWdodCcsICdjb250YWlucycpO1xuICBcbiAgICAgIG5hdigncGFyZW50cycsICdsZWZ0JywgJ2N1cnJlbnQnLCAnY29udGFpbnMnLCAndHlwZScpO1xuICAgICAgbmF2KCdjb250YWlucycsICdwYXJlbnRzJywgJ2N1cnJlbnQnLCAnaW5zZXJ0JywgJ3R5cGUnKTtcbiAgICAgIG5hdignaW5zZXJ0JywgJ2NvbnRhaW5zJywgJ2N1cnJlbnQnLCAnZGVsZXRlJywgJ3R5cGUnKTtcbiAgICAgIG5hdignZGVsZXRlJywgJ2luc2VydCcsICdjbG9zZScsICdyaWdodCcsICd0eXBlJyk7XG4gIFxuICAgICAgbmF2KCdlZGl0LWZyb20nLCAnbGVmdCcsICdjb250YWlucycsICdmcm9tJywgJ3VwLXRyZWUnKTtcbiAgICAgIG5hdignZnJvbScsICdlZGl0LWZyb20nLCAnY29udGFpbnMnLCAndG8nLCAnb3V0Jyk7XG4gICAgICBuYXYoJ3R5cGUnLCAnZnJvbScsICdjb250YWlucycsICd0bycsICd0eXBlZCcpO1xuICAgICAgbmF2KCd0bycsICd0eXBlJywgJ2NvbnRhaW5zJywgJ2VkaXQtdG8nLCAnaW4nKTtcbiAgICAgIG5hdignZWRpdC10bycsICd0bycsICdjb250YWlucycsICdyaWdodCcsICdkb3duLXRyZWUnKTtcbiAgXG4gICAgICBuYXYoJ3VwLXRyZWUnLCAnbGVmdCcsICdlZGl0LWZyb20nLCAnb3V0JywgJ3NlbGVjdG9ycycpO1xuICAgICAgbmF2KCdvdXQnLCAndXAtdHJlZScsICdmcm9tJywgJ3R5cGVkJywgJ3NlbGVjdGVkJyk7XG4gICAgICBuYXYoJ3R5cGVkJywgJ291dCcsICd0eXBlJywgJ2luJywgJ3Byb21pc2VzJyk7XG4gICAgICBuYXYoJ2luJywgJ3R5cGVkJywgJ3RvJywgJ2Rvd24tdHJlZScsICdwcm9taXNlcycpO1xuICAgICAgbmF2KCdkb3duLXRyZWUnLCAnaW4nLCAnZWRpdC10bycsICdyaWdodCcsICdyZWplY3RzJyk7XG4gIFxuICAgICAgbmF2KCdzZWxlY3RvcnMnLCAnbGVmdCcsICd1cC10cmVlJywgJ3NlbGVjdGVkJywgJ3ZhbHVlJyk7XG4gICAgICBuYXYoJ3NlbGVjdGVkJywgJ3NlbGVjdG9ycycsICdvdXQnLCAncHJvbWlzZXMnLCAndmFsdWUnKTtcbiAgICAgIG5hdigncHJvbWlzZXMnLCAnc2VsZWN0ZWQnLCAnaW4nLCAncmVqZWN0cycsICd2YWx1ZScpO1xuICAgICAgbmF2KCdyZWplY3RzJywgJ3Byb21pc2VzJywgJ2Rvd24tdHJlZScsICdyaWdodCcsICd2YWx1ZScpO1xuICBcbiAgICAgIG5hdigndmFsdWUnLCAnbGVmdCcsICdwcm9taXNlcycsICdyaWdodCcsIFN0YWNrKTtcbiAgXG4gICAgICBuYXYoU3RhY2ssICdsZWZ0JywgJ3ZhbHVlJywgJ3JpZ2h0JywgJ2Rvd24nKTtcbiAgICB9XG5cbiAgICBjb25zdCBvcGVuTGluayA9IGFzeW5jIChpZCkgPT4ge1xuICAgICAgISFpZCAmJiBnby5nby5kbygnb3BlbicsIHsgaGFuZGxlcklkOiBUcmVlTGluaywgaWQ6IGlkLCBwcmV2SWQ6IGdvLmxpbmtJZCB9KVxuICAgICAgYXdhaXQgZ28uZ28uYXdhaXQoaWQpO1xuICAgICAgZ28uZ28uZm9jdXMoaWQpO1xuICAgIH07XG5cbiAgICBjb25zdCBkZWNvbmNlbnRyYXRlZCA9IDxjLkJ1dHRvblxuICAgICAgaD0nMTAwJScgdz0nM2VtJyBwdD0nMWVtJyB2YXJpYW50PXtpc0FjdGl2ZSA/ICdhY3RpdmUnIDogdW5kZWZpbmVkfVxuICAgICAgYWxpZ25JdGVtcz0nZmxleC1zdGFydCdcbiAgICA+XG4gICAgICB7Z28/Lmxpbms/LnN5bWJvbH1cbiAgICA8L2MuQnV0dG9uPlxuXG4gICAgY29uc3QgY29udGVudCA9IGlzQ29uY2VudHJhdGVkID09PSBmYWxzZSA/IGRlY29uY2VudHJhdGVkIDogY29sdW1uO1xuXG4gICAgcmV0dXJuIDxnby5PblxuICAgICAgZG89e3tcbiAgICAgICAgZm9jdXM6IChnLCB2LCBsaW5rSWQsIG8pID0+ICFnby52YWx1ZSAmJiBnby5mb2N1cygnY3VycmVudCcpLFxuICAgICAgICB1c2U6IChnLCB2LCBvKSA9PiBvPy5pZCAmJiBnby52YWx1ZSA9PT0gU3RhY2sgPyAoZ28oU3RhY2spLmRvKCd1c2UnLCBvKSkgOiAoZ28uc2V0KCdjdXJyZW50JykpLFxuICAgICAgICBjbG9zZTogKGcsIHYsIG8pID0+IGdvLmdvLmRvKCdjbG9zZScsIHsgaWQ6IGdvLmxpbmtJZCB9KSxcbiAgICAgICAgZXhlYzogKGcsIHYsIG8pID0+IG8/LmlkID8gZ28uZ28uZG8oJ29wZW4nLCB7IGlkOiBvLmlkLCBwcmV2SWQ6IGdvLmxpbmtJZCwgZm9jdXM6IHRydWUgfSkgOiBnby52YWx1ZSAmJiBnby5kbyhnby52YWx1ZSwgbyksXG5cbiAgICAgICAgbGVmdDogKGcsIHYsIG8pID0+IGdvLmZvY3VzKG5hdi5nZXQoZ28udmFsdWUgfHwgJ2N1cnJlbnQnLCAnbGVmdCcpLCB7IHByZXY6IGdvLnZhbHVlIH0pLFxuICAgICAgICB1cDogKGcsIHYsIG8pID0+IGdvLmZvY3VzKG5hdi5nZXQoZ28udmFsdWUgfHwgJ2N1cnJlbnQnLCAndXAnKSwgeyBwcmV2OiBnby52YWx1ZSB9KSxcbiAgICAgICAgcmlnaHQ6IChnLCB2LCBvKSA9PiBnby5mb2N1cyhuYXYuZ2V0KGdvLnZhbHVlIHx8ICdjdXJyZW50JywgJ3JpZ2h0JyksIHsgcHJldjogZ28udmFsdWUgfSksXG4gICAgICAgIGRvd246IChnLCB2LCBvKSA9PiBnby5mb2N1cyhuYXYuZ2V0KGdvLnZhbHVlIHx8ICdjdXJyZW50JywgJ2Rvd24nKSwgeyBwcmV2OiBnby52YWx1ZSB9KSxcblxuICAgICAgICAnY3VycmVudCc6ICgpID0+IHsgfSxcbiAgICAgICAgJ3BhcmVudHMnOiAoKSA9PiBzZXRRdWVyeSh7IC4uLnF1ZXJpZXMucGFyZW50cywgbGltaXQ6IDEwMCB9KSxcbiAgICAgICAgJ2NvbnRhaW5zJzogKCkgPT4gc2V0UXVlcnkoeyAuLi5xdWVyaWVzLmNvbnRhaW5zLCBsaW1pdDogMTAwIH0pLFxuXG4gICAgICAgICdlZGl0LWZyb20nOiAoKSA9PiBmcm9tRGlzY2xvc3VyZS5vbk9wZW4oKSxcbiAgICAgICAgJ2Zyb20nOiAoKSA9PiBvcGVuTGluayhnby5saW5rLmZyb21faWQpLFxuICAgICAgICAndHlwZSc6ICgpID0+IG9wZW5MaW5rKGdvLmxpbmsudHlwZV9pZCksXG4gICAgICAgICd0byc6ICgpID0+IG9wZW5MaW5rKGdvLmxpbmsudG9faWQpLFxuICAgICAgICAnZWRpdC10byc6ICgpID0+IHRvRGlzY2xvc3VyZS5vbk9wZW4oKSxcblxuICAgICAgICAndXAtdHJlZSc6ICgpID0+IHsgfSxcbiAgICAgICAgJ291dCc6ICgpID0+IHNldFF1ZXJ5KHsgLi4ucXVlcmllcy5vdXQsIGxpbWl0OiAxMDAgfSksXG4gICAgICAgICd0eXBlZCc6ICgpID0+IHNldFF1ZXJ5KHsgLi4ucXVlcmllcy50eXBlZCwgbGltaXQ6IDEwMCB9KSxcbiAgICAgICAgJ2luJzogKCkgPT4gc2V0UXVlcnkoeyAuLi5xdWVyaWVzLmluLCBsaW1pdDogMTAwIH0pLFxuICAgICAgICAnZG93bi10cmVlJzogKCkgPT4geyB9LFxuXG4gICAgICAgICdzZWxlY3RvcnMnOiAoKSA9PiBzZXRRdWVyeSh7IC4uLnF1ZXJpZXMuc2VsZWN0b3JzLCBsaW1pdDogMTAwIH0pLFxuICAgICAgICAnc2VsZWN0ZWQnOiAoKSA9PiBzZXRRdWVyeSh7IC4uLnF1ZXJpZXMuc2VsZWN0ZWQsIGxpbWl0OiAxMDAgfSksXG4gICAgICAgICdwcm9taXNlcyc6ICgpID0+IHNldFF1ZXJ5KHsgLi4ucXVlcmllcy5wcm9taXNlcywgbGltaXQ6IDEwMCB9KSxcbiAgICAgICAgJ3JlamVjdHMnOiAoKSA9PiBzZXRRdWVyeSh7IC4uLnF1ZXJpZXMucmVqZWN0cywgbGltaXQ6IDEwMCB9KSxcblxuICAgICAgICAndmFsdWUnOiAoKSA9PiB7XG4gICAgICAgICAgc2V0UXVlcnkobnVsbCk7XG4gICAgICAgICAgZ28uZm9jdXMoZ28udmFsdWUgPT09IFRyZWVFZGl0b3IgPyAndmFsdWUnIDogVHJlZUVkaXRvcik7XG4gICAgICAgIH0sXG5cbiAgICAgICAgW1N0YWNrXTogKGcsIHYsIG8pID0+IG9wZW5MaW5rKG8/LmlkKSxcbiAgICAgIH19XG4gICAgICBmb2N1cz17e1xuICAgICAgICB1cDogKHEsIHYsIG8pID0+IGdvLnNldCgpLmdvPy5nbz8uZG8oJ3VwJyksXG4gICAgICAgIGRvd246IChxLCB2LCBvKSA9PiBnby5zZXQoKS5nbz8uZ28/LmRvKCdkb3duJyksXG4gICAgICAgIGxlZnQ6IChxLCB2LCBvKSA9PiBnby5zZXQobz8ubGVmdCkuZ28/LmdvPy5kbygnbGVmdCcpLFxuICAgICAgICByaWdodDogKHEsIHYsIG8pID0+IGdvLnNldChvPy5yaWdodCkuZ28/LmdvPy5kbygncmlnaHQnKSxcbiAgICAgIH19XG4gICAgPlxuICAgICAgPGMuSFN0YWNrIHJlZj17cmVmfSBoPScxMDAlJyBvdmVyZmxvdz0naGlkZGVuJz5cbiAgICAgICAge2NvbnRlbnR9XG4gICAgICA8L2MuSFN0YWNrPlxuICAgICAgey8qIHshIXF1ZXJ5ICYmIDxnby5RdWVyeSBxdWVyeT17cXVlcnl9IG9uQ2hhbmdlPXsoeyBkYXRhIH0pID0+IHNldExpbmtzKGRhdGEpfSAvPn0gKi99XG4gICAgPC9nby5Pbj5cbiAgfTtcbn1cbiJdfQ==",
        "link_id": 2643
      }
    },
    {
      "id": 2644,
      "type_id": 3,
      "from_id": 2639,
      "to_id": 2643,
      "value": {
        "id": 790,
        "value": "generated",
        "link_id": 2644
      }
    },
    {
      "id": 2645,
      "type_id": 143,
      "from_id": 2643,
      "to_id": 2639
    },
    {
      "id": 2646,
      "type_id": 3,
      "from_id": 2639,
      "to_id": 2645
    },
    {
      "id": 2650,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 821,
        "value": "({ deep, data, require, Go }) => {\n  const { MdEdit, MdPreview, MdSaveAlt } = require(\"react-icons/md\");\n  const React = require('react');\n\n  const {\n    TypedIcon, DownIcon, UpIcon, TypeIcon, InIcon, OutIcon, FromIcon, ToIcon,\n    useSymbol,\n  } = require('@deep-foundation/perception-app');\n  \n  const c = require('@chakra-ui/react');\n\n  const dpl = '@deep-foundation/perception-links';\n  const dc = '@deep-foundation/core';\n  \n  const History = deep.idLocal(dpl, 'History');\n  const Header = deep.idLocal(dpl, 'Header');\n  const Search = deep.idLocal(dpl, 'Search');\n  const TreeQuery = deep.idLocal(dpl, 'TreeQuery');\n  const TreeList = deep.idLocal(dpl, 'TreeList');\n  const TreeLink = deep.idLocal(dpl, 'TreeLink');\n  const TreeLinkInsert = deep.idLocal(dpl, 'TreeLinkInsert');\n  const TreeLinkDelete = deep.idLocal(dpl, 'TreeLinkDelete');\n  const TreeLinkButton = deep.idLocal(dpl, 'TreeLinkButton');\n\n  const Item = ({ l, isActive }) => {\n    const go = Go.useGo();\n    return <c.Box ref={go.ref} w='100%'>\n      <go.Handler\n        handlerId={TreeLinkButton} linkId={l.id}\n        onClick={() => go.go.focus(l.id).go.do(l.id)} variant='full'\n        isActive={isActive} w='100%'\n      />\n    </c.Box>;\n  }\n\n  return ({\n    go,\n    handlerId,\n\n    isActive,\n    operations = true,\n    saveHistory = false,\n\n    children,\n  }, ref) => {\n    const [results, setResults] = React.useState([]);\n\n    const content = <c.Flex ref={ref} direction='column'\n      position='relative' minW='30em' maxW='30em' h='100%'\n      bg={isActive ? 'deepBg' : 'deepBgDark'}\n    >\n      <c.VStack ref={ref}\n        flex={1}\n        w='100%' h='100%'\n      >\n        <go.Handler\n          handlerId={TreeLinkButton} linkId={go.linkId}\n          onClick={() => go.focus('current').go.do('current')} needParent={false}\n          isActive={go.value === 'current'} w='100%'\n        />\n        <c.Box w='100%'>\n          <go.Provider linkId={Search}>\n            <go.Handler\n              handlerId={Search} linkId={go.linkId}\n              isActive={go.value === Search} w='100%'\n              onSearch={(results) => setResults(results)}\n            />\n          </go.Provider>\n        </c.Box>\n        <go.Provider linkId={TreeList}>\n          <go.Handler\n            handlerId={TreeList} linkId={TreeList} links={results}\n            isActive={go.value === TreeList} w='100%' flex='1'\n          />\n        </go.Provider>\n      </c.VStack>\n      {children}\n    </c.Flex>;\n\n    React.useEffect(() => {\n      if (go?.current) go?.current.scroll();\n    }, [go.value]);\n\n    const nav = go.useNav();\n    nav('current', 'prev', 'up', 'next', Search);\n    nav(Search, 'prev', 'current', 'next', TreeList);\n    nav(TreeList, 'prev', Search, 'next', TreeList);\n\n    return <go.Provider\n      onDo={{\n        current: () => go.do('next', { linkId: go.linkId, handlerId: TreeLink }),\n        focus: () => go.focus('current').go.scroll();\n        up: () =>  go.focus(nav.get(go.value, 'up')),\n        down: () => go.focus(nav.get(go.value, 'down')),\n        space: () => go.go.do('next', {\n          linkId: go.value === 'current' ? go.linkId : go.value === TreeList ? go(TreeList).linkId : go.linkId,\n          handlerId: TreeLink\n        }),\n      }}\n      onFocus={{\n        current: () => go.save(handlerId),\n        up: () => go?.go.do('up'),\n        down: () => go?.go.do('down'),\n      }}\n    >\n      {content}\n    </go.Provider>\n  };\n}\n",
        "link_id": 2650
      }
    },
    {
      "id": 2651,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 2650,
      "value": {
        "id": 792,
        "value": "TreeQueryComponent",
        "link_id": 2651
      }
    },
    {
      "id": 2652,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 794,
        "value": "async ({ deep, data, Go, require }) => {\n  const React = require('react');\n  const { PiGraphBold } = require(\"react-icons/pi\");\n  const c = require('@chakra-ui/react');\n  const _ = require('lodash');\n\n  const dpl = '@deep-foundation/perception-links';\n  const dc = '@deep-foundation/core';\n\n  const Dpl = deep.idLocal(dpl);\n  const Focus = deep.idLocal(dc, 'Focus');\n  const Active = deep.idLocal(dc, 'Active');\n  const History = deep.idLocal(dpl, 'History');\n  const Layer = deep.idLocal(dpl, 'Layer');\n  const Graph = deep.idLocal(dpl, 'Graph');\n  const GraphLink = deep.idLocal(dpl, 'GraphLink');\n  const containTree = deep.idLocal(dc, 'containTree');\n\n  const Link = React.memo(({ isActive, ...props }) => {\n    const go = Go.useGo();\n    return <>\n      <go.Handler handlerId={GraphLink} isActive={isActive} {...props} />\n    </>;\n  }, _.isEqual);\n\n  return ({\n    go,\n    using = false,\n    initialId = deep.linkId,\n  }, ref) => {\n    const initialOpened = React.useMemo(() => {\n      if (!initialId) return [];\n      return [{ link: deep.get(initialId) }];\n    }, []);\n    const [opened, setOpened] = React.useState(initialOpened);\n    const parental = React.useMemo(() => {\n      const byParent = {};\n      for (let i = 0; i < opened.length; i++) {\n        if (opened[i]?.parentId) {\n          byParent[opened[i].parentId] = byParent[opened[i]?.parentId] || [];\n          byParent[opened[i].parentId].push(opened[i]);\n        }\n      }\n      return byParent;\n    }, [opened]);\n    React.useEffect(() => {\n      if (initialId) go.do('use', { id: initialId });\n    }, []);\n    // deep.useSubscription({\n    //   type_id: { _in: [History, Focus, Active] },\n    //   from_id: deep.linkId,\n    //   order_by: { id: 'desc' },\n    //   return: {\n    //     item: { relation: 'to' },\n    //   },\n    // });\n    // const history = deep.useLocalSubscription({\n    //   type_id: History,\n    //   from_id: deep.linkId,\n    //   order_by: { id: 'desc' },\n    // });\n\n    React.useEffect(() => {\n      if (go?.current) {\n        if (using && go.root()?.data?.usedId != go.value) go.root().do('use', { id: go.value });\n        go.do('changed', { id: go.value });\n        go?.current?.do('scroll');\n      }\n    }, [go.value]);\n\n    const mapOpened = (opened, i) => <go.Provider key={opened.link.id} linkId={opened.link.id}>\n      {/* <Link position={{ y: 0, x: 0-(i * 90) }} locked/> */}\n      <Link isActive={go.value === opened.link.id}>\n        {!!parental[opened.link?.id] && parental[opened.link.id].map(mapOpened)}\n      </Link>\n    </go.Provider>;\n\n    return <go.On do={{\n      focus: (g, v, o) => o?.id ? go.focus(o?.id) : initialId && !go.value ? go.focus(initialId) : undefined,\n      use: (g, v, o) => {\n        o?.id && o?.id != go.value && go(o?.id) && go.set(o.id).go(o?.id).go?.do('scroll').go?.do('use')\n      },\n      open: (g, v, { id, ids: _ids, parentId, focus } = {}) => {\n        const ids = id ? [id] : _ids;\n        if (ids?.length) {\n          const toAdd = [];\n          for (let i in ids) {\n            const id = ids[i];\n            if (!opened.find(o => o?.link?.id === id)) toAdd.push({ link: deep.get(id), parentId });\n          }\n          if (toAdd.length) setOpened([...opened, ...toAdd]);\n          if (focus && ids[0]) go.awaitRef(ids[0]).then(g => {\n            go.focus(ids[0]).go(ids[0]).do('scroll');\n          });\n        }\n      },\n    }}>\n      <c.Box\n        w='100%' h='100%'\n        ref={ref}\n      >\n        <go.Graph onLoaded={cy => {\n          window.cy = cy;\n        }}>\n          {<go.Provider linkId={deep.linkId}>\n            <Link />\n          </go.Provider>}\n          <go.GraphStyle stylesheet={[\n            {\n              selector: '.link-children',\n              style: {\n                'background-opacity': 0.05,\n                'background-color': 'deepBgGraphChildren',\n                opacity: 1,\n                'background-fit': 'cover',\n                'border-width': 0,\n              }\n            },\n            {\n              selector: '.link-file',\n              style: {\n                color: 'deepColor',\n                width: 30,\n                height: 30,\n                'font-size': 16,\n                'text-margin-y': 23, // -4\n                'text-margin-x': -2,\n                label: 'data(label)',\n                \"text-wrap\": \"wrap\",\n                'background-image': 'data(image)',\n                'background-fit': 'cover',\n              }\n            },\n            {\n              selector: '.link-ghost',\n              style: {\n                color: 'deepLinkNodeColor',\n                'background-opacity': 0,\n                'background-color': 'deepLinkNodeBg',\n                width: 30,\n                height: 30,\n                'font-size': 16,\n                'text-margin-y': 23, // -4\n                'text-margin-x': 1,\n                'label': 'data(label)',\n                \"text-wrap\": \"wrap\",\n                'background-fit': 'cover',\n                'border-color': 'deepLinkNodeColor',\n                'border-width': 3,\n              }\n            },\n            {\n              selector: '.link-node',\n              style: {\n                color: 'deepLinkNodeColor',\n                'background-opacity': 1,\n                'background-color': 'deepLinkNodeBg',\n                opacity: 1,\n                width: 30,\n                height: 30,\n                'font-size': 16,\n                'text-margin-y': 23, // -4\n                'text-margin-x': 1,\n                'label': 'data(label)',\n                \"text-wrap\": \"wrap\",\n                'background-fit': 'cover',\n              }\n            },\n            {\n              selector: '.link-node-active',\n              style: {\n                \"border-color\": \"deepColorActive\",\n                'border-width': '3',\n              }\n            },\n            {\n              selector: '.link-edge',\n              style: {\n                width: 1,\n                'curve-style': 'bezier',\n                'target-distance-from-node': 8,\n                'source-distance-from-node': 1,\n              }\n            },\n            {\n              selector: '.link-edge-active',\n              style: {\n                \"line-color\": \"deepColorActive\",\n              }\n            },\n            {\n              selector: '.link-to',\n              style: {\n                'target-arrow-shape': 'triangle',\n              }\n            },\n            {\n              selector: '.link-from',\n              style: {\n                'target-arrow-shape': 'tee',\n              }\n            },\n            {\n              selector: '.link-type',\n              style: {\n                'target-arrow-shape': 'triangle',\n                'line-style': 'dashed',\n                'line-dash-pattern': [5, 5]\n              }\n            },\n          ]} />\n          {opened.map(mapOpened)}\n        </go.Graph>\n      </c.Box>\n    </go.On>;\n  };\n}",
        "link_id": 2652
      }
    },
    {
      "id": 2653,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 2652,
      "value": {
        "id": 793,
        "value": "GraphComponent",
        "link_id": 2653
      }
    },
    {
      "id": 2656,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 796,
        "value": "async ({ deep, data, Go, require }) => {\n    const React = require('react');\n    const { PiGraphBold } = require(\"react-icons/pi\");\n    const c = require('@chakra-ui/react');\n    const _ = require('lodash');\n    const dpl = '@deep-foundation/perception-links';\n    const dc = '@deep-foundation/core';\n    const Dpl = deep.idLocal(dpl);\n    const Focus = deep.idLocal(dc, 'Focus');\n    const Active = deep.idLocal(dc, 'Active');\n    const History = deep.idLocal(dpl, 'History');\n    const Layer = deep.idLocal(dpl, 'Layer');\n    const Graph = deep.idLocal(dpl, 'Graph');\n    const GraphLink = deep.idLocal(dpl, 'GraphLink');\n    const containTree = deep.idLocal(dc, 'containTree');\n    const Link = React.memo(({ isActive, ...props }) => {\n        const go = Go.useGo();\n        return React.createElement(React.Fragment, null,\n            React.createElement(go.Handler, { handlerId: GraphLink, isActive: isActive, ...props }));\n    }, _.isEqual);\n    return ({ go, using = false, initialId = deep.linkId, }, ref) => {\n        const initialOpened = React.useMemo(() => {\n            if (!initialId)\n                return [];\n            return [{ link: deep.get(initialId) }];\n        }, []);\n        const [opened, setOpened] = React.useState(initialOpened);\n        const parental = React.useMemo(() => {\n            const byParent = {};\n            for (let i = 0; i < opened.length; i++) {\n                if (opened[i]?.parentId) {\n                    byParent[opened[i].parentId] = byParent[opened[i]?.parentId] || [];\n                    byParent[opened[i].parentId].push(opened[i]);\n                }\n            }\n            return byParent;\n        }, [opened]);\n        React.useEffect(() => {\n            if (initialId)\n                go.do('use', { id: initialId });\n        }, []);\n        React.useEffect(() => {\n            if (go?.current) {\n                if (using && go.root()?.data?.usedId != go.value)\n                    go.root().do('use', { id: go.value });\n                go.do('changed', { id: go.value });\n                go?.current?.do('scroll');\n            }\n        }, [go.value]);\n        const mapOpened = (opened, i) => React.createElement(go.Provider, { key: opened.link.id, linkId: opened.link.id },\n            React.createElement(Link, { isActive: go.value === opened.link.id }, !!parental[opened.link?.id] && parental[opened.link.id].map(mapOpened)));\n        return React.createElement(go.On, { do: {\n                focus: (g, v, o) => o?.id ? go.focus(o?.id) : initialId && !go.value ? go.focus(initialId) : undefined,\n                use: (g, v, o) => {\n                    o?.id && o?.id != go.value && go(o?.id) && go.set(o.id).go(o?.id).go?.do('scroll').go?.do('use');\n                },\n                open: (g, v, { id, ids: _ids, parentId, focus } = {}) => {\n                    const ids = id ? [id] : _ids;\n                    if (ids?.length) {\n                        const toAdd = [];\n                        for (let i in ids) {\n                            const id = ids[i];\n                            if (!opened.find(o => o?.link?.id === id))\n                                toAdd.push({ link: deep.get(id), parentId });\n                        }\n                        if (toAdd.length)\n                            setOpened([...opened, ...toAdd]);\n                        if (focus && ids[0])\n                            go.awaitRef(ids[0]).then(g => {\n                                go.focus(ids[0]).go(ids[0]).do('scroll');\n                            });\n                    }\n                },\n            } },\n            React.createElement(c.Box, { w: '100%', h: '100%', ref: ref },\n                React.createElement(go.Graph, { onLoaded: cy => {\n                        window.cy = cy;\n                    } },\n                    React.createElement(go.Provider, { linkId: deep.linkId },\n                        React.createElement(Link, null)),\n                    React.createElement(go.GraphStyle, { stylesheet: [\n                            {\n                                selector: '.link-children',\n                                style: {\n                                    'background-opacity': 0.05,\n                                    'background-color': 'deepBgGraphChildren',\n                                    opacity: 1,\n                                    'background-fit': 'cover',\n                                    'border-width': 0,\n                                }\n                            },\n                            {\n                                selector: '.link-file',\n                                style: {\n                                    color: 'deepColor',\n                                    width: 30,\n                                    height: 30,\n                                    'font-size': 16,\n                                    'text-margin-y': 23,\n                                    'text-margin-x': -2,\n                                    label: 'data(label)',\n                                    \"text-wrap\": \"wrap\",\n                                    'background-image': 'data(image)',\n                                    'background-fit': 'cover',\n                                }\n                            },\n                            {\n                                selector: '.link-ghost',\n                                style: {\n                                    color: 'deepLinkNodeColor',\n                                    'background-opacity': 0,\n                                    'background-color': 'deepLinkNodeBg',\n                                    width: 30,\n                                    height: 30,\n                                    'font-size': 16,\n                                    'text-margin-y': 23,\n                                    'text-margin-x': 1,\n                                    'label': 'data(label)',\n                                    \"text-wrap\": \"wrap\",\n                                    'background-fit': 'cover',\n                                    'border-color': 'deepLinkNodeColor',\n                                    'border-width': 3,\n                                }\n                            },\n                            {\n                                selector: '.link-node',\n                                style: {\n                                    color: 'deepLinkNodeColor',\n                                    'background-opacity': 1,\n                                    'background-color': 'deepLinkNodeBg',\n                                    opacity: 1,\n                                    width: 30,\n                                    height: 30,\n                                    'font-size': 16,\n                                    'text-margin-y': 23,\n                                    'text-margin-x': 1,\n                                    'label': 'data(label)',\n                                    \"text-wrap\": \"wrap\",\n                                    'background-fit': 'cover',\n                                }\n                            },\n                            {\n                                selector: '.link-node-active',\n                                style: {\n                                    \"border-color\": \"deepColorActive\",\n                                    'border-width': '3',\n                                }\n                            },\n                            {\n                                selector: '.link-edge',\n                                style: {\n                                    width: 1,\n                                    'curve-style': 'bezier',\n                                    'target-distance-from-node': 8,\n                                    'source-distance-from-node': 1,\n                                }\n                            },\n                            {\n                                selector: '.link-edge-active',\n                                style: {\n                                    \"line-color\": \"deepColorActive\",\n                                }\n                            },\n                            {\n                                selector: '.link-to',\n                                style: {\n                                    'target-arrow-shape': 'triangle',\n                                }\n                            },\n                            {\n                                selector: '.link-from',\n                                style: {\n                                    'target-arrow-shape': 'tee',\n                                }\n                            },\n                            {\n                                selector: '.link-type',\n                                style: {\n                                    'target-arrow-shape': 'triangle',\n                                    'line-style': 'dashed',\n                                    'line-dash-pattern': [5, 5]\n                                }\n                            },\n                        ] }),\n                    opened.map(mapOpened))));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFO0lBQ3BDLE1BQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUMvQixNQUFNLEVBQUUsV0FBVyxFQUFFLEdBQUcsT0FBTyxDQUFDLGdCQUFnQixDQUFDLENBQUM7SUFDbEQsTUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLGtCQUFrQixDQUFDLENBQUM7SUFDdEMsTUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBRTVCLE1BQU0sR0FBRyxHQUFHLG1DQUFtQyxDQUFDO0lBQ2hELE1BQU0sRUFBRSxHQUFHLHVCQUF1QixDQUFDO0lBRW5DLE1BQU0sR0FBRyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDOUIsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDeEMsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsUUFBUSxDQUFDLENBQUM7SUFDMUMsTUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsU0FBUyxDQUFDLENBQUM7SUFDN0MsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDekMsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDekMsTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsV0FBVyxDQUFDLENBQUM7SUFDakQsTUFBTSxXQUFXLEdB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QyxDQUFDLENBQUM7UUFFZixNQUFNLFNBQVMsR0FBRyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLG9CQUFDLEVBQUUsQ0FBQyxRQUFRLElBQUMsR0FBRyxFQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUFFLE1BQU0sRUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUU7WUFFdkYsb0JBQUMsSUFBSSxJQUFDLFFBQVEsRUFBRSxFQUFFLENBQUMsS0FBSyxLQUFLLE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxJQUN4QyxDQUFDLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLElBQUksUUFBUSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUNsRSxDQUNLLENBQUM7UUFFZixPQUFPLG9CQUFDLEVBQUUsQ0FBQyxFQUFFLElBQUMsRUFBRSxFQUFFO2dCQUNoQixLQUFLLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVM7Z0JBQ3RHLEdBQUcsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUU7b0JBQ2YsQ0FBQyxFQUFFLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxJQUFJLEVBQUUsQ0FBQyxLQUFLLElBQUksRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLEVB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LENBQUM7b0NBQzlCLDJCQUEyQixFQUFFLENBQUM7aUNBQy9COzZCQUNGOzRCQUNEO2dDQUNFLFFBQVEsRUFBRSxtQkFBbUI7Z0NBQzdCLEtBQUssRUFBRTtvQ0FDTCxZQUFZLEVBQUUsaUJBQWlCO2lDQUNoQzs2QkFDRjs0QkFDRDtnQ0FDRSxRQUFRLEVBQUUsVUFBVTtnQ0FDcEIsS0FBSyxFQUFFO29DQUNMLG9CQUFvQixFQUFFLFVBQVU7aUNBQ2pDOzZCQUNGOzRCQUNEO2dDQUNFLFFBQVEsRUFBRSxZQUFZO2dDQUN0QixLQUFLLEVBQUU7b0NBQ0wsb0JBQW9CLEVBQUUsS0FBSztpQ0FDNUI7NkJBQ0Y7NEJBQ0Q7Z0NBQ0UsUUFBUSxFQUFFLFlBQVk7Z0NBQ3RCLEtBQUssRUFBRTtvQ0FDTCxvQkFBb0IsRUFBRSxVQUFVO29DQUNoQyxZQUFZLEVBQUUsUUFBUTtvQ0FDdEIsbUJBQW1CLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO2lDQUM1Qjs2QkFDRjt5QkFDRixHQUFJO29CQUNKLE1BQU0sQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLENBQ2IsQ0FDTCxDQUNGLENBQUM7SUFDWCxDQUFDLENBQUM7QUFDSixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJhc3luYyAoeyBkZWVwLCBkYXRhLCBHbywgcmVxdWlyZSB9KSA9PiB7XG4gIGNvbnN0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbiAgY29uc3QgeyBQaUdyYXBoQm9sZCB9ID0gcmVxdWlyZShcInJlYWN0LWljb25zL3BpXCIpO1xuICBjb25zdCBjID0gcmVxdWlyZSgnQGNoYWtyYS11aS9yZWFjdCcpO1xuICBjb25zdCBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XG5cbiAgY29uc3QgZHBsID0gJ0BkZWVwLWZvdW5kYXRpb24vcGVyY2VwdGlvbi1saW5rcyc7XG4gIGNvbnN0IGRjID0gJ0BkZWVwLWZvdW5kYXRpb24vY29yZSc7XG5cbiAgY29uc3QgRHBsID0gZGVlcC5pZExvY2FsKGRwbCk7XG4gIGNvbnN0IEZvY3VzID0gZGVlcC5pZExvY2FsKGRjLCAnRm9jdXMnKTtcbiAgY29uc3QgQWN0aXZlID0gZGVlcC5pZExvY2FsKGRjLCAnQWN0aXZlJyk7XG4gIGNvbnN0IEhpc3RvcnkgPSBkZWVwLmlkTG9jYWwoZHBsLCAnSGlzdG9yeScpO1xuICBjb25zdCBMYXllciA9IGRlZXAuaWRMb2NhbChkcGwsICdMYXllcicpO1xuICBjb25zdCBHcmFwaCA9IGRlZXAuaWRMb2NhbChkcGwsICdHcmFwaCcpO1xuICBjb25zdCBHcmFwaExpbmsgPSBkZWVwLmlkTG9jYWwoZHBsLCAnR3JhcGhMaW5rJyk7XG4gIGNvbnN0IGNvbnRhaW5UcmVlID0gZGVlcC5pZExvY2FsKGRjLCAnY29udGFpblRyZWUnKTtcblxuICBjb25zdCBMaW5rID0gUmVhY3QubWVtbygoeyBpc0FjdGl2ZSwgLi4ucHJvcHMgfSkgPT4ge1xuICAgIGNvbnN0IGdvID0gR28udXNlR28oKTtcbiAgICByZXR1cm4gPD5cbiAgICAgIDxnby5IYW5kbGVyIGhhbmRsZXJJZD17R3JhcGhMaW5rfSBpc0FjdGl2ZT17aXNBY3RpdmV9IHsuLi5wcm9wc30gLz5cbiAgICA8Lz47XG4gIH0sIF8uaXNFcXVhbCk7XG5cbiAgcmV0dXJuICh7XG4gICAgZ28sXG4gICAgdXNpbmcgPSBmYWxzZSxcbiAgICBpbml0aWFsSWQgPSBkZWVwLmxpbmtJZCxcbiAgfSwgcmVmKSA9PiB7XG4gICAgY29uc3QgaW5pdGlhbE9wZW5lZCA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgICAgaWYgKCFpbml0aWFsSWQpIHJldHVybiBbXTtcbiAgICAgIHJldHVybiBbeyBsaW5rOiBkZWVwLmdldChpbml0aWFsSWQpIH1dO1xuICAgIH0sIFtdKTtcbiAgICBjb25zdCBbb3BlbmVkLCBzZXRPcGVuZWRdID0gUmVhY3QudXNlU3RhdGUoaW5pdGlhbE9wZW5lZCk7XG4gICAgY29uc3QgcGFyZW50YWwgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICAgIGNvbnN0IGJ5UGFyZW50ID0ge307XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9wZW5lZC5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAob3BlbmVkW2ldPy5wYXJlbnRJZCkge1xuICAgICAgICAgIGJ5UGFyZW50W29wZW5lZFtpXS5wYXJlbnRJZF0gPSBieVBhcmVudFtvcGVuZWRbaV0/LnBhcmVudElkXSB8fCBbXTtcbiAgICAgICAgICBieVBhcmVudFtvcGVuZWRbaV0ucGFyZW50SWRdLnB1c2gob3BlbmVkW2ldKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGJ5UGFyZW50O1xuICAgIH0sIFtvcGVuZWRdKTtcbiAgICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgaWYgKGluaXRpYWxJZCkgZ28uZG8oJ3VzZScsIHsgaWQ6IGluaXRpYWxJZCB9KTtcbiAgICB9LCBbXSk7XG4gICAgLy8gZGVlcC51c2VTdWJzY3JpcHRpb24oe1xuICAgIC8vICAgdHlwZV9pZDogeyBfaW46IFtIaXN0b3J5LCBGb2N1cywgQWN0aXZlXSB9LFxuICAgIC8vICAgZnJvbV9pZDogZGVlcC5saW5rSWQsXG4gICAgLy8gICBvcmRlcl9ieTogeyBpZDogJ2Rlc2MnIH0sXG4gICAgLy8gICByZXR1cm46IHtcbiAgICAvLyAgICAgaXRlbTogeyByZWxhdGlvbjogJ3RvJyB9LFxuICAgIC8vICAgfSxcbiAgICAvLyB9KTtcbiAgICAvLyBjb25zdCBoaXN0b3J5ID0gZGVlcC51c2VMb2NhbFN1YnNjcmlwdGlvbih7XG4gICAgLy8gICB0eXBlX2lkOiBIaXN0b3J5LFxuICAgIC8vICAgZnJvbV9pZDogZGVlcC5saW5rSWQsXG4gICAgLy8gICBvcmRlcl9ieTogeyBpZDogJ2Rlc2MnIH0sXG4gICAgLy8gfSk7XG5cbiAgICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgaWYgKGdvPy5jdXJyZW50KSB7XG4gICAgICAgIGlmICh1c2luZyAmJiBnby5yb290KCk/LmRhdGE/LnVzZWRJZCAhPSBnby52YWx1ZSkgZ28ucm9vdCgpLmRvKCd1c2UnLCB7IGlkOiBnby52YWx1ZSB9KTtcbiAgICAgICAgZ28uZG8oJ2NoYW5nZWQnLCB7IGlkOiBnby52YWx1ZSB9KTtcbiAgICAgICAgZ28/LmN1cnJlbnQ/LmRvKCdzY3JvbGwnKTtcbiAgICAgIH1cbiAgICB9LCBbZ28udmFsdWVdKTtcblxuICAgIGNvbnN0IG1hcE9wZW5lZCA9IChvcGVuZWQsIGkpID0+IDxnby5Qcm92aWRlciBrZXk9e29wZW5lZC5saW5rLmlkfSBsaW5rSWQ9e29wZW5lZC5saW5rLmlkfT5cbiAgICAgIHsvKiA8TGluayBwb3NpdGlvbj17eyB5OiAwLCB4OiAwLShpICogOTApIH19IGxvY2tlZC8+ICovfVxuICAgICAgPExpbmsgaXNBY3RpdmU9e2dvLnZhbHVlID09PSBvcGVuZWQubGluay5pZH0+XG4gICAgICAgIHshIXBhcmVudGFsW29wZW5lZC5saW5rPy5pZF0gJiYgcGFyZW50YWxbb3BlbmVkLmxpbmsuaWRdLm1hcChtYXBPcGVuZWQpfVxuICAgICAgPC9MaW5rPlxuICAgIDwvZ28uUHJvdmlkZXI+O1xuXG4gICAgcmV0dXJuIDxnby5PbiBkbz17e1xuICAgICAgZm9jdXM6IChnLCB2LCBvKSA9PiBvPy5pZCA/IGdvLmZvY3VzKG8/LmlkKSA6IGluaXRpYWxJZCAmJiAhZ28udmFsdWUgPyBnby5mb2N1cyhpbml0aWFsSWQpIDogdW5kZWZpbmVkLFxuICAgICAgdXNlOiAoZywgdiwgbykgPT4ge1xuICAgICAgICBvPy5pZCAmJiBvPy5pZCAhPSBnby52YWx1ZSAmJiBnbyhvPy5pZCkgJiYgZ28uc2V0KG8uaWQpLmdvKG8/LmlkKS5nbz8uZG8oJ3Njcm9sbCcpLmdvPy5kbygndXNlJylcbiAgICAgIH0sXG4gICAgICBvcGVuOiAoZywgdiwgeyBpZCwgaWRzOiBfaWRzLCBwYXJlbnRJZCwgZm9jdXMgfSA9IHt9KSA9PiB7XG4gICAgICAgIGNvbnN0IGlkcyA9IGlkID8gW2lkXSA6IF9pZHM7XG4gICAgICAgIGlmIChpZHM/Lmxlbmd0aCkge1xuICAgICAgICAgIGNvbnN0IHRvQWRkID0gW107XG4gICAgICAgICAgZm9yIChsZXQgaSBpbiBpZHMpIHtcbiAgICAgICAgICAgIGNvbnN0IGlkID0gaWRzW2ldO1xuICAgICAgICAgICAgaWYgKCFvcGVuZWQuZmluZChvID0+IG8/Lmxpbms/LmlkID09PSBpZCkpIHRvQWRkLnB1c2goeyBsaW5rOiBkZWVwLmdldChpZCksIHBhcmVudElkIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodG9BZGQubGVuZ3RoKSBzZXRPcGVuZWQoWy4uLm9wZW5lZCwgLi4udG9BZGRdKTtcbiAgICAgICAgICBpZiAoZm9jdXMgJiYgaWRzWzBdKSBnby5hd2FpdFJlZihpZHNbMF0pLnRoZW4oZyA9PiB7XG4gICAgICAgICAgICBnby5mb2N1cyhpZHNbMF0pLmdvKGlkc1swXSkuZG8oJ3Njcm9sbCcpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgIH19PlxuICAgICAgPGMuQm94XG4gICAgICAgIHc9JzEwMCUnIGg9JzEwMCUnXG4gICAgICAgIHJlZj17cmVmfVxuICAgICAgPlxuICAgICAgICA8Z28uR3JhcGggb25Mb2FkZWQ9e2N5ID0+IHtcbiAgICAgICAgICB3aW5kb3cuY3kgPSBjeTtcbiAgICAgICAgfX0+XG4gICAgICAgICAgezxnby5Qcm92aWRlciBsaW5rSWQ9e2RlZXAubGlua0lkfT5cbiAgICAgICAgICAgIDxMaW5rIC8+XG4gICAgICAgICAgPC9nby5Qcm92aWRlcj59XG4gICAgICAgICAgPGdvLkdyYXBoU3R5bGUgc3R5bGVzaGVldD17W1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBzZWxlY3RvcjogJy5saW5rLWNoaWxkcmVuJyxcbiAgICAgICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgICAgICAnYmFja2dyb3VuZC1vcGFjaXR5JzogMC4wNSxcbiAgICAgICAgICAgICAgICAnYmFja2dyb3VuZC1jb2xvcic6ICdkZWVwQmdHcmFwaENoaWxkcmVuJyxcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgICAgICdiYWNrZ3JvdW5kLWZpdCc6ICdjb3ZlcicsXG4gICAgICAgICAgICAgICAgJ2JvcmRlci13aWR0aCc6IDAsXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHNlbGVjdG9yOiAnLmxpbmstZmlsZScsXG4gICAgICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgY29sb3I6ICdkZWVwQ29sb3InLFxuICAgICAgICAgICAgICAgIHdpZHRoOiAzMCxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDMwLFxuICAgICAgICAgICAgICAgICdmb250LXNpemUnOiAxNixcbiAgICAgICAgICAgICAgICAndGV4dC1tYXJnaW4teSc6IDIzLCAvLyAtNFxuICAgICAgICAgICAgICAgICd0ZXh0LW1hcmdpbi14JzogLTIsXG4gICAgICAgICAgICAgICAgbGFiZWw6ICdkYXRhKGxhYmVsKScsXG4gICAgICAgICAgICAgICAgXCJ0ZXh0LXdyYXBcIjogXCJ3cmFwXCIsXG4gICAgICAgICAgICAgICAgJ2JhY2tncm91bmQtaW1hZ2UnOiAnZGF0YShpbWFnZSknLFxuICAgICAgICAgICAgICAgICdiYWNrZ3JvdW5kLWZpdCc6ICdjb3ZlcicsXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHNlbGVjdG9yOiAnLmxpbmstZ2hvc3QnLFxuICAgICAgICAgICAgICBzdHlsZToge1xuICAgICAgICAgICAgICAgIGNvbG9yOiAnZGVlcExpbmtOb2RlQ29sb3InLFxuICAgICAgICAgICAgICAgICdiYWNrZ3JvdW5kLW9wYWNpdHknOiAwLFxuICAgICAgICAgICAgICAgICdiYWNrZ3JvdW5kLWNvbG9yJzogJ2RlZXBMaW5rTm9kZUJnJyxcbiAgICAgICAgICAgICAgICB3aWR0aDogMzAsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAzMCxcbiAgICAgICAgICAgICAgICAnZm9udC1zaXplJzogMTYsXG4gICAgICAgICAgICAgICAgJ3RleHQtbWFyZ2luLXknOiAyMywgLy8gLTRcbiAgICAgICAgICAgICAgICAndGV4dC1tYXJnaW4teCc6IDEsXG4gICAgICAgICAgICAgICAgJ2xhYmVsJzogJ2RhdGEobGFiZWwpJyxcbiAgICAgICAgICAgICAgICBcInRleHQtd3JhcFwiOiBcIndyYXBcIixcbiAgICAgICAgICAgICAgICAnYmFja2dyb3VuZC1maXQnOiAnY292ZXInLFxuICAgICAgICAgICAgICAgICdib3JkZXItY29sb3InOiAnZGVlcExpbmtOb2RlQ29sb3InLFxuICAgICAgICAgICAgICAgICdib3JkZXItd2lkdGgnOiAzLFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBzZWxlY3RvcjogJy5saW5rLW5vZGUnLFxuICAgICAgICAgICAgICBzdHlsZToge1xuICAgICAgICAgICAgICAgIGNvbG9yOiAnZGVlcExpbmtOb2RlQ29sb3InLFxuICAgICAgICAgICAgICAgICdiYWNrZ3JvdW5kLW9wYWNpdHknOiAxLFxuICAgICAgICAgICAgICAgICdiYWNrZ3JvdW5kLWNvbG9yJzogJ2RlZXBMaW5rTm9kZUJnJyxcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgICAgIHdpZHRoOiAzMCxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDMwLFxuICAgICAgICAgICAgICAgICdmb250LXNpemUnOiAxNixcbiAgICAgICAgICAgICAgICAndGV4dC1tYXJnaW4teSc6IDIzLCAvLyAtNFxuICAgICAgICAgICAgICAgICd0ZXh0LW1hcmdpbi14JzogMSxcbiAgICAgICAgICAgICAgICAnbGFiZWwnOiAnZGF0YShsYWJlbCknLFxuICAgICAgICAgICAgICAgIFwidGV4dC13cmFwXCI6IFwid3JhcFwiLFxuICAgICAgICAgICAgICAgICdiYWNrZ3JvdW5kLWZpdCc6ICdjb3ZlcicsXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHNlbGVjdG9yOiAnLmxpbmstbm9kZS1hY3RpdmUnLFxuICAgICAgICAgICAgICBzdHlsZToge1xuICAgICAgICAgICAgICAgIFwiYm9yZGVyLWNvbG9yXCI6IFwiZGVlcENvbG9yQWN0aXZlXCIsXG4gICAgICAgICAgICAgICAgJ2JvcmRlci13aWR0aCc6ICczJyxcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgc2VsZWN0b3I6ICcubGluay1lZGdlJyxcbiAgICAgICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgICAgICB3aWR0aDogMSxcbiAgICAgICAgICAgICAgICAnY3VydmUtc3R5bGUnOiAnYmV6aWVyJyxcbiAgICAgICAgICAgICAgICAndGFyZ2V0LWRpc3RhbmNlLWZyb20tbm9kZSc6IDgsXG4gICAgICAgICAgICAgICAgJ3NvdXJjZS1kaXN0YW5jZS1mcm9tLW5vZGUnOiAxLFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBzZWxlY3RvcjogJy5saW5rLWVkZ2UtYWN0aXZlJyxcbiAgICAgICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgICAgICBcImxpbmUtY29sb3JcIjogXCJkZWVwQ29sb3JBY3RpdmVcIixcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgc2VsZWN0b3I6ICcubGluay10bycsXG4gICAgICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgJ3RhcmdldC1hcnJvdy1zaGFwZSc6ICd0cmlhbmdsZScsXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHNlbGVjdG9yOiAnLmxpbmstZnJvbScsXG4gICAgICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgJ3RhcmdldC1hcnJvdy1zaGFwZSc6ICd0ZWUnLFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBzZWxlY3RvcjogJy5saW5rLXR5cGUnLFxuICAgICAgICAgICAgICBzdHlsZToge1xuICAgICAgICAgICAgICAgICd0YXJnZXQtYXJyb3ctc2hhcGUnOiAndHJpYW5nbGUnLFxuICAgICAgICAgICAgICAgICdsaW5lLXN0eWxlJzogJ2Rhc2hlZCcsXG4gICAgICAgICAgICAgICAgJ2xpbmUtZGFzaC1wYXR0ZXJuJzogWzUsIDVdXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgXX0gLz5cbiAgICAgICAgICB7b3BlbmVkLm1hcChtYXBPcGVuZWQpfVxuICAgICAgICA8L2dvLkdyYXBoPlxuICAgICAgPC9jLkJveD5cbiAgICA8L2dvLk9uPjtcbiAgfTtcbn0iXX0=",
        "link_id": 2656
      }
    },
    {
      "id": 2657,
      "type_id": 3,
      "from_id": 2652,
      "to_id": 2656,
      "value": {
        "id": 795,
        "value": "generated",
        "link_id": 2657
      }
    },
    {
      "id": 2658,
      "type_id": 143,
      "from_id": 2656,
      "to_id": 2652
    },
    {
      "id": 2659,
      "type_id": 3,
      "from_id": 2652,
      "to_id": 2658
    },
    {
      "id": 2607,
      "type_id": 1,
      "from_id": 8,
      "to_id": 8,
      "value": {
        "id": 780,
        "value": "",
        "link_id": 2607
      }
    },
    {
      "id": 2710,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 817,
        "value": "async ({ deep, data, Go, require }) => {\n    const React = require('react');\n    const c = require('@chakra-ui/react');\n    const dpl = '@deep-foundation/perception-links';\n    const dc = '@deep-foundation/core';\n    const Stack = deep.idLocal(dpl, 'Stack');\n    const Any = deep.idLocal(dc, 'Any');\n    const Query = deep.idLocal(dc, 'Query');\n    const TreeList = deep.idLocal(dpl, 'TreeList');\n    const TreeLink = deep.idLocal(dpl, 'TreeLink');\n    const TreeQuery = deep.idLocal(dpl, 'TreeQuery');\n    const Menu = deep.idLocal(dpl, 'Menu');\n    const Layer = deep.idLocal(dpl, 'Layer');\n    const Header = deep.idLocal(dpl, 'Header');\n    const History = deep.idLocal(dpl, 'History');\n    const HistoryHandler = deep.idLocal(dpl, 'HistoryHandler');\n    const handlers = {\n        [Any]: TreeLink,\n        [Query]: TreeQuery,\n    };\n    const getHandlerId = (linkId) => {\n        const l = deep.get(linkId);\n        console.log('getHandlerId', l);\n        return l?.type_id === Query ? TreeList : TreeLink;\n    };\n    function useStore(queryField, defaultValue) {\n        return React.useState(defaultValue);\n    }\n    return ({ go, using = false, queryField = '', saveHistory = false, fullWidth = null, initialId = deep.linkId, initialHandlerId, startProps = {}, }, ref) => {\n        const initialColumns = React.useMemo(() => {\n            if (!initialId)\n                return [];\n            return [[initialId, initialHandlerId || getHandlerId(initialId)]];\n        }, []);\n        const [columns, setColumns] = useStore(queryField, initialColumns);\n        const Item = React.useCallback(({ link, isActive, ...props }) => {\n            const go = Go.useGo();\n            return React.createElement(React.Fragment, null,\n                !!saveHistory && !!isActive && React.createElement(go.Save, { handlerId: link.handlerId }),\n                React.createElement(go.Handler, { linkId: link.id, handlerId: link.handlerId, isActive: isActive, fullWidth: fullWidth, saveHistory: saveHistory, ...props }));\n        }, [saveHistory, fullWidth]);\n        console.log({ columns });\n        const { data: list, ids } = React.useMemo(() => {\n            const ids = [];\n            const data = columns.map(c => {\n                ids.push(c[0]);\n                return { id: c[0], handlerId: c[1] };\n            });\n            return { data, ids };\n        }, [columns]);\n        const [concentrate, setConcentrate] = React.useState();\n        const { ids: concentrated } = deep.useSearch(concentrate, {\n            db: false, sort: false,\n            query: { id: { _in: ids } },\n            skip: !!concentrate,\n        });\n        return React.createElement(go.On, { do: {\n                focus: (g, v, linkId, o) => {\n                    !go.value && go.focus(Stack);\n                    o?.id && go.do('open', o);\n                },\n                use: (g, v, o) => go(Stack).do('use', o),\n                open: (g, v, { id, prevId, handlerId, focus } = {}) => {\n                    if (!id)\n                        throw new Error(`open options must contains id ({ id, prevId?, handlerId? })`);\n                    const founded = columns.find(c => c[0] === id);\n                    const _prevId = prevId || columns[columns.length - 1][0];\n                    if (founded)\n                        go.do('use', { id });\n                    else {\n                        const prevI = columns.findIndex(c => c[0] === _prevId);\n                        setColumns([\n                            ...(!!~prevI ? columns.slice(0, prevI + 1) : []),\n                            [id, handlerId || getHandlerId(id)],\n                            ...(!!~prevI ? columns.slice(prevI + 1) : []),\n                        ]);\n                    }\n                    if (focus)\n                        go(Stack).awaitRef(id).then(g => go(Stack).focus(id).go(id).scroll());\n                },\n                close: (g, v, o) => {\n                    if (!o.id)\n                        throw new Error(`close options must contains id ({ id })`);\n                    setColumns(columns.filter(c => c[0] !== o.id));\n                },\n                concentrate: (g, v, o) => {\n                    setConcentrate(o?.value);\n                },\n            } },\n            React.createElement(go.Provider, { linkId: Stack },\n                React.createElement(go.Component, { path: [dpl, 'Stack'], concentrated: !!concentrate && concentrated, links: list, direction: 'horizontal', Item: Item, using: using, saveHistory: saveHistory, startProps: startProps })));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFO0lBQ3BDLE1BQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUMvQixNQUFNLENBQUMsR0FBRyxPQUFPLENBQUMsa0JBQWtCLENBQUMsQ0FBQztJQUV0QyxNQUFNLEdBQUcsR0FBRyxtQ0FBbUMsQ0FBQztJQUNoRCxNQUFNLEVBQUUsR0FBRyx1QkFBdUIsQ0FBQztJQUVuQyxNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxPQUFPLENBQUMsQ0FBQztJQUN6QyxNQUFNLEdBQUcsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUUsRUFBRSxLQUFLLENBQUMsQ0FBQztJQUNwQyxNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUUsRUFBRSxPQUFPLENBQUMsQ0FBQztJQUN4QyxNQUFNLFFBQVEsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxVQUFVLENBQUMsQ0FBQztJQUMvQyxNQUFNLFFBQVEsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxVQUFVLENBQUMsQ0FBQztJQUMvQyxNQUFNLFNBQVMsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxXQUFXLENBQUMsQ0FBQztJQUNqRCxNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxNQUFNLENBQUMsQ0FBQztJQUN2QyxNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxPQUFPLENBQUMsQ0FBQztJQUN6QyxNQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcs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eyBkZWVwLCBkYXRhLCBHbywgcmVxdWlyZSB9KSA9PiB7XG4gIGNvbnN0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbiAgY29uc3QgYyA9IHJlcXVpcmUoJ0BjaGFrcmEtdWkvcmVhY3QnKTtcblxuICBjb25zdCBkcGwgPSAnQGRlZXAtZm91bmRhdGlvbi9wZXJjZXB0aW9uLWxpbmtzJztcbiAgY29uc3QgZGMgPSAnQGRlZXAtZm91bmRhdGlvbi9jb3JlJztcblxuICBjb25zdCBTdGFjayA9IGRlZXAuaWRMb2NhbChkcGwsICdTdGFjaycpO1xuICBjb25zdCBBbnkgPSBkZWVwLmlkTG9jYWwoZGMsICdBbnknKTtcbiAgY29uc3QgUXVlcnkgPSBkZWVwLmlkTG9jYWwoZGMsICdRdWVyeScpO1xuICBjb25zdCBUcmVlTGlzdCA9IGRlZXAuaWRMb2NhbChkcGwsICdUcmVlTGlzdCcpO1xuICBjb25zdCBUcmVlTGluayA9IGRlZXAuaWRMb2NhbChkcGwsICdUcmVlTGluaycpO1xuICBjb25zdCBUcmVlUXVlcnkgPSBkZWVwLmlkTG9jYWwoZHBsLCAnVHJlZVF1ZXJ5Jyk7XG4gIGNvbnN0IE1lbnUgPSBkZWVwLmlkTG9jYWwoZHBsLCAnTWVudScpO1xuICBjb25zdCBMYXllciA9IGRlZXAuaWRMb2NhbChkcGwsICdMYXllcicpO1xuICBjb25zdCBIZWFkZXIgPSBkZWVwLmlkTG9jYWwoZHBsLCAnSGVhZGVyJyk7XG4gIGNvbnN0IEhpc3RvcnkgPSBkZWVwLmlkTG9jYWwoZHBsLCAnSGlzdG9yeScpO1xuICBjb25zdCBIaXN0b3J5SGFuZGxlciA9IGRlZXAuaWRMb2NhbChkcGwsICdIaXN0b3J5SGFuZGxlcicpO1xuXG4gIGludGVyZmFjZSBDb2x1bW5JIHtcbiAgICBpZDogYW55O1xuICAgIGhhbmRsZXJJZDogYW55O1xuICAgIGZvY3VzPzogYm9vbGVhbjtcbiAgfVxuXG4gIGNvbnN0IGhhbmRsZXJzID0ge1xuICAgIFtBbnldOiBUcmVlTGluayxcbiAgICBbUXVlcnldOiBUcmVlUXVlcnksXG4gIH07XG5cbiAgY29uc3QgZ2V0SGFuZGxlcklkID0gKGxpbmtJZCkgPT4ge1xuICAgIGNvbnN0IGwgPSBkZWVwLmdldChsaW5rSWQpO1xuICAgIGNvbnNvbGUubG9nKCdnZXRIYW5kbGVySWQnLCBsKTtcbiAgICByZXR1cm4gbD8udHlwZV9pZCA9PT0gUXVlcnkgPyBUcmVlTGlzdCA6IFRyZWVMaW5rO1xuICB9XG5cbiAgZnVuY3Rpb24gdXNlU3RvcmUocXVlcnlGaWVsZCwgZGVmYXVsdFZhbHVlKSB7XG4gICAgLy8gcmV0dXJuIChxdWVyeUZpZWxkID8gR28udXNlUXVlcnlTdG9yZShxdWVyeUZpZWxkLCBkZWZhdWx0VmFsdWUpIDogUmVhY3QudXNlU3RhdGUoZGVmYXVsdFZhbHVlKSk7XG4gICAgcmV0dXJuIFJlYWN0LnVzZVN0YXRlKGRlZmF1bHRWYWx1ZSk7XG4gIH1cblxuICByZXR1cm4gKHtcbiAgICBnbyxcblxuICAgIHVzaW5nID0gZmFsc2UsXG4gICAgcXVlcnlGaWVsZCA9ICcnLFxuICAgIHNhdmVIaXN0b3J5ID0gZmFsc2UsXG4gICAgZnVsbFdpZHRoID0gbnVsbCxcbiAgICBpbml0aWFsSWQgPSBkZWVwLmxpbmtJZCxcbiAgICBpbml0aWFsSGFuZGxlcklkLFxuICAgIHN0YXJ0UHJvcHMgPSB7fSxcbiAgfSwgcmVmKSA9PiB7XG4gICAgY29uc3QgaW5pdGlhbENvbHVtbnMgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICAgIGlmICghaW5pdGlhbElkKSByZXR1cm4gW107XG4gICAgICByZXR1cm4gW1tpbml0aWFsSWQsIGluaXRpYWxIYW5kbGVySWQgfHwgZ2V0SGFuZGxlcklkKGluaXRpYWxJZCldXVxuICAgIH0sIFtdKTtcbiAgICBjb25zdCBbY29sdW1ucywgc2V0Q29sdW1uc10gPSB1c2VTdG9yZShxdWVyeUZpZWxkLCBpbml0aWFsQ29sdW1ucyk7XG4gICAgLy8gY29uc3QgW3Rlc3QsIHNldFRlc3RdID0gZ28udXNlUXVlcnlTdG9yZSgndGVzdCcsIDApO1xuICAgIFxuICAgIGNvbnN0IEl0ZW0gPSBSZWFjdC51c2VDYWxsYmFjaygoeyBsaW5rLCBpc0FjdGl2ZSwgLi4ucHJvcHMgfSkgPT4ge1xuICAgICAgY29uc3QgZ28gPSBHby51c2VHbygpO1xuICAgICAgcmV0dXJuIDw+XG4gICAgICAgIHshIXNhdmVIaXN0b3J5ICYmICEhaXNBY3RpdmUgJiYgPGdvLlNhdmUgaGFuZGxlcklkPXtsaW5rLmhhbmRsZXJJZH0vPn1cbiAgICAgICAgPGdvLkhhbmRsZXIgbGlua0lkPXtsaW5rLmlkfSBoYW5kbGVySWQ9e2xpbmsuaGFuZGxlcklkfVxuICAgICAgICAgIGlzQWN0aXZlPXtpc0FjdGl2ZX0gZnVsbFdpZHRoPXtmdWxsV2lkdGh9IHNhdmVIaXN0b3J5PXtzYXZlSGlzdG9yeX1cbiAgICAgICAgICB7Li4ucHJvcHN9XG4gICAgICAgIC8+XG4gICAgICA8Lz47XG4gICAgfSwgW3NhdmVIaXN0b3J5LCBmdWxsV2lkdGhdKTtcbiAgICBjb25zb2xlLmxvZyh7IGNvbHVtbnMgfSk7XG5cbiAgICBjb25zdCB7IGRhdGE6IGxpc3QsIGlkcyB9ID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgICBjb25zdCBpZHMgPSBbXTtcbiAgICAgIGNvbnN0IGRhdGEgPSBjb2x1bW5zLm1hcChjID0+IHtcbiAgICAgICAgaWRzLnB1c2goY1swXSk7XG4gICAgICAgIHJldHVybiB7IGlkOiBjWzBdLCBoYW5kbGVySWQ6IGNbMV0gfTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHsgZGF0YSwgaWRzIH07XG4gICAgfSwgW2NvbHVtbnNdKTtcblxuICAgIGNvbnN0IFtjb25jZW50cmF0ZSwgc2V0Q29uY2VudHJhdGVdID0gUmVhY3QudXNlU3RhdGUoKTtcbiAgICBjb25zdCB7IGlkczogY29uY2VudHJhdGVkIH0gPSBkZWVwLnVzZVNlYXJjaChjb25jZW50cmF0ZSwge1xuICAgICAgZGI6IGZhbHNlLCBzb3J0OiBmYWxzZSxcbiAgICAgIHF1ZXJ5OiB7IGlkOiB7IF9pbjogaWRzIH0gfSxcbiAgICAgIHNraXA6ICEhY29uY2VudHJhdGUsXG4gICAgfSk7XG5cbiAgICByZXR1cm4gPGdvLk9uIGRvPXt7XG4gICAgICBmb2N1czogKGcsdixsaW5rSWQsbykgPT4ge1xuICAgICAgICAhZ28udmFsdWUgJiYgZ28uZm9jdXMoU3RhY2spO1xuICAgICAgICBvPy5pZCAmJiBnby5kbygnb3BlbicsIG8pO1xuICAgICAgfSxcbiAgICAgIHVzZTogKGcsdixvKSA9PiBnbyhTdGFjaykuZG8oJ3VzZScsbyksXG4gICAgICBvcGVuOiAoZyx2LHsgaWQsIHByZXZJZCwgaGFuZGxlcklkLCBmb2N1cyB9ID0ge30pID0+IHtcbiAgICAgICAgaWYgKCFpZCkgdGhyb3cgbmV3IEVycm9yKGBvcGVuIG9wdGlvbnMgbXVzdCBjb250YWlucyBpZCAoeyBpZCwgcHJldklkPywgaGFuZGxlcklkPyB9KWApO1xuICAgICAgICBjb25zdCBmb3VuZGVkID0gY29sdW1ucy5maW5kKGMgPT4gY1swXSA9PT0gaWQpO1xuICAgICAgICBjb25zdCBfcHJldklkID0gcHJldklkIHx8IGNvbHVtbnNbY29sdW1ucy5sZW5ndGggLSAxXVswXTtcbiAgICAgICAgaWYgKGZvdW5kZWQpIGdvLmRvKCd1c2UnLHsgaWQgfSk7XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGNvbnN0IHByZXZJID0gY29sdW1ucy5maW5kSW5kZXgoYyA9PiBjWzBdID09PSBfcHJldklkKTtcbiAgICAgICAgICBzZXRDb2x1bW5zKFtcbiAgICAgICAgICAgIC4uLighIX5wcmV2SSA/IGNvbHVtbnMuc2xpY2UoMCwgcHJldkkrMSkgOiBbXSksXG4gICAgICAgICAgICBbaWQsIGhhbmRsZXJJZCB8fCBnZXRIYW5kbGVySWQoaWQpXSxcbiAgICAgICAgICAgIC4uLighIX5wcmV2SSA/IGNvbHVtbnMuc2xpY2UocHJldkkrMSkgOiBbXSksXG4gICAgICAgICAgXSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZvY3VzKSBnbyhTdGFjaykuYXdhaXRSZWYoaWQpLnRoZW4oZyA9PiBnbyhTdGFjaykuZm9jdXMoaWQpLmdvKGlkKS5zY3JvbGwoKSk7XG4gICAgICB9LFxuICAgICAgY2xvc2U6IChnLHYsbykgPT4ge1xuICAgICAgICBpZiAoIW8uaWQpIHRocm93IG5ldyBFcnJvcihgY2xvc2Ugb3B0aW9ucyBtdXN0IGNvbnRhaW5zIGlkICh7IGlkIH0pYCk7XG4gICAgICAgIHNldENvbHVtbnMoY29sdW1ucy5maWx0ZXIoYyA9PiBjWzBdICE9PSBvLmlkKSk7XG4gICAgICB9LFxuICAgICAgY29uY2VudHJhdGU6IChnLHYsbykgPT4ge1xuICAgICAgICBzZXRDb25jZW50cmF0ZShvPy52YWx1ZSk7XG4gICAgICB9LFxuICAgIH19PlxuICAgICAgPGdvLlByb3ZpZGVyIGxpbmtJZD17U3RhY2t9PlxuICAgICAgICA8Z28uQ29tcG9uZW50IHBhdGg9e1tkcGwsICdTdGFjayddfSBjb25jZW50cmF0ZWQ9eyEhY29uY2VudHJhdGUgJiYgY29uY2VudHJhdGVkfSBsaW5rcz17bGlzdH0gZGlyZWN0aW9uPSdob3Jpem9udGFsJyBJdGVtPXtJdGVtfSB1c2luZz17dXNpbmd9IHNhdmVIaXN0b3J5PXtzYXZlSGlzdG9yeX0gc3RhcnRQcm9wcz17c3RhcnRQcm9wc30vPlxuICAgICAgPC9nby5Qcm92aWRlcj5cbiAgICA8L2dvLk9uPjtcbiAgfTtcbn0iXX0=",
        "link_id": 2710
      }
    },
    {
      "id": 2711,
      "type_id": 3,
      "from_id": 2637,
      "to_id": 2710,
      "value": {
        "id": 816,
        "value": "generated",
        "link_id": 2711
      }
    },
    {
      "id": 2712,
      "type_id": 143,
      "from_id": 2710,
      "to_id": 2637
    },
    {
      "id": 2713,
      "type_id": 3,
      "from_id": 2637,
      "to_id": 2712
    },
    {
      "id": 2739,
      "type_id": 35,
      "from_id": 145,
      "to_id": 2637
    },
    {
      "id": 2740,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 2739,
      "value": {
        "id": 818,
        "value": "Tree",
        "link_id": 2740
      }
    },
    {
      "id": 2759,
      "type_id": 35,
      "from_id": 145,
      "to_id": 2639
    },
    {
      "id": 2760,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 2759,
      "value": {
        "id": 820,
        "value": "TreeLink",
        "link_id": 2760
      }
    },
    {
      "id": 2773,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 823,
        "value": "({ deep, data, require, Go }) => {\n    const { MdEdit, MdPreview, MdSaveAlt } = require(\"react-icons/md\");\n    const React = require('react');\n    const { TypedIcon, DownIcon, UpIcon, TypeIcon, InIcon, OutIcon, FromIcon, ToIcon, useSymbol, } = require('@deep-foundation/perception-app');\n    const c = require('@chakra-ui/react');\n    const dpl = '@deep-foundation/perception-links';\n    const dc = '@deep-foundation/core';\n    const History = deep.idLocal(dpl, 'History');\n    const Header = deep.idLocal(dpl, 'Header');\n    const Search = deep.idLocal(dpl, 'Search');\n    const TreeQuery = deep.idLocal(dpl, 'TreeQuery');\n    const TreeList = deep.idLocal(dpl, 'TreeList');\n    const TreeLink = deep.idLocal(dpl, 'TreeLink');\n    const TreeLinkInsert = deep.idLocal(dpl, 'TreeLinkInsert');\n    const TreeLinkDelete = deep.idLocal(dpl, 'TreeLinkDelete');\n    const TreeLinkButton = deep.idLocal(dpl, 'TreeLinkButton');\n    const Item = ({ l, isActive }) => {\n        const go = Go.useGo();\n        return React.createElement(c.Box, { ref: go.ref, w: '100%' },\n            React.createElement(go.Handler, { handlerId: TreeLinkButton, linkId: l.id, onClick: () => go.go.focus(l.id).go.do(l.id), variant: 'full', isActive: isActive, w: '100%' }));\n    };\n    return ({ go, handlerId, isActive, operations = true, saveHistory = false, children, }, ref) => {\n        const [results, setResults] = React.useState([]);\n        const content = React.createElement(c.Flex, { ref: ref, direction: 'column', position: 'relative', minW: '30em', maxW: '30em', h: '100%', bg: isActive ? 'deepBg' : 'deepBgDark' },\n            React.createElement(c.VStack, { ref: ref, flex: 1, w: '100%', h: '100%' },\n                React.createElement(go.Handler, { handlerId: TreeLinkButton, linkId: go.linkId, onClick: () => go.focus('current').go.do('current'), needParent: false, isActive: go.value === 'current', w: '100%' }),\n                React.createElement(c.Box, { w: '100%' },\n                    React.createElement(go.Provider, { linkId: Search },\n                        React.createElement(go.Handler, { handlerId: Search, linkId: go.linkId, isActive: go.value === Search, w: '100%', onSearch: (results) => setResults(results) }))),\n                React.createElement(go.Provider, { linkId: TreeList },\n                    React.createElement(go.Handler, { handlerId: TreeList, linkId: TreeList, links: results, isActive: go.value === TreeList, w: '100%', flex: '1' }))),\n            children);\n        React.useEffect(() => {\n            if (go?.current)\n                go?.current.scroll();\n        }, [go.value]);\n        const nav = go.useNav();\n        nav('current', 'prev', 'up', 'next', Search);\n        nav(Search, 'prev', 'current', 'next', TreeList);\n        nav(TreeList, 'prev', Search, 'next', TreeList);\n        return React.createElement(go.Provider, { onDo: {\n                current: () => go.do('next', { linkId: go.linkId, handlerId: TreeLink }),\n                focus: () => go.focus('current').go.scroll(),\n                up: () => go.focus(nav.get(go.value, 'up')),\n                down: () => go.focus(nav.get(go.value, 'down')),\n                space: () => go.go.do('next', {\n                    linkId: go.value === 'current' ? go.linkId : go.value === TreeList ? go(TreeList).linkId : go.linkId,\n                    handlerId: TreeLink\n                }),\n            }, onFocus: {\n                current: () => go.save(handlerId),\n                up: () => go?.go.do('up'),\n                down: () => go?.go.do('down'),\n            } }, content);\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxDQUFDLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRTtJQUM5QixNQUFNLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztJQUNuRSxNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7SUFFL0IsTUFBTSxFQUNKLFNBQVMsRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQ3hFLFNBQVMsR0FDVixHQUFHLE9BQU8sQ0FBQyxpQ0FBaUMsQ0FBQyxDQUFDO0lBRS9DLE1BQU0sQ0FBQyxHQUFHLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBRXRDLE1BQU0sR0FBRyxHQUFHLG1DQUFtQyxDQUFDO0lBQ2hELE1BQU0sRUFBRSxHQUFHLHVCQUF1QixDQUFDO0lBRW5DLE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLFNBQVMsQ0FBQyxDQUFDO0lBQzdDLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLFFBQVEsQ0FBQyxDQUFDO0lBQzNDLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLFFBQVEsQ0FBQyxDQUFDO0lBQzNDLE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLFdBQVcsQ0FBQyxDQUFDO0lBQ2pELE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLFVBQVUsQ0FBQyxDQUFDO0lBQy9DLE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxP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aXQsIE1kUHJldmlldywgTWRTYXZlQWx0IH0gPSByZXF1aXJlKFwicmVhY3QtaWNvbnMvbWRcIik7XG4gIGNvbnN0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcblxuICBjb25zdCB7XG4gICAgVHlwZWRJY29uLCBEb3duSWNvbiwgVXBJY29uLCBUeXBlSWNvbiwgSW5JY29uLCBPdXRJY29uLCBGcm9tSWNvbiwgVG9JY29uLFxuICAgIHVzZVN5bWJvbCxcbiAgfSA9IHJlcXVpcmUoJ0BkZWVwLWZvdW5kYXRpb24vcGVyY2VwdGlvbi1hcHAnKTtcbiAgXG4gIGNvbnN0IGMgPSByZXF1aXJlKCdAY2hha3JhLXVpL3JlYWN0Jyk7XG5cbiAgY29uc3QgZHBsID0gJ0BkZWVwLWZvdW5kYXRpb24vcGVyY2VwdGlvbi1saW5rcyc7XG4gIGNvbnN0IGRjID0gJ0BkZWVwLWZvdW5kYXRpb24vY29yZSc7XG4gIFxuICBjb25zdCBIaXN0b3J5ID0gZGVlcC5pZExvY2FsKGRwbCwgJ0hpc3RvcnknKTtcbiAgY29uc3QgSGVhZGVyID0gZGVlcC5pZExvY2FsKGRwbCwgJ0hlYWRlcicpO1xuICBjb25zdCBTZWFyY2ggPSBkZWVwLmlkTG9jYWwoZHBsLCAnU2VhcmNoJyk7XG4gIGNvbnN0IFRyZWVRdWVyeSA9IGRlZXAuaWRMb2NhbChkcGwsICdUcmVlUXVlcnknKTtcbiAgY29uc3QgVHJlZUxpc3QgPSBkZWVwLmlkTG9jYWwoZHBsLCAnVHJlZUxpc3QnKTtcbiAgY29uc3QgVHJlZUxpbmsgPSBkZWVwLmlkTG9jYWwoZHBsLCAnVHJlZUxpbmsnKTtcbiAgY29uc3QgVHJlZUxpbmtJbnNlcnQgPSBkZWVwLmlkTG9jYWwoZHBsLCAnVHJlZUxpbmtJbnNlcnQnKTtcbiAgY29uc3QgVHJlZUxpbmtEZWxldGUgPSBkZWVwLmlkTG9jYWwoZHBsLCAnVHJlZUxpbmtEZWxldGUnKTtcbiAgY29uc3QgVHJlZUxpbmtCdXR0b24gPSBkZWVwLmlkTG9jYWwoZHBsLCAnVHJlZUxpbmtCdXR0b24nKTtcblxuICBjb25zdCBJdGVtID0gKHsgbCwgaXNBY3RpdmUgfSkgPT4ge1xuICAgIGNvbnN0IGdvID0gR28udXNlR28oKTtcbiAgICByZXR1cm4gPGMuQm94IHJlZj17Z28ucmVmfSB3PScxMDAlJz5cbiAgICAgIDxnby5IYW5kbGVyXG4gICAgICAgIGhhbmRsZXJJZD17VHJlZUxpbmtCdXR0b259IGxpbmtJZD17bC5pZH1cbiAgICAgICAgb25DbGljaz17KCkgPT4gZ28uZ28uZm9jdXMobC5pZCkuZ28uZG8obC5pZCl9IHZhcmlhbnQ9J2Z1bGwnXG4gICAgICAgIGlzQWN0aXZlPXtpc0FjdGl2ZX0gdz0nMTAwJSdcbiAgICAgIC8+XG4gICAgPC9jLkJveD47XG4gIH1cblxuICByZXR1cm4gKHtcbiAgICBnbyxcbiAgICBoYW5kbGVySWQsXG5cbiAgICBpc0FjdGl2ZSxcbiAgICBvcGVyYXRpb25zID0gdHJ1ZSxcbiAgICBzYXZlSGlzdG9yeSA9IGZhbHNlLFxuXG4gICAgY2hpbGRyZW4sXG4gIH0sIHJlZikgPT4ge1xuICAgIGNvbnN0IFtyZXN1bHRzLCBzZXRSZXN1bHRzXSA9IFJlYWN0LnVzZVN0YXRlKFtdKTtcblxuICAgIGNvbnN0IGNvbnRlbnQgPSA8Yy5GbGV4IHJlZj17cmVmfSBkaXJlY3Rpb249J2NvbHVtbidcbiAgICAgIHBvc2l0aW9uPSdyZWxhdGl2ZScgbWluVz0nMzBlbScgbWF4Vz0nMzBlbScgaD0nMTAwJSdcbiAgICAgIGJnPXtpc0FjdGl2ZSA/ICdkZWVwQmcnIDogJ2RlZXBCZ0RhcmsnfVxuICAgID5cbiAgICAgIDxjLlZTdGFjayByZWY9e3JlZn1cbiAgICAgICAgZmxleD17MX1cbiAgICAgICAgdz0nMTAwJScgaD0nMTAwJSdcbiAgICAgID5cbiAgICAgICAgPGdvLkhhbmRsZXJcbiAgICAgICAgICBoYW5kbGVySWQ9e1RyZWVMaW5rQnV0dG9ufSBsaW5rSWQ9e2dvLmxpbmtJZH1cbiAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBnby5mb2N1cygnY3VycmVudCcpLmdvLmRvKCdjdXJyZW50Jyl9IG5lZWRQYXJlbnQ9e2ZhbHNlfVxuICAgICAgICAgIGlzQWN0aXZlPXtnby52YWx1ZSA9PT0gJ2N1cnJlbnQnfSB3PScxMDAlJ1xuICAgICAgICAvPlxuICAgICAgICA8Yy5Cb3ggdz0nMTAwJSc+XG4gICAgICAgICAgPGdvLlByb3ZpZGVyIGxpbmtJZD17U2VhcmNofT5cbiAgICAgICAgICAgIDxnby5IYW5kbGVyXG4gICAgICAgICAgICAgIGhhbmRsZXJJZD17U2VhcmNofSBsaW5rSWQ9e2dvLmxpbmtJZH1cbiAgICAgICAgICAgICAgaXNBY3RpdmU9e2dvLnZhbHVlID09PSBTZWFyY2h9IHc9JzEwMCUnXG4gICAgICAgICAgICAgIG9uU2VhcmNoPXsocmVzdWx0cykgPT4gc2V0UmVzdWx0cyhyZXN1bHRzKX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9nby5Qcm92aWRlcj5cbiAgICAgICAgPC9jLkJveD5cbiAgICAgICAgPGdvLlByb3ZpZGVyIGxpbmtJZD17VHJlZUxpc3R9PlxuICAgICAgICAgIDxnby5IYW5kbGVyXG4gICAgICAgICAgICBoYW5kbGVySWQ9e1RyZWVMaXN0fSBsaW5rSWQ9e1RyZWVMaXN0fSBsaW5rcz17cmVzdWx0c31cbiAgICAgICAgICAgIGlzQWN0aXZlPXtnby52YWx1ZSA9PT0gVHJlZUxpc3R9IHc9JzEwMCUnIGZsZXg9JzEnXG4gICAgICAgICAgLz5cbiAgICAgICAgPC9nby5Qcm92aWRlcj5cbiAgICAgIDwvYy5WU3RhY2s+XG4gICAgICB7Y2hpbGRyZW59XG4gICAgPC9jLkZsZXg+O1xuXG4gICAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICAgIGlmIChnbz8uY3VycmVudCkgZ28/LmN1cnJlbnQuc2Nyb2xsKCk7XG4gICAgfSwgW2dvLnZhbHVlXSk7XG5cbiAgICBjb25zdCBuYXYgPSBnby51c2VOYXYoKTtcbiAgICBuYXYoJ2N1cnJlbnQnLCAncHJldicsICd1cCcsICduZXh0JywgU2VhcmNoKTtcbiAgICBuYXYoU2VhcmNoLCAncHJldicsICdjdXJyZW50JywgJ25leHQnLCBUcmVlTGlzdCk7XG4gICAgbmF2KFRyZWVMaXN0LCAncHJldicsIFNlYXJjaCwgJ25leHQnLCBUcmVlTGlzdCk7XG5cbiAgICByZXR1cm4gPGdvLlByb3ZpZGVyXG4gICAgICBvbkRvPXt7XG4gICAgICAgIGN1cnJlbnQ6ICgpID0+IGdvLmRvKCduZXh0JywgeyBsaW5rSWQ6IGdvLmxpbmtJZCwgaGFuZGxlcklkOiBUcmVlTGluayB9KSxcbiAgICAgICAgZm9jdXM6ICgpID0+IGdvLmZvY3VzKCdjdXJyZW50JykuZ28uc2Nyb2xsKCk7XG4gICAgICAgIHVwOiAoKSA9PiAgZ28uZm9jdXMobmF2LmdldChnby52YWx1ZSwgJ3VwJykpLFxuICAgICAgICBkb3duOiAoKSA9PiBnby5mb2N1cyhuYXYuZ2V0KGdvLnZhbHVlLCAnZG93bicpKSxcbiAgICAgICAgc3BhY2U6ICgpID0+IGdvLmdvLmRvKCduZXh0Jywge1xuICAgICAgICAgIGxpbmtJZDogZ28udmFsdWUgPT09ICdjdXJyZW50JyA/IGdvLmxpbmtJZCA6IGdvLnZhbHVlID09PSBUcmVlTGlzdCA/IGdvKFRyZWVMaXN0KS5saW5rSWQgOiBnby5saW5rSWQsXG4gICAgICAgICAgaGFuZGxlcklkOiBUcmVlTGlua1xuICAgICAgICB9KSxcbiAgICAgIH19XG4gICAgICBvbkZvY3VzPXt7XG4gICAgICAgIGN1cnJlbnQ6ICgpID0+IGdvLnNhdmUoaGFuZGxlcklkKSxcbiAgICAgICAgdXA6ICgpID0+IGdvPy5nby5kbygndXAnKSxcbiAgICAgICAgZG93bjogKCkgPT4gZ28/LmdvLmRvKCdkb3duJyksXG4gICAgICB9fVxuICAgID5cbiAgICAgIHtjb250ZW50fVxuICAgIDwvZ28uUHJvdmlkZXI+XG4gIH07XG59XG4iXX0=",
        "link_id": 2773
      }
    },
    {
      "id": 2774,
      "type_id": 3,
      "from_id": 2650,
      "to_id": 2773,
      "value": {
        "id": 822,
        "value": "generated",
        "link_id": 2774
      }
    },
    {
      "id": 2775,
      "type_id": 143,
      "from_id": 2773,
      "to_id": 2650
    },
    {
      "id": 2776,
      "type_id": 3,
      "from_id": 2650,
      "to_id": 2775
    },
    {
      "id": 19408,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1740,
        "value": "",
        "link_id": 19408
      }
    },
    {
      "id": 19409,
      "type_id": 3,
      "from_id": 19402,
      "to_id": 19408,
      "value": {
        "id": 1739,
        "value": "generated",
        "link_id": 19409
      }
    },
    {
      "id": 19410,
      "type_id": 143,
      "from_id": 19408,
      "to_id": 19402
    },
    {
      "id": 19411,
      "type_id": 3,
      "from_id": 19402,
      "to_id": 19410
    },
    {
      "id": 5266,
      "type_id": 1,
      "from_id": 8,
      "to_id": 35
    },
    {
      "id": 5267,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 5266,
      "value": {
        "id": 1157,
        "value": "Children",
        "link_id": 5267
      }
    },
    {
      "id": 5276,
      "type_id": 1,
      "from_id": 5266,
      "to_id": 8
    },
    {
      "id": 5277,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 5276,
      "value": {
        "id": 1161,
        "value": "Link",
        "link_id": 5277
      }
    },
    {
      "id": 5813,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1577,
        "value": "async ({ deep, data, Go, require }) => {\n  const React = require('react');\n  const c = require('@chakra-ui/react');\n\n  const dpl = '@deep-foundation/perception-links';\n\n  const GraphLinkPlanet = await deep.id(dpl, 'GraphLinkPlanet');\n\n  return ({\n    go,\n\n    isActive,\n\n    position,\n    locked = false,\n\n    children,\n  }, ref) => {\n    const { cy } = go.useGraph();\n\n    const $inouts = cy.$(`.link-type[target=\"${go.linkId}\"],.link-from[target=\"${go.linkId}\"],.link-to[target=\"${go.linkId}\"]`);\n    const inouts = $inouts.map((e) => {\n      return { id: e.id(), linkId: e.data().linkId };\n    });\n\n    const nav = go.useNav();\n    nav('current', go?.link?.from_id ? 'from_id' : 'current', 'type_id', go?.link?.to_id ? 'to_id' : 'current', inouts?.length ? 'inout' : 'current');\n    nav('from_id', 'from', 'from_id', 'current', 'from_id');\n    nav('to_id', 'current', 'to_id', 'to', 'to_id');\n    nav('type_id', 'type_id', 'type', 'type_id', 'current');\n\n    const [inoutId, setInoutId] = React.useState();\n    nav('inout', 'inout', 'current', 'inout', 'inouted');\n    React.useEffect(() => {\n      $inouts.removeClass('link-edge-active');\n      if (go.value === 'inout' && inoutId) cy.$id(inoutId).addClass('link-edge-active');\n    }, [go.value, inoutId]);\n    React.useEffect(() => {\n      if (!isActive) go.set('current');\n    }, [isActive]);\n\n    return <go.On do={{\n      exec: (g,v,o) => {\n        if (!go.value || go.value === 'current') go.focus(GraphLinkPlanet);\n        if (go.value === GraphLinkPlanet) go.focus('current');\n      },\n      focus: (g,v,o) => {},\n      use: (g,v,o) => {},\n      position: (g,v,o) => {},\n      scroll: (g,v,o) => {\n        console.log(ref);\n        cy.center(ref.current);\n      },\n      ...(go.value === 'inout') ? {\n        left: (g,v,o) => {\n          if (o?.hotkeyEvent?.meta || o?.hotkeyEvent?.shift || o?.hotkeyEvent?.ctrl || o?.hotkeyEvent?.alt) {\n            setInoutId(inouts?.[0]);\n          } else setInoutId(go.prev(inouts, inoutId));\n        },\n        right: (g,v,o) => {\n          if (o?.hotkeyEvent?.meta || o?.hotkeyEvent?.shift || o?.hotkeyEvent?.ctrl || o?.hotkeyEvent?.alt) {\n            setInoutId(inouts?.[inouts.length - 1]?.id);\n          } else setInoutId(go.next(inouts, inoutId));\n        },\n      } : {\n        left: (g,v,o) => {\n          go.focus(nav.get(go.value || 'current', 'left'), { prev: go.value });\n        },\n        right: (g,v,o) => {\n          go.focus(nav.get(go.value || 'current', 'right'), { prev: go.value })\n        },\n      },\n      up: (g,v,o) => go.focus(nav.get(go.value || 'current', 'up'), { prev: go.value }),\n      down: (g,v,o) => go.focus(nav.get(go.value || 'current', 'down'), { prev: go.value }),\n    }} focus={{\n      type: (g,v,o) => go.set().go.go.do('open', { id: go.link.type_id, focus: true }),\n      from: (g,v,o) => go.set().go.go.do('open', { id: go.link.from_id, focus: true }),\n      to: (g,v,o) => go.set().go.go.do('open', { id: go.link.to_id, focus: true }),\n      inout: (g,v,o) => setInoutId(inouts?.[0]?.id),\n      inouted: (g,v,o) => {\n        setInoutId();\n        go.set().go.go.focus(cy.$id(inoutId)?.data()?.linkId);\n      }\n    }}>\n      <go.GraphNode element={{\n        data: { id: `${go.link.id}-children` },\n        classes: ['link-children'],\n      }}>\n        <go.GraphNode\n          ref={ref}\n          element={{\n            data: { id: go.link.id, label: `${go.linkId}: ${go.link.name !== go.linkId ? go.link.name : ''}\n  (${go.link.type_id}: ${go.link.type?.name !== go.link.type_id ? go.link.type?.name : ''})\n  \n  ${go.link.symbol}` },\n            classes: ['link-node', ...(isActive ? ['link-node-active'] : [])],\n          }}\n          onClick={(e) => {\n            go.go.focus(go.linkId);\n            go.do('exec');\n          }}\n        >\n          <c.Box w='0' h='0' position='relative' ref={go.ref}>\n            <go.Provider linkId={GraphLinkPlanet}>\n              <go.Component path={[dpl, 'GraphLinkPlanet']} linkId={go.linkId} isActive={isActive && go.value === GraphLinkPlanet}/>\n            </go.Provider>\n          </c.Box>\n        </go.GraphNode>\n        {!!go.link.type_id && <go.GraphEdge\n          element={{\n            data: { id: `${go.link.id}-type`, source: `${go.link.id}`, target: `${go.link.type_id}` },\n            classes: ['link-edge', 'link-type', ...(go.value === 'type_id' ? ['link-edge-active'] : [])],\n          }}/>}\n        {!!go.link.from_id && <go.GraphEdge\n          element={{\n            data: { id: `${go.link.id}-from`, source: `${go.link.id}`, target: `${go.link.from_id}` },\n            classes: ['link-edge', 'link-from', ...(go.value === 'from_id' ? ['link-edge-active'] : [])],\n          }}/>}\n        {!!go.link.to_id && <go.GraphEdge\n          element={{\n            data: { id: `${go.link.id}-to`, source: `${go.link.id}`, target: `${go.link.to_id}` },\n            classes: ['link-edge', 'link-to', ...(go.value === 'to_id' ? ['link-edge-active'] : [])],\n          }}/>}\n        {children}\n      </go.GraphNode>\n    </go.On>;\n  };\n}",
        "link_id": 5813
      }
    },
    {
      "id": 5816,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 5813,
      "value": {
        "id": 1255,
        "value": "GraphLinkComponent",
        "link_id": 5816
      }
    },
    {
      "id": 6262,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1316,
        "value": "async ({ deep, data, require }) => {\n  const React = require('react');\n  const { PiGraphBold } = require(\"react-icons/pi\");\n  const c = require('@chakra-ui/react');\n\n  const dpl = '@deep-foundation/perception-links';\n  const dc = '@deep-foundation/core';\n\n  const Graph = deep.idLocal(dpl, 'Graph');\n\n  return ({\n    go,\n    handlerId,\n\n    isActive,\n  }, ref) => {\n    return <go.On do={{\n      exec: (g,v,o) => go.go.do('right', { ...o, id: Graph })),\n      click: (g,v,o) => go.do('exec', o),\n      right: (g,v,o) => go.do('exec', o),\n    }}>\n      <c.Button\n        w='3em' h='3em'\n        variant={isActive ? 'active' : undefined}\n        onClick={() => go.do('exec')}\n        ref={ref}\n      >\n        <PiGraphBold/>\n      </c.Button>\n    </go.On>;\n  };\n}",
        "link_id": 6262
      }
    },
    {
      "id": 6265,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 6262,
      "value": {
        "id": 1310,
        "value": "MenuGraphComponent",
        "link_id": 6265
      }
    },
    {
      "id": 5366,
      "type_id": 5258,
      "from_id": 5304,
      "to_id": 5240
    },
    {
      "id": 5367,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 5366,
      "value": {
        "id": 1194,
        "value": "compatableMenuTree",
        "link_id": 5367
      }
    },
    {
      "id": 4553,
      "type_id": 35,
      "from_id": 145,
      "to_id": 4549
    },
    {
      "id": 4554,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 4553,
      "value": {
        "id": 1014,
        "value": "TreeLinkFrom",
        "link_id": 4554
      }
    },
    {
      "id": 4556,
      "type_id": 35,
      "from_id": 145,
      "to_id": 4545
    },
    {
      "id": 4557,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 4556,
      "value": {
        "id": 1023,
        "value": "TreeLinkTo",
        "link_id": 4557
      }
    },
    {
      "id": 6266,
      "type_id": 35,
      "from_id": 145,
      "to_id": 6262
    },
    {
      "id": 6267,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 6266,
      "value": {
        "id": 1315,
        "value": "MenuGraph",
        "link_id": 6267
      }
    },
    {
      "id": 5286,
      "type_id": 146,
      "from_id": 5266,
      "to_id": 5266,
      "value": {
        "id": 1162,
        "value": "📁",
        "link_id": 5286
      }
    },
    {
      "id": 5287,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 5286,
      "value": {
        "id": 1581,
        "value": "childrenSymbol",
        "link_id": 5287
      }
    },
    {
      "id": 5809,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 5812,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 5809,
      "value": {
        "id": 1257,
        "value": "GraphLinkActionsComponent",
        "link_id": 5812
      }
    },
    {
      "id": 5288,
      "type_id": 146,
      "from_id": 5258,
      "to_id": 5258,
      "value": {
        "id": 1163,
        "value": "📓",
        "link_id": 5288
      }
    },
    {
      "id": 5289,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 5288,
      "value": {
        "id": 1582,
        "value": "compatableSymbol",
        "link_id": 5289
      }
    },
    {
      "id": 4545,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 4548,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 4545,
      "value": {
        "id": 1020,
        "value": "TreeLinkToComponent",
        "link_id": 4548
      }
    },
    {
      "id": 4549,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 4552,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 4549,
      "value": {
        "id": 1016,
        "value": "TreeLinkFromComponent",
        "link_id": 4552
      }
    },
    {
      "id": 5679,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1239,
        "value": "async ({ deep, data, require }) => {\n    const React = require('react');\n    const c = require('@chakra-ui/react');\n    const dpl = '@deep-foundation/perception-links';\n    const dc = '@deep-foundation/core';\n    const Tree = deep.idLocal(dpl, 'Tree');\n    return ({ go, using = false, fullWidth = null, }, ref) => {\n        return React.createElement(go.On, { do: {\n                focus: (g, v, linkId, o) => o?.id && go.focus(o.id),\n                use: (g, v, o) => go.current && go.current.do('use', o),\n                open: async (g, v, o) => {\n                    if (!go.current)\n                        await (go.focus(Tree).go.awaitRef(Tree));\n                    if (o?.id)\n                        go.current.do('open', o);\n                },\n                concentrate: (g, v, o) => {\n                    go.current && go.current.do('concentrate', o);\n                },\n            } },\n            React.createElement(c.Box, { ref: ref, w: '100%', h: '100%' }, !!go.value && [React.createElement(go.Provider, { key: go.value, linkId: go.value },\n                    React.createElement(go.Handler, { initialId: deep?.linkId, handlerId: go.value, saveHistory: true, using: using, fullWidth: fullWidth, queryField: 'opened' }))]));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxFQUFFLEVBQUU7SUFDaEMsTUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQy9CLE1BQU0sQ0FBQyxHQUFHLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBRXRDLE1BQU0sR0FBRyxHQUFHLG1DQUFtQyxDQUFDO0lBQ2hELE1BQU0sRUFBRSxHQUFHLHVCQUF1QixDQUFDO0lBRW5DLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBRXZDLE9BQU8sQ0FBQyxFQUNOLEVBQUUsRUFFRixLQUFLLEdBQUcsS0FBSyxFQUNiLFNBQVMsR0FBRyxJQUFJLEdBQ2pCLEVBQUUsR0FBRyxFQUFFLEVBQUU7UUFJUixPQUFPLG9CQUFDLEVBQUUsQ0FBQyxFQUFFLElBQUMsRUFBRSxFQUFFO2dCQUNoQixLQUFLLEVBQUUsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLE1BQU0sRUFBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLElBQUksRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO2dCQUNoRCxHQUFHLEVBQUUsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLE9BQU8sSUFBSSxFQUFFLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxLQUFLLEVBQUMsQ0FBQyxDQUFDO2dCQUNwRCxJQUFJLEVBQUUsS0FBSyxFQUFFLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFFLEVBQUU7b0JBQ3BCLElBQUksQ0FBQyxFQUFFLENBQUMsT0FBTzt3QkFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7b0JBQzFELElBQUksQ0FBQyxFQUFFLEVBQUU7d0JBQUUsRUFBRSxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUNyQyxDQUFDO2dCQUNELFdBQVcsRUFBRSxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFFLEVBQUU7b0JBQ3JCLEVBQUUsQ0FBQyxPQUFPLElBQUksRUFBRSxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsYUFBYSxFQUFFLENBQUMsQ0FBQyxDQUFDO2dCQUNoRCxDQUFDO2FBQ0Y7WUFDQyxvQkFBQyxDQUFDLENBQUMsR0FBRyxJQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFDLE1BQU0sRUFBQyxDQUFDLEVBQUMsTUFBTSxJQUMvQixDQUFDLENBQUMsRUFBRSxDQUFDLEtBQUssSUFBSSxDQUFDLG9CQUFDLEVBQUUsQ0FBQyxRQUFRLElBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQyxLQUFLLEVBQUUsTUFBTSxFQUFFLEVBQUUsQ0FBQyxLQUFLO29CQUMxRCxvQkFBQyxFQUFFLENBQUMsT0FBTyxJQUNULFNBQVMsRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUN2QixTQUFTLEVBQUUsRUFBRSxDQUFDLEtBQUssRUFDbkIsV0FBVyxRQUNYLEtBQUssRUFBRSxLQUFLLEVBQ1osU0FBUyxFQUFFLFNBQVMsRUFDcEIsVUFBVSxFQUFDLFFBQVEsR0FDbkIsQ0FDVSxDQUFDLENBQ1QsQ0FDRixDQUFDO0lBQ1gsQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiYXN5bmMgKHsgZGVlcCwgZGF0YSwgcmVxdWlyZSB9KSA9PiB7XG4gIGNvbnN0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbiAgY29uc3QgYyA9IHJlcXVpcmUoJ0BjaGFrcmEtdWkvcmVhY3QnKTtcblxuICBjb25zdCBkcGwgPSAnQGRlZXAtZm91bmRhdGlvbi9wZXJjZXB0aW9uLWxpbmtzJztcbiAgY29uc3QgZGMgPSAnQGRlZXAtZm91bmRhdGlvbi9jb3JlJztcblxuICBjb25zdCBUcmVlID0gZGVlcC5pZExvY2FsKGRwbCwgJ1RyZWUnKTtcblxuICByZXR1cm4gKHtcbiAgICBnbyxcblxuICAgIHVzaW5nID0gZmFsc2UsXG4gICAgZnVsbFdpZHRoID0gbnVsbCxcbiAgfSwgcmVmKSA9PiB7XG4gICAgLy8gY29uc3QgW2xheWVyLCBzZXRMYXllcl0gPSBnby51c2VRdWVyeVN0b3JlKGBsYXllcmAsIFRyZWUpO1xuICAgIC8vIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiBnby52YWx1ZSAmJiBzZXRMYXllcihnby52YWx1ZSksIFtnby52YWx1ZV0pO1xuXG4gICAgcmV0dXJuIDxnby5PbiBkbz17e1xuICAgICAgZm9jdXM6IChnLHYsbGlua0lkLG8pID0+IG8/LmlkICYmIGdvLmZvY3VzKG8uaWQpLFxuICAgICAgdXNlOiAoZyx2LG8pID0+IGdvLmN1cnJlbnQgJiYgZ28uY3VycmVudC5kbygndXNlJyxvKSxcbiAgICAgIG9wZW46IGFzeW5jIChnLHYsbykgPT4ge1xuICAgICAgICBpZiAoIWdvLmN1cnJlbnQpIGF3YWl0IChnby5mb2N1cyhUcmVlKS5nby5hd2FpdFJlZihUcmVlKSk7XG4gICAgICAgIGlmIChvPy5pZCkgZ28uY3VycmVudC5kbygnb3Blbicsbyk7XG4gICAgICB9LFxuICAgICAgY29uY2VudHJhdGU6IChnLHYsbykgPT4ge1xuICAgICAgICBnby5jdXJyZW50ICYmIGdvLmN1cnJlbnQuZG8oJ2NvbmNlbnRyYXRlJywgbyk7XG4gICAgICB9LFxuICAgIH19PlxuICAgICAgPGMuQm94IHJlZj17cmVmfSB3PScxMDAlJyBoPScxMDAlJz5cbiAgICAgICAgeyEhZ28udmFsdWUgJiYgWzxnby5Qcm92aWRlciBrZXk9e2dvLnZhbHVlfSBsaW5rSWQ9e2dvLnZhbHVlfT5cbiAgICAgICAgICA8Z28uSGFuZGxlclxuICAgICAgICAgICAgaW5pdGlhbElkPXtkZWVwPy5saW5rSWR9XG4gICAgICAgICAgICBoYW5kbGVySWQ9e2dvLnZhbHVlfVxuICAgICAgICAgICAgc2F2ZUhpc3RvcnlcbiAgICAgICAgICAgIHVzaW5nPXt1c2luZ31cbiAgICAgICAgICAgIGZ1bGxXaWR0aD17ZnVsbFdpZHRofVxuICAgICAgICAgICAgcXVlcnlGaWVsZD0nb3BlbmVkJ1xuICAgICAgICAgIC8+XG4gICAgICAgIDwvZ28uUHJvdmlkZXI+XX1cbiAgICAgIDwvYy5Cb3g+XG4gICAgPC9nby5Pbj47XG4gIH07XG59Il19",
        "link_id": 5679
      }
    },
    {
      "id": 5680,
      "type_id": 3,
      "from_id": 5601,
      "to_id": 5679,
      "value": {
        "id": 1238,
        "value": "generated",
        "link_id": 5680
      }
    },
    {
      "id": 5681,
      "type_id": 143,
      "from_id": 5679,
      "to_id": 5601
    },
    {
      "id": 5682,
      "type_id": 3,
      "from_id": 5601,
      "to_id": 5681
    },
    {
      "id": 5821,
      "type_id": 35,
      "from_id": 145,
      "to_id": 5809
    },
    {
      "id": 5822,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 5821,
      "value": {
        "id": 1258,
        "value": "GraphLinkActions",
        "link_id": 5822
      }
    },
    {
      "id": 5828,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 5827,
      "value": {
        "id": 1248,
        "value": "Graph",
        "link_id": 5828
      }
    },
    {
      "id": 5827,
      "type_id": 35,
      "from_id": 145,
      "to_id": 2652
    },
    {
      "id": 5290,
      "type_id": 146,
      "from_id": 5276,
      "to_id": 5276,
      "value": {
        "id": 1164,
        "value": "🪄",
        "link_id": 5290
      }
    },
    {
      "id": 5291,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 5290,
      "value": {
        "id": 1580,
        "value": "linkSymbol",
        "link_id": 5291
      }
    },
    {
      "id": 5823,
      "type_id": 35,
      "from_id": 145,
      "to_id": 5813
    },
    {
      "id": 5824,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 5823,
      "value": {
        "id": 1256,
        "value": "GraphLink",
        "link_id": 5824
      }
    },
    {
      "id": 6065,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1284,
        "value": "async ({ deep, data, Go, require }) => {\n    const React = require('react');\n    const { MoonIcon, SunIcon } = require('@chakra-ui/icons');\n    const { GrGraphQl } = require(\"react-icons/gr\");\n    const { IoReload } = require(\"react-icons/io\");\n    const c = require('@chakra-ui/react');\n    const dpl = '@deep-foundation/perception-links';\n    const dc = '@deep-foundation/core';\n    const Menu = deep.idLocal(dpl, 'Menu');\n    const Layer = deep.idLocal(dpl, 'Layer');\n    const Header = deep.idLocal(dpl, 'Header');\n    const Queries = deep.idLocal(dpl, 'Queries');\n    const Tree = deep.idLocal(dpl, 'Tree');\n    return ({ go, linkId, Status, Auth, ColorMode, children, }, ref) => {\n        const nav = go.useNav();\n        nav(Menu, Menu, Header, Layer, Queries);\n        nav(Queries, Queries, Menu, Layer, Queries);\n        nav(Layer, Menu, Header, Layer, Layer);\n        nav(Header, Header, Header, Header, Layer);\n        React.useEffect(() => {\n            go.focus(Menu);\n        }, []);\n        const isMobile = c.useBreakpointValue({ base: true, md: false }, { fallback: 'xs' });\n        return React.createElement(go.On, { do: {\n                left: (g, v, o) => go.focus(nav.get(go.value, 'left'), o),\n                up: (g, v, o) => go.focus(nav.get(go.value, 'up'), o),\n                right: (g, v, o) => go.focus(nav.get(go.value, 'right'), o),\n                down: (g, v, o) => go.focus(nav.get(go.value, 'down'), o),\n                use: (g, v, o) => {\n                    if (go.data.usedId != o?.id && o?.id) {\n                        go.data.usedId = o.id;\n                        go(Header).do('use', o);\n                        go(Layer).do('use', o);\n                    }\n                },\n                open: async (g, v, o) => {\n                    if (!go(Layer))\n                        await (go.focus(Layer).go.awaitRef(Layer));\n                    go(Layer).do('open', o);\n                },\n                concentrate: (g, v, o) => {\n                    go(Layer).do('concentrate', o);\n                },\n            } },\n            React.createElement(c.Box, { ref: go.ref, h: '100vh', w: \"100vw\", position: \"fixed\", left: \"0%\", top: \"0%\" },\n                React.createElement(c.Grid, { templateAreas: `\"tabs tabs\"\n                              \"nav main\"`, gridTemplateRows: '3em 1fr', gridTemplateColumns: '3em 1fr', h: '100vh', w: \"100vw\", position: \"fixed\", left: \"0%\", top: \"0%\", color: 'blackAlpha.700', fontWeight: 'bold', ref: ref },\n                    React.createElement(c.GridItem, { area: 'tabs', zIndex: 1 },\n                        React.createElement(c.Flex, { w: \"100%\", h: \"100%\", bg: go.value === Header ? 'deepBgDark' : 'deepBg' },\n                            React.createElement(go.Provider, { linkId: Header },\n                                React.createElement(go.Handler, { linkId: deep.linkId, handlerId: Header, using: true })))),\n                    React.createElement(c.GridItem, { area: 'nav', zIndex: 1, position: \"relative\", h: \"100%\" },\n                        React.createElement(c.Flex, { direction: 'column', h: '100%', bg: go.value === Menu ? 'deepBgDark' : 'deepBg' },\n                            React.createElement(go.Provider, { linkId: Menu },\n                                React.createElement(go.Handler, { linkId: deep.linkId, handlerId: Menu }),\n                                React.createElement(c.Spacer, null)),\n                            React.createElement(c.VStack, null,\n                                React.createElement(c.Button, { w: '3em', h: '3em', as: 'a', href: `http://${deep?.client?.path}` },\n                                    React.createElement(GrGraphQl, null)),\n                                React.createElement(ColorMode, { w: '3em', h: '3em', dark: { children: React.createElement(SunIcon, null) }, light: { children: React.createElement(MoonIcon, null) } }),\n                                React.createElement(go.Provider, { linkId: Queries },\n                                    React.createElement(go.Component, { path: [dpl, 'Queries'], isActive: go.value === Queries },\n                                        React.createElement(Status, null))),\n                                React.createElement(Auth, null)))),\n                    React.createElement(c.GridItem, { area: 'main', overflow: \"hidden\", position: \"relative\", h: '100%', bg: go.value === Layer ? 'deepBgDark' : 'deepBg' },\n                        React.createElement(go.Provider, { linkId: Layer, value: Tree },\n                            React.createElement(go.Handler, { linkId: deep.linkId, handlerId: Layer, using: true, fullWidth: isMobile ? 'calc(100vw - 3em)' : null }))))));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFO0lBQ3BDLE1BQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUMvQixNQUFNLEVBQUUsUUFBUSxFQUFFLE9BQU8sRUFBRSxHQUFHLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBQzFELE1BQU0sRUFBRSxTQUFTLEVBQUUsR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztJQUNoRCxNQUFNLEVBQUUsUUFBUSxFQUFFLEdBQUcsT0FBTyxDQUFDLGdCQUFnQixDQUFDLENBQUM7SUFDL0MsTUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLGtCQUFrQixDQUFDLENBQUM7SUFFdEMsTUFBTSxHQUFHLEdBQUcsbUNBQW1DLENBQUM7SUFDaEQsTUFBTSxFQUFFLEdBQUcsdUJBQXVCLENBQUM7SUFFbkMsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDdkMsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDekMsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsUUFBUSxDQUFDLENBQUM7SUFDM0MsTUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsU0FBUyxDQUFDLENBQUM7SUFFN0MsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFFdkMsT0FBTyxDQUFDLEVBQ04sRUFBRSxFQUNGLE1BQU0sRUFFTixNQUFNLEVBQ04sSUFBSSxFQUNK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UUFBUSxJQUFDLE1BQU0sRUFBRSxPQUFPO29DQUMxQixvQkFBQyxFQUFFLENBQUMsU0FBUyxJQUFDLElBQUksRUFBRSxDQUFDLEdBQUcsRUFBRSxTQUFTLENBQUMsRUFBRSxRQUFRLEVBQUUsRUFBRSxDQUFDLEtBQUssS0FBSyxPQUFPO3dDQUFFLG9CQUFDLE1BQU0sT0FBRyxDQUFlLENBQ25GO2dDQUNkLG9CQUFDLElBQUksT0FBRyxDQUNDLENBQ0osQ0FDRTtvQkFDYixvQkFBQyxDQUFDLENBQUMsUUFBUSxJQUFDLElBQUksRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFDLFFBQVEsRUFBQyxRQUFRLEVBQUMsVUFBVSxFQUFDLENBQUMsRUFBQyxNQUFNLEVBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxLQUFLLEtBQUssS0FBSyxDQUFDLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLFFBQVE7d0JBQ3ZILG9CQUFDLEVBQUUsQ0FBQyxRQUFRLElBQUMsTUFBTSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsSUFBSTs0QkFDckMsb0JBQUMsRUFBRSxDQUFDLE9BQU8sSUFDVCxNQUFNLEVBQUUsSUFBSSxDQUFDLE1BQU0sRUFDbkIsU0FBUyxFQUFFLEtBQUssRUFDaEIsS0FBSyxRQUFDLFNBQVMsRUFBRSxRQUFRLENBQUMsQ0FBQyxDQUFDLG1CQUFtQixDQUFDLENBQUMsQ0FBQyxJQUFJLEdBQ3RELENBQ1UsQ0FDSCxDQUNOLENBQ0gsQ0FDRixDQUFDO0lBQ1gsQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiYXN5bmMgKHsgZGVlcCwgZGF0YSwgR28sIHJlcXVpcmUgfSkgPT4ge1xuICBjb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG4gIGNvbnN0IHsgTW9vbkljb24sIFN1bkljb24gfSA9IHJlcXVpcmUoJ0BjaGFrcmEtdWkvaWNvbnMnKTtcbiAgY29uc3QgeyBHckdyYXBoUWwgfSA9IHJlcXVpcmUoXCJyZWFjdC1pY29ucy9nclwiKTtcbiAgY29uc3QgeyBJb1JlbG9hZCB9ID0gcmVxdWlyZShcInJlYWN0LWljb25zL2lvXCIpO1xuICBjb25zdCBjID0gcmVxdWlyZSgnQGNoYWtyYS11aS9yZWFjdCcpO1xuXG4gIGNvbnN0IGRwbCA9ICdAZGVlcC1mb3VuZGF0aW9uL3BlcmNlcHRpb24tbGlua3MnO1xuICBjb25zdCBkYyA9ICdAZGVlcC1mb3VuZGF0aW9uL2NvcmUnO1xuXG4gIGNvbnN0IE1lbnUgPSBkZWVwLmlkTG9jYWwoZHBsLCAnTWVudScpO1xuICBjb25zdCBMYXllciA9IGRlZXAuaWRMb2NhbChkcGwsICdMYXllcicpO1xuICBjb25zdCBIZWFkZXIgPSBkZWVwLmlkTG9jYWwoZHBsLCAnSGVhZGVyJyk7XG4gIGNvbnN0IFF1ZXJpZXMgPSBkZWVwLmlkTG9jYWwoZHBsLCAnUXVlcmllcycpO1xuXG4gIGNvbnN0IFRyZWUgPSBkZWVwLmlkTG9jYWwoZHBsLCAnVHJlZScpO1xuXG4gIHJldHVybiAoe1xuICAgIGdvLFxuICAgIGxpbmtJZCxcblxuICAgIFN0YXR1cyxcbiAgICBBdXRoLFxuICAgIENvbG9yTW9kZSxcblxuICAgIGNoaWxkcmVuLFxuXG4gIH0sIHJlZikgPT4ge1xuICAgIGNvbnN0IG5hdiA9IGdvLnVzZU5hdigpO1xuICAgIG5hdihNZW51LCBNZW51LCBIZWFkZXIsIExheWVyLCBRdWVyaWVzKTtcbiAgICBuYXYoUXVlcmllcywgUXVlcmllcywgTWVudSwgTGF5ZXIsIFF1ZXJpZXMpO1xuICAgIG5hdihMYXllciwgTWVudSwgSGVhZGVyLCBMYXllciwgTGF5ZXIpO1xuICAgIG5hdihIZWFkZXIsIEhlYWRlciwgSGVhZGVyLCBIZWFkZXIsIExheWVyKTtcblxuICAgIC8vIGNvbnN0IHVzZVRoZW1lID0gZ28udXNlSG9vayh7IHBhdGg6IFtkcGwsICd1c2VUaGVtZSddIH0pO1xuICAgIC8vIGNvbnNvbGUubG9nKCd1c2VUaGVtZScsIHVzZVRoZW1lKTtcblxuICAgIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICBnby5mb2N1cyhNZW51KVxuXG4gICAgfSwgW10pO1xuXG4gICAgY29uc3QgaXNNb2JpbGUgPSBjLnVzZUJyZWFrcG9pbnRWYWx1ZShcbiAgICAgIHsgYmFzZTogdHJ1ZSwgbWQ6IGZhbHNlIH0sXG4gICAgICB7IGZhbGxiYWNrOiAneHMnIH0sXG4gICAgKTtcblxuICAgIHJldHVybiA8Z28uT25cbiAgICAgIGRvPXt7XG4gICAgICAgIGxlZnQ6IChnLCB2LCBvKSA9PiBnby5mb2N1cyhuYXYuZ2V0KGdvLnZhbHVlLCAnbGVmdCcpLCBvKSxcbiAgICAgICAgdXA6IChnLCB2LCBvKSA9PiBnby5mb2N1cyhuYXYuZ2V0KGdvLnZhbHVlLCAndXAnKSwgbyksXG4gICAgICAgIHJpZ2h0OiAoZywgdiwgbykgPT4gZ28uZm9jdXMobmF2LmdldChnby52YWx1ZSwgJ3JpZ2h0JyksIG8pLFxuICAgICAgICBkb3duOiAoZywgdiwgbykgPT4gZ28uZm9jdXMobmF2LmdldChnby52YWx1ZSwgJ2Rvd24nKSwgbyksXG4gICAgICAgIHVzZTogKGcsIHYsIG8pID0+IHtcbiAgICAgICAgICBpZiAoZ28uZGF0YS51c2VkSWQgIT0gbz8uaWQgJiYgbz8uaWQpIHtcbiAgICAgICAgICAgIGdvLmRhdGEudXNlZElkID0gby5pZDtcbiAgICAgICAgICAgIGdvKEhlYWRlcikuZG8oJ3VzZScsIG8pO1xuICAgICAgICAgICAgZ28oTGF5ZXIpLmRvKCd1c2UnLCBvKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIG9wZW46IGFzeW5jIChnLCB2LCBvKSA9PiB7XG4gICAgICAgICAgaWYgKCFnbyhMYXllcikpIGF3YWl0IChnby5mb2N1cyhMYXllcikuZ28uYXdhaXRSZWYoTGF5ZXIpKTtcbiAgICAgICAgICBnbyhMYXllcikuZG8oJ29wZW4nLCBvKTtcbiAgICAgICAgfSxcbiAgICAgICAgY29uY2VudHJhdGU6IChnLHYsbykgPT4ge1xuICAgICAgICAgIGdvKExheWVyKS5kbygnY29uY2VudHJhdGUnLCBvKTtcbiAgICAgICAgfSxcbiAgICAgIH19XG4gICAgPlxuICAgICAgPGMuQm94IHJlZj17Z28ucmVmfSBoPScxMDB2aCcgdz1cIjEwMHZ3XCIgcG9zaXRpb249XCJmaXhlZFwiIGxlZnQ9XCIwJVwiIHRvcD1cIjAlXCI+XG4gICAgICAgIDxjLkdyaWRcbiAgICAgICAgICB0ZW1wbGF0ZUFyZWFzPXtgXCJ0YWJzIHRhYnNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJuYXYgbWFpblwiYH1cbiAgICAgICAgICBncmlkVGVtcGxhdGVSb3dzPXsnM2VtIDFmcid9XG4gICAgICAgICAgZ3JpZFRlbXBsYXRlQ29sdW1ucz17JzNlbSAxZnInfVxuICAgICAgICAgIGg9JzEwMHZoJyB3PVwiMTAwdndcIiBwb3NpdGlvbj1cImZpeGVkXCIgbGVmdD1cIjAlXCIgdG9wPVwiMCVcIlxuICAgICAgICAgIGNvbG9yPSdibGFja0FscGhhLjcwMCdcbiAgICAgICAgICBmb250V2VpZ2h0PSdib2xkJ1xuICAgICAgICAgIHJlZj17cmVmfVxuICAgICAgICA+XG4gICAgICAgICAgPGMuR3JpZEl0ZW0gYXJlYT17J3RhYnMnfSB6SW5kZXg9ezF9PlxuICAgICAgICAgICAgPGMuRmxleCB3PVwiMTAwJVwiIGg9XCIxMDAlXCIgYmc9e2dvLnZhbHVlID09PSBIZWFkZXIgPyAnZGVlcEJnRGFyaycgOiAnZGVlcEJnJ30+XG4gICAgICAgICAgICAgIDxnby5Qcm92aWRlciBsaW5rSWQ9e0hlYWRlcn0+XG4gICAgICAgICAgICAgICAgPGdvLkhhbmRsZXJcbiAgICAgICAgICAgICAgICAgIGxpbmtJZD17ZGVlcC5saW5rSWR9XG4gICAgICAgICAgICAgICAgICBoYW5kbGVySWQ9e0hlYWRlcn1cbiAgICAgICAgICAgICAgICAgIHVzaW5nXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9nby5Qcm92aWRlcj5cbiAgICAgICAgICAgIDwvYy5GbGV4PlxuICAgICAgICAgIDwvYy5HcmlkSXRlbT5cbiAgICAgICAgICA8Yy5HcmlkSXRlbSBhcmVhPXsnbmF2J30gekluZGV4PXsxfSBwb3NpdGlvbj1cInJlbGF0aXZlXCIgaD1cIjEwMCVcIj5cbiAgICAgICAgICAgIDxjLkZsZXggZGlyZWN0aW9uPSdjb2x1bW4nIGg9JzEwMCUnIGJnPXtnby52YWx1ZSA9PT0gTWVudSA/ICdkZWVwQmdEYXJrJyA6ICdkZWVwQmcnfT5cbiAgICAgICAgICAgICAgPGdvLlByb3ZpZGVyIGxpbmtJZD17TWVudX0+XG4gICAgICAgICAgICAgICAgPGdvLkhhbmRsZXJcbiAgICAgICAgICAgICAgICAgIGxpbmtJZD17ZGVlcC5saW5rSWR9XG4gICAgICAgICAgICAgICAgICBoYW5kbGVySWQ9e01lbnV9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8Yy5TcGFjZXIgLz5cbiAgICAgICAgICAgICAgPC9nby5Qcm92aWRlcj5cbiAgICAgICAgICAgICAgPGMuVlN0YWNrPlxuICAgICAgICAgICAgICAgIDxjLkJ1dHRvbiB3PSczZW0nIGg9JzNlbScgYXM9J2EnIGhyZWY9e2BodHRwOi8vJHtkZWVwPy5jbGllbnQ/LnBhdGh9YH0+PEdyR3JhcGhRbCAvPjwvYy5CdXR0b24+XG4gICAgICAgICAgICAgICAgPENvbG9yTW9kZSB3PSczZW0nIGg9JzNlbScgZGFyaz17eyBjaGlsZHJlbjogPFN1bkljb24gLz4gfX0gbGlnaHQ9e3sgY2hpbGRyZW46IDxNb29uSWNvbiAvPiB9fSAvPlxuICAgICAgICAgICAgICAgIDxnby5Qcm92aWRlciBsaW5rSWQ9e1F1ZXJpZXN9PlxuICAgICAgICAgICAgICAgICAgPGdvLkNvbXBvbmVudCBwYXRoPXtbZHBsLCAnUXVlcmllcyddfSBpc0FjdGl2ZT17Z28udmFsdWUgPT09IFF1ZXJpZXN9PjxTdGF0dXMgLz48L2dvLkNvbXBvbmVudD5cbiAgICAgICAgICAgICAgICA8L2dvLlByb3ZpZGVyPlxuICAgICAgICAgICAgICAgIDxBdXRoIC8+XG4gICAgICAgICAgICAgIDwvYy5WU3RhY2s+XG4gICAgICAgICAgICA8L2MuRmxleD5cbiAgICAgICAgICA8L2MuR3JpZEl0ZW0+XG4gICAgICAgICAgPGMuR3JpZEl0ZW0gYXJlYT17J21haW4nfSBvdmVyZmxvdz1cImhpZGRlblwiIHBvc2l0aW9uPVwicmVsYXRpdmVcIiBoPScxMDAlJyBiZz17Z28udmFsdWUgPT09IExheWVyID8gJ2RlZXBCZ0RhcmsnIDogJ2RlZXBCZyd9PlxuICAgICAgICAgICAgPGdvLlByb3ZpZGVyIGxpbmtJZD17TGF5ZXJ9IHZhbHVlPXtUcmVlfT5cbiAgICAgICAgICAgICAgPGdvLkhhbmRsZXJcbiAgICAgICAgICAgICAgICBsaW5rSWQ9e2RlZXAubGlua0lkfVxuICAgICAgICAgICAgICAgIGhhbmRsZXJJZD17TGF5ZXJ9XG4gICAgICAgICAgICAgICAgdXNpbmcgZnVsbFdpZHRoPXtpc01vYmlsZSA/ICdjYWxjKDEwMHZ3IC0gM2VtKScgOiBudWxsfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9nby5Qcm92aWRlcj5cbiAgICAgICAgICA8L2MuR3JpZEl0ZW0+XG4gICAgICAgIDwvYy5HcmlkPlxuICAgICAgPC9jLkJveD5cbiAgICA8L2dvLk9uPjtcbiAgfTtcbn0iXX0=",
        "link_id": 6065
      }
    },
    {
      "id": 6066,
      "type_id": 3,
      "from_id": 5628,
      "to_id": 6065,
      "value": {
        "id": 1283,
        "value": "generated",
        "link_id": 6066
      }
    },
    {
      "id": 6067,
      "type_id": 143,
      "from_id": 6065,
      "to_id": 5628
    },
    {
      "id": 6068,
      "type_id": 3,
      "from_id": 5628,
      "to_id": 6067
    },
    {
      "id": 5298,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1200,
        "value": "async ({ deep, data, require }) => {\n  const React = require('react');\n  const { FaTree } = require(\"react-icons/fa\");\n  const c = require('@chakra-ui/react');\n\n  const dpl = '@deep-foundation/perception-links';\n  const dc = '@deep-foundation/core';\n\n  const Tree = deep.idLocal(dpl, 'Tree');\n\n  return ({\n    go,\n    handlerId,\n\n    isActive,\n  }, ref) => {\n    return <go.On do={{\n      exec: (g,v,o) => go.go.do('right', { ...o, id: Tree })),\n      click: (g,v,o) => go.do('exec', o),\n      right: (g,v,o) => go.do('exec', o),\n    }}>\n      <c.Button\n        w='3em' h='3em'\n        variant={isActive ? 'active' : undefined}\n        ref={ref}\n        onClick={() => go.do('exec')}\n      >\n        <FaTree/>\n      </c.Button>\n    </go.On>;\n  };\n}",
        "link_id": 5298
      }
    },
    {
      "id": 3936,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 951,
        "value": "({ deep, data, require, go }) => {\n    const React = require('react');\n    const { useSymbol } = require('@deep-foundation/perception-app');\n    const c = require('@chakra-ui/react');\n    const _ = require('lodash');\n    const dpl = '@deep-foundation/perception-links';\n    const dc = '@deep-foundation/core';\n    const Contain = deep.idLocal(dc, 'Contain');\n    return ({ go, linkId, isActive, onClick, variant = 'short', needParent = false, isConcentrated, children = null, ...props }, ref) => {\n        const [co] = deep.useLocalQuery({ type_id: Contain, to_id: linkId });\n        const link = deep.get(linkId);\n        const contain = link?.inByType?.[Contain]?.[0];\n        const name = link?.name;\n        const type = link?.type?.name;\n        const icon = link?.symbol;\n        const parent = contain?.from;\n        const parentName = parent?.name || '';\n        const parentIcon = parent?.symbol;\n        const [editing, setEditing] = React.useState(false);\n        const heightRef = React.useRef(0);\n        const [value, setValue] = React.useState(link?.name);\n        const editingRef = React.useRef(editing);\n        const afterEdit = (!!editingRef.current && !editing);\n        editingRef.current = editing;\n        return React.createElement(go.On, { do: {\n                enter: async () => {\n                    if (!isActive || !contain)\n                        return;\n                    heightRef.current = ref.current.clientHeight;\n                    if (!editing) {\n                        setEditing(true);\n                        setValue(link?.name);\n                    }\n                    else {\n                        await deep.value(contain?.id, value);\n                        setEditing(false);\n                    }\n                },\n                escape: () => {\n                    setEditing(false);\n                },\n            } },\n            isConcentrated != false && React.createElement(React.Fragment, null,\n                editing && React.createElement(c.Box, { ref: ref, height: `${heightRef.current}px`, w: '100%', overflow: 'hidden' },\n                    React.createElement(c.Input, { autoFocus: true, value: value, onChange: e => setValue(e.target.value), h: '100%', onKeyDown: event => event.key === 'Escape' ? go.do('escape') : null })),\n                !!afterEdit && React.createElement(go.Query, { query: { type_id: Contain, to_id: linkId } }),\n                !editing && React.createElement(c.Button, { ref: ref, ...props, variant: isActive ? 'active' : undefined, onClick: (e) => {\n                        e.stopPropagation();\n                        e.preventDefault();\n                        go.do('exec', { id: linkId });\n                        onClick && onClick(link);\n                    }, justifyContent: 'left', pt: 2, pb: 2, w: '100%', h: '100%' },\n                    icon,\n                    \" \",\n                    React.createElement(c.Box, { textAlign: 'left', pl: '0.5em', w: '100%', overflow: 'hidden', position: 'relative' },\n                        !!parent && !!needParent && React.createElement(c.Box, { fontSize: \"0.6em\", textAlign: 'right' },\n                            parentName,\n                            \" \",\n                            parentIcon),\n                        !!((name) || (type)) && React.createElement(c.Box, { fontSize: \"sm\" }, name || type),\n                        React.createElement(c.Box, { fontSize: \"xxs\" },\n                            name ? type : '',\n                            \" \",\n                            linkId),\n                        children,\n                        variant === 'full' && !!link?.value && React.createElement(React.Fragment, null,\n                            React.createElement(c.Text, { fontSize: \"xxs\", opacity: 0.5 }, \"value:\"),\n                            React.createElement(c.Text, { fontSize: \"xs\" },\n                                typeof (link?.value?.value) == 'string' && React.createElement(React.Fragment, null,\n                                    React.createElement(c.Heading, { as: 'pre', fontSize: 'xs', noOfLines: 1, w: '100%' }, link?.value?.value)),\n                                typeof (link?.value?.value) == 'number' && React.createElement(React.Fragment, null,\n                                    React.createElement(c.Heading, { as: 'pre', fontSize: 'xs', noOfLines: 1, w: '100%' }, link?.value?.value)),\n                                typeof (link?.value?.value) == 'object' && React.createElement(React.Fragment, null,\n                                    React.createElement(c.Heading, { as: 'pre', fontSize: 'xs', noOfLines: 1, w: '100%' }, JSON.stringify(link?.value?.value)))))))),\n            isConcentrated === false && React.createElement(React.Fragment, null,\n                React.createElement(c.Button, { ref: ref, ...props, variant: isActive ? 'active' : undefined, onClick: (e) => {\n                        e.stopPropagation();\n                        e.preventDefault();\n                        go.do('exec', { id: linkId });\n                        onClick && onClick(link);\n                    }, justifyContent: 'left', pt: 2, pb: 2, w: '0', h: '100%' }, icon)));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxDQUFDLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRTtJQUM5QixNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDL0IsTUFBTSxFQUFFLFNBQVMsRUFBRSxHQUFHLE9BQU8sQ0FBQyxpQ0FBaUMsQ0FBQyxDQUFDO0lBQ2pFLE1BQU0sQ0FBQyxHQUFHLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBQ3RDLE1BQU0sQ0FBQyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUU1QixNQUFNLEdBQUcsR0FBRyxtQ0FBbUMsQ0FBQztJQUNoRCxNQUFNLEVBQUUsR0FBRyx1QkFBdUIsQ0FBQztJQUVuQyxNQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUUsRUFBRSxTQUFTLENBQUMsQ0FBQztJQUU1QyxPQUFPLENBQUMsRUFDTixFQUFFLEVBRUYsTUFBTSxFQUNOLFFBQVEsRUFFUixPQUFPLEVBRVAsT0FBTyxHQUFDLE9BQU8sRUFDZixVQUFVLEdBQUcsS0FBSyxFQUNsQixjQUFjLEVBRWQsUUFBUSxHQUFHLElBQUksRUFDZixHQUFHLEtBQUssRUFDVCxFQUFFLEdBQUcsRUFBRSxFQUFFO1FBQ1IsTUFBTSxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsRUFBRSxPQUFPLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsQ0FBQyxDQUFDO1FBR3JFLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDOUIsTUFBTSxPQUFPLEdBQUcsSUFBSSxFQUFFLFFBQVEsRUFBRSxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDL0MsTUFBTSxJQUFJLEdBQUcsSUFBSSxFQUFFLElBQUksQ0FBQztRQUN4QixNQUFNLElBQUksR0FBRyxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQztRQUM5QixNQUFNLElBQUksR0FBRyxJQUFJLEVBQUUsTUFBTSxDQUFDO1FBRTFCLE1BQU0sTUFBTSxHQUFHLE9BQU8sRUFBRSxJQUFJLENBQUM7UUFDN0IsTUFBTSxVQUFVLEdBQUcsTUFBTSxFQUFFLElBQUksSUFBSSxFQUFFLENBQUM7UUFDdEMsTUFBTSxVQUFVLEdBQUcsTUFBTSxFQUFFLE1BQU0sQ0FBQztRQUNsQyxNQUFNLENBQUMsT0FBTyxFQUFFLFVBQVUsQ0FBQyxHQUFHLEtBQUssQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDcEQsTUFBTSxTQUFTLEdBQUcsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNsQyxNQUFNLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxHQUFHLEtBQUssQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO1FBRXJELE1BQU0sVUFBVSxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDekMsTUFBTSxTQUFTLEdBQUcsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ3JELFVBQVUsQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDO1FBRTdCLE9BQU8sb0JBQUMsRUFBRSxDQUFDLEVBQUUsSUFBQyxFQUFFLEVBQUU7Z0JBQ2hCLEtBQUssRUFBRSxLQUFLLElBQUksRUFBRTtvQkFDaEIsSUFBSSxDQUFDLFFBQVEsSUFBSSxDQUFDLE9BQU87d0JBQUUsT0FBTztvQkFDbEMsU0FBUyxDQUFDLE9BQU8sR0FBRyxHQUFHLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQztvQkFDN0MsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDO3dCQUNiLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQzt3QkFDakIsUUFBUSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztvQkFDdkIsQ0FBQzt5QkFBTSxDQUFDO3dCQUNOLE1BQU0sSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsRUFBRSxFQUFFLEtBQUssQ0FBQyxDQUFDO3dCQUNyQyxVQUFVLENBQUMsS0FBSyxDQUFDLENBQUM7b0JBQ3BCLENBQUM7Z0JBQ0gsQ0FBQztnQkFDRCxNQUFNLEVBQUUsR0FBRyxFQUFFO29CQUNYLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDcEIsQ0FBQzthQUNGO1lBQ0UsY0FBYyxJQUFJLEtBQUssSUFBSTtnQkFDekIsT0FBTyxJQUFJLG9CQUFDLENBQUMsQ0FBQyxHQUFHLElBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxNQUFNLEVBQUUsR0FBRyxTQUFTLENBQUMsT0FBTyxJQUFJLEVBQUUsQ0FBQyxFQUFDLE1BQU0sRUFBQyxRQUFRLEVBQUMsUUFBUTtvQkFDdkYsb0JBQUMsQ0FBQyxDQUFDLEtBQUssSUFDTixTQUFTLFFBQUMsS0FBSyxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLEVBQUMsTUFBTSxFQUN6RSxTQUFTLEVBQUUsS0FBSyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsR0FBRyxLQUFLLFFBQVEsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxHQUNuRSxDQUNJO2dCQUNQLENBQUMsQ0FBQyxTQUFTLElBQUksb0JBQUMsRUFBRSxDQUFDLEtBQUssSUFBQyxLQUFLLEVBQUUsRUFBRSxPQUFPLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsR0FBRztnQkFDdEUsQ0FBQyxPQUFPLElBQUksb0JBQUMsQ0FBQyxDQUFDLE1BQU0sSUFDcEIsR0FBRyxFQUFFLEdBQUcsS0FDSixLQUFLLEVBQ1QsT0FBTyxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQ3hDLE9BQU8sRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFO3dCQUNiLENBQUMsQ0FBQyxlQUFlLEVBQUUsQ0FBQzt3QkFDcEIsQ0FBQyxDQUFDLGNBQWMsRUFBRSxDQUFDO3dCQUNuQixFQUFFLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxFQUFFLEVBQUUsRUFBRSxNQUFNLEVBQUUsQ0FBQyxDQUFDO3dCQUM5QixPQUFPLElBQUksT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO29CQUMzQixDQUFDLEVBQ0QsY0FBYyxFQUFFLE1BQU0sRUFDdEIsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBQyxNQUFNLEVBQUMsQ0FBQyxFQUFDLE1BQU07b0JBRTlCLElBQUk7O29CQUFFLG9CQUFDLENBQUMsQ0FBQyxHQUFHLElBQUMsU0FBUyxFQUFDLE1BQU0sRUFBQyxFQUFFLEVBQUMsT0FBTyxFQUFDLENBQUMsRUFBQyxNQUFNLEVBQUMsUUFBUSxFQUFDLFFBQVEsRUFBQyxRQUFRLEVBQUMsVUFBVTt3QkFDdkYsQ0FBQyxDQUFDLE1BQU0sSUFBSSxDQUFDLENBQUMsVUFBVSxJQUFJLG9CQUFDLENBQUMsQ0FBQyxHQUFHLElBQUMsUUFBUSxFQUFDLE9BQU8sRUFBQyxTQUFTLEVBQUMsT0FBTzs0QkFBRSxVQUFVOzs0QkFBRyxVQUFVLENBQVM7d0JBQ3ZHLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLG9CQUFDLENBQUMsQ0FBQyxHQUFHLElBQUMsUUFBUSxFQUFDLElBQUksSUFBRSxJQUFJLElBQUksSUFBSSxDQUNuRDt3QkFDUixvQkFBQyxDQUFDLENBQUMsR0FBRyxJQUFDLFFBQVEsRUFBQyxLQUFLOzRCQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFOzs0QkFBRyxNQUFNLENBQVM7d0JBQ3hELFFBQVE7d0JBQ1IsT0FBTyxLQUFLLE1BQU0sSUFBSSxDQUFDLENBQUMsSUFBSSxFQUFFLEtBQUssSUFBSTs0QkFDdEMsb0JBQUMsQ0FBQyxDQUFDLElBQUksSUFBQyxRQUFRLEVBQUMsS0FBSyxFQUFDLE9BQU8sRUFBRSxHQUFHLGFBQWlCOzRCQUNwRCxvQkFBQyxDQUFDLENBQUMsSUFBSSxJQUFDLFFBQVEsRUFBQyxJQUFJO2dDQUNsQixPQUFNLENBQUMsSUFBSSxFQUFFLEtBQUssRUFBRSxLQUFLLENBQUMsSUFBSSxRQUFRLElBQUk7b0NBQ3pDLG9CQUFDLENBQUMsQ0FBQyxPQUFPLElBQUMsRUFBRSxFQUFDLEtBQUssRUFBQyxRQUFRLEVBQUMsSUFBSSxFQUFDLFNBQVMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFDLE1BQU0sSUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLEtBQUssQ0FBYSxDQUN4RjtnQ0FDRixPQUFNLENBQUMsSUFBSSxFQUFFLEtBQUssRUFBRSxLQUFLLENBQUMsSUFBSSxRQUFRLElBQUk7b0NBQ3pDLG9CQUFDLENBQUMsQ0FBQyxPQUFPLElBQUMsRUFBRSxFQUFDLEtBQUssRUFBQyxRQUFRLEVBQUMsSUFBSSxFQUFDLFNBQVMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFDLE1BQU0sSUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLEtBQUssQ0FBYSxDQUN4RjtnQ0FDRixPQUFNLENBQUMsSUFBSSxFQUFFLEtBQUssRUFBRSxLQUFLLENBQUMsSUFBSSxRQUFRLElBQUk7b0NBQ3pDLG9CQUFDLENBQUMsQ0FBQyxPQUFPLElBQUMsRUFBRSxFQUFDLEtBQUssRUFBQyxRQUFRLEVBQUMsSUFBSSxFQUFDLFNBQVMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFDLE1BQU0sSUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksRUFBRSxLQUFLLEVBQUUsS0FBSyxDQUFDLENBQWEsQ0FDeEcsQ0FDSSxDQUNSLENBQ0ssQ0FDQyxDQUNWO1lBQ0YsY0FBYyxLQUFLLEtBQUssSUFBSTtnQkFDM0Isb0JBQUMsQ0FBQyxDQUFDLE1BQU0sSUFDUCxHQUFHLEVBQUUsR0FBRyxLQUNKLEtBQUssRUFDVCxPQUFPLEVBQUUsUUFBUSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFDeEMsT0FBTyxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUU7d0JBQ2IsQ0FBQyxDQUFDLGVBQWUsRUFBRSxDQUFDO3dCQUNwQixDQUFDLENBQUMsY0FBYyxFQUFFLENBQUM7d0JBQ25CLEVBQUUsQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLEVBQUUsRUFBRSxFQUFFLE1BQU0sRUFBRSxDQUFDLENBQUM7d0JBQzlCLE9BQU8sSUFBSSxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7b0JBQzNCLENBQUMsRUFDRCxjQUFjLEVBQUUsTUFBTSxFQUN0QixFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFDLEdBQUcsRUFBQyxDQUFDLEVBQUMsTUFBTSxJQUUzQixJQUFJLENBQ0ksQ0FDVixDQUNHLENBQUM7SUFDWCxDQUFDLENBQUM7QUFDSixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIoeyBkZWVwLCBkYXRhLCByZXF1aXJlLCBnbyB9KSA9PiB7XG4gIGNvbnN0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbiAgY29uc3QgeyB1c2VTeW1ib2wgfSA9IHJlcXVpcmUoJ0BkZWVwLWZvdW5kYXRpb24vcGVyY2VwdGlvbi1hcHAnKTtcbiAgY29uc3QgYyA9IHJlcXVpcmUoJ0BjaGFrcmEtdWkvcmVhY3QnKTtcbiAgY29uc3QgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xuXG4gIGNvbnN0IGRwbCA9ICdAZGVlcC1mb3VuZGF0aW9uL3BlcmNlcHRpb24tbGlua3MnO1xuICBjb25zdCBkYyA9ICdAZGVlcC1mb3VuZGF0aW9uL2NvcmUnO1xuXG4gIGNvbnN0IENvbnRhaW4gPSBkZWVwLmlkTG9jYWwoZGMsICdDb250YWluJyk7XG5cbiAgcmV0dXJuICh7XG4gICAgZ28sXG5cbiAgICBsaW5rSWQsXG4gICAgaXNBY3RpdmUsXG5cbiAgICBvbkNsaWNrLFxuXG4gICAgdmFyaWFudD0nc2hvcnQnLCAvLyBmdWxsIHwgc2hvcnRcbiAgICBuZWVkUGFyZW50ID0gZmFsc2UsXG4gICAgaXNDb25jZW50cmF0ZWQsXG5cbiAgICBjaGlsZHJlbiA9IG51bGwsXG4gICAgLi4ucHJvcHNcbiAgfSwgcmVmKSA9PiB7XG4gICAgY29uc3QgW2NvXSA9IGRlZXAudXNlTG9jYWxRdWVyeSh7IHR5cGVfaWQ6IENvbnRhaW4sIHRvX2lkOiBsaW5rSWQgfSk7XG4gICAgLy8gY29uc3QgW2xpbmssIGNvbnRhaW5dID0gZGVlcC51c2VMaW5rcyhsaW5rSWQsIGNvKTtcbiAgICAvLyBjb25zb2xlLmxvZygnWFhYWFgnLCBsaW5rLCBjb250YWluKTtcbiAgICBjb25zdCBsaW5rID0gZGVlcC5nZXQobGlua0lkKTtcbiAgICBjb25zdCBjb250YWluID0gbGluaz8uaW5CeVR5cGU/LltDb250YWluXT8uWzBdO1xuICAgIGNvbnN0IG5hbWUgPSBsaW5rPy5uYW1lO1xuICAgIGNvbnN0IHR5cGUgPSBsaW5rPy50eXBlPy5uYW1lO1xuICAgIGNvbnN0IGljb24gPSBsaW5rPy5zeW1ib2w7XG4gIFxuICAgIGNvbnN0IHBhcmVudCA9IGNvbnRhaW4/LmZyb207XG4gICAgY29uc3QgcGFyZW50TmFtZSA9IHBhcmVudD8ubmFtZSB8fCAnJztcbiAgICBjb25zdCBwYXJlbnRJY29uID0gcGFyZW50Py5zeW1ib2w7XG4gICAgY29uc3QgW2VkaXRpbmcsIHNldEVkaXRpbmddID0gUmVhY3QudXNlU3RhdGUoZmFsc2UpO1xuICAgIGNvbnN0IGhlaWdodFJlZiA9IFJlYWN0LnVzZVJlZigwKTtcbiAgICBjb25zdCBbdmFsdWUsIHNldFZhbHVlXSA9IFJlYWN0LnVzZVN0YXRlKGxpbms/Lm5hbWUpO1xuICBcbiAgICBjb25zdCBlZGl0aW5nUmVmID0gUmVhY3QudXNlUmVmKGVkaXRpbmcpO1xuICAgIGNvbnN0IGFmdGVyRWRpdCA9ICghIWVkaXRpbmdSZWYuY3VycmVudCAmJiAhZWRpdGluZyk7XG4gICAgZWRpdGluZ1JlZi5jdXJyZW50ID0gZWRpdGluZztcbiAgXG4gICAgcmV0dXJuIDxnby5PbiBkbz17e1xuICAgICAgZW50ZXI6IGFzeW5jICgpID0+IHtcbiAgICAgICAgaWYgKCFpc0FjdGl2ZSB8fCAhY29udGFpbikgcmV0dXJuO1xuICAgICAgICBoZWlnaHRSZWYuY3VycmVudCA9IHJlZi5jdXJyZW50LmNsaWVudEhlaWdodDtcbiAgICAgICAgaWYgKCFlZGl0aW5nKSB7XG4gICAgICAgICAgc2V0RWRpdGluZyh0cnVlKTtcbiAgICAgICAgICBzZXRWYWx1ZShsaW5rPy5uYW1lKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhd2FpdCBkZWVwLnZhbHVlKGNvbnRhaW4/LmlkLCB2YWx1ZSk7XG4gICAgICAgICAgc2V0RWRpdGluZyhmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBlc2NhcGU6ICgpID0+IHtcbiAgICAgICAgc2V0RWRpdGluZyhmYWxzZSk7XG4gICAgICB9LFxuICAgIH19PlxuICAgICAge2lzQ29uY2VudHJhdGVkICE9IGZhbHNlICYmIDw+XG4gICAgICAgIHtlZGl0aW5nICYmIDxjLkJveCByZWY9e3JlZn0gaGVpZ2h0PXtgJHtoZWlnaHRSZWYuY3VycmVudH1weGB9IHc9JzEwMCUnIG92ZXJmbG93PSdoaWRkZW4nPlxuICAgICAgICAgIDxjLklucHV0XG4gICAgICAgICAgICBhdXRvRm9jdXMgdmFsdWU9e3ZhbHVlfSBvbkNoYW5nZT17ZSA9PiBzZXRWYWx1ZShlLnRhcmdldC52YWx1ZSl9IGg9JzEwMCUnXG4gICAgICAgICAgICBvbktleURvd249e2V2ZW50ID0+IGV2ZW50LmtleSA9PT0gJ0VzY2FwZScgPyBnby5kbygnZXNjYXBlJykgOiBudWxsfVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvYy5Cb3g+fVxuICAgICAgICB7ISFhZnRlckVkaXQgJiYgPGdvLlF1ZXJ5IHF1ZXJ5PXt7IHR5cGVfaWQ6IENvbnRhaW4sIHRvX2lkOiBsaW5rSWQgfX0vPn1cbiAgICAgICAgeyFlZGl0aW5nICYmIDxjLkJ1dHRvblxuICAgICAgICAgIHJlZj17cmVmfVxuICAgICAgICAgIHsuLi5wcm9wc31cbiAgICAgICAgICB2YXJpYW50PXtpc0FjdGl2ZSA/ICdhY3RpdmUnIDogdW5kZWZpbmVkfVxuICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB7XG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgZ28uZG8oJ2V4ZWMnLCB7IGlkOiBsaW5rSWQgfSk7XG4gICAgICAgICAgICBvbkNsaWNrICYmIG9uQ2xpY2sobGluayk7XG4gICAgICAgICAgfX1cbiAgICAgICAgICBqdXN0aWZ5Q29udGVudD17J2xlZnQnfVxuICAgICAgICAgIHB0PXsyfSBwYj17Mn0gdz0nMTAwJScgaD0nMTAwJSdcbiAgICAgICAgPlxuICAgICAgICAgIHtpY29ufSA8Yy5Cb3ggdGV4dEFsaWduPSdsZWZ0JyBwbD0nMC41ZW0nIHc9JzEwMCUnIG92ZXJmbG93PSdoaWRkZW4nIHBvc2l0aW9uPSdyZWxhdGl2ZSc+XG4gICAgICAgICAgeyEhcGFyZW50ICYmICEhbmVlZFBhcmVudCAmJiA8Yy5Cb3ggZm9udFNpemU9XCIwLjZlbVwiIHRleHRBbGlnbj0ncmlnaHQnPntwYXJlbnROYW1lfSB7cGFyZW50SWNvbn08L2MuQm94Pn1cbiAgICAgICAgICB7ISEoKG5hbWUpIHx8ICh0eXBlKSkgJiYgPGMuQm94IGZvbnRTaXplPVwic21cIj57bmFtZSB8fCB0eXBlfVxuICAgICAgICAgIDwvYy5Cb3g+fVxuICAgICAgICAgIDxjLkJveCBmb250U2l6ZT1cInh4c1wiPntuYW1lID8gdHlwZSA6ICcnfSB7bGlua0lkfTwvYy5Cb3g+XG4gICAgICAgICAge2NoaWxkcmVufVxuICAgICAgICAgIHt2YXJpYW50ID09PSAnZnVsbCcgJiYgISFsaW5rPy52YWx1ZSAmJiA8PlxuICAgICAgICAgICAgPGMuVGV4dCBmb250U2l6ZT1cInh4c1wiIG9wYWNpdHk9ezAuNX0+dmFsdWU6PC9jLlRleHQ+XG4gICAgICAgICAgICA8Yy5UZXh0IGZvbnRTaXplPVwieHNcIj5cbiAgICAgICAgICAgICAge3R5cGVvZihsaW5rPy52YWx1ZT8udmFsdWUpID09ICdzdHJpbmcnICYmIDw+XG4gICAgICAgICAgICAgICAgPGMuSGVhZGluZyBhcz0ncHJlJyBmb250U2l6ZT0neHMnIG5vT2ZMaW5lcz17MX0gdz0nMTAwJSc+e2xpbms/LnZhbHVlPy52YWx1ZX08L2MuSGVhZGluZz5cbiAgICAgICAgICAgICAgPC8+fVxuICAgICAgICAgICAgICB7dHlwZW9mKGxpbms/LnZhbHVlPy52YWx1ZSkgPT0gJ251bWJlcicgJiYgPD5cbiAgICAgICAgICAgICAgICA8Yy5IZWFkaW5nIGFzPSdwcmUnIGZvbnRTaXplPSd4cycgbm9PZkxpbmVzPXsxfSB3PScxMDAlJz57bGluaz8udmFsdWU/LnZhbHVlfTwvYy5IZWFkaW5nPlxuICAgICAgICAgICAgICA8Lz59XG4gICAgICAgICAgICAgIHt0eXBlb2YobGluaz8udmFsdWU/LnZhbHVlKSA9PSAnb2JqZWN0JyAmJiA8PlxuICAgICAgICAgICAgICAgIDxjLkhlYWRpbmcgYXM9J3ByZScgZm9udFNpemU9J3hzJyBub09mTGluZXM9ezF9IHc9JzEwMCUnPntKU09OLnN0cmluZ2lmeShsaW5rPy52YWx1ZT8udmFsdWUpfTwvYy5IZWFkaW5nPlxuICAgICAgICAgICAgICA8Lz59XG4gICAgICAgICAgICA8L2MuVGV4dD5cbiAgICAgICAgICA8Lz59XG4gICAgICAgICAgPC9jLkJveD5cbiAgICAgICAgPC9jLkJ1dHRvbj59XG4gICAgICA8Lz59XG4gICAgICB7aXNDb25jZW50cmF0ZWQgPT09IGZhbHNlICYmIDw+XG4gICAgICAgIDxjLkJ1dHRvblxuICAgICAgICAgIHJlZj17cmVmfVxuICAgICAgICAgIHsuLi5wcm9wc31cbiAgICAgICAgICB2YXJpYW50PXtpc0FjdGl2ZSA/ICdhY3RpdmUnIDogdW5kZWZpbmVkfVxuICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB7XG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgZ28uZG8oJ2V4ZWMnLCB7IGlkOiBsaW5rSWQgfSk7XG4gICAgICAgICAgICBvbkNsaWNrICYmIG9uQ2xpY2sobGluayk7XG4gICAgICAgICAgfX1cbiAgICAgICAgICBqdXN0aWZ5Q29udGVudD17J2xlZnQnfVxuICAgICAgICAgIHB0PXsyfSBwYj17Mn0gdz0nMCcgaD0nMTAwJSdcbiAgICAgICAgPlxuICAgICAgICAgIHtpY29ufVxuICAgICAgICA8L2MuQnV0dG9uPlxuICAgICAgPC8+fVxuICAgIDwvZ28uT24+O1xuICB9O1xufSJdfQ==",
        "link_id": 3936
      }
    },
    {
      "id": 3937,
      "type_id": 3,
      "from_id": 3844,
      "to_id": 3936,
      "value": {
        "id": 950,
        "value": "generated",
        "link_id": 3937
      }
    },
    {
      "id": 3938,
      "type_id": 143,
      "from_id": 3936,
      "to_id": 3844
    },
    {
      "id": 3939,
      "type_id": 3,
      "from_id": 3844,
      "to_id": 3938
    },
    {
      "id": 5301,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 5298,
      "value": {
        "id": 1179,
        "value": "MenuTreeComponent",
        "link_id": 5301
      }
    },
    {
      "id": 5305,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 5304,
      "value": {
        "id": 1170,
        "value": "MenuTree",
        "link_id": 5305
      }
    },
    {
      "id": 5304,
      "type_id": 35,
      "from_id": 145,
      "to_id": 5298
    },
    {
      "id": 5601,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1237,
        "value": "async ({ deep, data, require }) => {\n  const React = require('react');\n  const c = require('@chakra-ui/react');\n\n  const dpl = '@deep-foundation/perception-links';\n  const dc = '@deep-foundation/core';\n\n  const Tree = deep.idLocal(dpl, 'Tree');\n\n  return ({\n    go,\n\n    using = false,\n    fullWidth = null,\n  }, ref) => {\n    // const [layer, setLayer] = go.useQueryStore(`layer`, Tree);\n    // React.useEffect(() => go.value && setLayer(go.value), [go.value]);\n\n    return <go.On do={{\n      focus: (g,v,linkId,o) => o?.id && go.focus(o.id),\n      use: (g,v,o) => go.current && go.current.do('use',o),\n      open: async (g,v,o) => {\n        if (!go.current) await (go.focus(Tree).go.awaitRef(Tree));\n        if (o?.id) go.current.do('open',o);\n      },\n      concentrate: (g,v,o) => {\n        go.current && go.current.do('concentrate', o);\n      },\n    }}>\n      <c.Box ref={ref} w='100%' h='100%'>\n        {!!go.value && [<go.Provider key={go.value} linkId={go.value}>\n          <go.Handler\n            initialId={deep?.linkId}\n            handlerId={go.value}\n            saveHistory\n            using={using}\n            fullWidth={fullWidth}\n            queryField='opened'\n          />\n        </go.Provider>]}\n      </c.Box>\n    </go.On>;\n  };\n}",
        "link_id": 5601
      }
    },
    {
      "id": 5604,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 5601,
      "value": {
        "id": 1218,
        "value": "LayerComponent",
        "link_id": 5604
      }
    },
    {
      "id": 5605,
      "type_id": 35,
      "from_id": 145,
      "to_id": 5601
    },
    {
      "id": 5606,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 5605,
      "value": {
        "id": 1219,
        "value": "Layer",
        "link_id": 5606
      }
    },
    {
      "id": 6282,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1318,
        "value": "async ({ deep, data, require }) => {\n    const React = require('react');\n    const { PiGraphBold } = require(\"react-icons/pi\");\n    const c = require('@chakra-ui/react');\n    const dpl = '@deep-foundation/perception-links';\n    const dc = '@deep-foundation/core';\n    const Graph = deep.idLocal(dpl, 'Graph');\n    return ({ go, handlerId, isActive, }, ref) => {\n        return React.createElement(go.On, { do: {\n                exec: (g, v, o) => go.go.do('right', { ...o, id: Graph }),\n                click: (g, v, o) => go.do('exec', o),\n                right: (g, v, o) => go.do('exec', o),\n            } },\n            React.createElement(c.Button, { w: '3em', h: '3em', variant: isActive ? 'active' : undefined, onClick: () => go.do('exec'), ref: ref },\n                React.createElement(PiGraphBold, null)));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxFQUFFLEVBQUU7SUFDaEMsTUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQy9CLE1BQU0sRUFBRSxXQUFXLEVBQUUsR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztJQUNsRCxNQUFNLENBQUMsR0FBRyxPQUFPLENBQUMsa0JBQWtCLENBQUMsQ0FBQztJQUV0QyxNQUFNLEdBQUcsR0FBRyxtQ0FBbUMsQ0FBQztJQUNoRCxNQUFNLEVBQUUsR0FBRyx1QkFBdUIsQ0FBQztJQUVuQyxNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxPQUFPLENBQUMsQ0FBQztJQUV6QyxPQUFPLENBQUMsRUFDTixFQUFFLEVBQ0YsU0FBUyxFQUVULFFBQVEsR0FDVCxFQUFFLEdBQUcsRUFBRSxFQUFFO1FBQ1IsT0FBTyxvQkFBQyxFQUFFLENBQUMsRUFBRSxJQUFDLEVBQUUsRUFBRTtnQkFDaEIsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxFQUFFLEdBQUcsQ0FBQyxFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQUUsQ0FBQztnQkFDdkQsS0FBSyxFQUFFLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQztnQkFDbEMsS0FBSyxFQUFFLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQzthQUNuQztZQUNDLG9CQUFDLENBQUMsQ0FBQyxNQUFNLElBQ1AsQ0FBQyxFQUFDLEtBQUssRUFBQyxDQUFDLEVBQUMsS0FBSyxFQUNmLE9BQU8sRUFBRSxRQUFRLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUN4QyxPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsRUFDNUIsR0FBRyxFQUFFLEdBQUc7Z0JBRVIsb0JBQUMsV0FBVyxPQUFFLENBQ0wsQ0FDTCxDQUFDO0lBQ1gsQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiYXN5bmMgKHsgZGVlcCwgZGF0YSwgcmVxdWlyZSB9KSA9PiB7XG4gIGNvbnN0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbiAgY29uc3QgeyBQaUdyYXBoQm9sZCB9ID0gcmVxdWlyZShcInJlYWN0LWljb25zL3BpXCIpO1xuICBjb25zdCBjID0gcmVxdWlyZSgnQGNoYWtyYS11aS9yZWFjdCcpO1xuXG4gIGNvbnN0IGRwbCA9ICdAZGVlcC1mb3VuZGF0aW9uL3BlcmNlcHRpb24tbGlua3MnO1xuICBjb25zdCBkYyA9ICdAZGVlcC1mb3VuZGF0aW9uL2NvcmUnO1xuXG4gIGNvbnN0IEdyYXBoID0gZGVlcC5pZExvY2FsKGRwbCwgJ0dyYXBoJyk7XG5cbiAgcmV0dXJuICh7XG4gICAgZ28sXG4gICAgaGFuZGxlcklkLFxuXG4gICAgaXNBY3RpdmUsXG4gIH0sIHJlZikgPT4ge1xuICAgIHJldHVybiA8Z28uT24gZG89e3tcbiAgICAgIGV4ZWM6IChnLHYsbykgPT4gZ28uZ28uZG8oJ3JpZ2h0JywgeyAuLi5vLCBpZDogR3JhcGggfSkpLFxuICAgICAgY2xpY2s6IChnLHYsbykgPT4gZ28uZG8oJ2V4ZWMnLCBvKSxcbiAgICAgIHJpZ2h0OiAoZyx2LG8pID0+IGdvLmRvKCdleGVjJywgbyksXG4gICAgfX0+XG4gICAgICA8Yy5CdXR0b25cbiAgICAgICAgdz0nM2VtJyBoPSczZW0nXG4gICAgICAgIHZhcmlhbnQ9e2lzQWN0aXZlID8gJ2FjdGl2ZScgOiB1bmRlZmluZWR9XG4gICAgICAgIG9uQ2xpY2s9eygpID0+IGdvLmRvKCdleGVjJyl9XG4gICAgICAgIHJlZj17cmVmfVxuICAgICAgPlxuICAgICAgICA8UGlHcmFwaEJvbGQvPlxuICAgICAgPC9jLkJ1dHRvbj5cbiAgICA8L2dvLk9uPjtcbiAgfTtcbn0iXX0=",
        "link_id": 6282
      }
    },
    {
      "id": 6283,
      "type_id": 3,
      "from_id": 6262,
      "to_id": 6282,
      "value": {
        "id": 1317,
        "value": "generated",
        "link_id": 6283
      }
    },
    {
      "id": 6284,
      "type_id": 143,
      "from_id": 6282,
      "to_id": 6262
    },
    {
      "id": 6285,
      "type_id": 3,
      "from_id": 6262,
      "to_id": 6284
    },
    {
      "id": 3844,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 949,
        "value": "({ deep, data, require, go }) => {\n  const React = require('react');\n  const { useSymbol } = require('@deep-foundation/perception-app');\n  const c = require('@chakra-ui/react');\n  const _ = require('lodash');\n\n  const dpl = '@deep-foundation/perception-links';\n  const dc = '@deep-foundation/core';\n\n  const Contain = deep.idLocal(dc, 'Contain');\n\n  return ({\n    go,\n\n    linkId,\n    isActive,\n\n    onClick,\n\n    variant='short', // full | short\n    needParent = false,\n    isConcentrated,\n\n    children = null,\n    ...props\n  }, ref) => {\n    const [co] = deep.useLocalQuery({ type_id: Contain, to_id: linkId });\n    // const [link, contain] = deep.useLinks(linkId, co);\n    // console.log('XXXXX', link, contain);\n    const link = deep.get(linkId);\n    const contain = link?.inByType?.[Contain]?.[0];\n    const name = link?.name;\n    const type = link?.type?.name;\n    const icon = link?.symbol;\n  \n    const parent = contain?.from;\n    const parentName = parent?.name || '';\n    const parentIcon = parent?.symbol;\n    const [editing, setEditing] = React.useState(false);\n    const heightRef = React.useRef(0);\n    const [value, setValue] = React.useState(link?.name);\n  \n    const editingRef = React.useRef(editing);\n    const afterEdit = (!!editingRef.current && !editing);\n    editingRef.current = editing;\n  \n    return <go.On do={{\n      enter: async () => {\n        if (!isActive || !contain) return;\n        heightRef.current = ref.current.clientHeight;\n        if (!editing) {\n          setEditing(true);\n          setValue(link?.name);\n        } else {\n          await deep.value(contain?.id, value);\n          setEditing(false);\n        }\n      },\n      escape: () => {\n        setEditing(false);\n      },\n    }}>\n      {isConcentrated != false && <>\n        {editing && <c.Box ref={ref} height={`${heightRef.current}px`} w='100%' overflow='hidden'>\n          <c.Input\n            autoFocus value={value} onChange={e => setValue(e.target.value)} h='100%'\n            onKeyDown={event => event.key === 'Escape' ? go.do('escape') : null}\n          />\n        </c.Box>}\n        {!!afterEdit && <go.Query query={{ type_id: Contain, to_id: linkId }}/>}\n        {!editing && <c.Button\n          ref={ref}\n          {...props}\n          variant={isActive ? 'active' : undefined}\n          onClick={(e) => {\n            e.stopPropagation();\n            e.preventDefault();\n            go.do('exec', { id: linkId });\n            onClick && onClick(link);\n          }}\n          justifyContent={'left'}\n          pt={2} pb={2} w='100%' h='100%'\n        >\n          {icon} <c.Box textAlign='left' pl='0.5em' w='100%' overflow='hidden' position='relative'>\n          {!!parent && !!needParent && <c.Box fontSize=\"0.6em\" textAlign='right'>{parentName} {parentIcon}</c.Box>}\n          {!!((name) || (type)) && <c.Box fontSize=\"sm\">{name || type}\n          </c.Box>}\n          <c.Box fontSize=\"xxs\">{name ? type : ''} {linkId}</c.Box>\n          {children}\n          {variant === 'full' && !!link?.value && <>\n            <c.Text fontSize=\"xxs\" opacity={0.5}>value:</c.Text>\n            <c.Text fontSize=\"xs\">\n              {typeof(link?.value?.value) == 'string' && <>\n                <c.Heading as='pre' fontSize='xs' noOfLines={1} w='100%'>{link?.value?.value}</c.Heading>\n              </>}\n              {typeof(link?.value?.value) == 'number' && <>\n                <c.Heading as='pre' fontSize='xs' noOfLines={1} w='100%'>{link?.value?.value}</c.Heading>\n              </>}\n              {typeof(link?.value?.value) == 'object' && <>\n                <c.Heading as='pre' fontSize='xs' noOfLines={1} w='100%'>{JSON.stringify(link?.value?.value)}</c.Heading>\n              </>}\n            </c.Text>\n          </>}\n          </c.Box>\n        </c.Button>}\n      </>}\n      {isConcentrated === false && <>\n        <c.Button\n          ref={ref}\n          {...props}\n          variant={isActive ? 'active' : undefined}\n          onClick={(e) => {\n            e.stopPropagation();\n            e.preventDefault();\n            go.do('exec', { id: linkId });\n            onClick && onClick(link);\n          }}\n          justifyContent={'left'}\n          pt={2} pb={2} w='0' h='100%'\n        >\n          {icon}\n        </c.Button>\n      </>}\n    </go.On>;\n  };\n}",
        "link_id": 3844
      }
    },
    {
      "id": 3845,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 3844,
      "value": {
        "id": 933,
        "value": "TreeLinkButtonComponent",
        "link_id": 3845
      }
    },
    {
      "id": 5510,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1202,
        "value": "async ({ deep, data, require }) => {\n    const React = require('react');\n    const { FaTree } = require(\"react-icons/fa\");\n    const c = require('@chakra-ui/react');\n    const dpl = '@deep-foundation/perception-links';\n    const dc = '@deep-foundation/core';\n    const Tree = deep.idLocal(dpl, 'Tree');\n    return ({ go, handlerId, isActive, }, ref) => {\n        return React.createElement(go.On, { do: {\n                exec: (g, v, o) => go.go.do('right', { ...o, id: Tree }),\n                click: (g, v, o) => go.do('exec', o),\n                right: (g, v, o) => go.do('exec', o),\n            } },\n            React.createElement(c.Button, { w: '3em', h: '3em', variant: isActive ? 'active' : undefined, ref: ref, onClick: () => go.do('exec') },\n                React.createElement(FaTree, null)));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxFQUFFLEVBQUU7SUFDaEMsTUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQy9CLE1BQU0sRUFBRSxNQUFNLEVBQUUsR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztJQUM3QyxNQUFNLENBQUMsR0FBRyxPQUFPLENBQUMsa0JBQWtCLENBQUMsQ0FBQztJQUV0QyxNQUFNLEdBQUcsR0FBRyxtQ0FBbUMsQ0FBQztJQUNoRCxNQUFNLEVBQUUsR0FBRyx1QkFBdUIsQ0FBQztJQUVuQyxNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxNQUFNLENBQUMsQ0FBQztJQUV2QyxPQUFPLENBQUMsRUFDTixFQUFFLEVBQ0YsU0FBUyxFQUVULFFBQVEsR0FDVCxFQUFFLEdBQUcsRUFBRSxFQUFFO1FBQ1IsT0FBTyxvQkFBQyxFQUFFLENBQUMsRUFBRSxJQUFDLEVBQUUsRUFBRTtnQkFDaEIsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxFQUFFLEdBQUcsQ0FBQyxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsQ0FBQztnQkFDdEQsS0FBSyxFQUFFLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQztnQkFDbEMsS0FBSyxFQUFFLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQzthQUNuQztZQUNDLG9CQUFDLENBQUMsQ0FBQyxNQUFNLElBQ1AsQ0FBQyxFQUFDLEtBQUssRUFBQyxDQUFDLEVBQUMsS0FBSyxFQUNmLE9BQU8sRUFBRSxRQUFRLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUN4QyxHQUFHLEVBQUUsR0FBRyxFQUNSLE9BQU8sRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQztnQkFFNUIsb0JBQUMsTUFBTSxPQUFFLENBQ0EsQ0FDTCxDQUFDO0lBQ1gsQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiYXN5bmMgKHsgZGVlcCwgZGF0YSwgcmVxdWlyZSB9KSA9PiB7XG4gIGNvbnN0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbiAgY29uc3QgeyBGYVRyZWUgfSA9IHJlcXVpcmUoXCJyZWFjdC1pY29ucy9mYVwiKTtcbiAgY29uc3QgYyA9IHJlcXVpcmUoJ0BjaGFrcmEtdWkvcmVhY3QnKTtcblxuICBjb25zdCBkcGwgPSAnQGRlZXAtZm91bmRhdGlvbi9wZXJjZXB0aW9uLWxpbmtzJztcbiAgY29uc3QgZGMgPSAnQGRlZXAtZm91bmRhdGlvbi9jb3JlJztcblxuICBjb25zdCBUcmVlID0gZGVlcC5pZExvY2FsKGRwbCwgJ1RyZWUnKTtcblxuICByZXR1cm4gKHtcbiAgICBnbyxcbiAgICBoYW5kbGVySWQsXG5cbiAgICBpc0FjdGl2ZSxcbiAgfSwgcmVmKSA9PiB7XG4gICAgcmV0dXJuIDxnby5PbiBkbz17e1xuICAgICAgZXhlYzogKGcsdixvKSA9PiBnby5nby5kbygncmlnaHQnLCB7IC4uLm8sIGlkOiBUcmVlIH0pKSxcbiAgICAgIGNsaWNrOiAoZyx2LG8pID0+IGdvLmRvKCdleGVjJywgbyksXG4gICAgICByaWdodDogKGcsdixvKSA9PiBnby5kbygnZXhlYycsIG8pLFxuICAgIH19PlxuICAgICAgPGMuQnV0dG9uXG4gICAgICAgIHc9JzNlbScgaD0nM2VtJ1xuICAgICAgICB2YXJpYW50PXtpc0FjdGl2ZSA/ICdhY3RpdmUnIDogdW5kZWZpbmVkfVxuICAgICAgICByZWY9e3JlZn1cbiAgICAgICAgb25DbGljaz17KCkgPT4gZ28uZG8oJ2V4ZWMnKX1cbiAgICAgID5cbiAgICAgICAgPEZhVHJlZS8+XG4gICAgICA8L2MuQnV0dG9uPlxuICAgIDwvZ28uT24+O1xuICB9O1xufSJdfQ==",
        "link_id": 5510
      }
    },
    {
      "id": 5511,
      "type_id": 3,
      "from_id": 5298,
      "to_id": 5510,
      "value": {
        "id": 1201,
        "value": "generated",
        "link_id": 5511
      }
    },
    {
      "id": 5512,
      "type_id": 143,
      "from_id": 5510,
      "to_id": 5298
    },
    {
      "id": 4586,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1026,
        "value": "({ deep, data, require, go }) => {\n    const React = require('react');\n    const c = require('@chakra-ui/react');\n    const dpl = '@deep-foundation/perception-links';\n    const dc = '@deep-foundation/core';\n    return ({ go, disclosure: _disclosure, defaultContainerId, defaultTypeId, defaultFromId, defaultToId, isActive, }, ref) => {\n        const __disclosure = c.useDisclosure();\n        const disclosure = _disclosure || __disclosure;\n        return React.createElement(go.On, { do: {\n                'exec': () => disclosure.onOpen(),\n            } },\n            React.createElement(c.Button, { ref: ref, variant: isActive ? 'active' : undefined, justifyContent: 'center', position: 'relative', onClick: () => go.do('exec') },\n                React.createElement(c.Box, { position: 'absolute', right: 1, top: 1 }, true ? '🔓' : '🔒'),\n                React.createElement(c.Text, { pr: 1 }, \"+\"),\n                \" insert\"),\n            React.createElement(go.Component, { path: [dpl, 'LinkInsertModal'], disclosure: disclosure, defaultContainerId: defaultContainerId, defaultTypeId: defaultTypeId, defaultFromId: defaultFromId, defaultToId: defaultToId }));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxDQUFDLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRTtJQUM5QixNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDL0IsTUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLGtCQUFrQixDQUFDLENBQUM7SUFFdEMsTUFBTSxHQUFHLEdBQUcsbUNBQW1DLENBQUM7SUFDaEQsTUFBTSxFQUFFLEdBQUcsdUJBQXVCLENBQUM7SUFFbkMsT0FBTyxDQUFDLEVBQ04sRUFBRSxFQUVGLFVBQVUsRUFBRSxXQUFXLEVBRXZCLGtCQUFrQixFQUNsQixhQUFhLEVBQ2IsYUFBYSxFQUNiLFdBQVcsRUFFWCxRQUFRLEdBQ1QsRUFBRSxHQUFHLEVBQUUsRUFBRTtRQUNSLE1BQU0sWUFBWSxHQUFHLENBQUMsQ0FBQyxhQUFhLEVBQUUsQ0FBQztRQUN2QyxNQUFNLFVBQVUsR0FBRyxXQUFXLElBQUksWUFBWSxDQUFDO1FBRS9DLE9BQU8sb0JBQUMsRUFBRSxDQUFDLEVBQUUsSUFBQyxFQUFFLEVBQUU7Z0JBQ2hCLE1BQU0sRUFBRSxHQUFHLEVBQUUsQ0FBQyxVQUFVLENBQUMsTUFBTSxFQUFFO2FBQ2xDO1lBQ0Msb0JBQUMsQ0FBQyxDQUFDLE1BQU0sSUFDUCxHQUFHLEVBQUUsR0FBRyxFQUNSLE9BQU8sRUFBRSxRQUFRLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUFFLGNBQWMsRUFBQyxRQUFRLEVBQUMsUUFBUSxFQUFDLFVBQVUsRUFDckYsT0FBTyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDO2dCQUU1QixvQkFBQyxDQUFDLENBQUMsR0FBRyxJQUFDLFFBQVEsRUFBQyxVQUFVLEVBQUMsS0FBSyxFQUFFLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxJQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQVM7Z0JBQ3pFLG9CQUFDLENBQUMsQ0FBQyxJQUFJLElBQUMsRUFBRSxFQUFFLENBQUMsUUFBWTswQkFDaEI7WUFDWCxvQkFBQyxFQUFFLENBQUMsU0FBUyxJQUFDLElBQUksRUFBRSxDQUFDLEdBQUcsRUFBRSxpQkFBaUIsQ0FBQyxFQUFFLFVBQVUsRUFBRSxVQUFVLEVBQ2xFLGtCQUFrQixFQUFFLGtCQUFrQixFQUN0QyxhQUFhLEVBQUUsYUFBYSxFQUM1QixhQUFhLEVBQUUsYUFBYSxFQUM1QixXQUFXLEVBQUUsV0FBVyxHQUN4QixDQUNJLENBQUM7SUFDWCxDQUFDLENBQUM7QUFDSixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIoeyBkZWVwLCBkYXRhLCByZXF1aXJlLCBnbyB9KSA9PiB7XG4gIGNvbnN0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbiAgY29uc3QgYyA9IHJlcXVpcmUoJ0BjaGFrcmEtdWkvcmVhY3QnKTtcblxuICBjb25zdCBkcGwgPSAnQGRlZXAtZm91bmRhdGlvbi9wZXJjZXB0aW9uLWxpbmtzJztcbiAgY29uc3QgZGMgPSAnQGRlZXAtZm91bmRhdGlvbi9jb3JlJztcblxuICByZXR1cm4gKHtcbiAgICBnbyxcblxuICAgIGRpc2Nsb3N1cmU6IF9kaXNjbG9zdXJlLFxuXG4gICAgZGVmYXVsdENvbnRhaW5lcklkLFxuICAgIGRlZmF1bHRUeXBlSWQsXG4gICAgZGVmYXVsdEZyb21JZCxcbiAgICBkZWZhdWx0VG9JZCxcblxuICAgIGlzQWN0aXZlLFxuICB9LCByZWYpID0+IHtcbiAgICBjb25zdCBfX2Rpc2Nsb3N1cmUgPSBjLnVzZURpc2Nsb3N1cmUoKTtcbiAgICBjb25zdCBkaXNjbG9zdXJlID0gX2Rpc2Nsb3N1cmUgfHwgX19kaXNjbG9zdXJlO1xuXG4gICAgcmV0dXJuIDxnby5PbiBkbz17e1xuICAgICAgJ2V4ZWMnOiAoKSA9PiBkaXNjbG9zdXJlLm9uT3BlbigpLFxuICAgIH19PlxuICAgICAgPGMuQnV0dG9uXG4gICAgICAgIHJlZj17cmVmfVxuICAgICAgICB2YXJpYW50PXtpc0FjdGl2ZSA/ICdhY3RpdmUnIDogdW5kZWZpbmVkfSBqdXN0aWZ5Q29udGVudD0nY2VudGVyJyBwb3NpdGlvbj0ncmVsYXRpdmUnXG4gICAgICAgIG9uQ2xpY2s9eygpID0+IGdvLmRvKCdleGVjJyl9XG4gICAgICA+XG4gICAgICAgIDxjLkJveCBwb3NpdGlvbj0nYWJzb2x1dGUnIHJpZ2h0PXsxfSB0b3A9ezF9Pnt0cnVlID8gJ/CflJMnIDogJ/CflJInfTwvYy5Cb3g+XG4gICAgICAgIDxjLlRleHQgcHI9ezF9Pis8L2MuVGV4dD4gaW5zZXJ0XG4gICAgICA8L2MuQnV0dG9uPlxuICAgICAgPGdvLkNvbXBvbmVudCBwYXRoPXtbZHBsLCAnTGlua0luc2VydE1vZGFsJ119IGRpc2Nsb3N1cmU9e2Rpc2Nsb3N1cmV9XG4gICAgICAgIGRlZmF1bHRDb250YWluZXJJZD17ZGVmYXVsdENvbnRhaW5lcklkfVxuICAgICAgICBkZWZhdWx0VHlwZUlkPXtkZWZhdWx0VHlwZUlkfVxuICAgICAgICBkZWZhdWx0RnJvbUlkPXtkZWZhdWx0RnJvbUlkfVxuICAgICAgICBkZWZhdWx0VG9JZD17ZGVmYXVsdFRvSWR9XG4gICAgICAvPlxuICAgIDwvZ28uT24+O1xuICB9O1xufSJdfQ==",
        "link_id": 4586
      }
    },
    {
      "id": 4587,
      "type_id": 3,
      "from_id": 4001,
      "to_id": 4586,
      "value": {
        "id": 1025,
        "value": "generated",
        "link_id": 4587
      }
    },
    {
      "id": 4588,
      "type_id": 143,
      "from_id": 4586,
      "to_id": 4001
    },
    {
      "id": 4589,
      "type_id": 3,
      "from_id": 4001,
      "to_id": 4588
    },
    {
      "id": 5513,
      "type_id": 3,
      "from_id": 5298,
      "to_id": 5512
    },
    {
      "id": 5865,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0
    },
    {
      "id": 5868,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 5865,
      "value": {
        "id": 1262,
        "value": "TreeLinkActionsComponent",
        "link_id": 5868
      }
    },
    {
      "id": 5869,
      "type_id": 35,
      "from_id": 145,
      "to_id": 5865
    },
    {
      "id": 5870,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 5869,
      "value": {
        "id": 1264,
        "value": "TreeLinkActions",
        "link_id": 5870
      }
    },
    {
      "id": 6289,
      "type_id": 5258,
      "from_id": 6266,
      "to_id": 5240
    },
    {
      "id": 6290,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 6289,
      "value": {
        "id": 1350,
        "value": "compatableMenuGraph",
        "link_id": 6290
      }
    },
    {
      "id": 5320,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1182,
        "value": "async ({ deep, data, Go, require }) => {\n    const React = require('react');\n    const c = require('@chakra-ui/react');\n    const dpl = '@deep-foundation/perception-links';\n    const dc = '@deep-foundation/core';\n    const dml = '@deep-foundation/deepmemo-links';\n    const Handler = deep.idLocal(dc, 'Handler');\n    const Compatable = deep.idLocal(dpl, 'Compatable');\n    const Header = deep.idLocal(dpl, 'Header');\n    const Menu = deep.idLocal(dpl, 'Menu');\n    const Stack = deep.idLocal(dpl, 'Stack');\n    const Item = ({ link, isActive }) => (React.createElement(Go.Handler, { handlerId: link.id, linkId: link.id, isActive: isActive }));\n    return ({ go, }, ref) => {\n        const { data: menu } = deep.useSubscription({\n            type_id: Handler,\n            out: {\n                type_id: Compatable,\n                to_id: Menu,\n            },\n            order_by: { id: 'desc' }\n        });\n        return React.createElement(go.On, { do: {\n                focus: (g, v, linkId, o) => {\n                    !go.value && go.focus(Stack);\n                    o?.id && go(Stack).focus(o?.id);\n                },\n            } },\n            React.createElement(go.Provider, { linkId: Stack },\n                React.createElement(go.Component, { path: [dpl, 'Stack'], links: menu, direction: 'vertical', Item: Item })));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFO0lBQ3BDLE1BQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUMvQixNQUFNLENBQUMsR0FBRyxPQUFPLENBQUMsa0JBQWtCLENBQUMsQ0FBQztJQUV0QyxNQUFNLEdBQUcsR0FBRyxtQ0FBbUMsQ0FBQztJQUNoRCxNQUFNLEVBQUUsR0FBRyx1QkFBdUIsQ0FBQztJQUNuQyxNQUFNLEdBQUcsR0FBRyxpQ0FBaUMsQ0FBQztJQUU5QyxNQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUUsRUFBRSxTQUFTLENBQUMsQ0FBQztJQUM1QyxNQUFNLFVBQVUsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxZQUFZLENBQUMsQ0FBQztJQUNuRCxNQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxRQUFRLENBQUMsQ0FBQztJQUMzQyxNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxNQUFNLENBQUMsQ0FBQztJQUN2QyxNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxPQUFPLENBQUMsQ0FBQztJQUV6QyxNQUFNLElBQUksR0FBRyxDQUFDLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLG9CQUFDLEVBQUUsQ0FBQyxPQUFPLElBQy9DLFNBQVMsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUNsQixNQUFNLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFDZixRQUFRLEVBQUUsUUFBUSxHQUNsQixDQUFDLENBQUM7SUFFSixPQUFPLENBQUMsRUFDTixFQUFFLEdBQ0gsRUFBRSxHQUFHLEVBQUUsRUFBRTtRQUNSLE1BQU0sRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQztZQUMxQyxPQUFPLEVBQUUsT0FBTztZQUNoQixHQUFHLEVBQUU7Z0JBQ0gsT0FBTyxFQUFFLFVBQVU7Z0JBQ25CLEtBQUssRUFBRSxJQUFJO2FBQ1o7WUFDRCxRQUFRLEVBQUUsRUFBRSxFQUFFLEVBQUUsTUFBTSxFQUFFO1NBQ3pCLENBQUMsQ0FBQztRQUVILE9BQU8sb0JBQUMsRUFBRSxDQUFDLEVBQUUsSUFBQyxFQUFFLEVBQUU7Z0JBQ2hCLEtBQUssRUFBRSxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsTUFBTSxFQUFDLENBQUMsRUFBRSxFQUFFO29CQUN0QixDQUFDLEVBQUUsQ0FBQyxLQUFLLElBQUksRUFBRSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQztvQkFDN0IsQ0FBQyxFQUFFLEVBQUUsSUFBSSxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztnQkFDbEMsQ0FBQzthQUNGO1lBQ0Msb0JBQUMsRUFBRSxDQUFDLFFBQVEsSUFBQyxNQUFNLEVBQUUsS0FBSztnQkFDeEIsb0JBQUMsRUFBRSxDQUFDLFNBQVMsSUFBQyxJQUFJLEVBQUUsQ0FBQyxHQUFHLEVBQUUsT0FBTyxDQUFDLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUMsVUFBVSxFQUFDLElBQUksRUFBRSxJQUFJLEdBQUcsQ0FDdkUsQ0FDUixDQUFDO0lBQ1gsQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiYXN5bmMgKHsgZGVlcCwgZGF0YSwgR28sIHJlcXVpcmUgfSkgPT4ge1xuICBjb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG4gIGNvbnN0IGMgPSByZXF1aXJlKCdAY2hha3JhLXVpL3JlYWN0Jyk7XG5cbiAgY29uc3QgZHBsID0gJ0BkZWVwLWZvdW5kYXRpb24vcGVyY2VwdGlvbi1saW5rcyc7XG4gIGNvbnN0IGRjID0gJ0BkZWVwLWZvdW5kYXRpb24vY29yZSc7XG4gIGNvbnN0IGRtbCA9ICdAZGVlcC1mb3VuZGF0aW9uL2RlZXBtZW1vLWxpbmtzJztcblxuICBjb25zdCBIYW5kbGVyID0gZGVlcC5pZExvY2FsKGRjLCAnSGFuZGxlcicpO1xuICBjb25zdCBDb21wYXRhYmxlID0gZGVlcC5pZExvY2FsKGRwbCwgJ0NvbXBhdGFibGUnKTtcbiAgY29uc3QgSGVhZGVyID0gZGVlcC5pZExvY2FsKGRwbCwgJ0hlYWRlcicpO1xuICBjb25zdCBNZW51ID0gZGVlcC5pZExvY2FsKGRwbCwgJ01lbnUnKTtcbiAgY29uc3QgU3RhY2sgPSBkZWVwLmlkTG9jYWwoZHBsLCAnU3RhY2snKTtcblxuICBjb25zdCBJdGVtID0gKHsgbGluaywgaXNBY3RpdmUgfSkgPT4gKDxHby5IYW5kbGVyXG4gICAgaGFuZGxlcklkPXtsaW5rLmlkfVxuICAgIGxpbmtJZD17bGluay5pZH1cbiAgICBpc0FjdGl2ZT17aXNBY3RpdmV9XG4gIC8+KTtcbiAgXG4gIHJldHVybiAoe1xuICAgIGdvLFxuICB9LCByZWYpID0+IHtcbiAgICBjb25zdCB7IGRhdGE6IG1lbnUgfSA9IGRlZXAudXNlU3Vic2NyaXB0aW9uKHtcbiAgICAgIHR5cGVfaWQ6IEhhbmRsZXIsXG4gICAgICBvdXQ6IHtcbiAgICAgICAgdHlwZV9pZDogQ29tcGF0YWJsZSxcbiAgICAgICAgdG9faWQ6IE1lbnUsXG4gICAgICB9LFxuICAgICAgb3JkZXJfYnk6IHsgaWQ6ICdkZXNjJyB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gPGdvLk9uIGRvPXt7XG4gICAgICBmb2N1czogKGcsdixsaW5rSWQsbykgPT4ge1xuICAgICAgICAhZ28udmFsdWUgJiYgZ28uZm9jdXMoU3RhY2spO1xuICAgICAgICBvPy5pZCAmJiBnbyhTdGFjaykuZm9jdXMobz8uaWQpO1xuICAgICAgfSxcbiAgICB9fT5cbiAgICAgIDxnby5Qcm92aWRlciBsaW5rSWQ9e1N0YWNrfT5cbiAgICAgICAgPGdvLkNvbXBvbmVudCBwYXRoPXtbZHBsLCAnU3RhY2snXX0gbGlua3M9e21lbnV9IGRpcmVjdGlvbj0ndmVydGljYWwnIEl0ZW09e0l0ZW19Lz5cbiAgICAgIDwvZ28uUHJvdmlkZXI+XG4gICAgPC9nby5Pbj47XG4gIH07XG59Il19",
        "link_id": 5320
      }
    },
    {
      "id": 5321,
      "type_id": 3,
      "from_id": 5236,
      "to_id": 5320,
      "value": {
        "id": 1181,
        "value": "generated",
        "link_id": 5321
      }
    },
    {
      "id": 5322,
      "type_id": 143,
      "from_id": 5320,
      "to_id": 5236
    },
    {
      "id": 5323,
      "type_id": 3,
      "from_id": 5236,
      "to_id": 5322
    },
    {
      "id": 5628,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1282,
        "value": "async ({ deep, data, Go, require }) => {\n  const React = require('react');\n  const { MoonIcon, SunIcon } = require('@chakra-ui/icons');\n  const { GrGraphQl } = require(\"react-icons/gr\");\n  const { IoReload } = require(\"react-icons/io\");\n  const c = require('@chakra-ui/react');\n\n  const dpl = '@deep-foundation/perception-links';\n  const dc = '@deep-foundation/core';\n\n  const Menu = deep.idLocal(dpl, 'Menu');\n  const Layer = deep.idLocal(dpl, 'Layer');\n  const Header = deep.idLocal(dpl, 'Header');\n  const Queries = deep.idLocal(dpl, 'Queries');\n\n  const Tree = deep.idLocal(dpl, 'Tree');\n\n  return ({\n    go,\n    linkId,\n\n    Status,\n    Auth,\n    ColorMode,\n\n    children,\n\n  }, ref) => {\n    const nav = go.useNav();\n    nav(Menu, Menu, Header, Layer, Queries);\n    nav(Queries, Queries, Menu, Layer, Queries);\n    nav(Layer, Menu, Header, Layer, Layer);\n    nav(Header, Header, Header, Header, Layer);\n\n    // const useTheme = go.useHook({ path: [dpl, 'useTheme'] });\n    // console.log('useTheme', useTheme);\n\n    React.useEffect(() => {\n      go.focus(Menu)\n\n    }, []);\n\n    const isMobile = c.useBreakpointValue(\n      { base: true, md: false },\n      { fallback: 'xs' },\n    );\n\n    return <go.On\n      do={{\n        left: (g, v, o) => go.focus(nav.get(go.value, 'left'), o),\n        up: (g, v, o) => go.focus(nav.get(go.value, 'up'), o),\n        right: (g, v, o) => go.focus(nav.get(go.value, 'right'), o),\n        down: (g, v, o) => go.focus(nav.get(go.value, 'down'), o),\n        use: (g, v, o) => {\n          if (go.data.usedId != o?.id && o?.id) {\n            go.data.usedId = o.id;\n            go(Header).do('use', o);\n            go(Layer).do('use', o);\n          }\n        },\n        open: async (g, v, o) => {\n          if (!go(Layer)) await (go.focus(Layer).go.awaitRef(Layer));\n          go(Layer).do('open', o);\n        },\n        concentrate: (g,v,o) => {\n          go(Layer).do('concentrate', o);\n        },\n      }}\n    >\n      <c.Box ref={go.ref} h='100vh' w=\"100vw\" position=\"fixed\" left=\"0%\" top=\"0%\">\n        <c.Grid\n          templateAreas={`\"tabs tabs\"\n                              \"nav main\"`}\n          gridTemplateRows={'3em 1fr'}\n          gridTemplateColumns={'3em 1fr'}\n          h='100vh' w=\"100vw\" position=\"fixed\" left=\"0%\" top=\"0%\"\n          color='blackAlpha.700'\n          fontWeight='bold'\n          ref={ref}\n        >\n          <c.GridItem area={'tabs'} zIndex={1}>\n            <c.Flex w=\"100%\" h=\"100%\" bg={go.value === Header ? 'deepBgDark' : 'deepBg'}>\n              <go.Provider linkId={Header}>\n                <go.Handler\n                  linkId={deep.linkId}\n                  handlerId={Header}\n                  using\n                />\n              </go.Provider>\n            </c.Flex>\n          </c.GridItem>\n          <c.GridItem area={'nav'} zIndex={1} position=\"relative\" h=\"100%\">\n            <c.Flex direction='column' h='100%' bg={go.value === Menu ? 'deepBgDark' : 'deepBg'}>\n              <go.Provider linkId={Menu}>\n                <go.Handler\n                  linkId={deep.linkId}\n                  handlerId={Menu}\n                />\n                <c.Spacer />\n              </go.Provider>\n              <c.VStack>\n                <c.Button w='3em' h='3em' as='a' href={`http://${deep?.client?.path}`}><GrGraphQl /></c.Button>\n                <ColorMode w='3em' h='3em' dark={{ children: <SunIcon /> }} light={{ children: <MoonIcon /> }} />\n                <go.Provider linkId={Queries}>\n                  <go.Component path={[dpl, 'Queries']} isActive={go.value === Queries}><Status /></go.Component>\n                </go.Provider>\n                <Auth />\n              </c.VStack>\n            </c.Flex>\n          </c.GridItem>\n          <c.GridItem area={'main'} overflow=\"hidden\" position=\"relative\" h='100%' bg={go.value === Layer ? 'deepBgDark' : 'deepBg'}>\n            <go.Provider linkId={Layer} value={Tree}>\n              <go.Handler\n                linkId={deep.linkId}\n                handlerId={Layer}\n                using fullWidth={isMobile ? 'calc(100vw - 3em)' : null}\n              />\n            </go.Provider>\n          </c.GridItem>\n        </c.Grid>\n      </c.Box>\n    </go.On>;\n  };\n}",
        "link_id": 5628
      }
    },
    {
      "id": 5631,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 5628,
      "value": {
        "id": 1222,
        "value": "LayoutComponent",
        "link_id": 5631
      }
    },
    {
      "id": 5632,
      "type_id": 35,
      "from_id": 145,
      "to_id": 5628
    },
    {
      "id": 5633,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 5632,
      "value": {
        "id": 1225,
        "value": "Layout",
        "link_id": 5633
      }
    },
    {
      "id": 3987,
      "type_id": 35,
      "from_id": 145,
      "to_id": 3983
    },
    {
      "id": 3988,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 3987,
      "value": {
        "id": 963,
        "value": "TreeLinkDelete",
        "link_id": 3988
      }
    },
    {
      "id": 7349,
      "type_id": 5258,
      "from_id": 2739,
      "to_id": 5605
    },
    {
      "id": 7350,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 7349,
      "value": {
        "id": 1355,
        "value": "compatableLayerTree",
        "link_id": 7350
      }
    },
    {
      "id": 7353,
      "type_id": 5258,
      "from_id": 5827,
      "to_id": 5605
    },
    {
      "id": 7354,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 7353,
      "value": {
        "id": 1356,
        "value": "compatableLayerGraph",
        "link_id": 7354
      }
    },
    {
      "id": 8341,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1359,
        "value": "async ({ deep, data, Go, require }) => {\n    const { GrClear } = require(\"react-icons/gr\");\n    const React = require('react');\n    const c = require('@chakra-ui/react');\n    const _ = require('lodash');\n    const { useDebounceCallback } = require('@react-hook/debounce');\n    const dpl = '@deep-foundation/perception-links';\n    const dc = '@deep-foundation/core';\n    const Contain = deep.idLocal(dc, 'Contain');\n    const containTree = deep.idLocal(dc, 'containTree');\n    const TreeLinkButton = deep.idLocal(dpl, 'TreeLinkButton');\n    const History = deep.idLocal(dpl, 'History');\n    const HistoryHandler = deep.idLocal(dpl, 'HistoryHandler');\n    const Menu = deep.idLocal(dpl, 'Menu');\n    const Stack = deep.idLocal(dpl, 'Stack');\n    const FinderButton = deep.idLocal(dpl, 'FinderButton');\n    const Item = ({ link, isActive, isConcentrated }) => {\n        const go = Go.useGo();\n        return React.createElement(Go.Handler, { handlerId: TreeLinkButton, linkId: link.id, isActive: isActive, minW: isConcentrated === false ? '3em' : '8em', h: '100%', maxH: '100%', variant: 'short', isConcentrated: isConcentrated });\n    };\n    return ({ go, using = false, }, ref) => {\n        const { data: history } = deep.useSubscription({\n            type_id: History,\n            from_id: deep.linkId,\n            order_by: { id: 'desc' },\n            limit: 30,\n            return: {\n                item: { relation: 'to' },\n            },\n        });\n        const [concentrate, setConcentrate] = React.useState('');\n        const concetrateDebounce = useDebounceCallback((concentrate) => {\n            go.root().do('concentrate', { value: concentrate });\n        }, 500);\n        React.useEffect(() => {\n            concetrateDebounce(concentrate);\n        }, [concentrate]);\n        const { data: items, ids } = React.useMemo(() => {\n            const _ids = [];\n            const filtered = _.uniqBy(history.map(h => h?.to), (l) => l?.id).filter(l => {\n                if (!!l?.id)\n                    _ids.push(l?.id);\n                return !!l?.id;\n            });\n            return { data: filtered, ids: _ids };\n        }, [history]);\n        const nav = go.useNav();\n        nav(FinderButton, FinderButton, FinderButton, Stack, 'down');\n        nav(Stack, FinderButton, Stack, 'clear', 'down');\n        nav('clear', Stack, 'clear', 'clear', 'down');\n        const { ids: concentrated } = deep.useSearch(concentrate, {\n            db: false, sort: false,\n            query: { id: { _in: ids } },\n            skip: !!concentrate,\n        });\n        console.log({ concentrated });\n        return React.createElement(go.On, { do: {\n                exec: (g, v, o) => o?.id || go.value == Stack || !go.value ? go.root().do('open', { id: o?.id || go(Stack).value, focus: true }) : go.do(go.value),\n                use: (g, v, o) => go(Stack) && go(Stack).do('use', o),\n                focus: (g, v, linkId, o) => {\n                    !go.value && go.focus(Stack);\n                    o?.id && go(Stack).focus(o?.id);\n                },\n                right: (g, v, o) => go.focus(nav.get(go.value || Stack, 'right')),\n                left: (g, v, o) => go.focus(nav.get(go.value || Stack, 'left')),\n                finder: (g, v, o) => go(FinderButton).do('exec'),\n                clear: (g, v, o) => deep.delete({\n                    up: {\n                        tree_id: containTree,\n                        parent: {\n                            type_id: Contain,\n                            to: { type_id: { _in: [History, HistoryHandler] } },\n                        },\n                    },\n                }),\n            } },\n            React.createElement(c.Flex, { ref: ref, w: '100%' },\n                React.createElement(go.Provider, { linkId: FinderButton },\n                    React.createElement(go.Handler, { handlerId: FinderButton, isActive: go.value === FinderButton })),\n                React.createElement(c.Box, { w: '12em', h: '100%', position: 'relative' },\n                    React.createElement(go.Editor, { value: concentrate, onChange: setConcentrate, fillSize: true, lineNumbers: false })),\n                React.createElement(go.Provider, { linkId: Stack },\n                    React.createElement(go.Component, { path: [dpl, 'Stack'], links: items, direction: 'horizontal', Item: Item, flex: '1', using: using, concentrated: !!concentrate && concentrated })),\n                React.createElement(c.Button, { h: '3em', w: '3em', variant: go.value === 'clear' ? 'active' : undefined, onClick: () => go.focus('clear').go.do('clear') },\n                    React.createElement(GrClear, null))));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFO0lBQ3BDLE1BQU0sRUFBRSxPQUFPLEVBQUUsR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztJQUM5QyxNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDL0IsTUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLGtCQUFrQixDQUFDLENBQUM7SUFDdEMsTUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQzVCLE1BQU0sRUFBRSxtQkFBbUIsRUFBRSxHQUFHLE9BQU8sQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO0lBRWhFLE1BQU0sR0FBRyxHQUFHLG1DQUFtQyxDQUFDO0lBQ2hELE1BQU0sRUFBRSxHQUFHLHVCQUF1QixDQUFDO0lBRW5DLE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsRUFBRSxFQUFFLFNBQVMsQ0FBQyxDQUFDO0lBQzVDLE1BQU0sV0FBVyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsRUFBRSxFQUFFLGFBQWEsQ0FBQyxDQUFDO0lBQ3BELE1BQU0sY0FBYyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLGdCQUFnQixDQUFDLENBQUM7SUFDM0QsTUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsU0FBUyxDQUFDLENBQUM7SUFDN0MsTUFBTSxjQUFjLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQztJQUMzRCxNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxNQUFNLENBQUMsQ0FBQztJQUN2QyxNQUFN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QUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQ3BFLE9BQU8sRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDO29CQUNoRCxvQkFBQyxPQUFPLE9BQUUsQ0FBVyxDQUNmLENBQ0gsQ0FBQztJQUNYLENBQUMsQ0FBQztBQUNKLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImFzeW5jICh7IGRlZXAsIGRhdGEsIEdvLCByZXF1aXJlIH0pID0+IHtcbiAgY29uc3QgeyBHckNsZWFyIH0gPSByZXF1aXJlKFwicmVhY3QtaWNvbnMvZ3JcIik7XG4gIGNvbnN0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbiAgY29uc3QgYyA9IHJlcXVpcmUoJ0BjaGFrcmEtdWkvcmVhY3QnKTtcbiAgY29uc3QgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xuICBjb25zdCB7IHVzZURlYm91bmNlQ2FsbGJhY2sgfSA9IHJlcXVpcmUoJ0ByZWFjdC1ob29rL2RlYm91bmNlJyk7XG5cbiAgY29uc3QgZHBsID0gJ0BkZWVwLWZvdW5kYXRpb24vcGVyY2VwdGlvbi1saW5rcyc7XG4gIGNvbnN0IGRjID0gJ0BkZWVwLWZvdW5kYXRpb24vY29yZSc7XG5cbiAgY29uc3QgQ29udGFpbiA9IGRlZXAuaWRMb2NhbChkYywgJ0NvbnRhaW4nKTtcbiAgY29uc3QgY29udGFpblRyZWUgPSBkZWVwLmlkTG9jYWwoZGMsICdjb250YWluVHJlZScpO1xuICBjb25zdCBUcmVlTGlua0J1dHRvbiA9IGRlZXAuaWRMb2NhbChkcGwsICdUcmVlTGlua0J1dHRvbicpO1xuICBjb25zdCBIaXN0b3J5ID0gZGVlcC5pZExvY2FsKGRwbCwgJ0hpc3RvcnknKTtcbiAgY29uc3QgSGlzdG9yeUhhbmRsZXIgPSBkZWVwLmlkTG9jYWwoZHBsLCAnSGlzdG9yeUhhbmRsZXInKTtcbiAgY29uc3QgTWVudSA9IGRlZXAuaWRMb2NhbChkcGwsICdNZW51Jyk7XG4gIGNvbnN0IFN0YWNrID0gZGVlcC5pZExvY2FsKGRwbCwgJ1N0YWNrJyk7XG4gIGNvbnN0IEZpbmRlckJ1dHRvbiA9IGRlZXAuaWRMb2NhbChkcGwsICdGaW5kZXJCdXR0b24nKTtcbiAgXG4gIGNvbnN0IEl0ZW0gPSAoeyBsaW5rLCBpc0FjdGl2ZSwgaXNDb25jZW50cmF0ZWQgfSkgPT4ge1xuICAgIGNvbnN0IGdvID0gR28udXNlR28oKTtcbiAgICByZXR1cm4gPEdvLkhhbmRsZXJcbiAgICAgIGhhbmRsZXJJZD17VHJlZUxpbmtCdXR0b259XG4gICAgICBsaW5rSWQ9e2xpbmsuaWR9XG4gICAgICBpc0FjdGl2ZT17aXNBY3RpdmV9XG4gICAgICBtaW5XPXtpc0NvbmNlbnRyYXRlZCA9PT0gZmFsc2UgPyAnM2VtJyA6ICc4ZW0nfSBoPScxMDAlJyBtYXhIPScxMDAlJyB2YXJpYW50PSdzaG9ydCdcbiAgICAgIGlzQ29uY2VudHJhdGVkPXtpc0NvbmNlbnRyYXRlZH1cbiAgICAvPjtcbiAgfTtcbiAgXG4gIHJldHVybiAoe1xuICAgIGdvLFxuXG4gICAgdXNpbmcgPSBmYWxzZSxcbiAgfSwgcmVmKSA9PiB7XG4gICAgY29uc3QgeyBkYXRhOiBoaXN0b3J5IH0gPSBkZWVwLnVzZVN1YnNjcmlwdGlvbih7XG4gICAgICB0eXBlX2lkOiBIaXN0b3J5LFxuICAgICAgZnJvbV9pZDogZGVlcC5saW5rSWQsXG4gICAgICBvcmRlcl9ieTogeyBpZDogJ2Rlc2MnIH0sXG4gICAgICBsaW1pdDogMzAsXG4gICAgICByZXR1cm46IHtcbiAgICAgICAgaXRlbTogeyByZWxhdGlvbjogJ3RvJyB9LFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIGNvbnN0IFtjb25jZW50cmF0ZSwgc2V0Q29uY2VudHJhdGVdID0gUmVhY3QudXNlU3RhdGUoJycpO1xuICAgIGNvbnN0IGNvbmNldHJhdGVEZWJvdW5jZSA9IHVzZURlYm91bmNlQ2FsbGJhY2soKGNvbmNlbnRyYXRlKSA9PiB7XG4gICAgICBnby5yb290KCkuZG8oJ2NvbmNlbnRyYXRlJywgeyB2YWx1ZTogY29uY2VudHJhdGUgfSk7XG4gICAgfSwgNTAwKTtcbiAgICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgY29uY2V0cmF0ZURlYm91bmNlKGNvbmNlbnRyYXRlKTtcbiAgICB9LCBbY29uY2VudHJhdGVdKTtcblxuICAgIGNvbnN0IHsgZGF0YTogaXRlbXMsIGlkcyB9ID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgICBjb25zdCBfaWRzID0gW107XG4gICAgICBjb25zdCBmaWx0ZXJlZCA9IF8udW5pcUJ5KGhpc3RvcnkubWFwKGggPT4gaD8udG8pLCAobCkgPT4gbD8uaWQpLmZpbHRlcihsID0+IHtcbiAgICAgICAgaWYgKCEhbD8uaWQpIF9pZHMucHVzaChsPy5pZCk7XG4gICAgICAgIHJldHVybiAhIWw/LmlkO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4geyBkYXRhOiBmaWx0ZXJlZCwgaWRzOiBfaWRzIH07XG4gICAgfSwgW2hpc3RvcnldO1xuXG4gICAgY29uc3QgbmF2ID0gZ28udXNlTmF2KCk7XG4gICAgbmF2KEZpbmRlckJ1dHRvbiwgRmluZGVyQnV0dG9uLCBGaW5kZXJCdXR0b24sIFN0YWNrLCAnZG93bicpO1xuICAgIG5hdihTdGFjaywgRmluZGVyQnV0dG9uLCBTdGFjaywgJ2NsZWFyJywgJ2Rvd24nKTtcbiAgICBuYXYoJ2NsZWFyJywgU3RhY2ssICdjbGVhcicsICdjbGVhcicsICdkb3duJyk7XG5cbiAgICBjb25zdCB7IGlkczogY29uY2VudHJhdGVkIH0gPSBkZWVwLnVzZVNlYXJjaChjb25jZW50cmF0ZSwge1xuICAgICAgZGI6IGZhbHNlLCBzb3J0OiBmYWxzZSxcbiAgICAgIHF1ZXJ5OiB7IGlkOiB7IF9pbjogaWRzIH0gfSxcbiAgICAgIHNraXA6ICEhY29uY2VudHJhdGUsXG4gICAgfSk7XG5cbiAgICBjb25zb2xlLmxvZyh7Y29uY2VudHJhdGVkfSk7XG5cbiAgICByZXR1cm4gPGdvLk9uIGRvPXt7XG4gICAgICBleGVjOiAoZyx2LG8pID0+IG8/LmlkIHx8IGdvLnZhbHVlID09IFN0YWNrIHx8ICFnby52YWx1ZSA/IGdvLnJvb3QoKS5kbygnb3BlbicsIHsgaWQ6IG8/LmlkIHx8IGdvKFN0YWNrKS52YWx1ZSwgZm9jdXM6IHRydWUgfSkgOiBnby5kbyhnby52YWx1ZSksXG4gICAgICB1c2U6IChnLHYsbykgPT4gZ28oU3RhY2spICYmIGdvKFN0YWNrKS5kbygndXNlJyxvKSxcbiAgICAgIGZvY3VzOiAoZyx2LGxpbmtJZCxvKSA9PiB7XG4gICAgICAgICFnby52YWx1ZSAmJiBnby5mb2N1cyhTdGFjayk7XG4gICAgICAgIG8/LmlkICYmIGdvKFN0YWNrKS5mb2N1cyhvPy5pZCk7XG4gICAgICB9LFxuICAgICAgcmlnaHQ6IChnLHYsbykgPT4gZ28uZm9jdXMobmF2LmdldChnby52YWx1ZSB8fCBTdGFjaywgJ3JpZ2h0JykpLFxuICAgICAgbGVmdDogKGcsdixvKSA9PiBnby5mb2N1cyhuYXYuZ2V0KGdvLnZhbHVlIHx8IFN0YWNrLCAnbGVmdCcpKSxcblxuICAgICAgZmluZGVyOiAoZyx2LG8pID0+IGdvKEZpbmRlckJ1dHRvbikuZG8oJ2V4ZWMnKSxcbiAgICAgIGNsZWFyOiAoZyx2LG8pID0+IGRlZXAuZGVsZXRlKHtcbiAgICAgICAgdXA6IHtcbiAgICAgICAgICB0cmVlX2lkOiBjb250YWluVHJlZSxcbiAgICAgICAgICBwYXJlbnQ6IHtcbiAgICAgICAgICAgIHR5cGVfaWQ6IENvbnRhaW4sXG4gICAgICAgICAgICB0bzogeyB0eXBlX2lkOiB7IF9pbjogW0hpc3RvcnksIEhpc3RvcnlIYW5kbGVyXSB9IH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0pLFxuICAgIH19PlxuICAgICAgPGMuRmxleCByZWY9e3JlZn0gdz0nMTAwJSc+XG4gICAgICAgIDxnby5Qcm92aWRlciBsaW5rSWQ9e0ZpbmRlckJ1dHRvbn0+XG4gICAgICAgICAgPGdvLkhhbmRsZXIgaGFuZGxlcklkPXtGaW5kZXJCdXR0b259IGlzQWN0aXZlPXtnby52YWx1ZSA9PT0gRmluZGVyQnV0dG9ufS8+XG4gICAgICAgIDwvZ28uUHJvdmlkZXI+XG4gICAgICAgIDxjLkJveCB3PScxMmVtJyBoPScxMDAlJyBwb3NpdGlvbj0ncmVsYXRpdmUnPlxuICAgICAgICAgIDxnby5FZGl0b3IgdmFsdWU9e2NvbmNlbnRyYXRlfSBvbkNoYW5nZT17c2V0Q29uY2VudHJhdGV9IGZpbGxTaXplIGxpbmVOdW1iZXJzPXtmYWxzZX0vPlxuICAgICAgICA8L2MuQm94PlxuICAgICAgICA8Z28uUHJvdmlkZXIgbGlua0lkPXtTdGFja30+XG4gICAgICAgICAgPGdvLkNvbXBvbmVudCBwYXRoPXtbZHBsLCAnU3RhY2snXX1cbiAgICAgICAgICAgIGxpbmtzPXtpdGVtc30gZGlyZWN0aW9uPSdob3Jpem9udGFsJyBJdGVtPXtJdGVtfSBmbGV4PScxJyB1c2luZz17dXNpbmd9XG4gICAgICAgICAgICBjb25jZW50cmF0ZWQ9eyEhY29uY2VudHJhdGUgJiYgY29uY2VudHJhdGVkfVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvZ28uUHJvdmlkZXI+XG4gICAgICAgIDxjLkJ1dHRvblxuICAgICAgICAgIGg9JzNlbScgdz0nM2VtJyB2YXJpYW50PXtnby52YWx1ZSA9PT0gJ2NsZWFyJyA/ICdhY3RpdmUnIDogdW5kZWZpbmVkfVxuICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGdvLmZvY3VzKCdjbGVhcicpLmdvLmRvKCdjbGVhcicpfVxuICAgICAgICA+PEdyQ2xlYXIvPjwvYy5CdXR0b24+XG4gICAgICA8L2MuRmxleD5cbiAgICA8L2dvLk9uPjtcbiAgfTtcbn0iXX0=",
        "link_id": 8341
      }
    },
    {
      "id": 8342,
      "type_id": 3,
      "from_id": 5646,
      "to_id": 8341,
      "value": {
        "id": 1358,
        "value": "generated",
        "link_id": 8342
      }
    },
    {
      "id": 8343,
      "type_id": 143,
      "from_id": 8341,
      "to_id": 5646
    },
    {
      "id": 8344,
      "type_id": 3,
      "from_id": 5646,
      "to_id": 8343
    },
    {
      "id": 19495,
      "type_id": 55,
      "from_id": 2586,
      "to_id": 2586,
      "value": {
        "id": 2930,
        "value": {
          "x": 133.62678649644747,
          "y": 98.88448773374024
        },
        "link_id": 19495
      }
    },
    {
      "id": 19496,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 19495
    },
    {
      "id": 10114,
      "type_id": 35,
      "from_id": 145,
      "to_id": 2650
    },
    {
      "id": 10115,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 10114,
      "value": {
        "id": 1424,
        "value": "TreeQuery",
        "link_id": 10115
      }
    },
    {
      "id": 10426,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1433,
        "value": "({ deep, data, require, Go }) => {\n  const { MdEdit, MdPreview, MdSaveAlt } = require(\"react-icons/md\");\n  const { AiOutlineStop } = require(\"react-icons/ai\");\n  const { BsX, BsCheck2, BsXLg, BsDatabase, BsRegex } = require('react-icons/bs');\n  const { useResizeDetector } = require('react-resize-detector');\n  const { useDebounceCallback } = require('@react-hook/debounce');\n\n  const React = require('react');\n  \n  const c = require('@chakra-ui/react');\n\n  const dpl = '@deep-foundation/perception-links';\n  const dc = '@deep-foundation/core';\n\n  const Contain = deep.idLocal('@deep-foundation/core', 'Contain');\n  const History = deep.idLocal(dpl, 'History');\n  const Header = deep.idLocal(dpl, 'Header');\n  const Search = deep.idLocal(dpl, 'Search');\n  const TreeQuery = deep.idLocal(dpl, 'TreeQuery');\n  const TreeLink = deep.idLocal(dpl, 'TreeLink');\n  const TreeLinkInsert = deep.idLocal(dpl, 'TreeLinkInsert');\n  const TreeLinkDelete = deep.idLocal(dpl, 'TreeLinkDelete');\n  const TreeLinkButton = deep.idLocal(dpl, 'TreeLinkButton');\n\n  const identifiy = (q) => {\n    let value;\n    const o = {};\n    if (q?._or) {\n      for (let i in q?._or) {\n        if (q?._or[i]?.string?.value?._ilike) {\n          o.values = true;\n          o.query = false;\n          if (!value) value = q?._or[i]?.string?.value?._ilike.slice(1, -1);\n        }\n        if (q?._or[i]?.string?.value?._iregex) {\n          o.values = true;\n          o.query = false;\n          o.regexp = true;\n          if (!value) value = q?._or[i]?.string?.value?._iregex;\n        }\n        if (typeof(q?._or[i]?.number?.value) === 'number') {\n          o.values = true;\n          o.query = false;\n          if (!value) value = q?._or[i]?.number?.value;\n        }\n        if (q?._or[i]?.in?.type_id === Contain) {\n          if (q?._or[i]?.in?.string?.value?._iregex) {\n            o.query = false;\n            o.regexp = true;\n            if (!value) value = q?._or[i]?.in?.string?.value?._iregex;\n          }\n          if (q?._or[i]?.in?.string?.value?._ilike) {\n            o.query = false;\n            if (!value) value = q?._or[i]?.in?.string?.value?._ilike.slice(1,-1);\n          }\n        }\n        if (q?._not?.type_id === Contain) o.contains = false;\n        else if (q?.type_id === Contain) o.contains = true;\n      }\n    }\n    console.log('identified', q, o, value);\n    return { options: o, value };\n  };\n\n  return ({\n    go,\n    linkId,\n\n    isActive,\n    oneline = false,\n    saveHistory = false,\n    finder = false,\n\n    query: _query,\n    search: _search,\n\n    options: _options = {\n      db: false,\n      regexp: false,\n      query: false,\n      values: false,\n      contains: false,\n    },\n\n    onChange,\n    onSearch,\n\n    childrenSearchRight = null,\n\n    children,\n  }, ref) => {\n    if (!linkId) throw new Error(`linkId must be Query instance id but ${linkId}`);\n\n    const nav = go.useNav();\n    if (finder) nav('finder', 'left', 'up', 'current', 'db');\n    nav('current', finder ? 'finder' : 'db', 'up', 'search', 'db');\n    nav('search', 'current', 'up', 'contains', 'contains');\n    nav('db', 'current', 'current', 'regexp', 'down');\n    nav('regexp', 'db', 'current', 'query', 'down');\n    nav('query', 'regexp', 'current', 'values', 'down');\n    nav('values', 'query', 'current', 'contains', 'down');\n    nav('contains', 'values', 'search', 'right', 'down');\n\n    const options = { ...({ db: false, regexp: false, query: false, values: false, contains: false, }), ..._options };\n    const _q = React.useMemo(() => deep.get(linkId)?.value?.value || _query, []);\n    if (_q) options.query = true;\n\n    const [toRequest, setToRequest] = React.useState();\n\n    const identified = React.useMemo(() => {\n      return identifiy(deep.get(linkId)?.value?.value || {});\n    }, []);\n\n    const [value, setValue] = React.useState(typeof(identified?.value) === 'string' ? identified?.value : (_q ? JSON.stringify(_q) : _search));\n\n    const [o, setOptions] = React.useState({ ...options, ...identified.options });\n\n    const optionsRef = React.useRef(o);\n    React.useMemo(() => {\n      if (!optionsRef.current.query && !!o.query) {\n        setValue(JSON.stringify(deep.searchQuery(value, { ...o, query: undefined }), null, 2));\n      } else if (!!optionsRef.current.query && !o.query) {\n        const identified = identifiy(toRequest);\n        setOptions(identified?.options);\n        setValue(identified?.value);\n      }\n    }, [o.query]);\n    optionsRef.current = o;\n    const [results, setResults] = React.useState([]);\n\n\n    const request = React.useCallback(async (value) => {\n      const o = optionsRef.current;\n      let cq;\n      console.log('onRequest', { _q, o, identified });\n      if (!o.query) {\n        cq = deep.searchQuery(value, { ...o, query: undefined });\n      } else try { cq = JSON.parse(value); } catch(error) {\n        return console.error(error);\n      }\n      console.log('onRequest', cq);\n      if (saveHistory && typeof(linkId) === 'number') deep.value(linkId, cq);\n      setToRequest(cq);\n    }, []);\n\n    React.useEffect(() => {\n      if (!!value) request(value);\n    }, []);\n\n    React.useMemo(() => { (async () => {\n      const o = optionsRef.current;\n      if (!toRequest) return;\n      if (onSearch && value) {\n        let results;\n        try {\n          results = await deep.search(value, { ...o, remote: o.db, query: undefined, apply: `deep-perception-search-${go.__p}` });\n        } catch(error) {\n          results = { error };\n        }\n        console.log('onSearch', toRequest, results, o);\n        onSearch({ ...results, query: toRequest, search: !o.query ? value : null, options: o });\n      }\n    })(); }, [toRequest]);\n\n    return <go.On\n      do={{\n        focus: () => go.set('current'),\n        left: () => go.focus(nav.get(go.value, 'left')),\n        right: () => go.focus(nav.get(go.value, 'right')),\n        up: () => go.focus(nav.get(go.value, 'up')),\n        down: () => go.focus(nav.get(go.value, 'down')),\n        finder: () => setOptions({ ...o, finder: !o.finder}),\n        search: () => request(value),\n        current: () => setOptions({ ...o, current: !o.current}),\n        db: () => setOptions({ ...o, db: !o.db}),\n        regexp: () => setOptions({ ...o, regexp: !o.regexp}),\n        query: () => setOptions({ ...o, query: !o.query}),\n        values: () => setOptions({ ...o, values: !o.values}),\n        contains: () => setOptions({ ...o, contains: !o.contains}),\n      }}\n      focus={{\n        up: (q,v,o) => go.set().go?.go?.do('up'),\n        down: (q,v,o) => go.set().go?.go?.do('down'),\n        left: (q,v,o) => go.set(o?.left).go?.go?.do('left'),\n        right: (q,v,o) => go.set(o?.right).go?.go?.do('right'),\n      }}\n    >\n      <c.Box ref={ref} position='relative' w='100%' bg={isActive ? 'deepBgDark' : undefined}>\n        <c.SimpleGrid columns={oneline ? 2 : 1} w={oneline ? finder ? '28em' : '25em' : undefined}>\n          <c.Flex>\n            {!!finder && <c.Button\n              h='3em' maxW='3em' w='3em' variant={go.value === 'finder' ? 'active' : undefined}\n              onClick={() => go.do('finder')}\n            >\n              🪬\n            </c.Button>}\n            <c.Box flex={1} h='3em'>\n              {[<go.Editor\n                key={o.query}\n                fillSize\n                value={value}\n                onChange={value => {\n                  setValue(value);\n                  onChange && onChange(value);\n                }}\n                onSave={value => go.do('search')}\n                basicSetup={{\n                  lineNumbers: false\n                }}\n                saveButton={false}\n              />]}\n            </c.Box>\n            <c.Flex>\n              <c.Button\n                h='3em' maxW='3em' w='3em' variant={go.value === 'search' ? 'active' : undefined}\n                onClick={() => go.do('search')}\n              >\n                🔎\n              </c.Button>\n              {childrenSearchRight}\n            </c.Flex>\n          </c.Flex>\n          <c.Flex>\n            <c.Button\n              h='3em' maxW='3em' w='3em' position='relative'\n              onClick={() => go.do('db')} variant={go.value === 'db' ? 'active' : undefined}\n            >\n              <BsDatabase/>\n              {!o.db && <c.Center position='absolute' top='0' left='0' right='0' bottom='0' fontSize='2em'><AiOutlineStop/></c.Center>}\n            </c.Button>\n            <c.Button\n              h='3em' maxW='3em' w='3em' position='relative'\n              onClick={() => go.do('regexp')}  variant={go.value === 'regexp' ? 'active' : undefined}\n            >\n              <BsRegex/>\n              {!o.regexp && <c.Center position='absolute' top='0' left='0' right='0' bottom='0' fontSize='2em'><AiOutlineStop/></c.Center>}\n            </c.Button>\n            <c.Button\n              h='3em' maxW='3em' w='3em' position='relative'\n              onClick={() =>  go.do('query')} variant={go.value === 'query' ? 'active' : undefined}\n            >\n              {`{q}`}\n              {!o.query && <c.Center position='absolute' top='0' left='0' right='0' bottom='0' fontSize='2em'><AiOutlineStop/></c.Center>}\n            </c.Button>\n            <c.Spacer/>\n            <c.Button\n              h='3em' maxW='3em' w='3em' position='relative'\n              onClick={() =>  go.do('values')} variant={go.value === 'values' ? 'active' : undefined}\n            >\n              \"v\"\n              {!o.values && <c.Center position='absolute' top='0' left='0' right='0' bottom='0' fontSize='2em'><AiOutlineStop/></c.Center>}\n            </c.Button>\n            <c.Button\n              h='3em' maxW='3em' w='3em' position='relative'\n              onClick={() =>  go.do('contains')} variant={go.value === 'contains' ? 'active' : undefined}\n            >\n              🗂️\n              {!o.contains && <c.Center position='absolute' top='0' left='0' right='0' bottom='0' fontSize='2em'><AiOutlineStop/></c.Center>}\n            </c.Button>\n          </c.Flex>\n        </c.SimpleGrid>\n      </c.Box>\n    </go.On>\n  };\n}\n",
        "link_id": 10426
      }
    },
    {
      "id": 10429,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 10426,
      "value": {
        "id": 1432,
        "value": "SearchComponent",
        "link_id": 10429
      }
    },
    {
      "id": 10430,
      "type_id": 35,
      "from_id": 145,
      "to_id": 10426
    },
    {
      "id": 10431,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 10430,
      "value": {
        "id": 1431,
        "value": "Search",
        "link_id": 10431
      }
    },
    {
      "id": 10559,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1435,
        "value": "({ deep, data, require, Go }) => {\n    const { MdEdit, MdPreview, MdSaveAlt } = require(\"react-icons/md\");\n    const { AiOutlineStop } = require(\"react-icons/ai\");\n    const { BsX, BsCheck2, BsXLg, BsDatabase, BsRegex } = require('react-icons/bs');\n    const { useResizeDetector } = require('react-resize-detector');\n    const { useDebounceCallback } = require('@react-hook/debounce');\n    const React = require('react');\n    const c = require('@chakra-ui/react');\n    const dpl = '@deep-foundation/perception-links';\n    const dc = '@deep-foundation/core';\n    const Contain = deep.idLocal('@deep-foundation/core', 'Contain');\n    const History = deep.idLocal(dpl, 'History');\n    const Header = deep.idLocal(dpl, 'Header');\n    const Search = deep.idLocal(dpl, 'Search');\n    const TreeQuery = deep.idLocal(dpl, 'TreeQuery');\n    const TreeLink = deep.idLocal(dpl, 'TreeLink');\n    const TreeLinkInsert = deep.idLocal(dpl, 'TreeLinkInsert');\n    const TreeLinkDelete = deep.idLocal(dpl, 'TreeLinkDelete');\n    const TreeLinkButton = deep.idLocal(dpl, 'TreeLinkButton');\n    const identifiy = (q) => {\n        let value;\n        const o = {};\n        if (q?._or) {\n            for (let i in q?._or) {\n                if (q?._or[i]?.string?.value?._ilike) {\n                    o.values = true;\n                    o.query = false;\n                    if (!value)\n                        value = q?._or[i]?.string?.value?._ilike.slice(1, -1);\n                }\n                if (q?._or[i]?.string?.value?._iregex) {\n                    o.values = true;\n                    o.query = false;\n                    o.regexp = true;\n                    if (!value)\n                        value = q?._or[i]?.string?.value?._iregex;\n                }\n                if (typeof (q?._or[i]?.number?.value) === 'number') {\n                    o.values = true;\n                    o.query = false;\n                    if (!value)\n                        value = q?._or[i]?.number?.value;\n                }\n                if (q?._or[i]?.in?.type_id === Contain) {\n                    if (q?._or[i]?.in?.string?.value?._iregex) {\n                        o.query = false;\n                        o.regexp = true;\n                        if (!value)\n                            value = q?._or[i]?.in?.string?.value?._iregex;\n                    }\n                    if (q?._or[i]?.in?.string?.value?._ilike) {\n                        o.query = false;\n                        if (!value)\n                            value = q?._or[i]?.in?.string?.value?._ilike.slice(1, -1);\n                    }\n                }\n                if (q?._not?.type_id === Contain)\n                    o.contains = false;\n                else if (q?.type_id === Contain)\n                    o.contains = true;\n            }\n        }\n        console.log('identified', q, o, value);\n        return { options: o, value };\n    };\n    return ({ go, linkId, isActive, oneline = false, saveHistory = false, finder = false, query: _query, search: _search, options: _options = {\n        db: false,\n        regexp: false,\n        query: false,\n        values: false,\n        contains: false,\n    }, onChange, onSearch, childrenSearchRight = null, children, }, ref) => {\n        if (!linkId)\n            throw new Error(`linkId must be Query instance id but ${linkId}`);\n        const nav = go.useNav();\n        if (finder)\n            nav('finder', 'left', 'up', 'current', 'db');\n        nav('current', finder ? 'finder' : 'db', 'up', 'search', 'db');\n        nav('search', 'current', 'up', 'contains', 'contains');\n        nav('db', 'current', 'current', 'regexp', 'down');\n        nav('regexp', 'db', 'current', 'query', 'down');\n        nav('query', 'regexp', 'current', 'values', 'down');\n        nav('values', 'query', 'current', 'contains', 'down');\n        nav('contains', 'values', 'search', 'right', 'down');\n        const options = { ...({ db: false, regexp: false, query: false, values: false, contains: false, }), ..._options };\n        const _q = React.useMemo(() => deep.get(linkId)?.value?.value || _query, []);\n        if (_q)\n            options.query = true;\n        const [toRequest, setToRequest] = React.useState();\n        const identified = React.useMemo(() => {\n            return identifiy(deep.get(linkId)?.value?.value || {});\n        }, []);\n        const [value, setValue] = React.useState(typeof (identified?.value) === 'string' ? identified?.value : (_q ? JSON.stringify(_q) : _search));\n        const [o, setOptions] = React.useState({ ...options, ...identified.options });\n        const optionsRef = React.useRef(o);\n        React.useMemo(() => {\n            if (!optionsRef.current.query && !!o.query) {\n                setValue(JSON.stringify(deep.searchQuery(value, { ...o, query: undefined }), null, 2));\n            }\n            else if (!!optionsRef.current.query && !o.query) {\n                const identified = identifiy(toRequest);\n                setOptions(identified?.options);\n                setValue(identified?.value);\n            }\n        }, [o.query]);\n        optionsRef.current = o;\n        const [results, setResults] = React.useState([]);\n        const request = React.useCallback(async (value) => {\n            const o = optionsRef.current;\n            let cq;\n            console.log('onRequest', { _q, o, identified });\n            if (!o.query) {\n                cq = deep.searchQuery(value, { ...o, query: undefined });\n            }\n            else\n                try {\n                    cq = JSON.parse(value);\n                }\n                catch (error) {\n                    return console.error(error);\n                }\n            console.log('onRequest', cq);\n            if (saveHistory && typeof (linkId) === 'number')\n                deep.value(linkId, cq);\n            setToRequest(cq);\n        }, []);\n        React.useEffect(() => {\n            if (!!value)\n                request(value);\n        }, []);\n        React.useMemo(() => {\n            (async () => {\n                const o = optionsRef.current;\n                if (!toRequest)\n                    return;\n                if (onSearch && value) {\n                    let results;\n                    try {\n                        results = await deep.search(value, { ...o, remote: o.db, query: undefined, apply: `deep-perception-search-${go.__p}` });\n                    }\n                    catch (error) {\n                        results = { error };\n                    }\n                    console.log('onSearch', toRequest, results, o);\n                    onSearch({ ...results, query: toRequest, search: !o.query ? value : null, options: o });\n                }\n            })();\n        }, [toRequest]);\n        return React.createElement(go.On, { do: {\n                focus: () => go.set('current'),\n                left: () => go.focus(nav.get(go.value, 'left')),\n                right: () => go.focus(nav.get(go.value, 'right')),\n                up: () => go.focus(nav.get(go.value, 'up')),\n                down: () => go.focus(nav.get(go.value, 'down')),\n                finder: () => setOptions({ ...o, finder: !o.finder }),\n                search: () => request(value),\n                current: () => setOptions({ ...o, current: !o.current }),\n                db: () => setOptions({ ...o, db: !o.db }),\n                regexp: () => setOptions({ ...o, regexp: !o.regexp }),\n                query: () => setOptions({ ...o, query: !o.query }),\n                values: () => setOptions({ ...o, values: !o.values }),\n                contains: () => setOptions({ ...o, contains: !o.contains }),\n            }, focus: {\n                up: (q, v, o) => go.set().go?.go?.do('up'),\n                down: (q, v, o) => go.set().go?.go?.do('down'),\n                left: (q, v, o) => go.set(o?.left).go?.go?.do('left'),\n                right: (q, v, o) => go.set(o?.right).go?.go?.do('right'),\n            } },\n            React.createElement(c.Box, { ref: ref, position: 'relative', w: '100%', bg: isActive ? 'deepBgDark' : undefined },\n                React.createElement(c.SimpleGrid, { columns: oneline ? 2 : 1, w: oneline ? finder ? '28em' : '25em' : undefined },\n                    React.createElement(c.Flex, null,\n                        !!finder && React.createElement(c.Button, { h: '3em', maxW: '3em', w: '3em', variant: go.value === 'finder' ? 'active' : undefined, onClick: () => go.do('finder') }, \"\\uD83E\\uDEAC\"),\n                        React.createElement(c.Box, { flex: 1, h: '3em' }, [React.createElement(go.Editor, { key: o.query, fillSize: true, value: value, onChange: value => {\n                                    setValue(value);\n                                    onChange && onChange(value);\n                                }, onSave: value => go.do('search'), basicSetup: {\n                                    lineNumbers: false\n                                }, saveButton: false })]),\n                        React.createElement(c.Flex, null,\n                            React.createElement(c.Button, { h: '3em', maxW: '3em', w: '3em', variant: go.value === 'search' ? 'active' : undefined, onClick: () => go.do('search') }, \"\\uD83D\\uDD0E\"),\n                            childrenSearchRight)),\n                    React.createElement(c.Flex, null,\n                        React.createElement(c.Button, { h: '3em', maxW: '3em', w: '3em', position: 'relative', onClick: () => go.do('db'), variant: go.value === 'db' ? 'active' : undefined },\n                            React.createElement(BsDatabase, null),\n                            !o.db && React.createElement(c.Center, { position: 'absolute', top: '0', left: '0', right: '0', bottom: '0', fontSize: '2em' },\n                                React.createElement(AiOutlineStop, null))),\n                        React.createElement(c.Button, { h: '3em', maxW: '3em', w: '3em', position: 'relative', onClick: () => go.do('regexp'), variant: go.value === 'regexp' ? 'active' : undefined },\n                            React.createElement(BsRegex, null),\n                            !o.regexp && React.createElement(c.Center, { position: 'absolute', top: '0', left: '0', right: '0', bottom: '0', fontSize: '2em' },\n                                React.createElement(AiOutlineStop, null))),\n                        React.createElement(c.Button, { h: '3em', maxW: '3em', w: '3em', position: 'relative', onClick: () => go.do('query'), variant: go.value === 'query' ? 'active' : undefined },\n                            `{q}`,\n                            !o.query && React.createElement(c.Center, { position: 'absolute', top: '0', left: '0', right: '0', bottom: '0', fontSize: '2em' },\n                                React.createElement(AiOutlineStop, null))),\n                        React.createElement(c.Spacer, null),\n                        React.createElement(c.Button, { h: '3em', maxW: '3em', w: '3em', position: 'relative', onClick: () => go.do('values'), variant: go.value === 'values' ? 'active' : undefined },\n                            \"\\\"v\\\"\",\n                            !o.values && React.createElement(c.Center, { position: 'absolute', top: '0', left: '0', right: '0', bottom: '0', fontSize: '2em' },\n                                React.createElement(AiOutlineStop, null))),\n                        React.createElement(c.Button, { h: '3em', maxW: '3em', w: '3em', position: 'relative', onClick: () => go.do('contains'), variant: go.value === 'contains' ? 'active' : undefined },\n                            \"\\uD83D\\uDDC2\\uFE0F\",\n                            !o.contains && React.createElement(c.Center, { position: 'absolute', top: '0', left: '0', right: '0', bottom: '0', fontSize: '2em' },\n                                React.createElement(AiOutlineStop, null)))))));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxDQUFDLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRTtJQUM5QixNQUFNLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztJQUNuRSxNQUFNLEVBQUUsYUFBYSxFQUFFLEdBQUcsT0FBTyxDQUFDLGdCQUFnQixDQUFDLENBQUM7SUFDcEQsTUFBTSxFQUFFLEdBQUcsRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUFFLFVBQVUsRUFBRSxPQUFPLEVBQUUsR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztJQUNoRixNQUFNLEVBQUUsaUJBQWlCLEVBQUUsR0FBRyxPQUFPLENBQUMsdUJBQXVCLENBQUMsQ0FBQztJQUMvRCxNQUFNLEVBQUUsbUJBQW1CLEVBQUUsR0FBRyxPQUFPLENBQUMsc0JBQXNCLENBQUMsQ0FBQztJQUVoRSxNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7SUFFL0IsTUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLGtCQUFrQixDQUFDLENBQUM7SUFFdEMsTUFBTSxHQUFHLEdBQUcsbUNBQW1DLENBQUM7SUFDaEQsTUFBTSxFQUFFLEdBQUcsdUJBQXVCLENBQUM7SUFFbkMsTUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyx1QkFBdUIsRUFBRSxTQUFTLENBQUMsQ0FBQztJQUNqRSxNQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxTQUFTLENBQUMsQ0FBQztJQUM3QyxNQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxRQUFRLENBQUMsQ0FBQztJQUMzQyxNQUFNLE1BQU0sR0FBRyxJQUFJ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QUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFLEtBQUssR0FBRyxDQUFDLEVBQUUsR0FBRyxRQUFRLEVBQUUsQ0FBQztRQUNsSCxNQUFNLEVBQUUsR0FBRyxLQUFLLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLEVBQUUsS0FBSyxFQUFFLEtBQUssSUFBSSxNQUFNLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFDN0UsSUFBSSxFQUFFO1lBQUUsT0FBTyxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7UUFFN0IsTUFBTSxDQUFDLFNBQVMsRUFBRSxZQUFZLENBQUMsR0FBRyxLQUFLLENBQUMsUUFBUSxFQUFFLENBQUM7UUFFbkQsTUFBTSxVQUFVLEdBQUcsS0FBSyxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUU7WUFDcEMsT0FBTyxTQUFTLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsRUFBRSxLQUFLLEVBQUUsS0FBSyxJQUFJLEVBQUUsQ0FBQyxDQUFDO1FBQ3pELENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUVQLE1BQU0sQ0FBQyxLQUFLLEVBQUUsUUFBUSxDQUFDLEdBQUcsS0FBSyxDQUFDLFFBQVEsQ0FBQyxPQUFNLENBQUMsVUFBVSxFQUFFLEtBQUssQ0FBQyxLQUFLLFFBQVEsQ0FBQyxDQUFDLENBQUMsVUFBVSxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7UUFFM0ksTUFBTSxDQUFDLENBQUMsRUFBRSxVQUFVLENBQUMsR0FBRyxLQUFLLENBQUMsUUFBUSxDQUFDLEVBQUUsR0FBRyxPQUFPLEVBQUUsR0FBRyxVQUFVLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQztRQUU5RSxNQUFNLFVBQVUsR0FB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LENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFDO2dCQUMzQyxJQUFJLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLENBQUM7Z0JBQy9DLE1BQU0sRUFBRSxHQUFHLEVBQUUsQ0FBQyxVQUFVLENBQUMsRUFBRSxHQUFHLENBQUMsRUFBRSxNQUFNLEVBQUUsQ0FBQyxDQUFDLENBQUMsTUFBTSxFQUFDLENBQUM7Z0JBQ3BELE1BQU0sRUFBRSxHQUFHLEVBQUUsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDO2dCQUM1QixPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsR0FBRyxDQUFDLEVBQUUsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sRUFBQyxDQUFDO2dCQUN2RCxFQUFFLEVBQUUsR0FBRyxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsR0FBRyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBQyxDQUFDO2dCQUN4QyxNQUFNLEVBQUUsR0FBRyxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsR0FBRyxDQUFDLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQyxDQUFDLE1BQU0sRUFBQyxDQUFDO2dCQUNwRCxLQUFLLEVBQUUsR0FBRyxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsR0FBRyxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBQyxDQUFDO2dCQUNqRCxNQUFNLEVBQUUsR0FBRyxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsR0FBRyxDQUFDLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQyxDQUFDLE1BQU0sRUFBQyxDQUFDO2dCQUNwRCxRQUFRLEVBQUUsR0FBRyxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsR0FBRyxDQUFDLEVBQUUsUUFBUSxF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T0FBRTs0QkFDVCxDQUFDLENBQUMsQ0FBQyxNQUFNLElBQUksb0JBQUMsQ0FBQyxDQUFDLE1BQU0sSUFBQyxRQUFRLEVBQUMsVUFBVSxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsSUFBSSxFQUFDLEdBQUcsRUFBQyxLQUFLLEVBQUMsR0FBRyxFQUFDLE1BQU0sRUFBQyxHQUFHLEVBQUMsUUFBUSxFQUFDLEtBQUs7Z0NBQUMsb0JBQUMsYUFBYSxPQUFFLENBQVcsQ0FDbkg7d0JBQ1gsb0JBQUMsQ0FBQyxDQUFDLE1BQU0sSUFDUCxDQUFDLEVBQUMsS0FBSyxFQUFDLElBQUksRUFBQyxLQUFLLEVBQUMsQ0FBQyxFQUFDLEtBQUssRUFBQyxRQUFRLEVBQUMsVUFBVSxFQUM5QyxPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxPQUFPLENBQUMsRUFBRSxPQUFPLEVBQUUsRUFBRSxDQUFDLEtBQUssS0FBSyxPQUFPLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsU0FBUzs0QkFFbkYsS0FBSzs0QkFDTCxDQUFDLENBQUMsQ0FBQyxLQUFLLElBQUksb0JBQUMsQ0FBQyxDQUFDLE1BQU0sSUFBQyxRQUFRLEVBQUMsVUFBVSxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsSUFBSSxFQUFDLEdBQUcsRUFBQyxLQUFLLEVBQUMsR0FBRyxFQUFDLE1BQU0sRUFBQyxHQUFHLEVBQUMsUUFBUSxFQUFDLEtBQUs7Z0NBQUMsb0JBQUMsYUFBYSxPQUFFLENBQVcsQ0FDbEg7d0JBQ1gsb0JBQUMsQ0FBQyxDQUFDLE1BQU0sT0FBRTt3QkFDWCxvQkFBQyxDQUFDLENBQUMsTUFBTSxJQUNQLENBQUMsRUFBQyxLQUFLLEVBQUMsSUFBSSxFQUFDLEtBQUssRUFBQyxDQUFDLEVBQUMsS0FBSyxFQUFDLFFBQVEsRUFBQyxVQUFVLEVBQzlDLE9BQU8sRUFBRSxHQUFHLEVBQUUsQ0FBRSxFQUFFLENBQUMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxFQUFFLE9BQU8sRUFBRSxFQUFFLENBQUMsS0FBSyxLQUFLLFFBQVEsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxTQUFTOzs0QkFHckYsQ0FBQyxDQUFDLENBQUMsTUFBTSxJQUFJLG9CQUFDLENBQUMsQ0FBQyxNQUFNLElBQUMsUUFBUSxFQUFDLFVBQVUsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLElBQUksRUFBQyxHQUFHLEVBQUMsS0FBSyxFQUFDLEdBQUcsRUFBQyxNQUFNLEVBQUMsR0FBRyxFQUFDLFFBQVEsRUFBQyxLQUFLO2dDQUFDLG9CQUFDLGFBQWEsT0FBRSxDQUFXLENBQ25IO3dCQUNYLG9CQUFDLENBQUMsQ0FBQyxNQUFNLElBQ1AsQ0FBQyxFQUFDLEtBQUssRUFBQyxJQUFJLEVBQUMsS0FBSyxFQUFDLENBQUMsRUFBQyxLQUFLLEVBQUMsUUFBUSxFQUFDLFVBQVUsRUFDOUMsT0FBTyxFQUFFLEdBQUcsRUFBRSxDQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsT0FBTyxFQUFFLEVBQUUsQ0FBQyxLQUFLLEtBQUssVUFBVSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLFNBQVM7OzRCQUd6RixDQUFDLENBQUMsQ0FBQyxRQUFRLElBQUksb0JBQUMsQ0FBQyxDQUFDLE1BQU0sSUFBQyxRQUFRLEVBQUMsVUFBVSxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsSUFBSSxFQUFDLEdBQUcsRUFBQyxLQUFLLEVBQUMsR0FBRyxFQUFDLE1BQU0sRUFBQyxHQUFHLEVBQUMsUUFBUSxFQUFDLEtBQUs7Z0NBQUMsb0JBQUMsYUFBYSxPQUFFLENBQVcsQ0FDckgsQ0FDSixDQUNJLENBQ1QsQ0FDRixDQUFBO0lBQ1YsQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiKHsgZGVlcCwgZGF0YSwgcmVxdWlyZSwgR28gfSkgPT4ge1xuICBjb25zdCB7IE1kRWRpdCwgTWRQcmV2aWV3LCBNZFNhdmVBbHQgfSA9IHJlcXVpcmUoXCJyZWFjdC1pY29ucy9tZFwiKTtcbiAgY29uc3QgeyBBaU91dGxpbmVTdG9wIH0gPSByZXF1aXJlKFwicmVhY3QtaWNvbnMvYWlcIik7XG4gIGNvbnN0IHsgQnNYLCBCc0NoZWNrMiwgQnNYTGcsIEJzRGF0YWJhc2UsIEJzUmVnZXggfSA9IHJlcXVpcmUoJ3JlYWN0LWljb25zL2JzJyk7XG4gIGNvbnN0IHsgdXNlUmVzaXplRGV0ZWN0b3IgfSA9IHJlcXVpcmUoJ3JlYWN0LXJlc2l6ZS1kZXRlY3RvcicpO1xuICBjb25zdCB7IHVzZURlYm91bmNlQ2FsbGJhY2sgfSA9IHJlcXVpcmUoJ0ByZWFjdC1ob29rL2RlYm91bmNlJyk7XG5cbiAgY29uc3QgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuICBcbiAgY29uc3QgYyA9IHJlcXVpcmUoJ0BjaGFrcmEtdWkvcmVhY3QnKTtcblxuICBjb25zdCBkcGwgPSAnQGRlZXAtZm91bmRhdGlvbi9wZXJjZXB0aW9uLWxpbmtzJztcbiAgY29uc3QgZGMgPSAnQGRlZXAtZm91bmRhdGlvbi9jb3JlJztcblxuICBjb25zdCBDb250YWluID0gZGVlcC5pZExvY2FsKCdAZGVlcC1mb3VuZGF0aW9uL2NvcmUnLCAnQ29udGFpbicpO1xuICBjb25zdCBIaXN0b3J5ID0gZGVlcC5pZExvY2FsKGRwbCwgJ0hpc3RvcnknKTtcbiAgY29uc3QgSGVhZGVyID0gZGVlcC5pZExvY2FsKGRwbCwgJ0hlYWRlcicpO1xuICBjb25zdCBTZWFyY2ggPSBkZWVwLmlkTG9jYWwoZHBsLCAnU2VhcmNoJyk7XG4gIGNvbnN0IFRyZWVRdWVyeSA9IGRlZXAuaWRMb2NhbChkcGwsICdUcmVlUXVlcnknKTtcbiAgY29uc3QgVHJlZUxpbmsgPSBkZWVwLmlkTG9jYWwoZHBsLCAnVHJlZUxpbmsnKTtcbiAgY29uc3QgVHJlZUxpbmtJbnNlcnQgPSBkZWVwLmlkTG9jYWwoZHBsLCAnVHJlZUxpbmtJbnNlcnQnKTtcbiAgY29uc3QgVHJlZUxpbmtEZWxldGUgPSBkZWVwLmlkTG9jYWwoZHBsLCAnVHJlZUxpbmtEZWxldGUnKTtcbiAgY29uc3QgVHJlZUxpbmtCdXR0b24gPSBkZWVwLmlkTG9jYWwoZHBsLCAnVHJlZUxpbmtCdXR0b24nKTtcblxuICBjb25zdCBpZGVudGlmaXkgPSAocSkgPT4ge1xuICAgIGxldCB2YWx1ZTtcbiAgICBjb25zdCBvID0ge307XG4gICAgaWYgKHE/Ll9vcikge1xuICAgICAgZm9yIChsZXQgaSBpbiBxPy5fb3IpIHtcbiAgICAgICAgaWYgKHE/Ll9vcltpXT8uc3RyaW5nPy52YWx1ZT8uX2lsaWtlKSB7XG4gICAgICAgICAgby52YWx1ZXMgPSB0cnVlO1xuICAgICAgICAgIG8ucXVlcnkgPSBmYWxzZTtcbiAgICAgICAgICBpZiAoIXZhbHVlKSB2YWx1ZSA9IHE/Ll9vcltpXT8uc3RyaW5nPy52YWx1ZT8uX2lsaWtlLnNsaWNlKDEsIC0xKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocT8uX29yW2ldPy5zdHJpbmc/LnZhbHVlPy5faXJlZ2V4KSB7XG4gICAgICAgICAgby52YWx1ZXMgPSB0cnVlO1xuICAgICAgICAgIG8ucXVlcnkgPSBmYWxzZTtcbiAgICAgICAgICBvLnJlZ2V4cCA9IHRydWU7XG4gICAgICAgICAgaWYgKCF2YWx1ZSkgdmFsdWUgPSBxPy5fb3JbaV0/LnN0cmluZz8udmFsdWU/Ll9pcmVnZXg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZihxPy5fb3JbaV0/Lm51bWJlcj8udmFsdWUpID09PSAnbnVtYmVyJykge1xuICAgICAgICAgIG8udmFsdWVzID0gdHJ1ZTtcbiAgICAgICAgICBvLnF1ZXJ5ID0gZmFsc2U7XG4gICAgICAgICAgaWYgKCF2YWx1ZSkgdmFsdWUgPSBxPy5fb3JbaV0/Lm51bWJlcj8udmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHE/Ll9vcltpXT8uaW4/LnR5cGVfaWQgPT09IENvbnRhaW4pIHtcbiAgICAgICAgICBpZiAocT8uX29yW2ldPy5pbj8uc3RyaW5nPy52YWx1ZT8uX2lyZWdleCkge1xuICAgICAgICAgICAgby5xdWVyeSA9IGZhbHNlO1xuICAgICAgICAgICAgby5yZWdleHAgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKCF2YWx1ZSkgdmFsdWUgPSBxPy5fb3JbaV0/LmluPy5zdHJpbmc/LnZhbHVlPy5faXJlZ2V4O1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAocT8uX29yW2ldPy5pbj8uc3RyaW5nPy52YWx1ZT8uX2lsaWtlKSB7XG4gICAgICAgICAgICBvLnF1ZXJ5ID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAoIXZhbHVlKSB2YWx1ZSA9IHE/Ll9vcltpXT8uaW4/LnN0cmluZz8udmFsdWU/Ll9pbGlrZS5zbGljZSgxLC0xKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHE/Ll9ub3Q/LnR5cGVfaWQgPT09IENvbnRhaW4pIG8uY29udGFpbnMgPSBmYWxzZTtcbiAgICAgICAgZWxzZSBpZiAocT8udHlwZV9pZCA9PT0gQ29udGFpbikgby5jb250YWlucyA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKCdpZGVudGlmaWVkJywgcSwgbywgdmFsdWUpO1xuICAgIHJldHVybiB7IG9wdGlvbnM6IG8sIHZhbHVlIH07XG4gIH07XG5cbiAgcmV0dXJuICh7XG4gICAgZ28sXG4gICAgbGlua0lkLFxuXG4gICAgaXNBY3RpdmUsXG4gICAgb25lbGluZSA9IGZhbHNlLFxuICAgIHNhdmVIaXN0b3J5ID0gZmFsc2UsXG4gICAgZmluZGVyID0gZmFsc2UsXG5cbiAgICBxdWVyeTogX3F1ZXJ5LFxuICAgIHNlYXJjaDogX3NlYXJjaCxcblxuICAgIG9wdGlvbnM6IF9vcHRpb25zID0ge1xuICAgICAgZGI6IGZhbHNlLFxuICAgICAgcmVnZXhwOiBmYWxzZSxcbiAgICAgIHF1ZXJ5OiBmYWxzZSxcbiAgICAgIHZhbHVlczogZmFsc2UsXG4gICAgICBjb250YWluczogZmFsc2UsXG4gICAgfSxcblxuICAgIG9uQ2hhbmdlLFxuICAgIG9uU2VhcmNoLFxuXG4gICAgY2hpbGRyZW5TZWFyY2hSaWdodCA9IG51bGwsXG5cbiAgICBjaGlsZHJlbixcbiAgfSwgcmVmKSA9PiB7XG4gICAgaWYgKCFsaW5rSWQpIHRocm93IG5ldyBFcnJvcihgbGlua0lkIG11c3QgYmUgUXVlcnkgaW5zdGFuY2UgaWQgYnV0ICR7bGlua0lkfWApO1xuXG4gICAgY29uc3QgbmF2ID0gZ28udXNlTmF2KCk7XG4gICAgaWYgKGZpbmRlcikgbmF2KCdmaW5kZXInLCAnbGVmdCcsICd1cCcsICdjdXJyZW50JywgJ2RiJyk7XG4gICAgbmF2KCdjdXJyZW50JywgZmluZGVyID8gJ2ZpbmRlcicgOiAnZGInLCAndXAnLCAnc2VhcmNoJywgJ2RiJyk7XG4gICAgbmF2KCdzZWFyY2gnLCAnY3VycmVudCcsICd1cCcsICdjb250YWlucycsICdjb250YWlucycpO1xuICAgIG5hdignZGInLCAnY3VycmVudCcsICdjdXJyZW50JywgJ3JlZ2V4cCcsICdkb3duJyk7XG4gICAgbmF2KCdyZWdleHAnLCAnZGInLCAnY3VycmVudCcsICdxdWVyeScsICdkb3duJyk7XG4gICAgbmF2KCdxdWVyeScsICdyZWdleHAnLCAnY3VycmVudCcsICd2YWx1ZXMnLCAnZG93bicpO1xuICAgIG5hdigndmFsdWVzJywgJ3F1ZXJ5JywgJ2N1cnJlbnQnLCAnY29udGFpbnMnLCAnZG93bicpO1xuICAgIG5hdignY29udGFpbnMnLCAndmFsdWVzJywgJ3NlYXJjaCcsICdyaWdodCcsICdkb3duJyk7XG5cbiAgICBjb25zdCBvcHRpb25zID0geyAuLi4oeyBkYjogZmFsc2UsIHJlZ2V4cDogZmFsc2UsIHF1ZXJ5OiBmYWxzZSwgdmFsdWVzOiBmYWxzZSwgY29udGFpbnM6IGZhbHNlLCB9KSwgLi4uX29wdGlvbnMgfTtcbiAgICBjb25zdCBfcSA9IFJlYWN0LnVzZU1lbW8oKCkgPT4gZGVlcC5nZXQobGlua0lkKT8udmFsdWU/LnZhbHVlIHx8IF9xdWVyeSwgW10pO1xuICAgIGlmIChfcSkgb3B0aW9ucy5xdWVyeSA9IHRydWU7XG5cbiAgICBjb25zdCBbdG9SZXF1ZXN0LCBzZXRUb1JlcXVlc3RdID0gUmVhY3QudXNlU3RhdGUoKTtcblxuICAgIGNvbnN0IGlkZW50aWZpZWQgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICAgIHJldHVybiBpZGVudGlmaXkoZGVlcC5nZXQobGlua0lkKT8udmFsdWU/LnZhbHVlIHx8IHt9KTtcbiAgICB9LCBbXSk7XG5cbiAgICBjb25zdCBbdmFsdWUsIHNldFZhbHVlXSA9IFJlYWN0LnVzZVN0YXRlKHR5cGVvZihpZGVudGlmaWVkPy52YWx1ZSkgPT09ICdzdHJpbmcnID8gaWRlbnRpZmllZD8udmFsdWUgOiAoX3EgPyBKU09OLnN0cmluZ2lmeShfcSkgOiBfc2VhcmNoKSk7XG5cbiAgICBjb25zdCBbbywgc2V0T3B0aW9uc10gPSBSZWFjdC51c2VTdGF0ZSh7IC4uLm9wdGlvbnMsIC4uLmlkZW50aWZpZWQub3B0aW9ucyB9KTtcblxuICAgIGNvbnN0IG9wdGlvbnNSZWYgPSBSZWFjdC51c2VSZWYobyk7XG4gICAgUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgICBpZiAoIW9wdGlvbnNSZWYuY3VycmVudC5xdWVyeSAmJiAhIW8ucXVlcnkpIHtcbiAgICAgICAgc2V0VmFsdWUoSlNPTi5zdHJpbmdpZnkoZGVlcC5zZWFyY2hRdWVyeSh2YWx1ZSwgeyAuLi5vLCBxdWVyeTogdW5kZWZpbmVkIH0pLCBudWxsLCAyKSk7XG4gICAgICB9IGVsc2UgaWYgKCEhb3B0aW9uc1JlZi5jdXJyZW50LnF1ZXJ5ICYmICFvLnF1ZXJ5KSB7XG4gICAgICAgIGNvbnN0IGlkZW50aWZpZWQgPSBpZGVudGlmaXkodG9SZXF1ZXN0KTtcbiAgICAgICAgc2V0T3B0aW9ucyhpZGVudGlmaWVkPy5vcHRpb25zKTtcbiAgICAgICAgc2V0VmFsdWUoaWRlbnRpZmllZD8udmFsdWUpO1xuICAgICAgfVxuICAgIH0sIFtvLnF1ZXJ5XSk7XG4gICAgb3B0aW9uc1JlZi5jdXJyZW50ID0gbztcbiAgICBjb25zdCBbcmVzdWx0cywgc2V0UmVzdWx0c10gPSBSZWFjdC51c2VTdGF0ZShbXSk7XG5cblxuICAgIGNvbnN0IHJlcXVlc3QgPSBSZWFjdC51c2VDYWxsYmFjayhhc3luYyAodmFsdWUpID0+IHtcbiAgICAgIGNvbnN0IG8gPSBvcHRpb25zUmVmLmN1cnJlbnQ7XG4gICAgICBsZXQgY3E7XG4gICAgICBjb25zb2xlLmxvZygnb25SZXF1ZXN0JywgeyBfcSwgbywgaWRlbnRpZmllZCB9KTtcbiAgICAgIGlmICghby5xdWVyeSkge1xuICAgICAgICBjcSA9IGRlZXAuc2VhcmNoUXVlcnkodmFsdWUsIHsgLi4ubywgcXVlcnk6IHVuZGVmaW5lZCB9KTtcbiAgICAgIH0gZWxzZSB0cnkgeyBjcSA9IEpTT04ucGFyc2UodmFsdWUpOyB9IGNhdGNoKGVycm9yKSB7XG4gICAgICAgIHJldHVybiBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgIH1cbiAgICAgIGNvbnNvbGUubG9nKCdvblJlcXVlc3QnLCBjcSk7XG4gICAgICBpZiAoc2F2ZUhpc3RvcnkgJiYgdHlwZW9mKGxpbmtJZCkgPT09ICdudW1iZXInKSBkZWVwLnZhbHVlKGxpbmtJZCwgY3EpO1xuICAgICAgc2V0VG9SZXF1ZXN0KGNxKTtcbiAgICB9LCBbXSk7XG5cbiAgICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgaWYgKCEhdmFsdWUpIHJlcXVlc3QodmFsdWUpO1xuICAgIH0sIFtdKTtcblxuICAgIFJlYWN0LnVzZU1lbW8oKCkgPT4geyAoYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbyA9IG9wdGlvbnNSZWYuY3VycmVudDtcbiAgICAgIGlmICghdG9SZXF1ZXN0KSByZXR1cm47XG4gICAgICBpZiAob25TZWFyY2ggJiYgdmFsdWUpIHtcbiAgICAgICAgbGV0IHJlc3VsdHM7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcmVzdWx0cyA9IGF3YWl0IGRlZXAuc2VhcmNoKHZhbHVlLCB7IC4uLm8sIHJlbW90ZTogby5kYiwgcXVlcnk6IHVuZGVmaW5lZCwgYXBwbHk6IGBkZWVwLXBlcmNlcHRpb24tc2VhcmNoLSR7Z28uX19wfWAgfSk7XG4gICAgICAgIH0gY2F0Y2goZXJyb3IpIHtcbiAgICAgICAgICByZXN1bHRzID0geyBlcnJvciB9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnNvbGUubG9nKCdvblNlYXJjaCcsIHRvUmVxdWVzdCwgcmVzdWx0cywgbyk7XG4gICAgICAgIG9uU2VhcmNoKHsgLi4ucmVzdWx0cywgcXVlcnk6IHRvUmVxdWVzdCwgc2VhcmNoOiAhby5xdWVyeSA/IHZhbHVlIDogbnVsbCwgb3B0aW9uczogbyB9KTtcbiAgICAgIH1cbiAgICB9KSgpOyB9LCBbdG9SZXF1ZXN0XSk7XG5cbiAgICByZXR1cm4gPGdvLk9uXG4gICAgICBkbz17e1xuICAgICAgICBmb2N1czogKCkgPT4gZ28uc2V0KCdjdXJyZW50JyksXG4gICAgICAgIGxlZnQ6ICgpID0+IGdvLmZvY3VzKG5hdi5nZXQoZ28udmFsdWUsICdsZWZ0JykpLFxuICAgICAgICByaWdodDogKCkgPT4gZ28uZm9jdXMobmF2LmdldChnby52YWx1ZSwgJ3JpZ2h0JykpLFxuICAgICAgICB1cDogKCkgPT4gZ28uZm9jdXMobmF2LmdldChnby52YWx1ZSwgJ3VwJykpLFxuICAgICAgICBkb3duOiAoKSA9PiBnby5mb2N1cyhuYXYuZ2V0KGdvLnZhbHVlLCAnZG93bicpKSxcbiAgICAgICAgZmluZGVyOiAoKSA9PiBzZXRPcHRpb25zKHsgLi4ubywgZmluZGVyOiAhby5maW5kZXJ9KSxcbiAgICAgICAgc2VhcmNoOiAoKSA9PiByZXF1ZXN0KHZhbHVlKSxcbiAgICAgICAgY3VycmVudDogKCkgPT4gc2V0T3B0aW9ucyh7IC4uLm8sIGN1cnJlbnQ6ICFvLmN1cnJlbnR9KSxcbiAgICAgICAgZGI6ICgpID0+IHNldE9wdGlvbnMoeyAuLi5vLCBkYjogIW8uZGJ9KSxcbiAgICAgICAgcmVnZXhwOiAoKSA9PiBzZXRPcHRpb25zKHsgLi4ubywgcmVnZXhwOiAhby5yZWdleHB9KSxcbiAgICAgICAgcXVlcnk6ICgpID0+IHNldE9wdGlvbnMoeyAuLi5vLCBxdWVyeTogIW8ucXVlcnl9KSxcbiAgICAgICAgdmFsdWVzOiAoKSA9PiBzZXRPcHRpb25zKHsgLi4ubywgdmFsdWVzOiAhby52YWx1ZXN9KSxcbiAgICAgICAgY29udGFpbnM6ICgpID0+IHNldE9wdGlvbnMoeyAuLi5vLCBjb250YWluczogIW8uY29udGFpbnN9KSxcbiAgICAgIH19XG4gICAgICBmb2N1cz17e1xuICAgICAgICB1cDogKHEsdixvKSA9PiBnby5zZXQoKS5nbz8uZ28/LmRvKCd1cCcpLFxuICAgICAgICBkb3duOiAocSx2LG8pID0+IGdvLnNldCgpLmdvPy5nbz8uZG8oJ2Rvd24nKSxcbiAgICAgICAgbGVmdDogKHEsdixvKSA9PiBnby5zZXQobz8ubGVmdCkuZ28/LmdvPy5kbygnbGVmdCcpLFxuICAgICAgICByaWdodDogKHEsdixvKSA9PiBnby5zZXQobz8ucmlnaHQpLmdvPy5nbz8uZG8oJ3JpZ2h0JyksXG4gICAgICB9fVxuICAgID5cbiAgICAgIDxjLkJveCByZWY9e3JlZn0gcG9zaXRpb249J3JlbGF0aXZlJyB3PScxMDAlJyBiZz17aXNBY3RpdmUgPyAnZGVlcEJnRGFyaycgOiB1bmRlZmluZWR9PlxuICAgICAgICA8Yy5TaW1wbGVHcmlkIGNvbHVtbnM9e29uZWxpbmUgPyAyIDogMX0gdz17b25lbGluZSA/IGZpbmRlciA/ICcyOGVtJyA6ICcyNWVtJyA6IHVuZGVmaW5lZH0+XG4gICAgICAgICAgPGMuRmxleD5cbiAgICAgICAgICAgIHshIWZpbmRlciAmJiA8Yy5CdXR0b25cbiAgICAgICAgICAgICAgaD0nM2VtJyBtYXhXPSczZW0nIHc9JzNlbScgdmFyaWFudD17Z28udmFsdWUgPT09ICdmaW5kZXInID8gJ2FjdGl2ZScgOiB1bmRlZmluZWR9XG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGdvLmRvKCdmaW5kZXInKX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAg8J+qrFxuICAgICAgICAgICAgPC9jLkJ1dHRvbj59XG4gICAgICAgICAgICA8Yy5Cb3ggZmxleD17MX0gaD0nM2VtJz5cbiAgICAgICAgICAgICAge1s8Z28uRWRpdG9yXG4gICAgICAgICAgICAgICAga2V5PXtvLnF1ZXJ5fVxuICAgICAgICAgICAgICAgIGZpbGxTaXplXG4gICAgICAgICAgICAgICAgdmFsdWU9e3ZhbHVlfVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt2YWx1ZSA9PiB7XG4gICAgICAgICAgICAgICAgICBzZXRWYWx1ZSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZSAmJiBvbkNoYW5nZSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICBvblNhdmU9e3ZhbHVlID0+IGdvLmRvKCdzZWFyY2gnKX1cbiAgICAgICAgICAgICAgICBiYXNpY1NldHVwPXt7XG4gICAgICAgICAgICAgICAgICBsaW5lTnVtYmVyczogZmFsc2VcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIHNhdmVCdXR0b249e2ZhbHNlfVxuICAgICAgICAgICAgICAvPl19XG4gICAgICAgICAgICA8L2MuQm94PlxuICAgICAgICAgICAgPGMuRmxleD5cbiAgICAgICAgICAgICAgPGMuQnV0dG9uXG4gICAgICAgICAgICAgICAgaD0nM2VtJyBtYXhXPSczZW0nIHc9JzNlbScgdmFyaWFudD17Z28udmFsdWUgPT09ICdzZWFyY2gnID8gJ2FjdGl2ZScgOiB1bmRlZmluZWR9XG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gZ28uZG8oJ3NlYXJjaCcpfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAg8J+UjlxuICAgICAgICAgICAgICA8L2MuQnV0dG9uPlxuICAgICAgICAgICAgICB7Y2hpbGRyZW5TZWFyY2hSaWdodH1cbiAgICAgICAgICAgIDwvYy5GbGV4PlxuICAgICAgICAgIDwvYy5GbGV4PlxuICAgICAgICAgIDxjLkZsZXg+XG4gICAgICAgICAgICA8Yy5CdXR0b25cbiAgICAgICAgICAgICAgaD0nM2VtJyBtYXhXPSczZW0nIHc9JzNlbScgcG9zaXRpb249J3JlbGF0aXZlJ1xuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBnby5kbygnZGInKX0gdmFyaWFudD17Z28udmFsdWUgPT09ICdkYicgPyAnYWN0aXZlJyA6IHVuZGVmaW5lZH1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPEJzRGF0YWJhc2UvPlxuICAgICAgICAgICAgICB7IW8uZGIgJiYgPGMuQ2VudGVyIHBvc2l0aW9uPSdhYnNvbHV0ZScgdG9wPScwJyBsZWZ0PScwJyByaWdodD0nMCcgYm90dG9tPScwJyBmb250U2l6ZT0nMmVtJz48QWlPdXRsaW5lU3RvcC8+PC9jLkNlbnRlcj59XG4gICAgICAgICAgICA8L2MuQnV0dG9uPlxuICAgICAgICAgICAgPGMuQnV0dG9uXG4gICAgICAgICAgICAgIGg9JzNlbScgbWF4Vz0nM2VtJyB3PSczZW0nIHBvc2l0aW9uPSdyZWxhdGl2ZSdcbiAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gZ28uZG8oJ3JlZ2V4cCcpfSAgdmFyaWFudD17Z28udmFsdWUgPT09ICdyZWdleHAnID8gJ2FjdGl2ZScgOiB1bmRlZmluZWR9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxCc1JlZ2V4Lz5cbiAgICAgICAgICAgICAgeyFvLnJlZ2V4cCAmJiA8Yy5DZW50ZXIgcG9zaXRpb249J2Fic29sdXRlJyB0b3A9JzAnIGxlZnQ9JzAnIHJpZ2h0PScwJyBib3R0b209JzAnIGZvbnRTaXplPScyZW0nPjxBaU91dGxpbmVTdG9wLz48L2MuQ2VudGVyPn1cbiAgICAgICAgICAgIDwvYy5CdXR0b24+XG4gICAgICAgICAgICA8Yy5CdXR0b25cbiAgICAgICAgICAgICAgaD0nM2VtJyBtYXhXPSczZW0nIHc9JzNlbScgcG9zaXRpb249J3JlbGF0aXZlJ1xuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiAgZ28uZG8oJ3F1ZXJ5Jyl9IHZhcmlhbnQ9e2dvLnZhbHVlID09PSAncXVlcnknID8gJ2FjdGl2ZScgOiB1bmRlZmluZWR9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHtge3F9YH1cbiAgICAgICAgICAgICAgeyFvLnF1ZXJ5ICYmIDxjLkNlbnRlciBwb3NpdGlvbj0nYWJzb2x1dGUnIHRvcD0nMCcgbGVmdD0nMCcgcmlnaHQ9JzAnIGJvdHRvbT0nMCcgZm9udFNpemU9JzJlbSc+PEFpT3V0bGluZVN0b3AvPjwvYy5DZW50ZXI+fVxuICAgICAgICAgICAgPC9jLkJ1dHRvbj5cbiAgICAgICAgICAgIDxjLlNwYWNlci8+XG4gICAgICAgICAgICA8Yy5CdXR0b25cbiAgICAgICAgICAgICAgaD0nM2VtJyBtYXhXPSczZW0nIHc9JzNlbScgcG9zaXRpb249J3JlbGF0aXZlJ1xuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiAgZ28uZG8oJ3ZhbHVlcycpfSB2YXJpYW50PXtnby52YWx1ZSA9PT0gJ3ZhbHVlcycgPyAnYWN0aXZlJyA6IHVuZGVmaW5lZH1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgXCJ2XCJcbiAgICAgICAgICAgICAgeyFvLnZhbHVlcyAmJiA8Yy5DZW50ZXIgcG9zaXRpb249J2Fic29sdXRlJyB0b3A9JzAnIGxlZnQ9JzAnIHJpZ2h0PScwJyBib3R0b209JzAnIGZvbnRTaXplPScyZW0nPjxBaU91dGxpbmVTdG9wLz48L2MuQ2VudGVyPn1cbiAgICAgICAgICAgIDwvYy5CdXR0b24+XG4gICAgICAgICAgICA8Yy5CdXR0b25cbiAgICAgICAgICAgICAgaD0nM2VtJyBtYXhXPSczZW0nIHc9JzNlbScgcG9zaXRpb249J3JlbGF0aXZlJ1xuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiAgZ28uZG8oJ2NvbnRhaW5zJyl9IHZhcmlhbnQ9e2dvLnZhbHVlID09PSAnY29udGFpbnMnID8gJ2FjdGl2ZScgOiB1bmRlZmluZWR9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIPCfl4LvuI9cbiAgICAgICAgICAgICAgeyFvLmNvbnRhaW5zICYmIDxjLkNlbnRlciBwb3NpdGlvbj0nYWJzb2x1dGUnIHRvcD0nMCcgbGVmdD0nMCcgcmlnaHQ9JzAnIGJvdHRvbT0nMCcgZm9udFNpemU9JzJlbSc+PEFpT3V0bGluZVN0b3AvPjwvYy5DZW50ZXI+fVxuICAgICAgICAgICAgPC9jLkJ1dHRvbj5cbiAgICAgICAgICA8L2MuRmxleD5cbiAgICAgICAgPC9jLlNpbXBsZUdyaWQ+XG4gICAgICA8L2MuQm94PlxuICAgIDwvZ28uT24+XG4gIH07XG59XG4iXX0=",
        "link_id": 10559
      }
    },
    {
      "id": 10560,
      "type_id": 3,
      "from_id": 10426,
      "to_id": 10559,
      "value": {
        "id": 1434,
        "value": "generated",
        "link_id": 10560
      }
    },
    {
      "id": 10561,
      "type_id": 143,
      "from_id": 10559,
      "to_id": 10426
    },
    {
      "id": 10562,
      "type_id": 3,
      "from_id": 10426,
      "to_id": 10561
    },
    {
      "id": 10711,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1441,
        "value": "({ deep, data, require, Go }) => {\n  const { MdEdit, MdPreview, MdSaveAlt } = require(\"react-icons/md\");\n  const React = require('react');\n\n  const {\n    TypedIcon, DownIcon, UpIcon, TypeIcon, InIcon, OutIcon, FromIcon, ToIcon,\n    useSymbol,\n  } = require('@deep-foundation/perception-app');\n\n  const c = require('@chakra-ui/react');\n\n  const dpl = '@deep-foundation/perception-links';\n  const dc = '@deep-foundation/core';\n  \n  const Query = deep.idLocal(dc, 'Query');\n  const Stack = deep.idLocal(dpl, 'Stack');\n  const History = deep.idLocal(dpl, 'History');\n  const Header = deep.idLocal(dpl, 'Header');\n  const Search = deep.idLocal(dpl, 'Search');\n  const TreeQuery = deep.idLocal(dpl, 'TreeQuery');\n  const TreeList = deep.idLocal(dpl, 'TreeList');\n  const TreeLink = deep.idLocal(dpl, 'TreeLink');\n  const TreeLinkInsert = deep.idLocal(dpl, 'TreeLinkInsert');\n  const TreeLinkDelete = deep.idLocal(dpl, 'TreeLinkDelete');\n  const TreeLinkButton = deep.idLocal(dpl, 'TreeLinkButton');\n\n  return ({\n    go,\n\n    isActive,\n    fullWidth = null,\n\n    saveHistory = false,\n\n    initialResults,\n    ...props\n  }, ref) => {\n    const [links, setLinks] = React.useState(initialResults || []);\n    const firstRef = React.useRef(false);\n    \n    const nav = go.useNav();\n    nav(Search, 'left', 'up', 'right', Stack);\n    nav(Stack, 'left', Search, 'right', 'down');\n\n    return <go.On do={{\n      exec: (g,v,o) => o?.id && go.go.do('open', { handlerId: TreeLink, id: o.id, prevId: go.linkId, focus: true }),\n      close: (g,v,o) => go.go.do('close', { id: go.linkId }),\n\n      left: (g,v,o) => go.focus(nav.get(go.value || Search, 'left'), { prev: go.value }),\n      up: (g,v,o) => go.focus(nav.get(go.value || Search, 'up'), { prev: go.value }),\n      right: (g,v,o) => go.focus(nav.get(go.value || Search, 'right'), { prev: go.value }),\n      down: (g,v,o) => go.focus(nav.get(go.value || Search, 'down'), { prev: go.value }),\n    }}>\n      <c.Flex direction='column' minW={fullWidth || '30em'} maxW={fullWidth || '30em'} h='100%' maxH='100%' {...props}>\n        <go.Provider linkId={Search}>\n          <go.Handler linkId={go.linkId} handlerId={Search}\n            saveHistory={saveHistory}\n            onSearch={(results) => {\n              if (!initialResults || !!firstRef.current) {\n                console.log('onSearch', results);\n                let links = results.data || [];\n                setLinks(links);\n              }\n              firstRef.current = true;\n            }}\n            childrenSearchRight={<c.Button\n              minW='3e,' w='3em' h='100%' minH='3em' p='0'\n              onClick={() => go.focus('close').go.do('close')}\n              variant={go.value === 'close' ? 'active' : null}\n            >x</c.Button>}\n          />\n        </go.Provider>\n        <go.Provider linkId={Stack}>\n          <go.Handler handlerId={Stack} direction='vertical' links={links} flex='1' saveHistory={saveHistory}/>\n        </go.Provider>\n      </c.Flex>\n    </go.On>\n  };\n}\n",
        "link_id": 10711
      }
    },
    {
      "id": 10714,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 10711,
      "value": {
        "id": 1440,
        "value": "TreeListComponent",
        "link_id": 10714
      }
    },
    {
      "id": 10715,
      "type_id": 35,
      "from_id": 145,
      "to_id": 10711
    },
    {
      "id": 10716,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 10715,
      "value": {
        "id": 1439,
        "value": "TreeList",
        "link_id": 10716
      }
    },
    {
      "id": 10736,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1443,
        "value": "({ deep, data, require, Go }) => {\n    const { MdEdit, MdPreview, MdSaveAlt } = require(\"react-icons/md\");\n    const React = require('react');\n    const { TypedIcon, DownIcon, UpIcon, TypeIcon, InIcon, OutIcon, FromIcon, ToIcon, useSymbol, } = require('@deep-foundation/perception-app');\n    const c = require('@chakra-ui/react');\n    const dpl = '@deep-foundation/perception-links';\n    const dc = '@deep-foundation/core';\n    const Query = deep.idLocal(dc, 'Query');\n    const Stack = deep.idLocal(dpl, 'Stack');\n    const History = deep.idLocal(dpl, 'History');\n    const Header = deep.idLocal(dpl, 'Header');\n    const Search = deep.idLocal(dpl, 'Search');\n    const TreeQuery = deep.idLocal(dpl, 'TreeQuery');\n    const TreeList = deep.idLocal(dpl, 'TreeList');\n    const TreeLink = deep.idLocal(dpl, 'TreeLink');\n    const TreeLinkInsert = deep.idLocal(dpl, 'TreeLinkInsert');\n    const TreeLinkDelete = deep.idLocal(dpl, 'TreeLinkDelete');\n    const TreeLinkButton = deep.idLocal(dpl, 'TreeLinkButton');\n    return ({ go, isActive, fullWidth = null, saveHistory = false, initialResults, ...props }, ref) => {\n        const [links, setLinks] = React.useState(initialResults || []);\n        const firstRef = React.useRef(false);\n        const nav = go.useNav();\n        nav(Search, 'left', 'up', 'right', Stack);\n        nav(Stack, 'left', Search, 'right', 'down');\n        return React.createElement(go.On, { do: {\n                exec: (g, v, o) => o?.id && go.go.do('open', { handlerId: TreeLink, id: o.id, prevId: go.linkId, focus: true }),\n                close: (g, v, o) => go.go.do('close', { id: go.linkId }),\n                left: (g, v, o) => go.focus(nav.get(go.value || Search, 'left'), { prev: go.value }),\n                up: (g, v, o) => go.focus(nav.get(go.value || Search, 'up'), { prev: go.value }),\n                right: (g, v, o) => go.focus(nav.get(go.value || Search, 'right'), { prev: go.value }),\n                down: (g, v, o) => go.focus(nav.get(go.value || Search, 'down'), { prev: go.value }),\n            } },\n            React.createElement(c.Flex, { direction: 'column', minW: fullWidth || '30em', maxW: fullWidth || '30em', h: '100%', maxH: '100%', ...props },\n                React.createElement(go.Provider, { linkId: Search },\n                    React.createElement(go.Handler, { linkId: go.linkId, handlerId: Search, saveHistory: saveHistory, onSearch: (results) => {\n                            if (!initialResults || !!firstRef.current) {\n                                console.log('onSearch', results);\n                                let links = results.data || [];\n                                setLinks(links);\n                            }\n                            firstRef.current = true;\n                        }, childrenSearchRight: React.createElement(c.Button, { minW: '3e,', w: '3em', h: '100%', minH: '3em', p: '0', onClick: () => go.focus('close').go.do('close'), variant: go.value === 'close' ? 'active' : null }, \"x\") })),\n                React.createElement(go.Provider, { linkId: Stack },\n                    React.createElement(go.Handler, { handlerId: Stack, direction: 'vertical', links: links, flex: '1', saveHistory: saveHistory }))));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxDQUFDLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRTtJQUM5QixNQUFNLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztJQUNuRSxNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7SUFFL0IsTUFBTSxFQUNKLFNBQVMsRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQ3hFLFNBQVMsR0FDVixHQUFHLE9BQU8sQ0FBQyxpQ0FBaUMsQ0FBQyxDQUFDO0lBRS9DLE1BQU0sQ0FBQyxHQUFHLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBRXRDLE1BQU0sR0FBRyxHQUFHLG1DQUFtQyxDQUFDO0lBQ2hELE1BQU0sRUFBRSxHQUFHLHVCQUF1QixDQUFDO0lBRW5DLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsRUFBRSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQ3hDLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQ3pDLE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLFNBQVMsQ0FBQyxDQUFDO0lBQzdDLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLFFBQVEsQ0FBQyxDQUFDO0lBQzNDLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLFFBQVEsQ0FBQyxDQUFDO0lBQzNDLE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLFdBQVcsQ0FBQyxDQUFDO0lBQ2pELE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLFVBQVUsQ0FBQyxDQUFDO0lBQy9DLE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLFVBQVUsQ0FBQyxDQUFDO0lBQy9DLE1BQU0sY0FBYyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLGdCQUFnQixDQUFDLENBQUM7SUFDM0QsTUFBTSxjQUFjLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQztJQUMzRCxNQUFNLGNBQWMsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxnQkFBZ0IsQ0FBQyxDQUFDO0lBRTNELE9BQU8sQ0FBQyxFQUNOLEVBQUUsRUFFRixRQUFRLEVBQ1IsU0FBUyxHQUFHLElBQUksRUFFaEIsV0FBVyxHQUFHLEtBQUssRUFFbkIsY0FBYyxFQUNkLEdBQUcsS0FBSyxFQUNULEVBQUUsR0FBRyxFQUFFLEVBQUU7UUFDUixNQUFNLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxHQUFHLEtBQUssQ0FBQyxRQUFRLENBQUMsY0FBYyxJQUFJLEVBQUUsQ0FBQyxDQUFDO1FBQy9ELE1BQU0sUUFBUSxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7UUFFckMsTUFBTSxHQUFHLEdBQUcsRUFBRSxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBQ3hCLEdBQUcsQ0FBQyxNQUFNLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFDMUMsR0FBRyxDQUFDLEtBQUssRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE9BQU8sRUFBRSxNQUFNLENBQUMsQ0FBQztRQUU1QyxPQUFPLG9CQUFDLEVBQUUsQ0FBQyxFQUFFLElBQUMsRUFBRSxFQUFFO2dCQUNoQixJQUFJLEVBQUUsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsSUFBSSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsRUFBRSxTQUFTLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLE1BQU0sRUFBRSxFQUFFLENBQUMsTUFBTSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsQ0FBQztnQkFDN0csS0FBSyxFQUFFLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsTUFBTSxFQUFFLENBQUM7Z0JBRXRELElBQUksRUFBRSxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEtBQUssSUFBSSxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRSxDQUFDLEtBQUssRUFBRSxDQUFDO2dCQUNsRixFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxLQUFLLElBQUksTUFBTSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUUsQ0FBQyxLQUFLLEVBQUUsQ0FBQztnQkFDOUUsS0FBSyxFQUFFLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsS0FBSyxJQUFJLE1BQU0sRUFBRSxPQUFPLENBQUMsRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFLENBQUMsS0FBSyxFQUFFLENBQUM7Z0JBQ3BGLElBQUksRUFBRSxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEtBQUssSUFBSSxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRSxDQUFDLEtBQUssRUFBRSxDQUFDO2FBQ25GO1lBQ0Msb0JBQUMsQ0FBQyxDQUFDLElBQUksSUFBQyxTQUFTLEVBQUMsUUFBUSxFQUFDLElBQUksRUFBRSxTQUFTLElBQUksTUFBTSxFQUFFLElBQUksRUFBRSxTQUFTLElBQUksTUFBTSxFQUFFLENBQUMsRUFBQyxNQUFNLEVBQUMsSUFBSSxFQUFDLE1BQU0sS0FBSyxLQUFLO2dCQUM3RyxvQkFBQyxFQUFFLENBQUMsUUFBUSxJQUFDLE1BQU0sRUFBRSxNQUFNO29CQUN6QixvQkFBQyxFQUFFLENBQUMsT0FBTyxJQUFDLE1BQU0sRUFBRSxFQUFFLENBQUMsTUFBTSxFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQzlDLFdBQVcsRUFBRSxXQUFXLEVBQ3hCLFFBQVEsRUFBRSxDQUFDLE9BQU8sRUFBRSxFQUFFOzRCQUNwQixJQUFJLENBQUMsY0FBYyxJQUFJLENBQUMsQ0FBQyxRQUFRLENBQUMsT0FBTyxFQUFFLENBQUM7Z0NBQzFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsVUFBVSxFQUFFLE9BQU8sQ0FBQyxDQUFDO2dDQUNqQyxJQUFJLEtBQUssR0FBRyxPQUFPLENBQUMsSUFBSSxJQUFJLEVBQUUsQ0FBQztnQ0FDL0IsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDOzRCQUNsQixDQUFDOzRCQUNELFFBQVEsQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDO3dCQUMxQixDQUFDLEVBQ0QsbUJBQW1CLEVBQUUsb0JBQUMsQ0FBQyxDQUFDLE1BQU0sSUFDNUIsSUFBSSxFQUFDLEtBQUssRUFBQyxDQUFDLEVBQUMsS0FBSyxFQUFDLENBQUMsRUFBQyxNQUFNLEVBQUMsSUFBSSxFQUFDLEtBQUssRUFBQyxDQUFDLEVBQUMsR0FBRyxFQUM1QyxPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxFQUMvQyxPQUFPLEVBQUUsRUFBRSxDQUFDLEtBQUssS0FBSyxPQUFPLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsSUFBSSxRQUNwQyxHQUNiLENBQ1U7Z0JBQ2Qsb0JBQUMsRUFBRSxDQUFDLFFBQVEsSUFBQyxNQUFNLEVBQUUsS0FBSztvQkFDeEIsb0JBQUMsRUFBRSxDQUFDLE9BQU8sSUFBQyxTQUFTLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBQyxVQUFVLEVBQUMsS0FBSyxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUMsR0FBRyxFQUFDLFdBQVcsRUFBRSxXQUFXLEdBQUcsQ0FDekYsQ0FDUCxDQUNILENBQUE7SUFDVixDQUFDLENBQUM7QUFDSixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIoeyBkZWVwLCBkYXRhLCByZXF1aXJlLCBHbyB9KSA9PiB7XG4gIGNvbnN0IHsgTWRFZGl0LCBNZFByZXZpZXcsIE1kU2F2ZUFsdCB9ID0gcmVxdWlyZShcInJlYWN0LWljb25zL21kXCIpO1xuICBjb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG5cbiAgY29uc3Qge1xuICAgIFR5cGVkSWNvbiwgRG93bkljb24sIFVwSWNvbiwgVHlwZUljb24sIEluSWNvbiwgT3V0SWNvbiwgRnJvbUljb24sIFRvSWNvbixcbiAgICB1c2VTeW1ib2wsXG4gIH0gPSByZXF1aXJlKCdAZGVlcC1mb3VuZGF0aW9uL3BlcmNlcHRpb24tYXBwJyk7XG5cbiAgY29uc3QgYyA9IHJlcXVpcmUoJ0BjaGFrcmEtdWkvcmVhY3QnKTtcblxuICBjb25zdCBkcGwgPSAnQGRlZXAtZm91bmRhdGlvbi9wZXJjZXB0aW9uLWxpbmtzJztcbiAgY29uc3QgZGMgPSAnQGRlZXAtZm91bmRhdGlvbi9jb3JlJztcbiAgXG4gIGNvbnN0IFF1ZXJ5ID0gZGVlcC5pZExvY2FsKGRjLCAnUXVlcnknKTtcbiAgY29uc3QgU3RhY2sgPSBkZWVwLmlkTG9jYWwoZHBsLCAnU3RhY2snKTtcbiAgY29uc3QgSGlzdG9yeSA9IGRlZXAuaWRMb2NhbChkcGwsICdIaXN0b3J5Jyk7XG4gIGNvbnN0IEhlYWRlciA9IGRlZXAuaWRMb2NhbChkcGwsICdIZWFkZXInKTtcbiAgY29uc3QgU2VhcmNoID0gZGVlcC5pZExvY2FsKGRwbCwgJ1NlYXJjaCcpO1xuICBjb25zdCBUcmVlUXVlcnkgPSBkZWVwLmlkTG9jYWwoZHBsLCAnVHJlZVF1ZXJ5Jyk7XG4gIGNvbnN0IFRyZWVMaXN0ID0gZGVlcC5pZExvY2FsKGRwbCwgJ1RyZWVMaXN0Jyk7XG4gIGNvbnN0IFRyZWVMaW5rID0gZGVlcC5pZExvY2FsKGRwbCwgJ1RyZWVMaW5rJyk7XG4gIGNvbnN0IFRyZWVMaW5rSW5zZXJ0ID0gZGVlcC5pZExvY2FsKGRwbCwgJ1RyZWVMaW5rSW5zZXJ0Jyk7XG4gIGNvbnN0IFRyZWVMaW5rRGVsZXRlID0gZGVlcC5pZExvY2FsKGRwbCwgJ1RyZWVMaW5rRGVsZXRlJyk7XG4gIGNvbnN0IFRyZWVMaW5rQnV0dG9uID0gZGVlcC5pZExvY2FsKGRwbCwgJ1RyZWVMaW5rQnV0dG9uJyk7XG5cbiAgcmV0dXJuICh7XG4gICAgZ28sXG5cbiAgICBpc0FjdGl2ZSxcbiAgICBmdWxsV2lkdGggPSBudWxsLFxuXG4gICAgc2F2ZUhpc3RvcnkgPSBmYWxzZSxcblxuICAgIGluaXRpYWxSZXN1bHRzLFxuICAgIC4uLnByb3BzXG4gIH0sIHJlZikgPT4ge1xuICAgIGNvbnN0IFtsaW5rcywgc2V0TGlua3NdID0gUmVhY3QudXNlU3RhdGUoaW5pdGlhbFJlc3VsdHMgfHwgW10pO1xuICAgIGNvbnN0IGZpcnN0UmVmID0gUmVhY3QudXNlUmVmKGZhbHNlKTtcbiAgICBcbiAgICBjb25zdCBuYXYgPSBnby51c2VOYXYoKTtcbiAgICBuYXYoU2VhcmNoLCAnbGVmdCcsICd1cCcsICdyaWdodCcsIFN0YWNrKTtcbiAgICBuYXYoU3RhY2ssICdsZWZ0JywgU2VhcmNoLCAncmlnaHQnLCAnZG93bicpO1xuXG4gICAgcmV0dXJuIDxnby5PbiBkbz17e1xuICAgICAgZXhlYzogKGcsdixvKSA9PiBvPy5pZCAmJiBnby5nby5kbygnb3BlbicsIHsgaGFuZGxlcklkOiBUcmVlTGluaywgaWQ6IG8uaWQsIHByZXZJZDogZ28ubGlua0lkLCBmb2N1czogdHJ1ZSB9KSxcbiAgICAgIGNsb3NlOiAoZyx2LG8pID0+IGdvLmdvLmRvKCdjbG9zZScsIHsgaWQ6IGdvLmxpbmtJZCB9KSxcblxuICAgICAgbGVmdDogKGcsdixvKSA9PiBnby5mb2N1cyhuYXYuZ2V0KGdvLnZhbHVlIHx8IFNlYXJjaCwgJ2xlZnQnKSwgeyBwcmV2OiBnby52YWx1ZSB9KSxcbiAgICAgIHVwOiAoZyx2LG8pID0+IGdvLmZvY3VzKG5hdi5nZXQoZ28udmFsdWUgfHwgU2VhcmNoLCAndXAnKSwgeyBwcmV2OiBnby52YWx1ZSB9KSxcbiAgICAgIHJpZ2h0OiAoZyx2LG8pID0+IGdvLmZvY3VzKG5hdi5nZXQoZ28udmFsdWUgfHwgU2VhcmNoLCAncmlnaHQnKSwgeyBwcmV2OiBnby52YWx1ZSB9KSxcbiAgICAgIGRvd246IChnLHYsbykgPT4gZ28uZm9jdXMobmF2LmdldChnby52YWx1ZSB8fCBTZWFyY2gsICdkb3duJyksIHsgcHJldjogZ28udmFsdWUgfSksXG4gICAgfX0+XG4gICAgICA8Yy5GbGV4IGRpcmVjdGlvbj0nY29sdW1uJyBtaW5XPXtmdWxsV2lkdGggfHwgJzMwZW0nfSBtYXhXPXtmdWxsV2lkdGggfHwgJzMwZW0nfSBoPScxMDAlJyBtYXhIPScxMDAlJyB7Li4ucHJvcHN9PlxuICAgICAgICA8Z28uUHJvdmlkZXIgbGlua0lkPXtTZWFyY2h9PlxuICAgICAgICAgIDxnby5IYW5kbGVyIGxpbmtJZD17Z28ubGlua0lkfSBoYW5kbGVySWQ9e1NlYXJjaH1cbiAgICAgICAgICAgIHNhdmVIaXN0b3J5PXtzYXZlSGlzdG9yeX1cbiAgICAgICAgICAgIG9uU2VhcmNoPXsocmVzdWx0cykgPT4ge1xuICAgICAgICAgICAgICBpZiAoIWluaXRpYWxSZXN1bHRzIHx8ICEhZmlyc3RSZWYuY3VycmVudCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdvblNlYXJjaCcsIHJlc3VsdHMpO1xuICAgICAgICAgICAgICAgIGxldCBsaW5rcyA9IHJlc3VsdHMuZGF0YSB8fCBbXTtcbiAgICAgICAgICAgICAgICBzZXRMaW5rcyhsaW5rcyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZmlyc3RSZWYuY3VycmVudCA9IHRydWU7XG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAgY2hpbGRyZW5TZWFyY2hSaWdodD17PGMuQnV0dG9uXG4gICAgICAgICAgICAgIG1pblc9JzNlLCcgdz0nM2VtJyBoPScxMDAlJyBtaW5IPSczZW0nIHA9JzAnXG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGdvLmZvY3VzKCdjbG9zZScpLmdvLmRvKCdjbG9zZScpfVxuICAgICAgICAgICAgICB2YXJpYW50PXtnby52YWx1ZSA9PT0gJ2Nsb3NlJyA/ICdhY3RpdmUnIDogbnVsbH1cbiAgICAgICAgICAgID54PC9jLkJ1dHRvbj59XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9nby5Qcm92aWRlcj5cbiAgICAgICAgPGdvLlByb3ZpZGVyIGxpbmtJZD17U3RhY2t9PlxuICAgICAgICAgIDxnby5IYW5kbGVyIGhhbmRsZXJJZD17U3RhY2t9IGRpcmVjdGlvbj0ndmVydGljYWwnIGxpbmtzPXtsaW5rc30gZmxleD0nMScgc2F2ZUhpc3Rvcnk9e3NhdmVIaXN0b3J5fS8+XG4gICAgICAgIDwvZ28uUHJvdmlkZXI+XG4gICAgICA8L2MuRmxleD5cbiAgICA8L2dvLk9uPlxuICB9O1xufVxuIl19",
        "link_id": 10736
      }
    },
    {
      "id": 10737,
      "type_id": 3,
      "from_id": 10711,
      "to_id": 10736,
      "value": {
        "id": 1442,
        "value": "generated",
        "link_id": 10737
      }
    },
    {
      "id": 10738,
      "type_id": 143,
      "from_id": 10736,
      "to_id": 10711
    },
    {
      "id": 10739,
      "type_id": 3,
      "from_id": 10711,
      "to_id": 10738
    },
    {
      "id": 11285,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1454,
        "value": "({ deep, data, require, Go }) => {\n  const { BsFullscreenExit, BsFullscreen } = require(\"react-icons/bs\");\n  const React = require('react');\n  \n  const c = require('@chakra-ui/react');\n\n  const dpl = '@deep-foundation/perception-links';\n\n  return ({\n    go,\n    linkId,\n\n    disclosure: __disclosure,\n  }, ref) => {\n    const _disclosure = c.useDisclosure();\n    const disclosure = __disclosure || _disclosure;\n\n    return <go.On do={{\n    }}>\n      {!disclosure.isOpen && <go.Editor linkId={linkId} fillSize>\n        <c.Button w='3em' h='3em' onClick={disclosure.onOpen}>\n          <BsFullscreen/>\n        </c.Button>\n      </go.Editor>}\n      <c.Modal\n        closeOnOverlayClick blockScrollOnMount={false}\n        onClose={disclosure.onClose}\n        isOpen={disclosure.isOpen} portalProps={{ containerRef: go.root().ref }}\n      >\n        <c.ModalOverlay />\n        <c.ModalContent w='80vw' maxW='80vw' h='80vh' position='relative'>\n          <c.ModalHeader>{''+deep.nameLocal(linkId)}</c.ModalHeader>\n          <c.ModalBody p={0} position='relative'>\n            <go.Editor linkId={linkId} fillSize>\n              <BsFullscreenExit/>\n            </c.Button>\n          </c.ModalBody>\n        </c.ModalContent>\n      </c.Modal>\n    </go.On>;\n  };\n}",
        "link_id": 11285
      }
    },
    {
      "id": 11288,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 11285,
      "value": {
        "id": 1453,
        "value": "TreeEditorComponent",
        "link_id": 11288
      }
    },
    {
      "id": 11289,
      "type_id": 35,
      "from_id": 145,
      "to_id": 11285
    },
    {
      "id": 11290,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 11289,
      "value": {
        "id": 1451,
        "value": "TreeEditor",
        "link_id": 11290
      }
    },
    {
      "id": 11305,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1456,
        "value": "({ deep, data, require, Go }) => {\n    const { BsFullscreenExit, BsFullscreen } = require(\"react-icons/bs\");\n    const React = require('react');\n    const c = require('@chakra-ui/react');\n    const dpl = '@deep-foundation/perception-links';\n    return ({ go, linkId, disclosure: __disclosure, }, ref) => {\n        const _disclosure = c.useDisclosure();\n        const disclosure = __disclosure || _disclosure;\n        return React.createElement(go.On, { do: {} },\n            !disclosure.isOpen && React.createElement(go.Editor, { linkId: linkId, fillSize: true },\n                React.createElement(c.Button, { w: '3em', h: '3em', onClick: disclosure.onOpen },\n                    React.createElement(BsFullscreen, null))),\n            React.createElement(c.Modal, { closeOnOverlayClick: true, blockScrollOnMount: false, onClose: disclosure.onClose, isOpen: disclosure.isOpen, portalProps: { containerRef: go.root().ref } },\n                React.createElement(c.ModalOverlay, null),\n                React.createElement(c.ModalContent, { w: '80vw', maxW: '80vw', h: '80vh', position: 'relative' },\n                    React.createElement(c.ModalHeader, null, '' + deep.nameLocal(linkId)),\n                    React.createElement(c.ModalBody, { p: 0, position: 'relative' },\n                        React.createElement(go.Editor, { linkId: linkId, fillSize: true },\n                            React.createElement(BsFullscreenExit, null))))));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxDQUFDLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRTtJQUM5QixNQUFNLEVBQUUsZ0JBQWdCLEVBQUUsWUFBWSxFQUFFLEdBQUcsT0FBTyxDQUFDLGdCQUFnQixDQUFDLENBQUM7SUFDckUsTUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBRS9CLE1BQU0sQ0FBQyxHQUFHLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBRXRDLE1BQU0sR0FBRyxHQUFHLG1DQUFtQyxDQUFDO0lBRWhELE9BQU8sQ0FBQyxFQUNOLEVBQUUsRUFDRixNQUFNLEVBRU4sVUFBVSxFQUFFLFlBQVksR0FDekIsRUFBRSxHQUFHLEVBQUUsRUFBRTtRQUNSLE1BQU0sV0FBVyxHQUFHLENBQUMsQ0FBQyxhQUFhLEVBQUUsQ0FBQztRQUN0QyxNQUFNLFVBQVUsR0FBRyxZQUFZLElBQUksV0FBVyxDQUFDO1FBRS9DLE9BQU8sb0JBQUMsRUFBRSxDQUFDLEVBQUUsSUFBQyxFQUFFLEVBQUUsRUFDakI7WUFDRSxDQUFDLFVBQVUsQ0FBQyxNQUFNLElBQUksb0JBQUMsRUFBRSxDQUFDLE1BQU0sSUFBQyxNQUFNLEVBQUUsTUFBTSxFQUFFLFFBQVE7Z0JBQ3hELG9CQUFDLENBQUMsQ0FBQyxNQUFNLElBQUMsQ0FBQyxFQUFDLEtBQUssRUFBQyxDQUFDLEVBQUMsS0FBSyxFQUFDLE9BQU8sRUFBRSxVQUFVLENBQUMsTUFBTTtvQkFDbEQsb0JBQUMsWUFBWSxPQUFFLENBQ04sQ0FDRDtZQUNaLG9CQUFDLENBQUMsQ0FBQyxLQUFLLElBQ04sbUJBQW1CLFFBQUMsa0JBQWtCLEVBQUUsS0FBSyxFQUM3QyxPQUFPLEVBQUUsVUFBVSxDQUFDLE9BQU8sRUFDM0IsTUFBTSxFQUFFLFVBQVUsQ0FBQyxNQUFNLEVBQUUsV0FBVyxFQUFFLEVBQUUsWUFBWSxFQUFFLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxHQUFHLEVBQUU7Z0JBRXZFLG9CQUFDLENBQUMsQ0FBQyxZQUFZLE9BQUc7Z0JBQ2xCLG9CQUFDLENBQUMsQ0FBQyxZQUFZLElBQUMsQ0FBQyxFQUFDLE1BQU0sRUFBQyxJQUFJLEVBQUMsTUFBTSxFQUFDLENBQUMsRUFBQyxNQUFNLEVBQUMsUUFBUSxFQUFDLFVBQVU7b0JBQy9ELG9CQUFDLENBQUMsQ0FBQyxXQUFXLFFBQUUsRUFBRSxHQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQWlCO29CQUMxRCxvQkFBQyxDQUFDLENBQUMsU0FBUyxJQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsUUFBUSxFQUFDLFVBQVU7d0JBQ3BDLG9CQUFDLEVBQUUsQ0FBQyxNQUFNLElBQUMsTUFBTSxFQUFFLE1BQU0sRUFBRSxRQUFROzRCQUNqQyxvQkFBQyxnQkFBZ0IsT0FBRSxDQUNWLENBQ0MsQ0FDQyxDQUNULENBQ0osQ0FBQztJQUNYLENBQUMsQ0FBQztBQUNKLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbIih7IGRlZXAsIGRhdGEsIHJlcXVpcmUsIEdvIH0pID0+IHtcbiAgY29uc3QgeyBCc0Z1bGxzY3JlZW5FeGl0LCBCc0Z1bGxzY3JlZW4gfSA9IHJlcXVpcmUoXCJyZWFjdC1pY29ucy9ic1wiKTtcbiAgY29uc3QgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuICBcbiAgY29uc3QgYyA9IHJlcXVpcmUoJ0BjaGFrcmEtdWkvcmVhY3QnKTtcblxuICBjb25zdCBkcGwgPSAnQGRlZXAtZm91bmRhdGlvbi9wZXJjZXB0aW9uLWxpbmtzJztcblxuICByZXR1cm4gKHtcbiAgICBnbyxcbiAgICBsaW5rSWQsXG5cbiAgICBkaXNjbG9zdXJlOiBfX2Rpc2Nsb3N1cmUsXG4gIH0sIHJlZikgPT4ge1xuICAgIGNvbnN0IF9kaXNjbG9zdXJlID0gYy51c2VEaXNjbG9zdXJlKCk7XG4gICAgY29uc3QgZGlzY2xvc3VyZSA9IF9fZGlzY2xvc3VyZSB8fCBfZGlzY2xvc3VyZTtcblxuICAgIHJldHVybiA8Z28uT24gZG89e3tcbiAgICB9fT5cbiAgICAgIHshZGlzY2xvc3VyZS5pc09wZW4gJiYgPGdvLkVkaXRvciBsaW5rSWQ9e2xpbmtJZH0gZmlsbFNpemU+XG4gICAgICAgIDxjLkJ1dHRvbiB3PSczZW0nIGg9JzNlbScgb25DbGljaz17ZGlzY2xvc3VyZS5vbk9wZW59PlxuICAgICAgICAgIDxCc0Z1bGxzY3JlZW4vPlxuICAgICAgICA8L2MuQnV0dG9uPlxuICAgICAgPC9nby5FZGl0b3I+fVxuICAgICAgPGMuTW9kYWxcbiAgICAgICAgY2xvc2VPbk92ZXJsYXlDbGljayBibG9ja1Njcm9sbE9uTW91bnQ9e2ZhbHNlfVxuICAgICAgICBvbkNsb3NlPXtkaXNjbG9zdXJlLm9uQ2xvc2V9XG4gICAgICAgIGlzT3Blbj17ZGlzY2xvc3VyZS5pc09wZW59IHBvcnRhbFByb3BzPXt7IGNvbnRhaW5lclJlZjogZ28ucm9vdCgpLnJlZiB9fVxuICAgICAgPlxuICAgICAgICA8Yy5Nb2RhbE92ZXJsYXkgLz5cbiAgICAgICAgPGMuTW9kYWxDb250ZW50IHc9JzgwdncnIG1heFc9JzgwdncnIGg9JzgwdmgnIHBvc2l0aW9uPSdyZWxhdGl2ZSc+XG4gICAgICAgICAgPGMuTW9kYWxIZWFkZXI+eycnK2RlZXAubmFtZUxvY2FsKGxpbmtJZCl9PC9jLk1vZGFsSGVhZGVyPlxuICAgICAgICAgIDxjLk1vZGFsQm9keSBwPXswfSBwb3NpdGlvbj0ncmVsYXRpdmUnPlxuICAgICAgICAgICAgPGdvLkVkaXRvciBsaW5rSWQ9e2xpbmtJZH0gZmlsbFNpemU+XG4gICAgICAgICAgICAgIDxCc0Z1bGxzY3JlZW5FeGl0Lz5cbiAgICAgICAgICAgIDwvYy5CdXR0b24+XG4gICAgICAgICAgPC9jLk1vZGFsQm9keT5cbiAgICAgICAgPC9jLk1vZGFsQ29udGVudD5cbiAgICAgIDwvYy5Nb2RhbD5cbiAgICA8L2dvLk9uPjtcbiAgfTtcbn0iXX0=",
        "link_id": 11305
      }
    },
    {
      "id": 11306,
      "type_id": 3,
      "from_id": 11285,
      "to_id": 11305,
      "value": {
        "id": 1455,
        "value": "generated",
        "link_id": 11306
      }
    },
    {
      "id": 11307,
      "type_id": 143,
      "from_id": 11305,
      "to_id": 11285
    },
    {
      "id": 11308,
      "type_id": 3,
      "from_id": 11285,
      "to_id": 11307
    },
    {
      "id": 12266,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1494,
        "value": "async ({ deep, data, require }) => {\n  const React = require('react');\n  const { SiApollographql } = require(\"react-icons/si\");\n  const c = require('@chakra-ui/react');\n\n  const dpl = '@deep-foundation/perception-links';\n  const dc = '@deep-foundation/core';\n\n  const Sandbox = deep.idLocal(dpl, 'Sandbox');\n\n  return ({\n    go,\n    handlerId,\n\n    isActive,\n  }, ref) => {\n    return <go.On do={{\n      exec: (g,v,o) => go.go.do('right', { ...o, id: Sandbox })),\n      click: (g,v,o) => go.do('exec', o),\n      right: (g,v,o) => go.do('exec', o),\n    }}>\n      <c.Button\n        w='3em' h='3em'\n        variant={isActive ? 'active' : undefined}\n        onClick={() => {\n          go.do('enter');\n        }}\n        ref={ref}\n      >\n        <SiApollographql/>\n      </c.Button>\n    </go.On>;\n  };\n}",
        "link_id": 12266
      }
    },
    {
      "id": 12267,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 12266,
      "value": {
        "id": 1493,
        "value": "MenuSandboxComponent",
        "link_id": 12267
      }
    },
    {
      "id": 12270,
      "type_id": 35,
      "from_id": 145,
      "to_id": 12266
    },
    {
      "id": 12271,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 12270,
      "value": {
        "id": 1495,
        "value": "MenuSandbox",
        "link_id": 12271
      }
    },
    {
      "id": 12272,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1497,
        "value": "async ({ deep, data, require }) => {\n    const React = require('react');\n    const { SiApollographql } = require(\"react-icons/si\");\n    const c = require('@chakra-ui/react');\n    const dpl = '@deep-foundation/perception-links';\n    const dc = '@deep-foundation/core';\n    const Sandbox = deep.idLocal(dpl, 'Sandbox');\n    return ({ go, handlerId, isActive, }, ref) => {\n        return React.createElement(go.On, { do: {\n                exec: (g, v, o) => go.go.do('right', { ...o, id: Sandbox }),\n                click: (g, v, o) => go.do('exec', o),\n                right: (g, v, o) => go.do('exec', o),\n            } },\n            React.createElement(c.Button, { w: '3em', h: '3em', variant: isActive ? 'active' : undefined, onClick: () => {\n                    go.do('enter');\n                }, ref: ref },\n                React.createElement(SiApollographql, null)));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxFQUFFLEVBQUU7SUFDaEMsTUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQy9CLE1BQU0sRUFBRSxlQUFlLEVBQUUsR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztJQUN0RCxNQUFNLENBQUMsR0FBRyxPQUFPLENBQUMsa0JBQWtCLENBQUMsQ0FBQztJQUV0QyxNQUFNLEdBQUcsR0FBRyxtQ0FBbUMsQ0FBQztJQUNoRCxNQUFNLEVBQUUsR0FBRyx1QkFBdUIsQ0FBQztJQUVuQyxNQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxTQUFTLENBQUMsQ0FBQztJQUU3QyxPQUFPLENBQUMsRUFDTixFQUFFLEVBQ0YsU0FBUyxFQUVULFFBQVEsR0FDVCxFQUFFLEdBQUcsRUFBRSxFQUFFO1FBQ1IsT0FBTyxvQkFBQyxFQUFFLENBQUMsRUFBRSxJQUFDLEVBQUUsRUFBRTtnQkFDaEIsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxFQUFFLEdBQUcsQ0FBQyxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsQ0FBQztnQkFDekQsS0FBSyxFQUFFLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQztnQkFDbEMsS0FBSyxFQUFFLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQzthQUNuQztZQUNDLG9CQUFDLENBQUMsQ0FBQyxNQUFNLElBQ1AsQ0FBQyxFQUFDLEtBQUssRUFBQyxDQUFDLEVBQUMsS0FBSyxFQUNmLE9BQU8sRUFBRSxRQUFRLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUN4QyxPQUFPLEVBQUUsR0FBRyxFQUFFO29CQUNaLEVBQUUsQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLENBQUM7Z0JBQ2pCLENBQUMsRUFDRCxHQUFHLEVBQUUsR0FBRztnQkFFUixvQkFBQyxlQUFlLE9BQUUsQ0FDVCxDQUNMLENBQUM7SUFDWCxDQUFDLENBQUM7QUFDSixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJhc3luYyAoeyBkZWVwLCBkYXRhLCByZXF1aXJlIH0pID0+IHtcbiAgY29uc3QgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuICBjb25zdCB7IFNpQXBvbGxvZ3JhcGhxbCB9ID0gcmVxdWlyZShcInJlYWN0LWljb25zL3NpXCIpO1xuICBjb25zdCBjID0gcmVxdWlyZSgnQGNoYWtyYS11aS9yZWFjdCcpO1xuXG4gIGNvbnN0IGRwbCA9ICdAZGVlcC1mb3VuZGF0aW9uL3BlcmNlcHRpb24tbGlua3MnO1xuICBjb25zdCBkYyA9ICdAZGVlcC1mb3VuZGF0aW9uL2NvcmUnO1xuXG4gIGNvbnN0IFNhbmRib3ggPSBkZWVwLmlkTG9jYWwoZHBsLCAnU2FuZGJveCcpO1xuXG4gIHJldHVybiAoe1xuICAgIGdvLFxuICAgIGhhbmRsZXJJZCxcblxuICAgIGlzQWN0aXZlLFxuICB9LCByZWYpID0+IHtcbiAgICByZXR1cm4gPGdvLk9uIGRvPXt7XG4gICAgICBleGVjOiAoZyx2LG8pID0+IGdvLmdvLmRvKCdyaWdodCcsIHsgLi4ubywgaWQ6IFNhbmRib3ggfSkpLFxuICAgICAgY2xpY2s6IChnLHYsbykgPT4gZ28uZG8oJ2V4ZWMnLCBvKSxcbiAgICAgIHJpZ2h0OiAoZyx2LG8pID0+IGdvLmRvKCdleGVjJywgbyksXG4gICAgfX0+XG4gICAgICA8Yy5CdXR0b25cbiAgICAgICAgdz0nM2VtJyBoPSczZW0nXG4gICAgICAgIHZhcmlhbnQ9e2lzQWN0aXZlID8gJ2FjdGl2ZScgOiB1bmRlZmluZWR9XG4gICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICBnby5kbygnZW50ZXInKTtcbiAgICAgICAgfX1cbiAgICAgICAgcmVmPXtyZWZ9XG4gICAgICA+XG4gICAgICAgIDxTaUFwb2xsb2dyYXBocWwvPlxuICAgICAgPC9jLkJ1dHRvbj5cbiAgICA8L2dvLk9uPjtcbiAgfTtcbn0iXX0=",
        "link_id": 12272
      }
    },
    {
      "id": 12273,
      "type_id": 3,
      "from_id": 12266,
      "to_id": 12272,
      "value": {
        "id": 1496,
        "value": "generated",
        "link_id": 12273
      }
    },
    {
      "id": 12274,
      "type_id": 143,
      "from_id": 12272,
      "to_id": 12266
    },
    {
      "id": 12275,
      "type_id": 3,
      "from_id": 12266,
      "to_id": 12274
    },
    {
      "id": 12489,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1504,
        "value": "({ deep, data, require, Go }) => {\n  const React = require('react');\n  \n  const { ApolloSandbox } = require('@apollo/sandbox/react');\n  const c = require('@chakra-ui/react');\n\n  return ({\n    go,\n\n    requestOptions = {},\n\n    children,\n  }, ref) => {\n    return <go.On do={{\n      use: (g,v,o) => {},\n    }}>\n      <c.Box ref={ref} h='100%' w='100%' sx={{ '& > div': { h: '100%' } }}>\n        <ApolloSandbox\n          initialEndpoint={`http${deep.client.ssl ? 's' : ''}://${deep.client.path}`}\n          initialState={{\n            sharedHeaders: {\n              Authorization: `Bearer ${deep.token}`,\n            },\n          }}\n        />\n      </c.Box>\n    </go.On>;\n  };\n}",
        "link_id": 12489
      }
    },
    {
      "id": 12490,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 12489,
      "value": {
        "id": 1503,
        "value": "SandboxComponent",
        "link_id": 12490
      }
    },
    {
      "id": 12493,
      "type_id": 35,
      "from_id": 145,
      "to_id": 12489
    },
    {
      "id": 12494,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 12493,
      "value": {
        "id": 1505,
        "value": "Sandbox",
        "link_id": 12494
      }
    },
    {
      "id": 12501,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1507,
        "value": "({ deep, data, require, Go }) => {\n    const React = require('react');\n    const { ApolloSandbox } = require('@apollo/sandbox/react');\n    const c = require('@chakra-ui/react');\n    return ({ go, requestOptions = {}, children, }, ref) => {\n        return React.createElement(go.On, { do: {\n                use: (g, v, o) => { },\n            } },\n            React.createElement(c.Box, { ref: ref, h: '100%', w: '100%', sx: { '& > div': { h: '100%' } } },\n                React.createElement(ApolloSandbox, { initialEndpoint: `http${deep.client.ssl ? 's' : ''}://${deep.client.path}`, initialState: {\n                        sharedHeaders: {\n                            Authorization: `Bearer ${deep.token}`,\n                        },\n                    } })));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxDQUFDLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRTtJQUM5QixNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7SUFFL0IsTUFBTSxFQUFFLGFBQWEsRUFBRSxHQUFHLE9BQU8sQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDO0lBQzNELE1BQU0sQ0FBQyxHQUFHLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBRXRDLE9BQU8sQ0FBQyxFQUNOLEVBQUUsRUFFRixjQUFjLEdBQUcsRUFBRSxFQUVuQixRQUFRLEdBQ1QsRUFBRSxHQUFHLEVBQUUsRUFBRTtRQUNSLE9BQU8sb0JBQUMsRUFBRSxDQUFDLEVBQUUsSUFBQyxFQUFFLEVBQUU7Z0JBQ2hCLEdBQUcsRUFBRSxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFFLEVBQUUsR0FBRSxDQUFDO2FBQ25CO1lBQ0Msb0JBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBQyxNQUFNLEVBQUMsQ0FBQyxFQUFDLE1BQU0sRUFBQyxFQUFFLEVBQUUsRUFBRSxTQUFTLEVBQUUsRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLEVBQUU7Z0JBQ2pFLG9CQUFDLGFBQWEsSUFDWixlQUFlLEVBQUUsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLE1BQU0sSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsRUFDMUUsWUFBWSxFQUFFO3dCQUNaLGFBQWEsRUFBRTs0QkFDYixhQUFhLEVBQUUsVUFBVSxJQUFJLENBQUMsS0FBSyxFQUFFO3lCQUN0QztxQkFDRixHQUNELENBQ0ksQ0FDRixDQUFDO0lBQ1gsQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiKHsgZGVlcCwgZGF0YSwgcmVxdWlyZSwgR28gfSkgPT4ge1xuICBjb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG4gIFxuICBjb25zdCB7IEFwb2xsb1NhbmRib3ggfSA9IHJlcXVpcmUoJ0BhcG9sbG8vc2FuZGJveC9yZWFjdCcpO1xuICBjb25zdCBjID0gcmVxdWlyZSgnQGNoYWtyYS11aS9yZWFjdCcpO1xuXG4gIHJldHVybiAoe1xuICAgIGdvLFxuXG4gICAgcmVxdWVzdE9wdGlvbnMgPSB7fSxcblxuICAgIGNoaWxkcmVuLFxuICB9LCByZWYpID0+IHtcbiAgICByZXR1cm4gPGdvLk9uIGRvPXt7XG4gICAgICB1c2U6IChnLHYsbykgPT4ge30sXG4gICAgfX0+XG4gICAgICA8Yy5Cb3ggcmVmPXtyZWZ9IGg9JzEwMCUnIHc9JzEwMCUnIHN4PXt7ICcmID4gZGl2JzogeyBoOiAnMTAwJScgfSB9fT5cbiAgICAgICAgPEFwb2xsb1NhbmRib3hcbiAgICAgICAgICBpbml0aWFsRW5kcG9pbnQ9e2BodHRwJHtkZWVwLmNsaWVudC5zc2wgPyAncycgOiAnJ306Ly8ke2RlZXAuY2xpZW50LnBhdGh9YH1cbiAgICAgICAgICBpbml0aWFsU3RhdGU9e3tcbiAgICAgICAgICAgIHNoYXJlZEhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2RlZXAudG9rZW59YCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfX1cbiAgICAgICAgLz5cbiAgICAgIDwvYy5Cb3g+XG4gICAgPC9nby5Pbj47XG4gIH07XG59Il19",
        "link_id": 12501
      }
    },
    {
      "id": 12503,
      "type_id": 3,
      "from_id": 12489,
      "to_id": 12501,
      "value": {
        "id": 1506,
        "value": "generated",
        "link_id": 12503
      }
    },
    {
      "id": 12505,
      "type_id": 143,
      "from_id": 12501,
      "to_id": 12489
    },
    {
      "id": 12506,
      "type_id": 3,
      "from_id": 12489,
      "to_id": 12505
    },
    {
      "id": 12521,
      "type_id": 5258,
      "from_id": 12493,
      "to_id": 5605
    },
    {
      "id": 12522,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 12521,
      "value": {
        "id": 1521,
        "value": "compatableLayerSandbox",
        "link_id": 12522
      }
    },
    {
      "id": 12529,
      "type_id": 5258,
      "from_id": 12270,
      "to_id": 5240
    },
    {
      "id": 12530,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 12529,
      "value": {
        "id": 1583,
        "value": "compatableMenuSanbox",
        "link_id": 12530
      }
    },
    {
      "id": 12668,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1509,
        "value": "async ({ deep, data, require }) => {\n  const React = require('react');\n  const { GrGraphQl } = require(\"react-icons/gr\");\n  const c = require('@chakra-ui/react');\n\n  const dpl = '@deep-foundation/perception-links';\n  const dc = '@deep-foundation/core';\n\n  const Layer = deep.idLocal(dpl, 'Layer');\n  const Graphql = deep.idLocal(dpl, 'Graphql');\n\n  return ({\n    go,\n    handlerId,\n\n    isActive,\n  }, ref) => {\n    return <go.Provider onDo={{\n      space: () => go.go.go.focus(Layer).go(Layer).focus(Graphql),\n      enter: () => go.go.go.focus(Layer).go(Layer).focus(Graphql),\n    }}>\n      <c.Button\n        w='3em' h='3em'\n        variant={isActive ? 'active' : undefined}\n        onClick={() => {\n          go.go.focus(handlerId);\n          go.do('enter');\n        }}\n        ref={ref}\n      >\n        <GrGraphQl/>\n      </c.Button>\n    </go.Provider>;\n  };\n}",
        "link_id": 12668
      }
    },
    {
      "id": 12669,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 12668,
      "value": {
        "id": 1508,
        "value": "MenuGraphqlComponent",
        "link_id": 12669
      }
    },
    {
      "id": 12674,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1512,
        "value": "async ({ deep, data, require }) => {\n    const React = require('react');\n    const { GrGraphQl } = require(\"react-icons/gr\");\n    const c = require('@chakra-ui/react');\n    const dpl = '@deep-foundation/perception-links';\n    const dc = '@deep-foundation/core';\n    const Layer = deep.idLocal(dpl, 'Layer');\n    const Graphql = deep.idLocal(dpl, 'Graphql');\n    return ({ go, handlerId, isActive, }, ref) => {\n        return React.createElement(go.Provider, { onDo: {\n                space: () => go.go.go.focus(Layer).go(Layer).focus(Graphql),\n                enter: () => go.go.go.focus(Layer).go(Layer).focus(Graphql),\n            } },\n            React.createElement(c.Button, { w: '3em', h: '3em', variant: isActive ? 'active' : undefined, onClick: () => {\n                    go.go.focus(handlerId);\n                    go.do('enter');\n                }, ref: ref },\n                React.createElement(GrGraphQl, null)));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxFQUFFLEVBQUU7SUFDaEMsTUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQy9CLE1BQU0sRUFBRSxTQUFTLEVBQUUsR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztJQUNoRCxNQUFNLENBQUMsR0FBRyxPQUFPLENBQUMsa0JBQWtCLENBQUMsQ0FBQztJQUV0QyxNQUFNLEdBQUcsR0FBRyxtQ0FBbUMsQ0FBQztJQUNoRCxNQUFNLEVBQUUsR0FBRyx1QkFBdUIsQ0FBQztJQUVuQyxNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxPQUFPLENBQUMsQ0FBQztJQUN6QyxNQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxTQUFTLENBQUMsQ0FBQztJQUU3QyxPQUFPLENBQUMsRUFDTixFQUFFLEVBQ0YsU0FBUyxFQUVULFFBQVEsR0FDVCxFQUFFLEdBQUcsRUFBRSxFQUFFO1FBQ1IsT0FBTyxvQkFBQyxFQUFFLENBQUMsUUFBUSxJQUFDLElBQUksRUFBRTtnQkFDeEIsS0FBSyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQztnQkFDM0QsS0FBSyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQzthQUM1RDtZQUNDLG9CQUFDLENBQUMsQ0FBQyxNQUFNLElBQ1AsQ0FBQyxFQUFDLEtBQUssRUFBQyxDQUFDLEVBQUMsS0FBSyxFQUNmLE9BQU8sRUFBRSxRQUFRLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUN4QyxPQUFPLEVBQUUsR0FBRyxFQUFFO29CQUNaLEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDO29CQUN2QixFQUFFLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxDQUFDO2dCQUNqQixDQUFDLEVBQ0QsR0FBRyxFQUFFLEdBQUc7Z0JBRVIsb0JBQUMsU0FBUyxPQUFFLENBQ0gsQ0FDQyxDQUFDO0lBQ2pCLENBQUMsQ0FBQztBQUNKLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImFzeW5jICh7IGRlZXAsIGRhdGEsIHJlcXVpcmUgfSkgPT4ge1xuICBjb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG4gIGNvbnN0IHsgR3JHcmFwaFFsIH0gPSByZXF1aXJlKFwicmVhY3QtaWNvbnMvZ3JcIik7XG4gIGNvbnN0IGMgPSByZXF1aXJlKCdAY2hha3JhLXVpL3JlYWN0Jyk7XG5cbiAgY29uc3QgZHBsID0gJ0BkZWVwLWZvdW5kYXRpb24vcGVyY2VwdGlvbi1saW5rcyc7XG4gIGNvbnN0IGRjID0gJ0BkZWVwLWZvdW5kYXRpb24vY29yZSc7XG5cbiAgY29uc3QgTGF5ZXIgPSBkZWVwLmlkTG9jYWwoZHBsLCAnTGF5ZXInKTtcbiAgY29uc3QgR3JhcGhxbCA9IGRlZXAuaWRMb2NhbChkcGwsICdHcmFwaHFsJyk7XG5cbiAgcmV0dXJuICh7XG4gICAgZ28sXG4gICAgaGFuZGxlcklkLFxuXG4gICAgaXNBY3RpdmUsXG4gIH0sIHJlZikgPT4ge1xuICAgIHJldHVybiA8Z28uUHJvdmlkZXIgb25Ebz17e1xuICAgICAgc3BhY2U6ICgpID0+IGdvLmdvLmdvLmZvY3VzKExheWVyKS5nbyhMYXllcikuZm9jdXMoR3JhcGhxbCksXG4gICAgICBlbnRlcjogKCkgPT4gZ28uZ28uZ28uZm9jdXMoTGF5ZXIpLmdvKExheWVyKS5mb2N1cyhHcmFwaHFsKSxcbiAgICB9fT5cbiAgICAgIDxjLkJ1dHRvblxuICAgICAgICB3PSczZW0nIGg9JzNlbSdcbiAgICAgICAgdmFyaWFudD17aXNBY3RpdmUgPyAnYWN0aXZlJyA6IHVuZGVmaW5lZH1cbiAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgIGdvLmdvLmZvY3VzKGhhbmRsZXJJZCk7XG4gICAgICAgICAgZ28uZG8oJ2VudGVyJyk7XG4gICAgICAgIH19XG4gICAgICAgIHJlZj17cmVmfVxuICAgICAgPlxuICAgICAgICA8R3JHcmFwaFFsLz5cbiAgICAgIDwvYy5CdXR0b24+XG4gICAgPC9nby5Qcm92aWRlcj47XG4gIH07XG59Il19",
        "link_id": 12674
      }
    },
    {
      "id": 12675,
      "type_id": 3,
      "from_id": 12668,
      "to_id": 12674,
      "value": {
        "id": 1511,
        "value": "generated",
        "link_id": 12675
      }
    },
    {
      "id": 12676,
      "type_id": 143,
      "from_id": 12674,
      "to_id": 12668
    },
    {
      "id": 12677,
      "type_id": 3,
      "from_id": 12668,
      "to_id": 12676
    },
    {
      "id": 12733,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1514,
        "value": "({ deep, data, require, Go }) => {\n  const React = require('react');\n  const { GraphQL } = require('@deep-foundation/perception-app');\n  \n  const c = require('@chakra-ui/react');\n\n  return ({\n    go,\n\n    children,\n  }, ref) => {\n    // console.log('GraphQL', GraphQL)\n    return <go.Provider\n      onDo={{\n        focus: () => go.set('current').go.scroll(),\n        enter: () => {},\n        space: () => {},\n        return: () => {},\n        left: () => {},\n        up: () => {},\n        right: () => {},\n        down: () => {},\n      }}\n    >\n      <GraphQL deep={deep}/>\n    </go.Provider>;\n  };\n}",
        "link_id": 12733
      }
    },
    {
      "id": 12734,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 12733,
      "value": {
        "id": 1513,
        "value": "GraphqlComponent",
        "link_id": 12734
      }
    },
    {
      "id": 12741,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1517,
        "value": "({ deep, data, require, Go }) => {\n    const React = require('react');\n    const { GraphQL } = require('@deep-foundation/perception-app');\n    const c = require('@chakra-ui/react');\n    return ({ go, children, }, ref) => {\n        return React.createElement(go.Provider, { onDo: {\n                focus: () => go.set('current').go.scroll(),\n                enter: () => { },\n                space: () => { },\n                return: () => { },\n                left: () => { },\n                up: () => { },\n                right: () => { },\n                down: () => { },\n            } },\n            React.createElement(GraphQL, { deep: deep }));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxDQUFDLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRTtJQUM5QixNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDL0IsTUFBTSxFQUFFLE9BQU8sRUFBRSxHQUFHLE9BQU8sQ0FBQyxpQ0FBaUMsQ0FBQyxDQUFDO0lBRS9ELE1BQU0sQ0FBQyxHQUFHLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBRXRDLE9BQU8sQ0FBQyxFQUNOLEVBQUUsRUFFRixRQUFRLEdBQ1QsRUFBRSxHQUFHLEVBQUUsRUFBRTtRQUVSLE9BQU8sb0JBQUMsRUFBRSxDQUFDLFFBQVEsSUFDakIsSUFBSSxFQUFFO2dCQUNKLEtBQUssRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUU7Z0JBQzFDLEtBQUssRUFBRSxHQUFHLEVBQUUsR0FBRSxDQUFDO2dCQUNmLEtBQUssRUFBRSxHQUFHLEVBQUUsR0FBRSxDQUFDO2dCQUNmLE1BQU0sRUFBRSxHQUFHLEVBQUUsR0FBRSxDQUFDO2dCQUNoQixJQUFJLEVBQUUsR0FBRyxFQUFFLEdBQUUsQ0FBQztnQkFDZCxFQUFFLEVBQUUsR0FBRyxFQUFFLEdBQUUsQ0FBQztnQkFDWixLQUFLLEVBQUUsR0FBRyxFQUFFLEdBQUUsQ0FBQztnQkFDZixJQUFJLEVBQUUsR0FBRyxFQUFFLEdBQUUsQ0FBQzthQUNmO1lBRUQsb0JBQUMsT0FBTyxJQUFDLElBQUksRUFBRSxJQUFJLEdBQUcsQ0FDVixDQUFDO0lBQ2pCLENBQUMsQ0FBQztBQUNKLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbIih7IGRlZXAsIGRhdGEsIHJlcXVpcmUsIEdvIH0pID0+IHtcbiAgY29uc3QgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuICBjb25zdCB7IEdyYXBoUUwgfSA9IHJlcXVpcmUoJ0BkZWVwLWZvdW5kYXRpb24vcGVyY2VwdGlvbi1hcHAnKTtcbiAgXG4gIGNvbnN0IGMgPSByZXF1aXJlKCdAY2hha3JhLXVpL3JlYWN0Jyk7XG5cbiAgcmV0dXJuICh7XG4gICAgZ28sXG5cbiAgICBjaGlsZHJlbixcbiAgfSwgcmVmKSA9PiB7XG4gICAgLy8gY29uc29sZS5sb2coJ0dyYXBoUUwnLCBHcmFwaFFMKVxuICAgIHJldHVybiA8Z28uUHJvdmlkZXJcbiAgICAgIG9uRG89e3tcbiAgICAgICAgZm9jdXM6ICgpID0+IGdvLnNldCgnY3VycmVudCcpLmdvLnNjcm9sbCgpLFxuICAgICAgICBlbnRlcjogKCkgPT4ge30sXG4gICAgICAgIHNwYWNlOiAoKSA9PiB7fSxcbiAgICAgICAgcmV0dXJuOiAoKSA9PiB7fSxcbiAgICAgICAgbGVmdDogKCkgPT4ge30sXG4gICAgICAgIHVwOiAoKSA9PiB7fSxcbiAgICAgICAgcmlnaHQ6ICgpID0+IHt9LFxuICAgICAgICBkb3duOiAoKSA9PiB7fSxcbiAgICAgIH19XG4gICAgPlxuICAgICAgPEdyYXBoUUwgZGVlcD17ZGVlcH0vPlxuICAgIDwvZ28uUHJvdmlkZXI+O1xuICB9O1xufSJdfQ==",
        "link_id": 12741
      }
    },
    {
      "id": 12742,
      "type_id": 3,
      "from_id": 12733,
      "to_id": 12741,
      "value": {
        "id": 1516,
        "value": "generated",
        "link_id": 12742
      }
    },
    {
      "id": 12743,
      "type_id": 143,
      "from_id": 12741,
      "to_id": 12733
    },
    {
      "id": 12744,
      "type_id": 3,
      "from_id": 12733,
      "to_id": 12743
    },
    {
      "id": 13039,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1523,
        "value": "({ deep, data, require, Go }) => {\n  const { MdEdit, MdPreview, MdSaveAlt } = require(\"react-icons/md\");\n  const React = require('react');\n\n  const {\n    TypedIcon, DownIcon, UpIcon, TypeIcon, InIcon, OutIcon, FromIcon, ToIcon,\n    useSymbol,\n  } = require('@deep-foundation/perception-app');\n  \n  const c = require('@chakra-ui/react');\n\n  const dpl = '@deep-foundation/perception-links';\n  const dc = '@deep-foundation/core';\n  \n  const History = deep.idLocal(dpl, 'History');\n  const Header = deep.idLocal(dpl, 'Header');\n  const Search = deep.idLocal(dpl, 'Search');\n  const TreeQuery = deep.idLocal(dpl, 'TreeQuery');\n  const TreeList = deep.idLocal(dpl, 'TreeList');\n  const TreeLink = deep.idLocal(dpl, 'TreeLink');\n  const TreeLinkInsert = deep.idLocal(dpl, 'TreeLinkInsert');\n  const TreeLinkDelete = deep.idLocal(dpl, 'TreeLinkDelete');\n  const TreeLinkButton = deep.idLocal(dpl, 'TreeLinkButton');\n\n  const _Item = ({ link, isActive, isConcentrated, Item, direction, startProps }) => {\n    const go = Go.useGo();\n    return <c.Box ref={go.ref} {...(direction === 'vertical' ? { w: '100%' } : { h: '100%' })}>\n      {!!Item ? <Item link={link} go={go} isActive={isActive} {...startProps}\n        isConcentrated={isConcentrated}\n      /> : <go.Handler\n        handlerId={TreeLinkButton} linkId={link.id} variant='full' {...startProps}\n        isActive={isActive} {...(direction === 'vertical' ? { w: '100%' } : { h: '100%' })}\n        isConcentrated={isConcentrated}\n      />}\n    </c.Box>;\n  }\n\n  const startPropsPlaceholder = {};\n\n  return ({\n    go,\n    handlerId,\n\n    links = [],\n    Item = _Item,\n\n    direction = 'vertical', // 'vertical' | 'horizontal'\n\n    using = false,\n    saveHistory = false,\n\n    startProps = {},\n\n    concentrated,\n\n    children,\n  }, ref) => {\n    const list = links.map((link, i) => !!link ? <go.Provider key={`${link?.id}`} linkId={link.id}>\n      <_Item\n        link={link} isActive={go.value === link.id} Item={Item}\n        direction={direction} saveHistory={saveHistory}\n        startProps={!i ? startProps : startPropsPlaceholder}\n        isConcentrated={concentrated ? !!concentrated[link.id] : undefined}\n      />\n    </go.Provider> : <React.Fragment/>);\n\n    const content = direction === 'vertical' ? <c.VStack ref={ref}\n      overflowY='scroll' overflowX='hidden'\n      css={go.noScrollBar} flex={1}\n      w='100%' h='100%'\n    >\n      {list}\n      {children}\n    </c.VStack> : <c.HStack ref={ref}\n      overflowX='scroll' overflowY='hidden'\n      css={go.noScrollBar} flex={1}\n      w='100%' h='100%'\n    >\n      {list}\n      {children}\n    </c.HStack>;\n\n    React.useEffect(() => {\n      if (go?.current) {\n        if (using && go.root()?.data?.usedId != go.value) go.root().do('use', { id: go.value });\n        go.do('changed', { id: go.value });\n        go?.current?.scroll();\n      }\n    }, [go.value]);\n\n    const events = direction === 'vertical' ? {\n      up: (g,v,o) => {\n        if (o?.hotkeyEvent?.meta || o?.hotkeyEvent?.shift || o?.hotkeyEvent?.ctrl || o?.hotkeyEvent?.alt) {\n          go.focus(links?.[0]?.id);\n        } else go.value === links?.[0]?.id ? go.go.do('up') : go.focus(go.prev(links));\n      },\n      down: (g,v,o) => {\n        if (o?.hotkeyEvent?.meta || o?.hotkeyEvent?.shift || o?.hotkeyEvent?.ctrl || o?.hotkeyEvent?.alt) {\n          go.focus(links?.[links.length - 1]?.id);\n        } else go.value === links?.[links.length - 1]?.id ? go.go.do('down') : go.focus(go.next(links));\n      },\n    } : {\n      left: (g,v,o) => {\n        if (o?.hotkeyEvent?.meta || o?.hotkeyEvent?.shift || o?.hotkeyEvent?.ctrl || o?.hotkeyEvent?.alt) {\n          go.focus(links?.[0]?.id);\n        } else go.value === links?.[0]?.id ? go.go.do('left') : go.focus(go.prev(links));\n      },\n      right: (g,v,o) => {\n        if (o?.hotkeyEvent?.meta || o?.hotkeyEvent?.shift || o?.hotkeyEvent?.ctrl || o?.hotkeyEvent?.alt) {\n          go.focus(links?.[links.length - 1]?.id);\n        } else go.value === links?.[links.length - 1]?.id ? go.go.do('right') : go.focus(go.next(links));\n      },\n    };\n\n    return <go.On\n      do={{\n        focus: (g,d,v,o) => !v && go.set(o?.id ? o?.id : links?.[0]?.id),\n        use: (g,v,o) => o?.id && o?.id != go.value && go(o?.id) && go.set(o.id).go(o?.id).go?.scroll().go?.do('use'),\n        exec: (g,v,o) => (o?.id || go.value) && go.set(o?.id || go.value).go.go.do('exec', { id: o?.id || go.value })\n        ...events,\n      }}\n    >\n      {content}\n    </go.On>\n  };\n}\n",
        "link_id": 13039
      }
    },
    {
      "id": 13040,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 13039,
      "value": {
        "id": 1522,
        "value": "StackComponent",
        "link_id": 13040
      }
    },
    {
      "id": 13043,
      "type_id": 35,
      "from_id": 145,
      "to_id": 13039
    },
    {
      "id": 13044,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 13043,
      "value": {
        "id": 1524,
        "value": "Stack",
        "link_id": 13044
      }
    },
    {
      "id": 13045,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1526,
        "value": "({ deep, data, require, Go }) => {\n    const { MdEdit, MdPreview, MdSaveAlt } = require(\"react-icons/md\");\n    const React = require('react');\n    const { TypedIcon, DownIcon, UpIcon, TypeIcon, InIcon, OutIcon, FromIcon, ToIcon, useSymbol, } = require('@deep-foundation/perception-app');\n    const c = require('@chakra-ui/react');\n    const dpl = '@deep-foundation/perception-links';\n    const dc = '@deep-foundation/core';\n    const History = deep.idLocal(dpl, 'History');\n    const Header = deep.idLocal(dpl, 'Header');\n    const Search = deep.idLocal(dpl, 'Search');\n    const TreeQuery = deep.idLocal(dpl, 'TreeQuery');\n    const TreeList = deep.idLocal(dpl, 'TreeList');\n    const TreeLink = deep.idLocal(dpl, 'TreeLink');\n    const TreeLinkInsert = deep.idLocal(dpl, 'TreeLinkInsert');\n    const TreeLinkDelete = deep.idLocal(dpl, 'TreeLinkDelete');\n    const TreeLinkButton = deep.idLocal(dpl, 'TreeLinkButton');\n    const _Item = ({ link, isActive, isConcentrated, Item, direction, startProps }) => {\n        const go = Go.useGo();\n        return React.createElement(c.Box, { ref: go.ref, ...(direction === 'vertical' ? { w: '100%' } : { h: '100%' }) }, !!Item ? React.createElement(Item, { link: link, go: go, isActive: isActive, ...startProps, isConcentrated: isConcentrated }) : React.createElement(go.Handler, { handlerId: TreeLinkButton, linkId: link.id, variant: 'full', ...startProps, isActive: isActive, ...(direction === 'vertical' ? { w: '100%' } : { h: '100%' }), isConcentrated: isConcentrated }));\n    };\n    const startPropsPlaceholder = {};\n    return ({ go, handlerId, links = [], Item = _Item, direction = 'vertical', using = false, saveHistory = false, startProps = {}, concentrated, children, }, ref) => {\n        const list = links.map((link, i) => !!link ? React.createElement(go.Provider, { key: `${link?.id}`, linkId: link.id },\n            React.createElement(_Item, { link: link, isActive: go.value === link.id, Item: Item, direction: direction, saveHistory: saveHistory, startProps: !i ? startProps : startPropsPlaceholder, isConcentrated: concentrated ? !!concentrated[link.id] : undefined })) : React.createElement(React.Fragment, null));\n        const content = direction === 'vertical' ? React.createElement(c.VStack, { ref: ref, overflowY: 'scroll', overflowX: 'hidden', css: go.noScrollBar, flex: 1, w: '100%', h: '100%' },\n            list,\n            children) : React.createElement(c.HStack, { ref: ref, overflowX: 'scroll', overflowY: 'hidden', css: go.noScrollBar, flex: 1, w: '100%', h: '100%' },\n            list,\n            children);\n        React.useEffect(() => {\n            if (go?.current) {\n                if (using && go.root()?.data?.usedId != go.value)\n                    go.root().do('use', { id: go.value });\n                go.do('changed', { id: go.value });\n                go?.current?.scroll();\n            }\n        }, [go.value]);\n        const events = direction === 'vertical' ? {\n            up: (g, v, o) => {\n                if (o?.hotkeyEvent?.meta || o?.hotkeyEvent?.shift || o?.hotkeyEvent?.ctrl || o?.hotkeyEvent?.alt) {\n                    go.focus(links?.[0]?.id);\n                }\n                else\n                    go.value === links?.[0]?.id ? go.go.do('up') : go.focus(go.prev(links));\n            },\n            down: (g, v, o) => {\n                if (o?.hotkeyEvent?.meta || o?.hotkeyEvent?.shift || o?.hotkeyEvent?.ctrl || o?.hotkeyEvent?.alt) {\n                    go.focus(links?.[links.length - 1]?.id);\n                }\n                else\n                    go.value === links?.[links.length - 1]?.id ? go.go.do('down') : go.focus(go.next(links));\n            },\n        } : {\n            left: (g, v, o) => {\n                if (o?.hotkeyEvent?.meta || o?.hotkeyEvent?.shift || o?.hotkeyEvent?.ctrl || o?.hotkeyEvent?.alt) {\n                    go.focus(links?.[0]?.id);\n                }\n                else\n                    go.value === links?.[0]?.id ? go.go.do('left') : go.focus(go.prev(links));\n            },\n            right: (g, v, o) => {\n                if (o?.hotkeyEvent?.meta || o?.hotkeyEvent?.shift || o?.hotkeyEvent?.ctrl || o?.hotkeyEvent?.alt) {\n                    go.focus(links?.[links.length - 1]?.id);\n                }\n                else\n                    go.value === links?.[links.length - 1]?.id ? go.go.do('right') : go.focus(go.next(links));\n            },\n        };\n        return React.createElement(go.On, { do: {\n                focus: (g, d, v, o) => !v && go.set(o?.id ? o?.id : links?.[0]?.id),\n                use: (g, v, o) => o?.id && o?.id != go.value && go(o?.id) && go.set(o.id).go(o?.id).go?.scroll().go?.do('use'),\n                exec: (g, v, o) => (o?.id || go.value) && go.set(o?.id || go.value).go.go.do('exec', { id: o?.id || go.value }),\n                ...events,\n            } }, content);\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxDQUFDLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRTtJQUM5QixNQUFNLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztJQUNuRSxNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7SUFFL0IsTUFBTSxFQUNKLFNBQVMsRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQ3hFLFNBQVMsR0FDVixHQUFHLE9BQU8sQ0FBQyxpQ0FBaUMsQ0FBQyxDQUFDO0lBRS9DLE1BQU0sQ0FBQyxHQUFHLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBRXRDLE1BQU0sR0FBRyxHQUFHLG1DQUFtQyxDQUFDO0lBQ2hELE1BQU0sRUFBRSxHQUFHLHVCQUF1QixDQUFDO0lBRW5DLE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLFNBQVMsQ0FBQyxDQUFDO0lBQzdDLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLFFBQVEsQ0FBQyxDQUFDO0lBQzNDLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLFFBQVEsQ0FBQyxDQUFDO0lBQzNDLE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLFdBQVcsQ0FBQyxDQUFDO0lBQ2pELE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLFVBQVUsQ0FBQyxDQUFDO0lBQy9DLE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxP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QU0sR0FBRyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztnQkFDMUMsQ0FBQzs7b0JBQU0sRUFBRSxDQUFDLEtBQUssS0FBSyxLQUFLLEVBQUUsQ0FBQyxLQUFLLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO1lBQ25HLENBQUM7U0FDRixDQUFDO1FBRUYsT0FBTyxvQkFBQyxFQUFFLENBQUMsRUFBRSxJQUNYLEVBQUUsRUFBRTtnQkFDRixLQUFLLEVBQUUsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDO2dCQUNoRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxJQUFJLEVBQUUsQ0FBQyxLQUFLLElBQUksRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEtBQUssQ0FBQztnQkFDNUcsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsSUFBSSxFQUFFLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsRUFBRSxJQUFJLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsSUFBSSxFQUFFLENBQUMsS0FBSyxFQUFFLENBQUM7Z0JBQzdHLEdBQUcsTUFBTTthQUNWLElBRUEsT0FBTyxDQUNGLENBQUE7SUFDVixDQUFDLENBQUM7QUFDSixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIoeyBkZWVwLCBkYXRhLCByZXF1aXJlLCBHbyB9KSA9PiB7XG4gIGNvbnN0IHsgTWRFZGl0LCBNZFByZXZpZXcsIE1kU2F2ZUFsdCB9ID0gcmVxdWlyZShcInJlYWN0LWljb25zL21kXCIpO1xuICBjb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG5cbiAgY29uc3Qge1xuICAgIFR5cGVkSWNvbiwgRG93bkljb24sIFVwSWNvbiwgVHlwZUljb24sIEluSWNvbiwgT3V0SWNvbiwgRnJvbUljb24sIFRvSWNvbixcbiAgICB1c2VTeW1ib2wsXG4gIH0gPSByZXF1aXJlKCdAZGVlcC1mb3VuZGF0aW9uL3BlcmNlcHRpb24tYXBwJyk7XG4gIFxuICBjb25zdCBjID0gcmVxdWlyZSgnQGNoYWtyYS11aS9yZWFjdCcpO1xuXG4gIGNvbnN0IGRwbCA9ICdAZGVlcC1mb3VuZGF0aW9uL3BlcmNlcHRpb24tbGlua3MnO1xuICBjb25zdCBkYyA9ICdAZGVlcC1mb3VuZGF0aW9uL2NvcmUnO1xuICBcbiAgY29uc3QgSGlzdG9yeSA9IGRlZXAuaWRMb2NhbChkcGwsICdIaXN0b3J5Jyk7XG4gIGNvbnN0IEhlYWRlciA9IGRlZXAuaWRMb2NhbChkcGwsICdIZWFkZXInKTtcbiAgY29uc3QgU2VhcmNoID0gZGVlcC5pZExvY2FsKGRwbCwgJ1NlYXJjaCcpO1xuICBjb25zdCBUcmVlUXVlcnkgPSBkZWVwLmlkTG9jYWwoZHBsLCAnVHJlZVF1ZXJ5Jyk7XG4gIGNvbnN0IFRyZWVMaXN0ID0gZGVlcC5pZExvY2FsKGRwbCwgJ1RyZWVMaXN0Jyk7XG4gIGNvbnN0IFRyZWVMaW5rID0gZGVlcC5pZExvY2FsKGRwbCwgJ1RyZWVMaW5rJyk7XG4gIGNvbnN0IFRyZWVMaW5rSW5zZXJ0ID0gZGVlcC5pZExvY2FsKGRwbCwgJ1RyZWVMaW5rSW5zZXJ0Jyk7XG4gIGNvbnN0IFRyZWVMaW5rRGVsZXRlID0gZGVlcC5pZExvY2FsKGRwbCwgJ1RyZWVMaW5rRGVsZXRlJyk7XG4gIGNvbnN0IFRyZWVMaW5rQnV0dG9uID0gZGVlcC5pZExvY2FsKGRwbCwgJ1RyZWVMaW5rQnV0dG9uJyk7XG5cbiAgY29uc3QgX0l0ZW0gPSAoeyBsaW5rLCBpc0FjdGl2ZSwgaXNDb25jZW50cmF0ZWQsIEl0ZW0sIGRpcmVjdGlvbiwgc3RhcnRQcm9wcyB9KSA9PiB7XG4gICAgY29uc3QgZ28gPSBHby51c2VHbygpO1xuICAgIHJldHVybiA8Yy5Cb3ggcmVmPXtnby5yZWZ9IHsuLi4oZGlyZWN0aW9uID09PSAndmVydGljYWwnID8geyB3OiAnMTAwJScgfSA6IHsgaDogJzEwMCUnIH0pfT5cbiAgICAgIHshIUl0ZW0gPyA8SXRlbSBsaW5rPXtsaW5rfSBnbz17Z299IGlzQWN0aXZlPXtpc0FjdGl2ZX0gey4uLnN0YXJ0UHJvcHN9XG4gICAgICAgIGlzQ29uY2VudHJhdGVkPXtpc0NvbmNlbnRyYXRlZH1cbiAgICAgIC8+IDogPGdvLkhhbmRsZXJcbiAgICAgICAgaGFuZGxlcklkPXtUcmVlTGlua0J1dHRvbn0gbGlua0lkPXtsaW5rLmlkfSB2YXJpYW50PSdmdWxsJyB7Li4uc3RhcnRQcm9wc31cbiAgICAgICAgaXNBY3RpdmU9e2lzQWN0aXZlfSB7Li4uKGRpcmVjdGlvbiA9PT0gJ3ZlcnRpY2FsJyA/IHsgdzogJzEwMCUnIH0gOiB7IGg6ICcxMDAlJyB9KX1cbiAgICAgICAgaXNDb25jZW50cmF0ZWQ9e2lzQ29uY2VudHJhdGVkfVxuICAgICAgLz59XG4gICAgPC9jLkJveD47XG4gIH1cblxuICBjb25zdCBzdGFydFByb3BzUGxhY2Vob2xkZXIgPSB7fTtcblxuICByZXR1cm4gKHtcbiAgICBnbyxcbiAgICBoYW5kbGVySWQsXG5cbiAgICBsaW5rcyA9IFtdLFxuICAgIEl0ZW0gPSBfSXRlbSxcblxuICAgIGRpcmVjdGlvbiA9ICd2ZXJ0aWNhbCcsIC8vICd2ZXJ0aWNhbCcgfCAnaG9yaXpvbnRhbCdcblxuICAgIHVzaW5nID0gZmFsc2UsXG4gICAgc2F2ZUhpc3RvcnkgPSBmYWxzZSxcblxuICAgIHN0YXJ0UHJvcHMgPSB7fSxcblxuICAgIGNvbmNlbnRyYXRlZCxcblxuICAgIGNoaWxkcmVuLFxuICB9LCByZWYpID0+IHtcbiAgICBjb25zdCBsaXN0ID0gbGlua3MubWFwKChsaW5rLCBpKSA9PiAhIWxpbmsgPyA8Z28uUHJvdmlkZXIga2V5PXtgJHtsaW5rPy5pZH1gfSBsaW5rSWQ9e2xpbmsuaWR9PlxuICAgICAgPF9JdGVtXG4gICAgICAgIGxpbms9e2xpbmt9IGlzQWN0aXZlPXtnby52YWx1ZSA9PT0gbGluay5pZH0gSXRlbT17SXRlbX1cbiAgICAgICAgZGlyZWN0aW9uPXtkaXJlY3Rpb259IHNhdmVIaXN0b3J5PXtzYXZlSGlzdG9yeX1cbiAgICAgICAgc3RhcnRQcm9wcz17IWkgPyBzdGFydFByb3BzIDogc3RhcnRQcm9wc1BsYWNlaG9sZGVyfVxuICAgICAgICBpc0NvbmNlbnRyYXRlZD17Y29uY2VudHJhdGVkID8gISFjb25jZW50cmF0ZWRbbGluay5pZF0gOiB1bmRlZmluZWR9XG4gICAgICAvPlxuICAgIDwvZ28uUHJvdmlkZXI+IDogPFJlYWN0LkZyYWdtZW50Lz4pO1xuXG4gICAgY29uc3QgY29udGVudCA9IGRpcmVjdGlvbiA9PT0gJ3ZlcnRpY2FsJyA/IDxjLlZTdGFjayByZWY9e3JlZn1cbiAgICAgIG92ZXJmbG93WT0nc2Nyb2xsJyBvdmVyZmxvd1g9J2hpZGRlbidcbiAgICAgIGNzcz17Z28ubm9TY3JvbGxCYXJ9IGZsZXg9ezF9XG4gICAgICB3PScxMDAlJyBoPScxMDAlJ1xuICAgID5cbiAgICAgIHtsaXN0fVxuICAgICAge2NoaWxkcmVufVxuICAgIDwvYy5WU3RhY2s+IDogPGMuSFN0YWNrIHJlZj17cmVmfVxuICAgICAgb3ZlcmZsb3dYPSdzY3JvbGwnIG92ZXJmbG93WT0naGlkZGVuJ1xuICAgICAgY3NzPXtnby5ub1Njcm9sbEJhcn0gZmxleD17MX1cbiAgICAgIHc9JzEwMCUnIGg9JzEwMCUnXG4gICAgPlxuICAgICAge2xpc3R9XG4gICAgICB7Y2hpbGRyZW59XG4gICAgPC9jLkhTdGFjaz47XG5cbiAgICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgaWYgKGdvPy5jdXJyZW50KSB7XG4gICAgICAgIGlmICh1c2luZyAmJiBnby5yb290KCk/LmRhdGE/LnVzZWRJZCAhPSBnby52YWx1ZSkgZ28ucm9vdCgpLmRvKCd1c2UnLCB7IGlkOiBnby52YWx1ZSB9KTtcbiAgICAgICAgZ28uZG8oJ2NoYW5nZWQnLCB7IGlkOiBnby52YWx1ZSB9KTtcbiAgICAgICAgZ28/LmN1cnJlbnQ/LnNjcm9sbCgpO1xuICAgICAgfVxuICAgIH0sIFtnby52YWx1ZV0pO1xuXG4gICAgY29uc3QgZXZlbnRzID0gZGlyZWN0aW9uID09PSAndmVydGljYWwnID8ge1xuICAgICAgdXA6IChnLHYsbykgPT4ge1xuICAgICAgICBpZiAobz8uaG90a2V5RXZlbnQ/Lm1ldGEgfHwgbz8uaG90a2V5RXZlbnQ/LnNoaWZ0IHx8IG8/LmhvdGtleUV2ZW50Py5jdHJsIHx8IG8/LmhvdGtleUV2ZW50Py5hbHQpIHtcbiAgICAgICAgICBnby5mb2N1cyhsaW5rcz8uWzBdPy5pZCk7XG4gICAgICAgIH0gZWxzZSBnby52YWx1ZSA9PT0gbGlua3M/LlswXT8uaWQgPyBnby5nby5kbygndXAnKSA6IGdvLmZvY3VzKGdvLnByZXYobGlua3MpKTtcbiAgICAgIH0sXG4gICAgICBkb3duOiAoZyx2LG8pID0+IHtcbiAgICAgICAgaWYgKG8/LmhvdGtleUV2ZW50Py5tZXRhIHx8IG8/LmhvdGtleUV2ZW50Py5zaGlmdCB8fCBvPy5ob3RrZXlFdmVudD8uY3RybCB8fCBvPy5ob3RrZXlFdmVudD8uYWx0KSB7XG4gICAgICAgICAgZ28uZm9jdXMobGlua3M/LltsaW5rcy5sZW5ndGggLSAxXT8uaWQpO1xuICAgICAgICB9IGVsc2UgZ28udmFsdWUgPT09IGxpbmtzPy5bbGlua3MubGVuZ3RoIC0gMV0/LmlkID8gZ28uZ28uZG8oJ2Rvd24nKSA6IGdvLmZvY3VzKGdvLm5leHQobGlua3MpKTtcbiAgICAgIH0sXG4gICAgfSA6IHtcbiAgICAgIGxlZnQ6IChnLHYsbykgPT4ge1xuICAgICAgICBpZiAobz8uaG90a2V5RXZlbnQ/Lm1ldGEgfHwgbz8uaG90a2V5RXZlbnQ/LnNoaWZ0IHx8IG8/LmhvdGtleUV2ZW50Py5jdHJsIHx8IG8/LmhvdGtleUV2ZW50Py5hbHQpIHtcbiAgICAgICAgICBnby5mb2N1cyhsaW5rcz8uWzBdPy5pZCk7XG4gICAgICAgIH0gZWxzZSBnby52YWx1ZSA9PT0gbGlua3M/LlswXT8uaWQgPyBnby5nby5kbygnbGVmdCcpIDogZ28uZm9jdXMoZ28ucHJldihsaW5rcykpO1xuICAgICAgfSxcbiAgICAgIHJpZ2h0OiAoZyx2LG8pID0+IHtcbiAgICAgICAgaWYgKG8/LmhvdGtleUV2ZW50Py5tZXRhIHx8IG8/LmhvdGtleUV2ZW50Py5zaGlmdCB8fCBvPy5ob3RrZXlFdmVudD8uY3RybCB8fCBvPy5ob3RrZXlFdmVudD8uYWx0KSB7XG4gICAgICAgICAgZ28uZm9jdXMobGlua3M/LltsaW5rcy5sZW5ndGggLSAxXT8uaWQpO1xuICAgICAgICB9IGVsc2UgZ28udmFsdWUgPT09IGxpbmtzPy5bbGlua3MubGVuZ3RoIC0gMV0/LmlkID8gZ28uZ28uZG8oJ3JpZ2h0JykgOiBnby5mb2N1cyhnby5uZXh0KGxpbmtzKSk7XG4gICAgICB9LFxuICAgIH07XG5cbiAgICByZXR1cm4gPGdvLk9uXG4gICAgICBkbz17e1xuICAgICAgICBmb2N1czogKGcsZCx2LG8pID0+ICF2ICYmIGdvLnNldChvPy5pZCA/IG8/LmlkIDogbGlua3M/LlswXT8uaWQpLFxuICAgICAgICB1c2U6IChnLHYsbykgPT4gbz8uaWQgJiYgbz8uaWQgIT0gZ28udmFsdWUgJiYgZ28obz8uaWQpICYmIGdvLnNldChvLmlkKS5nbyhvPy5pZCkuZ28/LnNjcm9sbCgpLmdvPy5kbygndXNlJyksXG4gICAgICAgIGV4ZWM6IChnLHYsbykgPT4gKG8/LmlkIHx8IGdvLnZhbHVlKSAmJiBnby5zZXQobz8uaWQgfHwgZ28udmFsdWUpLmdvLmdvLmRvKCdleGVjJywgeyBpZDogbz8uaWQgfHwgZ28udmFsdWUgfSlcbiAgICAgICAgLi4uZXZlbnRzLFxuICAgICAgfX1cbiAgICA+XG4gICAgICB7Y29udGVudH1cbiAgICA8L2dvLk9uPlxuICB9O1xufVxuIl19",
        "link_id": 13045
      }
    },
    {
      "id": 13046,
      "type_id": 3,
      "from_id": 13039,
      "to_id": 13045,
      "value": {
        "id": 1525,
        "value": "generated",
        "link_id": 13046
      }
    },
    {
      "id": 13047,
      "type_id": 143,
      "from_id": 13045,
      "to_id": 13039
    },
    {
      "id": 13048,
      "type_id": 3,
      "from_id": 13039,
      "to_id": 13047
    },
    {
      "id": 14093,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1538,
        "value": "({ deep, data, require, Go }) => {\n  const { BsCheck2All } = require(\"react-icons/bs\");\n  const React = require('react');\n  \n  const c = require('@chakra-ui/react');\n\n  const dc = '@deep-foundation/core';\n  const dpl = '@deep-foundation/perception-links';\n  \n  const Query = deep.idLocal(dc, 'Query');\n  const Contain = deep.idLocal(dc, 'Contain');\n  const FinderQuery = deep.idLocal(dpl, 'FinderQuery');\n  const Tree = deep.idLocal(dpl, 'Tree');\n  const TreeList = deep.idLocal(dpl, 'TreeList');\n  const Search = deep.idLocal(dpl, 'Search');\n\n  return ({\n    go,\n\n    isActive,\n    saveHistory = false,\n    disclosure: __disclosure,\n    startProps,\n    ...props\n  }, ref) => {\n    const _disclosure = c.useDisclosure();\n    const disclosure = __disclosure || _disclosure;\n\n    React.useEffect(() => () => deep.minilinks.apply([], `deep-perception-finder-${go.__p}`), []);\n    const [queryId, setQueryId] = React.useState(!saveHistory ? 'virtual' : undefined);\n\n    return <go.On\n      do={{\n        open: (g,v,o) => {\n          if (!o?.id) return;\n          disclosure.onClose();\n          go.root().do('open', { id: o?.id, focus: true });\n        },\n        exec: async (g,v,o) => {\n          if (saveHistory) {\n            const { data: [{ id }] } = await deep.insert({\n              type_id: Query,\n              object: {\n                _or: [{ in: { type_id: Contain, string: { value: { _ilike: `%Type%` } } } }],\n              },\n              containerId: deep.linkId,\n              in: {\n                type_id: FinderQuery,\n                from_id: deep.linkId,\n                containerId: deep.linkId,\n              },\n            });\n            await deep.select(id, { apply: `deep-perception-finder-${go.__p}` });\n            setQueryId(id);\n          }\n          disclosure.onOpen();\n          go.focus(Tree);\n        }\n      }}\n    >\n      <c.Button\n        ref={ref} h='3em' w='3em' variant={isActive ? 'active' : null}\n        onClick={() => go.do('exec')}\n        {...props}\n      >🪬</c.Button>\n      {!!queryId && disclosure.isOpen && <go.Component path={[dpl, 'Finder']}\n        disclosure={disclosure} initialId={queryId} initialHandlerId={TreeList}\n        onSubmit={(id) => go.do('open', { id })}\n        startProps={startProps}\n      />}\n    </go.On>;\n  };\n}",
        "link_id": 14093
      }
    },
    {
      "id": 14094,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 14093,
      "value": {
        "id": 1537,
        "value": "FinderButtonComponent",
        "link_id": 14094
      }
    },
    {
      "id": 14097,
      "type_id": 35,
      "from_id": 145,
      "to_id": 14093
    },
    {
      "id": 14098,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 14097,
      "value": {
        "id": 1539,
        "value": "FinderButton",
        "link_id": 14098
      }
    },
    {
      "id": 14099,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1541,
        "value": "({ deep, data, require, Go }) => {\n    const { BsCheck2All } = require(\"react-icons/bs\");\n    const React = require('react');\n    const c = require('@chakra-ui/react');\n    const dc = '@deep-foundation/core';\n    const dpl = '@deep-foundation/perception-links';\n    const Query = deep.idLocal(dc, 'Query');\n    const Contain = deep.idLocal(dc, 'Contain');\n    const FinderQuery = deep.idLocal(dpl, 'FinderQuery');\n    const Tree = deep.idLocal(dpl, 'Tree');\n    const TreeList = deep.idLocal(dpl, 'TreeList');\n    const Search = deep.idLocal(dpl, 'Search');\n    return ({ go, isActive, saveHistory = false, disclosure: __disclosure, startProps, ...props }, ref) => {\n        const _disclosure = c.useDisclosure();\n        const disclosure = __disclosure || _disclosure;\n        React.useEffect(() => () => deep.minilinks.apply([], `deep-perception-finder-${go.__p}`), []);\n        const [queryId, setQueryId] = React.useState(!saveHistory ? 'virtual' : undefined);\n        return React.createElement(go.On, { do: {\n                open: (g, v, o) => {\n                    if (!o?.id)\n                        return;\n                    disclosure.onClose();\n                    go.root().do('open', { id: o?.id, focus: true });\n                },\n                exec: async (g, v, o) => {\n                    if (saveHistory) {\n                        const { data: [{ id }] } = await deep.insert({\n                            type_id: Query,\n                            object: {\n                                _or: [{ in: { type_id: Contain, string: { value: { _ilike: `%Type%` } } } }],\n                            },\n                            containerId: deep.linkId,\n                            in: {\n                                type_id: FinderQuery,\n                                from_id: deep.linkId,\n                                containerId: deep.linkId,\n                            },\n                        });\n                        await deep.select(id, { apply: `deep-perception-finder-${go.__p}` });\n                        setQueryId(id);\n                    }\n                    disclosure.onOpen();\n                    go.focus(Tree);\n                }\n            } },\n            React.createElement(c.Button, { ref: ref, h: '3em', w: '3em', variant: isActive ? 'active' : null, onClick: () => go.do('exec'), ...props }, \"\\uD83E\\uDEAC\"),\n            !!queryId && disclosure.isOpen && React.createElement(go.Component, { path: [dpl, 'Finder'], disclosure: disclosure, initialId: queryId, initialHandlerId: TreeList, onSubmit: (id) => go.do('open', { id }), startProps: startProps }));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxDQUFDLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRTtJQUM5QixNQUFNLEVBQUUsV0FBVyxFQUFFLEdBQUcsT0FBTyxDQUFDLGdCQUFnQixDQUFDLENBQUM7SUFDbEQsTUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBRS9CLE1BQU0sQ0FBQyxHQUFHLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBRXRDLE1BQU0sRUFBRSxHQUFHLHVCQUF1QixDQUFDO0lBQ25DLE1BQU0sR0FBRyxHQUFHLG1DQUFtQyxDQUFDO0lBRWhELE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsRUFBRSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQ3hDLE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsRUFBRSxFQUFFLFNBQVMsQ0FBQyxDQUFDO0lBQzVDLE1BQU0sV0FBVyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLGFBQWEsQ0FBQyxDQUFDO0lBQ3JELE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBQ3ZDLE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLFVBQVUsQ0FBQyxDQUFDO0lBQy9DLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLFFBQVEsQ0FBQyxDQUFDO0lBRTNDLE9BQU8sQ0FBQyxFQUNOLEVBQUUsRUFFRixRQUFRLEVBQ1IsV0FBVyxHQUFHLEtBQUssRUFDbkIsVUFBVSxFQUFFLFlBQVksRUFDeEIsVUFBVSxFQUNWLEdBQUcsS0FBSyxFQUNULEVBQUUsR0FBRyxFQUFFLEVB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RSxRQUFRLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFDdkMsVUFBVSxFQUFFLFVBQVUsR0FDdEIsQ0FDSSxDQUFDO0lBQ1gsQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiKHsgZGVlcCwgZGF0YSwgcmVxdWlyZSwgR28gfSkgPT4ge1xuICBjb25zdCB7IEJzQ2hlY2syQWxsIH0gPSByZXF1aXJlKFwicmVhY3QtaWNvbnMvYnNcIik7XG4gIGNvbnN0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbiAgXG4gIGNvbnN0IGMgPSByZXF1aXJlKCdAY2hha3JhLXVpL3JlYWN0Jyk7XG5cbiAgY29uc3QgZGMgPSAnQGRlZXAtZm91bmRhdGlvbi9jb3JlJztcbiAgY29uc3QgZHBsID0gJ0BkZWVwLWZvdW5kYXRpb24vcGVyY2VwdGlvbi1saW5rcyc7XG4gIFxuICBjb25zdCBRdWVyeSA9IGRlZXAuaWRMb2NhbChkYywgJ1F1ZXJ5Jyk7XG4gIGNvbnN0IENvbnRhaW4gPSBkZWVwLmlkTG9jYWwoZGMsICdDb250YWluJyk7XG4gIGNvbnN0IEZpbmRlclF1ZXJ5ID0gZGVlcC5pZExvY2FsKGRwbCwgJ0ZpbmRlclF1ZXJ5Jyk7XG4gIGNvbnN0IFRyZWUgPSBkZWVwLmlkTG9jYWwoZHBsLCAnVHJlZScpO1xuICBjb25zdCBUcmVlTGlzdCA9IGRlZXAuaWRMb2NhbChkcGwsICdUcmVlTGlzdCcpO1xuICBjb25zdCBTZWFyY2ggPSBkZWVwLmlkTG9jYWwoZHBsLCAnU2VhcmNoJyk7XG5cbiAgcmV0dXJuICh7XG4gICAgZ28sXG5cbiAgICBpc0FjdGl2ZSxcbiAgICBzYXZlSGlzdG9yeSA9IGZhbHNlLFxuICAgIGRpc2Nsb3N1cmU6IF9fZGlzY2xvc3VyZSxcbiAgICBzdGFydFByb3BzLFxuICAgIC4uLnByb3BzXG4gIH0sIHJlZikgPT4ge1xuICAgIGNvbnN0IF9kaXNjbG9zdXJlID0gYy51c2VEaXNjbG9zdXJlKCk7XG4gICAgY29uc3QgZGlzY2xvc3VyZSA9IF9fZGlzY2xvc3VyZSB8fCBfZGlzY2xvc3VyZTtcblxuICAgIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiAoKSA9PiBkZWVwLm1pbmlsaW5rcy5hcHBseShbXSwgYGRlZXAtcGVyY2VwdGlvbi1maW5kZXItJHtnby5fX3B9YCksIFtdKTtcbiAgICBjb25zdCBbcXVlcnlJZCwgc2V0UXVlcnlJZF0gPSBSZWFjdC51c2VTdGF0ZSghc2F2ZUhpc3RvcnkgPyAndmlydHVhbCcgOiB1bmRlZmluZWQpO1xuXG4gICAgcmV0dXJuIDxnby5PblxuICAgICAgZG89e3tcbiAgICAgICAgb3BlbjogKGcsdixvKSA9PiB7XG4gICAgICAgICAgaWYgKCFvPy5pZCkgcmV0dXJuO1xuICAgICAgICAgIGRpc2Nsb3N1cmUub25DbG9zZSgpO1xuICAgICAgICAgIGdvLnJvb3QoKS5kbygnb3BlbicsIHsgaWQ6IG8/LmlkLCBmb2N1czogdHJ1ZSB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgZXhlYzogYXN5bmMgKGcsdixvKSA9PiB7XG4gICAgICAgICAgaWYgKHNhdmVIaXN0b3J5KSB7XG4gICAgICAgICAgICBjb25zdCB7IGRhdGE6IFt7IGlkIH1dIH0gPSBhd2FpdCBkZWVwLmluc2VydCh7XG4gICAgICAgICAgICAgIHR5cGVfaWQ6IFF1ZXJ5LFxuICAgICAgICAgICAgICBvYmplY3Q6IHtcbiAgICAgICAgICAgICAgICBfb3I6IFt7IGluOiB7IHR5cGVfaWQ6IENvbnRhaW4sIHN0cmluZzogeyB2YWx1ZTogeyBfaWxpa2U6IGAlVHlwZSVgIH0gfSB9IH1dLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBjb250YWluZXJJZDogZGVlcC5saW5rSWQsXG4gICAgICAgICAgICAgIGluOiB7XG4gICAgICAgICAgICAgICAgdHlwZV9pZDogRmluZGVyUXVlcnksXG4gICAgICAgICAgICAgICAgZnJvbV9pZDogZGVlcC5saW5rSWQsXG4gICAgICAgICAgICAgICAgY29udGFpbmVySWQ6IGRlZXAubGlua0lkLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhd2FpdCBkZWVwLnNlbGVjdChpZCwgeyBhcHBseTogYGRlZXAtcGVyY2VwdGlvbi1maW5kZXItJHtnby5fX3B9YCB9KTtcbiAgICAgICAgICAgIHNldFF1ZXJ5SWQoaWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBkaXNjbG9zdXJlLm9uT3BlbigpO1xuICAgICAgICAgIGdvLmZvY3VzKFRyZWUpO1xuICAgICAgICB9XG4gICAgICB9fVxuICAgID5cbiAgICAgIDxjLkJ1dHRvblxuICAgICAgICByZWY9e3JlZn0gaD0nM2VtJyB3PSczZW0nIHZhcmlhbnQ9e2lzQWN0aXZlID8gJ2FjdGl2ZScgOiBudWxsfVxuICAgICAgICBvbkNsaWNrPXsoKSA9PiBnby5kbygnZXhlYycpfVxuICAgICAgICB7Li4ucHJvcHN9XG4gICAgICA+8J+qrDwvYy5CdXR0b24+XG4gICAgICB7ISFxdWVyeUlkICYmIGRpc2Nsb3N1cmUuaXNPcGVuICYmIDxnby5Db21wb25lbnQgcGF0aD17W2RwbCwgJ0ZpbmRlciddfVxuICAgICAgICBkaXNjbG9zdXJlPXtkaXNjbG9zdXJlfSBpbml0aWFsSWQ9e3F1ZXJ5SWR9IGluaXRpYWxIYW5kbGVySWQ9e1RyZWVMaXN0fVxuICAgICAgICBvblN1Ym1pdD17KGlkKSA9PiBnby5kbygnb3BlbicsIHsgaWQgfSl9XG4gICAgICAgIHN0YXJ0UHJvcHM9e3N0YXJ0UHJvcHN9XG4gICAgICAvPn1cbiAgICA8L2dvLk9uPjtcbiAgfTtcbn0iXX0=",
        "link_id": 14099
      }
    },
    {
      "id": 14100,
      "type_id": 3,
      "from_id": 14093,
      "to_id": 14099,
      "value": {
        "id": 1540,
        "value": "generated",
        "link_id": 14100
      }
    },
    {
      "id": 14101,
      "type_id": 143,
      "from_id": 14099,
      "to_id": 14093
    },
    {
      "id": 14102,
      "type_id": 3,
      "from_id": 14093,
      "to_id": 14101
    },
    {
      "id": 16175,
      "type_id": 58,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 2305,
        "value": {
          "down": {
            "link_id": {
              "_eq": 5
            },
            "tree_id": {
              "_eq": 40
            }
          }
        },
        "link_id": 16175
      }
    },
    {
      "id": 16176,
      "type_id": 3,
      "from_id": 721,
      "to_id": 16175
    },
    {
      "id": 16177,
      "type_id": 92,
      "from_id": 721,
      "to_id": 16175
    },
    {
      "id": 16178,
      "type_id": 3,
      "from_id": 721,
      "to_id": 16177
    },
    {
      "id": 16179,
      "type_id": 795,
      "from_id": 5,
      "to_id": 16175
    },
    {
      "id": 16180,
      "type_id": 3,
      "from_id": 721,
      "to_id": 16179
    },
    {
      "id": 21743,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1802,
        "value": "async ({ deep, data, Go, require }) => {\n  const React = require('react');\n  const { GrGraphQl } = require(\"react-icons/gr\");\n  const c = require('@chakra-ui/react');\n  const _ = require('lodash');\n\n  const dpl = '@deep-foundation/perception-links';\n  const dc = '@deep-foundation/core';\n\n  return ({\n    go,\n    handlerId,\n\n    isActive,\n  }, ref) => {\n    const View = React.useCallback(({ event }) => {\n      const value = `// query\n${event?.remoteQuery?.query?.queryString || ''}\n\n// variables\n${JSON.stringify(event?.remoteQuery?.query?.variables || {}, null, 2)}\n`\n  \n      return <Go.Editor editable={false} readOnly value={value} fillSize/>;\n    }, []);\n\n    return <go.On do={{\n      exec: (g,v,o) => go.do('view', { id: go.linkId, Component: View })),\n    }}>\n      <c.Button\n        w='3em' h='3em'\n        variant={isActive ? 'active' : undefined}\n        ref={ref}\n        onClick={() => go.do('exec')}\n      >\n        <GrGraphQl/>\n      </c.Button>\n    </go.On>;\n  };\n}",
        "link_id": 21743
      }
    },
    {
      "id": 21744,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 21743,
      "value": {
        "id": 1801,
        "value": "QueriesGQLComponent",
        "link_id": 21744
      }
    },
    {
      "id": 16183,
      "type_id": 58,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 2307,
        "value": {
          "down": {
            "link_id": {
              "_eq": 83
            },
            "tree_id": {
              "_eq": 40
            }
          }
        },
        "link_id": 16183
      }
    },
    {
      "id": 16184,
      "type_id": 3,
      "from_id": 721,
      "to_id": 16183
    },
    {
      "id": 16185,
      "type_id": 92,
      "from_id": 721,
      "to_id": 16183
    },
    {
      "id": 16186,
      "type_id": 3,
      "from_id": 721,
      "to_id": 16185
    },
    {
      "id": 16187,
      "type_id": 795,
      "from_id": 83,
      "to_id": 16183
    },
    {
      "id": 16188,
      "type_id": 3,
      "from_id": 721,
      "to_id": 16187
    },
    {
      "id": 16447,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1611,
        "value": "({ deep, data, require, Go }) => {\n    const React = require('react');\n    const { BsX, BsCheck2 } = require('react-icons/bs');\n    const c = require('@chakra-ui/react');\n    const { useAsyncMemo } = require('use-async-memo');\n    const dc = '@deep-foundation/core';\n    const V = deep.idLocal(dc, 'Value');\n    return ({ go, linkId, containerId, disclosure }, ref) => {\n        if (!disclosure)\n            throw new Error('!disclosure');\n        if (!linkId)\n            throw new Error('!linkId');\n        const link = React.useMemo(() => deep.get(linkId), [linkId]);\n        const [containment, setContainment] = React.useState('contains');\n        const [down, setDown] = React.useState(true);\n        const AllowAdmin = useAsyncMemo(async () => {\n            return await deep.can(deep.linkId, deep.linkId, deep.idLocal(dc, 'AllowAdmin'));\n        }, [], false);\n        const AllowDeleteType = useAsyncMemo(async () => {\n            return !link.type_id ? false : await deep.can(link.type_id, deep.linkId, deep.idLocal(dc, 'AllowDeleteType'));\n        }, [link.type_id], false);\n        const AllowDelete = useAsyncMemo(async () => {\n            return !linkId ? false : await deep.can(linkId, deep.linkId, deep.idLocal(dc, 'AllowDelete'));\n        }, [linkId], false);\n        const can = AllowAdmin || AllowDeleteType || AllowDelete;\n        const deleteQuery = {\n            _or: [\n                (down ? {\n                    up: {\n                        tree_id: deep.idLocal(dc, 'containTree'),\n                        parent_id: link.id,\n                    }\n                } : {\n                    id: link.id,\n                }),\n                ...(containment === 'contains' ? [{\n                        type_id: deep.idLocal(dc, 'Contain'),\n                        to_id: link.id,\n                    }] : containment === 'container' ? [{\n                        type_id: deep.idLocal(dc, 'Contain'),\n                        from_id: containerId,\n                        to_id: link.id,\n                    }] : []),\n            ],\n        };\n        const { data: countDown } = deep.useQuery({\n            up: {\n                tree_id: deep.idLocal(dc, 'containTree'),\n                parent_id: link.id,\n            }\n        }, {\n            skip: !disclosure.isOpen,\n            aggregate: 'count',\n        });\n        const { data: countInContains } = deep.useQuery({\n            to_id: link.id,\n            type_id: deep.idLocal(dc, 'Contain'),\n        }, {\n            skip: !disclosure.isOpen,\n            aggregate: 'count'\n        });\n        const buttons = (React.createElement(React.Fragment, null,\n            React.createElement(c.SlideFade, { in: true, offsetX: '-0.5rem', style: { position: 'absolute', top: 0, right: '-4em' } },\n                React.createElement(c.Button, { w: '3em', h: '3em', boxShadow: 'dark-lg', onClick: disclosure.onClose },\n                    React.createElement(BsX, null))),\n            React.createElement(c.SlideFade, { in: true, offsetX: '-0.5rem', style: { position: 'absolute', bottom: 0, right: '-4em' } },\n                React.createElement(c.Button, { w: '3em', h: '3em', boxShadow: 'dark-lg', variant: 'active', onClick: async () => {\n                        await deep.delete(deleteQuery);\n                        disclosure.onClose();\n                    } },\n                    React.createElement(BsCheck2, null)))));\n        const alert = (React.createElement(React.Fragment, null,\n            React.createElement(c.Alert, { status: can ? 'info' : 'error' },\n                React.createElement(c.AlertIcon, null),\n                React.createElement(c.AlertTitle, null,\n                    \"You \",\n                    can ? 'can' : \"can't\",\n                    \" do it.\")),\n            React.createElement(go.Editor, { value: `await deep.can(deep.linkId, deep.linkId, deep.idLocal('@deep-foundation/core', 'AllowAdmin'))\n// ${AllowAdmin}\nawait deep.can(${link.type_id}, deep.linkId, deep.idLocal('@deep-foundation/core', 'AllowDeleteType'))\n// ${AllowDeleteType}\nawait deep.can(${link.id}, deep.linkId, deep.idLocal('@deep-foundation/core', 'AllowDelete'))\n// ${AllowDelete}`, editable: false, readOnly: true })));\n        return (React.createElement(go.On, { do: {} },\n            React.createElement(c.Modal, { ref: ref, closeOnOverlayClick: true, blockScrollOnMount: false, onClose: disclosure.onClose, isOpen: disclosure.isOpen, portalProps: {\n                    containerRef: go.root().ref\n                } },\n                React.createElement(c.ModalOverlay, null),\n                React.createElement(c.ModalContent, { w: '30em', maxW: '30em', position: 'relative' },\n                    React.createElement(c.ModalHeader, null,\n                        \"Link deleting: \",\n                        `${link}`),\n                    React.createElement(c.ModalBody, { p: 0, w: '100%', h: '100%' },\n                        alert,\n                        React.createElement(c.Box, { p: '1em' },\n                            React.createElement(c.Checkbox, { size: 'lg', checked: down, onChange: () => setDown(!down) },\n                                \"Delete all contained in links? Total: (\",\n                                countDown,\n                                \")\")),\n                        React.createElement(c.Box, { p: '1em' }, \"Need to delete contains to this link?\"),\n                        React.createElement(c.Box, null,\n                            React.createElement(c.SimpleGrid, { columns: 3 },\n                                React.createElement(c.Button, { variant: containment === 'contains' ? 'active' : undefined, onClick: () => setContainment('contains') },\n                                    React.createElement(c.Box, null,\n                                        React.createElement(c.Box, null, \"all in\"),\n                                        React.createElement(c.Box, { fontSize: 'xs' },\n                                            \"contains: (\",\n                                            countInContains,\n                                            \")\"))),\n                                !!containerId && (React.createElement(c.Button, { variant: containment === 'container' ? 'active' : undefined, onClick: () => setContainment('container') },\n                                    React.createElement(c.Box, null,\n                                        React.createElement(c.Box, null, \"only one\"),\n                                        React.createElement(c.Box, { fontSize: 'xs' },\n                                            \"from \",\n                                            containerId)))),\n                                React.createElement(c.Button, { variant: containment === 'only' ? 'active' : undefined, onClick: () => setContainment('only') },\n                                    React.createElement(c.Box, null,\n                                        React.createElement(c.Box, null, \"not need\"),\n                                        React.createElement(c.Box, { fontSize: 'xs' }, \"to delete contains\"))))),\n                        React.createElement(go.Editor, { value: `await deep.delete(${JSON.stringify(deleteQuery, null, 2)})`, editable: false, readOnly: true })),\n                    buttons))));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxDQUFDLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRTtJQUM5QixNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDL0IsTUFBTSxFQUFFLEdBQUcsRUFBRSxRQUFRLEVBQUUsR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztJQUNwRCxNQUFNLENBQUMsR0FBRyxPQUFPLENBQUMsa0JBQWtCLENBQUMsQ0FBQztJQUV0QyxNQUFNLEVBQUUsWUFBWSxFQUFFLEdBQUcsT0FBTyxDQUFDLGdCQUFnQixDQUFDLENBQUM7SUFFbkQsTUFBTSxFQUFFLEdBQUcsdUJBQXVCLENBQUM7SUFDbkMsTUFBTSxDQUFDLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFFcEMsT0FBTyxDQUFDLEVBQUUsRUFBRSxFQUFFLE1BQU0sRUFBRSxXQUFXLEVBQUUsVUFBVSxFQUFFLEVBQUUsR0FBRyxFQUFFLEVBQUU7UUFDdEQsSUFBSSxDQUFDLFVBQVU7WUFBRSxNQUFNLElBQUksS0FBSyxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQ2hELElBQUksQ0FBQyxNQUFNO1lBQUUsTUFBTSxJQUFJLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUV4QyxNQUFNLElBQUksR0FBRyxLQUFLLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO1FBQzdELE1BQU0sQ0FBQyxXQUFXLEVBQUUsY0FBYyxDQUFDLEdBQUcsS0FBSyxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUNqRSxNQUFNLENBQUMsSUFBSSxFQUFF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QWlCO3dDQUN2QixvQkFBQyxDQUFDLENBQUMsR0FBRyxJQUFDLFFBQVEsRUFBQyxJQUFJOzs0Q0FDWixXQUFXLENBQ1gsQ0FDRixDQUNDLENBQ1o7Z0NBQ0Qsb0JBQUMsQ0FBQyxDQUFDLE1BQU0sSUFDUCxPQUFPLEVBQUUsV0FBVyxLQUFLLE1BQU0sQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQ3RELE9BQU8sRUFBRSxHQUFHLEVBQUUsQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDO29DQUVyQyxvQkFBQyxDQUFDLENBQUMsR0FBRzt3Q0FDSixvQkFBQyxDQUFDLENBQUMsR0FBRyxtQkFBaUI7d0NBQ3ZCLG9CQUFDLENBQUMsQ0FBQyxHQUFHLElBQUMsUUFBUSxFQUFDLElBQUkseUJBRVosQ0FDRixDQUNDLENBQ0UsQ0FDVDt3QkFDUixvQkFBQyxFQUFFLENBQUMsTUFBTSxJQUNSLEtBQUssRUFBRSxxQkFBcUIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxXQUFXLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxHQUFHLEVBQ25FLFFBQVEsRUFBRSxLQUFLLEVBQ2YsUUFBUSxTQUNSLENBQ1U7b0JBQ2IsT0FBTyxDQUNPLENBQ1QsQ0FDSixDQUNULENBQUM7SUFDSixDQUFDLENBQUM7QUFDSixDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIoeyBkZWVwLCBkYXRhLCByZXF1aXJlLCBHbyB9KSA9PiB7XG4gIGNvbnN0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbiAgY29uc3QgeyBCc1gsIEJzQ2hlY2syIH0gPSByZXF1aXJlKCdyZWFjdC1pY29ucy9icycpO1xuICBjb25zdCBjID0gcmVxdWlyZSgnQGNoYWtyYS11aS9yZWFjdCcpO1xuXG4gIGNvbnN0IHsgdXNlQXN5bmNNZW1vIH0gPSByZXF1aXJlKCd1c2UtYXN5bmMtbWVtbycpO1xuXG4gIGNvbnN0IGRjID0gJ0BkZWVwLWZvdW5kYXRpb24vY29yZSc7XG4gIGNvbnN0IFYgPSBkZWVwLmlkTG9jYWwoZGMsICdWYWx1ZScpO1xuXG4gIHJldHVybiAoeyBnbywgbGlua0lkLCBjb250YWluZXJJZCwgZGlzY2xvc3VyZSB9LCByZWYpID0+IHtcbiAgICBpZiAoIWRpc2Nsb3N1cmUpIHRocm93IG5ldyBFcnJvcignIWRpc2Nsb3N1cmUnKTtcbiAgICBpZiAoIWxpbmtJZCkgdGhyb3cgbmV3IEVycm9yKCchbGlua0lkJyk7XG5cbiAgICBjb25zdCBsaW5rID0gUmVhY3QudXNlTWVtbygoKSA9PiBkZWVwLmdldChsaW5rSWQpLCBbbGlua0lkXSk7XG4gICAgY29uc3QgW2NvbnRhaW5tZW50LCBzZXRDb250YWlubWVudF0gPSBSZWFjdC51c2VTdGF0ZSgnY29udGFpbnMnKTtcbiAgICBjb25zdCBbZG93biwgc2V0RG93bl0gPSBSZWFjdC51c2VTdGF0ZSh0cnVlKTtcblxuICAgIGNvbnN0IEFsbG93QWRtaW4gPSB1c2VBc3luY01lbW8oYXN5bmMgKCkgPT4ge1xuICAgICAgcmV0dXJuIGF3YWl0IGRlZXAuY2FuKGRlZXAubGlua0lkLCBkZWVwLmxpbmtJZCwgZGVlcC5pZExvY2FsKGRjLCAnQWxsb3dBZG1pbicpKTtcbiAgICB9LCBbXSwgZmFsc2UpO1xuXG4gICAgY29uc3QgQWxsb3dEZWxldGVUeXBlID0gdXNlQXN5bmNNZW1vKGFzeW5jICgpID0+IHtcbiAgICAgIHJldHVybiAhbGluay50eXBlX2lkID8gZmFsc2UgOiBhd2FpdCBkZWVwLmNhbihsaW5rLnR5cGVfaWQsIGRlZXAubGlua0lkLCBkZWVwLmlkTG9jYWwoZGMsICdBbGxvd0RlbGV0ZVR5cGUnKSk7XG4gICAgfSwgW2xpbmsudHlwZV9pZF0sIGZhbHNlKTtcblxuICAgIGNvbnN0IEFsbG93RGVsZXRlID0gdXNlQXN5bmNNZW1vKGFzeW5jICgpID0+IHtcbiAgICAgIHJldHVybiAhbGlua0lkID8gZmFsc2UgOiBhd2FpdCBkZWVwLmNhbihsaW5rSWQsIGRlZXAubGlua0lkLCBkZWVwLmlkTG9jYWwoZGMsICdBbGxvd0RlbGV0ZScpKTtcbiAgICB9LCBbbGlua0lkXSwgZmFsc2UpO1xuXG4gICAgY29uc3QgY2FuID0gQWxsb3dBZG1pbiB8fCBBbGxvd0RlbGV0ZVR5cGUgfHwgQWxsb3dEZWxldGU7XG5cbiAgICBjb25zdCBkZWxldGVRdWVyeSA9IHtcbiAgICAgIF9vcjogW1xuICAgICAgICAoZG93biA/IHtcbiAgICAgICAgICB1cDoge1xuICAgICAgICAgICAgdHJlZV9pZDogZGVlcC5pZExvY2FsKGRjLCAnY29udGFpblRyZWUnKSxcbiAgICAgICAgICAgIHBhcmVudF9pZDogbGluay5pZCxcbiAgICAgICAgICB9XG4gICAgICAgIH0gOiB7XG4gICAgICAgICAgaWQ6IGxpbmsuaWQsXG4gICAgICAgIH0pLFxuICAgICAgICAuLi4oY29udGFpbm1lbnQgPT09ICdjb250YWlucycgPyBbe1xuICAgICAgICAgIHR5cGVfaWQ6IGRlZXAuaWRMb2NhbChkYywgJ0NvbnRhaW4nKSxcbiAgICAgICAgICB0b19pZDogbGluay5pZCxcbiAgICAgICAgfV0gOiBjb250YWlubWVudCA9PT0gJ2NvbnRhaW5lcicgPyBbe1xuICAgICAgICAgIHR5cGVfaWQ6IGRlZXAuaWRMb2NhbChkYywgJ0NvbnRhaW4nKSxcbiAgICAgICAgICBmcm9tX2lkOiBjb250YWluZXJJZCxcbiAgICAgICAgICB0b19pZDogbGluay5pZCxcbiAgICAgICAgfV0gOiBbXSksXG4gICAgICBdLFxuICAgIH07XG5cbiAgICBjb25zdCB7IGRhdGE6IGNvdW50RG93biB9ID0gZGVlcC51c2VRdWVyeSh7XG4gICAgICB1cDoge1xuICAgICAgICB0cmVlX2lkOiBkZWVwLmlkTG9jYWwoZGMsICdjb250YWluVHJlZScpLFxuICAgICAgICBwYXJlbnRfaWQ6IGxpbmsuaWQsXG4gICAgICB9XG4gICAgfSwge1xuICAgICAgc2tpcDogIWRpc2Nsb3N1cmUuaXNPcGVuLFxuICAgICAgYWdncmVnYXRlOiAnY291bnQnLFxuICAgIH0pO1xuXG4gICAgY29uc3QgeyBkYXRhOiBjb3VudEluQ29udGFpbnMgfSA9IGRlZXAudXNlUXVlcnkoe1xuICAgICAgdG9faWQ6IGxpbmsuaWQsXG4gICAgICB0eXBlX2lkOiBkZWVwLmlkTG9jYWwoZGMsICdDb250YWluJyksXG4gICAgfSwge1xuICAgICAgc2tpcDogIWRpc2Nsb3N1cmUuaXNPcGVuLFxuICAgICAgYWdncmVnYXRlOiAnY291bnQnXG4gICAgfSk7XG5cbiAgICBjb25zdCBidXR0b25zID0gKFxuICAgICAgPD5cbiAgICAgICAgPGMuU2xpZGVGYWRlIGluPXt0cnVlfSBvZmZzZXRYPSctMC41cmVtJyBzdHlsZT17eyBwb3NpdGlvbjogJ2Fic29sdXRlJywgdG9wOiAwLCByaWdodDogJy00ZW0nIH19PlxuICAgICAgICAgIDxjLkJ1dHRvbiB3PSczZW0nIGg9JzNlbScgYm94U2hhZG93PSdkYXJrLWxnJyBvbkNsaWNrPXtkaXNjbG9zdXJlLm9uQ2xvc2V9PlxuICAgICAgICAgICAgPEJzWCAvPlxuICAgICAgICAgIDwvYy5CdXR0b24+XG4gICAgICAgIDwvYy5TbGlkZUZhZGU+XG4gICAgICAgIDxjLlNsaWRlRmFkZSBpbj17dHJ1ZX0gb2Zmc2V0WD0nLTAuNXJlbScgc3R5bGU9e3sgcG9zaXRpb246ICdhYnNvbHV0ZScsIGJvdHRvbTogMCwgcmlnaHQ6ICctNGVtJyB9fT5cbiAgICAgICAgICA8Yy5CdXR0b24gdz0nM2VtJyBoPSczZW0nIGJveFNoYWRvdz0nZGFyay1sZycgdmFyaWFudD0nYWN0aXZlJyBvbkNsaWNrPXthc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBhd2FpdCBkZWVwLmRlbGV0ZShkZWxldGVRdWVyeSk7XG4gICAgICAgICAgICBkaXNjbG9zdXJlLm9uQ2xvc2UoKTtcbiAgICAgICAgICB9fT5cbiAgICAgICAgICAgIDxCc0NoZWNrMiAvPlxuICAgICAgICAgIDwvYy5CdXR0b24+XG4gICAgICAgIDwvYy5TbGlkZUZhZGU+XG4gICAgICA8Lz5cbiAgICApO1xuICAgIFxuICAgIGNvbnN0IGFsZXJ0ID0gKFxuICAgICAgPFJlYWN0LkZyYWdtZW50PlxuICAgICAgICA8Yy5BbGVydCBzdGF0dXM9e2NhbiA/ICdpbmZvJyA6ICdlcnJvcid9PlxuICAgICAgICAgIDxjLkFsZXJ0SWNvbiAvPlxuICAgICAgICAgIDxjLkFsZXJ0VGl0bGU+XG4gICAgICAgICAgICBZb3Uge2NhbiA/ICdjYW4nIDogXCJjYW4ndFwifSBkbyBpdC5cbiAgICAgICAgICA8L2MuQWxlcnRUaXRsZT5cbiAgICAgICAgPC9jLkFsZXJ0PlxuICAgICAgICA8Z28uRWRpdG9yXG4gICAgICAgICAgdmFsdWU9e2Bhd2FpdCBkZWVwLmNhbihkZWVwLmxpbmtJZCwgZGVlcC5saW5rSWQsIGRlZXAuaWRMb2NhbCgnQGRlZXAtZm91bmRhdGlvbi9jb3JlJywgJ0FsbG93QWRtaW4nKSlcbi8vICR7QWxsb3dBZG1pbn1cbmF3YWl0IGRlZXAuY2FuKCR7bGluay50eXBlX2lkfSwgZGVlcC5saW5rSWQsIGRlZXAuaWRMb2NhbCgnQGRlZXAtZm91bmRhdGlvbi9jb3JlJywgJ0FsbG93RGVsZXRlVHlwZScpKVxuLy8gJHtBbGxvd0RlbGV0ZVR5cGV9XG5hd2FpdCBkZWVwLmNhbigke2xpbmsuaWR9LCBkZWVwLmxpbmtJZCwgZGVlcC5pZExvY2FsKCdAZGVlcC1mb3VuZGF0aW9uL2NvcmUnLCAnQWxsb3dEZWxldGUnKSlcbi8vICR7QWxsb3dEZWxldGV9YH1cbiAgICAgICAgICBlZGl0YWJsZT17ZmFsc2V9XG4gICAgICAgICAgcmVhZE9ubHlcbiAgICAgICAgLz5cbiAgICAgIDwvUmVhY3QuRnJhZ21lbnQ+XG4gICAgKTtcbiAgICBcbiAgICByZXR1cm4gKFxuICAgICAgPGdvLk9uIGRvPXt7fX0+XG4gICAgICAgIDxjLk1vZGFsXG4gICAgICAgICAgcmVmPXtyZWZ9XG4gICAgICAgICAgY2xvc2VPbk92ZXJsYXlDbGlja1xuICAgICAgICAgIGJsb2NrU2Nyb2xsT25Nb3VudD17ZmFsc2V9XG4gICAgICAgICAgb25DbG9zZT17ZGlzY2xvc3VyZS5vbkNsb3NlfVxuICAgICAgICAgIGlzT3Blbj17ZGlzY2xvc3VyZS5pc09wZW59XG4gICAgICAgICAgcG9ydGFsUHJvcHM9e3tcbiAgICAgICAgICAgIGNvbnRhaW5lclJlZjogZ28ucm9vdCgpLnJlZlxuICAgICAgICAgIH19XG4gICAgICAgID5cbiAgICAgICAgICA8Yy5Nb2RhbE92ZXJsYXkgLz5cbiAgICAgICAgICA8Yy5Nb2RhbENvbnRlbnQgdz0nMzBlbScgbWF4Vz0nMzBlbScgcG9zaXRpb249J3JlbGF0aXZlJz5cbiAgICAgICAgICAgIDxjLk1vZGFsSGVhZGVyPlxuICAgICAgICAgICAgICBMaW5rIGRlbGV0aW5nOiB7YCR7bGlua31gfVxuICAgICAgICAgICAgPC9jLk1vZGFsSGVhZGVyPlxuICAgICAgICAgICAgPGMuTW9kYWxCb2R5IHA9ezB9IHc9JzEwMCUnIGg9JzEwMCUnPlxuICAgICAgICAgICAgICB7YWxlcnR9XG4gICAgICAgICAgICAgIDxjLkJveCBwPScxZW0nPlxuICAgICAgICAgICAgICAgIDxjLkNoZWNrYm94XG4gICAgICAgICAgICAgICAgICBzaXplPSdsZydcbiAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2Rvd259XG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KCkgPT4gc2V0RG93bighZG93bil9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgRGVsZXRlIGFsbCBjb250YWluZWQgaW4gbGlua3M/IFRvdGFsOiAoe2NvdW50RG93bn0pXG4gICAgICAgICAgICAgICAgPC9jLkNoZWNrYm94PlxuICAgICAgICAgICAgICA8L2MuQm94PlxuICAgICAgICAgICAgICA8Yy5Cb3ggcD0nMWVtJz5cbiAgICAgICAgICAgICAgICBOZWVkIHRvIGRlbGV0ZSBjb250YWlucyB0byB0aGlzIGxpbms/XG4gICAgICAgICAgICAgIDwvYy5Cb3g+XG4gICAgICAgICAgICAgIDxjLkJveD5cbiAgICAgICAgICAgICAgICA8Yy5TaW1wbGVHcmlkIGNvbHVtbnM9ezN9PlxuICAgICAgICAgICAgICAgICAgPGMuQnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIHZhcmlhbnQ9e2NvbnRhaW5tZW50ID09PSAnY29udGFpbnMnID8gJ2FjdGl2ZScgOiB1bmRlZmluZWR9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldENvbnRhaW5tZW50KCdjb250YWlucycpfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8Yy5Cb3g+XG4gICAgICAgICAgICAgICAgICAgICAgPGMuQm94PmFsbCBpbjwvYy5Cb3g+XG4gICAgICAgICAgICAgICAgICAgICAgPGMuQm94IGZvbnRTaXplPSd4cyc+XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250YWluczogKHtjb3VudEluQ29udGFpbnN9KVxuICAgICAgICAgICAgICAgICAgICAgIDwvYy5Cb3g+XG4gICAgICAgICAgICAgICAgICAgIDwvYy5Cb3g+XG4gICAgICAgICAgICAgICAgICA8L2MuQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgeyEhY29udGFpbmVySWQgJiYgKFxuICAgICAgICAgICAgICAgICAgICA8Yy5CdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICB2YXJpYW50PXtjb250YWlubWVudCA9PT0gJ2NvbnRhaW5lcicgPyAnYWN0aXZlJyA6IHVuZGVmaW5lZH1cbiAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRDb250YWlubWVudCgnY29udGFpbmVyJyl9XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICA8Yy5Cb3g+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Yy5Cb3g+b25seSBvbmU8L2MuQm94PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGMuQm94IGZvbnRTaXplPSd4cyc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20ge2NvbnRhaW5lcklkfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9jLkJveD5cbiAgICAgICAgICAgICAgICAgICAgICA8L2MuQm94PlxuICAgICAgICAgICAgICAgICAgICA8L2MuQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgIDxjLkJ1dHRvblxuICAgICAgICAgICAgICAgICAgICB2YXJpYW50PXtjb250YWlubWVudCA9PT0gJ29ubHknID8gJ2FjdGl2ZScgOiB1bmRlZmluZWR9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldENvbnRhaW5tZW50KCdvbmx5Jyl9XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxjLkJveD5cbiAgICAgICAgICAgICAgICAgICAgICA8Yy5Cb3g+bm90IG5lZWQ8L2MuQm94PlxuICAgICAgICAgICAgICAgICAgICAgIDxjLkJveCBmb250U2l6ZT0neHMnPlxuICAgICAgICAgICAgICAgICAgICAgICAgdG8gZGVsZXRlIGNvbnRhaW5zXG4gICAgICAgICAgICAgICAgICAgICAgPC9jLkJveD5cbiAgICAgICAgICAgICAgICAgICAgPC9jLkJveD5cbiAgICAgICAgICAgICAgICAgIDwvYy5CdXR0b24+XG4gICAgICAgICAgICAgICAgPC9jLlNpbXBsZUdyaWQ+XG4gICAgICAgICAgICAgIDwvYy5Cb3g+XG4gICAgICAgICAgICAgIDxnby5FZGl0b3JcbiAgICAgICAgICAgICAgICB2YWx1ZT17YGF3YWl0IGRlZXAuZGVsZXRlKCR7SlNPTi5zdHJpbmdpZnkoZGVsZXRlUXVlcnksIG51bGwsIDIpfSlgfVxuICAgICAgICAgICAgICAgIGVkaXRhYmxlPXtmYWxzZX1cbiAgICAgICAgICAgICAgICByZWFkT25seVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9jLk1vZGFsQm9keT5cbiAgICAgICAgICAgIHtidXR0b25zfVxuICAgICAgICAgIDwvYy5Nb2RhbENvbnRlbnQ+XG4gICAgICAgIDwvYy5Nb2RhbD5cbiAgICAgIDwvZ28uT24+XG4gICAgKTtcbiAgfTtcbn07Il19",
        "link_id": 16447
      }
    },
    {
      "id": 16448,
      "type_id": 3,
      "from_id": 16441,
      "to_id": 16447,
      "value": {
        "id": 1610,
        "value": "generated",
        "link_id": 16448
      }
    },
    {
      "id": 16449,
      "type_id": 143,
      "from_id": 16447,
      "to_id": 16441
    },
    {
      "id": 16450,
      "type_id": 3,
      "from_id": 16441,
      "to_id": 16449
    },
    {
      "id": 21747,
      "type_id": 35,
      "from_id": 145,
      "to_id": 21743
    },
    {
      "id": 21748,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 21747,
      "value": {
        "id": 1803,
        "value": "QueriesGQL",
        "link_id": 21748
      }
    },
    {
      "id": 21749,
      "type_id": 5258,
      "from_id": 21747,
      "to_id": 20478
    },
    {
      "id": 21750,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 21749
    },
    {
      "id": 21751,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1805,
        "value": "async ({ deep, data, Go, require }) => {\n    const React = require('react');\n    const { GrGraphQl } = require(\"react-icons/gr\");\n    const c = require('@chakra-ui/react');\n    const _ = require('lodash');\n    const dpl = '@deep-foundation/perception-links';\n    const dc = '@deep-foundation/core';\n    return ({ go, handlerId, isActive, }, ref) => {\n        const View = React.useCallback(({ event }) => {\n            const value = `// query\n${event?.remoteQuery?.query?.queryString || ''}\n\n// variables\n${JSON.stringify(event?.remoteQuery?.query?.variables || {}, null, 2)}\n`;\n            return React.createElement(Go.Editor, { editable: false, readOnly: true, value: value, fillSize: true });\n        }, []);\n        return React.createElement(go.On, { do: {\n                exec: (g, v, o) => go.do('view', { id: go.linkId, Component: View })\n            } },\n            React.createElement(c.Button, { w: '3em', h: '3em', variant: isActive ? 'active' : undefined, ref: ref, onClick: () => go.do('exec') },\n                React.createElement(GrGraphQl, null)));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFO0lBQ3BDLE1BQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUMvQixNQUFNLEVBQUUsU0FBUyxFQUFFLEdBQUcsT0FBTyxDQUFDLGdCQUFnQixDQUFDLENBQUM7SUFDaEQsTUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLGtCQUFrQixDQUFDLENBQUM7SUFDdEMsTUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBRTVCLE1BQU0sR0FBRyxHQUFHLG1DQUFtQyxDQUFDO0lBQ2hELE1BQU0sRUFBRSxHQUFHLHVCQUF1QixDQUFDO0lBRW5DLE9BQU8sQ0FBQyxFQUNOLEVBQUUsRUFDRixTQUFTLEVBRVQsUUFBUSxHQUNULEVBQUUsR0FBRyxFQUFFLEVBQUU7UUFDUixNQUFNLElBQUksR0FBRyxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUMsRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFO1lBQzNDLE1BQU0sS0FBSyxHQUFHO0VBQ2xCLEtBQUssRUFBRSxXQUFXLEVBQUUsS0FBSyxFQUFFLFdBQVcsSUFBSSxFQUFFOzs7RUFHNUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLEVBQUUsV0FBVyxFQUFFLEtBQUssRUFBRSxTQUFTLElBQUksRUFBRSxFQUFFLElBQUksRUFBRSxDQUFDLENBQUM7Q0FDcEUsQ0FBQTtZQUVLLE9BQU8sb0JBQUMsRUFBRSxDQUFDLE1BQU0sSUFBQyxRQUFRLEVBQUUsS0FBSyxFQUFFLFFBQVEsUUFBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLFFBQVEsU0FBRSxDQUFDO1FBQ3ZFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUVQLE9BQU8sb0JBQUMsRUFBRSxDQUFDLEVBQUUsSUFBQyxFQUFFLEVBQUU7Z0JBQ2hCLElBQUksRUFBRSxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsTUFBTSxFQUFFLFNBQVMsRUFBRSxJQUFJLEVBQUUsQ0FBQzthQUNuRTtZQUNDLG9CQUFDLENBQUMsQ0FBQyxNQUFNLElBQ1AsQ0FBQyxFQUFDLEtBQUssRUFBQyxDQUFDLEVBQUMsS0FBSyxFQUNmLE9BQU8sRUFBRSxRQUFRLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUN4QyxHQUFHLEVBQUUsR0FBRyxFQUNSLE9BQU8sRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQztnQkFFNUIsb0JBQUMsU0FBUyxPQUFFLENBQ0gsQ0FDTCxDQUFDO0lBQ1gsQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiYXN5bmMgKHsgZGVlcCwgZGF0YSwgR28sIHJlcXVpcmUgfSkgPT4ge1xuICBjb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG4gIGNvbnN0IHsgR3JHcmFwaFFsIH0gPSByZXF1aXJlKFwicmVhY3QtaWNvbnMvZ3JcIik7XG4gIGNvbnN0IGMgPSByZXF1aXJlKCdAY2hha3JhLXVpL3JlYWN0Jyk7XG4gIGNvbnN0IF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcblxuICBjb25zdCBkcGwgPSAnQGRlZXAtZm91bmRhdGlvbi9wZXJjZXB0aW9uLWxpbmtzJztcbiAgY29uc3QgZGMgPSAnQGRlZXAtZm91bmRhdGlvbi9jb3JlJztcblxuICByZXR1cm4gKHtcbiAgICBnbyxcbiAgICBoYW5kbGVySWQsXG5cbiAgICBpc0FjdGl2ZSxcbiAgfSwgcmVmKSA9PiB7XG4gICAgY29uc3QgVmlldyA9IFJlYWN0LnVzZUNhbGxiYWNrKCh7IGV2ZW50IH0pID0+IHtcbiAgICAgIGNvbnN0IHZhbHVlID0gYC8vIHF1ZXJ5XG4ke2V2ZW50Py5yZW1vdGVRdWVyeT8ucXVlcnk/LnF1ZXJ5U3RyaW5nIHx8ICcnfVxuXG4vLyB2YXJpYWJsZXNcbiR7SlNPTi5zdHJpbmdpZnkoZXZlbnQ/LnJlbW90ZVF1ZXJ5Py5xdWVyeT8udmFyaWFibGVzIHx8IHt9LCBudWxsLCAyKX1cbmBcbiAgXG4gICAgICByZXR1cm4gPEdvLkVkaXRvciBlZGl0YWJsZT17ZmFsc2V9IHJlYWRPbmx5IHZhbHVlPXt2YWx1ZX0gZmlsbFNpemUvPjtcbiAgICB9LCBbXSk7XG5cbiAgICByZXR1cm4gPGdvLk9uIGRvPXt7XG4gICAgICBleGVjOiAoZyx2LG8pID0+IGdvLmRvKCd2aWV3JywgeyBpZDogZ28ubGlua0lkLCBDb21wb25lbnQ6IFZpZXcgfSkpLFxuICAgIH19PlxuICAgICAgPGMuQnV0dG9uXG4gICAgICAgIHc9JzNlbScgaD0nM2VtJ1xuICAgICAgICB2YXJpYW50PXtpc0FjdGl2ZSA/ICdhY3RpdmUnIDogdW5kZWZpbmVkfVxuICAgICAgICByZWY9e3JlZn1cbiAgICAgICAgb25DbGljaz17KCkgPT4gZ28uZG8oJ2V4ZWMnKX1cbiAgICAgID5cbiAgICAgICAgPEdyR3JhcGhRbC8+XG4gICAgICA8L2MuQnV0dG9uPlxuICAgIDwvZ28uT24+O1xuICB9O1xufSJdfQ==",
        "link_id": 21751
      }
    },
    {
      "id": 21752,
      "type_id": 3,
      "from_id": 21743,
      "to_id": 21751,
      "value": {
        "id": 1804,
        "value": "generated",
        "link_id": 21752
      }
    },
    {
      "id": 21753,
      "type_id": 143,
      "from_id": 21751,
      "to_id": 21743
    },
    {
      "id": 21754,
      "type_id": 3,
      "from_id": 21743,
      "to_id": 21753
    },
    {
      "id": 16360,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1606,
        "value": "({ deep, data, require, Go }) => {\n    const React = require('react');\n    const { BsX, BsCheck2, BsXLg, BsDatabase, BsRegex } = require('react-icons/bs');\n    const { TypedIcon, DownIcon, UpIcon, TypeIcon, InIcon, OutIcon, FromIcon, ToIcon, } = require('@deep-foundation/perception-app');\n    const { useAsyncMemo } = require('use-async-memo');\n    const c = require('@chakra-ui/react');\n    const dc = '@deep-foundation/core';\n    const dpl = '@deep-foundation/perception-links';\n    const V = deep.idLocal(dc, 'Value');\n    const S = deep.idLocal(dc, 'String');\n    const N = deep.idLocal(dc, 'Number');\n    const O = deep.idLocal(dc, 'Object');\n    return ({ go, defaultContainerId, defaultTypeId, defaultFromId, defaultToId, disclosure, }, ref) => {\n        if (!disclosure)\n            throw new Error('!disclosure');\n        const [typeId, setTypeId] = React.useState(defaultTypeId);\n        const [fromId, setFromId] = React.useState(defaultFromId);\n        const [toId, setToId] = React.useState(defaultToId);\n        const type = React.useMemo(() => typeId ? deep.get(+typeId) : null, [typeId]);\n        const from = React.useMemo(() => fromId ? deep.get(+fromId) : null, [fromId]);\n        const to = React.useMemo(() => toId ? deep.get(+toId) : null, [toId]);\n        const [value, setValue] = React.useState();\n        const [name, setName] = React.useState('');\n        const [containerId, setContainerId] = React.useState(defaultContainerId);\n        const tV = useAsyncMemo(async () => {\n            return typeId ? (await deep.select({ type_id: V, from_id: +typeId }))?.data?.[0]?.to_id : undefined;\n        }, [type]);\n        const { isValid, validated } = React.useMemo(() => {\n            try {\n                if (tV === S)\n                    return { validated: value, isValid: true };\n                if (tV === N)\n                    return { validated: +value, isValud: typeof (validated) === 'number' && !Number.isNaN(validated) };\n                if (tV === O)\n                    return { validated: JSON.parse(value), isValid: true };\n                if (!tV)\n                    return { validated: value, isValid: true };\n            }\n            catch (e) { }\n            return { validated: value, isValid: false };\n        }, [value, tV]);\n        const AllowAdmin = useAsyncMemo(async () => {\n            return await deep.can(deep.linkId, deep.linkId, deep.idLocal('@deep-foundation/core', 'AllowAdmin'));\n        }, [], false);\n        const AllowInsertType = useAsyncMemo(async () => {\n            return !typeId ? false : await deep.can(+typeId, deep.linkId, deep.idLocal('@deep-foundation/core', 'AllowInsertType'));\n        }, [typeId], false);\n        const can = AllowInsertType || AllowAdmin;\n        const insertQuery = type ? {\n            type_id: type.id,\n            ...(fromId && toId ? { from_id: +fromId, to_id: +toId } : {}),\n            containerId,\n            ...(name ? { name } : {}),\n            ...(tV == S ? { string: { data: { value: validated } } } : tV == N ? { number: { data: { value: validated } } } : tV == O ? { object: { data: { value: validated } } } : {}),\n        } : {};\n        const valueType = React.useMemo(() => type?.outByType[V]?.[0]?.to_id, [type]);\n        const buttons = React.createElement(React.Fragment, null,\n            React.createElement(c.SlideFade, { in: true, offsetX: '-0.5rem', style: { position: 'absolute', top: 0, right: '-4em' } },\n                React.createElement(c.Button, { w: '3em', h: '3em', boxShadow: 'dark-lg', variant: undefined, onClick: disclosure.onClose },\n                    React.createElement(BsX, null))),\n            React.createElement(c.SlideFade, { in: ((!!fromId && !!toId) || type?.id === 1 || (!type?.from_id && !type?.to_id)) && (isValid || value === ''), offsetX: '-0.5rem', style: { position: 'absolute', bottom: 0, right: '-4em' } },\n                React.createElement(c.Button, { w: '3em', h: '3em', boxShadow: 'dark-lg', variant: 'active', onClick: async () => {\n                        await deep.insert(insertQuery);\n                        disclosure.onClose();\n                    } },\n                    React.createElement(BsCheck2, null))));\n        const alert = React.createElement(React.Fragment, null,\n            React.createElement(c.Alert, { status: can ? 'info' : 'error' },\n                React.createElement(c.AlertIcon, null),\n                React.createElement(c.AlertTitle, null,\n                    \"You \",\n                    can ? 'can' : 'can`t',\n                    \" do it.\")),\n            React.createElement(go.Editor, { value: `await deep.can(deep.linkId, deep.linkId, deep.idLocal('@deep-foundation/core', 'AllowAdmin'))\n// ${AllowAdmin}${!!typeId ? `\nawait deep.can(${typeId}, deep.linkId, deep.idLocal('@deep-foundation/core', 'AllowInsertType'))\n// ${AllowInsertType}` : ''}`, editable: false, readOnly: true }));\n        return React.createElement(go.On, { do: {} },\n            React.createElement(c.Modal, { ref: ref, closeOnOverlayClick: true, blockScrollOnMount: false, onClose: disclosure.onClose, isOpen: disclosure.isOpen, portalProps: { containerRef: go.root().ref } },\n                React.createElement(c.ModalOverlay, null),\n                React.createElement(c.ModalContent, { w: '30em', maxW: '30em', position: 'relative' },\n                    React.createElement(c.ModalHeader, null, \"Link inserting:\"),\n                    React.createElement(c.ModalBody, { p: 0, w: '100%', h: '100%' },\n                        !can && alert,\n                        React.createElement(go.Component, { path: [dpl, 'FinderInput'], leftIcon: React.createElement(TypeIcon, null), value: typeId, onChange: id => setTypeId(id) }),\n                        React.createElement(c.SimpleGrid, { columns: 2 },\n                            React.createElement(go.Component, { path: [dpl, 'FinderInput'], leftIcon: React.createElement(FromIcon, null), value: fromId, onChange: id => setFromId(id) }),\n                            React.createElement(go.Component, { path: [dpl, 'FinderInput'], leftIcon: React.createElement(ToIcon, null), value: toId, onChange: id => setToId(id) })),\n                        React.createElement(c.SimpleGrid, { columns: 2 },\n                            React.createElement(go.Component, { path: [dpl, 'FinderInput'], leftIcon: React.createElement(React.Fragment, null, \"\\uD83D\\uDDC2\\uFE0F\"), value: containerId, onChange: id => setContainId(id) }),\n                            React.createElement(c.Input, { placeholder: 'name', h: '3em', value: name, onChange: e => setName(e.target.value) })),\n                        !!type && React.createElement(c.Box, null,\n                            !valueType && React.createElement(React.Fragment, null,\n                                React.createElement(c.Alert, { status: 'info' },\n                                    React.createElement(c.AlertIcon, null),\n                                    React.createElement(c.AlertTitle, null,\n                                        \"type \",\n                                        +type,\n                                        \" can't have Value\"))),\n                            valueType === S && React.createElement(React.Fragment, null,\n                                React.createElement(go.Editor, { placeholder: 'String value', value: value, onChange: setValue })),\n                            valueType === N && React.createElement(React.Fragment, null,\n                                React.createElement(c.Input, { type: 'string', value: value, placeholder: 'Number value', onChange: e => setValue(e.target.value) })),\n                            valueType === O && React.createElement(React.Fragment, null,\n                                React.createElement(go.Editor, { placeholder: 'Object value', value: value, onChange: setValue })),\n                            (tV === S || tV === N || tV === O) && React.createElement(c.Tag, { size: 'lg', colorScheme: value === '' ? 'black' : isValid ? 'deepActive' : 'danger', variant: 'solid', borderRadius: 'full', position: 'absolute', bottom: '-0.5em', right: '-0.5em' }, value === '' ? 'empty' : isValid ? 'valid' : 'invalid')),\n                        React.createElement(c.Divider, { mt: '1em', mb: '1em' }),\n                        React.createElement(go.Editor, { value: `await deep.insert(${JSON.stringify(insertQuery, null, 2)})`, editable: false, readOnly: true }),\n                        !!can && alert),\n                    buttons)));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxDQUFDLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRTtJQUM5QixNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDL0IsTUFBTSxFQUFFLEdBQUcsRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUFFLFVBQVUsRUFBRSxPQUFPLEVBQUUsR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztJQUVoRixNQUFNLEVBQ0osU0FBUyxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBRSxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sR0FDekUsR0FBRyxPQUFPLENBQUMsaUNBQWlDLENBQUMsQ0FBQztJQUUvQyxNQUFNLEVBQUUsWUFBWSxFQUFFLEdBQUcsT0FBTyxDQUFDLGdCQUFnQixDQUFDLENBQUM7SUFFbkQsTUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLGtCQUFrQixDQUFDLENBQUM7SUFFdEMsTUFBTSxFQUFFLEdBQUcsdUJBQXVCLENBQUM7SUFDbkMsTUFBTSxHQUFHLEdBQUcsbUNBQW1DLENBQUM7SUFFaEQsTUFBTSxDQUFDLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDcEMsTUFBTSxDQUFDLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsUUFBUSxDQUFDLENBQUM7SUFDckMsTUFBTSxDQUFDLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsUUFBUSxDQUFDLENBQUM7SUFDckMsTUFBTSxDQUFDLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsUUFBUSxDQUFDLENBQUM7SUFFckMsT0FBTyxDQUFDLEVBQ04sRUFBRSxFQUVGLGtCQUFrQixFQUNsQixhQUFhLEVBQ2IsYUFBYSxFQUNiLFdBQVcsRUFFWCxVQUFVLEdBQ1gsRUFBRSxHQUFHLEVBQUUsRUFBRTtRQUNSLElBQUksQ0FBQyxVQUFVO1lBQUUsTUFBTSxJQUFJLEtBQUssQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUVoRCxNQUFNLENBQUMsTUFBTSxFQUFFLFNBQVMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLENBQUM7UUFDMUQsTUFBTSxDQUFDLE1BQU0sRUFBRSxTQUFTLENBQUMsR0FBRyxLQUFLLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQzFELE1BQU0sQ0FBQyxJQUFJLEVBQUUsT0FBTyxDQUFDLEdBQUcsS0FBSyxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUNwRCxNQUFNLElBQUksR0FBRyxLQUFLLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO1FBQzlFLE1BQU0sSUFBSSxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7UUFDOUUsTUFBTSxFQUFFLEdBQUcsS0FBSyxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztRQUV0RSxNQUFNLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxHQUFHLEtBQUssQ0FBQyxRQUFRLEVBQUUsQ0FBQztRQUMzQyxNQUFNLENBQUMsSUFBSSxFQUFFLE9BQU8sQ0FBQyxHQUFHLEtBQUssQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDM0MsTUFBTSxDQUFDLFdBQVcsRUFBRSxjQUFjLENBQUMsR0FBRyxLQUFLLENBQUMsUUFBUSxDQUFDLGtCQUFrQixDQUFDLENBQUM7UUFFekUsTUFBTSxFQUFFLEdBQUcsWUFBWSxDQUFDLEtBQUssSUFBSSxFQUFFO1lBQ2pDLE9BQU8sTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFLE9BQU8sRUFBRSxDQUFDLEVBQUUsT0FBTyxFQUFFLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDO1FBQ3RHLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7UUFDWCxNQUFNLEVBQUUsT0FBTyxFQUFFLFNBQVMsRUFBRSxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFO1lBQ2hELElBQUksQ0FBQztnQkFDSCxJQUFJLEVBQUUsS0FBSyxDQUFDO29CQUFFLE9BQU8sRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQztnQkFDekQsSUFBSSxFQUFFLEtBQUssQ0FBQztvQkFBRSxPQUFPLEVBQUUsU0FBUyxFQUFFLENBQUMsS0FBSyxFQUFFLE9BQU8sRUFBRSxPQUFNLENBQUMsU0FBUyxDQUFDLEtBQUssUUFBUSxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsRUFBRSxDQUFDO2dCQUNoSCxJQUFJLEVBQUUsS0FBSyxDQUFDO29CQUFFLE9BQU8sRUFBRSxTQUFTLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLENBQUM7Z0JBQ3JFLElBQUksQ0FBQyxFQUFFO29CQUFFLE9BQU8sRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQztZQUN0RCxDQUFDO1lBQUMsT0FBTSxDQUFDLEVBQUUsQ0FBQyxDQUFBLENBQUM7WUFDYixPQUFPLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLENBQUM7UUFDOUMsQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFFaEIsTUFBTSxVQUFVLEdBQUcsWUFBWSxDQUFNLEtBQUssSUFBSSxFQUFFO1lBQzlDLE9BQU8sTUFBTSxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLHVCQUF1QixFQUFFLFlBQVksQ0FBQyxDQUFDLENBQUM7UUFDdkcsQ0FBQyxFQUFFLEVBQUUsRUFBRSxLQUFLLENBQUMsQ0FBQztRQUNkLE1BQU0sZUFBZSxHQUFHLFlBQVksQ0FBTSxLQUFLLElBQUksRUFBRTtZQUNuRCxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLE1BQU0sSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsdUJBQXVCLEVBQUUsaUJBQWlCLENBQUMsQ0FBQyxDQUFDO1FBQzFILENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDO1FBQ3BCLE1BQU0sR0FBRyxHQUFHLGVBQWUsSUFBSSxVQUFVLENBQUM7UUFFMUMsTUFBTSxXQUFXLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQztZQUN6QixPQUFPLEVBQUUsSUFBSSxDQUFDLEVBQUU7WUFDaEIsR0FBRyxDQUFDLE1BQU0sSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsT0FBTyxFQUFFLENBQUMsTUFBTSxFQUFFLEtBQUssRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7WUFDN0QsV0FBVztZQUNYLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztZQUN6QixHQUFHLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxNQUFNLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLE1BQU0sRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsRUFBRSxFQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsTUFBTSxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO1NBQzVLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztRQUVQLE1BQU0sU0FBUyxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLENBQUMsSUFBSSxFQUFFLFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7UUFFOUUsTUFBTSxPQUFPLEdBQUc7WUFDZCxvQkFBQyxDQUFDLENBQUMsU0FBUyxJQUFDLEVBQUUsRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFDLFNBQVMsRUFBQyxLQUFLLEVBQUUsRUFBQyxRQUFRLEVBQUUsVUFBVSxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBQztnQkFDM0Ysb0JBQUMsQ0FBQyxDQUFDLE1BQU0sSUFDUCxDQUFDLEVBQUMsS0FBSyxFQUFDLENBQUMsRUFBQyxLQUFLLEVBQ2Ys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UUFBUSxFQUFDLEtBQUssRUFBQyxRQUFRLElBQ2xELEtBQUssS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBUyxDQUMzRDt3QkFDUixvQkFBQyxDQUFDLENBQUMsT0FBTyxJQUFDLEVBQUUsRUFBQyxLQUFLLEVBQUMsRUFBRSxFQUFDLEtBQUssR0FBRTt3QkFDOUIsb0JBQUMsRUFBRSxDQUFDLE1BQU0sSUFDUixLQUFLLEVBQUUscUJBQXFCLElBQUksQ0FBQyxTQUFTLENBQUMsV0FBVyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsR0FBRyxFQUNuRSxRQUFRLEVBQUUsS0FBSyxFQUFFLFFBQVEsU0FDekI7d0JBQ0QsQ0FBQyxDQUFDLEdBQUcsSUFBSSxLQUFLLENBQ0g7b0JBQ2IsT0FBTyxDQUNPLENBQ1QsQ0FDSixDQUFDO0lBQ1gsQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiKHsgZGVlcCwgZGF0YSwgcmVxdWlyZSwgR28gfSkgPT4ge1xuICBjb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG4gIGNvbnN0IHsgQnNYLCBCc0NoZWNrMiwgQnNYTGcsIEJzRGF0YWJhc2UsIEJzUmVnZXggfSA9IHJlcXVpcmUoJ3JlYWN0LWljb25zL2JzJyk7XG5cbiAgY29uc3Qge1xuICAgIFR5cGVkSWNvbiwgRG93bkljb24sIFVwSWNvbiwgVHlwZUljb24sIEluSWNvbiwgT3V0SWNvbiwgRnJvbUljb24sIFRvSWNvbixcbiAgfSA9IHJlcXVpcmUoJ0BkZWVwLWZvdW5kYXRpb24vcGVyY2VwdGlvbi1hcHAnKTtcblxuICBjb25zdCB7IHVzZUFzeW5jTWVtbyB9ID0gcmVxdWlyZSgndXNlLWFzeW5jLW1lbW8nKTtcbiAgXG4gIGNvbnN0IGMgPSByZXF1aXJlKCdAY2hha3JhLXVpL3JlYWN0Jyk7XG5cbiAgY29uc3QgZGMgPSAnQGRlZXAtZm91bmRhdGlvbi9jb3JlJztcbiAgY29uc3QgZHBsID0gJ0BkZWVwLWZvdW5kYXRpb24vcGVyY2VwdGlvbi1saW5rcyc7XG5cbiAgY29uc3QgViA9IGRlZXAuaWRMb2NhbChkYywgJ1ZhbHVlJyk7XG4gIGNvbnN0IFMgPSBkZWVwLmlkTG9jYWwoZGMsICdTdHJpbmcnKTtcbiAgY29uc3QgTiA9IGRlZXAuaWRMb2NhbChkYywgJ051bWJlcicpO1xuICBjb25zdCBPID0gZGVlcC5pZExvY2FsKGRjLCAnT2JqZWN0Jyk7XG5cbiAgcmV0dXJuICh7XG4gICAgZ28sXG5cbiAgICBkZWZhdWx0Q29udGFpbmVySWQsXG4gICAgZGVmYXVsdFR5cGVJZCxcbiAgICBkZWZhdWx0RnJvbUlkLFxuICAgIGRlZmF1bHRUb0lkLFxuXG4gICAgZGlzY2xvc3VyZSxcbiAgfSwgcmVmKSA9PiB7XG4gICAgaWYgKCFkaXNjbG9zdXJlKSB0aHJvdyBuZXcgRXJyb3IoJyFkaXNjbG9zdXJlJyk7XG5cbiAgICBjb25zdCBbdHlwZUlkLCBzZXRUeXBlSWRdID0gUmVhY3QudXNlU3RhdGUoZGVmYXVsdFR5cGVJZCk7XG4gICAgY29uc3QgW2Zyb21JZCwgc2V0RnJvbUlkXSA9IFJlYWN0LnVzZVN0YXRlKGRlZmF1bHRGcm9tSWQpO1xuICAgIGNvbnN0IFt0b0lkLCBzZXRUb0lkXSA9IFJlYWN0LnVzZVN0YXRlKGRlZmF1bHRUb0lkKTtcbiAgICBjb25zdCB0eXBlID0gUmVhY3QudXNlTWVtbygoKSA9PiB0eXBlSWQgPyBkZWVwLmdldCgrdHlwZUlkKSA6IG51bGwsIFt0eXBlSWRdKTtcbiAgICBjb25zdCBmcm9tID0gUmVhY3QudXNlTWVtbygoKSA9PiBmcm9tSWQgPyBkZWVwLmdldCgrZnJvbUlkKSA6IG51bGwsIFtmcm9tSWRdKTtcbiAgICBjb25zdCB0byA9IFJlYWN0LnVzZU1lbW8oKCkgPT4gdG9JZCA/IGRlZXAuZ2V0KCt0b0lkKSA6IG51bGwsIFt0b0lkXSk7XG5cbiAgICBjb25zdCBbdmFsdWUsIHNldFZhbHVlXSA9IFJlYWN0LnVzZVN0YXRlKCk7XG4gICAgY29uc3QgW25hbWUsIHNldE5hbWVdID0gUmVhY3QudXNlU3RhdGUoJycpO1xuICAgIGNvbnN0IFtjb250YWluZXJJZCwgc2V0Q29udGFpbmVySWRdID0gUmVhY3QudXNlU3RhdGUoZGVmYXVsdENvbnRhaW5lcklkKTtcblxuICAgIGNvbnN0IHRWID0gdXNlQXN5bmNNZW1vKGFzeW5jICgpID0+IHtcbiAgICAgIHJldHVybiB0eXBlSWQgPyAoYXdhaXQgZGVlcC5zZWxlY3QoeyB0eXBlX2lkOiBWLCBmcm9tX2lkOiArdHlwZUlkIH0pKT8uZGF0YT8uWzBdPy50b19pZCA6IHVuZGVmaW5lZDtcbiAgICB9LCBbdHlwZV0pO1xuICAgIGNvbnN0IHsgaXNWYWxpZCwgdmFsaWRhdGVkIH0gPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmICh0ViA9PT0gUykgcmV0dXJuIHsgdmFsaWRhdGVkOiB2YWx1ZSwgaXNWYWxpZDogdHJ1ZSB9O1xuICAgICAgICBpZiAodFYgPT09IE4pIHJldHVybiB7IHZhbGlkYXRlZDogK3ZhbHVlLCBpc1ZhbHVkOiB0eXBlb2YodmFsaWRhdGVkKSA9PT0gJ251bWJlcicgJiYgIU51bWJlci5pc05hTih2YWxpZGF0ZWQpIH07XG4gICAgICAgIGlmICh0ViA9PT0gTykgcmV0dXJuIHsgdmFsaWRhdGVkOiBKU09OLnBhcnNlKHZhbHVlKSwgaXNWYWxpZDogdHJ1ZSB9O1xuICAgICAgICBpZiAoIXRWKSByZXR1cm4geyB2YWxpZGF0ZWQ6IHZhbHVlLCBpc1ZhbGlkOiB0cnVlIH07XG4gICAgICB9IGNhdGNoKGUpIHt9XG4gICAgICByZXR1cm4geyB2YWxpZGF0ZWQ6IHZhbHVlLCBpc1ZhbGlkOiBmYWxzZSB9O1xuICAgIH0sIFt2YWx1ZSwgdFZdKTtcblxuICAgIGNvbnN0IEFsbG93QWRtaW4gPSB1c2VBc3luY01lbW88YW55Pihhc3luYyAoKSA9PiB7XG4gICAgICByZXR1cm4gYXdhaXQgZGVlcC5jYW4oZGVlcC5saW5rSWQsIGRlZXAubGlua0lkLCBkZWVwLmlkTG9jYWwoJ0BkZWVwLWZvdW5kYXRpb24vY29yZScsICdBbGxvd0FkbWluJykpO1xuICAgIH0sIFtdLCBmYWxzZSk7XG4gICAgY29uc3QgQWxsb3dJbnNlcnRUeXBlID0gdXNlQXN5bmNNZW1vPGFueT4oYXN5bmMgKCkgPT4ge1xuICAgICAgcmV0dXJuICF0eXBlSWQgPyBmYWxzZSA6IGF3YWl0IGRlZXAuY2FuKCt0eXBlSWQsIGRlZXAubGlua0lkLCBkZWVwLmlkTG9jYWwoJ0BkZWVwLWZvdW5kYXRpb24vY29yZScsICdBbGxvd0luc2VydFR5cGUnKSk7XG4gICAgfSwgW3R5cGVJZF0sIGZhbHNlKTtcbiAgICBjb25zdCBjYW4gPSBBbGxvd0luc2VydFR5cGUgfHwgQWxsb3dBZG1pbjtcbiAgICBcbiAgICBjb25zdCBpbnNlcnRRdWVyeSA9IHR5cGUgPyB7XG4gICAgICB0eXBlX2lkOiB0eXBlLmlkLFxuICAgICAgLi4uKGZyb21JZCAmJiB0b0lkID8geyBmcm9tX2lkOiArZnJvbUlkLCB0b19pZDogK3RvSWQgfSA6IHt9KSxcbiAgICAgIGNvbnRhaW5lcklkLFxuICAgICAgLi4uKG5hbWUgPyB7IG5hbWUgfSA6IHt9KSxcbiAgICAgIC4uLih0ViA9PSBTID8geyBzdHJpbmc6IHsgZGF0YTogeyB2YWx1ZTogdmFsaWRhdGVkIH0gfSB9IDogdFYgPT0gTiA/IHsgbnVtYmVyOiB7IGRhdGE6IHsgdmFsdWU6IHZhbGlkYXRlZCB9IH19IDogdFYgPT0gTyA/IHsgb2JqZWN0OiB7IGRhdGE6IHsgdmFsdWU6IHZhbGlkYXRlZCB9IH0gfSA6IHt9KSxcbiAgICB9IDoge307XG5cbiAgICBjb25zdCB2YWx1ZVR5cGUgPSBSZWFjdC51c2VNZW1vKCgpID0+IHR5cGU/Lm91dEJ5VHlwZVtWXT8uWzBdPy50b19pZCwgW3R5cGVdKTtcblxuICAgIGNvbnN0IGJ1dHRvbnMgPSA8PlxuICAgICAgPGMuU2xpZGVGYWRlIGluPXt0cnVlfSBvZmZzZXRYPSctMC41cmVtJyBzdHlsZT17e3Bvc2l0aW9uOiAnYWJzb2x1dGUnLCB0b3A6IDAsIHJpZ2h0OiAnLTRlbSd9fT5cbiAgICAgICAgPGMuQnV0dG9uXG4gICAgICAgICAgdz0nM2VtJyBoPSczZW0nXG4gICAgICAgICAgYm94U2hhZG93PSdkYXJrLWxnJ1xuICAgICAgICAgIHZhcmlhbnQ9e3VuZGVmaW5lZH1cbiAgICAgICAgICBvbkNsaWNrPXtkaXNjbG9zdXJlLm9uQ2xvc2V9XG4gICAgICAgID48QnNYIC8+PC9jLkJ1dHRvbj5cbiAgICAgIDwvYy5TbGlkZUZhZGU+XG4gICAgICA8Yy5TbGlkZUZhZGVcbiAgICAgICAgaW49eygoISFmcm9tSWQgJiYgISF0b0lkKSB8fCB0eXBlPy5pZCA9PT0gMSB8fCAoIXR5cGU/LmZyb21faWQgJiYgIXR5cGU/LnRvX2lkKSkgJiYgKGlzVmFsaWQgfHwgdmFsdWUgPT09ICcnKX1cbiAgICAgICAgb2Zmc2V0WD0nLTAuNXJlbScgc3R5bGU9e3twb3NpdGlvbjogJ2Fic29sdXRlJywgYm90dG9tOiAwLCByaWdodDogJy00ZW0nfX1cbiAgICAgID5cbiAgICAgICAgPGMuQnV0dG9uXG4gICAgICAgICAgdz0nM2VtJyBoPSczZW0nXG4gICAgICAgICAgYm94U2hhZG93PSdkYXJrLWxnJ1xuICAgICAgICAgIHZhcmlhbnQ9eydhY3RpdmUnfVxuICAgICAgICAgIG9uQ2xpY2s9e2FzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGF3YWl0IGRlZXAuaW5zZXJ0KGluc2VydFF1ZXJ5KTtcbiAgICAgICAgICAgIGRpc2Nsb3N1cmUub25DbG9zZSgpO1xuICAgICAgICAgIH19XG4gICAgICAgID48QnNDaGVjazIgLz48L2MuQnV0dG9uPlxuICAgICAgPC9jLlNsaWRlRmFkZT5cbiAgICA8Lz47XG5cbiAgICBjb25zdCBhbGVydCA9IDw+XG4gICAgICA8Yy5BbGVydCBzdGF0dXM9e2NhbiA/ICdpbmZvJyA6ICdlcnJvcid9PlxuICAgICAgICA8Yy5BbGVydEljb24gLz5cbiAgICAgICAgPGMuQWxlcnRUaXRsZT5Zb3Uge2NhbiA/ICdjYW4nIDogJ2NhbmB0J30gZG8gaXQuPC9jLkFsZXJ0VGl0bGU+XG4gICAgICA8L2MuQWxlcnQ+XG4gICAgICA8Z28uRWRpdG9yXG4gICAgICAgIHZhbHVlPXtgYXdhaXQgZGVlcC5jYW4oZGVlcC5saW5rSWQsIGRlZXAubGlua0lkLCBkZWVwLmlkTG9jYWwoJ0BkZWVwLWZvdW5kYXRpb24vY29yZScsICdBbGxvd0FkbWluJykpXG4vLyAke0FsbG93QWRtaW59JHshIXR5cGVJZCA/IGBcbmF3YWl0IGRlZXAuY2FuKCR7dHlwZUlkfSwgZGVlcC5saW5rSWQsIGRlZXAuaWRMb2NhbCgnQGRlZXAtZm91bmRhdGlvbi9jb3JlJywgJ0FsbG93SW5zZXJ0VHlwZScpKVxuLy8gJHtBbGxvd0luc2VydFR5cGV9YCA6ICcnfWB9XG4gICAgICAgIGVkaXRhYmxlPXtmYWxzZX0gcmVhZE9ubHlcbiAgICAgIC8+XG4gICAgPC8+O1xuXG4gICAgcmV0dXJuIDxnby5PblxuICAgICAgZG89e3tcbiAgICAgIH19XG4gICAgPlxuICAgICAgPGMuTW9kYWxcbiAgICAgICAgcmVmPXtyZWZ9XG4gICAgICAgIGNsb3NlT25PdmVybGF5Q2xpY2sgYmxvY2tTY3JvbGxPbk1vdW50PXtmYWxzZX1cbiAgICAgICAgb25DbG9zZT17ZGlzY2xvc3VyZS5vbkNsb3NlfVxuICAgICAgICBpc09wZW49e2Rpc2Nsb3N1cmUuaXNPcGVufSBwb3J0YWxQcm9wcz17eyBjb250YWluZXJSZWY6IGdvLnJvb3QoKS5yZWYgfX1cbiAgICAgID5cbiAgICAgICAgPGMuTW9kYWxPdmVybGF5IC8+XG4gICAgICAgIDxjLk1vZGFsQ29udGVudCB3PSczMGVtJyBtYXhXPSczMGVtJyBwb3NpdGlvbj0ncmVsYXRpdmUnPlxuICAgICAgICAgIDxjLk1vZGFsSGVhZGVyPkxpbmsgaW5zZXJ0aW5nOjwvYy5Nb2RhbEhlYWRlcj5cbiAgICAgICAgICA8Yy5Nb2RhbEJvZHkgcD17MH0gdz0nMTAwJScgaD0nMTAwJSc+XG4gICAgICAgICAgICB7IWNhbiAmJiBhbGVydH1cbiAgICAgICAgICAgIDxnby5Db21wb25lbnQgcGF0aD17W2RwbCwgJ0ZpbmRlcklucHV0J119XG4gICAgICAgICAgICAgIGxlZnRJY29uPXs8VHlwZUljb24vPn1cbiAgICAgICAgICAgICAgdmFsdWU9e3R5cGVJZH1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9e2lkID0+IHNldFR5cGVJZChpZCl9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPGMuU2ltcGxlR3JpZCBjb2x1bW5zPXsyfT5cbiAgICAgICAgICAgICAgPGdvLkNvbXBvbmVudCBwYXRoPXtbZHBsLCAnRmluZGVySW5wdXQnXX1cbiAgICAgICAgICAgICAgICBsZWZ0SWNvbj17PEZyb21JY29uLz59XG4gICAgICAgICAgICAgICAgdmFsdWU9e2Zyb21JZH1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17aWQgPT4gc2V0RnJvbUlkKGlkKX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPGdvLkNvbXBvbmVudCBwYXRoPXtbZHBsLCAnRmluZGVySW5wdXQnXX1cbiAgICAgICAgICAgICAgICBsZWZ0SWNvbj17PFRvSWNvbi8+fVxuICAgICAgICAgICAgICAgIHZhbHVlPXt0b0lkfVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtpZCA9PiBzZXRUb0lkKGlkKX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvYy5TaW1wbGVHcmlkPlxuICAgICAgICAgICAgPGMuU2ltcGxlR3JpZCBjb2x1bW5zPXsyfT5cbiAgICAgICAgICAgICAgPGdvLkNvbXBvbmVudCBwYXRoPXtbZHBsLCAnRmluZGVySW5wdXQnXX1cbiAgICAgICAgICAgICAgICBsZWZ0SWNvbj17PD7wn5eC77iPPC8+fVxuICAgICAgICAgICAgICAgIHZhbHVlPXtjb250YWluZXJJZH1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17aWQgPT4gc2V0Q29udGFpbklkKGlkKX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPGMuSW5wdXRcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj0nbmFtZScgaD0nM2VtJ1xuICAgICAgICAgICAgICAgIHZhbHVlPXtuYW1lfVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtlID0+IHNldE5hbWUoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9jLlNpbXBsZUdyaWQ+XG4gICAgICAgICAgICB7ISF0eXBlICYmIDxjLkJveD5cbiAgICAgICAgICAgICAgeyF2YWx1ZVR5cGUgJiYgPD5cbiAgICAgICAgICAgICAgICA8Yy5BbGVydCBzdGF0dXM9J2luZm8nPlxuICAgICAgICAgICAgICAgICAgPGMuQWxlcnRJY29uLz5cbiAgICAgICAgICAgICAgICAgIDxjLkFsZXJ0VGl0bGU+dHlwZSB7K3R5cGV9IGNhbid0IGhhdmUgVmFsdWU8L2MuQWxlcnRUaXRsZT5cbiAgICAgICAgICAgICAgICA8L2MuQWxlcnQ+XG4gICAgICAgICAgICAgIDwvPn1cbiAgICAgICAgICAgICAge3ZhbHVlVHlwZSA9PT0gUyAmJiA8PlxuICAgICAgICAgICAgICAgIDxnby5FZGl0b3IgcGxhY2Vob2xkZXI9J1N0cmluZyB2YWx1ZScgdmFsdWU9e3ZhbHVlfSBvbkNoYW5nZT17c2V0VmFsdWV9Lz5cbiAgICAgICAgICAgICAgPC8+fVxuICAgICAgICAgICAgICB7dmFsdWVUeXBlID09PSBOICYmIDw+XG4gICAgICAgICAgICAgICAgPGMuSW5wdXRcbiAgICAgICAgICAgICAgICAgIHR5cGU9J3N0cmluZydcbiAgICAgICAgICAgICAgICAgIHZhbHVlPXt2YWx1ZX1cbiAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPSdOdW1iZXIgdmFsdWUnXG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17ZSA9PiBzZXRWYWx1ZShlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC8+fVxuICAgICAgICAgICAgICB7dmFsdWVUeXBlID09PSBPICYmIDw+XG4gICAgICAgICAgICAgICAgPGdvLkVkaXRvciBwbGFjZWhvbGRlcj0nT2JqZWN0IHZhbHVlJyB2YWx1ZT17dmFsdWV9IG9uQ2hhbmdlPXtzZXRWYWx1ZX0vPlxuICAgICAgICAgICAgICA8Lz59XG4gICAgICAgICAgICAgIHsodFYgPT09IFMgfHwgdFYgPT09IE4gfHwgdFYgPT09IE8pICYmIDxjLlRhZ1xuICAgICAgICAgICAgICAgIHNpemU9J2xnJyBjb2xvclNjaGVtZT17dmFsdWUgPT09ICcnID8gJ2JsYWNrJyA6IGlzVmFsaWQgPyAnZGVlcEFjdGl2ZScgOiAnZGFuZ2VyJ30gdmFyaWFudD0nc29saWQnIGJvcmRlclJhZGl1cz0nZnVsbCdcbiAgICAgICAgICAgICAgICBwb3NpdGlvbj0nYWJzb2x1dGUnIGJvdHRvbT0nLTAuNWVtJyByaWdodD0nLTAuNWVtJ1xuICAgICAgICAgICAgICA+e3ZhbHVlID09PSAnJyA/ICdlbXB0eScgOiBpc1ZhbGlkID8gJ3ZhbGlkJyA6ICdpbnZhbGlkJ308L2MuVGFnPn1cbiAgICAgICAgICAgIDwvYy5Cb3g+fVxuICAgICAgICAgICAgPGMuRGl2aWRlciBtdD0nMWVtJyBtYj0nMWVtJy8+XG4gICAgICAgICAgICA8Z28uRWRpdG9yXG4gICAgICAgICAgICAgIHZhbHVlPXtgYXdhaXQgZGVlcC5pbnNlcnQoJHtKU09OLnN0cmluZ2lmeShpbnNlcnRRdWVyeSwgbnVsbCwgMil9KWB9XG4gICAgICAgICAgICAgIGVkaXRhYmxlPXtmYWxzZX0gcmVhZE9ubHlcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICB7ISFjYW4gJiYgYWxlcnR9XG4gICAgICAgICAgPC9jLk1vZGFsQm9keT5cbiAgICAgICAgICB7YnV0dG9uc31cbiAgICAgICAgPC9jLk1vZGFsQ29udGVudD5cbiAgICAgIDwvYy5Nb2RhbD5cbiAgICA8L2dvLk9uPjtcbiAgfTtcbn0iXX0=",
        "link_id": 16360
      }
    },
    {
      "id": 16361,
      "type_id": 3,
      "from_id": 16347,
      "to_id": 16360,
      "value": {
        "id": 1605,
        "value": "generated",
        "link_id": 16361
      }
    },
    {
      "id": 16362,
      "type_id": 143,
      "from_id": 16360,
      "to_id": 16347
    },
    {
      "id": 16363,
      "type_id": 3,
      "from_id": 16347,
      "to_id": 16362
    },
    {
      "id": 16441,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1608,
        "value": "({ deep, data, require, Go }) => {\n  const React = require('react');\n  const { BsX, BsCheck2 } = require('react-icons/bs');\n  const c = require('@chakra-ui/react');\n\n  const { useAsyncMemo } = require('use-async-memo');\n\n  const dc = '@deep-foundation/core';\n  const V = deep.idLocal(dc, 'Value');\n\n  return ({ go, linkId, containerId, disclosure }, ref) => {\n    if (!disclosure) throw new Error('!disclosure');\n    if (!linkId) throw new Error('!linkId');\n\n    const link = React.useMemo(() => deep.get(linkId), [linkId]);\n    const [containment, setContainment] = React.useState('contains');\n    const [down, setDown] = React.useState(true);\n\n    const AllowAdmin = useAsyncMemo(async () => {\n      return await deep.can(deep.linkId, deep.linkId, deep.idLocal(dc, 'AllowAdmin'));\n    }, [], false);\n\n    const AllowDeleteType = useAsyncMemo(async () => {\n      return !link.type_id ? false : await deep.can(link.type_id, deep.linkId, deep.idLocal(dc, 'AllowDeleteType'));\n    }, [link.type_id], false);\n\n    const AllowDelete = useAsyncMemo(async () => {\n      return !linkId ? false : await deep.can(linkId, deep.linkId, deep.idLocal(dc, 'AllowDelete'));\n    }, [linkId], false);\n\n    const can = AllowAdmin || AllowDeleteType || AllowDelete;\n\n    const deleteQuery = {\n      _or: [\n        (down ? {\n          up: {\n            tree_id: deep.idLocal(dc, 'containTree'),\n            parent_id: link.id,\n          }\n        } : {\n          id: link.id,\n        }),\n        ...(containment === 'contains' ? [{\n          type_id: deep.idLocal(dc, 'Contain'),\n          to_id: link.id,\n        }] : containment === 'container' ? [{\n          type_id: deep.idLocal(dc, 'Contain'),\n          from_id: containerId,\n          to_id: link.id,\n        }] : []),\n      ],\n    };\n\n    const { data: countDown } = deep.useQuery({\n      up: {\n        tree_id: deep.idLocal(dc, 'containTree'),\n        parent_id: link.id,\n      }\n    }, {\n      skip: !disclosure.isOpen,\n      aggregate: 'count',\n    });\n\n    const { data: countInContains } = deep.useQuery({\n      to_id: link.id,\n      type_id: deep.idLocal(dc, 'Contain'),\n    }, {\n      skip: !disclosure.isOpen,\n      aggregate: 'count'\n    });\n\n    const buttons = (\n      <>\n        <c.SlideFade in={true} offsetX='-0.5rem' style={{ position: 'absolute', top: 0, right: '-4em' }}>\n          <c.Button w='3em' h='3em' boxShadow='dark-lg' onClick={disclosure.onClose}>\n            <BsX />\n          </c.Button>\n        </c.SlideFade>\n        <c.SlideFade in={true} offsetX='-0.5rem' style={{ position: 'absolute', bottom: 0, right: '-4em' }}>\n          <c.Button w='3em' h='3em' boxShadow='dark-lg' variant='active' onClick={async () => {\n            await deep.delete(deleteQuery);\n            disclosure.onClose();\n          }}>\n            <BsCheck2 />\n          </c.Button>\n        </c.SlideFade>\n      </>\n    );\n    \n    const alert = (\n      <React.Fragment>\n        <c.Alert status={can ? 'info' : 'error'}>\n          <c.AlertIcon />\n          <c.AlertTitle>\n            You {can ? 'can' : \"can't\"} do it.\n          </c.AlertTitle>\n        </c.Alert>\n        <go.Editor\n          value={`await deep.can(deep.linkId, deep.linkId, deep.idLocal('@deep-foundation/core', 'AllowAdmin'))\n// ${AllowAdmin}\nawait deep.can(${link.type_id}, deep.linkId, deep.idLocal('@deep-foundation/core', 'AllowDeleteType'))\n// ${AllowDeleteType}\nawait deep.can(${link.id}, deep.linkId, deep.idLocal('@deep-foundation/core', 'AllowDelete'))\n// ${AllowDelete}`}\n          editable={false}\n          readOnly\n        />\n      </React.Fragment>\n    );\n    \n    return (\n      <go.On do={{}}>\n        <c.Modal\n          ref={ref}\n          closeOnOverlayClick\n          blockScrollOnMount={false}\n          onClose={disclosure.onClose}\n          isOpen={disclosure.isOpen}\n          portalProps={{\n            containerRef: go.root().ref\n          }}\n        >\n          <c.ModalOverlay />\n          <c.ModalContent w='30em' maxW='30em' position='relative'>\n            <c.ModalHeader>\n              Link deleting: {`${link}`}\n            </c.ModalHeader>\n            <c.ModalBody p={0} w='100%' h='100%'>\n              {alert}\n              <c.Box p='1em'>\n                <c.Checkbox\n                  size='lg'\n                  checked={down}\n                  onChange={() => setDown(!down)}\n                >\n                  Delete all contained in links? Total: ({countDown})\n                </c.Checkbox>\n              </c.Box>\n              <c.Box p='1em'>\n                Need to delete contains to this link?\n              </c.Box>\n              <c.Box>\n                <c.SimpleGrid columns={3}>\n                  <c.Button\n                    variant={containment === 'contains' ? 'active' : undefined}\n                    onClick={() => setContainment('contains')}\n                  >\n                    <c.Box>\n                      <c.Box>all in</c.Box>\n                      <c.Box fontSize='xs'>\n                        contains: ({countInContains})\n                      </c.Box>\n                    </c.Box>\n                  </c.Button>\n                  {!!containerId && (\n                    <c.Button\n                      variant={containment === 'container' ? 'active' : undefined}\n                      onClick={() => setContainment('container')}\n                    >\n                      <c.Box>\n                        <c.Box>only one</c.Box>\n                        <c.Box fontSize='xs'>\n                          from {containerId}\n                        </c.Box>\n                      </c.Box>\n                    </c.Button>\n                  )}\n                  <c.Button\n                    variant={containment === 'only' ? 'active' : undefined}\n                    onClick={() => setContainment('only')}\n                  >\n                    <c.Box>\n                      <c.Box>not need</c.Box>\n                      <c.Box fontSize='xs'>\n                        to delete contains\n                      </c.Box>\n                    </c.Box>\n                  </c.Button>\n                </c.SimpleGrid>\n              </c.Box>\n              <go.Editor\n                value={`await deep.delete(${JSON.stringify(deleteQuery, null, 2)})`}\n                editable={false}\n                readOnly\n              />\n            </c.ModalBody>\n            {buttons}\n          </c.ModalContent>\n        </c.Modal>\n      </go.On>\n    );\n  };\n};",
        "link_id": 16441
      }
    },
    {
      "id": 16442,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 16441,
      "value": {
        "id": 1607,
        "value": "LinkDeleteModalComponent",
        "link_id": 16442
      }
    },
    {
      "id": 16445,
      "type_id": 35,
      "from_id": 145,
      "to_id": 16441
    },
    {
      "id": 16446,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 16445,
      "value": {
        "id": 1609,
        "value": "LinkDeleteModal",
        "link_id": 16446
      }
    },
    {
      "id": 17040,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1649,
        "value": "({ deep, data, require, Go }) => {\n    const React = require('react');\n    const c = require('@chakra-ui/react');\n    return ({ go, id, ...props }, ref) => {\n        const { cy } = go.useGraph();\n        const data = { id: `${id}`, label: `${id}` };\n        const classes = ['link-ghost'];\n        return React.createElement(go.GraphNode, { ghost: true, element: {\n                data, classes,\n            }, ...props });\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxDQUFDLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRTtJQUM5QixNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7SUFFL0IsTUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLGtCQUFrQixDQUFDLENBQUM7SUFFdEMsT0FBTyxDQUFDLEVBQ04sRUFBRSxFQUNGLEVBQUUsRUFFRixHQUFHLEtBQUssRUFDVCxFQUFFLEdBQUcsRUFBRSxFQUFFO1FBQ1IsTUFBTSxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsQ0FBQyxRQUFRLEVBQUUsQ0FBQztRQUM3QixNQUFNLElBQUksR0FBRyxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsRUFBRSxFQUFFLEtBQUssRUFBRSxHQUFHLEVBQUUsRUFBRSxFQUFFLENBQUM7UUFDN0MsTUFBTSxPQUFPLEdBQUcsQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUMvQixPQUFPLG9CQUFDLEVBQUUsQ0FBQyxTQUFTLElBQ2xCLEtBQUssUUFDTCxPQUFPLEVBQUU7Z0JBQ1AsSUFBSSxFQUFFLE9BQU87YUFDZCxLQUNHLEtBQUssR0FDVCxDQUFDO0lBQ0wsQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiKHsgZGVlcCwgZGF0YSwgcmVxdWlyZSwgR28gfSkgPT4ge1xuICBjb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG4gIFxuICBjb25zdCBjID0gcmVxdWlyZSgnQGNoYWtyYS11aS9yZWFjdCcpO1xuXG4gIHJldHVybiAoe1xuICAgIGdvLFxuICAgIGlkLFxuXG4gICAgLi4ucHJvcHNcbiAgfSwgcmVmKSA9PiB7XG4gICAgY29uc3QgeyBjeSB9ID0gZ28udXNlR3JhcGgoKTtcbiAgICBjb25zdCBkYXRhID0geyBpZDogYCR7aWR9YCwgbGFiZWw6IGAke2lkfWAgfTtcbiAgICBjb25zdCBjbGFzc2VzID0gWydsaW5rLWdob3N0J107XG4gICAgcmV0dXJuIDxnby5HcmFwaE5vZGVcbiAgICAgIGdob3N0XG4gICAgICBlbGVtZW50PXt7XG4gICAgICAgIGRhdGEsIGNsYXNzZXMsXG4gICAgICB9fVxuICAgICAgey4uLnByb3BzfVxuICAgIC8+O1xuICB9O1xufSJdfQ==",
        "link_id": 17040
      }
    },
    {
      "id": 17041,
      "type_id": 3,
      "from_id": 17034,
      "to_id": 17040,
      "value": {
        "id": 1648,
        "value": "generated",
        "link_id": 17041
      }
    },
    {
      "id": 17042,
      "type_id": 143,
      "from_id": 17040,
      "to_id": 17034
    },
    {
      "id": 17043,
      "type_id": 3,
      "from_id": 17034,
      "to_id": 17042
    },
    {
      "id": 16008,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1579,
        "value": "async ({ deep, data, Go, require }) => {\n    const React = require('react');\n    const c = require('@chakra-ui/react');\n    const dpl = '@deep-foundation/perception-links';\n    const GraphLinkPlanet = await deep.id(dpl, 'GraphLinkPlanet');\n    return ({ go, isActive, position, locked = false, children, }, ref) => {\n        const { cy } = go.useGraph();\n        const $inouts = cy.$(`.link-type[target=\"${go.linkId}\"],.link-from[target=\"${go.linkId}\"],.link-to[target=\"${go.linkId}\"]`);\n        const inouts = $inouts.map((e) => {\n            return { id: e.id(), linkId: e.data().linkId };\n        });\n        const nav = go.useNav();\n        nav('current', go?.link?.from_id ? 'from_id' : 'current', 'type_id', go?.link?.to_id ? 'to_id' : 'current', inouts?.length ? 'inout' : 'current');\n        nav('from_id', 'from', 'from_id', 'current', 'from_id');\n        nav('to_id', 'current', 'to_id', 'to', 'to_id');\n        nav('type_id', 'type_id', 'type', 'type_id', 'current');\n        const [inoutId, setInoutId] = React.useState();\n        nav('inout', 'inout', 'current', 'inout', 'inouted');\n        React.useEffect(() => {\n            $inouts.removeClass('link-edge-active');\n            if (go.value === 'inout' && inoutId)\n                cy.$id(inoutId).addClass('link-edge-active');\n        }, [go.value, inoutId]);\n        React.useEffect(() => {\n            if (!isActive)\n                go.set('current');\n        }, [isActive]);\n        return React.createElement(go.On, { do: {\n                exec: (g, v, o) => {\n                    if (!go.value || go.value === 'current')\n                        go.focus(GraphLinkPlanet);\n                    if (go.value === GraphLinkPlanet)\n                        go.focus('current');\n                },\n                focus: (g, v, o) => { },\n                use: (g, v, o) => { },\n                position: (g, v, o) => { },\n                scroll: (g, v, o) => {\n                    console.log(ref);\n                    cy.center(ref.current);\n                },\n                ...(go.value === 'inout') ? {\n                    left: (g, v, o) => {\n                        if (o?.hotkeyEvent?.meta || o?.hotkeyEvent?.shift || o?.hotkeyEvent?.ctrl || o?.hotkeyEvent?.alt) {\n                            setInoutId(inouts?.[0]);\n                        }\n                        else\n                            setInoutId(go.prev(inouts, inoutId));\n                    },\n                    right: (g, v, o) => {\n                        if (o?.hotkeyEvent?.meta || o?.hotkeyEvent?.shift || o?.hotkeyEvent?.ctrl || o?.hotkeyEvent?.alt) {\n                            setInoutId(inouts?.[inouts.length - 1]?.id);\n                        }\n                        else\n                            setInoutId(go.next(inouts, inoutId));\n                    },\n                } : {\n                    left: (g, v, o) => {\n                        go.focus(nav.get(go.value || 'current', 'left'), { prev: go.value });\n                    },\n                    right: (g, v, o) => {\n                        go.focus(nav.get(go.value || 'current', 'right'), { prev: go.value });\n                    },\n                },\n                up: (g, v, o) => go.focus(nav.get(go.value || 'current', 'up'), { prev: go.value }),\n                down: (g, v, o) => go.focus(nav.get(go.value || 'current', 'down'), { prev: go.value }),\n            }, focus: {\n                type: (g, v, o) => go.set().go.go.do('open', { id: go.link.type_id, focus: true }),\n                from: (g, v, o) => go.set().go.go.do('open', { id: go.link.from_id, focus: true }),\n                to: (g, v, o) => go.set().go.go.do('open', { id: go.link.to_id, focus: true }),\n                inout: (g, v, o) => setInoutId(inouts?.[0]?.id),\n                inouted: (g, v, o) => {\n                    setInoutId();\n                    go.set().go.go.focus(cy.$id(inoutId)?.data()?.linkId);\n                }\n            } },\n            React.createElement(go.GraphNode, { element: {\n                    data: { id: `${go.link.id}-children` },\n                    classes: ['link-children'],\n                } },\n                React.createElement(go.GraphNode, { ref: ref, element: {\n                        data: { id: go.link.id, label: `${go.linkId}: ${go.link.name !== go.linkId ? go.link.name : ''}\n  (${go.link.type_id}: ${go.link.type?.name !== go.link.type_id ? go.link.type?.name : ''})\n  \n  ${go.link.symbol}` },\n                        classes: ['link-node', ...(isActive ? ['link-node-active'] : [])],\n                    }, onClick: (e) => {\n                        go.go.focus(go.linkId);\n                        go.do('exec');\n                    } },\n                    React.createElement(c.Box, { w: '0', h: '0', position: 'relative', ref: go.ref },\n                        React.createElement(go.Provider, { linkId: GraphLinkPlanet },\n                            React.createElement(go.Component, { path: [dpl, 'GraphLinkPlanet'], linkId: go.linkId, isActive: isActive && go.value === GraphLinkPlanet })))),\n                !!go.link.type_id && React.createElement(go.GraphEdge, { element: {\n                        data: { id: `${go.link.id}-type`, source: `${go.link.id}`, target: `${go.link.type_id}` },\n                        classes: ['link-edge', 'link-type', ...(go.value === 'type_id' ? ['link-edge-active'] : [])],\n                    } }),\n                !!go.link.from_id && React.createElement(go.GraphEdge, { element: {\n                        data: { id: `${go.link.id}-from`, source: `${go.link.id}`, target: `${go.link.from_id}` },\n                        classes: ['link-edge', 'link-from', ...(go.value === 'from_id' ? ['link-edge-active'] : [])],\n                    } }),\n                !!go.link.to_id && React.createElement(go.GraphEdge, { element: {\n                        data: { id: `${go.link.id}-to`, source: `${go.link.id}`, target: `${go.link.to_id}` },\n                        classes: ['link-edge', 'link-to', ...(go.value === 'to_id' ? ['link-edge-active'] : [])],\n                    } }),\n                children));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFO0lBQ3BDLE1BQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUMvQixNQUFNLENBQUMsR0FBRyxPQUFPLENBQUMsa0JBQWtCLENBQUMsQ0FBQztJQUV0QyxNQUFNLEdBQUcsR0FBRyxtQ0FBbUMsQ0FBQztJQUVoRCxNQUFNLGVBQWUsR0FBRyxNQUFNLElBQUksQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLGlCQUFpQixDQUFDLENBQUM7SUFFOUQsT0FBTyxDQUFDLEVBQ04sRUFBRSxFQUVGLFFBQVEsRUFFUixRQUFRLEVBQ1IsTUFBTSxHQUFHLEtBQUssRUFFZCxRQUFRLEdBQ1QsRUFBRSxHQUFHLEVBQUUsRUFBRTtRQUNSLE1BQU0sRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLENBQUMsUUFBUSxFQUFFLENBQUM7UUFFN0IsTUFBTSxPQUFPLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxzQkFBc0IsRUFBRSxDQUFDLE1BQU0seUJBQXlCLEVBQUUsQ0FBQyxNQUFNLHVCQUF1QixFQUFFLENBQUMsTUFBTSxJQUFJLENBQUMsQ0FBQztRQUM1SCxNQUFNLE1BQU0sR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUU7WUFDL0IsT0FBTyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQztRQUNqRCxDQUFDLENBQUMsQ0FBQztRQUVILE1BQU0sR0FBRyxHQUFHLEVBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQztRQUN4QixHQUFHLENBQUMsU0FBUyxFQUFFLEVB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QUMsRUFBRSxDQUFDLEtBQUssSUFBSSxTQUFTLEVBQUUsT0FBTyxDQUFDLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRSxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUE7b0JBQ3ZFLENBQUM7aUJBQ0Y7Z0JBQ0QsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsS0FBSyxJQUFJLFNBQVMsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFLENBQUMsS0FBSyxFQUFFLENBQUM7Z0JBQ2pGLElBQUksRUFBRSxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEtBQUssSUFBSSxTQUFTLEVBQUUsTUFBTSxDQUFDLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRSxDQUFDLEtBQUssRUFBRSxDQUFDO2FBQ3RGLEVBQUUsS0FBSyxFQUFFO2dCQUNSLElBQUksRUFBRSxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsQ0FBQztnQkFDaEYsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxDQUFDO2dC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SSxDQUFDLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUFFLEVBQUUsTUFBTSxFQUFFLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsRUFBRTt3QkFDckYsT0FBTyxFQUFFLENBQUMsV0FBVyxFQUFFLFNBQVMsRUFBRSxHQUFHLENBQUMsRUFBRSxDQUFDLEtBQUssS0FBSyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7cUJBQ3pGLEdBQUc7Z0JBQ0wsUUFBUSxDQUNJLENBQ1QsQ0FBQztJQUNYLENBQUMsQ0FBQztBQUNKLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImFzeW5jICh7IGRlZXAsIGRhdGEsIEdvLCByZXF1aXJlIH0pID0+IHtcbiAgY29uc3QgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuICBjb25zdCBjID0gcmVxdWlyZSgnQGNoYWtyYS11aS9yZWFjdCcpO1xuXG4gIGNvbnN0IGRwbCA9ICdAZGVlcC1mb3VuZGF0aW9uL3BlcmNlcHRpb24tbGlua3MnO1xuXG4gIGNvbnN0IEdyYXBoTGlua1BsYW5ldCA9IGF3YWl0IGRlZXAuaWQoZHBsLCAnR3JhcGhMaW5rUGxhbmV0Jyk7XG5cbiAgcmV0dXJuICh7XG4gICAgZ28sXG5cbiAgICBpc0FjdGl2ZSxcblxuICAgIHBvc2l0aW9uLFxuICAgIGxvY2tlZCA9IGZhbHNlLFxuXG4gICAgY2hpbGRyZW4sXG4gIH0sIHJlZikgPT4ge1xuICAgIGNvbnN0IHsgY3kgfSA9IGdvLnVzZUdyYXBoKCk7XG5cbiAgICBjb25zdCAkaW5vdXRzID0gY3kuJChgLmxpbmstdHlwZVt0YXJnZXQ9XCIke2dvLmxpbmtJZH1cIl0sLmxpbmstZnJvbVt0YXJnZXQ9XCIke2dvLmxpbmtJZH1cIl0sLmxpbmstdG9bdGFyZ2V0PVwiJHtnby5saW5rSWR9XCJdYCk7XG4gICAgY29uc3QgaW5vdXRzID0gJGlub3V0cy5tYXAoKGUpID0+IHtcbiAgICAgIHJldHVybiB7IGlkOiBlLmlkKCksIGxpbmtJZDogZS5kYXRhKCkubGlua0lkIH07XG4gICAgfSk7XG5cbiAgICBjb25zdCBuYXYgPSBnby51c2VOYXYoKTtcbiAgICBuYXYoJ2N1cnJlbnQnLCBnbz8ubGluaz8uZnJvbV9pZCA/ICdmcm9tX2lkJyA6ICdjdXJyZW50JywgJ3R5cGVfaWQnLCBnbz8ubGluaz8udG9faWQgPyAndG9faWQnIDogJ2N1cnJlbnQnLCBpbm91dHM/Lmxlbmd0aCA/ICdpbm91dCcgOiAnY3VycmVudCcpO1xuICAgIG5hdignZnJvbV9pZCcsICdmcm9tJywgJ2Zyb21faWQnLCAnY3VycmVudCcsICdmcm9tX2lkJyk7XG4gICAgbmF2KCd0b19pZCcsICdjdXJyZW50JywgJ3RvX2lkJywgJ3RvJywgJ3RvX2lkJyk7XG4gICAgbmF2KCd0eXBlX2lkJywgJ3R5cGVfaWQnLCAndHlwZScsICd0eXBlX2lkJywgJ2N1cnJlbnQnKTtcblxuICAgIGNvbnN0IFtpbm91dElkLCBzZXRJbm91dElkXSA9IFJlYWN0LnVzZVN0YXRlKCk7XG4gICAgbmF2KCdpbm91dCcsICdpbm91dCcsICdjdXJyZW50JywgJ2lub3V0JywgJ2lub3V0ZWQnKTtcbiAgICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgJGlub3V0cy5yZW1vdmVDbGFzcygnbGluay1lZGdlLWFjdGl2ZScpO1xuICAgICAgaWYgKGdvLnZhbHVlID09PSAnaW5vdXQnICYmIGlub3V0SWQpIGN5LiRpZChpbm91dElkKS5hZGRDbGFzcygnbGluay1lZGdlLWFjdGl2ZScpO1xuICAgIH0sIFtnby52YWx1ZSwgaW5vdXRJZF0pO1xuICAgIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICBpZiAoIWlzQWN0aXZlKSBnby5zZXQoJ2N1cnJlbnQnKTtcbiAgICB9LCBbaXNBY3RpdmVdKTtcblxuICAgIHJldHVybiA8Z28uT24gZG89e3tcbiAgICAgIGV4ZWM6IChnLHYsbykgPT4ge1xuICAgICAgICBpZiAoIWdvLnZhbHVlIHx8IGdvLnZhbHVlID09PSAnY3VycmVudCcpIGdvLmZvY3VzKEdyYXBoTGlua1BsYW5ldCk7XG4gICAgICAgIGlmIChnby52YWx1ZSA9PT0gR3JhcGhMaW5rUGxhbmV0KSBnby5mb2N1cygnY3VycmVudCcpO1xuICAgICAgfSxcbiAgICAgIGZvY3VzOiAoZyx2LG8pID0+IHt9LFxuICAgICAgdXNlOiAoZyx2LG8pID0+IHt9LFxuICAgICAgcG9zaXRpb246IChnLHYsbykgPT4ge30sXG4gICAgICBzY3JvbGw6IChnLHYsbykgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhyZWYpO1xuICAgICAgICBjeS5jZW50ZXIocmVmLmN1cnJlbnQpO1xuICAgICAgfSxcbiAgICAgIC4uLihnby52YWx1ZSA9PT0gJ2lub3V0JykgPyB7XG4gICAgICAgIGxlZnQ6IChnLHYsbykgPT4ge1xuICAgICAgICAgIGlmIChvPy5ob3RrZXlFdmVudD8ubWV0YSB8fCBvPy5ob3RrZXlFdmVudD8uc2hpZnQgfHwgbz8uaG90a2V5RXZlbnQ/LmN0cmwgfHwgbz8uaG90a2V5RXZlbnQ/LmFsdCkge1xuICAgICAgICAgICAgc2V0SW5vdXRJZChpbm91dHM/LlswXSk7XG4gICAgICAgICAgfSBlbHNlIHNldElub3V0SWQoZ28ucHJldihpbm91dHMsIGlub3V0SWQpKTtcbiAgICAgICAgfSxcbiAgICAgICAgcmlnaHQ6IChnLHYsbykgPT4ge1xuICAgICAgICAgIGlmIChvPy5ob3RrZXlFdmVudD8ubWV0YSB8fCBvPy5ob3RrZXlFdmVudD8uc2hpZnQgfHwgbz8uaG90a2V5RXZlbnQ/LmN0cmwgfHwgbz8uaG90a2V5RXZlbnQ/LmFsdCkge1xuICAgICAgICAgICAgc2V0SW5vdXRJZChpbm91dHM/Lltpbm91dHMubGVuZ3RoIC0gMV0/LmlkKTtcbiAgICAgICAgICB9IGVsc2Ugc2V0SW5vdXRJZChnby5uZXh0KGlub3V0cywgaW5vdXRJZCkpO1xuICAgICAgICB9LFxuICAgICAgfSA6IHtcbiAgICAgICAgbGVmdDogKGcsdixvKSA9PiB7XG4gICAgICAgICAgZ28uZm9jdXMobmF2LmdldChnby52YWx1ZSB8fCAnY3VycmVudCcsICdsZWZ0JyksIHsgcHJldjogZ28udmFsdWUgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIHJpZ2h0OiAoZyx2LG8pID0+IHtcbiAgICAgICAgICBnby5mb2N1cyhuYXYuZ2V0KGdvLnZhbHVlIHx8ICdjdXJyZW50JywgJ3JpZ2h0JyksIHsgcHJldjogZ28udmFsdWUgfSlcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICB1cDogKGcsdixvKSA9PiBnby5mb2N1cyhuYXYuZ2V0KGdvLnZhbHVlIHx8ICdjdXJyZW50JywgJ3VwJyksIHsgcHJldjogZ28udmFsdWUgfSksXG4gICAgICBkb3duOiAoZyx2LG8pID0+IGdvLmZvY3VzKG5hdi5nZXQoZ28udmFsdWUgfHwgJ2N1cnJlbnQnLCAnZG93bicpLCB7IHByZXY6IGdvLnZhbHVlIH0pLFxuICAgIH19IGZvY3VzPXt7XG4gICAgICB0eXBlOiAoZyx2LG8pID0+IGdvLnNldCgpLmdvLmdvLmRvKCdvcGVuJywgeyBpZDogZ28ubGluay50eXBlX2lkLCBmb2N1czogdHJ1ZSB9KSxcbiAgICAgIGZyb206IChnLHYsbykgPT4gZ28uc2V0KCkuZ28uZ28uZG8oJ29wZW4nLCB7IGlkOiBnby5saW5rLmZyb21faWQsIGZvY3VzOiB0cnVlIH0pLFxuICAgICAgdG86IChnLHYsbykgPT4gZ28uc2V0KCkuZ28uZ28uZG8oJ29wZW4nLCB7IGlkOiBnby5saW5rLnRvX2lkLCBmb2N1czogdHJ1ZSB9KSxcbiAgICAgIGlub3V0OiAoZyx2LG8pID0+IHNldElub3V0SWQoaW5vdXRzPy5bMF0/LmlkKSxcbiAgICAgIGlub3V0ZWQ6IChnLHYsbykgPT4ge1xuICAgICAgICBzZXRJbm91dElkKCk7XG4gICAgICAgIGdvLnNldCgpLmdvLmdvLmZvY3VzKGN5LiRpZChpbm91dElkKT8uZGF0YSgpPy5saW5rSWQpO1xuICAgICAgfVxuICAgIH19PlxuICAgICAgPGdvLkdyYXBoTm9kZSBlbGVtZW50PXt7XG4gICAgICAgIGRhdGE6IHsgaWQ6IGAke2dvLmxpbmsuaWR9LWNoaWxkcmVuYCB9LFxuICAgICAgICBjbGFzc2VzOiBbJ2xpbmstY2hpbGRyZW4nXSxcbiAgICAgIH19PlxuICAgICAgICA8Z28uR3JhcGhOb2RlXG4gICAgICAgICAgcmVmPXtyZWZ9XG4gICAgICAgICAgZWxlbWVudD17e1xuICAgICAgICAgICAgZGF0YTogeyBpZDogZ28ubGluay5pZCwgbGFiZWw6IGAke2dvLmxpbmtJZH06ICR7Z28ubGluay5uYW1lICE9PSBnby5saW5rSWQgPyBnby5saW5rLm5hbWUgOiAnJ31cbiAgKCR7Z28ubGluay50eXBlX2lkfTogJHtnby5saW5rLnR5cGU/Lm5hbWUgIT09IGdvLmxpbmsudHlwZV9pZCA/IGdvLmxpbmsudHlwZT8ubmFtZSA6ICcnfSlcbiAgXG4gICR7Z28ubGluay5zeW1ib2x9YCB9LFxuICAgICAgICAgICAgY2xhc3NlczogWydsaW5rLW5vZGUnLCAuLi4oaXNBY3RpdmUgPyBbJ2xpbmstbm9kZS1hY3RpdmUnXSA6IFtdKV0sXG4gICAgICAgICAgfX1cbiAgICAgICAgICBvbkNsaWNrPXsoZSkgPT4ge1xuICAgICAgICAgICAgZ28uZ28uZm9jdXMoZ28ubGlua0lkKTtcbiAgICAgICAgICAgIGdvLmRvKCdleGVjJyk7XG4gICAgICAgICAgfX1cbiAgICAgICAgPlxuICAgICAgICAgIDxjLkJveCB3PScwJyBoPScwJyBwb3NpdGlvbj0ncmVsYXRpdmUnIHJlZj17Z28ucmVmfT5cbiAgICAgICAgICAgIDxnby5Qcm92aWRlciBsaW5rSWQ9e0dyYXBoTGlua1BsYW5ldH0+XG4gICAgICAgICAgICAgIDxnby5Db21wb25lbnQgcGF0aD17W2RwbCwgJ0dyYXBoTGlua1BsYW5ldCddfSBsaW5rSWQ9e2dvLmxpbmtJZH0gaXNBY3RpdmU9e2lzQWN0aXZlICYmIGdvLnZhbHVlID09PSBHcmFwaExpbmtQbGFuZXR9Lz5cbiAgICAgICAgICAgIDwvZ28uUHJvdmlkZXI+XG4gICAgICAgICAgPC9jLkJveD5cbiAgICAgICAgPC9nby5HcmFwaE5vZGU+XG4gICAgICAgIHshIWdvLmxpbmsudHlwZV9pZCAmJiA8Z28uR3JhcGhFZGdlXG4gICAgICAgICAgZWxlbWVudD17e1xuICAgICAgICAgICAgZGF0YTogeyBpZDogYCR7Z28ubGluay5pZH0tdHlwZWAsIHNvdXJjZTogYCR7Z28ubGluay5pZH1gLCB0YXJnZXQ6IGAke2dvLmxpbmsudHlwZV9pZH1gIH0sXG4gICAgICAgICAgICBjbGFzc2VzOiBbJ2xpbmstZWRnZScsICdsaW5rLXR5cGUnLCAuLi4oZ28udmFsdWUgPT09ICd0eXBlX2lkJyA/IFsnbGluay1lZGdlLWFjdGl2ZSddIDogW10pXSxcbiAgICAgICAgICB9fS8+fVxuICAgICAgICB7ISFnby5saW5rLmZyb21faWQgJiYgPGdvLkdyYXBoRWRnZVxuICAgICAgICAgIGVsZW1lbnQ9e3tcbiAgICAgICAgICAgIGRhdGE6IHsgaWQ6IGAke2dvLmxpbmsuaWR9LWZyb21gLCBzb3VyY2U6IGAke2dvLmxpbmsuaWR9YCwgdGFyZ2V0OiBgJHtnby5saW5rLmZyb21faWR9YCB9LFxuICAgICAgICAgICAgY2xhc3NlczogWydsaW5rLWVkZ2UnLCAnbGluay1mcm9tJywgLi4uKGdvLnZhbHVlID09PSAnZnJvbV9pZCcgPyBbJ2xpbmstZWRnZS1hY3RpdmUnXSA6IFtdKV0sXG4gICAgICAgICAgfX0vPn1cbiAgICAgICAgeyEhZ28ubGluay50b19pZCAmJiA8Z28uR3JhcGhFZGdlXG4gICAgICAgICAgZWxlbWVudD17e1xuICAgICAgICAgICAgZGF0YTogeyBpZDogYCR7Z28ubGluay5pZH0tdG9gLCBzb3VyY2U6IGAke2dvLmxpbmsuaWR9YCwgdGFyZ2V0OiBgJHtnby5saW5rLnRvX2lkfWAgfSxcbiAgICAgICAgICAgIGNsYXNzZXM6IFsnbGluay1lZGdlJywgJ2xpbmstdG8nLCAuLi4oZ28udmFsdWUgPT09ICd0b19pZCcgPyBbJ2xpbmstZWRnZS1hY3RpdmUnXSA6IFtdKV0sXG4gICAgICAgICAgfX0vPn1cbiAgICAgICAge2NoaWxkcmVufVxuICAgICAgPC9nby5HcmFwaE5vZGU+XG4gICAgPC9nby5Pbj47XG4gIH07XG59Il19",
        "link_id": 16008
      }
    },
    {
      "id": 16009,
      "type_id": 3,
      "from_id": 5813,
      "to_id": 16008,
      "value": {
        "id": 1578,
        "value": "generated",
        "link_id": 16009
      }
    },
    {
      "id": 16010,
      "type_id": 143,
      "from_id": 16008,
      "to_id": 5813
    },
    {
      "id": 16011,
      "type_id": 3,
      "from_id": 5813,
      "to_id": 16010
    },
    {
      "id": 16347,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1601,
        "value": "({ deep, data, require, Go }) => {\n  const React = require('react');\n  const { BsX, BsCheck2, BsXLg, BsDatabase, BsRegex } = require('react-icons/bs');\n\n  const {\n    TypedIcon, DownIcon, UpIcon, TypeIcon, InIcon, OutIcon, FromIcon, ToIcon,\n  } = require('@deep-foundation/perception-app');\n\n  const { useAsyncMemo } = require('use-async-memo');\n  \n  const c = require('@chakra-ui/react');\n\n  const dc = '@deep-foundation/core';\n  const dpl = '@deep-foundation/perception-links';\n\n  const V = deep.idLocal(dc, 'Value');\n  const S = deep.idLocal(dc, 'String');\n  const N = deep.idLocal(dc, 'Number');\n  const O = deep.idLocal(dc, 'Object');\n\n  return ({\n    go,\n\n    defaultContainerId,\n    defaultTypeId,\n    defaultFromId,\n    defaultToId,\n\n    disclosure,\n  }, ref) => {\n    if (!disclosure) throw new Error('!disclosure');\n\n    const [typeId, setTypeId] = React.useState(defaultTypeId);\n    const [fromId, setFromId] = React.useState(defaultFromId);\n    const [toId, setToId] = React.useState(defaultToId);\n    const type = React.useMemo(() => typeId ? deep.get(+typeId) : null, [typeId]);\n    const from = React.useMemo(() => fromId ? deep.get(+fromId) : null, [fromId]);\n    const to = React.useMemo(() => toId ? deep.get(+toId) : null, [toId]);\n\n    const [value, setValue] = React.useState();\n    const [name, setName] = React.useState('');\n    const [containerId, setContainerId] = React.useState(defaultContainerId);\n\n    const tV = useAsyncMemo(async () => {\n      return typeId ? (await deep.select({ type_id: V, from_id: +typeId }))?.data?.[0]?.to_id : undefined;\n    }, [type]);\n    const { isValid, validated } = React.useMemo(() => {\n      try {\n        if (tV === S) return { validated: value, isValid: true };\n        if (tV === N) return { validated: +value, isValud: typeof(validated) === 'number' && !Number.isNaN(validated) };\n        if (tV === O) return { validated: JSON.parse(value), isValid: true };\n        if (!tV) return { validated: value, isValid: true };\n      } catch(e) {}\n      return { validated: value, isValid: false };\n    }, [value, tV]);\n\n    const AllowAdmin = useAsyncMemo<any>(async () => {\n      return await deep.can(deep.linkId, deep.linkId, deep.idLocal('@deep-foundation/core', 'AllowAdmin'));\n    }, [], false);\n    const AllowInsertType = useAsyncMemo<any>(async () => {\n      return !typeId ? false : await deep.can(+typeId, deep.linkId, deep.idLocal('@deep-foundation/core', 'AllowInsertType'));\n    }, [typeId], false);\n    const can = AllowInsertType || AllowAdmin;\n    \n    const insertQuery = type ? {\n      type_id: type.id,\n      ...(fromId && toId ? { from_id: +fromId, to_id: +toId } : {}),\n      containerId,\n      ...(name ? { name } : {}),\n      ...(tV == S ? { string: { data: { value: validated } } } : tV == N ? { number: { data: { value: validated } }} : tV == O ? { object: { data: { value: validated } } } : {}),\n    } : {};\n\n    const valueType = React.useMemo(() => type?.outByType[V]?.[0]?.to_id, [type]);\n\n    const buttons = <>\n      <c.SlideFade in={true} offsetX='-0.5rem' style={{position: 'absolute', top: 0, right: '-4em'}}>\n        <c.Button\n          w='3em' h='3em'\n          boxShadow='dark-lg'\n          variant={undefined}\n          onClick={disclosure.onClose}\n        ><BsX /></c.Button>\n      </c.SlideFade>\n      <c.SlideFade\n        in={((!!fromId && !!toId) || type?.id === 1 || (!type?.from_id && !type?.to_id)) && (isValid || value === '')}\n        offsetX='-0.5rem' style={{position: 'absolute', bottom: 0, right: '-4em'}}\n      >\n        <c.Button\n          w='3em' h='3em'\n          boxShadow='dark-lg'\n          variant={'active'}\n          onClick={async () => {\n            await deep.insert(insertQuery);\n            disclosure.onClose();\n          }}\n        ><BsCheck2 /></c.Button>\n      </c.SlideFade>\n    </>;\n\n    const alert = <>\n      <c.Alert status={can ? 'info' : 'error'}>\n        <c.AlertIcon />\n        <c.AlertTitle>You {can ? 'can' : 'can`t'} do it.</c.AlertTitle>\n      </c.Alert>\n      <go.Editor\n        value={`await deep.can(deep.linkId, deep.linkId, deep.idLocal('@deep-foundation/core', 'AllowAdmin'))\n// ${AllowAdmin}${!!typeId ? `\nawait deep.can(${typeId}, deep.linkId, deep.idLocal('@deep-foundation/core', 'AllowInsertType'))\n// ${AllowInsertType}` : ''}`}\n        editable={false} readOnly\n      />\n    </>;\n\n    return <go.On\n      do={{\n      }}\n    >\n      <c.Modal\n        ref={ref}\n        closeOnOverlayClick blockScrollOnMount={false}\n        onClose={disclosure.onClose}\n        isOpen={disclosure.isOpen} portalProps={{ containerRef: go.root().ref }}\n      >\n        <c.ModalOverlay />\n        <c.ModalContent w='30em' maxW='30em' position='relative'>\n          <c.ModalHeader>Link inserting:</c.ModalHeader>\n          <c.ModalBody p={0} w='100%' h='100%'>\n            {!can && alert}\n            <go.Component path={[dpl, 'FinderInput']}\n              leftIcon={<TypeIcon/>}\n              value={typeId}\n              onChange={id => setTypeId(id)}\n            />\n            <c.SimpleGrid columns={2}>\n              <go.Component path={[dpl, 'FinderInput']}\n                leftIcon={<FromIcon/>}\n                value={fromId}\n                onChange={id => setFromId(id)}\n              />\n              <go.Component path={[dpl, 'FinderInput']}\n                leftIcon={<ToIcon/>}\n                value={toId}\n                onChange={id => setToId(id)}\n              />\n            </c.SimpleGrid>\n            <c.SimpleGrid columns={2}>\n              <go.Component path={[dpl, 'FinderInput']}\n                leftIcon={<>🗂️</>}\n                value={containerId}\n                onChange={id => setContainId(id)}\n              />\n              <c.Input\n                placeholder='name' h='3em'\n                value={name}\n                onChange={e => setName(e.target.value)}\n              />\n            </c.SimpleGrid>\n            {!!type && <c.Box>\n              {!valueType && <>\n                <c.Alert status='info'>\n                  <c.AlertIcon/>\n                  <c.AlertTitle>type {+type} can't have Value</c.AlertTitle>\n                </c.Alert>\n              </>}\n              {valueType === S && <>\n                <go.Editor placeholder='String value' value={value} onChange={setValue}/>\n              </>}\n              {valueType === N && <>\n                <c.Input\n                  type='string'\n                  value={value}\n                  placeholder='Number value'\n                  onChange={e => setValue(e.target.value)}\n                />\n              </>}\n              {valueType === O && <>\n                <go.Editor placeholder='Object value' value={value} onChange={setValue}/>\n              </>}\n              {(tV === S || tV === N || tV === O) && <c.Tag\n                size='lg' colorScheme={value === '' ? 'black' : isValid ? 'deepActive' : 'danger'} variant='solid' borderRadius='full'\n                position='absolute' bottom='-0.5em' right='-0.5em'\n              >{value === '' ? 'empty' : isValid ? 'valid' : 'invalid'}</c.Tag>}\n            </c.Box>}\n            <c.Divider mt='1em' mb='1em'/>\n            <go.Editor\n              value={`await deep.insert(${JSON.stringify(insertQuery, null, 2)})`}\n              editable={false} readOnly\n            />\n            {!!can && alert}\n          </c.ModalBody>\n          {buttons}\n        </c.ModalContent>\n      </c.Modal>\n    </go.On>;\n  };\n}",
        "link_id": 16347
      }
    },
    {
      "id": 16348,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 16347,
      "value": {
        "id": 1600,
        "value": "LinkInsertModalComponent",
        "link_id": 16348
      }
    },
    {
      "id": 16351,
      "type_id": 35,
      "from_id": 145,
      "to_id": 16347
    },
    {
      "id": 16352,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 16351,
      "value": {
        "id": 1602,
        "value": "LinkInsertModal",
        "link_id": 16352
      }
    },
    {
      "id": 16541,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1633,
        "value": "({ deep, data, require, Go }) => {\n    const { BsX, BsCheck2All } = require(\"react-icons/bs\");\n    const React = require('react');\n    const c = require('@chakra-ui/react');\n    const dc = '@deep-foundation/core';\n    const dpl = '@deep-foundation/perception-links';\n    const Query = deep.idLocal(dc, 'Query');\n    const Contain = deep.idLocal(dc, 'Contain');\n    const FinderQuery = deep.idLocal(dpl, 'FinderQuery');\n    const Tree = deep.idLocal(dpl, 'Tree');\n    const Search = deep.idLocal(dpl, 'Search');\n    return ({ go, initialId = deep.linkId, initialHandlerId, startProps = {}, isActive, onSubmit, disclosure: __disclosure, }, ref) => {\n        const _disclosure = c.useDisclosure();\n        const disclosure = __disclosure || _disclosure;\n        const [selectedId, setSelectedId] = React.useState();\n        const [queryId, setQueryId] = React.useState();\n        const buttons = React.createElement(React.Fragment, null,\n            React.createElement(c.SlideFade, { in: true, offsetX: '-0.5rem', style: { position: 'absolute', top: 0, right: '-4em' } },\n                React.createElement(c.Button, { w: '3em', h: '3em', boxShadow: 'dark-lg', variant: undefined, onClick: disclosure.onClose },\n                    React.createElement(BsX, null))),\n            React.createElement(c.Box, { position: 'absolute', right: '0', bottom: '-4em' }, !!selectedId && React.createElement(c.Button, { h: '3em', rightIcon: React.createElement(BsCheck2All, null), onClick: () => {\n                    onSubmit && onSubmit(selectedId);\n                } }, `${deep.get(selectedId)}`)));\n        return React.createElement(go.On, { do: {\n                changed: (g, v, o) => o?.id && setSelectedId(o.id),\n            } },\n            React.createElement(c.Modal, { ref: disclosure.isOpen ? ref : null, closeOnOverlayClick: true, blockScrollOnMount: false, onClose: () => {\n                    disclosure.onClose();\n                    go.focus();\n                }, isOpen: disclosure.isOpen, portalProps: { containerRef: go.root().ref } },\n                React.createElement(c.ModalOverlay, null),\n                React.createElement(c.ModalContent, { w: '30em', maxW: '30em', h: '80vh', position: 'relative' },\n                    React.createElement(c.ModalHeader, null, \"Finder\"),\n                    React.createElement(c.ModalBody, { p: 0, w: '100%', h: '100%' },\n                        React.createElement(go.Provider, { linkId: Tree }, !!disclosure.isOpen && React.createElement(go.Handler, { initialId: initialId, initialHandlerId: initialHandlerId, startProps: startProps, handlerId: Tree, fullWidth: '30em', flex: '1', saveHistory: false, using: false }))),\n                    buttons)));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxDQUFDLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRTtJQUM5QixNQUFNLEVBQUUsR0FBRyxFQUFFLFdBQVcsRUFBRSxHQUFHLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0lBQ3ZELE1BQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUUvQixNQUFNLENBQUMsR0FBRyxPQUFPLENBQUMsa0JBQWtCLENBQUMsQ0FBQztJQUV0QyxNQUFNLEVBQUUsR0FBRyx1QkFBdUIsQ0FBQztJQUNuQyxNQUFNLEdBQUcsR0FBRyxtQ0FBbUMsQ0FBQztJQUVoRCxNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUUsRUFBRSxPQUFPLENBQUMsQ0FBQztJQUN4QyxNQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUUsRUFBRSxTQUFTLENBQUMsQ0FBQztJQUM1QyxNQUFNLFdBQVcsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxhQUFhLENBQUMsQ0FBQztJQUNyRCxNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxNQUFNLENBQUMsQ0FBQztJQUN2QyxNQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxRQUFRLENBQUMsQ0FBQztJQUUzQyxPQUFPLENBQUMsRUFDTixFQUFFLEVBRUYsU0FBUyxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQ3ZCLGdCQUFnQixFQUNoQixVQUFVLEdBQUcsRUFBRSxFQUNmLFFBQVEsRUFDUixRQUFRLEVBQ1IsVUFBVSxFQUFFLFlBQVksR0FDekIsRUFBRSxHQUFHLEVBQUUsRUFBRTtRQUNSLE1BQU0sV0FBVyxHQUFHLENBQUMs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QUFFLElBQUksRUFDZixTQUFTLEVBQUMsTUFBTSxFQUFDLElBQUksRUFBQyxHQUFHLEVBQ3pCLFdBQVcsRUFBRSxLQUFLLEVBQ2xCLEtBQUssRUFBRSxLQUFLLEdBQ1osQ0FDVSxDQUNGO29CQUNiLE9BQU8sQ0FDTyxDQUNULENBQ0osQ0FBQztJQUNYLENBQUMsQ0FBQztBQUNKLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbIih7IGRlZXAsIGRhdGEsIHJlcXVpcmUsIEdvIH0pID0+IHtcbiAgY29uc3QgeyBCc1gsIEJzQ2hlY2syQWxsIH0gPSByZXF1aXJlKFwicmVhY3QtaWNvbnMvYnNcIik7XG4gIGNvbnN0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbiAgXG4gIGNvbnN0IGMgPSByZXF1aXJlKCdAY2hha3JhLXVpL3JlYWN0Jyk7XG5cbiAgY29uc3QgZGMgPSAnQGRlZXAtZm91bmRhdGlvbi9jb3JlJztcbiAgY29uc3QgZHBsID0gJ0BkZWVwLWZvdW5kYXRpb24vcGVyY2VwdGlvbi1saW5rcyc7XG4gIFxuICBjb25zdCBRdWVyeSA9IGRlZXAuaWRMb2NhbChkYywgJ1F1ZXJ5Jyk7XG4gIGNvbnN0IENvbnRhaW4gPSBkZWVwLmlkTG9jYWwoZGMsICdDb250YWluJyk7XG4gIGNvbnN0IEZpbmRlclF1ZXJ5ID0gZGVlcC5pZExvY2FsKGRwbCwgJ0ZpbmRlclF1ZXJ5Jyk7XG4gIGNvbnN0IFRyZWUgPSBkZWVwLmlkTG9jYWwoZHBsLCAnVHJlZScpO1xuICBjb25zdCBTZWFyY2ggPSBkZWVwLmlkTG9jYWwoZHBsLCAnU2VhcmNoJyk7XG5cbiAgcmV0dXJuICh7XG4gICAgZ28sXG5cbiAgICBpbml0aWFsSWQgPSBkZWVwLmxpbmtJZCxcbiAgICBpbml0aWFsSGFuZGxlcklkLFxuICAgIHN0YXJ0UHJvcHMgPSB7fSxcbiAgICBpc0FjdGl2ZSxcbiAgICBvblN1Ym1pdCxcbiAgICBkaXNjbG9zdXJlOiBfX2Rpc2Nsb3N1cmUsXG4gIH0sIHJlZikgPT4ge1xuICAgIGNvbnN0IF9kaXNjbG9zdXJlID0gYy51c2VEaXNjbG9zdXJlKCk7XG4gICAgY29uc3QgZGlzY2xvc3VyZSA9IF9fZGlzY2xvc3VyZSB8fCBfZGlzY2xvc3VyZTtcblxuICAgIGNvbnN0IFtzZWxlY3RlZElkLCBzZXRTZWxlY3RlZElkXSA9IFJlYWN0LnVzZVN0YXRlKCk7XG4gICAgY29uc3QgW3F1ZXJ5SWQsIHNldFF1ZXJ5SWRdID0gUmVhY3QudXNlU3RhdGUoKTtcblxuICAgIGNvbnN0IGJ1dHRvbnMgPSA8PlxuICAgICAgPGMuU2xpZGVGYWRlIGluPXt0cnVlfSBvZmZzZXRYPSctMC41cmVtJyBzdHlsZT17e3Bvc2l0aW9uOiAnYWJzb2x1dGUnLCB0b3A6IDAsIHJpZ2h0OiAnLTRlbSd9fT5cbiAgICAgICAgPGMuQnV0dG9uXG4gICAgICAgICAgdz0nM2VtJyBoPSczZW0nXG4gICAgICAgICAgYm94U2hhZG93PSdkYXJrLWxnJ1xuICAgICAgICAgIHZhcmlhbnQ9e3VuZGVmaW5lZH1cbiAgICAgICAgICBvbkNsaWNrPXtkaXNjbG9zdXJlLm9uQ2xvc2V9XG4gICAgICAgID48QnNYIC8+PC9jLkJ1dHRvbj5cbiAgICAgIDwvYy5TbGlkZUZhZGU+XG4gICAgICA8Yy5Cb3ggcG9zaXRpb249J2Fic29sdXRlJyByaWdodD0nMCcgYm90dG9tPSctNGVtJz5cbiAgICAgICAgeyEhc2VsZWN0ZWRJZCAmJiA8Yy5CdXR0b25cbiAgICAgICAgICBoPSczZW0nIHJpZ2h0SWNvbj17PEJzQ2hlY2syQWxsIC8+fVxuICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgIG9uU3VibWl0ICYmIG9uU3VibWl0KHNlbGVjdGVkSWQpO1xuICAgICAgICAgIH19XG4gICAgICAgID57YCR7ZGVlcC5nZXQoc2VsZWN0ZWRJZCl9YH08L2MuQnV0dG9uPlxuICAgICAgPC9jLkJveD5cbiAgICA8Lz47XG5cbiAgICByZXR1cm4gPGdvLk9uXG4gICAgICBkbz17e1xuICAgICAgICBjaGFuZ2VkOiAoZyx2LG8pID0+IG8/LmlkICYmIHNldFNlbGVjdGVkSWQoby5pZCksXG4gICAgICB9fVxuICAgID5cbiAgICAgIDxjLk1vZGFsXG4gICAgICAgIHJlZj17ZGlzY2xvc3VyZS5pc09wZW4gPyByZWYgOiBudWxsfVxuICAgICAgICBjbG9zZU9uT3ZlcmxheUNsaWNrIGJsb2NrU2Nyb2xsT25Nb3VudD17ZmFsc2V9XG4gICAgICAgIG9uQ2xvc2U9eygpID0+IHtcbiAgICAgICAgICBkaXNjbG9zdXJlLm9uQ2xvc2UoKTtcbiAgICAgICAgICBnby5mb2N1cygpO1xuICAgICAgICB9fVxuICAgICAgICBpc09wZW49e2Rpc2Nsb3N1cmUuaXNPcGVufSBwb3J0YWxQcm9wcz17eyBjb250YWluZXJSZWY6IGdvLnJvb3QoKS5yZWYgfX1cbiAgICAgID5cbiAgICAgICAgPGMuTW9kYWxPdmVybGF5IC8+XG4gICAgICAgIDxjLk1vZGFsQ29udGVudCB3PSczMGVtJyBtYXhXPSczMGVtJyBoPSc4MHZoJyBwb3NpdGlvbj0ncmVsYXRpdmUnPlxuICAgICAgICAgIDxjLk1vZGFsSGVhZGVyPkZpbmRlcjwvYy5Nb2RhbEhlYWRlcj5cbiAgICAgICAgICB7LyogPEJveCBwb3NpdGlvbj0nYWJzb2x1dGUnIGJvdHRvbT0nLTAuNWVtJyByaWdodD0nLTAuNWVtJyBib3hTaGFkb3c9J2RhcmstbGcnIHpJbmRleD17Mn0+XG4gICAgICAgICAgICB7ISFzZWxlY3RlZExpbmsgJiYgPExpbmtCdXR0b24gaWQ9e3NlbGVjdGVkTGluaz8uaWR9IG1heFc9JzEwMCUnLz59XG4gICAgICAgICAgPC9Cb3g+ICovfVxuICAgICAgICAgIDxjLk1vZGFsQm9keSBwPXswfSB3PScxMDAlJyBoPScxMDAlJz5cbiAgICAgICAgICAgIDxnby5Qcm92aWRlciBsaW5rSWQ9e1RyZWV9PlxuICAgICAgICAgICAgICB7ISFkaXNjbG9zdXJlLmlzT3BlbiAmJiA8Z28uSGFuZGxlclxuICAgICAgICAgICAgICAgIGluaXRpYWxJZD17aW5pdGlhbElkfVxuICAgICAgICAgICAgICAgIGluaXRpYWxIYW5kbGVySWQ9e2luaXRpYWxIYW5kbGVySWR9XG4gICAgICAgICAgICAgICAgc3RhcnRQcm9wcz17c3RhcnRQcm9wc31cbiAgICAgICAgICAgICAgICBoYW5kbGVySWQ9e1RyZWV9XG4gICAgICAgICAgICAgICAgZnVsbFdpZHRoPSczMGVtJyBmbGV4PScxJ1xuICAgICAgICAgICAgICAgIHNhdmVIaXN0b3J5PXtmYWxzZX1cbiAgICAgICAgICAgICAgICB1c2luZz17ZmFsc2V9XG4gICAgICAgICAgICAgIC8+fVxuICAgICAgICAgICAgPC9nby5Qcm92aWRlcj5cbiAgICAgICAgICA8L2MuTW9kYWxCb2R5PlxuICAgICAgICAgIHtidXR0b25zfVxuICAgICAgICA8L2MuTW9kYWxDb250ZW50PlxuICAgICAgPC9jLk1vZGFsPlxuICAgIDwvZ28uT24+O1xuICB9O1xufSJdfQ==",
        "link_id": 16541
      }
    },
    {
      "id": 16543,
      "type_id": 3,
      "from_id": 16525,
      "to_id": 16541,
      "value": {
        "id": 1632,
        "value": "generated",
        "link_id": 16543
      }
    },
    {
      "id": 16544,
      "type_id": 143,
      "from_id": 16541,
      "to_id": 16525
    },
    {
      "id": 16545,
      "type_id": 3,
      "from_id": 16525,
      "to_id": 16544
    },
    {
      "id": 16525,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1626,
        "value": "({ deep, data, require, Go }) => {\n  const { BsX, BsCheck2All } = require(\"react-icons/bs\");\n  const React = require('react');\n  \n  const c = require('@chakra-ui/react');\n\n  const dc = '@deep-foundation/core';\n  const dpl = '@deep-foundation/perception-links';\n  \n  const Query = deep.idLocal(dc, 'Query');\n  const Contain = deep.idLocal(dc, 'Contain');\n  const FinderQuery = deep.idLocal(dpl, 'FinderQuery');\n  const Tree = deep.idLocal(dpl, 'Tree');\n  const Search = deep.idLocal(dpl, 'Search');\n\n  return ({\n    go,\n\n    initialId = deep.linkId,\n    initialHandlerId,\n    startProps = {},\n    isActive,\n    onSubmit,\n    disclosure: __disclosure,\n  }, ref) => {\n    const _disclosure = c.useDisclosure();\n    const disclosure = __disclosure || _disclosure;\n\n    const [selectedId, setSelectedId] = React.useState();\n    const [queryId, setQueryId] = React.useState();\n\n    const buttons = <>\n      <c.SlideFade in={true} offsetX='-0.5rem' style={{position: 'absolute', top: 0, right: '-4em'}}>\n        <c.Button\n          w='3em' h='3em'\n          boxShadow='dark-lg'\n          variant={undefined}\n          onClick={disclosure.onClose}\n        ><BsX /></c.Button>\n      </c.SlideFade>\n      <c.Box position='absolute' right='0' bottom='-4em'>\n        {!!selectedId && <c.Button\n          h='3em' rightIcon={<BsCheck2All />}\n          onClick={() => {\n            onSubmit && onSubmit(selectedId);\n          }}\n        >{`${deep.get(selectedId)}`}</c.Button>\n      </c.Box>\n    </>;\n\n    return <go.On\n      do={{\n        changed: (g,v,o) => o?.id && setSelectedId(o.id),\n      }}\n    >\n      <c.Modal\n        ref={disclosure.isOpen ? ref : null}\n        closeOnOverlayClick blockScrollOnMount={false}\n        onClose={() => {\n          disclosure.onClose();\n          go.focus();\n        }}\n        isOpen={disclosure.isOpen} portalProps={{ containerRef: go.root().ref }}\n      >\n        <c.ModalOverlay />\n        <c.ModalContent w='30em' maxW='30em' h='80vh' position='relative'>\n          <c.ModalHeader>Finder</c.ModalHeader>\n          {/* <Box position='absolute' bottom='-0.5em' right='-0.5em' boxShadow='dark-lg' zIndex={2}>\n            {!!selectedLink && <LinkButton id={selectedLink?.id} maxW='100%'/>}\n          </Box> */}\n          <c.ModalBody p={0} w='100%' h='100%'>\n            <go.Provider linkId={Tree}>\n              {!!disclosure.isOpen && <go.Handler\n                initialId={initialId}\n                initialHandlerId={initialHandlerId}\n                startProps={startProps}\n                handlerId={Tree}\n                fullWidth='30em' flex='1'\n                saveHistory={false}\n                using={false}\n              />}\n            </go.Provider>\n          </c.ModalBody>\n          {buttons}\n        </c.ModalContent>\n      </c.Modal>\n    </go.On>;\n  };\n}",
        "link_id": 16525
      }
    },
    {
      "id": 16526,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 16525,
      "value": {
        "id": 1625,
        "value": "FinderComponent",
        "link_id": 16526
      }
    },
    {
      "id": 16529,
      "type_id": 35,
      "from_id": 145,
      "to_id": 16525
    },
    {
      "id": 16530,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 16529,
      "value": {
        "id": 1627,
        "value": "Finder",
        "link_id": 16530
      }
    },
    {
      "id": 15105,
      "type_id": 1,
      "from_id": 8,
      "to_id": 58
    },
    {
      "id": 15106,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 15105,
      "value": {
        "id": 1551,
        "value": "FinderQuery",
        "link_id": 15106
      }
    },
    {
      "id": 16671,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1636,
        "value": "({ deep, data, require, Go }) => {\n  const React = require('react');\n  \n  const _ = require('lodash');\n  const c = require('@chakra-ui/react');\n\n  const dc = '@deep-foundation/core';\n  const dpl = '@deep-foundation/perception-links';\n\n  const FinderButton = deep.idLocal(dpl, 'FinderButton');\n\n  return ({\n    go,\n\n    placeholder = '',\n    value,\n    onChange,\n    leftIcon,\n    children,\n  }, ref) => {\n    const link = React.useMemo(() => {\n      return typeof(+value) === 'number' && !_.isNaN(+value)\n        ? deep.get(+value)\n        : undefined;\n    }, [value]);\n    return <go.On\n      do={{\n      }}\n    >\n      <c.InputGroup position='relative'>\n        {!!leftIcon && <c.InputLeftElement h='3em' w='3em' minW='3em'>\n          {leftIcon}\n        </c.InputLeftElement>}\n        <c.Input\n          placeholder={placeholder}\n          value={value} onChange={(e) => onChange && onChange(e.target.value)}\n          h='3em' pl={leftIcon ? '3em' : 0} pr='3em' pt={link ? '0.25em' : undefined}\n        />\n        {!!link && <c.Text\n          position='absolute' left={leftIcon ? '4em' : '1em'} bottom='0.25em'\n          pointerEvents='none' fontSize='xs'\n          noOfLines={1}\n        >\n          {`${link.symbol} ${link.name != link.id ? link.name : link.id}`}\n        </c.Text>}\n        <c.InputRightElement h='3em'>\n          <go.Provider linkId={FinderButton} on={{\n            do: {\n              open: (g,v,o) => {\n                if (o?.id) onChange && onChange(o?.id);\n              },\n            }\n          }}>\n            <go.Handler handlerId={FinderButton} bg='transparent' isActive={go.value === FinderButton}/>\n          </go.Provider>\n        </c.InputRightElement>\n      </c.InputGroup>\n    </go.On>;\n  };\n}",
        "link_id": 16671
      }
    },
    {
      "id": 16672,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 16671,
      "value": {
        "id": 1635,
        "value": "FinderInputComponent",
        "link_id": 16672
      }
    },
    {
      "id": 16675,
      "type_id": 35,
      "from_id": 145,
      "to_id": 16671
    },
    {
      "id": 16676,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 16675,
      "value": {
        "id": 1637,
        "value": "FinderInput",
        "link_id": 16676
      }
    },
    {
      "id": 17034,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1646,
        "value": "({ deep, data, require, Go }) => {\n  const React = require('react');\n  \n  const c = require('@chakra-ui/react');\n\n  return ({\n    go,\n    id,\n\n    ...props\n  }, ref) => {\n    const { cy } = go.useGraph();\n    const data = { id: `${id}`, label: `${id}` };\n    const classes = ['link-ghost'];\n    return <go.GraphNode\n      ghost\n      element={{\n        data, classes,\n      }}\n      {...props}\n    />;\n  };\n}",
        "link_id": 17034
      }
    },
    {
      "id": 17035,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 17034,
      "value": {
        "id": 1645,
        "value": "GraphLinkGhostComponent",
        "link_id": 17035
      }
    },
    {
      "id": 17038,
      "type_id": 35,
      "from_id": 145,
      "to_id": 17034
    },
    {
      "id": 17039,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 17038,
      "value": {
        "id": 1647,
        "value": "GraphLinkGhost",
        "link_id": 17039
      }
    },
    {
      "id": 16677,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1639,
        "value": "({ deep, data, require, Go }) => {\n    const React = require('react');\n    const _ = require('lodash');\n    const c = require('@chakra-ui/react');\n    const dc = '@deep-foundation/core';\n    const dpl = '@deep-foundation/perception-links';\n    const FinderButton = deep.idLocal(dpl, 'FinderButton');\n    return ({ go, placeholder = '', value, onChange, leftIcon, children, }, ref) => {\n        const link = React.useMemo(() => {\n            return typeof (+value) === 'number' && !_.isNaN(+value)\n                ? deep.get(+value)\n                : undefined;\n        }, [value]);\n        return React.createElement(go.On, { do: {} },\n            React.createElement(c.InputGroup, { position: 'relative' },\n                !!leftIcon && React.createElement(c.InputLeftElement, { h: '3em', w: '3em', minW: '3em' }, leftIcon),\n                React.createElement(c.Input, { placeholder: placeholder, value: value, onChange: (e) => onChange && onChange(e.target.value), h: '3em', pl: leftIcon ? '3em' : 0, pr: '3em', pt: link ? '0.25em' : undefined }),\n                !!link && React.createElement(c.Text, { position: 'absolute', left: leftIcon ? '4em' : '1em', bottom: '0.25em', pointerEvents: 'none', fontSize: 'xs', noOfLines: 1 }, `${link.symbol} ${link.name != link.id ? link.name : link.id}`),\n                React.createElement(c.InputRightElement, { h: '3em' },\n                    React.createElement(go.Provider, { linkId: FinderButton, on: {\n                            do: {\n                                open: (g, v, o) => {\n                                    if (o?.id)\n                                        onChange && onChange(o?.id);\n                                },\n                            }\n                        } },\n                        React.createElement(go.Handler, { handlerId: FinderButton, bg: 'transparent', isActive: go.value === FinderButton })))));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxDQUFDLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRTtJQUM5QixNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7SUFFL0IsTUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQzVCLE1BQU0sQ0FBQyxHQUFHLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBRXRDLE1BQU0sRUFBRSxHQUFHLHVCQUF1QixDQUFDO0lBQ25DLE1BQU0sR0FBRyxHQUFHLG1DQUFtQyxDQUFDO0lBRWhELE1BQU0sWUFBWSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLGNBQWMsQ0FBQyxDQUFDO0lBRXZELE9BQU8sQ0FBQyxFQUNOLEVBQUUsRUFFRixXQUFXLEdBQUcsRUFBRSxFQUNoQixLQUFLLEVBQ0wsUUFBUSxFQUNSLFFBQVEsRUFDUixRQUFRLEdBQ1QsRUFBRSxHQUFHLEVBQUUsRUFBRTtRQUNSLE1BQU0sSUFBSSxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFO1lBQzlCLE9BQU8sT0FBTSxDQUFDLENBQUMsS0FBSyxDQUFDLEtBQUssUUFBUSxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLEtBQUssQ0FBQztnQkFDcEQsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxLQUFLLENBQUM7Z0JBQ2xCLENBQUMsQ0FBQyxTQUFTLENBQUM7UUFDaEIsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztRQUNaLE9BQU8sb0JBQUMsRUFBRSxDQUFDLEVBQUUsSUFDWCxFQUFFLEVBQUUsRUFDSDtZQUVELG9CQUFDLENBQUMsQ0FBQyxVQUFVLElBQUMsUUFBUSxFQUFDLFVBQVU7Z0JBQzlCLENBQUMsQ0FBQyxRQUFRLElBQUksb0JBQUMsQ0FBQyxDQUFDLGdCQUFnQixJQUFDLENBQUMsRUFBQyxLQUFLLEVBQUMsQ0FBQyxFQUFDLEtBQUssRUFBQyxJQUFJLEVBQUMsS0FBSyxJQUMxRCxRQUFRLENBQ1U7Z0JBQ3JCLG9CQUFDLENBQUMsQ0FBQyxLQUFLLElBQ04sV0FBVyxFQUFFLFdBQVcsRUFDeEIsS0FBSyxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLFFBQVEsSUFBSSxRQUFRLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsRUFDbkUsQ0FBQyxFQUFDLEtBQUssRUFBQyxFQUFFLEVBQUUsUUFBUSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUMsS0FBSyxFQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsU0FBUyxHQUMxRTtnQkFDRCxDQUFDLENBQUMsSUFBSSxJQUFJLG9CQUFDLENBQUMsQ0FBQyxJQUFJLElBQ2hCLFFBQVEsRUFBQyxVQUFVLEVBQUMsSUFBSSxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLEVBQUUsTUFBTSxFQUFDLFFBQVEsRUFDbkUsYUFBYSxFQUFDLE1BQU0sRUFBQyxRQUFRLEVBQUMsSUFBSSxFQUNsQyxTQUFTLEVBQUUsQ0FBQyxJQUVYLEdBQUcsSUFBSSxDQUFDLE1BQU0sSUFBSSxJQUFJLENBQUMsSUFBSSxJQUFJLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FDeEQ7Z0JBQ1Qsb0JBQUMsQ0FBQyxDQUFDLGlCQUFpQixJQUFDLENBQUMsRUFBQyxLQUFLO29CQUMxQixvQkFBQyxFQUFFLENBQUMsUUFBUSxJQUFDLE1BQU0sRUFBRSxZQUFZLEVBQUUsRUFBRSxFQUFFOzRCQUNyQyxFQUFFLEVBQUU7Z0NBQ0YsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRTtvQ0FDZCxJQUFJLENBQUMsRUFBRSxFQUFFO3dDQUFFLFFBQVEsSUFBSSxRQUFRLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO2dDQUN6QyxDQUFDOzZCQUNGO3lCQUNGO3dCQUNDLG9CQUFDLEVBQUUsQ0FBQyxPQUFPLElBQUMsU0FBUyxFQUFFLFlBQVksRUFBRSxFQUFFLEVBQUMsYUFBYSxFQUFDLFFBQVEsRUFBRSxFQUFFLENBQUMsS0FBSyxLQUFLLFlBQVksR0FBRyxDQUNoRixDQUNNLENBQ1QsQ0FDVCxDQUFDO0lBQ1gsQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiKHsgZGVlcCwgZGF0YSwgcmVxdWlyZSwgR28gfSkgPT4ge1xuICBjb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG4gIFxuICBjb25zdCBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XG4gIGNvbnN0IGMgPSByZXF1aXJlKCdAY2hha3JhLXVpL3JlYWN0Jyk7XG5cbiAgY29uc3QgZGMgPSAnQGRlZXAtZm91bmRhdGlvbi9jb3JlJztcbiAgY29uc3QgZHBsID0gJ0BkZWVwLWZvdW5kYXRpb24vcGVyY2VwdGlvbi1saW5rcyc7XG5cbiAgY29uc3QgRmluZGVyQnV0dG9uID0gZGVlcC5pZExvY2FsKGRwbCwgJ0ZpbmRlckJ1dHRvbicpO1xuXG4gIHJldHVybiAoe1xuICAgIGdvLFxuXG4gICAgcGxhY2Vob2xkZXIgPSAnJyxcbiAgICB2YWx1ZSxcbiAgICBvbkNoYW5nZSxcbiAgICBsZWZ0SWNvbixcbiAgICBjaGlsZHJlbixcbiAgfSwgcmVmKSA9PiB7XG4gICAgY29uc3QgbGluayA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgICAgcmV0dXJuIHR5cGVvZigrdmFsdWUpID09PSAnbnVtYmVyJyAmJiAhXy5pc05hTigrdmFsdWUpXG4gICAgICAgID8gZGVlcC5nZXQoK3ZhbHVlKVxuICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICB9LCBbdmFsdWVdKTtcbiAgICByZXR1cm4gPGdvLk9uXG4gICAgICBkbz17e1xuICAgICAgfX1cbiAgICA+XG4gICAgICA8Yy5JbnB1dEdyb3VwIHBvc2l0aW9uPSdyZWxhdGl2ZSc+XG4gICAgICAgIHshIWxlZnRJY29uICYmIDxjLklucHV0TGVmdEVsZW1lbnQgaD0nM2VtJyB3PSczZW0nIG1pblc9JzNlbSc+XG4gICAgICAgICAge2xlZnRJY29ufVxuICAgICAgICA8L2MuSW5wdXRMZWZ0RWxlbWVudD59XG4gICAgICAgIDxjLklucHV0XG4gICAgICAgICAgcGxhY2Vob2xkZXI9e3BsYWNlaG9sZGVyfVxuICAgICAgICAgIHZhbHVlPXt2YWx1ZX0gb25DaGFuZ2U9eyhlKSA9PiBvbkNoYW5nZSAmJiBvbkNoYW5nZShlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgaD0nM2VtJyBwbD17bGVmdEljb24gPyAnM2VtJyA6IDB9IHByPSczZW0nIHB0PXtsaW5rID8gJzAuMjVlbScgOiB1bmRlZmluZWR9XG4gICAgICAgIC8+XG4gICAgICAgIHshIWxpbmsgJiYgPGMuVGV4dFxuICAgICAgICAgIHBvc2l0aW9uPSdhYnNvbHV0ZScgbGVmdD17bGVmdEljb24gPyAnNGVtJyA6ICcxZW0nfSBib3R0b209JzAuMjVlbSdcbiAgICAgICAgICBwb2ludGVyRXZlbnRzPSdub25lJyBmb250U2l6ZT0neHMnXG4gICAgICAgICAgbm9PZkxpbmVzPXsxfVxuICAgICAgICA+XG4gICAgICAgICAge2Ake2xpbmsuc3ltYm9sfSAke2xpbmsubmFtZSAhPSBsaW5rLmlkID8gbGluay5uYW1lIDogbGluay5pZH1gfVxuICAgICAgICA8L2MuVGV4dD59XG4gICAgICAgIDxjLklucHV0UmlnaHRFbGVtZW50IGg9JzNlbSc+XG4gICAgICAgICAgPGdvLlByb3ZpZGVyIGxpbmtJZD17RmluZGVyQnV0dG9ufSBvbj17e1xuICAgICAgICAgICAgZG86IHtcbiAgICAgICAgICAgICAgb3BlbjogKGcsdixvKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKG8/LmlkKSBvbkNoYW5nZSAmJiBvbkNoYW5nZShvPy5pZCk7XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfX0+XG4gICAgICAgICAgICA8Z28uSGFuZGxlciBoYW5kbGVySWQ9e0ZpbmRlckJ1dHRvbn0gYmc9J3RyYW5zcGFyZW50JyBpc0FjdGl2ZT17Z28udmFsdWUgPT09IEZpbmRlckJ1dHRvbn0vPlxuICAgICAgICAgIDwvZ28uUHJvdmlkZXI+XG4gICAgICAgIDwvYy5JbnB1dFJpZ2h0RWxlbWVudD5cbiAgICAgIDwvYy5JbnB1dEdyb3VwPlxuICAgIDwvZ28uT24+O1xuICB9O1xufSJdfQ==",
        "link_id": 16677
      }
    },
    {
      "id": 16678,
      "type_id": 3,
      "from_id": 16671,
      "to_id": 16677,
      "value": {
        "id": 1638,
        "value": "generated",
        "link_id": 16678
      }
    },
    {
      "id": 16679,
      "type_id": 143,
      "from_id": 16677,
      "to_id": 16671
    },
    {
      "id": 16680,
      "type_id": 3,
      "from_id": 16671,
      "to_id": 16679
    },
    {
      "id": 17544,
      "type_id": 35,
      "from_id": 145,
      "to_id": 3844
    },
    {
      "id": 17545,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 17544,
      "value": {
        "id": 1663,
        "value": "TreeLinkButton",
        "link_id": 17545
      }
    },
    {
      "id": 18261,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1682,
        "value": "async ({ deep, data, Go, require }) => {\n  const React = require('react');\n  const { LuChevronLast, LuChevronFirst } = require(\"react-icons/lu\");\n  const { IoInfiniteSharp } = require(\"react-icons/io5\");\n  const { Planet } = require('react-planet');\n  const c = require('@chakra-ui/react');\n\n  const {\n    TypedIcon, DownIcon, UpIcon, TypeIcon, InIcon, OutIcon, FromIcon, ToIcon,\n  } = require('@deep-foundation/perception-app');\n\n  const dpl = '@deep-foundation/perception-links';\n\n  const TreeList = deep.idLocal(dpl, 'TreeList');\n  const PlanetRelations = await deep.id(dpl, 'PlanetRelations');\n  const PlanetOperations = await deep.id(dpl, 'PlanetOperations');\n\n  return ({\n    go,\n\n    linkId,\n    deleteDisclosure: _deleteDisclosure,\n    finderDisclosure: _finderDisclosure,\n\n    isActive = false,\n  }, ref) => {\n    const { cy } = go.useGraph();\n\n    const link = React.useMemo(() => deep.get(linkId), []);\n\n    const __deleteDisclosure = c.useDisclosure();\n    const deleteDisclosure = _deleteDisclosure || __deleteDisclosure;\n\n    const __finderDisclosure = c.useDisclosure();\n    const finderDisclosure = _finderDisclosure || __finderDisclosure;\n\n    const [mode, setMode] = React.useState('current');\n\n    const nav = go.useNav();\n    nav('current', PlanetRelations, PlanetRelations, PlanetRelations, PlanetRelations);\n    nav(PlanetRelations, PlanetRelations, PlanetOperations, PlanetRelations, 'current');\n    nav(PlanetOperations, PlanetOperations, 'up', PlanetOperations, PlanetRelations);\n\n    return <go.On do={{\n      exec: (g,v,o) => {\n        if (o?.mode) setMode(mode === o.mode ? 'current' : o.mode);\n        if (go.value === 'current') go.do(go.value);\n      },\n      focus: (g,d,v,o) => !v && go.set('current'),\n      up: (g,v,o) => go.focus(nav.get(go.value, 'up'), { position: 0.5, ...o }),\n      down: (g,v,o) => go.focus(nav.get(go.value, 'down'), { position: 0, ...o }),\n      left: (g,v,o) => go.focus(nav.get(go.value, 'left'), { position: 0.25 }),\n      right: (g,v,o) => go.focus(nav.get(go.value, 'right'), { position: 0.75 }),\n      current: (g,v,o) => go.go.do('exec'),\n    }} focus={{\n      up: (g,v,o) => go.root().do('up'),\n    }}>\n      <c.Box position='relative' top='0' left='0' w='0' h='0'>\n        <go.Provider linkId={PlanetRelations}>\n          <go.Component path={[dpl, 'PlanetRelations']} isActive={isActive} linkId={linkId}/>\n        </go.Provider>\n        <go.Provider linkId={PlanetOperations}>\n          <go.Component path={[dpl, 'PlanetOperations']} isActive={isActive} linkId={linkId}/>\n        </go.Provider>\n        {!!isActive && <c.Button\n          variant={go.value === 'current' ? 'planetActive' : 'planet'}\n          position='absolute' left='-1.5em' top='-1.5em'\n          onClick={() => go.focus('current').go.do('current')}\n        ></c.Button>}\n      </c.Box>\n    </go.On>;\n  };\n}",
        "link_id": 18261
      }
    },
    {
      "id": 18263,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 18261,
      "value": {
        "id": 1681,
        "value": "GraphLinkPlanetComponent",
        "link_id": 18263
      }
    },
    {
      "id": 18269,
      "type_id": 35,
      "from_id": 145,
      "to_id": 18261
    },
    {
      "id": 18270,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 18269,
      "value": {
        "id": 1685,
        "value": "GraphLinkPlanet",
        "link_id": 18270
      }
    },
    {
      "id": 18274,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1690,
        "value": "async ({ deep, data, Go, require }) => {\n    const React = require('react');\n    const { LuChevronLast, LuChevronFirst } = require(\"react-icons/lu\");\n    const { IoInfiniteSharp } = require(\"react-icons/io5\");\n    const { Planet } = require('react-planet');\n    const c = require('@chakra-ui/react');\n    const { TypedIcon, DownIcon, UpIcon, TypeIcon, InIcon, OutIcon, FromIcon, ToIcon, } = require('@deep-foundation/perception-app');\n    const dpl = '@deep-foundation/perception-links';\n    const TreeList = deep.idLocal(dpl, 'TreeList');\n    const PlanetRelations = await deep.id(dpl, 'PlanetRelations');\n    const PlanetOperations = await deep.id(dpl, 'PlanetOperations');\n    return ({ go, linkId, deleteDisclosure: _deleteDisclosure, finderDisclosure: _finderDisclosure, isActive = false, }, ref) => {\n        const { cy } = go.useGraph();\n        const link = React.useMemo(() => deep.get(linkId), []);\n        const __deleteDisclosure = c.useDisclosure();\n        const deleteDisclosure = _deleteDisclosure || __deleteDisclosure;\n        const __finderDisclosure = c.useDisclosure();\n        const finderDisclosure = _finderDisclosure || __finderDisclosure;\n        const [mode, setMode] = React.useState('current');\n        const nav = go.useNav();\n        nav('current', PlanetRelations, PlanetRelations, PlanetRelations, PlanetRelations);\n        nav(PlanetRelations, PlanetRelations, PlanetOperations, PlanetRelations, 'current');\n        nav(PlanetOperations, PlanetOperations, 'up', PlanetOperations, PlanetRelations);\n        return React.createElement(go.On, { do: {\n                exec: (g, v, o) => {\n                    if (o?.mode)\n                        setMode(mode === o.mode ? 'current' : o.mode);\n                    if (go.value === 'current')\n                        go.do(go.value);\n                },\n                focus: (g, d, v, o) => !v && go.set('current'),\n                up: (g, v, o) => go.focus(nav.get(go.value, 'up'), { position: 0.5, ...o }),\n                down: (g, v, o) => go.focus(nav.get(go.value, 'down'), { position: 0, ...o }),\n                left: (g, v, o) => go.focus(nav.get(go.value, 'left'), { position: 0.25 }),\n                right: (g, v, o) => go.focus(nav.get(go.value, 'right'), { position: 0.75 }),\n                current: (g, v, o) => go.go.do('exec'),\n            }, focus: {\n                up: (g, v, o) => go.root().do('up'),\n            } },\n            React.createElement(c.Box, { position: 'relative', top: '0', left: '0', w: '0', h: '0' },\n                React.createElement(go.Provider, { linkId: PlanetRelations },\n                    React.createElement(go.Component, { path: [dpl, 'PlanetRelations'], isActive: isActive, linkId: linkId })),\n                React.createElement(go.Provider, { linkId: PlanetOperations },\n                    React.createElement(go.Component, { path: [dpl, 'PlanetOperations'], isActive: isActive, linkId: linkId })),\n                !!isActive && React.createElement(c.Button, { variant: go.value === 'current' ? 'planetActive' : 'planet', position: 'absolute', left: '-1.5em', top: '-1.5em', onClick: () => go.focus('current').go.do('current') })));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFO0lBQ3BDLE1BQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUMvQixNQUFNLEVBQUUsYUFBYSxFQUFFLGNBQWMsRUFBRSxHQUFHLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0lBQ3BFLE1BQU0sRUFBRSxlQUFlLEVBQUUsR0FBRyxPQUFPLENBQUMsaUJBQWlCLENBQUMsQ0FBQztJQUN2RCxNQUFNLEVBQUUsTUFBTSxFQUFFLEdBQUcsT0FBTyxDQUFDLGNBQWMsQ0FBQyxDQUFDO0lBQzNDLE1BQU0sQ0FBQyxHQUFHLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBRXRDLE1BQU0sRUFDSixTQUFTLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxHQUN6RSxHQUFHLE9BQU8sQ0FBQyxpQ0FBaUMsQ0FBQyxDQUFDO0lBRS9DLE1BQU0sR0FBRyxHQUFHLG1DQUFtQyxDQUFDO0lBRWhELE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLFVBQVUsQ0FBQyxDQUFDO0lBQy9DLE1BQU0sZUFBZSxHQUFHLE1BQU0sSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsaUJBQWlCLENBQUMsQ0FBQztJQUM5RCxNQUFNLGdCQUFnQixHQUFHLE1BQU0sSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsa0JBQWtCLENBQUMsQ0FBQztJQUVoRSxPQUFPLENBQUMsRUFDTixFQUFFLEVBRUYsTUFBTSxFQUNOLGdCQUFnQixFQUFFLGlCQUFpQixFQUNuQyxnQkFBZ0IsRUFBRSxpQkFBaUIsRUFFbkMsUUFBUSxHQUFHLEtBQUssR0FDakIsRUFBRSxHQUFHLEVBQUUsRUFBRTtRQUNSLE1BQU0sRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLENBQUMsUUFBUSxFQUFFLENBQUM7UUFFN0IsTUFBTSxJQUFJLEdBQUcsS0FBSyxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBRXZELE1BQU0sa0JBQWtCLEdBQUcsQ0FBQyxDQUFDLGFBQWEsRUFBRSxDQUFDO1FBQzdDLE1BQU0sZ0JBQWdCLEdBQUcsaUJBQWlCLElBQUksa0JBQWtCLENBQUM7UUFFakUsTUFBTSxrQkFBa0IsR0FBRyxDQUFDLENBQUMsYUFBYSxFQUFFLENBQUM7UUFDN0MsTUFBTSxnQkFBZ0IsR0FBRyxpQkFBaUIsSUFBSSxrQkFBa0IsQ0FBQztRQUVqRSxNQUFNLENBQUMsSUFBSSxFQUFFLE9BQU8sQ0FBQyxHQUFHLEtBQUssQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLENBQUM7UUFFbEQsTUFBTSxHQUFHLEdBQUcsRUFBRSxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBQ3hCLEdBQUcsQ0FBQyxTQUFTLEVBQUUsZUFBZSxFQUFFLGVBQWUsRUFBRSxlQUFlLEVBQUUsZUFBZSxDQUFDLENBQUM7UUFDbkYsR0FBRyxDQUFDLGVBQWUsRUFBRSxlQUFlLEVBQUUsZ0JBQWdCLEVBQUUsZUFBZSxFQUFFLFNBQVMsQ0FBQyxDQUFDO1FBQ3BGLEdBQUcsQ0FBQyxnQkFBZ0IsRUFBRSxnQkFBZ0IsRUFBRSxJQUFJLEVBQUUsZ0JBQWdCLEVBQUUsZUFBZSxDQUFDLENBQUM7UUFFakYsT0FBTyxvQkFBQyxFQUFFLENBQUMsRUFBRSxJQUFDLEVBQUUsRUFBRTtnQkFDaEIsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRTtvQkFDZCxJQUFJLENBQUMsRUFBRSxJQUFJO3dCQUFFLE9BQU8sQ0FBQyxJQUFJLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUM7b0JBQzNELElBQUksRUFBRSxDQUFDLEtBQUssS0FBSyxTQUFTO3dCQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUM5QyxDQUFDO2dCQUNELEtBQUssRUFBRSxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUM7Z0JBQzNDLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFLFFBQVEsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDLEVBQUUsQ0FBQztnQkFDekUsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxFQUFFLEVBQUUsUUFBUSxFQUFFLENBQUMsRUFBRSxHQUFHLENBQUMsRUFBRSxDQUFDO2dCQUMzRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLEVBQUUsRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLENBQUM7Z0JBQ3hFLEtBQUssRUFBRSxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRSxPQUFPLENBQUMsRUFBRSxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQztnQkFDMUUsT0FBTyxFQUFFLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQzthQUNyQyxFQUFFLEtBQUssRUFBRTtnQkFDUixFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUM7YUFDbEM7WUFDQyxvQkFBQyxDQUFDLENBQUMsR0FBRyxJQUFDLFFBQVEsRUFBQyxVQUFVLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxJQUFJLEVBQUMsR0FBRyxFQUFDLENBQUMsRUFBQyxHQUFHLEVBQUMsQ0FBQyxFQUFDLEdBQUc7Z0JBQ3JELG9CQUFDLEVBQUUsQ0FBQyxRQUFRLElBQUMsTUFBTSxFQUFFLGVBQWU7b0JBQ2xDLG9CQUFDLEVBQUUsQ0FBQyxTQUFTLElBQUMsSUFBSSxFQUFFLENBQUMsR0FBRyxFQUFFLGlCQUFpQixDQUFDLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsTUFBTSxHQUFHLENBQ3ZFO2dCQUNkLG9CQUFDLEVBQUUsQ0FBQyxRQUFRLElBQUMsTUFBTSxFQUFFLGdCQUFnQjtvQkFDbkMsb0JBQUMsRUFBRSxDQUFDLFNBQVMsSUFBQyxJQUFJLEVBQUUsQ0FBQyxHQUFHLEVBQUUsa0JBQWtCLENBQUMsRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBRSxNQUFNLEdBQUcsQ0FDeEU7Z0JBQ2IsQ0FBQyxDQUFDLFFBQVEsSUFBSSxvQkFBQyxDQUFDLENBQUMsTUFBTSxJQUN0QixPQUFPLEVBQUUsRUFBRSxDQUFDLEtBQUssS0FBSyxTQUFTLENBQUMsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsUUFBUSxFQUMzRCxRQUFRLEVBQUMsVUFBVSxFQUFDLElBQUksRUFBQyxRQUFRLEVBQUMsR0FBRyxFQUFDLFFBQVEsRUFDOUMsT0FBTyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxTQUFTLENBQUMsR0FDekMsQ0FDTixDQUNGLENBQUM7SUFDWCxDQUFDLENBQUM7QUFDSixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJhc3luYyAoeyBkZWVwLCBkYXRhLCBHbywgcmVxdWlyZSB9KSA9PiB7XG4gIGNvbnN0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbiAgY29uc3QgeyBMdUNoZXZyb25MYXN0LCBMdUNoZXZyb25GaXJzdCB9ID0gcmVxdWlyZShcInJlYWN0LWljb25zL2x1XCIpO1xuICBjb25zdCB7IElvSW5maW5pdGVTaGFycCB9ID0gcmVxdWlyZShcInJlYWN0LWljb25zL2lvNVwiKTtcbiAgY29uc3QgeyBQbGFuZXQgfSA9IHJlcXVpcmUoJ3JlYWN0LXBsYW5ldCcpO1xuICBjb25zdCBjID0gcmVxdWlyZSgnQGNoYWtyYS11aS9yZWFjdCcpO1xuXG4gIGNvbnN0IHtcbiAgICBUeXBlZEljb24sIERvd25JY29uLCBVcEljb24sIFR5cGVJY29uLCBJbkljb24sIE91dEljb24sIEZyb21JY29uLCBUb0ljb24sXG4gIH0gPSByZXF1aXJlKCdAZGVlcC1mb3VuZGF0aW9uL3BlcmNlcHRpb24tYXBwJyk7XG5cbiAgY29uc3QgZHBsID0gJ0BkZWVwLWZvdW5kYXRpb24vcGVyY2VwdGlvbi1saW5rcyc7XG5cbiAgY29uc3QgVHJlZUxpc3QgPSBkZWVwLmlkTG9jYWwoZHBsLCAnVHJlZUxpc3QnKTtcbiAgY29uc3QgUGxhbmV0UmVsYXRpb25zID0gYXdhaXQgZGVlcC5pZChkcGwsICdQbGFuZXRSZWxhdGlvbnMnKTtcbiAgY29uc3QgUGxhbmV0T3BlcmF0aW9ucyA9IGF3YWl0IGRlZXAuaWQoZHBsLCAnUGxhbmV0T3BlcmF0aW9ucycpO1xuXG4gIHJldHVybiAoe1xuICAgIGdvLFxuXG4gICAgbGlua0lkLFxuICAgIGRlbGV0ZURpc2Nsb3N1cmU6IF9kZWxldGVEaXNjbG9zdXJlLFxuICAgIGZpbmRlckRpc2Nsb3N1cmU6IF9maW5kZXJEaXNjbG9zdXJlLFxuXG4gICAgaXNBY3RpdmUgPSBmYWxzZSxcbiAgfSwgcmVmKSA9PiB7XG4gICAgY29uc3QgeyBjeSB9ID0gZ28udXNlR3JhcGgoKTtcblxuICAgIGNvbnN0IGxpbmsgPSBSZWFjdC51c2VNZW1vKCgpID0+IGRlZXAuZ2V0KGxpbmtJZCksIFtdKTtcblxuICAgIGNvbnN0IF9fZGVsZXRlRGlzY2xvc3VyZSA9IGMudXNlRGlzY2xvc3VyZSgpO1xuICAgIGNvbnN0IGRlbGV0ZURpc2Nsb3N1cmUgPSBfZGVsZXRlRGlzY2xvc3VyZSB8fCBfX2RlbGV0ZURpc2Nsb3N1cmU7XG5cbiAgICBjb25zdCBfX2ZpbmRlckRpc2Nsb3N1cmUgPSBjLnVzZURpc2Nsb3N1cmUoKTtcbiAgICBjb25zdCBmaW5kZXJEaXNjbG9zdXJlID0gX2ZpbmRlckRpc2Nsb3N1cmUgfHwgX19maW5kZXJEaXNjbG9zdXJlO1xuXG4gICAgY29uc3QgW21vZGUsIHNldE1vZGVdID0gUmVhY3QudXNlU3RhdGUoJ2N1cnJlbnQnKTtcblxuICAgIGNvbnN0IG5hdiA9IGdvLnVzZU5hdigpO1xuICAgIG5hdignY3VycmVudCcsIFBsYW5ldFJlbGF0aW9ucywgUGxhbmV0UmVsYXRpb25zLCBQbGFuZXRSZWxhdGlvbnMsIFBsYW5ldFJlbGF0aW9ucyk7XG4gICAgbmF2KFBsYW5ldFJlbGF0aW9ucywgUGxhbmV0UmVsYXRpb25zLCBQbGFuZXRPcGVyYXRpb25zLCBQbGFuZXRSZWxhdGlvbnMsICdjdXJyZW50Jyk7XG4gICAgbmF2KFBsYW5ldE9wZXJhdGlvbnMsIFBsYW5ldE9wZXJhdGlvbnMsICd1cCcsIFBsYW5ldE9wZXJhdGlvbnMsIFBsYW5ldFJlbGF0aW9ucyk7XG5cbiAgICByZXR1cm4gPGdvLk9uIGRvPXt7XG4gICAgICBleGVjOiAoZyx2LG8pID0+IHtcbiAgICAgICAgaWYgKG8/Lm1vZGUpIHNldE1vZGUobW9kZSA9PT0gby5tb2RlID8gJ2N1cnJlbnQnIDogby5tb2RlKTtcbiAgICAgICAgaWYgKGdvLnZhbHVlID09PSAnY3VycmVudCcpIGdvLmRvKGdvLnZhbHVlKTtcbiAgICAgIH0sXG4gICAgICBmb2N1czogKGcsZCx2LG8pID0+ICF2ICYmIGdvLnNldCgnY3VycmVudCcpLFxuICAgICAgdXA6IChnLHYsbykgPT4gZ28uZm9jdXMobmF2LmdldChnby52YWx1ZSwgJ3VwJyksIHsgcG9zaXRpb246IDAuNSwgLi4ubyB9KSxcbiAgICAgIGRvd246IChnLHYsbykgPT4gZ28uZm9jdXMobmF2LmdldChnby52YWx1ZSwgJ2Rvd24nKSwgeyBwb3NpdGlvbjogMCwgLi4ubyB9KSxcbiAgICAgIGxlZnQ6IChnLHYsbykgPT4gZ28uZm9jdXMobmF2LmdldChnby52YWx1ZSwgJ2xlZnQnKSwgeyBwb3NpdGlvbjogMC4yNSB9KSxcbiAgICAgIHJpZ2h0OiAoZyx2LG8pID0+IGdvLmZvY3VzKG5hdi5nZXQoZ28udmFsdWUsICdyaWdodCcpLCB7IHBvc2l0aW9uOiAwLjc1IH0pLFxuICAgICAgY3VycmVudDogKGcsdixvKSA9PiBnby5nby5kbygnZXhlYycpLFxuICAgIH19IGZvY3VzPXt7XG4gICAgICB1cDogKGcsdixvKSA9PiBnby5yb290KCkuZG8oJ3VwJyksXG4gICAgfX0+XG4gICAgICA8Yy5Cb3ggcG9zaXRpb249J3JlbGF0aXZlJyB0b3A9JzAnIGxlZnQ9JzAnIHc9JzAnIGg9JzAnPlxuICAgICAgICA8Z28uUHJvdmlkZXIgbGlua0lkPXtQbGFuZXRSZWxhdGlvbnN9PlxuICAgICAgICAgIDxnby5Db21wb25lbnQgcGF0aD17W2RwbCwgJ1BsYW5ldFJlbGF0aW9ucyddfSBpc0FjdGl2ZT17aXNBY3RpdmV9IGxpbmtJZD17bGlua0lkfS8+XG4gICAgICAgIDwvZ28uUHJvdmlkZXI+XG4gICAgICAgIDxnby5Qcm92aWRlciBsaW5rSWQ9e1BsYW5ldE9wZXJhdGlvbnN9PlxuICAgICAgICAgIDxnby5Db21wb25lbnQgcGF0aD17W2RwbCwgJ1BsYW5ldE9wZXJhdGlvbnMnXX0gaXNBY3RpdmU9e2lzQWN0aXZlfSBsaW5rSWQ9e2xpbmtJZH0vPlxuICAgICAgICA8L2dvLlByb3ZpZGVyPlxuICAgICAgICB7ISFpc0FjdGl2ZSAmJiA8Yy5CdXR0b25cbiAgICAgICAgICB2YXJpYW50PXtnby52YWx1ZSA9PT0gJ2N1cnJlbnQnID8gJ3BsYW5ldEFjdGl2ZScgOiAncGxhbmV0J31cbiAgICAgICAgICBwb3NpdGlvbj0nYWJzb2x1dGUnIGxlZnQ9Jy0xLjVlbScgdG9wPSctMS41ZW0nXG4gICAgICAgICAgb25DbGljaz17KCkgPT4gZ28uZm9jdXMoJ2N1cnJlbnQnKS5nby5kbygnY3VycmVudCcpfVxuICAgICAgICA+PC9jLkJ1dHRvbj59XG4gICAgICA8L2MuQm94PlxuICAgIDwvZ28uT24+O1xuICB9O1xufSJdfQ==",
        "link_id": 18274
      }
    },
    {
      "id": 18276,
      "type_id": 3,
      "from_id": 18261,
      "to_id": 18274,
      "value": {
        "id": 1688,
        "value": "generated",
        "link_id": 18276
      }
    },
    {
      "id": 18278,
      "type_id": 143,
      "from_id": 18274,
      "to_id": 18261
    },
    {
      "id": 18280,
      "type_id": 3,
      "from_id": 18261,
      "to_id": 18278
    },
    {
      "id": 19125,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1711,
        "value": "async ({ deep, data, require }) => {\n  const React = require('react');\n  const { GiBrain } = require(\"react-icons/gi\");\n  const c = require('@chakra-ui/react');\n\n  const dpl = '@deep-foundation/perception-links';\n  const dc = '@deep-foundation/core';\n\n  const Tree = deep.idLocal(dpl, 'Tree');\n\n  return ({\n    go,\n    handlerId,\n\n    isActive,\n  }, ref) => {\n    return <go.On do={{\n      exec: (g,v,o) => go.go.do('right', { ...o, id: Tree })),\n      click: (g,v,o) => go.do('exec', o),\n      right: (g,v,o) => go.do('exec', o),\n    }}>\n      <c.Button\n        w='3em' h='3em'\n        variant={isActive ? 'active' : undefined}\n        ref={ref}\n        onClick={() => go.do('exec')}\n      >\n        <GiBrain/>\n      </c.Button>\n    </go.On>;\n  };\n}",
        "link_id": 19125
      }
    },
    {
      "id": 19126,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 19125,
      "value": {
        "id": 1710,
        "value": "MenuMemoComponent",
        "link_id": 19126
      }
    },
    {
      "id": 19129,
      "type_id": 35,
      "from_id": 145,
      "to_id": 19125
    },
    {
      "id": 19130,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 19129,
      "value": {
        "id": 1712,
        "value": "MenuMemo",
        "link_id": 19130
      }
    },
    {
      "id": 19137,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1717,
        "value": "async ({ deep, data, require }) => {\n    const React = require('react');\n    const { GiBrain } = require(\"react-icons/gi\");\n    const c = require('@chakra-ui/react');\n    const dpl = '@deep-foundation/perception-links';\n    const dc = '@deep-foundation/core';\n    const Tree = deep.idLocal(dpl, 'Tree');\n    return ({ go, handlerId, isActive, }, ref) => {\n        return React.createElement(go.On, { do: {\n                exec: (g, v, o) => go.go.do('right', { ...o, id: Tree }),\n                click: (g, v, o) => go.do('exec', o),\n                right: (g, v, o) => go.do('exec', o),\n            } },\n            React.createElement(c.Button, { w: '3em', h: '3em', variant: isActive ? 'active' : undefined, ref: ref, onClick: () => go.do('exec') },\n                React.createElement(GiBrain, null)));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxFQUFFLEVBQUU7SUFDaEMsTUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQy9CLE1BQU0sRUFBRSxPQUFPLEVBQUUsR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztJQUM5QyxNQUFNLENBQUMsR0FBRyxPQUFPLENBQUMsa0JBQWtCLENBQUMsQ0FBQztJQUV0QyxNQUFNLEdBQUcsR0FBRyxtQ0FBbUMsQ0FBQztJQUNoRCxNQUFNLEVBQUUsR0FBRyx1QkFBdUIsQ0FBQztJQUVuQyxNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxNQUFNLENBQUMsQ0FBQztJQUV2QyxPQUFPLENBQUMsRUFDTixFQUFFLEVBQ0YsU0FBUyxFQUVULFFBQVEsR0FDVCxFQUFFLEdBQUcsRUFBRSxFQUFFO1FBQ1IsT0FBTyxvQkFBQyxFQUFFLENBQUMsRUFBRSxJQUFDLEVBQUUsRUFBRTtnQkFDaEIsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxFQUFFLEdBQUcsQ0FBQyxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsQ0FBQztnQkFDdEQsS0FBSyxFQUFFLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQztnQkFDbEMsS0FBSyxFQUFFLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQzthQUNuQztZQUNDLG9CQUFDLENBQUMsQ0FBQyxNQUFNLElBQ1AsQ0FBQyxFQUFDLEtBQUssRUFBQyxDQUFDLEVBQUMsS0FBSyxFQUNmLE9BQU8sRUFBRSxRQUFRLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUN4QyxHQUFHLEVBQUUsR0FBRyxFQUNSLE9BQU8sRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQztnQkFFNUIsb0JBQUMsT0FBTyxPQUFFLENBQ0QsQ0FDTCxDQUFDO0lBQ1gsQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiYXN5bmMgKHsgZGVlcCwgZGF0YSwgcmVxdWlyZSB9KSA9PiB7XG4gIGNvbnN0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbiAgY29uc3QgeyBHaUJyYWluIH0gPSByZXF1aXJlKFwicmVhY3QtaWNvbnMvZ2lcIik7XG4gIGNvbnN0IGMgPSByZXF1aXJlKCdAY2hha3JhLXVpL3JlYWN0Jyk7XG5cbiAgY29uc3QgZHBsID0gJ0BkZWVwLWZvdW5kYXRpb24vcGVyY2VwdGlvbi1saW5rcyc7XG4gIGNvbnN0IGRjID0gJ0BkZWVwLWZvdW5kYXRpb24vY29yZSc7XG5cbiAgY29uc3QgVHJlZSA9IGRlZXAuaWRMb2NhbChkcGwsICdUcmVlJyk7XG5cbiAgcmV0dXJuICh7XG4gICAgZ28sXG4gICAgaGFuZGxlcklkLFxuXG4gICAgaXNBY3RpdmUsXG4gIH0sIHJlZikgPT4ge1xuICAgIHJldHVybiA8Z28uT24gZG89e3tcbiAgICAgIGV4ZWM6IChnLHYsbykgPT4gZ28uZ28uZG8oJ3JpZ2h0JywgeyAuLi5vLCBpZDogVHJlZSB9KSksXG4gICAgICBjbGljazogKGcsdixvKSA9PiBnby5kbygnZXhlYycsIG8pLFxuICAgICAgcmlnaHQ6IChnLHYsbykgPT4gZ28uZG8oJ2V4ZWMnLCBvKSxcbiAgICB9fT5cbiAgICAgIDxjLkJ1dHRvblxuICAgICAgICB3PSczZW0nIGg9JzNlbSdcbiAgICAgICAgdmFyaWFudD17aXNBY3RpdmUgPyAnYWN0aXZlJyA6IHVuZGVmaW5lZH1cbiAgICAgICAgcmVmPXtyZWZ9XG4gICAgICAgIG9uQ2xpY2s9eygpID0+IGdvLmRvKCdleGVjJyl9XG4gICAgICA+XG4gICAgICAgIDxHaUJyYWluLz5cbiAgICAgIDwvYy5CdXR0b24+XG4gICAgPC9nby5Pbj47XG4gIH07XG59Il19",
        "link_id": 19137
      }
    },
    {
      "id": 19139,
      "type_id": 3,
      "from_id": 19125,
      "to_id": 19137,
      "value": {
        "id": 1716,
        "value": "generated",
        "link_id": 19139
      }
    },
    {
      "id": 19141,
      "type_id": 143,
      "from_id": 19137,
      "to_id": 19125
    },
    {
      "id": 19143,
      "type_id": 3,
      "from_id": 19125,
      "to_id": 19141
    },
    {
      "id": 19243,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1724,
        "value": "async ({ deep, data, require }) => {\n  const React = require('react');\n  const { GiBrain } = require(\"react-icons/gi\");\n  const c = require('@chakra-ui/react');\n\n  const dpl = '@deep-foundation/perception-links';\n  const dml = '@deep-foundation/deepmemo-links';\n  const dc = '@deep-foundation/core';\n\n  const Memo = await deep.id(dml, 'Memo');\n\n  return ({\n    go,\n    handlerId,\n\n    isActive,\n  }, ref) => {\n    return <go.On do={{\n      exec: (g,v,o) => go.go.do('right', { ...o, id: Memo })),\n      click: (g,v,o) => go.do('exec', o),\n      right: (g,v,o) => go.do('exec', o),\n    }}>\n      <c.Button\n        w='3em' h='3em'\n        variant={isActive ? 'active' : undefined}\n        ref={ref}\n        onClick={() => go.do('exec')}\n      >\n        <GiBrain/>\n      </c.Button>\n    </go.On>;\n  };\n}",
        "link_id": 19243
      }
    },
    {
      "id": 19244,
      "type_id": 3,
      "from_id": 1849,
      "to_id": 19243,
      "value": {
        "id": 1723,
        "value": "MenuMemoComponent",
        "link_id": 19244
      }
    },
    {
      "id": 19247,
      "type_id": 35,
      "from_id": 145,
      "to_id": 19243
    },
    {
      "id": 19248,
      "type_id": 3,
      "from_id": 1849,
      "to_id": 19247,
      "value": {
        "id": 1725,
        "value": "MenuMemo",
        "link_id": 19248
      }
    },
    {
      "id": 19249,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1727,
        "value": "async ({ deep, data, require }) => {\n    const React = require('react');\n    const { GiBrain } = require(\"react-icons/gi\");\n    const c = require('@chakra-ui/react');\n    const dpl = '@deep-foundation/perception-links';\n    const dml = '@deep-foundation/deepmemo-links';\n    const dc = '@deep-foundation/core';\n    const Memo = await deep.id(dml, 'Memo');\n    return ({ go, handlerId, isActive, }, ref) => {\n        return React.createElement(go.On, { do: {\n                exec: (g, v, o) => go.go.do('right', { ...o, id: Memo }),\n                click: (g, v, o) => go.do('exec', o),\n                right: (g, v, o) => go.do('exec', o),\n            } },\n            React.createElement(c.Button, { w: '3em', h: '3em', variant: isActive ? 'active' : undefined, ref: ref, onClick: () => go.do('exec') },\n                React.createElement(GiBrain, null)));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxFQUFFLEVBQUU7SUFDaEMsTUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQy9CLE1BQU0sRUFBRSxPQUFPLEVBQUUsR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztJQUM5QyxNQUFNLENBQUMsR0FBRyxPQUFPLENBQUMsa0JBQWtCLENBQUMsQ0FBQztJQUV0QyxNQUFNLEdBQUcsR0FBRyxtQ0FBbUMsQ0FBQztJQUNoRCxNQUFNLEdBQUcsR0FBRyxpQ0FBaUMsQ0FBQztJQUM5QyxNQUFNLEVBQUUsR0FBRyx1QkFBdUIsQ0FBQztJQUVuQyxNQUFNLElBQUksR0FBRyxNQUFNLElBQUksQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBRXhDLE9BQU8sQ0FBQyxFQUNOLEVBQUUsRUFDRixTQUFTLEVBRVQsUUFBUSxHQUNULEVBQUUsR0FBRyxFQUFFLEVBQUU7UUFDUixPQUFPLG9CQUFDLEVBQUUsQ0FBQyxFQUFFLElBQUMsRUFBRSxFQUFFO2dCQUNoQixJQUFJLEVBQUUsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLEVBQUUsR0FBRyxDQUFDLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxDQUFDO2dCQUN0RCxLQUFLLEVBQUUsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDO2dCQUNsQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDO2FBQ25DO1lBQ0Msb0JBQUMsQ0FBQyxDQUFDLE1BQU0sSUFDUCxDQUFDLEVBQUMsS0FBSyxFQUFDLENBQUMsRUFBQyxLQUFLLEVBQ2YsT0FBTyxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQ3hDLEdBQUcsRUFBRSxHQUFHLEVBQ1IsT0FBTyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDO2dCQUU1QixvQkFBQyxPQUFPLE9BQUUsQ0FDRCxDQUNMLENBQUM7SUFDWCxDQUFDLENBQUM7QUFDSixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJhc3luYyAoeyBkZWVwLCBkYXRhLCByZXF1aXJlIH0pID0+IHtcbiAgY29uc3QgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuICBjb25zdCB7IEdpQnJhaW4gfSA9IHJlcXVpcmUoXCJyZWFjdC1pY29ucy9naVwiKTtcbiAgY29uc3QgYyA9IHJlcXVpcmUoJ0BjaGFrcmEtdWkvcmVhY3QnKTtcblxuICBjb25zdCBkcGwgPSAnQGRlZXAtZm91bmRhdGlvbi9wZXJjZXB0aW9uLWxpbmtzJztcbiAgY29uc3QgZG1sID0gJ0BkZWVwLWZvdW5kYXRpb24vZGVlcG1lbW8tbGlua3MnO1xuICBjb25zdCBkYyA9ICdAZGVlcC1mb3VuZGF0aW9uL2NvcmUnO1xuXG4gIGNvbnN0IE1lbW8gPSBhd2FpdCBkZWVwLmlkKGRtbCwgJ01lbW8nKTtcblxuICByZXR1cm4gKHtcbiAgICBnbyxcbiAgICBoYW5kbGVySWQsXG5cbiAgICBpc0FjdGl2ZSxcbiAgfSwgcmVmKSA9PiB7XG4gICAgcmV0dXJuIDxnby5PbiBkbz17e1xuICAgICAgZXhlYzogKGcsdixvKSA9PiBnby5nby5kbygncmlnaHQnLCB7IC4uLm8sIGlkOiBNZW1vIH0pKSxcbiAgICAgIGNsaWNrOiAoZyx2LG8pID0+IGdvLmRvKCdleGVjJywgbyksXG4gICAgICByaWdodDogKGcsdixvKSA9PiBnby5kbygnZXhlYycsIG8pLFxuICAgIH19PlxuICAgICAgPGMuQnV0dG9uXG4gICAgICAgIHc9JzNlbScgaD0nM2VtJ1xuICAgICAgICB2YXJpYW50PXtpc0FjdGl2ZSA/ICdhY3RpdmUnIDogdW5kZWZpbmVkfVxuICAgICAgICByZWY9e3JlZn1cbiAgICAgICAgb25DbGljaz17KCkgPT4gZ28uZG8oJ2V4ZWMnKX1cbiAgICAgID5cbiAgICAgICAgPEdpQnJhaW4vPlxuICAgICAgPC9jLkJ1dHRvbj5cbiAgICA8L2dvLk9uPjtcbiAgfTtcbn0iXX0=",
        "link_id": 19249
      }
    },
    {
      "id": 19250,
      "type_id": 3,
      "from_id": 19243,
      "to_id": 19249,
      "value": {
        "id": 1726,
        "value": "generated",
        "link_id": 19250
      }
    },
    {
      "id": 19251,
      "type_id": 143,
      "from_id": 19249,
      "to_id": 19243
    },
    {
      "id": 19252,
      "type_id": 3,
      "from_id": 19243,
      "to_id": 19251
    },
    {
      "id": 19297,
      "type_id": 3,
      "from_id": 1849,
      "to_id": 19296,
      "value": {
        "id": 1731,
        "value": "menuCompatable",
        "link_id": 19297
      }
    },
    {
      "id": 19296,
      "type_id": 5258,
      "from_id": 19247,
      "to_id": 5240
    },
    {
      "id": 19403,
      "type_id": 3,
      "from_id": 1849,
      "to_id": 19402,
      "value": {
        "id": 1736,
        "value": "MemoComponent",
        "link_id": 19403
      }
    },
    {
      "id": 19406,
      "type_id": 35,
      "from_id": 145,
      "to_id": 19402
    },
    {
      "id": 19407,
      "type_id": 3,
      "from_id": 1849,
      "to_id": 19406,
      "value": {
        "id": 1738,
        "value": "Memo",
        "link_id": 19407
      }
    },
    {
      "id": 21927,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1812,
        "value": "async ({ deep, data, Go, require }) => {\n  const React = require('react');\n  const { FaNodeJs } = require(\"react-icons/fa\");\n  const c = require('@chakra-ui/react');\n  const _ = require('lodash');\n\n  const dpl = '@deep-foundation/perception-links';\n  const dc = '@deep-foundation/core';\n\n  return ({\n    go,\n    handlerId,\n\n    isActive,\n  }, ref) => {\n    const View = React.useCallback(({ event }) => {\n      let value = event.mode;\n  \n      const q = JSON.stringify(event.query, null, 2);\n      const r = JSON.stringify(event.remoteData).slice(1,30);\n      const v = JSON.stringify(event.value || {}, null, 2);\n\n      const _o = { ...event.options };\n      if (_o.table === 'links') delete _o.table;\n\n      const o = _.isEmpty(_o) ? '' : JSON.stringify(_o, null, 2);\n      const oo = o ? `, ${o}` : '';\n      \n      if (event.mode === 'useQuery' || event.mode === 'useSubscription' || event.mode === 'select' || event.mode === 'subscribe') {\n        value = `// request to links on remote server\n\n// load links once\nawait deep.select(${q}${o});\n// { error: ${event.error ? deep.stringify(event.error) : 'null'}, data: { ${r}... } }\n\n// load and subscribe to changes\ndeep.subscribe(${q}${o})\n.subscribe({ next: (links) => {}, error: (error) => {} });\n// links // ${r}...\n\n// hint: feel free to use deep variable in browser console!\n\n${!!_o.table && `// minilinks awailable only for { table: 'links' }`}\n${!_o.table && `// request to links in local memory (minilinks)\n\n// find once\ndeep.ml.select(${q}${o});\n// Link[]...\n\n// subscribe to changes locally\ndeep.ml.subscribe(${q}${o})\n.subscribe({ next: (links) => {}, error: (error) => {} });\n// links // Link[]...\n\n// loaded with deep.select and deep.subscribe plain links\nconst Contain = deep.idLocal('@deep-foundation/core', 'Contain');\nconst results = await deep.select({\n  in: { type: Contain, from: deep.linkId, },\n  return: { contain: { in: { type: Contain } } } // get related links too\n}),\n// can be added to minilinks with:\ndeep.minilinks.apply(\n  results,\n  'name', // STRICTLY UNIQUE\n);\n// you can update links stage in minilinks, by some select/subscription flow manually\n// in react hooks deep.useSubscription and deep.useQuery apply always automatically\n// then you can simply travel by it\nconst user = deep.get(deep.linkId);\nuser.travel().out({ type: Contain }).select();\n`}`;\n      }\n  \n      if (event.mode === 'insert') {\n        value = `// request to links on remote server\nawait deep.insert(${q}${oo});\n// { error: ${event.error ? deep.stringify(event.error) : 'null'}, data: { ${r}... } }\n\n// possible to insert multiple links at request\nawait deep.insert({\n  from: deep.idLocal('@deep-foundation/core', 'clientSupportsJs'),\n  type: deep.idLocal('@deep-foundation/core', 'Handler'),\n  to: {\n    // from/to/type as single relations can be\n    // Id of existed link or link to insert:\n    type_id: deep.idLocal('@deep-foundation/core', 'TSX'),\n    string: \\`({ deep, require }) => { var React = require('react'); return () => <div>my new component</div>; }\\`,\n  },\n  // short cut for create Contain links:\n  containerId: deep.linkId, // current user\n  name: 'my new component',\n});\n\n// hint: feel free to use deep variable in browser console!\n\n// by default only remote request\n// you can set option once\nawait deep.insert({ ... }, { local: true, ... });\n// or globally\ndeep.local = true;\n// and link will be inserted in local deep.minilinks\n// before transaction to server\n// links inserted on client side first is virtual with -123 negative id\n`;\n      }\n  \n      if (event.mode === 'update') {\n        value = `// request to links on remote server\nawait deep.update(${q}, ${v}${oo});\n// { error: ${event.error ? deep.stringify(event.error) : 'null'}, data: { ${r}... } }\n\n// hint: feel free to use deep variable in browser console!\n\n// by default only remote request\n// you can set option once\nawait deep.update({ ... }, { ... }, { local: true, ... });\n// or globally\ndeep.local = true;\n// and link will be updated in local deep.minilinks\n// before transaction to server\n`;\n      }\n  \n      if (event.mode === 'delete') {\n        value = `// request to links on remote server\nawait deep.delete(${q}${oo});\n// { error: ${event.error ? deep.stringify(event.error) : 'null'}, data: { ${r}... } }\n\n// hint: feel free to use deep variable in browser console!\n\n// by default only remote request\n// you can set option once\nawait deep.delete({ ... }, { ... }, { local: true, ... });\n// or globally\ndeep.local = true;\n// and link will be deleted in local deep.minilinks\n// before transaction to server\n`;\n      }\n  \n      return <Go.Editor editable={false} readOnly value={value} fillSize/>;\n    }, []);\n\n    return <go.On do={{\n      exec: (g,v,o) => go.do('view', { id: go.linkId, Component: View })),\n    }}>\n      <c.Button\n        w='3em' h='3em'\n        variant={isActive ? 'active' : undefined}\n        ref={ref}\n        onClick={() => go.do('exec')}\n      >\n        <FaNodeJs/>\n      </c.Button>\n    </go.On>;\n  };\n}",
        "link_id": 21927
      }
    },
    {
      "id": 21929,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 21927,
      "value": {
        "id": 1811,
        "value": "QueriesClientComponent",
        "link_id": 21929
      }
    },
    {
      "id": 21936,
      "type_id": 35,
      "from_id": 145,
      "to_id": 21927
    },
    {
      "id": 21939,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 21936,
      "value": {
        "id": 1815,
        "value": "QueriesClient",
        "link_id": 21939
      }
    },
    {
      "id": 21942,
      "type_id": 5258,
      "from_id": 21936,
      "to_id": 20478
    },
    {
      "id": 21944,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 21942
    },
    {
      "id": 21925,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1810,
        "value": "async ({ deep, data, Go, require }) => {\n  const React = require('react');\n  const { FaReact } = require(\"react-icons/fa\");\n  const c = require('@chakra-ui/react');\n  const _ = require('lodash');\n\n  const dpl = '@deep-foundation/perception-links';\n  const dc = '@deep-foundation/core';\n\n  return ({\n    go,\n    handlerId,\n\n    isActive,\n  }, ref) => {\n    const View = React.useCallback(({ event }) => {\n      let value = event.mode;\n  \n      const q = JSON.stringify(event.query, null, 2);\n      const r = JSON.stringify(event.remoteData).slice(1,30);\n      const v = JSON.stringify(event.value || {}, null, 2);\n\n      const _o = { ...event.options };\n      if (_o.table === 'links') delete _o.table;\n\n      const o = _.isEmpty(_o) ? '' : JSON.stringify(_o, null, 2);\n      const oo = o ? `, ${o}` : '';\n      \n      if (event.mode === 'useQuery' || event.mode === 'useSubscription' || event.mode === 'select' || event.mode === 'subscribe') {\n        value = `// basically deep.select and deep.subscribe returns plain data\n// but deep.useQuery and deep.useSubscriptions always\n// apply synced from server to deep.minilinks local memory\n\n// load links once\nconst { data } = deep.useQuery(${q}${o});\n// { error: ${event.error ? deep.stringify(event.error) : 'null'}, data: { ${r}... }, loading: false }\n\n// load and subscribe to reactive links\nconst { data } = deep.useSubscription(${q}${o})\n// { error: ${event.error ? deep.stringify(event.error) : 'null'}, data: { ${r}... }, loading: false }\n\n// equal queries can be used in local memory\n\n// find links once\nconst data = deep.useLocalSubscription(${q}${o});\n// data // Link[];\n\n// find links with reactive subscription\nconst data = deep.useLocalSubscription(${q}${o});\n// data // Link[];\n\n// links fetched from hooks already exists in minilinks and\n// related each other\n// you can travel by it simply:\nhandler.to.value // { value: \\`my new component\\` }\n\n// you can get reactive links from static links or ids\nconst [user, handler] = deep.useLinks(deep.linkId, notReactiveLink);\n\n// pretty handy use traveler:\nconst data = deep.useSubscription(myLink.travel().out({ type: Contain }).to().query());\n`;\n      }\n  \n      if (event.mode === 'insert') {\n        value = `// hints for react\n\n// if not need to await result\nReact.useEffect(() => {\n  deep.insert(${q}${oo});\n}, []);\n\n// if need to await\nReact.useEffect(() => { (async () => {\n  deep.insert(${q}${oo});\n})() }, []);\n\n<c.Box onChange={async () => {\n  await deep.insert(${q}${oo});\n}}>button</Button>`\n      }\n  \n      if (event.mode === 'update') {\n        value = `// hints for react\n\n// if not need to await result\nReact.useEffect(() => {\n  deep.update(${q}, ${v}${oo});\n}, []);\n\n// if need to await\nReact.useEffect(() => { (async () => {\n  deep.update(${q}, ${v}${oo});\n})() }, []);\n\n<c.Box onChange={async () => {\n  await deep.update(${q}, ${v}${oo});\n}}>button</Button>`\n      }\n  \n      if (event.mode === 'delete') {\n        value = `// hints for react\n\n// if not need to await result\nReact.useEffect(() => {\n  deep.delete(${q}${oo});\n}, []);\n\n// if need to await\nReact.useEffect(() => { (async () => {\n  deep.delete(${q}${oo});\n})() }, []);\n\n<c.Box onChange={async () => {\n  await deep.delete(${q}${oo});\n}}>button</Button>`\n      }\n  \n      return <Go.Editor editable={false} readOnly value={value} fillSize/>;\n    }, []);\n\n    return <go.On do={{\n      exec: (g,v,o) => go.do('view', { id: go.linkId, Component: View })),\n    }}>\n      <c.Button\n        w='3em' h='3em'\n        variant={isActive ? 'active' : undefined}\n        ref={ref}\n        onClick={() => go.do('exec')}\n      >\n        <FaReact/>\n      </c.Button>\n    </go.On>;\n  };\n}",
        "link_id": 21925
      }
    },
    {
      "id": 21928,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 21925,
      "value": {
        "id": 1809,
        "value": "QueriesReactComponent",
        "link_id": 21928
      }
    },
    {
      "id": 21938,
      "type_id": 35,
      "from_id": 145,
      "to_id": 21925
    },
    {
      "id": 21941,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 21938,
      "value": {
        "id": 1816,
        "value": "QueriesReact",
        "link_id": 21941
      }
    },
    {
      "id": 21945,
      "type_id": 5258,
      "from_id": 21938,
      "to_id": 20478
    },
    {
      "id": 21946,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 21945
    },
    {
      "id": 21949,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1819,
        "value": "async ({ deep, data, Go, require }) => {\n    const React = require('react');\n    const { VscJson } = require(\"react-icons/vsc\");\n    const c = require('@chakra-ui/react');\n    const _ = require('lodash');\n    const dpl = '@deep-foundation/perception-links';\n    const dc = '@deep-foundation/core';\n    return ({ go, handlerId, isActive, }, ref) => {\n        const View = React.useCallback(({ event }) => {\n            const value = JSON.stringify(event.remoteData, null, 2);\n            return React.createElement(Go.Editor, { editable: false, readOnly: true, value: value, fillSize: true });\n        }, []);\n        return React.createElement(go.On, { do: {\n                exec: (g, v, o) => go.do('view', { id: go.linkId, Component: View })\n            } },\n            React.createElement(c.Button, { w: '3em', h: '3em', variant: isActive ? 'active' : undefined, ref: ref, onClick: () => go.do('exec') },\n                React.createElement(VscJson, null)));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFO0lBQ3BDLE1BQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUMvQixNQUFNLEVBQUUsT0FBTyxFQUFFLEdBQUcsT0FBTyxDQUFDLGlCQUFpQixDQUFDLENBQUM7SUFDL0MsTUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLGtCQUFrQixDQUFDLENBQUM7SUFDdEMsTUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBRTVCLE1BQU0sR0FBRyxHQUFHLG1DQUFtQyxDQUFDO0lBQ2hELE1BQU0sRUFBRSxHQUFHLHVCQUF1QixDQUFDO0lBRW5DLE9BQU8sQ0FBQyxFQUNOLEVBQUUsRUFDRixTQUFTLEVBRVQsUUFBUSxHQUNULEVBQUUsR0FBRyxFQUFFLEVBQUU7UUFDUixNQUFNLElBQUksR0FBRyxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUMsRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFO1lBQzNDLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLFVBQVUsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFFeEQsT0FBTyxvQkFBQyxFQUFFLENBQUMsTUFBTSxJQUFDLFFBQVEsRUFBRSxLQUFLLEVBQUUsUUFBUSxRQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsUUFBUSxTQUFFLENBQUM7UUFDdkUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBRVAsT0FBTyxvQkFBQyxFQUFFLENBQUMsRUFBRSxJQUFDLEVBQUUsRUFBRTtnQkFDaEIsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxNQUFNLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxDQUFDO2FBQ25FO1lBQ0Msb0JBQUMsQ0FBQyxDQUFDLE1BQU0sSUFDUCxDQUFDLEVBQUMsS0FBSyxFQUFDLENBQUMsRUFBQyxLQUFLLEVBQ2YsT0FBTyxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQ3hDLEdBQUcsRUFBRSxHQUFHLEVBQ1IsT0FBTyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDO2dCQUU1QixvQkFBQyxPQUFPLE9BQUUsQ0FDRCxDQUNMLENBQUM7SUFDWCxDQUFDLENBQUM7QUFDSixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJhc3luYyAoeyBkZWVwLCBkYXRhLCBHbywgcmVxdWlyZSB9KSA9PiB7XG4gIGNvbnN0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbiAgY29uc3QgeyBWc2NKc29uIH0gPSByZXF1aXJlKFwicmVhY3QtaWNvbnMvdnNjXCIpO1xuICBjb25zdCBjID0gcmVxdWlyZSgnQGNoYWtyYS11aS9yZWFjdCcpO1xuICBjb25zdCBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XG5cbiAgY29uc3QgZHBsID0gJ0BkZWVwLWZvdW5kYXRpb24vcGVyY2VwdGlvbi1saW5rcyc7XG4gIGNvbnN0IGRjID0gJ0BkZWVwLWZvdW5kYXRpb24vY29yZSc7XG5cbiAgcmV0dXJuICh7XG4gICAgZ28sXG4gICAgaGFuZGxlcklkLFxuXG4gICAgaXNBY3RpdmUsXG4gIH0sIHJlZikgPT4ge1xuICAgIGNvbnN0IFZpZXcgPSBSZWFjdC51c2VDYWxsYmFjaygoeyBldmVudCB9KSA9PiB7XG4gICAgICBjb25zdCB2YWx1ZSA9IEpTT04uc3RyaW5naWZ5KGV2ZW50LnJlbW90ZURhdGEsIG51bGwsIDIpO1xuICBcbiAgICAgIHJldHVybiA8R28uRWRpdG9yIGVkaXRhYmxlPXtmYWxzZX0gcmVhZE9ubHkgdmFsdWU9e3ZhbHVlfSBmaWxsU2l6ZS8+O1xuICAgIH0sIFtdKTtcblxuICAgIHJldHVybiA8Z28uT24gZG89e3tcbiAgICAgIGV4ZWM6IChnLHYsbykgPT4gZ28uZG8oJ3ZpZXcnLCB7IGlkOiBnby5saW5rSWQsIENvbXBvbmVudDogVmlldyB9KSksXG4gICAgfX0+XG4gICAgICA8Yy5CdXR0b25cbiAgICAgICAgdz0nM2VtJyBoPSczZW0nXG4gICAgICAgIHZhcmlhbnQ9e2lzQWN0aXZlID8gJ2FjdGl2ZScgOiB1bmRlZmluZWR9XG4gICAgICAgIHJlZj17cmVmfVxuICAgICAgICBvbkNsaWNrPXsoKSA9PiBnby5kbygnZXhlYycpfVxuICAgICAgPlxuICAgICAgICA8VnNjSnNvbi8+XG4gICAgICA8L2MuQnV0dG9uPlxuICAgIDwvZ28uT24+O1xuICB9O1xufSJdfQ==",
        "link_id": 21949
      }
    },
    {
      "id": 21952,
      "type_id": 3,
      "from_id": 21926,
      "to_id": 21949,
      "value": {
        "id": 1818,
        "value": "generated",
        "link_id": 21952
      }
    },
    {
      "id": 21953,
      "type_id": 143,
      "from_id": 21949,
      "to_id": 21926
    },
    {
      "id": 21956,
      "type_id": 3,
      "from_id": 21926,
      "to_id": 21953
    },
    {
      "id": 21926,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1814,
        "value": "async ({ deep, data, Go, require }) => {\n  const React = require('react');\n  const { VscJson } = require(\"react-icons/vsc\");\n  const c = require('@chakra-ui/react');\n  const _ = require('lodash');\n\n  const dpl = '@deep-foundation/perception-links';\n  const dc = '@deep-foundation/core';\n\n  return ({\n    go,\n    handlerId,\n\n    isActive,\n  }, ref) => {\n    const View = React.useCallback(({ event }) => {\n      const value = JSON.stringify(event.remoteData, null, 2);\n  \n      return <Go.Editor editable={false} readOnly value={value} fillSize/>;\n    }, []);\n\n    return <go.On do={{\n      exec: (g,v,o) => go.do('view', { id: go.linkId, Component: View })),\n    }}>\n      <c.Button\n        w='3em' h='3em'\n        variant={isActive ? 'active' : undefined}\n        ref={ref}\n        onClick={() => go.do('exec')}\n      >\n        <VscJson/>\n      </c.Button>\n    </go.On>;\n  };\n}",
        "link_id": 21926
      }
    },
    {
      "id": 21930,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 21926,
      "value": {
        "id": 1813,
        "value": "QueriesResultsComponent",
        "link_id": 21930
      }
    },
    {
      "id": 21940,
      "type_id": 35,
      "from_id": 145,
      "to_id": 21926
    },
    {
      "id": 21943,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 21940,
      "value": {
        "id": 1817,
        "value": "QueriesResults",
        "link_id": 21943
      }
    },
    {
      "id": 21947,
      "type_id": 5258,
      "from_id": 21940,
      "to_id": 20478
    },
    {
      "id": 21948,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 21947
    },
    {
      "id": 21950,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1822,
        "value": "async ({ deep, data, Go, require }) => {\n    const React = require('react');\n    const { FaNodeJs } = require(\"react-icons/fa\");\n    const c = require('@chakra-ui/react');\n    const _ = require('lodash');\n    const dpl = '@deep-foundation/perception-links';\n    const dc = '@deep-foundation/core';\n    return ({ go, handlerId, isActive, }, ref) => {\n        const View = React.useCallback(({ event }) => {\n            let value = event.mode;\n            const q = JSON.stringify(event.query, null, 2);\n            const r = JSON.stringify(event.remoteData).slice(1, 30);\n            const v = JSON.stringify(event.value || {}, null, 2);\n            const _o = { ...event.options };\n            if (_o.table === 'links')\n                delete _o.table;\n            const o = _.isEmpty(_o) ? '' : JSON.stringify(_o, null, 2);\n            const oo = o ? `, ${o}` : '';\n            if (event.mode === 'useQuery' || event.mode === 'useSubscription' || event.mode === 'select' || event.mode === 'subscribe') {\n                value = `// request to links on remote server\n\n// load links once\nawait deep.select(${q}${o});\n// { error: ${event.error ? deep.stringify(event.error) : 'null'}, data: { ${r}... } }\n\n// load and subscribe to changes\ndeep.subscribe(${q}${o})\n.subscribe({ next: (links) => {}, error: (error) => {} });\n// links // ${r}...\n\n// hint: feel free to use deep variable in browser console!\n\n${!!_o.table && `// minilinks awailable only for { table: 'links' }`}\n${!_o.table && `// request to links in local memory (minilinks)\n\n// find once\ndeep.ml.select(${q}${o});\n// Link[]...\n\n// subscribe to changes locally\ndeep.ml.subscribe(${q}${o})\n.subscribe({ next: (links) => {}, error: (error) => {} });\n// links // Link[]...\n\n// loaded with deep.select and deep.subscribe plain links\nconst Contain = deep.idLocal('@deep-foundation/core', 'Contain');\nconst results = await deep.select({\n  in: { type: Contain, from: deep.linkId, },\n  return: { contain: { in: { type: Contain } } } // get related links too\n}),\n// can be added to minilinks with:\ndeep.minilinks.apply(\n  results,\n  'name', // STRICTLY UNIQUE\n);\n// you can update links stage in minilinks, by some select/subscription flow manually\n// in react hooks deep.useSubscription and deep.useQuery apply always automatically\n// then you can simply travel by it\nconst user = deep.get(deep.linkId);\nuser.travel().out({ type: Contain }).select();\n`}`;\n            }\n            if (event.mode === 'insert') {\n                value = `// request to links on remote server\nawait deep.insert(${q}${oo});\n// { error: ${event.error ? deep.stringify(event.error) : 'null'}, data: { ${r}... } }\n\n// possible to insert multiple links at request\nawait deep.insert({\n  from: deep.idLocal('@deep-foundation/core', 'clientSupportsJs'),\n  type: deep.idLocal('@deep-foundation/core', 'Handler'),\n  to: {\n    // from/to/type as single relations can be\n    // Id of existed link or link to insert:\n    type_id: deep.idLocal('@deep-foundation/core', 'TSX'),\n    string: \\`({ deep, require }) => { var React = require('react'); return () => <div>my new component</div>; }\\`,\n  },\n  // short cut for create Contain links:\n  containerId: deep.linkId, // current user\n  name: 'my new component',\n});\n\n// hint: feel free to use deep variable in browser console!\n\n// by default only remote request\n// you can set option once\nawait deep.insert({ ... }, { local: true, ... });\n// or globally\ndeep.local = true;\n// and link will be inserted in local deep.minilinks\n// before transaction to server\n// links inserted on client side first is virtual with -123 negative id\n`;\n            }\n            if (event.mode === 'update') {\n                value = `// request to links on remote server\nawait deep.update(${q}, ${v}${oo});\n// { error: ${event.error ? deep.stringify(event.error) : 'null'}, data: { ${r}... } }\n\n// hint: feel free to use deep variable in browser console!\n\n// by default only remote request\n// you can set option once\nawait deep.update({ ... }, { ... }, { local: true, ... });\n// or globally\ndeep.local = true;\n// and link will be updated in local deep.minilinks\n// before transaction to server\n`;\n            }\n            if (event.mode === 'delete') {\n                value = `// request to links on remote server\nawait deep.delete(${q}${oo});\n// { error: ${event.error ? deep.stringify(event.error) : 'null'}, data: { ${r}... } }\n\n// hint: feel free to use deep variable in browser console!\n\n// by default only remote request\n// you can set option once\nawait deep.delete({ ... }, { ... }, { local: true, ... });\n// or globally\ndeep.local = true;\n// and link will be deleted in local deep.minilinks\n// before transaction to server\n`;\n            }\n            return React.createElement(Go.Editor, { editable: false, readOnly: true, value: value, fillSize: true });\n        }, []);\n        return React.createElement(go.On, { do: {\n                exec: (g, v, o) => go.do('view', { id: go.linkId, Component: View })\n            } },\n            React.createElement(c.Button, { w: '3em', h: '3em', variant: isActive ? 'active' : undefined, ref: ref, onClick: () => go.do('exec') },\n                React.createElement(FaNodeJs, null)));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFO0lBQ3BDLE1BQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUMvQixNQUFNLEVBQUUsUUFBUSxFQUFFLEdBQUcsT0FBTyxDQUFDLGdCQUFnQixDQUFDLENBQUM7SUFDL0MsTUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLGtCQUFrQixDQUFDLENBQUM7SUFDdEMsTUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBRTVCLE1BQU0sR0FBRyxHQUFHLG1DQUFtQyxDQUFDO0lBQ2hELE1BQU0sRUFBRSxHQUFHLHVCQUF1QixDQUFDO0lBRW5DLE9BQU8sQ0FBQyxFQUNOLEVBQUUsRUFDRixTQUFTLEVBRVQsUUFBUSxHQUNULEVBQUUsR0FBRyxFQUFFLEVBQUU7UUFDUixNQUFNLElBQUksR0FBRyxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUMsRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFO1lBQzNDLElBQUksS0FBSyxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUM7WUFFdkIsTUFBTSxDQUFDLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsS0FBSyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQztZQUMvQyxNQUFNLENBQUMsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ3ZELE1BQU0sQ0FBQyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLEtBQUssSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBRXJE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RSxDQUFDLE1BQU0sRUFBRSxTQUFTLEVBQUUsSUFBSSxFQUFFLENBQUM7YUFDbkU7WUFDQyxvQkFBQyxDQUFDLENBQUMsTUFBTSxJQUNQLENBQUMsRUFBQyxLQUFLLEVBQUMsQ0FBQyxFQUFDLEtBQUssRUFDZixPQUFPLEVBQUUsUUFBUSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFDeEMsR0FBRyxFQUFFLEdBQUcsRUFDUixPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUM7Z0JBRTVCLG9CQUFDLFFBQVEsT0FBRSxDQUNGLENBQ0wsQ0FBQztJQUNYLENBQUMsQ0FBQztBQUNKLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImFzeW5jICh7IGRlZXAsIGRhdGEsIEdvLCByZXF1aXJlIH0pID0+IHtcbiAgY29uc3QgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuICBjb25zdCB7IEZhTm9kZUpzIH0gPSByZXF1aXJlKFwicmVhY3QtaWNvbnMvZmFcIik7XG4gIGNvbnN0IGMgPSByZXF1aXJlKCdAY2hha3JhLXVpL3JlYWN0Jyk7XG4gIGNvbnN0IF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcblxuICBjb25zdCBkcGwgPSAnQGRlZXAtZm91bmRhdGlvbi9wZXJjZXB0aW9uLWxpbmtzJztcbiAgY29uc3QgZGMgPSAnQGRlZXAtZm91bmRhdGlvbi9jb3JlJztcblxuICByZXR1cm4gKHtcbiAgICBnbyxcbiAgICBoYW5kbGVySWQsXG5cbiAgICBpc0FjdGl2ZSxcbiAgfSwgcmVmKSA9PiB7XG4gICAgY29uc3QgVmlldyA9IFJlYWN0LnVzZUNhbGxiYWNrKCh7IGV2ZW50IH0pID0+IHtcbiAgICAgIGxldCB2YWx1ZSA9IGV2ZW50Lm1vZGU7XG4gIFxuICAgICAgY29uc3QgcSA9IEpTT04uc3RyaW5naWZ5KGV2ZW50LnF1ZXJ5LCBudWxsLCAyKTtcbiAgICAgIGNvbnN0IHIgPSBKU09OLnN0cmluZ2lmeShldmVudC5yZW1vdGVEYXRhKS5zbGljZSgxLDMwKTtcbiAgICAgIGNvbnN0IHYgPSBKU09OLnN0cmluZ2lmeShldmVudC52YWx1ZSB8fCB7fSwgbnVsbCwgMik7XG5cbiAgICAgIGNvbnN0IF9vID0geyAuLi5ldmVudC5vcHRpb25zIH07XG4gICAgICBpZiAoX28udGFibGUgPT09ICdsaW5rcycpIGRlbGV0ZSBfby50YWJsZTtcblxuICAgICAgY29uc3QgbyA9IF8uaXNFbXB0eShfbykgPyAnJyA6IEpTT04uc3RyaW5naWZ5KF9vLCBudWxsLCAyKTtcbiAgICAgIGNvbnN0IG9vID0gbyA/IGAsICR7b31gIDogJyc7XG4gICAgICBcbiAgICAgIGlmIChldmVudC5tb2RlID09PSAndXNlUXVlcnknIHx8IGV2ZW50Lm1vZGUgPT09ICd1c2VTdWJzY3JpcHRpb24nIHx8IGV2ZW50Lm1vZGUgPT09ICdzZWxlY3QnIHx8IGV2ZW50Lm1vZGUgPT09ICdzdWJzY3JpYmUnKSB7XG4gICAgICAgIHZhbHVlID0gYC8vIHJlcXVlc3QgdG8gbGlua3Mgb24gcmVtb3RlIHNlcnZlclxuXG4vLyBsb2FkIGxpbmtzIG9uY2VcbmF3YWl0IGRlZXAuc2VsZWN0KCR7cX0ke299KTtcbi8vIHsgZXJyb3I6ICR7ZXZlbnQuZXJyb3IgPyBkZWVwLnN0cmluZ2lmeShldmVudC5lcnJvcikgOiAnbnVsbCd9LCBkYXRhOiB7ICR7cn0uLi4gfSB9XG5cbi8vIGxvYWQgYW5kIHN1YnNjcmliZSB0byBjaGFuZ2VzXG5kZWVwLnN1YnNjcmliZSgke3F9JHtvfSlcbi5zdWJzY3JpYmUoeyBuZXh0OiAobGlua3MpID0+IHt9LCBlcnJvcjogKGVycm9yKSA9PiB7fSB9KTtcbi8vIGxpbmtzIC8vICR7cn0uLi5cblxuLy8gaGludDogZmVlbCBmcmVlIHRvIHVzZSBkZWVwIHZhcmlhYmxlIGluIGJyb3dzZXIgY29uc29sZSFcblxuJHshIV9vLnRhYmxlICYmIGAvLyBtaW5pbGlua3MgYXdhaWxhYmxlIG9ubHkgZm9yIHsgdGFibGU6ICdsaW5rcycgfWB9XG4keyFfby50YWJsZSAmJiBgLy8gcmVxdWVzdCB0byBsaW5rcyBpbiBsb2NhbCBtZW1vcnkgKG1pbmlsaW5rcylcblxuLy8gZmluZCBvbmNlXG5kZWVwLm1sLnNlbGVjdCgke3F9JHtvfSk7XG4vLyBMaW5rW10uLi5cblxuLy8gc3Vic2NyaWJlIHRvIGNoYW5nZXMgbG9jYWxseVxuZGVlcC5tbC5zdWJzY3JpYmUoJHtxfSR7b30pXG4uc3Vic2NyaWJlKHsgbmV4dDogKGxpbmtzKSA9PiB7fSwgZXJyb3I6IChlcnJvcikgPT4ge30gfSk7XG4vLyBsaW5rcyAvLyBMaW5rW10uLi5cblxuLy8gbG9hZGVkIHdpdGggZGVlcC5zZWxlY3QgYW5kIGRlZXAuc3Vic2NyaWJlIHBsYWluIGxpbmtzXG5jb25zdCBDb250YWluID0gZGVlcC5pZExvY2FsKCdAZGVlcC1mb3VuZGF0aW9uL2NvcmUnLCAnQ29udGFpbicpO1xuY29uc3QgcmVzdWx0cyA9IGF3YWl0IGRlZXAuc2VsZWN0KHtcbiAgaW46IHsgdHlwZTogQ29udGFpbiwgZnJvbTogZGVlcC5saW5rSWQsIH0sXG4gIHJldHVybjogeyBjb250YWluOiB7IGluOiB7IHR5cGU6IENvbnRhaW4gfSB9IH0gLy8gZ2V0IHJlbGF0ZWQgbGlua3MgdG9vXG59KSxcbi8vIGNhbiBiZSBhZGRlZCB0byBtaW5pbGlua3Mgd2l0aDpcbmRlZXAubWluaWxpbmtzLmFwcGx5KFxuICByZXN1bHRzLFxuICAnbmFtZScsIC8vIFNUUklDVExZIFVOSVFVRVxuKTtcbi8vIHlvdSBjYW4gdXBkYXRlIGxpbmtzIHN0YWdlIGluIG1pbmlsaW5rcywgYnkgc29tZSBzZWxlY3Qvc3Vic2NyaXB0aW9uIGZsb3cgbWFudWFsbHlcbi8vIGluIHJlYWN0IGhvb2tzIGRlZXAudXNlU3Vic2NyaXB0aW9uIGFuZCBkZWVwLnVzZVF1ZXJ5IGFwcGx5IGFsd2F5cyBhdXRvbWF0aWNhbGx5XG4vLyB0aGVuIHlvdSBjYW4gc2ltcGx5IHRyYXZlbCBieSBpdFxuY29uc3QgdXNlciA9IGRlZXAuZ2V0KGRlZXAubGlua0lkKTtcbnVzZXIudHJhdmVsKCkub3V0KHsgdHlwZTogQ29udGFpbiB9KS5zZWxlY3QoKTtcbmB9YDtcbiAgICAgIH1cbiAgXG4gICAgICBpZiAoZXZlbnQubW9kZSA9PT0gJ2luc2VydCcpIHtcbiAgICAgICAgdmFsdWUgPSBgLy8gcmVxdWVzdCB0byBsaW5rcyBvbiByZW1vdGUgc2VydmVyXG5hd2FpdCBkZWVwLmluc2VydCgke3F9JHtvb30pO1xuLy8geyBlcnJvcjogJHtldmVudC5lcnJvciA/IGRlZXAuc3RyaW5naWZ5KGV2ZW50LmVycm9yKSA6ICdudWxsJ30sIGRhdGE6IHsgJHtyfS4uLiB9IH1cblxuLy8gcG9zc2libGUgdG8gaW5zZXJ0IG11bHRpcGxlIGxpbmtzIGF0IHJlcXVlc3RcbmF3YWl0IGRlZXAuaW5zZXJ0KHtcbiAgZnJvbTogZGVlcC5pZExvY2FsKCdAZGVlcC1mb3VuZGF0aW9uL2NvcmUnLCAnY2xpZW50U3VwcG9ydHNKcycpLFxuICB0eXBlOiBkZWVwLmlkTG9jYWwoJ0BkZWVwLWZvdW5kYXRpb24vY29yZScsICdIYW5kbGVyJyksXG4gIHRvOiB7XG4gICAgLy8gZnJvbS90by90eXBlIGFzIHNpbmdsZSByZWxhdGlvbnMgY2FuIGJlXG4gICAgLy8gSWQgb2YgZXhpc3RlZCBsaW5rIG9yIGxpbmsgdG8gaW5zZXJ0OlxuICAgIHR5cGVfaWQ6IGRlZXAuaWRMb2NhbCgnQGRlZXAtZm91bmRhdGlvbi9jb3JlJywgJ1RTWCcpLFxuICAgIHN0cmluZzogXFxgKHsgZGVlcCwgcmVxdWlyZSB9KSA9PiB7IHZhciBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7IHJldHVybiAoKSA9PiA8ZGl2Pm15IG5ldyBjb21wb25lbnQ8L2Rpdj47IH1cXGAsXG4gIH0sXG4gIC8vIHNob3J0IGN1dCBmb3IgY3JlYXRlIENvbnRhaW4gbGlua3M6XG4gIGNvbnRhaW5lcklkOiBkZWVwLmxpbmtJZCwgLy8gY3VycmVudCB1c2VyXG4gIG5hbWU6ICdteSBuZXcgY29tcG9uZW50Jyxcbn0pO1xuXG4vLyBoaW50OiBmZWVsIGZyZWUgdG8gdXNlIGRlZXAgdmFyaWFibGUgaW4gYnJvd3NlciBjb25zb2xlIVxuXG4vLyBieSBkZWZhdWx0IG9ubHkgcmVtb3RlIHJlcXVlc3Rcbi8vIHlvdSBjYW4gc2V0IG9wdGlvbiBvbmNlXG5hd2FpdCBkZWVwLmluc2VydCh7IC4uLiB9LCB7IGxvY2FsOiB0cnVlLCAuLi4gfSk7XG4vLyBvciBnbG9iYWxseVxuZGVlcC5sb2NhbCA9IHRydWU7XG4vLyBhbmQgbGluayB3aWxsIGJlIGluc2VydGVkIGluIGxvY2FsIGRlZXAubWluaWxpbmtzXG4vLyBiZWZvcmUgdHJhbnNhY3Rpb24gdG8gc2VydmVyXG4vLyBsaW5rcyBpbnNlcnRlZCBvbiBjbGllbnQgc2lkZSBmaXJzdCBpcyB2aXJ0dWFsIHdpdGggLTEyMyBuZWdhdGl2ZSBpZFxuYDtcbiAgICAgIH1cbiAgXG4gICAgICBpZiAoZXZlbnQubW9kZSA9PT0gJ3VwZGF0ZScpIHtcbiAgICAgICAgdmFsdWUgPSBgLy8gcmVxdWVzdCB0byBsaW5rcyBvbiByZW1vdGUgc2VydmVyXG5hd2FpdCBkZWVwLnVwZGF0ZSgke3F9LCAke3Z9JHtvb30pO1xuLy8geyBlcnJvcjogJHtldmVudC5lcnJvciA/IGRlZXAuc3RyaW5naWZ5KGV2ZW50LmVycm9yKSA6ICdudWxsJ30sIGRhdGE6IHsgJHtyfS4uLiB9IH1cblxuLy8gaGludDogZmVlbCBmcmVlIHRvIHVzZSBkZWVwIHZhcmlhYmxlIGluIGJyb3dzZXIgY29uc29sZSFcblxuLy8gYnkgZGVmYXVsdCBvbmx5IHJlbW90ZSByZXF1ZXN0XG4vLyB5b3UgY2FuIHNldCBvcHRpb24gb25jZVxuYXdhaXQgZGVlcC51cGRhdGUoeyAuLi4gfSwgeyAuLi4gfSwgeyBsb2NhbDogdHJ1ZSwgLi4uIH0pO1xuLy8gb3IgZ2xvYmFsbHlcbmRlZXAubG9jYWwgPSB0cnVlO1xuLy8gYW5kIGxpbmsgd2lsbCBiZSB1cGRhdGVkIGluIGxvY2FsIGRlZXAubWluaWxpbmtzXG4vLyBiZWZvcmUgdHJhbnNhY3Rpb24gdG8gc2VydmVyXG5gO1xuICAgICAgfVxuICBcbiAgICAgIGlmIChldmVudC5tb2RlID09PSAnZGVsZXRlJykge1xuICAgICAgICB2YWx1ZSA9IGAvLyByZXF1ZXN0IHRvIGxpbmtzIG9uIHJlbW90ZSBzZXJ2ZXJcbmF3YWl0IGRlZXAuZGVsZXRlKCR7cX0ke29vfSk7XG4vLyB7IGVycm9yOiAke2V2ZW50LmVycm9yID8gZGVlcC5zdHJpbmdpZnkoZXZlbnQuZXJyb3IpIDogJ251bGwnfSwgZGF0YTogeyAke3J9Li4uIH0gfVxuXG4vLyBoaW50OiBmZWVsIGZyZWUgdG8gdXNlIGRlZXAgdmFyaWFibGUgaW4gYnJvd3NlciBjb25zb2xlIVxuXG4vLyBieSBkZWZhdWx0IG9ubHkgcmVtb3RlIHJlcXVlc3Rcbi8vIHlvdSBjYW4gc2V0IG9wdGlvbiBvbmNlXG5hd2FpdCBkZWVwLmRlbGV0ZSh7IC4uLiB9LCB7IC4uLiB9LCB7IGxvY2FsOiB0cnVlLCAuLi4gfSk7XG4vLyBvciBnbG9iYWxseVxuZGVlcC5sb2NhbCA9IHRydWU7XG4vLyBhbmQgbGluayB3aWxsIGJlIGRlbGV0ZWQgaW4gbG9jYWwgZGVlcC5taW5pbGlua3Ncbi8vIGJlZm9yZSB0cmFuc2FjdGlvbiB0byBzZXJ2ZXJcbmA7XG4gICAgICB9XG4gIFxuICAgICAgcmV0dXJuIDxHby5FZGl0b3IgZWRpdGFibGU9e2ZhbHNlfSByZWFkT25seSB2YWx1ZT17dmFsdWV9IGZpbGxTaXplLz47XG4gICAgfSwgW10pO1xuXG4gICAgcmV0dXJuIDxnby5PbiBkbz17e1xuICAgICAgZXhlYzogKGcsdixvKSA9PiBnby5kbygndmlldycsIHsgaWQ6IGdvLmxpbmtJZCwgQ29tcG9uZW50OiBWaWV3IH0pKSxcbiAgICB9fT5cbiAgICAgIDxjLkJ1dHRvblxuICAgICAgICB3PSczZW0nIGg9JzNlbSdcbiAgICAgICAgdmFyaWFudD17aXNBY3RpdmUgPyAnYWN0aXZlJyA6IHVuZGVmaW5lZH1cbiAgICAgICAgcmVmPXtyZWZ9XG4gICAgICAgIG9uQ2xpY2s9eygpID0+IGdvLmRvKCdleGVjJyl9XG4gICAgICA+XG4gICAgICAgIDxGYU5vZGVKcy8+XG4gICAgICA8L2MuQnV0dG9uPlxuICAgIDwvZ28uT24+O1xuICB9O1xufSJdfQ==",
        "link_id": 21950
      }
    },
    {
      "id": 21955,
      "type_id": 3,
      "from_id": 21927,
      "to_id": 21950,
      "value": {
        "id": 1821,
        "value": "generated",
        "link_id": 21955
      }
    },
    {
      "id": 21957,
      "type_id": 143,
      "from_id": 21950,
      "to_id": 21927
    },
    {
      "id": 21959,
      "type_id": 3,
      "from_id": 21927,
      "to_id": 21957
    },
    {
      "id": 21951,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1823,
        "value": "async ({ deep, data, Go, require }) => {\n    const React = require('react');\n    const { FaReact } = require(\"react-icons/fa\");\n    const c = require('@chakra-ui/react');\n    const _ = require('lodash');\n    const dpl = '@deep-foundation/perception-links';\n    const dc = '@deep-foundation/core';\n    return ({ go, handlerId, isActive, }, ref) => {\n        const View = React.useCallback(({ event }) => {\n            let value = event.mode;\n            const q = JSON.stringify(event.query, null, 2);\n            const r = JSON.stringify(event.remoteData).slice(1, 30);\n            const v = JSON.stringify(event.value || {}, null, 2);\n            const _o = { ...event.options };\n            if (_o.table === 'links')\n                delete _o.table;\n            const o = _.isEmpty(_o) ? '' : JSON.stringify(_o, null, 2);\n            const oo = o ? `, ${o}` : '';\n            if (event.mode === 'useQuery' || event.mode === 'useSubscription' || event.mode === 'select' || event.mode === 'subscribe') {\n                value = `// basically deep.select and deep.subscribe returns plain data\n// but deep.useQuery and deep.useSubscriptions always\n// apply synced from server to deep.minilinks local memory\n\n// load links once\nconst { data } = deep.useQuery(${q}${o});\n// { error: ${event.error ? deep.stringify(event.error) : 'null'}, data: { ${r}... }, loading: false }\n\n// load and subscribe to reactive links\nconst { data } = deep.useSubscription(${q}${o})\n// { error: ${event.error ? deep.stringify(event.error) : 'null'}, data: { ${r}... }, loading: false }\n\n// equal queries can be used in local memory\n\n// find links once\nconst data = deep.useLocalSubscription(${q}${o});\n// data // Link[];\n\n// find links with reactive subscription\nconst data = deep.useLocalSubscription(${q}${o});\n// data // Link[];\n\n// links fetched from hooks already exists in minilinks and\n// related each other\n// you can travel by it simply:\nhandler.to.value // { value: \\`my new component\\` }\n\n// you can get reactive links from static links or ids\nconst [user, handler] = deep.useLinks(deep.linkId, notReactiveLink);\n\n// pretty handy use traveler:\nconst data = deep.useSubscription(myLink.travel().out({ type: Contain }).to().query());\n`;\n            }\n            if (event.mode === 'insert') {\n                value = `// hints for react\n\n// if not need to await result\nReact.useEffect(() => {\n  deep.insert(${q}${oo});\n}, []);\n\n// if need to await\nReact.useEffect(() => { (async () => {\n  deep.insert(${q}${oo});\n})() }, []);\n\n<c.Box onChange={async () => {\n  await deep.insert(${q}${oo});\n}}>button</Button>`;\n            }\n            if (event.mode === 'update') {\n                value = `// hints for react\n\n// if not need to await result\nReact.useEffect(() => {\n  deep.update(${q}, ${v}${oo});\n}, []);\n\n// if need to await\nReact.useEffect(() => { (async () => {\n  deep.update(${q}, ${v}${oo});\n})() }, []);\n\n<c.Box onChange={async () => {\n  await deep.update(${q}, ${v}${oo});\n}}>button</Button>`;\n            }\n            if (event.mode === 'delete') {\n                value = `// hints for react\n\n// if not need to await result\nReact.useEffect(() => {\n  deep.delete(${q}${oo});\n}, []);\n\n// if need to await\nReact.useEffect(() => { (async () => {\n  deep.delete(${q}${oo});\n})() }, []);\n\n<c.Box onChange={async () => {\n  await deep.delete(${q}${oo});\n}}>button</Button>`;\n            }\n            return React.createElement(Go.Editor, { editable: false, readOnly: true, value: value, fillSize: true });\n        }, []);\n        return React.createElement(go.On, { do: {\n                exec: (g, v, o) => go.do('view', { id: go.linkId, Component: View })\n            } },\n            React.createElement(c.Button, { w: '3em', h: '3em', variant: isActive ? 'active' : undefined, ref: ref, onClick: () => go.do('exec') },\n                React.createElement(FaReact, null)));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFO0lBQ3BDLE1BQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUMvQixNQUFNLEVBQUUsT0FBTyxFQUFFLEdBQUcsT0FBTyxDQUFDLGdCQUFnQixDQUFDLENBQUM7SUFDOUMsTUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLGtCQUFrQixDQUFDLENBQUM7SUFDdEMsTUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBRTVCLE1BQU0sR0FBRyxHQUFHLG1DQUFtQyxDQUFDO0lBQ2hELE1BQU0sRUFBRSxHQUFHLHVCQUF1QixDQUFDO0lBRW5DLE9BQU8sQ0FBQyxFQUNOLEVBQUUsRUFDRixTQUFTLEVBRVQsUUFBUSxHQUNULEVBQUUsR0FBRyxFQUFFLEVBQUU7UUFDUixNQUFNLElBQUksR0FBRyxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUMsRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFO1lBQzNDLElBQUksS0FBSyxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUM7WUFFdkIsTUFBTSxDQUFDLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsS0FBSyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQztZQUMvQyxNQUFNLENBQUMsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ3ZELE1BQU0sQ0FBQyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLEtBQUssSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBRXJE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RUFDeEMsR0FBRyxFQUFFLEdBQUcsRUFDUixPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUM7Z0JBRTVCLG9CQUFDLE9BQU8sT0FBRSxDQUNELENBQ0wsQ0FBQztJQUNYLENBQUMsQ0FBQztBQUNKLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImFzeW5jICh7IGRlZXAsIGRhdGEsIEdvLCByZXF1aXJlIH0pID0+IHtcbiAgY29uc3QgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuICBjb25zdCB7IEZhUmVhY3QgfSA9IHJlcXVpcmUoXCJyZWFjdC1pY29ucy9mYVwiKTtcbiAgY29uc3QgYyA9IHJlcXVpcmUoJ0BjaGFrcmEtdWkvcmVhY3QnKTtcbiAgY29uc3QgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xuXG4gIGNvbnN0IGRwbCA9ICdAZGVlcC1mb3VuZGF0aW9uL3BlcmNlcHRpb24tbGlua3MnO1xuICBjb25zdCBkYyA9ICdAZGVlcC1mb3VuZGF0aW9uL2NvcmUnO1xuXG4gIHJldHVybiAoe1xuICAgIGdvLFxuICAgIGhhbmRsZXJJZCxcblxuICAgIGlzQWN0aXZlLFxuICB9LCByZWYpID0+IHtcbiAgICBjb25zdCBWaWV3ID0gUmVhY3QudXNlQ2FsbGJhY2soKHsgZXZlbnQgfSkgPT4ge1xuICAgICAgbGV0IHZhbHVlID0gZXZlbnQubW9kZTtcbiAgXG4gICAgICBjb25zdCBxID0gSlNPTi5zdHJpbmdpZnkoZXZlbnQucXVlcnksIG51bGwsIDIpO1xuICAgICAgY29uc3QgciA9IEpTT04uc3RyaW5naWZ5KGV2ZW50LnJlbW90ZURhdGEpLnNsaWNlKDEsMzApO1xuICAgICAgY29uc3QgdiA9IEpTT04uc3RyaW5naWZ5KGV2ZW50LnZhbHVlIHx8IHt9LCBudWxsLCAyKTtcblxuICAgICAgY29uc3QgX28gPSB7IC4uLmV2ZW50Lm9wdGlvbnMgfTtcbiAgICAgIGlmIChfby50YWJsZSA9PT0gJ2xpbmtzJykgZGVsZXRlIF9vLnRhYmxlO1xuXG4gICAgICBjb25zdCBvID0gXy5pc0VtcHR5KF9vKSA/ICcnIDogSlNPTi5zdHJpbmdpZnkoX28sIG51bGwsIDIpO1xuICAgICAgY29uc3Qgb28gPSBvID8gYCwgJHtvfWAgOiAnJztcbiAgICAgIFxuICAgICAgaWYgKGV2ZW50Lm1vZGUgPT09ICd1c2VRdWVyeScgfHwgZXZlbnQubW9kZSA9PT0gJ3VzZVN1YnNjcmlwdGlvbicgfHwgZXZlbnQubW9kZSA9PT0gJ3NlbGVjdCcgfHwgZXZlbnQubW9kZSA9PT0gJ3N1YnNjcmliZScpIHtcbiAgICAgICAgdmFsdWUgPSBgLy8gYmFzaWNhbGx5IGRlZXAuc2VsZWN0IGFuZCBkZWVwLnN1YnNjcmliZSByZXR1cm5zIHBsYWluIGRhdGFcbi8vIGJ1dCBkZWVwLnVzZVF1ZXJ5IGFuZCBkZWVwLnVzZVN1YnNjcmlwdGlvbnMgYWx3YXlzXG4vLyBhcHBseSBzeW5jZWQgZnJvbSBzZXJ2ZXIgdG8gZGVlcC5taW5pbGlua3MgbG9jYWwgbWVtb3J5XG5cbi8vIGxvYWQgbGlua3Mgb25jZVxuY29uc3QgeyBkYXRhIH0gPSBkZWVwLnVzZVF1ZXJ5KCR7cX0ke299KTtcbi8vIHsgZXJyb3I6ICR7ZXZlbnQuZXJyb3IgPyBkZWVwLnN0cmluZ2lmeShldmVudC5lcnJvcikgOiAnbnVsbCd9LCBkYXRhOiB7ICR7cn0uLi4gfSwgbG9hZGluZzogZmFsc2UgfVxuXG4vLyBsb2FkIGFuZCBzdWJzY3JpYmUgdG8gcmVhY3RpdmUgbGlua3NcbmNvbnN0IHsgZGF0YSB9ID0gZGVlcC51c2VTdWJzY3JpcHRpb24oJHtxfSR7b30pXG4vLyB7IGVycm9yOiAke2V2ZW50LmVycm9yID8gZGVlcC5zdHJpbmdpZnkoZXZlbnQuZXJyb3IpIDogJ251bGwnfSwgZGF0YTogeyAke3J9Li4uIH0sIGxvYWRpbmc6IGZhbHNlIH1cblxuLy8gZXF1YWwgcXVlcmllcyBjYW4gYmUgdXNlZCBpbiBsb2NhbCBtZW1vcnlcblxuLy8gZmluZCBsaW5rcyBvbmNlXG5jb25zdCBkYXRhID0gZGVlcC51c2VMb2NhbFN1YnNjcmlwdGlvbigke3F9JHtvfSk7XG4vLyBkYXRhIC8vIExpbmtbXTtcblxuLy8gZmluZCBsaW5rcyB3aXRoIHJlYWN0aXZlIHN1YnNjcmlwdGlvblxuY29uc3QgZGF0YSA9IGRlZXAudXNlTG9jYWxTdWJzY3JpcHRpb24oJHtxfSR7b30pO1xuLy8gZGF0YSAvLyBMaW5rW107XG5cbi8vIGxpbmtzIGZldGNoZWQgZnJvbSBob29rcyBhbHJlYWR5IGV4aXN0cyBpbiBtaW5pbGlua3MgYW5kXG4vLyByZWxhdGVkIGVhY2ggb3RoZXJcbi8vIHlvdSBjYW4gdHJhdmVsIGJ5IGl0IHNpbXBseTpcbmhhbmRsZXIudG8udmFsdWUgLy8geyB2YWx1ZTogXFxgbXkgbmV3IGNvbXBvbmVudFxcYCB9XG5cbi8vIHlvdSBjYW4gZ2V0IHJlYWN0aXZlIGxpbmtzIGZyb20gc3RhdGljIGxpbmtzIG9yIGlkc1xuY29uc3QgW3VzZXIsIGhhbmRsZXJdID0gZGVlcC51c2VMaW5rcyhkZWVwLmxpbmtJZCwgbm90UmVhY3RpdmVMaW5rKTtcblxuLy8gcHJldHR5IGhhbmR5IHVzZSB0cmF2ZWxlcjpcbmNvbnN0IGRhdGEgPSBkZWVwLnVzZVN1YnNjcmlwdGlvbihteUxpbmsudHJhdmVsKCkub3V0KHsgdHlwZTogQ29udGFpbiB9KS50bygpLnF1ZXJ5KCkpO1xuYDtcbiAgICAgIH1cbiAgXG4gICAgICBpZiAoZXZlbnQubW9kZSA9PT0gJ2luc2VydCcpIHtcbiAgICAgICAgdmFsdWUgPSBgLy8gaGludHMgZm9yIHJlYWN0XG5cbi8vIGlmIG5vdCBuZWVkIHRvIGF3YWl0IHJlc3VsdFxuUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgZGVlcC5pbnNlcnQoJHtxfSR7b299KTtcbn0sIFtdKTtcblxuLy8gaWYgbmVlZCB0byBhd2FpdFxuUmVhY3QudXNlRWZmZWN0KCgpID0+IHsgKGFzeW5jICgpID0+IHtcbiAgZGVlcC5pbnNlcnQoJHtxfSR7b299KTtcbn0pKCkgfSwgW10pO1xuXG48Yy5Cb3ggb25DaGFuZ2U9e2FzeW5jICgpID0+IHtcbiAgYXdhaXQgZGVlcC5pbnNlcnQoJHtxfSR7b299KTtcbn19PmJ1dHRvbjwvQnV0dG9uPmBcbiAgICAgIH1cbiAgXG4gICAgICBpZiAoZXZlbnQubW9kZSA9PT0gJ3VwZGF0ZScpIHtcbiAgICAgICAgdmFsdWUgPSBgLy8gaGludHMgZm9yIHJlYWN0XG5cbi8vIGlmIG5vdCBuZWVkIHRvIGF3YWl0IHJlc3VsdFxuUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgZGVlcC51cGRhdGUoJHtxfSwgJHt2fSR7b299KTtcbn0sIFtdKTtcblxuLy8gaWYgbmVlZCB0byBhd2FpdFxuUmVhY3QudXNlRWZmZWN0KCgpID0+IHsgKGFzeW5jICgpID0+IHtcbiAgZGVlcC51cGRhdGUoJHtxfSwgJHt2fSR7b299KTtcbn0pKCkgfSwgW10pO1xuXG48Yy5Cb3ggb25DaGFuZ2U9e2FzeW5jICgpID0+IHtcbiAgYXdhaXQgZGVlcC51cGRhdGUoJHtxfSwgJHt2fSR7b299KTtcbn19PmJ1dHRvbjwvQnV0dG9uPmBcbiAgICAgIH1cbiAgXG4gICAgICBpZiAoZXZlbnQubW9kZSA9PT0gJ2RlbGV0ZScpIHtcbiAgICAgICAgdmFsdWUgPSBgLy8gaGludHMgZm9yIHJlYWN0XG5cbi8vIGlmIG5vdCBuZWVkIHRvIGF3YWl0IHJlc3VsdFxuUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgZGVlcC5kZWxldGUoJHtxfSR7b299KTtcbn0sIFtdKTtcblxuLy8gaWYgbmVlZCB0byBhd2FpdFxuUmVhY3QudXNlRWZmZWN0KCgpID0+IHsgKGFzeW5jICgpID0+IHtcbiAgZGVlcC5kZWxldGUoJHtxfSR7b299KTtcbn0pKCkgfSwgW10pO1xuXG48Yy5Cb3ggb25DaGFuZ2U9e2FzeW5jICgpID0+IHtcbiAgYXdhaXQgZGVlcC5kZWxldGUoJHtxfSR7b299KTtcbn19PmJ1dHRvbjwvQnV0dG9uPmBcbiAgICAgIH1cbiAgXG4gICAgICByZXR1cm4gPEdvLkVkaXRvciBlZGl0YWJsZT17ZmFsc2V9IHJlYWRPbmx5IHZhbHVlPXt2YWx1ZX0gZmlsbFNpemUvPjtcbiAgICB9LCBbXSk7XG5cbiAgICByZXR1cm4gPGdvLk9uIGRvPXt7XG4gICAgICBleGVjOiAoZyx2LG8pID0+IGdvLmRvKCd2aWV3JywgeyBpZDogZ28ubGlua0lkLCBDb21wb25lbnQ6IFZpZXcgfSkpLFxuICAgIH19PlxuICAgICAgPGMuQnV0dG9uXG4gICAgICAgIHc9JzNlbScgaD0nM2VtJ1xuICAgICAgICB2YXJpYW50PXtpc0FjdGl2ZSA/ICdhY3RpdmUnIDogdW5kZWZpbmVkfVxuICAgICAgICByZWY9e3JlZn1cbiAgICAgICAgb25DbGljaz17KCkgPT4gZ28uZG8oJ2V4ZWMnKX1cbiAgICAgID5cbiAgICAgICAgPEZhUmVhY3QvPlxuICAgICAgPC9jLkJ1dHRvbj5cbiAgICA8L2dvLk9uPjtcbiAgfTtcbn0iXX0=",
        "link_id": 21951
      }
    },
    {
      "id": 21954,
      "type_id": 3,
      "from_id": 21925,
      "to_id": 21951,
      "value": {
        "id": 1820,
        "value": "generated",
        "link_id": 21954
      }
    },
    {
      "id": 21958,
      "type_id": 143,
      "from_id": 21951,
      "to_id": 21925
    },
    {
      "id": 21960,
      "type_id": 3,
      "from_id": 21925,
      "to_id": 21958
    },
    {
      "id": 22426,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1825,
        "value": "({ deep, data, require, Go }) => {\n  const React = require('react');\n  \n  const c = require('@chakra-ui/react');\n  const _ = require('lodash');\n  const moment = require('moment');\n  const { useDebounceCallback } = require('@react-hook/debounce');\n\n  var dpl = '@deep-foundation/perception-links';\n  var dc = '@deep-foundation/core';\n\n  const Stack = deep.idLocal(dpl, 'Stack');\n  const Queries = deep.idLocal(dpl, 'Queries');\n  const Compatable = deep.idLocal(dpl, 'Compatable');\n  const Handler = deep.idLocal(dc, 'Handler');\n  const QueriesClient = deep.idLocal(dpl, 'QueriesClient');\n\n  return ({\n    go,\n\n    event,\n\n    children,\n  }, ref) => {\n    const { data: views } = deep.useQuery({\n      type_id: Handler,\n      out: {\n        type_id: Compatable,\n        to_id: Queries,\n      },\n    });\n  \n    const ViewItem = React.useMemo(() => React.memo(({ link: handler, isActive }) => {\n      return <Go.Handler handlerId={handler.id} event={event} isActive={isActive}/>;\n    }), []);\n\n    const [o, setO] = React.useState();\n    React.useEffect(() => go.set(Stack), []);\n\n    return <go.On\n      do={{\n        view: (g,v,o) => setO(o),\n      }}\n    >\n      <c.Flex ref={ref} direction='column' h='100%'>\n        <c.Box h='3em'><go.Provider linkId={Stack}>\n          <go.Component path={[dpl, 'Stack']} direction='horizontal' links={views} Item={ViewItem}/>\n        </go.Provider></c.Box>\n        {typeof(o?.Component) === 'function' && [<go.Provider key={o.id} linkId={o.id}>\n          <c.Box flex='1' position='relative'>\n            <o.Component event={event}/>\n          </c.Box>\n        </go.Provider>]}\n      </c.Flex>\n    </go.On>;\n  };\n}",
        "link_id": 22426
      }
    },
    {
      "id": 22427,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 22426,
      "value": {
        "id": 1824,
        "value": "QueryComponent",
        "link_id": 22427
      }
    },
    {
      "id": 22430,
      "type_id": 35,
      "from_id": 145,
      "to_id": 22426
    },
    {
      "id": 22431,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 22430,
      "value": {
        "id": 1826,
        "value": "Query",
        "link_id": 22431
      }
    },
    {
      "id": 22432,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1828,
        "value": "({ deep, data, require, Go }) => {\n    const React = require('react');\n    const c = require('@chakra-ui/react');\n    const _ = require('lodash');\n    const moment = require('moment');\n    const { useDebounceCallback } = require('@react-hook/debounce');\n    var dpl = '@deep-foundation/perception-links';\n    var dc = '@deep-foundation/core';\n    const Stack = deep.idLocal(dpl, 'Stack');\n    const Queries = deep.idLocal(dpl, 'Queries');\n    const Compatable = deep.idLocal(dpl, 'Compatable');\n    const Handler = deep.idLocal(dc, 'Handler');\n    const QueriesClient = deep.idLocal(dpl, 'QueriesClient');\n    return ({ go, event, children, }, ref) => {\n        const { data: views } = deep.useQuery({\n            type_id: Handler,\n            out: {\n                type_id: Compatable,\n                to_id: Queries,\n            },\n        });\n        const ViewItem = React.useMemo(() => React.memo(({ link: handler, isActive }) => {\n            return React.createElement(Go.Handler, { handlerId: handler.id, event: event, isActive: isActive });\n        }), []);\n        const [o, setO] = React.useState();\n        React.useEffect(() => go.set(Stack), []);\n        return React.createElement(go.On, { do: {\n                view: (g, v, o) => setO(o),\n            } },\n            React.createElement(c.Flex, { ref: ref, direction: 'column', h: '100%' },\n                React.createElement(c.Box, { h: '3em' },\n                    React.createElement(go.Provider, { linkId: Stack },\n                        React.createElement(go.Component, { path: [dpl, 'Stack'], direction: 'horizontal', links: views, Item: ViewItem }))),\n                typeof (o?.Component) === 'function' && [React.createElement(go.Provider, { key: o.id, linkId: o.id },\n                        React.createElement(c.Box, { flex: '1', position: 'relative' },\n                            React.createElement(o.Component, { event: event })))]));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxDQUFDLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRTtJQUM5QixNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7SUFFL0IsTUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLGtCQUFrQixDQUFDLENBQUM7SUFDdEMsTUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQzVCLE1BQU0sTUFBTSxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUNqQyxNQUFNLEVBQUUsbUJBQW1CLEVBQUUsR0FBRyxPQUFPLENBQUMsc0JBQXNCLENBQUMsQ0FBQztJQUVoRSxJQUFJLEdBQUcsR0FBRyxtQ0FBbUMsQ0FBQztJQUM5QyxJQUFJLEVBQUUsR0FBRyx1QkFBdUIsQ0FBQztJQUVqQyxNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxPQUFPLENBQUMsQ0FBQztJQUN6QyxNQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxTQUFTLENBQUMsQ0FBQztJQUM3QyxNQUFNLFVBQVUsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxZQUFZLENBQUMsQ0FBQztJQUNuRCxNQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUUsRUFBRSxTQUFTLENBQUMsQ0FBQztJQUM1QyxNQUFNLGFBQWEsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxlQUFlLENBQUMsQ0FBQztJQUV6RCxPQUFPLENBQUMsRUFDTixFQUFFLEVBRUYsS0FBSyxFQUVMLFFBQVEsR0FDVCxFQUFFLEdBQUcsRUFBRSxFQUFFO1FBQ1IsTUFBTSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDO1lBQ3BDLE9BQU8sRUFBRSxPQUFPO1lBQ2hCLEdBQUcsRUFBRTtnQkFDSCxPQUFPLEVBQUUsVUFBVTtnQkFDbkIsS0FBSyxFQUFFLE9BQU87YUFDZjtTQUNGLENBQUMsQ0FBQztRQUVILE1BQU0sUUFBUSxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxRQUFRLEVBQUUsRUFBRSxFQUFFO1lBQzlFLE9BQU8sb0JBQUMsRUFBRSxDQUFDLE9BQU8sSUFBQyxTQUFTLEVBQUUsT0FBTyxDQUFDLEVBQUUsRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLFFBQVEsRUFBRSxRQUFRLEdBQUcsQ0FBQztRQUNoRixDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUVSLE1BQU0sQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLEdBQUcsS0FBSyxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBQ25DLEtBQUssQ0FBQyxTQUFTLENBQUMsR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUV6QyxPQUFPLG9CQUFDLEVBQUUsQ0FBQyxFQUFFLElBQ1gsRUFBRSxFQUFFO2dCQUNGLElBQUksRUFBRSxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO2FBQ3pCO1lBRUQsb0JBQUMsQ0FBQyxDQUFDLElBQUksSUFBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLFNBQVMsRUFBQyxRQUFRLEVBQUMsQ0FBQyxFQUFDLE1BQU07Z0JBQzNDLG9CQUFDLENBQUMsQ0FBQyxHQUFHLElBQUMsQ0FBQyxFQUFDLEtBQUs7b0JBQUMsb0JBQUMsRUFBRSxDQUFDLFFBQVEsSUFBQyxNQUFNLEVBQUUsS0FBSzt3QkFDdkMsb0JBQUMsRUFBRSxDQUFDLFNBQVMsSUFBQyxJQUFJLEVBQUUsQ0FBQyxHQUFHLEVBQUUsT0FBTyxDQUFDLEVBQUUsU0FBUyxFQUFDLFlBQVksRUFBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxRQUFRLEdBQUcsQ0FDOUUsQ0FBUTtnQkFDckIsT0FBTSxDQUFDLENBQUMsRUFBRSxTQUFTLENBQUMsS0FBSyxVQUFVLElBQUksQ0FBQyxvQkFBQyxFQUFFLENBQUMsUUFBUSxJQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLE1BQU0sRUFBRSxDQUFDLENBQUMsRUFBRTt3QkFDM0Usb0JBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBQyxJQUFJLEVBQUMsR0FBRyxFQUFDLFFBQVEsRUFBQyxVQUFVOzRCQUNqQyxvQkFBQyxDQUFDLENBQUMsU0FBUyxJQUFDLEtBQUssRUFBRSxLQUFLLEdBQUcsQ0FDdEIsQ0FDSSxDQUFDLENBQ1IsQ0FDSCxDQUFDO0lBQ1gsQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiKHsgZGVlcCwgZGF0YSwgcmVxdWlyZSwgR28gfSkgPT4ge1xuICBjb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG4gIFxuICBjb25zdCBjID0gcmVxdWlyZSgnQGNoYWtyYS11aS9yZWFjdCcpO1xuICBjb25zdCBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XG4gIGNvbnN0IG1vbWVudCA9IHJlcXVpcmUoJ21vbWVudCcpO1xuICBjb25zdCB7IHVzZURlYm91bmNlQ2FsbGJhY2sgfSA9IHJlcXVpcmUoJ0ByZWFjdC1ob29rL2RlYm91bmNlJyk7XG5cbiAgdmFyIGRwbCA9ICdAZGVlcC1mb3VuZGF0aW9uL3BlcmNlcHRpb24tbGlua3MnO1xuICB2YXIgZGMgPSAnQGRlZXAtZm91bmRhdGlvbi9jb3JlJztcblxuICBjb25zdCBTdGFjayA9IGRlZXAuaWRMb2NhbChkcGwsICdTdGFjaycpO1xuICBjb25zdCBRdWVyaWVzID0gZGVlcC5pZExvY2FsKGRwbCwgJ1F1ZXJpZXMnKTtcbiAgY29uc3QgQ29tcGF0YWJsZSA9IGRlZXAuaWRMb2NhbChkcGwsICdDb21wYXRhYmxlJyk7XG4gIGNvbnN0IEhhbmRsZXIgPSBkZWVwLmlkTG9jYWwoZGMsICdIYW5kbGVyJyk7XG4gIGNvbnN0IFF1ZXJpZXNDbGllbnQgPSBkZWVwLmlkTG9jYWwoZHBsLCAnUXVlcmllc0NsaWVudCcpO1xuXG4gIHJldHVybiAoe1xuICAgIGdvLFxuXG4gICAgZXZlbnQsXG5cbiAgICBjaGlsZHJlbixcbiAgfSwgcmVmKSA9PiB7XG4gICAgY29uc3QgeyBkYXRhOiB2aWV3cyB9ID0gZGVlcC51c2VRdWVyeSh7XG4gICAgICB0eXBlX2lkOiBIYW5kbGVyLFxuICAgICAgb3V0OiB7XG4gICAgICAgIHR5cGVfaWQ6IENvbXBhdGFibGUsXG4gICAgICAgIHRvX2lkOiBRdWVyaWVzLFxuICAgICAgfSxcbiAgICB9KTtcbiAgXG4gICAgY29uc3QgVmlld0l0ZW0gPSBSZWFjdC51c2VNZW1vKCgpID0+IFJlYWN0Lm1lbW8oKHsgbGluazogaGFuZGxlciwgaXNBY3RpdmUgfSkgPT4ge1xuICAgICAgcmV0dXJuIDxHby5IYW5kbGVyIGhhbmRsZXJJZD17aGFuZGxlci5pZH0gZXZlbnQ9e2V2ZW50fSBpc0FjdGl2ZT17aXNBY3RpdmV9Lz47XG4gICAgfSksIFtdKTtcblxuICAgIGNvbnN0IFtvLCBzZXRPXSA9IFJlYWN0LnVzZVN0YXRlKCk7XG4gICAgUmVhY3QudXNlRWZmZWN0KCgpID0+IGdvLnNldChTdGFjayksIFtdKTtcblxuICAgIHJldHVybiA8Z28uT25cbiAgICAgIGRvPXt7XG4gICAgICAgIHZpZXc6IChnLHYsbykgPT4gc2V0TyhvKSxcbiAgICAgIH19XG4gICAgPlxuICAgICAgPGMuRmxleCByZWY9e3JlZn0gZGlyZWN0aW9uPSdjb2x1bW4nIGg9JzEwMCUnPlxuICAgICAgICA8Yy5Cb3ggaD0nM2VtJz48Z28uUHJvdmlkZXIgbGlua0lkPXtTdGFja30+XG4gICAgICAgICAgPGdvLkNvbXBvbmVudCBwYXRoPXtbZHBsLCAnU3RhY2snXX0gZGlyZWN0aW9uPSdob3Jpem9udGFsJyBsaW5rcz17dmlld3N9IEl0ZW09e1ZpZXdJdGVtfS8+XG4gICAgICAgIDwvZ28uUHJvdmlkZXI+PC9jLkJveD5cbiAgICAgICAge3R5cGVvZihvPy5Db21wb25lbnQpID09PSAnZnVuY3Rpb24nICYmIFs8Z28uUHJvdmlkZXIga2V5PXtvLmlkfSBsaW5rSWQ9e28uaWR9PlxuICAgICAgICAgIDxjLkJveCBmbGV4PScxJyBwb3NpdGlvbj0ncmVsYXRpdmUnPlxuICAgICAgICAgICAgPG8uQ29tcG9uZW50IGV2ZW50PXtldmVudH0vPlxuICAgICAgICAgIDwvYy5Cb3g+XG4gICAgICAgIDwvZ28uUHJvdmlkZXI+XX1cbiAgICAgIDwvYy5GbGV4PlxuICAgIDwvZ28uT24+O1xuICB9O1xufSJdfQ==",
        "link_id": 22432
      }
    },
    {
      "id": 22433,
      "type_id": 3,
      "from_id": 22426,
      "to_id": 22432,
      "value": {
        "id": 1827,
        "value": "generated",
        "link_id": 22433
      }
    },
    {
      "id": 22434,
      "type_id": 143,
      "from_id": 22432,
      "to_id": 22426
    },
    {
      "id": 22435,
      "type_id": 3,
      "from_id": 22426,
      "to_id": 22434
    },
    {
      "id": 19402,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1737,
        "value": "",
        "link_id": 19402
      }
    },
    {
      "id": 19978,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1753,
        "value": "async ({ deep, data, Go, require }) => {\n  const React = require('react');\n  const { LuChevronLast, LuChevronFirst } = require(\"react-icons/lu\");\n  const { IoInfiniteSharp } = require(\"react-icons/io5\");\n  const { Planet } = require('react-planet');\n  const c = require('@chakra-ui/react');\n\n  const {\n    TypedIcon, DownIcon, UpIcon, TypeIcon, InIcon, OutIcon, FromIcon, ToIcon,\n  } = require('@deep-foundation/perception-app');\n\n  const dpl = '@deep-foundation/perception-links';\n\n  const TreeList = deep.idLocal(dpl, 'TreeList');\n\n  const _Item = ({ link, isActive, Item, index, position }) => {\n    const go = Go.useGo();\n    const Component = link?.Component || Item;\n    return <Component link={link} go={go} isActive={isActive} position={position} index={index}/>;\n  }\n\n  return ({\n    go,\n\n    links: _links,\n\n    Component,\n    ErrorComponent,\n    UnhandledComponent,\n\n    Item,\n\n    saveHistory = false,\n\n    linkId,\n    link,\n    handlerId,\n    goHandler,\n\n    ...props\n  }, ref) => {\n    const links = React.useMemo(() => _links.filter(l => !!l?.id), [_links]);\n    const list = links.map((link, i) => !!link ? <go.Provider key={link.id} linkId={link.id}>\n      <_Item\n        link={link} isActive={go.value === link.id} Item={Item} saveHistory={saveHistory}\n        index={i} position={i / (links.length - 1)}\n      />\n    </go.Provider> : <React.Fragment/>);\n\n    const index = React.useMemo(() => links.findIndex(l => l?.id === go.value), [go.value]);\n    const position = React.useMemo(() => index / (links.length - 1), [index]);\n\n    return <go.On do={{\n      focus: (g,v,id,o) => !id && go.do('use', o),\n      exec: (g,v,o) => !!go.value && go.go.do('exec', { id: go.value, index, position }),\n      up: (g,v,o) => go.set().go.go.do('up', { ...o, id: go.value, index, position }),\n      down: (g,v,o) => go.set().go.go.do('down', { ...o, id: go.value, index, position }),\n      left: (g,v,o) => go.focus(go.prev(links)),\n      right: (g,v,o) => go.focus(go.next(links)),\n      use: (g,v,o) => {\n        let id = o?.id;\n        if (typeof(o?.position) === 'number') {\n          id = links?.[Math.round((links.length - 1) * o.position)]?.id;\n        console.log('XXXX', o, id, links, Math.round((links.length - 1) * o.position));\n        }\n        if (typeof(id) === 'number' || typeof(id) === 'string') id != go.value && go(id) && go.set(id).go(id)?.go?.do('use');\n      },\n    }} focus={{\n    }}>\n      <Planet\n        orbitRadius={70}\n        mass={1}\n        tension={500}\n        friction={19}\n        {...props}\n      >\n        {list}\n      </Planet>\n    </go.On>;\n  };\n}",
        "link_id": 19978
      }
    },
    {
      "id": 19979,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 19978,
      "value": {
        "id": 1752,
        "value": "PlanetComponent",
        "link_id": 19979
      }
    },
    {
      "id": 19982,
      "type_id": 35,
      "from_id": 145,
      "to_id": 19978
    },
    {
      "id": 19983,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 19982,
      "value": {
        "id": 1754,
        "value": "Planet",
        "link_id": 19983
      }
    },
    {
      "id": 19984,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1756,
        "value": "async ({ deep, data, Go, require }) => {\n    const React = require('react');\n    const { LuChevronLast, LuChevronFirst } = require(\"react-icons/lu\");\n    const { IoInfiniteSharp } = require(\"react-icons/io5\");\n    const { Planet } = require('react-planet');\n    const c = require('@chakra-ui/react');\n    const { TypedIcon, DownIcon, UpIcon, TypeIcon, InIcon, OutIcon, FromIcon, ToIcon, } = require('@deep-foundation/perception-app');\n    const dpl = '@deep-foundation/perception-links';\n    const TreeList = deep.idLocal(dpl, 'TreeList');\n    const _Item = ({ link, isActive, Item, index, position }) => {\n        const go = Go.useGo();\n        const Component = link?.Component || Item;\n        return React.createElement(Component, { link: link, go: go, isActive: isActive, position: position, index: index });\n    };\n    return ({ go, links: _links, Component, ErrorComponent, UnhandledComponent, Item, saveHistory = false, linkId, link, handlerId, goHandler, ...props }, ref) => {\n        const links = React.useMemo(() => _links.filter(l => !!l?.id), [_links]);\n        const list = links.map((link, i) => !!link ? React.createElement(go.Provider, { key: link.id, linkId: link.id },\n            React.createElement(_Item, { link: link, isActive: go.value === link.id, Item: Item, saveHistory: saveHistory, index: i, position: i / (links.length - 1) })) : React.createElement(React.Fragment, null));\n        const index = React.useMemo(() => links.findIndex(l => l?.id === go.value), [go.value]);\n        const position = React.useMemo(() => index / (links.length - 1), [index]);\n        return React.createElement(go.On, { do: {\n                focus: (g, v, id, o) => !id && go.do('use', o),\n                exec: (g, v, o) => !!go.value && go.go.do('exec', { id: go.value, index, position }),\n                up: (g, v, o) => go.set().go.go.do('up', { ...o, id: go.value, index, position }),\n                down: (g, v, o) => go.set().go.go.do('down', { ...o, id: go.value, index, position }),\n                left: (g, v, o) => go.focus(go.prev(links)),\n                right: (g, v, o) => go.focus(go.next(links)),\n                use: (g, v, o) => {\n                    let id = o?.id;\n                    if (typeof (o?.position) === 'number') {\n                        id = links?.[Math.round((links.length - 1) * o.position)]?.id;\n                        console.log('XXXX', o, id, links, Math.round((links.length - 1) * o.position));\n                    }\n                    if (typeof (id) === 'number' || typeof (id) === 'string')\n                        id != go.value && go(id) && go.set(id).go(id)?.go?.do('use');\n                },\n            }, focus: {} },\n            React.createElement(Planet, { orbitRadius: 70, mass: 1, tension: 500, friction: 19, ...props }, list));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFO0lBQ3BDLE1BQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUMvQixNQUFNLEVBQUUsYUFBYSxFQUFFLGNBQWMsRUFBRSxHQUFHLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0lBQ3BFLE1BQU0sRUFBRSxlQUFlLEVBQUUsR0FBRyxPQUFPLENBQUMsaUJBQWlCLENBQUMsQ0FBQztJQUN2RCxNQUFNLEVBQUUsTUFBTSxFQUFFLEdBQUcsT0FBTyxDQUFDLGNBQWMsQ0FBQyxDQUFDO0lBQzNDLE1BQU0sQ0FBQyxHQUFHLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBRXRDLE1BQU0sRUFDSixTQUFTLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxHQUN6RSxHQUFHLE9BQU8sQ0FBQyxpQ0FBaUMsQ0FBQyxDQUFDO0lBRS9DLE1BQU0sR0FBRyxHQUFHLG1DQUFtQyxDQUFDO0lBRWhELE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLFVBQVUsQ0FBQyxDQUFDO0lBRS9DLE1BQU0sS0FBSyxHQUFHLENBQUMsRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBRTtRQUMxRCxNQUFNLEVBQUUsR0FBRyxFQUFFLENBQUMsS0FBSyxFQUFFLENBQUM7UUFDdEIsTUFBTSxTQUFTLEdBQUcsSUFBSSxFQUFFLFNBQVMsSUFBSSxJQUFJLENBQUM7UUFDMUMsT0FBTyxvQkFBQyxTQUFTLElBQUMsSUFBSSxFQUFFLElBQUks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QUFFLENBQUMsS0FBSyxRQUFRLElBQUksT0FBTSxDQUFDLEVBQUUsQ0FBQyxLQUFLLFFBQVE7d0JBQUUsRUFBRSxJQUFJLEVBQUUsQ0FBQyxLQUFLLElBQUksRUFBRSxDQUFDLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBQ3ZILENBQUM7YUFDRixFQUFFLEtBQUssRUFBRSxFQUNUO1lBQ0Msb0JBQUMsTUFBTSxJQUNMLFdBQVcsRUFBRSxFQUFFLEVBQ2YsSUFBSSxFQUFFLENBQUMsRUFDUCxPQUFPLEVBQUUsR0FBRyxFQUNaLFFBQVEsRUFBRSxFQUFFLEtBQ1IsS0FBSyxJQUVSLElBQUksQ0FDRSxDQUNILENBQUM7SUFDWCxDQUFDLENBQUM7QUFDSixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJhc3luYyAoeyBkZWVwLCBkYXRhLCBHbywgcmVxdWlyZSB9KSA9PiB7XG4gIGNvbnN0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbiAgY29uc3QgeyBMdUNoZXZyb25MYXN0LCBMdUNoZXZyb25GaXJzdCB9ID0gcmVxdWlyZShcInJlYWN0LWljb25zL2x1XCIpO1xuICBjb25zdCB7IElvSW5maW5pdGVTaGFycCB9ID0gcmVxdWlyZShcInJlYWN0LWljb25zL2lvNVwiKTtcbiAgY29uc3QgeyBQbGFuZXQgfSA9IHJlcXVpcmUoJ3JlYWN0LXBsYW5ldCcpO1xuICBjb25zdCBjID0gcmVxdWlyZSgnQGNoYWtyYS11aS9yZWFjdCcpO1xuXG4gIGNvbnN0IHtcbiAgICBUeXBlZEljb24sIERvd25JY29uLCBVcEljb24sIFR5cGVJY29uLCBJbkljb24sIE91dEljb24sIEZyb21JY29uLCBUb0ljb24sXG4gIH0gPSByZXF1aXJlKCdAZGVlcC1mb3VuZGF0aW9uL3BlcmNlcHRpb24tYXBwJyk7XG5cbiAgY29uc3QgZHBsID0gJ0BkZWVwLWZvdW5kYXRpb24vcGVyY2VwdGlvbi1saW5rcyc7XG5cbiAgY29uc3QgVHJlZUxpc3QgPSBkZWVwLmlkTG9jYWwoZHBsLCAnVHJlZUxpc3QnKTtcblxuICBjb25zdCBfSXRlbSA9ICh7IGxpbmssIGlzQWN0aXZlLCBJdGVtLCBpbmRleCwgcG9zaXRpb24gfSkgPT4ge1xuICAgIGNvbnN0IGdvID0gR28udXNlR28oKTtcbiAgICBjb25zdCBDb21wb25lbnQgPSBsaW5rPy5Db21wb25lbnQgfHwgSXRlbTtcbiAgICByZXR1cm4gPENvbXBvbmVudCBsaW5rPXtsaW5rfSBnbz17Z299IGlzQWN0aXZlPXtpc0FjdGl2ZX0gcG9zaXRpb249e3Bvc2l0aW9ufSBpbmRleD17aW5kZXh9Lz47XG4gIH1cblxuICByZXR1cm4gKHtcbiAgICBnbyxcblxuICAgIGxpbmtzOiBfbGlua3MsXG5cbiAgICBDb21wb25lbnQsXG4gICAgRXJyb3JDb21wb25lbnQsXG4gICAgVW5oYW5kbGVkQ29tcG9uZW50LFxuXG4gICAgSXRlbSxcblxuICAgIHNhdmVIaXN0b3J5ID0gZmFsc2UsXG5cbiAgICBsaW5rSWQsXG4gICAgbGluayxcbiAgICBoYW5kbGVySWQsXG4gICAgZ29IYW5kbGVyLFxuXG4gICAgLi4ucHJvcHNcbiAgfSwgcmVmKSA9PiB7XG4gICAgY29uc3QgbGlua3MgPSBSZWFjdC51c2VNZW1vKCgpID0+IF9saW5rcy5maWx0ZXIobCA9PiAhIWw/LmlkKSwgW19saW5rc10pO1xuICAgIGNvbnN0IGxpc3QgPSBsaW5rcy5tYXAoKGxpbmssIGkpID0+ICEhbGluayA/IDxnby5Qcm92aWRlciBrZXk9e2xpbmsuaWR9IGxpbmtJZD17bGluay5pZH0+XG4gICAgICA8X0l0ZW1cbiAgICAgICAgbGluaz17bGlua30gaXNBY3RpdmU9e2dvLnZhbHVlID09PSBsaW5rLmlkfSBJdGVtPXtJdGVtfSBzYXZlSGlzdG9yeT17c2F2ZUhpc3Rvcnl9XG4gICAgICAgIGluZGV4PXtpfSBwb3NpdGlvbj17aSAvIChsaW5rcy5sZW5ndGggLSAxKX1cbiAgICAgIC8+XG4gICAgPC9nby5Qcm92aWRlcj4gOiA8UmVhY3QuRnJhZ21lbnQvPik7XG5cbiAgICBjb25zdCBpbmRleCA9IFJlYWN0LnVzZU1lbW8oKCkgPT4gbGlua3MuZmluZEluZGV4KGwgPT4gbD8uaWQgPT09IGdvLnZhbHVlKSwgW2dvLnZhbHVlXSk7XG4gICAgY29uc3QgcG9zaXRpb24gPSBSZWFjdC51c2VNZW1vKCgpID0+IGluZGV4IC8gKGxpbmtzLmxlbmd0aCAtIDEpLCBbaW5kZXhdKTtcblxuICAgIHJldHVybiA8Z28uT24gZG89e3tcbiAgICAgIGZvY3VzOiAoZyx2LGlkLG8pID0+ICFpZCAmJiBnby5kbygndXNlJywgbyksXG4gICAgICBleGVjOiAoZyx2LG8pID0+ICEhZ28udmFsdWUgJiYgZ28uZ28uZG8oJ2V4ZWMnLCB7IGlkOiBnby52YWx1ZSwgaW5kZXgsIHBvc2l0aW9uIH0pLFxuICAgICAgdXA6IChnLHYsbykgPT4gZ28uc2V0KCkuZ28uZ28uZG8oJ3VwJywgeyAuLi5vLCBpZDogZ28udmFsdWUsIGluZGV4LCBwb3NpdGlvbiB9KSxcbiAgICAgIGRvd246IChnLHYsbykgPT4gZ28uc2V0KCkuZ28uZ28uZG8oJ2Rvd24nLCB7IC4uLm8sIGlkOiBnby52YWx1ZSwgaW5kZXgsIHBvc2l0aW9uIH0pLFxuICAgICAgbGVmdDogKGcsdixvKSA9PiBnby5mb2N1cyhnby5wcmV2KGxpbmtzKSksXG4gICAgICByaWdodDogKGcsdixvKSA9PiBnby5mb2N1cyhnby5uZXh0KGxpbmtzKSksXG4gICAgICB1c2U6IChnLHYsbykgPT4ge1xuICAgICAgICBsZXQgaWQgPSBvPy5pZDtcbiAgICAgICAgaWYgKHR5cGVvZihvPy5wb3NpdGlvbikgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgaWQgPSBsaW5rcz8uW01hdGgucm91bmQoKGxpbmtzLmxlbmd0aCAtIDEpICogby5wb3NpdGlvbildPy5pZDtcbiAgICAgICAgY29uc29sZS5sb2coJ1hYWFgnLCBvLCBpZCwgbGlua3MsIE1hdGgucm91bmQoKGxpbmtzLmxlbmd0aCAtIDEpICogby5wb3NpdGlvbikpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YoaWQpID09PSAnbnVtYmVyJyB8fCB0eXBlb2YoaWQpID09PSAnc3RyaW5nJykgaWQgIT0gZ28udmFsdWUgJiYgZ28oaWQpICYmIGdvLnNldChpZCkuZ28oaWQpPy5nbz8uZG8oJ3VzZScpO1xuICAgICAgfSxcbiAgICB9fSBmb2N1cz17e1xuICAgIH19PlxuICAgICAgPFBsYW5ldFxuICAgICAgICBvcmJpdFJhZGl1cz17NzB9XG4gICAgICAgIG1hc3M9ezF9XG4gICAgICAgIHRlbnNpb249ezUwMH1cbiAgICAgICAgZnJpY3Rpb249ezE5fVxuICAgICAgICB7Li4ucHJvcHN9XG4gICAgICA+XG4gICAgICAgIHtsaXN0fVxuICAgICAgPC9QbGFuZXQ+XG4gICAgPC9nby5Pbj47XG4gIH07XG59Il19",
        "link_id": 19984
      }
    },
    {
      "id": 19985,
      "type_id": 3,
      "from_id": 19978,
      "to_id": 19984,
      "value": {
        "id": 1755,
        "value": "generated",
        "link_id": 19985
      }
    },
    {
      "id": 19986,
      "type_id": 143,
      "from_id": 19984,
      "to_id": 19978
    },
    {
      "id": 19987,
      "type_id": 3,
      "from_id": 19978,
      "to_id": 19986
    },
    {
      "id": 20114,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1760,
        "value": "async ({ deep, data, Go, require }) => {\n  const React = require('react');\n  const { LuChevronLast, LuChevronFirst } = require(\"react-icons/lu\");\n  const { IoInfiniteSharp } = require(\"react-icons/io5\");\n  const { Planet } = require('react-planet');\n  const c = require('@chakra-ui/react');\n\n  const {\n    TypedIcon, DownIcon, UpIcon, TypeIcon, InIcon, OutIcon, FromIcon, ToIcon,\n  } = require('@deep-foundation/perception-app');\n\n  const dpl = '@deep-foundation/perception-links';\n\n  const TreeList = deep.idLocal(dpl, 'TreeList');\n\n  const Item = ({ isActive, link, position }) => {\n    const go = Go.useGo();\n    return <c.Button variant={isActive ? 'planetActive' : 'planet'}\n      onClick={() => go.go.focus(link.id).go.do(link.id)}\n    >{link.icon}</c.Button>;\n  };\n\n  let i = 1;\n\n  return ({\n    go,\n\n    linkId,\n    deleteDisclosure: _deleteDisclosure,\n    finderDisclosure: _finderDisclosure,\n\n    isActive = false,\n  }, ref) => {\n    const { cy } = go.useGraph();\n\n    const links = [\n      { id: 'ups', icon: <UpIcon/> },\n      { id: 'out', icon: <OutIcon/> },\n      { id: 'from', icon: <FromIcon/> },\n      { id: 'type', icon: <TypeIcon/> },\n      { id: 'typed', icon: <TypedIcon/> },\n      { id: 'to', icon: <ToIcon/> },\n      { id: 'in', icon: <InIcon/> },\n      { id: 'downs', icon: <DownIcon/> },\n    ];\n\n    const focus = {};\n    for (let l in links) {\n      focus[links[l].id] = (g,v,o) => {}\n    }\n\n    const [queries, setQueries] = React.useState({});\n    const qs = React.useMemo(() => Object.keys(queries), [queries]);\n\n    return <go.On do={{\n      exec: () => go.do(go.value),\n      typed: async (g,v,o) => setQueries({ ...queries, [v]: { type_id: linkId } }),\n      out: async (g,v,o) => setQueries({ ...queries, [v]: { from_id: linkId } }),\n      in: async (g,v,o) => setQueries({ ...queries, [v]: { to_id: linkId } }),\n\n      type: async (g,v,o) => setQueries({ ...queries, [v]: { id: deep.get(linkId).type_id } }),\n      from: async (g,v,o) => setQueries({ ...queries, [v]: { id: deep.get(linkId).from_id } }),\n      to: async (g,v,o) => setQueries({ ...queries, [v]: { id: deep.get(linkId).to_id } }),\n\n      ups: async (g,v,o) => setQueries({ ...queries, [v]: { down: { link_id: linkId } } }),\n      downs: async (g,v,o) => setQueries({ ...queries, [v]: { up: { parent_id: linkId } } }),\n    }} focus={focus}>\n      {qs.map(q => <go.Query key={JSON.stringify(queries[q])} query={queries[q]} onChange={({ data }) => go.do('open', { ids: data.map(l => l.id), parentId: linkId })}/>)}\n      <go.Component\n        open={isActive}\n        path={[dpl, 'Planet']} links={links}\n        Item={Item}\n        orbitRadius={70} mass={1}\n      />\n    </go.On>;\n  };\n}",
        "link_id": 20114
      }
    },
    {
      "id": 20115,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 20114,
      "value": {
        "id": 1759,
        "value": "PlanetRelationsComponent",
        "link_id": 20115
      }
    },
    {
      "id": 20118,
      "type_id": 35,
      "from_id": 145,
      "to_id": 20114
    },
    {
      "id": 20119,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 20118,
      "value": {
        "id": 1761,
        "value": "PlanetRelations",
        "link_id": 20119
      }
    },
    {
      "id": 20120,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1763,
        "value": "async ({ deep, data, Go, require }) => {\n    const React = require('react');\n    const { LuChevronLast, LuChevronFirst } = require(\"react-icons/lu\");\n    const { IoInfiniteSharp } = require(\"react-icons/io5\");\n    const { Planet } = require('react-planet');\n    const c = require('@chakra-ui/react');\n    const { TypedIcon, DownIcon, UpIcon, TypeIcon, InIcon, OutIcon, FromIcon, ToIcon, } = require('@deep-foundation/perception-app');\n    const dpl = '@deep-foundation/perception-links';\n    const TreeList = deep.idLocal(dpl, 'TreeList');\n    const Item = ({ isActive, link, position }) => {\n        const go = Go.useGo();\n        return React.createElement(c.Button, { variant: isActive ? 'planetActive' : 'planet', onClick: () => go.go.focus(link.id).go.do(link.id) }, link.icon);\n    };\n    let i = 1;\n    return ({ go, linkId, deleteDisclosure: _deleteDisclosure, finderDisclosure: _finderDisclosure, isActive = false, }, ref) => {\n        const { cy } = go.useGraph();\n        const links = [\n            { id: 'ups', icon: React.createElement(UpIcon, null) },\n            { id: 'out', icon: React.createElement(OutIcon, null) },\n            { id: 'from', icon: React.createElement(FromIcon, null) },\n            { id: 'type', icon: React.createElement(TypeIcon, null) },\n            { id: 'typed', icon: React.createElement(TypedIcon, null) },\n            { id: 'to', icon: React.createElement(ToIcon, null) },\n            { id: 'in', icon: React.createElement(InIcon, null) },\n            { id: 'downs', icon: React.createElement(DownIcon, null) },\n        ];\n        const focus = {};\n        for (let l in links) {\n            focus[links[l].id] = (g, v, o) => { };\n        }\n        const [queries, setQueries] = React.useState({});\n        const qs = React.useMemo(() => Object.keys(queries), [queries]);\n        return React.createElement(go.On, { do: {\n                exec: () => go.do(go.value),\n                typed: async (g, v, o) => setQueries({ ...queries, [v]: { type_id: linkId } }),\n                out: async (g, v, o) => setQueries({ ...queries, [v]: { from_id: linkId } }),\n                in: async (g, v, o) => setQueries({ ...queries, [v]: { to_id: linkId } }),\n                type: async (g, v, o) => setQueries({ ...queries, [v]: { id: deep.get(linkId).type_id } }),\n                from: async (g, v, o) => setQueries({ ...queries, [v]: { id: deep.get(linkId).from_id } }),\n                to: async (g, v, o) => setQueries({ ...queries, [v]: { id: deep.get(linkId).to_id } }),\n                ups: async (g, v, o) => setQueries({ ...queries, [v]: { down: { link_id: linkId } } }),\n                downs: async (g, v, o) => setQueries({ ...queries, [v]: { up: { parent_id: linkId } } }),\n            }, focus: focus },\n            qs.map(q => React.createElement(go.Query, { key: JSON.stringify(queries[q]), query: queries[q], onChange: ({ data }) => go.do('open', { ids: data.map(l => l.id), parentId: linkId }) })),\n            React.createElement(go.Component, { open: isActive, path: [dpl, 'Planet'], links: links, Item: Item, orbitRadius: 70, mass: 1 }));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFO0lBQ3BDLE1BQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUMvQixNQUFNLEVBQUUsYUFBYSxFQUFFLGNBQWMsRUFBRSxHQUFHLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0lBQ3BFLE1BQU0sRUFBRSxlQUFlLEVBQUUsR0FBRyxPQUFPLENBQUMsaUJBQWlCLENBQUMsQ0FBQztJQUN2RCxNQUFNLEVBQUUsTUFBTSxFQUFFLEdBQUcsT0FBTyxDQUFDLGNBQWMsQ0FBQyxDQUFDO0lBQzNDLE1BQU0sQ0FBQyxHQUFHLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBRXRDLE1BQU0sRUFDSixTQUFTLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxHQUN6RSxHQUFHLE9BQU8sQ0FBQyxpQ0FBaUMsQ0FBQyxDQUFDO0lBRS9DLE1BQU0sR0FBRyxHQUFHLG1DQUFtQyxDQUFDO0lBRWhELE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLFVBQVUsQ0FBQyxDQUFDO0lBRS9DLE1BQU0sSUFBSSxHQUFHLENBQUMsRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxFQUFFLEVBQUU7UUFDNUMsTUFBTSxFQUFFLEdBQUcsRUFBRSxDQUFDLEtBQUssRUFBRSxDQUFDO1FBQ3RCLE9BQU8sb0JBQUMsQ0FBQyxDQUFDLE1BQU0sSUFBQyxPQUFPLEVBQUUsUUFBUSxDQUFDLENBQUMsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLFFBQVEsRUFDNUQsT0FBTyxFQUFFLEdBQUcs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QUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBRSxFQUFFLEVBQUUsQ0FBQzthQUN2RixFQUFFLEtBQUssRUFBRSxLQUFLO1lBQ1osRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLG9CQUFDLEVBQUUsQ0FBQyxLQUFLLElBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxRQUFRLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxFQUFFLEdBQUcsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsQ0FBQyxHQUFHLENBQUM7WUFDcEssb0JBQUMsRUFBRSxDQUFDLFNBQVMsSUFDWCxJQUFJLEVBQUUsUUFBUSxFQUNkLElBQUksRUFBRSxDQUFDLEdBQUcsRUFBRSxRQUFRLENBQUMsRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUNuQyxJQUFJLEVBQUUsSUFBSSxFQUNWLFdBQVcsRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLENBQUMsR0FDeEIsQ0FDSSxDQUFDO0lBQ1gsQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiYXN5bmMgKHsgZGVlcCwgZGF0YSwgR28sIHJlcXVpcmUgfSkgPT4ge1xuICBjb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG4gIGNvbnN0IHsgTHVDaGV2cm9uTGFzdCwgTHVDaGV2cm9uRmlyc3QgfSA9IHJlcXVpcmUoXCJyZWFjdC1pY29ucy9sdVwiKTtcbiAgY29uc3QgeyBJb0luZmluaXRlU2hhcnAgfSA9IHJlcXVpcmUoXCJyZWFjdC1pY29ucy9pbzVcIik7XG4gIGNvbnN0IHsgUGxhbmV0IH0gPSByZXF1aXJlKCdyZWFjdC1wbGFuZXQnKTtcbiAgY29uc3QgYyA9IHJlcXVpcmUoJ0BjaGFrcmEtdWkvcmVhY3QnKTtcblxuICBjb25zdCB7XG4gICAgVHlwZWRJY29uLCBEb3duSWNvbiwgVXBJY29uLCBUeXBlSWNvbiwgSW5JY29uLCBPdXRJY29uLCBGcm9tSWNvbiwgVG9JY29uLFxuICB9ID0gcmVxdWlyZSgnQGRlZXAtZm91bmRhdGlvbi9wZXJjZXB0aW9uLWFwcCcpO1xuXG4gIGNvbnN0IGRwbCA9ICdAZGVlcC1mb3VuZGF0aW9uL3BlcmNlcHRpb24tbGlua3MnO1xuXG4gIGNvbnN0IFRyZWVMaXN0ID0gZGVlcC5pZExvY2FsKGRwbCwgJ1RyZWVMaXN0Jyk7XG5cbiAgY29uc3QgSXRlbSA9ICh7IGlzQWN0aXZlLCBsaW5rLCBwb3NpdGlvbiB9KSA9PiB7XG4gICAgY29uc3QgZ28gPSBHby51c2VHbygpO1xuICAgIHJldHVybiA8Yy5CdXR0b24gdmFyaWFudD17aXNBY3RpdmUgPyAncGxhbmV0QWN0aXZlJyA6ICdwbGFuZXQnfVxuICAgICAgb25DbGljaz17KCkgPT4gZ28uZ28uZm9jdXMobGluay5pZCkuZ28uZG8obGluay5pZCl9XG4gICAgPntsaW5rLmljb259PC9jLkJ1dHRvbj47XG4gIH07XG5cbiAgbGV0IGkgPSAxO1xuXG4gIHJldHVybiAoe1xuICAgIGdvLFxuXG4gICAgbGlua0lkLFxuICAgIGRlbGV0ZURpc2Nsb3N1cmU6IF9kZWxldGVEaXNjbG9zdXJlLFxuICAgIGZpbmRlckRpc2Nsb3N1cmU6IF9maW5kZXJEaXNjbG9zdXJlLFxuXG4gICAgaXNBY3RpdmUgPSBmYWxzZSxcbiAgfSwgcmVmKSA9PiB7XG4gICAgY29uc3QgeyBjeSB9ID0gZ28udXNlR3JhcGgoKTtcblxuICAgIGNvbnN0IGxpbmtzID0gW1xuICAgICAgeyBpZDogJ3VwcycsIGljb246IDxVcEljb24vPiB9LFxuICAgICAgeyBpZDogJ291dCcsIGljb246IDxPdXRJY29uLz4gfSxcbiAgICAgIHsgaWQ6ICdmcm9tJywgaWNvbjogPEZyb21JY29uLz4gfSxcbiAgICAgIHsgaWQ6ICd0eXBlJywgaWNvbjogPFR5cGVJY29uLz4gfSxcbiAgICAgIHsgaWQ6ICd0eXBlZCcsIGljb246IDxUeXBlZEljb24vPiB9LFxuICAgICAgeyBpZDogJ3RvJywgaWNvbjogPFRvSWNvbi8+IH0sXG4gICAgICB7IGlkOiAnaW4nLCBpY29uOiA8SW5JY29uLz4gfSxcbiAgICAgIHsgaWQ6ICdkb3ducycsIGljb246IDxEb3duSWNvbi8+IH0sXG4gICAgXTtcblxuICAgIGNvbnN0IGZvY3VzID0ge307XG4gICAgZm9yIChsZXQgbCBpbiBsaW5rcykge1xuICAgICAgZm9jdXNbbGlua3NbbF0uaWRdID0gKGcsdixvKSA9PiB7fVxuICAgIH1cblxuICAgIGNvbnN0IFtxdWVyaWVzLCBzZXRRdWVyaWVzXSA9IFJlYWN0LnVzZVN0YXRlKHt9KTtcbiAgICBjb25zdCBxcyA9IFJlYWN0LnVzZU1lbW8oKCkgPT4gT2JqZWN0LmtleXMocXVlcmllcyksIFtxdWVyaWVzXSk7XG5cbiAgICByZXR1cm4gPGdvLk9uIGRvPXt7XG4gICAgICBleGVjOiAoKSA9PiBnby5kbyhnby52YWx1ZSksXG4gICAgICB0eXBlZDogYXN5bmMgKGcsdixvKSA9PiBzZXRRdWVyaWVzKHsgLi4ucXVlcmllcywgW3ZdOiB7IHR5cGVfaWQ6IGxpbmtJZCB9IH0pLFxuICAgICAgb3V0OiBhc3luYyAoZyx2LG8pID0+IHNldFF1ZXJpZXMoeyAuLi5xdWVyaWVzLCBbdl06IHsgZnJvbV9pZDogbGlua0lkIH0gfSksXG4gICAgICBpbjogYXN5bmMgKGcsdixvKSA9PiBzZXRRdWVyaWVzKHsgLi4ucXVlcmllcywgW3ZdOiB7IHRvX2lkOiBsaW5rSWQgfSB9KSxcblxuICAgICAgdHlwZTogYXN5bmMgKGcsdixvKSA9PiBzZXRRdWVyaWVzKHsgLi4ucXVlcmllcywgW3ZdOiB7IGlkOiBkZWVwLmdldChsaW5rSWQpLnR5cGVfaWQgfSB9KSxcbiAgICAgIGZyb206IGFzeW5jIChnLHYsbykgPT4gc2V0UXVlcmllcyh7IC4uLnF1ZXJpZXMsIFt2XTogeyBpZDogZGVlcC5nZXQobGlua0lkKS5mcm9tX2lkIH0gfSksXG4gICAgICB0bzogYXN5bmMgKGcsdixvKSA9PiBzZXRRdWVyaWVzKHsgLi4ucXVlcmllcywgW3ZdOiB7IGlkOiBkZWVwLmdldChsaW5rSWQpLnRvX2lkIH0gfSksXG5cbiAgICAgIHVwczogYXN5bmMgKGcsdixvKSA9PiBzZXRRdWVyaWVzKHsgLi4ucXVlcmllcywgW3ZdOiB7IGRvd246IHsgbGlua19pZDogbGlua0lkIH0gfSB9KSxcbiAgICAgIGRvd25zOiBhc3luYyAoZyx2LG8pID0+IHNldFF1ZXJpZXMoeyAuLi5xdWVyaWVzLCBbdl06IHsgdXA6IHsgcGFyZW50X2lkOiBsaW5rSWQgfSB9IH0pLFxuICAgIH19IGZvY3VzPXtmb2N1c30+XG4gICAgICB7cXMubWFwKHEgPT4gPGdvLlF1ZXJ5IGtleT17SlNPTi5zdHJpbmdpZnkocXVlcmllc1txXSl9IHF1ZXJ5PXtxdWVyaWVzW3FdfSBvbkNoYW5nZT17KHsgZGF0YSB9KSA9PiBnby5kbygnb3BlbicsIHsgaWRzOiBkYXRhLm1hcChsID0+IGwuaWQpLCBwYXJlbnRJZDogbGlua0lkIH0pfS8+KX1cbiAgICAgIDxnby5Db21wb25lbnRcbiAgICAgICAgb3Blbj17aXNBY3RpdmV9XG4gICAgICAgIHBhdGg9e1tkcGwsICdQbGFuZXQnXX0gbGlua3M9e2xpbmtzfVxuICAgICAgICBJdGVtPXtJdGVtfVxuICAgICAgICBvcmJpdFJhZGl1cz17NzB9IG1hc3M9ezF9XG4gICAgICAvPlxuICAgIDwvZ28uT24+O1xuICB9O1xufSJdfQ==",
        "link_id": 20120
      }
    },
    {
      "id": 20121,
      "type_id": 3,
      "from_id": 20114,
      "to_id": 20120,
      "value": {
        "id": 1762,
        "value": "generated",
        "link_id": 20121
      }
    },
    {
      "id": 20122,
      "type_id": 143,
      "from_id": 20120,
      "to_id": 20114
    },
    {
      "id": 20123,
      "type_id": 3,
      "from_id": 20114,
      "to_id": 20122
    },
    {
      "id": 20144,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1767,
        "value": "async ({ deep, data, Go, require }) => {\n  const React = require('react');\n  const { LuChevronLast, LuChevronFirst } = require(\"react-icons/lu\");\n  const { IoInfiniteSharp } = require(\"react-icons/io5\");\n  const { Planet } = require('react-planet');\n  const c = require('@chakra-ui/react');\n\n  const {\n    TypedIcon, DownIcon, UpIcon, TypeIcon, InIcon, OutIcon, FromIcon, ToIcon,\n  } = require('@deep-foundation/perception-app');\n\n  const dpl = '@deep-foundation/perception-links';\n\n  const TreeList = deep.idLocal(dpl, 'TreeList');\n\n  const Item = ({ isActive, link, position }) => {\n    const go = Go.useGo();\n    return <c.Button variant={isActive ? 'planetActive' : 'planet'}\n      onClick={() => go.go.focus(link.id).go.do(link.id)}\n    >{link.icon}</c.Button>;\n  };\n\n  return ({\n    go,\n\n    linkId,\n    deleteDisclosure: _deleteDisclosure,\n    finderDisclosure: _finderDisclosure,\n\n    isActive = false,\n  }, ref) => {\n    const { cy } = go.useGraph();\n\n    const links = [\n      { id: 'contains', icon: <>🗂️</> },\n      { id: 'finder', icon: <>🪬</> },\n      { id: 'delete', icon: <>❌</> },\n      { id: 'handlers', icon: <>👁️</> },\n      { id: 'trees', icon: <>🎄</> },\n    ];\n\n    const focus = {};\n    for (let l in links) {\n      focus[links[l].id] = (g,v,o) => {}\n    }\n\n    return <go.On do={{\n    }} focus={focus}>\n      <go.Component\n        open={isActive}\n        path={[dpl, 'Planet']} links={links}\n        Item={Item}\n        orbitRadius={130} mass={3}\n      />\n    </go.On>;\n  };\n}",
        "link_id": 20144
      }
    },
    {
      "id": 20146,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 20144,
      "value": {
        "id": 1766,
        "value": "PlanetOperationsComponent",
        "link_id": 20146
      }
    },
    {
      "id": 20152,
      "type_id": 35,
      "from_id": 145,
      "to_id": 20144
    },
    {
      "id": 20153,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 20152,
      "value": {
        "id": 1769,
        "value": "PlanetOperations",
        "link_id": 20153
      }
    },
    {
      "id": 20154,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1771,
        "value": "async ({ deep, data, Go, require }) => {\n    const React = require('react');\n    const { LuChevronLast, LuChevronFirst } = require(\"react-icons/lu\");\n    const { IoInfiniteSharp } = require(\"react-icons/io5\");\n    const { Planet } = require('react-planet');\n    const c = require('@chakra-ui/react');\n    const { TypedIcon, DownIcon, UpIcon, TypeIcon, InIcon, OutIcon, FromIcon, ToIcon, } = require('@deep-foundation/perception-app');\n    const dpl = '@deep-foundation/perception-links';\n    const TreeList = deep.idLocal(dpl, 'TreeList');\n    const Item = ({ isActive, link, position }) => {\n        const go = Go.useGo();\n        return React.createElement(c.Button, { variant: isActive ? 'planetActive' : 'planet', onClick: () => go.go.focus(link.id).go.do(link.id) }, link.icon);\n    };\n    return ({ go, linkId, deleteDisclosure: _deleteDisclosure, finderDisclosure: _finderDisclosure, isActive = false, }, ref) => {\n        const { cy } = go.useGraph();\n        const links = [\n            { id: 'contains', icon: React.createElement(React.Fragment, null, \"\\uD83D\\uDDC2\\uFE0F\") },\n            { id: 'finder', icon: React.createElement(React.Fragment, null, \"\\uD83E\\uDEAC\") },\n            { id: 'delete', icon: React.createElement(React.Fragment, null, \"\\u274C\") },\n            { id: 'handlers', icon: React.createElement(React.Fragment, null, \"\\uD83D\\uDC41\\uFE0F\") },\n            { id: 'trees', icon: React.createElement(React.Fragment, null, \"\\uD83C\\uDF84\") },\n        ];\n        const focus = {};\n        for (let l in links) {\n            focus[links[l].id] = (g, v, o) => { };\n        }\n        return React.createElement(go.On, { do: {}, focus: focus },\n            React.createElement(go.Component, { open: isActive, path: [dpl, 'Planet'], links: links, Item: Item, orbitRadius: 130, mass: 3 }));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFO0lBQ3BDLE1BQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUMvQixNQUFNLEVBQUUsYUFBYSxFQUFFLGNBQWMsRUFBRSxHQUFHLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0lBQ3BFLE1BQU0sRUFBRSxlQUFlLEVBQUUsR0FBRyxPQUFPLENBQUMsaUJBQWlCLENBQUMsQ0FBQztJQUN2RCxNQUFNLEVBQUUsTUFBTSxFQUFFLEdBQUcsT0FBTyxDQUFDLGNBQWMsQ0FBQyxDQUFDO0lBQzNDLE1BQU0sQ0FBQyxHQUFHLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBRXRDLE1BQU0sRUFDSixTQUFTLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxHQUN6RSxHQUFHLE9BQU8sQ0FBQyxpQ0FBaUMsQ0FBQyxDQUFDO0lBRS9DLE1BQU0sR0FBRyxHQUFHLG1DQUFtQyxDQUFDO0lBRWhELE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLFVBQVUsQ0FBQyxDQUFDO0lBRS9DLE1BQU0sSUFBSSxHQUFHLENBQUMsRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxFQUFFLEVBQUU7UUFDNUMsTUFBTSxFQUFFLEdBQUcsRUFBRSxDQUFDLEtBQUssRUFBRSxDQUFDO1FBQ3RCLE9BQU8sb0JBQUMsQ0FBQyxDQUFDLE1BQU0sSUFBQyxPQUFPLEVBQUUsUUFBUSxDQUFDLENBQUMsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLFFBQVEsRUFDNUQsT0FBTyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsSUFDbEQsSUFBSSxDQUFDLElBQUksQ0FBWSxDQUFDO0lBQzFCLENBQUMsQ0FBQztJQUVGLE9BQU8sQ0FBQyxFQUNOLEVBQUUsRUFFRixNQUFNLEVBQ04sZ0JBQWdCLEVBQUUsaUJBQWlCLEVBQ25DLGdCQUFnQixFQUFFLGlCQUFpQixFQUVuQyxRQUFRLEdBQUcsS0FBSyxHQUNqQixFQUFFLEdBQUcsRUFBRSxFQUFFO1FBQ1IsTUFBTSxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsQ0FBQyxRQUFRLEVBQUUsQ0FBQztRQUU3QixNQUFNLEtBQUssR0FBRztZQUNaLEVBQUUsRUFBRSxFQUFFLFVBQVUsRUFBRSxJQUFJLEVBQUUsK0RBQVEsRUFBRTtZQUNsQyxFQUFFLEVBQUUsRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLHlEQUFPLEVBQUU7WUFDL0IsRUFBRSxFQUFFLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxtREFBTSxFQUFFO1lBQzlCLEVBQUUsRUFBRSxFQUFFLFVBQVUsRUFBRSxJQUFJLEVBQUUsK0RBQVEsRUFBRTtZQUNsQyxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLHlEQUFPLEVBQUU7U0FDL0IsQ0FBQztRQUVGLE1BQU0sS0FBSyxHQUFHLEVBQUUsQ0FBQztRQUNqQixLQUFLLElBQUksQ0FBQyxJQUFJLEtBQUssRUFBRSxDQUFDO1lBQ3BCLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBRSxFQUFFLEdBQUUsQ0FBQyxDQUFBO1FBQ3BDLENBQUM7UUFFRCxPQUFPLG9CQUFDLEVBQUUsQ0FBQyxFQUFFLElBQUMsRUFBRSxFQUFFLEVBQ2pCLEVBQUUsS0FBSyxFQUFFLEtBQUs7WUFDYixvQkFBQyxFQUFFLENBQUMsU0FBUyxJQUNYLElBQUksRUFBRSxRQUFRLEVBQ2QsSUFBSSxFQUFFLENBQUMsR0FBRyxFQUFFLFFBQVEsQ0FBQyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQ25DLElBQUksRUFBRSxJQUFJLEVBQ1YsV0FBVyxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUUsQ0FBQyxHQUN6QixDQUNJLENBQUM7SUFDWCxDQUFDLENBQUM7QUFDSixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJhc3luYyAoeyBkZWVwLCBkYXRhLCBHbywgcmVxdWlyZSB9KSA9PiB7XG4gIGNvbnN0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbiAgY29uc3QgeyBMdUNoZXZyb25MYXN0LCBMdUNoZXZyb25GaXJzdCB9ID0gcmVxdWlyZShcInJlYWN0LWljb25zL2x1XCIpO1xuICBjb25zdCB7IElvSW5maW5pdGVTaGFycCB9ID0gcmVxdWlyZShcInJlYWN0LWljb25zL2lvNVwiKTtcbiAgY29uc3QgeyBQbGFuZXQgfSA9IHJlcXVpcmUoJ3JlYWN0LXBsYW5ldCcpO1xuICBjb25zdCBjID0gcmVxdWlyZSgnQGNoYWtyYS11aS9yZWFjdCcpO1xuXG4gIGNvbnN0IHtcbiAgICBUeXBlZEljb24sIERvd25JY29uLCBVcEljb24sIFR5cGVJY29uLCBJbkljb24sIE91dEljb24sIEZyb21JY29uLCBUb0ljb24sXG4gIH0gPSByZXF1aXJlKCdAZGVlcC1mb3VuZGF0aW9uL3BlcmNlcHRpb24tYXBwJyk7XG5cbiAgY29uc3QgZHBsID0gJ0BkZWVwLWZvdW5kYXRpb24vcGVyY2VwdGlvbi1saW5rcyc7XG5cbiAgY29uc3QgVHJlZUxpc3QgPSBkZWVwLmlkTG9jYWwoZHBsLCAnVHJlZUxpc3QnKTtcblxuICBjb25zdCBJdGVtID0gKHsgaXNBY3RpdmUsIGxpbmssIHBvc2l0aW9uIH0pID0+IHtcbiAgICBjb25zdCBnbyA9IEdvLnVzZUdvKCk7XG4gICAgcmV0dXJuIDxjLkJ1dHRvbiB2YXJpYW50PXtpc0FjdGl2ZSA/ICdwbGFuZXRBY3RpdmUnIDogJ3BsYW5ldCd9XG4gICAgICBvbkNsaWNrPXsoKSA9PiBnby5nby5mb2N1cyhsaW5rLmlkKS5nby5kbyhsaW5rLmlkKX1cbiAgICA+e2xpbmsuaWNvbn08L2MuQnV0dG9uPjtcbiAgfTtcblxuICByZXR1cm4gKHtcbiAgICBnbyxcblxuICAgIGxpbmtJZCxcbiAgICBkZWxldGVEaXNjbG9zdXJlOiBfZGVsZXRlRGlzY2xvc3VyZSxcbiAgICBmaW5kZXJEaXNjbG9zdXJlOiBfZmluZGVyRGlzY2xvc3VyZSxcblxuICAgIGlzQWN0aXZlID0gZmFsc2UsXG4gIH0sIHJlZikgPT4ge1xuICAgIGNvbnN0IHsgY3kgfSA9IGdvLnVzZUdyYXBoKCk7XG5cbiAgICBjb25zdCBsaW5rcyA9IFtcbiAgICAgIHsgaWQ6ICdjb250YWlucycsIGljb246IDw+8J+Xgu+4jzwvPiB9LFxuICAgICAgeyBpZDogJ2ZpbmRlcicsIGljb246IDw+8J+qrDwvPiB9LFxuICAgICAgeyBpZDogJ2RlbGV0ZScsIGljb246IDw+4p2MPC8+IH0sXG4gICAgICB7IGlkOiAnaGFuZGxlcnMnLCBpY29uOiA8PvCfkYHvuI88Lz4gfSxcbiAgICAgIHsgaWQ6ICd0cmVlcycsIGljb246IDw+8J+OhDwvPiB9LFxuICAgIF07XG5cbiAgICBjb25zdCBmb2N1cyA9IHt9O1xuICAgIGZvciAobGV0IGwgaW4gbGlua3MpIHtcbiAgICAgIGZvY3VzW2xpbmtzW2xdLmlkXSA9IChnLHYsbykgPT4ge31cbiAgICB9XG5cbiAgICByZXR1cm4gPGdvLk9uIGRvPXt7XG4gICAgfX0gZm9jdXM9e2ZvY3VzfT5cbiAgICAgIDxnby5Db21wb25lbnRcbiAgICAgICAgb3Blbj17aXNBY3RpdmV9XG4gICAgICAgIHBhdGg9e1tkcGwsICdQbGFuZXQnXX0gbGlua3M9e2xpbmtzfVxuICAgICAgICBJdGVtPXtJdGVtfVxuICAgICAgICBvcmJpdFJhZGl1cz17MTMwfSBtYXNzPXszfVxuICAgICAgLz5cbiAgICA8L2dvLk9uPjtcbiAgfTtcbn0iXX0=",
        "link_id": 20154
      }
    },
    {
      "id": 20156,
      "type_id": 3,
      "from_id": 20144,
      "to_id": 20154,
      "value": {
        "id": 1770,
        "value": "generated",
        "link_id": 20156
      }
    },
    {
      "id": 20157,
      "type_id": 143,
      "from_id": 20154,
      "to_id": 20144
    },
    {
      "id": 20158,
      "type_id": 3,
      "from_id": 20144,
      "to_id": 20157
    },
    {
      "id": 20474,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1783,
        "value": "({ deep, data, require, Go }) => {\n  const React = require('react');\n  \n  const c = require('@chakra-ui/react');\n  const _ = require('lodash');\n  const moment = require('moment');\n  const { useDebounceCallback } = require('@react-hook/debounce');\n\n  var dpl = '@deep-foundation/perception-links';\n  var dc = '@deep-foundation/core';\n\n  const Stack = deep.idLocal(dpl, 'Stack');\n  const Queries = deep.idLocal(dpl, 'Queries');\n  const Compatable = deep.idLocal(dpl, 'Compatable');\n  const Handler = deep.idLocal(dc, 'Handler');\n  const Query = deep.idLocal(dpl, 'Query');\n  const QueriesClient = deep.idLocal(dpl, 'QueriesClient');\n\n  let initialMemoryObject = {\n    useQuery: {}, useSubscription: {}, select: {}, subscribe: {}, insert: {}, update: {}, 'delete': {},\n  };\n  if (typeof(window) === 'object') {\n    if (window._deep_perception_queries_memory) initialMemoryObject = window._deep_perception_queries_memory;\n    window._deep_perception_queries_memory = initialMemoryObject;\n  }\n\n  return ({\n    go,\n\n    isActive = false,\n\n    children,\n  }, ref) => {\n    const containerRef = React.useMemo(() => go.root().ref, []);\n\n    const { sync, setSync } = React.useContext(go.HandlerConfigContext);\n    const mode = React.useState('useQuery');\n    const modeRef = React.useRef(mode); modeRef.current = mode[0];\n\n    const modes = Object.keys(initialMemoryObject);\n\n    const [list, setList] = React.useState([]);\n    const generateList = React.useCallback(() => {\n      if (!modeRef.current) return;\n      const list = _.chain(Object.values(initialMemoryObject[modeRef.current] || {})).sortBy('mounted').reverse().value();\n      setList(list);\n    }, []);\n    const generateListDebounced = useDebounceCallback(generateList, 1000);\n\n    const apply = React.useCallback((mode, event) => {\n      const prev = initialMemoryObject[mode][event.name] || {};\n      const next = initialMemoryObject[mode][event.name] = { id: event.name, mode, ...prev, ...event, count: (prev?.count || 0) + 1 };\n      next[next.mounted ? 'updated' : 'mounted'] = new Date().valueOf();\n      if (mode === modeRef.current) generateListDebounced();\n    }, []);\n\n    const unapply = React.useCallback((mode, event) => {\n      delete initialMemoryObject[mode][event.name];\n      if (mode === modeRef.current) generateListDebounced();\n    }, []);\n\n    const events = React.useMemo(() => ({\n      'useQuery.mount': (event) => apply('useQuery', event),\n      'useQuery': (event) => apply('useQuery', event),\n      'useQuery.unmount': (event) => unapply('useQuery', event),\n      'useSubscription.mount': (event) => apply('useSubscription', event),\n      'useSubscription': (event) => apply('useSubscription', event),\n      'useSubscription.unmount': (event) => unapply('useSubscription', event),\n      'select': (event) => apply('select', event),\n      'subscribe.before': (event) => apply('subscribe', event),\n      'subscribe': (event) => apply('subscribe', event),\n      'insert': (event) => apply('insert', event),\n      'update': (event) => apply('update', event),\n      'delete': (event) => apply('delete', event),\n    }), []);\n\n    React.useEffect(() => {\n      const sub = (name) => events?.[name] && deep.emitter.on(name, events?.[name]);\n      Object.keys(events).forEach(name => sub(name));\n    }, []);\n\n    const [opened, setOpened] = React.useState();\n\n    const Item = React.useMemo(() => React.memo(({ link, isActive }) => {\n      const go = Go.useGo();\n\n      const q = JSON.stringify(link?.query);\n\n      return <go.On do={{\n        exec: (g,v,o) => setOpened(link),\n      }}>\n        <c.Button bg={isActive ? 'deepBgDark' : undefined} onClick={() => go.do('exec')} w='100%'>\n          <c.Flex w='100%'>\n            <c.Box flex='1' p='0.5em' pl='1em'>\n              <c.Box noOfLines={1} textAlign='left'>\n                {q.slice(0, 43)}{q.length > 43 ? '...' : ''}\n              </c.Box>\n              {!!link?.value && <c.Box noOfLines={1}>\n                {JSON.stringify(link?.value)}\n              </c.Box>}\n            </c.Box>\n            <c.Box p='0.25em' pr='1em' fontSize='xs'>\n              <c.Box>{moment(link.mounted).format('HH:mm:ss')}</c.Box>\n              {!!link.updated && <c.Box>{moment(link.updated).format('HH:mm:ss')}</c.Box>}\n            </c.Box>\n          </c.Flex>\n        </go.Button>\n      </go.On>\n    }, _.isEqual), []);\n\n    React.useMemo(() => {\n      setOpened();\n      generateList();\n    }, [mode[0]]);\n\n    React.useMemo(() => {\n      if (!go.value) mode[1]();\n      else if (!mode) mode[1]('useQuery');\n    }, [go.value]);\n\n    React.useMemo(() => {\n      opened && go.focus(Query);\n    }, [opened]);\n\n    return <go.On\n      do={{\n        focus: (g,v,id,o) => {\n          if (!v) go.set('useQuery');\n          else if (modes.includes(v)) setMode(v);\n        },\n        right: (g,v,o) => {\n          mode[1](go.next(modes.map(m => ({ id: m })), mode[0]));\n        },\n        left: (g,v,o) => {\n          modes[0] === mode[0]  ? go.set() : mode[1](go.prev(modes.map(m => ({ id: m })), mode[0]));\n        },\n      }}\n    >\n      <c.Popover placement='right-end' closeOnBlur={false} isOpen={!!go.value} onClose={() => go.set()}>\n        <c.PopoverTrigger>\n          <c.Button\n            ref={ref} w='3em' h='3em' variant={!!go.value || isActive ? 'active' : undefined}\n            onClick={() => go.value ? go.set() : go.set('useQuery')}\n          >\n            {children}\n          </c.Button>\n        </c.PopoverTrigger>\n        <c.Portal containerRef={containerRef}>\n          <c.PopoverContent w='30em' maxH='30em' minH='30em' position='relative'>\n            <c.PopoverArrow />\n            <c.Flex direction='column' position='absolute' top='0' left='0' w='100%' h='100%'>\n              <c.Flex overflowX='scroll' css={go.noScrollBar}>\n                <c.Flex columns={modes.length} flex='1'>\n                  {modes.map(m => <c.Button {...go.activator(mode, m)}>{m}</c.Button>)}\n                </c.Flex>\n                <c.Divider orientation='vertical' />\n                <c.Button {...go.activator([sync, setSync], true)}>sync</c.Button>\n              </c.Flex>\n              <c.Divider/>\n              <go.Provider linkId={Stack} value={list?.[0]?.id}>\n                {!opened && <go.Component key={mode[0]} path={[dpl, 'Stack']} direction='vertical' links={list} Item={Item} flex='1'/>}\n              </go.Provider>\n              {!!opened && <>\n                <go.Provider linkId={Query} value={list?.[0]?.id}>\n                  <go.Component path={[dpl, 'Query']} event={opened}/>\n                </go.Provider>\n                {/* <go.Component path={[dpl, 'Stack']} direction='horizontal' links={views} Item={ViewItem}/> */}\n                {/* <go.Component path={[dpl, 'QueriesGQL']} extendInsert={{ out: { type_id: Compatable, to_id: Queries } }}/>\n                <go.Component path={[dpl, 'QueriesReact']} extendInsert={{ out: { type_id: Compatable, to_id: Queries } }}/>\n                <go.Component path={[dpl, 'QueriesClient']} extendInsert={{ out: { type_id: Compatable, to_id: Queries } }}/>\n                <go.Component path={[dpl, 'QueriesResults']} extendInsert={{ out: { type_id: Compatable, to_id: Queries } }}/> */}\n              </>}\n            </c.Flex>\n          </c.PopoverContent>\n        </c.Portal>\n      </c.Popover>\n    </go.On>;\n  };\n}",
        "link_id": 20474
      }
    },
    {
      "id": 20475,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 20474,
      "value": {
        "id": 1782,
        "value": "QueriesComponent",
        "link_id": 20475
      }
    },
    {
      "id": 20478,
      "type_id": 35,
      "from_id": 145,
      "to_id": 20474
    },
    {
      "id": 20479,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 20478,
      "value": {
        "id": 1784,
        "value": "Queries",
        "link_id": 20479
      }
    },
    {
      "id": 20480,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1788,
        "value": "({ deep, data, require, Go }) => {\n    const React = require('react');\n    const c = require('@chakra-ui/react');\n    const _ = require('lodash');\n    const moment = require('moment');\n    const { useDebounceCallback } = require('@react-hook/debounce');\n    var dpl = '@deep-foundation/perception-links';\n    var dc = '@deep-foundation/core';\n    const Stack = deep.idLocal(dpl, 'Stack');\n    const Queries = deep.idLocal(dpl, 'Queries');\n    const Compatable = deep.idLocal(dpl, 'Compatable');\n    const Handler = deep.idLocal(dc, 'Handler');\n    const Query = deep.idLocal(dpl, 'Query');\n    const QueriesClient = deep.idLocal(dpl, 'QueriesClient');\n    let initialMemoryObject = {\n        useQuery: {}, useSubscription: {}, select: {}, subscribe: {}, insert: {}, update: {}, 'delete': {},\n    };\n    if (typeof (window) === 'object') {\n        if (window._deep_perception_queries_memory)\n            initialMemoryObject = window._deep_perception_queries_memory;\n        window._deep_perception_queries_memory = initialMemoryObject;\n    }\n    return ({ go, isActive = false, children, }, ref) => {\n        const containerRef = React.useMemo(() => go.root().ref, []);\n        const { sync, setSync } = React.useContext(go.HandlerConfigContext);\n        const mode = React.useState('useQuery');\n        const modeRef = React.useRef(mode);\n        modeRef.current = mode[0];\n        const modes = Object.keys(initialMemoryObject);\n        const [list, setList] = React.useState([]);\n        const generateList = React.useCallback(() => {\n            if (!modeRef.current)\n                return;\n            const list = _.chain(Object.values(initialMemoryObject[modeRef.current] || {})).sortBy('mounted').reverse().value();\n            setList(list);\n        }, []);\n        const generateListDebounced = useDebounceCallback(generateList, 1000);\n        const apply = React.useCallback((mode, event) => {\n            const prev = initialMemoryObject[mode][event.name] || {};\n            const next = initialMemoryObject[mode][event.name] = { id: event.name, mode, ...prev, ...event, count: (prev?.count || 0) + 1 };\n            next[next.mounted ? 'updated' : 'mounted'] = new Date().valueOf();\n            if (mode === modeRef.current)\n                generateListDebounced();\n        }, []);\n        const unapply = React.useCallback((mode, event) => {\n            delete initialMemoryObject[mode][event.name];\n            if (mode === modeRef.current)\n                generateListDebounced();\n        }, []);\n        const events = React.useMemo(() => ({\n            'useQuery.mount': (event) => apply('useQuery', event),\n            'useQuery': (event) => apply('useQuery', event),\n            'useQuery.unmount': (event) => unapply('useQuery', event),\n            'useSubscription.mount': (event) => apply('useSubscription', event),\n            'useSubscription': (event) => apply('useSubscription', event),\n            'useSubscription.unmount': (event) => unapply('useSubscription', event),\n            'select': (event) => apply('select', event),\n            'subscribe.before': (event) => apply('subscribe', event),\n            'subscribe': (event) => apply('subscribe', event),\n            'insert': (event) => apply('insert', event),\n            'update': (event) => apply('update', event),\n            'delete': (event) => apply('delete', event),\n        }), []);\n        React.useEffect(() => {\n            const sub = (name) => events?.[name] && deep.emitter.on(name, events?.[name]);\n            Object.keys(events).forEach(name => sub(name));\n        }, []);\n        const [opened, setOpened] = React.useState();\n        const Item = React.useMemo(() => React.memo(({ link, isActive }) => {\n            const go = Go.useGo();\n            const q = JSON.stringify(link?.query);\n            return React.createElement(go.On, { do: {\n                    exec: (g, v, o) => setOpened(link),\n                } },\n                React.createElement(c.Button, { bg: isActive ? 'deepBgDark' : undefined, onClick: () => go.do('exec'), w: '100%' },\n                    React.createElement(c.Flex, { w: '100%' },\n                        React.createElement(c.Box, { flex: '1', p: '0.5em', pl: '1em' },\n                            React.createElement(c.Box, { noOfLines: 1, textAlign: 'left' },\n                                q.slice(0, 43),\n                                q.length > 43 ? '...' : ''),\n                            !!link?.value && React.createElement(c.Box, { noOfLines: 1 }, JSON.stringify(link?.value))),\n                        React.createElement(c.Box, { p: '0.25em', pr: '1em', fontSize: 'xs' },\n                            React.createElement(c.Box, null, moment(link.mounted).format('HH:mm:ss')),\n                            !!link.updated && React.createElement(c.Box, null, moment(link.updated).format('HH:mm:ss'))))));\n        }, _.isEqual), []);\n        React.useMemo(() => {\n            setOpened();\n            generateList();\n        }, [mode[0]]);\n        React.useMemo(() => {\n            if (!go.value)\n                mode[1]();\n            else if (!mode)\n                mode[1]('useQuery');\n        }, [go.value]);\n        React.useMemo(() => {\n            opened && go.focus(Query);\n        }, [opened]);\n        return React.createElement(go.On, { do: {\n                focus: (g, v, id, o) => {\n                    if (!v)\n                        go.set('useQuery');\n                    else if (modes.includes(v))\n                        setMode(v);\n                },\n                right: (g, v, o) => {\n                    mode[1](go.next(modes.map(m => ({ id: m })), mode[0]));\n                },\n                left: (g, v, o) => {\n                    modes[0] === mode[0] ? go.set() : mode[1](go.prev(modes.map(m => ({ id: m })), mode[0]));\n                },\n            } },\n            React.createElement(c.Popover, { placement: 'right-end', closeOnBlur: false, isOpen: !!go.value, onClose: () => go.set() },\n                React.createElement(c.PopoverTrigger, null,\n                    React.createElement(c.Button, { ref: ref, w: '3em', h: '3em', variant: !!go.value || isActive ? 'active' : undefined, onClick: () => go.value ? go.set() : go.set('useQuery') }, children)),\n                React.createElement(c.Portal, { containerRef: containerRef },\n                    React.createElement(c.PopoverContent, { w: '30em', maxH: '30em', minH: '30em', position: 'relative' },\n                        React.createElement(c.PopoverArrow, null),\n                        React.createElement(c.Flex, { direction: 'column', position: 'absolute', top: '0', left: '0', w: '100%', h: '100%' },\n                            React.createElement(c.Flex, { overflowX: 'scroll', css: go.noScrollBar },\n                                React.createElement(c.Flex, { columns: modes.length, flex: '1' }, modes.map(m => React.createElement(c.Button, { ...go.activator(mode, m) }, m))),\n                                React.createElement(c.Divider, { orientation: 'vertical' }),\n                                React.createElement(c.Button, { ...go.activator([sync, setSync], true) }, \"sync\")),\n                            React.createElement(c.Divider, null),\n                            React.createElement(go.Provider, { linkId: Stack, value: list?.[0]?.id }, !opened && React.createElement(go.Component, { key: mode[0], path: [dpl, 'Stack'], direction: 'vertical', links: list, Item: Item, flex: '1' })),\n                            !!opened && React.createElement(React.Fragment, null,\n                                React.createElement(go.Provider, { linkId: Query, value: list?.[0]?.id },\n                                    React.createElement(go.Component, { path: [dpl, 'Query'], event: opened }))))))));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxDQUFDLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRTtJQUM5QixNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7SUFFL0IsTUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLGtCQUFrQixDQUFDLENBQUM7SUFDdEMsTUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQzVCLE1BQU0sTUFBTSxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUNqQyxNQUFNLEVBQUUsbUJBQW1CLEVBQUUsR0FBRyxPQUFPLENBQUMsc0JBQXNCLENBQUMsQ0FBQztJQUVoRSxJQUFJLEdBQUcsR0FBRyxtQ0FBbUMsQ0FBQztJQUM5QyxJQUFJLEVBQUUsR0FBRyx1QkFBdUIsQ0FBQztJQUVqQyxNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxPQUFPLENBQUMsQ0FBQztJQUN6QyxNQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxTQUFTLENBQUMsQ0FBQztJQUM3QyxNQUFNLFVBQVUsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxZQUFZLENBQUMsQ0FBQztJQUNuRCxNQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUUsRUFBRSxTQUFTLENBQUMsQ0FBQztJQUM1QyxNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxPQUFPLENBQUMsQ0FBQztJQUN6QyxNQUFNLGFBQWEsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxlQUFlLENBQUMsQ0FBQztJQUV6RCxJQUFJLG1CQUFtQixHQUFHO1FBQ3hCLFFB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SSxFQUFFLENBQUMsQ0FBQyxJQUFHLENBQUMsQ0FBWSxDQUFDLENBQzdEO2dDQUNULG9CQUFDLENBQUMsQ0FBQyxPQUFPLElBQUMsV0FBVyxFQUFDLFVBQVUsR0FBRztnQ0FDcEMsb0JBQUMsQ0FBQyxDQUFDLE1BQU0sT0FBSyxFQUFFLENBQUMsU0FBUyxDQUFDLENBQUMsSUFBSSxFQUFFLE9BQU8sQ0FBQyxFQUFFLElBQUksQ0FBQyxXQUFpQixDQUMzRDs0QkFDVCxvQkFBQyxDQUFDLENBQUMsT0FBTyxPQUFFOzRCQUNaLG9CQUFDLEVBQUUsQ0FBQyxRQUFRLElBQUMsTUFBTSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxJQUM3QyxDQUFDLE1BQU0sSUFBSSxvQkFBQyxFQUFFLENBQUMsU0FBUyxJQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsR0FBRyxFQUFFLE9BQU8sQ0FBQyxFQUFFLFNBQVMsRUFBQyxVQUFVLEVBQUMsS0FBSyxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBQyxHQUFHLEdBQUUsQ0FDMUc7NEJBQ2IsQ0FBQyxDQUFDLE1BQU0sSUFBSTtnQ0FDWCxvQkFBQyxFQUFFLENBQUMsUUFBUSxJQUFDLE1BQU0sRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUU7b0NBQzlDLG9CQUFDLEVBQUUsQ0FBQyxTQUFTLElBQUMsSUFBSSxFQUFFLENBQUMsR0FBRyxFQUFFLE9BQU8sQ0FBQyxFQUFFLEtBQUssRUFBRSxNQUFNLEdBQUcsQ0FDeEMsQ0FNYixDQUNJLENBQ1EsQ0FDVixDQUNELENBQ04sQ0FBQztJQUNYLENBQUMsQ0FBQztBQUNKLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbIih7IGRlZXAsIGRhdGEsIHJlcXVpcmUsIEdvIH0pID0+IHtcbiAgY29uc3QgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuICBcbiAgY29uc3QgYyA9IHJlcXVpcmUoJ0BjaGFrcmEtdWkvcmVhY3QnKTtcbiAgY29uc3QgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xuICBjb25zdCBtb21lbnQgPSByZXF1aXJlKCdtb21lbnQnKTtcbiAgY29uc3QgeyB1c2VEZWJvdW5jZUNhbGxiYWNrIH0gPSByZXF1aXJlKCdAcmVhY3QtaG9vay9kZWJvdW5jZScpO1xuXG4gIHZhciBkcGwgPSAnQGRlZXAtZm91bmRhdGlvbi9wZXJjZXB0aW9uLWxpbmtzJztcbiAgdmFyIGRjID0gJ0BkZWVwLWZvdW5kYXRpb24vY29yZSc7XG5cbiAgY29uc3QgU3RhY2sgPSBkZWVwLmlkTG9jYWwoZHBsLCAnU3RhY2snKTtcbiAgY29uc3QgUXVlcmllcyA9IGRlZXAuaWRMb2NhbChkcGwsICdRdWVyaWVzJyk7XG4gIGNvbnN0IENvbXBhdGFibGUgPSBkZWVwLmlkTG9jYWwoZHBsLCAnQ29tcGF0YWJsZScpO1xuICBjb25zdCBIYW5kbGVyID0gZGVlcC5pZExvY2FsKGRjLCAnSGFuZGxlcicpO1xuICBjb25zdCBRdWVyeSA9IGRlZXAuaWRMb2NhbChkcGwsICdRdWVyeScpO1xuICBjb25zdCBRdWVyaWVzQ2xpZW50ID0gZGVlcC5pZExvY2FsKGRwbCwgJ1F1ZXJpZXNDbGllbnQnKTtcblxuICBsZXQgaW5pdGlhbE1lbW9yeU9iamVjdCA9IHtcbiAgICB1c2VRdWVyeToge30sIHVzZVN1YnNjcmlwdGlvbjoge30sIHNlbGVjdDoge30sIHN1YnNjcmliZToge30sIGluc2VydDoge30sIHVwZGF0ZToge30sICdkZWxldGUnOiB7fSxcbiAgfTtcbiAgaWYgKHR5cGVvZih3aW5kb3cpID09PSAnb2JqZWN0Jykge1xuICAgIGlmICh3aW5kb3cuX2RlZXBfcGVyY2VwdGlvbl9xdWVyaWVzX21lbW9yeSkgaW5pdGlhbE1lbW9yeU9iamVjdCA9IHdpbmRvdy5fZGVlcF9wZXJjZXB0aW9uX3F1ZXJpZXNfbWVtb3J5O1xuICAgIHdpbmRvdy5fZGVlcF9wZXJjZXB0aW9uX3F1ZXJpZXNfbWVtb3J5ID0gaW5pdGlhbE1lbW9yeU9iamVjdDtcbiAgfVxuXG4gIHJldHVybiAoe1xuICAgIGdvLFxuXG4gICAgaXNBY3RpdmUgPSBmYWxzZSxcblxuICAgIGNoaWxkcmVuLFxuICB9LCByZWYpID0+IHtcbiAgICBjb25zdCBjb250YWluZXJSZWYgPSBSZWFjdC51c2VNZW1vKCgpID0+IGdvLnJvb3QoKS5yZWYsIFtdKTtcblxuICAgIGNvbnN0IHsgc3luYywgc2V0U3luYyB9ID0gUmVhY3QudXNlQ29udGV4dChnby5IYW5kbGVyQ29uZmlnQ29udGV4dCk7XG4gICAgY29uc3QgbW9kZSA9IFJlYWN0LnVzZVN0YXRlKCd1c2VRdWVyeScpO1xuICAgIGNvbnN0IG1vZGVSZWYgPSBSZWFjdC51c2VSZWYobW9kZSk7IG1vZGVSZWYuY3VycmVudCA9IG1vZGVbMF07XG5cbiAgICBjb25zdCBtb2RlcyA9IE9iamVjdC5rZXlzKGluaXRpYWxNZW1vcnlPYmplY3QpO1xuXG4gICAgY29uc3QgW2xpc3QsIHNldExpc3RdID0gUmVhY3QudXNlU3RhdGUoW10pO1xuICAgIGNvbnN0IGdlbmVyYXRlTGlzdCA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICAgIGlmICghbW9kZVJlZi5jdXJyZW50KSByZXR1cm47XG4gICAgICBjb25zdCBsaXN0ID0gXy5jaGFpbihPYmplY3QudmFsdWVzKGluaXRpYWxNZW1vcnlPYmplY3RbbW9kZVJlZi5jdXJyZW50XSB8fCB7fSkpLnNvcnRCeSgnbW91bnRlZCcpLnJldmVyc2UoKS52YWx1ZSgpO1xuICAgICAgc2V0TGlzdChsaXN0KTtcbiAgICB9LCBbXSk7XG4gICAgY29uc3QgZ2VuZXJhdGVMaXN0RGVib3VuY2VkID0gdXNlRGVib3VuY2VDYWxsYmFjayhnZW5lcmF0ZUxpc3QsIDEwMDApO1xuXG4gICAgY29uc3QgYXBwbHkgPSBSZWFjdC51c2VDYWxsYmFjaygobW9kZSwgZXZlbnQpID0+IHtcbiAgICAgIGNvbnN0IHByZXYgPSBpbml0aWFsTWVtb3J5T2JqZWN0W21vZGVdW2V2ZW50Lm5hbWVdIHx8IHt9O1xuICAgICAgY29uc3QgbmV4dCA9IGluaXRpYWxNZW1vcnlPYmplY3RbbW9kZV1bZXZlbnQubmFtZV0gPSB7IGlkOiBldmVudC5uYW1lLCBtb2RlLCAuLi5wcmV2LCAuLi5ldmVudCwgY291bnQ6IChwcmV2Py5jb3VudCB8fCAwKSArIDEgfTtcbiAgICAgIG5leHRbbmV4dC5tb3VudGVkID8gJ3VwZGF0ZWQnIDogJ21vdW50ZWQnXSA9IG5ldyBEYXRlKCkudmFsdWVPZigpO1xuICAgICAgaWYgKG1vZGUgPT09IG1vZGVSZWYuY3VycmVudCkgZ2VuZXJhdGVMaXN0RGVib3VuY2VkKCk7XG4gICAgfSwgW10pO1xuXG4gICAgY29uc3QgdW5hcHBseSA9IFJlYWN0LnVzZUNhbGxiYWNrKChtb2RlLCBldmVudCkgPT4ge1xuICAgICAgZGVsZXRlIGluaXRpYWxNZW1vcnlPYmplY3RbbW9kZV1bZXZlbnQubmFtZV07XG4gICAgICBpZiAobW9kZSA9PT0gbW9kZVJlZi5jdXJyZW50KSBnZW5lcmF0ZUxpc3REZWJvdW5jZWQoKTtcbiAgICB9LCBbXSk7XG5cbiAgICBjb25zdCBldmVudHMgPSBSZWFjdC51c2VNZW1vKCgpID0+ICh7XG4gICAgICAndXNlUXVlcnkubW91bnQnOiAoZXZlbnQpID0+IGFwcGx5KCd1c2VRdWVyeScsIGV2ZW50KSxcbiAgICAgICd1c2VRdWVyeSc6IChldmVudCkgPT4gYXBwbHkoJ3VzZVF1ZXJ5JywgZXZlbnQpLFxuICAgICAgJ3VzZVF1ZXJ5LnVubW91bnQnOiAoZXZlbnQpID0+IHVuYXBwbHkoJ3VzZVF1ZXJ5JywgZXZlbnQpLFxuICAgICAgJ3VzZVN1YnNjcmlwdGlvbi5tb3VudCc6IChldmVudCkgPT4gYXBwbHkoJ3VzZVN1YnNjcmlwdGlvbicsIGV2ZW50KSxcbiAgICAgICd1c2VTdWJzY3JpcHRpb24nOiAoZXZlbnQpID0+IGFwcGx5KCd1c2VTdWJzY3JpcHRpb24nLCBldmVudCksXG4gICAgICAndXNlU3Vic2NyaXB0aW9uLnVubW91bnQnOiAoZXZlbnQpID0+IHVuYXBwbHkoJ3VzZVN1YnNjcmlwdGlvbicsIGV2ZW50KSxcbiAgICAgICdzZWxlY3QnOiAoZXZlbnQpID0+IGFwcGx5KCdzZWxlY3QnLCBldmVudCksXG4gICAgICAnc3Vic2NyaWJlLmJlZm9yZSc6IChldmVudCkgPT4gYXBwbHkoJ3N1YnNjcmliZScsIGV2ZW50KSxcbiAgICAgICdzdWJzY3JpYmUnOiAoZXZlbnQpID0+IGFwcGx5KCdzdWJzY3JpYmUnLCBldmVudCksXG4gICAgICAnaW5zZXJ0JzogKGV2ZW50KSA9PiBhcHBseSgnaW5zZXJ0JywgZXZlbnQpLFxuICAgICAgJ3VwZGF0ZSc6IChldmVudCkgPT4gYXBwbHkoJ3VwZGF0ZScsIGV2ZW50KSxcbiAgICAgICdkZWxldGUnOiAoZXZlbnQpID0+IGFwcGx5KCdkZWxldGUnLCBldmVudCksXG4gICAgfSksIFtdKTtcblxuICAgIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICBjb25zdCBzdWIgPSAobmFtZSkgPT4gZXZlbnRzPy5bbmFtZV0gJiYgZGVlcC5lbWl0dGVyLm9uKG5hbWUsIGV2ZW50cz8uW25hbWVdKTtcbiAgICAgIE9iamVjdC5rZXlzKGV2ZW50cykuZm9yRWFjaChuYW1lID0+IHN1YihuYW1lKSk7XG4gICAgfSwgW10pO1xuXG4gICAgY29uc3QgW29wZW5lZCwgc2V0T3BlbmVkXSA9IFJlYWN0LnVzZVN0YXRlKCk7XG5cbiAgICBjb25zdCBJdGVtID0gUmVhY3QudXNlTWVtbygoKSA9PiBSZWFjdC5tZW1vKCh7IGxpbmssIGlzQWN0aXZlIH0pID0+IHtcbiAgICAgIGNvbnN0IGdvID0gR28udXNlR28oKTtcblxuICAgICAgY29uc3QgcSA9IEpTT04uc3RyaW5naWZ5KGxpbms/LnF1ZXJ5KTtcblxuICAgICAgcmV0dXJuIDxnby5PbiBkbz17e1xuICAgICAgICBleGVjOiAoZyx2LG8pID0+IHNldE9wZW5lZChsaW5rKSxcbiAgICAgIH19PlxuICAgICAgICA8Yy5CdXR0b24gYmc9e2lzQWN0aXZlID8gJ2RlZXBCZ0RhcmsnIDogdW5kZWZpbmVkfSBvbkNsaWNrPXsoKSA9PiBnby5kbygnZXhlYycpfSB3PScxMDAlJz5cbiAgICAgICAgICA8Yy5GbGV4IHc9JzEwMCUnPlxuICAgICAgICAgICAgPGMuQm94IGZsZXg9JzEnIHA9JzAuNWVtJyBwbD0nMWVtJz5cbiAgICAgICAgICAgICAgPGMuQm94IG5vT2ZMaW5lcz17MX0gdGV4dEFsaWduPSdsZWZ0Jz5cbiAgICAgICAgICAgICAgICB7cS5zbGljZSgwLCA0Myl9e3EubGVuZ3RoID4gNDMgPyAnLi4uJyA6ICcnfVxuICAgICAgICAgICAgICA8L2MuQm94PlxuICAgICAgICAgICAgICB7ISFsaW5rPy52YWx1ZSAmJiA8Yy5Cb3ggbm9PZkxpbmVzPXsxfT5cbiAgICAgICAgICAgICAgICB7SlNPTi5zdHJpbmdpZnkobGluaz8udmFsdWUpfVxuICAgICAgICAgICAgICA8L2MuQm94Pn1cbiAgICAgICAgICAgIDwvYy5Cb3g+XG4gICAgICAgICAgICA8Yy5Cb3ggcD0nMC4yNWVtJyBwcj0nMWVtJyBmb250U2l6ZT0neHMnPlxuICAgICAgICAgICAgICA8Yy5Cb3g+e21vbWVudChsaW5rLm1vdW50ZWQpLmZvcm1hdCgnSEg6bW06c3MnKX08L2MuQm94PlxuICAgICAgICAgICAgICB7ISFsaW5rLnVwZGF0ZWQgJiYgPGMuQm94Pnttb21lbnQobGluay51cGRhdGVkKS5mb3JtYXQoJ0hIOm1tOnNzJyl9PC9jLkJveD59XG4gICAgICAgICAgICA8L2MuQm94PlxuICAgICAgICAgIDwvYy5GbGV4PlxuICAgICAgICA8L2dvLkJ1dHRvbj5cbiAgICAgIDwvZ28uT24+XG4gICAgfSwgXy5pc0VxdWFsKSwgW10pO1xuXG4gICAgUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgICBzZXRPcGVuZWQoKTtcbiAgICAgIGdlbmVyYXRlTGlzdCgpO1xuICAgIH0sIFttb2RlWzBdXSk7XG5cbiAgICBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICAgIGlmICghZ28udmFsdWUpIG1vZGVbMV0oKTtcbiAgICAgIGVsc2UgaWYgKCFtb2RlKSBtb2RlWzFdKCd1c2VRdWVyeScpO1xuICAgIH0sIFtnby52YWx1ZV0pO1xuXG4gICAgUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgICBvcGVuZWQgJiYgZ28uZm9jdXMoUXVlcnkpO1xuICAgIH0sIFtvcGVuZWRdKTtcblxuICAgIHJldHVybiA8Z28uT25cbiAgICAgIGRvPXt7XG4gICAgICAgIGZvY3VzOiAoZyx2LGlkLG8pID0+IHtcbiAgICAgICAgICBpZiAoIXYpIGdvLnNldCgndXNlUXVlcnknKTtcbiAgICAgICAgICBlbHNlIGlmIChtb2Rlcy5pbmNsdWRlcyh2KSkgc2V0TW9kZSh2KTtcbiAgICAgICAgfSxcbiAgICAgICAgcmlnaHQ6IChnLHYsbykgPT4ge1xuICAgICAgICAgIG1vZGVbMV0oZ28ubmV4dChtb2Rlcy5tYXAobSA9PiAoeyBpZDogbSB9KSksIG1vZGVbMF0pKTtcbiAgICAgICAgfSxcbiAgICAgICAgbGVmdDogKGcsdixvKSA9PiB7XG4gICAgICAgICAgbW9kZXNbMF0gPT09IG1vZGVbMF0gID8gZ28uc2V0KCkgOiBtb2RlWzFdKGdvLnByZXYobW9kZXMubWFwKG0gPT4gKHsgaWQ6IG0gfSkpLCBtb2RlWzBdKSk7XG4gICAgICAgIH0sXG4gICAgICB9fVxuICAgID5cbiAgICAgIDxjLlBvcG92ZXIgcGxhY2VtZW50PSdyaWdodC1lbmQnIGNsb3NlT25CbHVyPXtmYWxzZX0gaXNPcGVuPXshIWdvLnZhbHVlfSBvbkNsb3NlPXsoKSA9PiBnby5zZXQoKX0+XG4gICAgICAgIDxjLlBvcG92ZXJUcmlnZ2VyPlxuICAgICAgICAgIDxjLkJ1dHRvblxuICAgICAgICAgICAgcmVmPXtyZWZ9IHc9JzNlbScgaD0nM2VtJyB2YXJpYW50PXshIWdvLnZhbHVlIHx8IGlzQWN0aXZlID8gJ2FjdGl2ZScgOiB1bmRlZmluZWR9XG4gICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBnby52YWx1ZSA/IGdvLnNldCgpIDogZ28uc2V0KCd1c2VRdWVyeScpfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIHtjaGlsZHJlbn1cbiAgICAgICAgICA8L2MuQnV0dG9uPlxuICAgICAgICA8L2MuUG9wb3ZlclRyaWdnZXI+XG4gICAgICAgIDxjLlBvcnRhbCBjb250YWluZXJSZWY9e2NvbnRhaW5lclJlZn0+XG4gICAgICAgICAgPGMuUG9wb3ZlckNvbnRlbnQgdz0nMzBlbScgbWF4SD0nMzBlbScgbWluSD0nMzBlbScgcG9zaXRpb249J3JlbGF0aXZlJz5cbiAgICAgICAgICAgIDxjLlBvcG92ZXJBcnJvdyAvPlxuICAgICAgICAgICAgPGMuRmxleCBkaXJlY3Rpb249J2NvbHVtbicgcG9zaXRpb249J2Fic29sdXRlJyB0b3A9JzAnIGxlZnQ9JzAnIHc9JzEwMCUnIGg9JzEwMCUnPlxuICAgICAgICAgICAgICA8Yy5GbGV4IG92ZXJmbG93WD0nc2Nyb2xsJyBjc3M9e2dvLm5vU2Nyb2xsQmFyfT5cbiAgICAgICAgICAgICAgICA8Yy5GbGV4IGNvbHVtbnM9e21vZGVzLmxlbmd0aH0gZmxleD0nMSc+XG4gICAgICAgICAgICAgICAgICB7bW9kZXMubWFwKG0gPT4gPGMuQnV0dG9uIHsuLi5nby5hY3RpdmF0b3IobW9kZSwgbSl9PnttfTwvYy5CdXR0b24+KX1cbiAgICAgICAgICAgICAgICA8L2MuRmxleD5cbiAgICAgICAgICAgICAgICA8Yy5EaXZpZGVyIG9yaWVudGF0aW9uPSd2ZXJ0aWNhbCcgLz5cbiAgICAgICAgICAgICAgICA8Yy5CdXR0b24gey4uLmdvLmFjdGl2YXRvcihbc3luYywgc2V0U3luY10sIHRydWUpfT5zeW5jPC9jLkJ1dHRvbj5cbiAgICAgICAgICAgICAgPC9jLkZsZXg+XG4gICAgICAgICAgICAgIDxjLkRpdmlkZXIvPlxuICAgICAgICAgICAgICA8Z28uUHJvdmlkZXIgbGlua0lkPXtTdGFja30gdmFsdWU9e2xpc3Q/LlswXT8uaWR9PlxuICAgICAgICAgICAgICAgIHshb3BlbmVkICYmIDxnby5Db21wb25lbnQga2V5PXttb2RlWzBdfSBwYXRoPXtbZHBsLCAnU3RhY2snXX0gZGlyZWN0aW9uPSd2ZXJ0aWNhbCcgbGlua3M9e2xpc3R9IEl0ZW09e0l0ZW19IGZsZXg9JzEnLz59XG4gICAgICAgICAgICAgIDwvZ28uUHJvdmlkZXI+XG4gICAgICAgICAgICAgIHshIW9wZW5lZCAmJiA8PlxuICAgICAgICAgICAgICAgIDxnby5Qcm92aWRlciBsaW5rSWQ9e1F1ZXJ5fSB2YWx1ZT17bGlzdD8uWzBdPy5pZH0+XG4gICAgICAgICAgICAgICAgICA8Z28uQ29tcG9uZW50IHBhdGg9e1tkcGwsICdRdWVyeSddfSBldmVudD17b3BlbmVkfS8+XG4gICAgICAgICAgICAgICAgPC9nby5Qcm92aWRlcj5cbiAgICAgICAgICAgICAgICB7LyogPGdvLkNvbXBvbmVudCBwYXRoPXtbZHBsLCAnU3RhY2snXX0gZGlyZWN0aW9uPSdob3Jpem9udGFsJyBsaW5rcz17dmlld3N9IEl0ZW09e1ZpZXdJdGVtfS8+ICovfVxuICAgICAgICAgICAgICAgIHsvKiA8Z28uQ29tcG9uZW50IHBhdGg9e1tkcGwsICdRdWVyaWVzR1FMJ119IGV4dGVuZEluc2VydD17eyBvdXQ6IHsgdHlwZV9pZDogQ29tcGF0YWJsZSwgdG9faWQ6IFF1ZXJpZXMgfSB9fS8+XG4gICAgICAgICAgICAgICAgPGdvLkNvbXBvbmVudCBwYXRoPXtbZHBsLCAnUXVlcmllc1JlYWN0J119IGV4dGVuZEluc2VydD17eyBvdXQ6IHsgdHlwZV9pZDogQ29tcGF0YWJsZSwgdG9faWQ6IFF1ZXJpZXMgfSB9fS8+XG4gICAgICAgICAgICAgICAgPGdvLkNvbXBvbmVudCBwYXRoPXtbZHBsLCAnUXVlcmllc0NsaWVudCddfSBleHRlbmRJbnNlcnQ9e3sgb3V0OiB7IHR5cGVfaWQ6IENvbXBhdGFibGUsIHRvX2lkOiBRdWVyaWVzIH0gfX0vPlxuICAgICAgICAgICAgICAgIDxnby5Db21wb25lbnQgcGF0aD17W2RwbCwgJ1F1ZXJpZXNSZXN1bHRzJ119IGV4dGVuZEluc2VydD17eyBvdXQ6IHsgdHlwZV9pZDogQ29tcGF0YWJsZSwgdG9faWQ6IFF1ZXJpZXMgfSB9fS8+ICovfVxuICAgICAgICAgICAgICA8Lz59XG4gICAgICAgICAgICA8L2MuRmxleD5cbiAgICAgICAgICA8L2MuUG9wb3ZlckNvbnRlbnQ+XG4gICAgICAgIDwvYy5Qb3J0YWw+XG4gICAgICA8L2MuUG9wb3Zlcj5cbiAgICA8L2dvLk9uPjtcbiAgfTtcbn0iXX0=",
        "link_id": 20480
      }
    },
    {
      "id": 20482,
      "type_id": 3,
      "from_id": 20474,
      "to_id": 20480,
      "value": {
        "id": 1785,
        "value": "generated",
        "link_id": 20482
      }
    },
    {
      "id": 20485,
      "type_id": 143,
      "from_id": 20480,
      "to_id": 20474
    },
    {
      "id": 20486,
      "type_id": 3,
      "from_id": 20474,
      "to_id": 20485
    },
    {
      "id": 21151,
      "type_id": 717,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1793,
        "value": "({ deep, data, require, Go }) => {\n  const React = require('react');\n  \n  const c = require('@chakra-ui/react');\n\n  return ({\n    go,\n\n    children,\n  }, ref) => {\n    return <go.On\n      do={{\n      }}\n    >\n      <c.Box ref={ref} h='3em'>{`${go}`}</c.Box>\n    </go.On>;\n  };\n}",
        "link_id": 21151
      }
    },
    {
      "id": 21152,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 21151,
      "value": {
        "id": 1792,
        "value": "useThemeHook",
        "link_id": 21152
      }
    },
    {
      "id": 21155,
      "type_id": 35,
      "from_id": 145,
      "to_id": 21151
    },
    {
      "id": 21156,
      "type_id": 3,
      "from_id": 2586,
      "to_id": 21155,
      "value": {
        "id": 1794,
        "value": "useTheme",
        "link_id": 21156
      }
    },
    {
      "id": 21157,
      "type_id": 30,
      "from_id": 0,
      "to_id": 0,
      "value": {
        "id": 1796,
        "value": "({ deep, data, require, Go }) => {\n    const React = require('react');\n    const c = require('@chakra-ui/react');\n    return ({ go, children, }, ref) => {\n        return React.createElement(go.On, { do: {} },\n            React.createElement(c.Box, { ref: ref, h: '3em' }, `${go}`));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxDQUFDLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRTtJQUM5QixNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7SUFFL0IsTUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLGtCQUFrQixDQUFDLENBQUM7SUFFdEMsT0FBTyxDQUFDLEVBQ04sRUFBRSxFQUVGLFFBQVEsR0FDVCxFQUFFLEdBQUcsRUFBRSxFQUFFO1FBQ1IsT0FBTyxvQkFBQyxFQUFFLENBQUMsRUFBRSxJQUNYLEVBQUUsRUFBRSxFQUNIO1lBRUQsb0JBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBQyxLQUFLLElBQUUsR0FBRyxFQUFFLEVBQUUsQ0FBUyxDQUNwQyxDQUFDO0lBQ1gsQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiKHsgZGVlcCwgZGF0YSwgcmVxdWlyZSwgR28gfSkgPT4ge1xuICBjb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG4gIFxuICBjb25zdCBjID0gcmVxdWlyZSgnQGNoYWtyYS11aS9yZWFjdCcpO1xuXG4gIHJldHVybiAoe1xuICAgIGdvLFxuXG4gICAgY2hpbGRyZW4sXG4gIH0sIHJlZikgPT4ge1xuICAgIHJldHVybiA8Z28uT25cbiAgICAgIGRvPXt7XG4gICAgICB9fVxuICAgID5cbiAgICAgIDxjLkJveCByZWY9e3JlZn0gaD0nM2VtJz57YCR7Z299YH08L2MuQm94PlxuICAgIDwvZ28uT24+O1xuICB9O1xufSJdfQ==",
        "link_id": 21157
      }
    },
    {
      "id": 21158,
      "type_id": 3,
      "from_id": 21151,
      "to_id": 21157,
      "value": {
        "id": 1795,
        "value": "generated",
        "link_id": 21158
      }
    },
    {
      "id": 21159,
      "type_id": 143,
      "from_id": 21157,
      "to_id": 21151
    },
    {
      "id": 21160,
      "type_id": 3,
      "from_id": 21151,
      "to_id": 21159
    }
  ],
  "handlers": [
    {
      "dist_id": 86,
      "src_id": 86,
      "handler_id": 87,
      "execution_provider_id": 33,
      "isolation_provider_id": 81,
      "dist": {
        "id": 86,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 3,
          "value": "\nasync ({ deep, require, gql, data: { newLink } }) => {\n  const { data: [pq] } = await deep.select({ id: newLink.to_id });\n  const { data: { packager_install: imported }, error } = await deep.apolloClient.query({\n    query: gql`query PACKAGE_INSTALL($address: String!) {\n      packager_install(input: { address: $address }) {\n        ids\n        packageId\n        errors\n      }\n    }`,\n    variables: {\n      address: pq?.value?.value,\n    },\n  });\n  if (error) throw error;\n  if (imported?.errors?.length) throw imported.errors;\n  await deep.insert({\n    type_id: deep.idLocal('@deep-foundation/core', 'Contain'),\n    from_id: newLink.from_id,\n    to_id: imported.packageId,\n  });\n  return imported;\n}\n    ",
          "link_id": 86
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 89,
      "src_id": 89,
      "handler_id": 90,
      "execution_provider_id": 33,
      "isolation_provider_id": 81,
      "dist": {
        "id": 89,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 4,
          "value": "\nasync ({ deep, require, gql, data: { newLink } }) => {\n  const { data: [pq] } = await deep.select({ id: newLink.to_id });\n  const { data: { packager_publish: exported }, error } = await deep.apolloClient.query({\n    query: gql`query PACKAGE_PUBLISH($address: String!, $id: Int) {\n      packager_publish(input: { address: $address, id: $id }) {\n        address\n        errors\n      }\n    }`,\n    variables: {\n      address: pq?.value?.value,\n      id: newLink.from_id,\n    },\n  });\n  if (error) throw error;\n  if (exported?.errors?.length) throw exported.errors;\n  return exported;\n}\n    ",
          "link_id": 89
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 715,
      "src_id": 715,
      "handler_id": 716,
      "execution_provider_id": 33,
      "isolation_provider_id": 81,
      "dist": {
        "id": 715,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 314,
          "value": "\nasync ({ deep, require, gql, data: { newLink } }) => {\n    const ts = require('typescript');\n  const { data: [generatedFrom] } = await deep.select({\n      type_id: await deep.id('@deep-foundation/core', 'GeneratedFrom'),\n    to_id: newLink.id, \n  });\n  const value = newLink?.value?.value;\n  let compiledString = '';\n  if (value) {\n    const result = ts.transpileModule(value, {\n      \"compilerOptions\": {\n        \"allowSyntheticDefaultImports\": true,\n        \"experimentalDecorators\": true,\n        \"inlineSourceMap\": true,\n        inlineSources: true,\n        \"noImplicitAny\": false,\n        \"removeComments\": true,\n        \"jsx\": \"react\",\n        \"module\": \"ESNext\",\n        \"moduleResolution\": \"node\",\n        \"target\": \"ESNext\",\n        \"skipLibCheck\": true,\n        \"resolveJsonModule\": true,\n        \"esModuleInterop\": true,\n        \"isolatedModules\": true\n      }\n    });\n    if (!result.outputText) {\n      throw result;\n    }\n    compiledString = result.outputText || '';\n  }\n  if (!generatedFrom) {\n      await deep.insert({\n        type_id: await deep.id('@deep-foundation/core', 'GeneratedFrom'),\n      to_id: newLink.id,\n      in: { data: {\n          type_id: await deep.id('@deep-foundation/core', 'Contain'),\n        from_id: newLink.id,\n      } },\n      from: { data: {\n          type_id: await deep.id('@deep-foundation/core', 'SyncTextFile'),\n        string: { data: { value: compiledString } },\n        in: { data: {\n            type_id: await deep.id('@deep-foundation/core', 'Contain'),\n          from_id: newLink.id,\n          string: { data: { value: 'generated' } },\n        } },\n      } },\n    });\n  } else {\n      await deep.update({\n        link_id: { _eq: generatedFrom.from_id },\n    }, {\n        value: compiledString,\n    }, { table: 'strings' });\n  }\n}\n",
          "link_id": 715
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 744,
      "src_id": 744,
      "handler_id": 745,
      "execution_provider_id": 33,
      "isolation_provider_id": 81,
      "dist": {
        "id": 744,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 326,
          "value": "async ({ deep, require, gql, data: { triggeredByLinkId, newLink } }) => {\n  const fs = await deep.import('fs');\n  const encoding = 'utf8';\n  const deepPackageKeyWord = 'deep-package';\n  \n  const makeTempDirectory = async () => {\n    const os = await deep.import('os');\n    const { v4: uuid } = await deep.import('uuid');\n    \n    const baseTempDirectory = os.tmpdir();\n    const randomId = uuid();\n    const tempDirectory = [baseTempDirectory,randomId].join('/');\n    fs.mkdirSync(tempDirectory);\n    console.log(tempDirectory);\n    return tempDirectory;\n  };\n  const npmInstall = async (packageName, installationPath, setTildaPrefix) => {\n    const execSync = (await deep.import('child_process')).execSync;\n\n    if (setTildaPrefix === true) {\n      const savePrefixCommand = `npm --prefix \"${installationPath}\" config set save-prefix=\"~\"`;\n      try {\n        const output = execSync(savePrefixCommand, { \n          encoding: 'utf-8',\n          cwd: installationPath\n        }).toString();\n        console.log(`${savePrefixCommand}\\n`, output);\n      } catch(error) {\n        return {\n          rejected: error\n        };\n      }\n    }\n  \n    let result;\n    const command = `npm --prefix \"${installationPath}\" i ${packageName}`;\n    try {\n      const output = execSync(command, { \n        encoding: 'utf-8',\n        cwd: installationPath\n      }).toString();\n      console.log(`${command}\\n`, output);\n      result = {\n        resolved: {\n          status: 0,\n          stdout: output\n        }\n      };\n    } catch(error) {\n      return {\n        rejected: error\n      };\n    }\n\n    if (setTildaPrefix === true) {\n      const deletePrefixCommand = `npm --prefix \"${installationPath}\" config delete save-prefix`;\n      try {\n        const output = execSync(deletePrefixCommand, { \n          encoding: 'utf-8',\n          cwd: installationPath\n        }).toString();\n        console.log(`${deletePrefixCommand}\\n`, output);\n      } catch(error) {\n        return {\n          rejected: error\n        };\n      }\n    }\n\n    return result;\n  };\n  const npmLogin = async (token, tempDirectory) => {\n    const execSync = (await deep.import('child_process')).execSync;\n  \n    const command = `npm set \"//registry.npmjs.org/:_authToken\" ${token}`;\n    const output = execSync(command, { \n        encoding: 'utf-8',\n        cwd: tempDirectory\n    });\n    console.log(`${command}\\n`, output);\n    return output;\n  };\n  const npmPublish = async (tempDirectory) => {\n    const execSync = (await deep.import('child_process')).execSync;\n  \n    const command = `npm publish --access public`;\n    const output = execSync(command, { \n        encoding: 'utf-8',\n        cwd: tempDirectory\n    });\n    console.log(`${command}\\n`, output);\n    return output;\n  };\n  const makeDeepPackagePath = (tempDirectory, packageName) => [tempDirectory, 'node_modules', packageName].join('/');\n  const makeDeepJsonPath = (packagePath) => [packagePath, 'deep.json'].join('/');\n  const makePackageJsonPath = (packagePath) => [packagePath, 'package.json'].join('/');\n  const deepExport = async (packageId) => {\n    const packager = new (await deep.import('@deep-foundation/deeplinks/imports/packager.js')).Packager(deep);\n    const exported = await packager.export({ packageLinkId: packageId });\n    console.log(exported);\n    if (exported?.errors?.length) throw exported;\n    return exported;\n  };\n  const loadNpmToken = async () => {\n    const containTreeId = await deep.id('@deep-foundation/core', 'containTree');\n    const tokenTypeId = await deep.id('@deep-foundation/npm-packager', 'Token');\n    const { data: [{ value: { value: npmToken = undefined } = {}} = {}] = []} = await deep.select({\n      up: {\n        tree_id: { _eq: containTreeId },\n        parent: { id: { _eq: triggeredByLinkId } },\n        link: { type_id: { _eq: tokenTypeId } }\n      }\n    });\n    return npmToken;\n  };\n  const loadFromJson = (path) => {\n    if (!fs.existsSync(path)) {\n      throw new Error(`${path} is not found.`);\n    }\n    const json = fs.readFileSync(path, { encoding });\n    if (!json) {\n      throw new Error(`${path} is empty or was not read properly.`);\n    }\n    console.log(`Parsing ${path} ...`);\n    const data = JSON.parse(json);\n    console.log(`Parsing ${path} finished.`);\n    return data;\n  }\n  const saveAsJson = (path, data) => {\n    fs.writeFileSync(path, JSON.stringify(data, null, 2), { encoding });\n  }\n  const updateVersion = async (deepJsonPath, packageJsonPath, localVersion) => {\n    const semver = await deep.import('semver');\n\n    const deepPackage = loadFromJson(deepJsonPath);\n    const npmPackage = loadFromJson(packageJsonPath);\n\n    const oldNpmVersion = npmPackage?.version || '0.0.0';\n\n    const nextVersion = semver.gt(localVersion, oldNpmVersion) ? localVersion : semver.inc(oldNpmVersion, 'patch');\n\n    npmPackage.version = nextVersion;\n    if (!deepPackage.package) {\n      deepPackage.package = {};\n    }\n    deepPackage.package.version = nextVersion;  \n\n    saveAsJson(deepJsonPath, deepPackage);\n    saveAsJson(packageJsonPath, npmPackage);\n\n    return nextVersion;\n  };\n  const addKeyword = (packageJsonPath, keyword) => {\n    const npmPackage = loadFromJson(packageJsonPath);\n    if (npmPackage?.keywords?.length > 0) {\n      if (!npmPackage.keywords.includes(keyword)) {\n        npmPackage.keywords.push(keyword); \n      }\n    } else {\n      npmPackage.keywords = [ keyword ];\n    }\n    saveAsJson(packageJsonPath, npmPackage);\n  };\n  const installDependencies = async (packagePath, dependencies) => {\n    for (const dependency of dependencies) {\n      const dependencyPackageName = `${dependency.name}@${dependency.version}`;\n      const installationResult = await npmInstall(dependencyPackageName, packagePath, true);\n      if (installationResult?.rejected) {\n        console.log(`Unable to install ${dependencyPackageName} dependency.`)\n        throw installationResult.rejected;\n      } else if (!installationResult?.resolved) {\n        throw new Error(`Unsupported NPM dependency installation result for ${dependencyPackageName} dependency package.`);\n      }\n    }\n  }\n\n  if (!triggeredByLinkId) {\n    throw new Error('Publish link should be inserted using JWT token (role link), it cannot be inserted using hasura secret (role admin).');\n  }\n\n  const { data: [packageQuery] } = await deep.select({ id: newLink.to_id });\n  const packageName = packageQuery?.value?.value;\n  if (!packageName) {\n    throw new Error('Package query value is empty.');\n  }\n  const packageVersionTypeId = await deep.id('@deep-foundation/core', 'PackageVersion');\n  const { data: [{ versions: [{ version: { value: localVersion = undefined } = {}} = {}] = []} = {}] = []} = await deep.select({ id: newLink.from_id }, { returning: `id versions: in(where: { type_id: { _eq: ${packageVersionTypeId} } }) { id type_id version: value }` });\n  if (!localVersion) {\n    throw new Error('Package must have a version.');\n  }\n\n  const packageId = newLink.from_id;\n  const { data: [{ value: actualPackageName }]} = await deep.select(\n    { link_id: { _eq: packageId } },\n    {\n      table: 'strings',\n      returning: 'value'\n    }\n  );\n  if (packageName !== actualPackageName) {\n    throw new Error('Package query value should be equal to actual package name.');\n  }\n  const tempDirectory = await makeTempDirectory();\n  try {\n    const npmToken = await loadNpmToken();\n    if (!npmToken) {\n      throw new Error('NPM token is required to publish package. NPM token should be contained by user that does insert publish link.');\n    }\n    await npmLogin(npmToken, tempDirectory);\n    const installationResult = await npmInstall(packageName, tempDirectory, false);\n    let deepPackagePath; \n    let packageJsonPath;\n    if (installationResult?.resolved) {\n      deepPackagePath = makeDeepPackagePath(tempDirectory, packageName);\n      packageJsonPath = makePackageJsonPath(deepPackagePath);\n    } else if(installationResult?.rejected) {\n      deepPackagePath = tempDirectory;\n      packageJsonPath = makePackageJsonPath(deepPackagePath);\n      const packageJson = {\n        name: packageName\n      };\n      saveAsJson(packageJsonPath, packageJson);\n    } else {\n      throw new Error(`Unsupported NPM installation result for ${packageName} package.`);\n    }\n    console.log('deepPackagePath', deepPackagePath);\n    console.log('packageJsonPath', packageJsonPath);\n    \n    const pkg = await deepExport(packageId);\n    console.log(pkg);\n    await installDependencies(deepPackagePath, pkg.dependencies);\n    const deepJsonPath = makeDeepJsonPath(deepPackagePath);\n    saveAsJson(deepJsonPath, pkg);\n    const nextVersion = await updateVersion(deepJsonPath, packageJsonPath, localVersion);\n    addKeyword(packageJsonPath, deepPackageKeyWord);\n    await npmPublish(deepPackagePath);\n    if (nextVersion !== localVersion) {\n      await deep.update({\n        link: {\n          type_id: { _eq: await deep.id('@deep-foundation/core', 'PackageVersion') },\n          to_id: { _eq: packageId },\n        },\n      }, { value: nextVersion }, { table: 'strings' });\n    }\n  } finally {\n    fs.rmSync(tempDirectory, { recursive: true, force: true });\n  }\n}",
          "link_id": 744
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 746,
      "src_id": 746,
      "handler_id": 747,
      "execution_provider_id": 33,
      "isolation_provider_id": 81,
      "dist": {
        "id": 746,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 327,
          "value": "async ({ deep, gql, data: { triggeredByLinkId, newLink } }) => {\n  const deepFileName = 'deep.json';\n  const fs = await deep.import('fs');\n\n  const makeTempDirectory = async () => {\n    const os = await deep.import('os');\n    const { v4: uuid } = await deep.import('uuid');\n    \n    const baseTempDirectory = os.tmpdir();\n    const randomId = uuid();\n    const tempDirectory = [baseTempDirectory,randomId].join('/');\n    fs.mkdirSync(tempDirectory);\n    console.log(tempDirectory);\n    return tempDirectory;\n  };\n  const npmInstall = async (packageName, tempDirectory) => {\n    const execSync = (await deep.import('child_process')).execSync;\n\n    const command = `npm --prefix \"${tempDirectory}\" i ${packageName}`;\n    const output = execSync(command, { \n        encoding: 'utf-8',\n        cwd: tempDirectory\n    });\n    console.log(`${command}\\n`, output);\n    return output;\n  };\n  const npmLogin = async (token, tempDirectory) => {\n    const execSync = (await deep.import('child_process')).execSync;\n  \n    const command = `npm set \"//registry.npmjs.org/:_authToken\" ${token}`;\n    const output = execSync(command, { \n        encoding: 'utf-8',\n        cwd: tempDirectory\n    });\n    console.log(`${command}\\n`, output);\n    return output;\n  };\n  const makePackagePath = (tempDirectory, packageName) => [tempDirectory, 'node_modules', packageName].join('/');\n  const makeDeepJsonPath = (packagePath) => [packagePath, deepFileName].join('/');\n  const makePackageJsonPath = (packagePath) => [packagePath, 'package.json'].join('/');\n  const loadNpmToken = async () => {\n    const containTreeId = await deep.id('@deep-foundation/core', 'containTree');\n    const tokenTypeId = await deep.id('@deep-foundation/npm-packager', 'Token');\n    const { data: [{ value: { value: npmToken = undefined } = {}} = {}] = []} = await deep.select({\n      up: {\n        tree_id: { _eq: containTreeId },\n        parent: { id: { _eq: triggeredByLinkId } },\n        link: { type_id: { _eq: tokenTypeId } }\n      }\n    });\n    return npmToken;\n  };\n  const deepImport = async (deepJson, packageJson) => {\n    if (deepJson.package.name !== packageJson.name) {\n      throw new Error(`Package name is not synchronized between ${deepFileName} and package.json files.\n  ${deepFileName} package name: ${deepJson.package.name}.\n  package.json package name: ${packageJson.name}.`);\n    }\n    if (deepJson.package.version !== packageJson.version) {\n      throw new Error(`Package version is not synchronized between ${deepFileName} and package.json files.\n  ${deepFileName} package version: ${deepJson.package.version}.\n  package.json package version: ${packageJson.version}.`);\n    }\n    const packager = new (await deep.import('@deep-foundation/deeplinks/imports/packager.js')).Packager(deep);\n    const imported = await packager.import(deepJson);\n    console.log(imported);\n    if (imported?.errors?.length) throw imported;\n    return imported;\n  };\n  const getDeepPackagesList = async (rootPath) => {\n    const execSync = (await deep.import('child_process')).execSync;\n\n    const deepFileName = 'deep.json';\n    const deepFileNameLength = deepFileName.length;\n\n    const command = `find . -name ${deepFileName}`;\n    const output = execSync(command, { \n        encoding: 'utf-8',\n        cwd: rootPath\n    });\n    console.log('', `${command}\\n`, output);\n\n    const packages = output\n      .split(/\\r?\\n/)\n      .filter(line => line.trim())\n      .map(line => line.slice(2).slice(0, -deepFileNameLength - 1))\n      .map(line => line.split('/node_modules/'));\n    return packages;\n  };\n  const getDeepPackagesDependencies = async (rootPath, packages, packageName) => {\n    const dictionary = {};\n    for (const pkg of packages) {\n      const packagePath = [rootPath, pkg.join('/node_modules/')].join('/');\n      console.log('packagePath', packagePath);\n      const packageJsonPath = makePackageJsonPath(packagePath);\n      console.log('packageJsonPath', packageJsonPath);\n      if (!fs.existsSync(packageJsonPath)) {\n        throw new Error(`package.json for dependency ${pkg} is not found at ${packageJsonPath}. Looks like ${packageName} does not contain ${pkg} dependency in package.json.`);\n      }\n      const packageJson = await deep.import(packageJsonPath);\n      console.log('packageJson', packageJson);\n      const deepJsonPath = makeDeepJsonPath(packagePath);\n      console.log('deepJsonPath', deepJsonPath);\n      if (!fs.existsSync(deepJsonPath)) {\n        throw new Error(`deep.json for dependency ${pkg} is not found at ${deepJsonPath}. Looks like ${pkg} installed, but it does not contain deep.json. Make sure ${pkg} is a deep package.`);\n      }\n      const deepJson = await deep.import(deepJsonPath);\n      console.log('deepJson', deepJson);\n      const dependencies = packageJson.dependencies ?? {};\n      console.log('dependencies', dependencies);\n      const dependencyPackageName = pkg.at(-1);\n      console.log('dependencyPackageName', dependencyPackageName);\n      if (dictionary[dependencyPackageName]) {\n        if (packageJson.version === dictionary[dependencyPackageName].packageJson.version) {\n          console.log(`${dependencyPackageName}@${packageJson.version} was already added to a list of dependencies, no need to add it again.`)\n          continue;\n        } else {\n          throw new Error(`Multiple versions of the same package are not supported yet.\n${dependencyPackageName}@${dictionary[dependencyPackageName].packageJson.version} was already added to a list of dependencies from ${dictionary[dependencyPackageName].packagePath}.\nBut ${packageName} also contains ${dependencyPackageName}@${packageJson.version} dependency at ${packagePath}.`);\n        }\n      }\n      dictionary[dependencyPackageName] = { deepJson, packageJson, dependencies, packagePath };\n    }\n    for (const pkg in dictionary) {\n      const sourceDependencies = dictionary[pkg].dependencies;\n      const targetDependencies = [];\n      for (const dependency in sourceDependencies)\n      {\n        if (dictionary[dependency]) {\n          targetDependencies.push(dependency);\n        }\n      }\n      dictionary[pkg].dependencies = targetDependencies;\n    }\n    return dictionary;\n  }\n  const buildInstallationQueueCore = (deepPackagesDependencies, queue, set, packageName) => {\n    const dependencies = deepPackagesDependencies[packageName].dependencies;\n    for (const dependency of dependencies) {\n      if (!set[dependency]) {\n        buildInstallationQueueCore(deepPackagesDependencies, queue, set, dependency);\n      }\n    }\n    if(!set[packageName]) {\n      const deepJson = deepPackagesDependencies[packageName].deepJson;\n      const packageJson = deepPackagesDependencies[packageName].packageJson;\n      queue.push({ name: packageName, deepJson, packageJson });\n      set[packageName] = true;\n    }\n  }\n  const buildInstallationQueue = (deepPackagesDependencies, queue, set) => {\n    for (const packageName in deepPackagesDependencies) {\n      buildInstallationQueueCore(deepPackagesDependencies, queue, set, packageName);\n    }\n  }\n  const getExistingPackages = async (packageNames) => {\n    const packageTypeId = await deep.id('@deep-foundation/core', 'Package');\n    const packageVersionTypeId = await deep.id('@deep-foundation/core', 'PackageVersion');\n    const { data: packages } = await deep.select({\n      type_id: { _eq: packageTypeId },\n      string: { value: { _in: packageNames } }\n    }, {\n      name: 'GET_EXISTING_PACKAGES_WITH_VERSIONS',\n      returning: `\n        id\n        name: value\n        versions: in(where: {type_id: {_eq: ${packageVersionTypeId}}, string: {value: {_is_null: false}}}) {\n          id\n          version: value\n        }\n      `\n    })\n    console.log('packages', packages);\n    const existingPackages = packages.reduce(\n      (accumulator, currentValue) => {\n        const packageId = currentValue?.id;\n        const packageName = currentValue?.name?.value;\n        if (currentValue?.versions.length !== 1) {\n          throw new Error(`'${packageName}' package must have exactly one version. Now it has ${currentValue?.versions.length} versions.`);\n        }\n        if (accumulator[packageName]) {\n          throw new Error(`Multiple packages with name '${packageName}' exist.`)\n        }\n        const packageVersion = currentValue?.versions?.[0]?.version?.value;\n        accumulator[packageName] = { id: packageId, version: packageVersion };\n        return accumulator;\n      },\n      {}\n    );\n    console.log('existingPackages', existingPackages);\n    return existingPackages;\n  };\n\n  if (!triggeredByLinkId) {\n    throw new Error('Install link should be inserted using JWT token (role link), it cannot be inserted using hasura secret (role admin).');\n  }\n\n  const { data: [{ value: { value: packageQuery } }] } = await deep.select({ id: newLink.to_id });\n  const packageQueryParts = packageQuery.split('@');\n  if (packageQueryParts.length === 3) {\n    const packageVersion = packageQueryParts.pop();\n  }\n  const packageName = packageQueryParts.join('@');\n  if (!packageName) {\n    throw new Error('Package query value is empty.');\n  }\n  const tempDirectory = await makeTempDirectory();\n  let deepJson;\n  let packageJson;\n  const installationQueue = [];\n  const installationSet = {};\n  try {\n    const npmToken = await loadNpmToken();\n    if (npmToken) {\n      await npmLogin(npmToken, tempDirectory);\n    }\n    const nodeModulesPath = [tempDirectory, 'node_modules'].join('/');\n    await npmInstall(packageQuery, tempDirectory);\n    const packagePath = makePackagePath(tempDirectory, packageName);\n    const deepJsonPath = makeDeepJsonPath(packagePath);\n    const packageJsonPath = makePackageJsonPath(packagePath);\n    deepJson = await deep.import(deepJsonPath);\n    packageJson = await deep.import(packageJsonPath);\n\n    const packages = await getDeepPackagesList(nodeModulesPath);\n    console.log('packages', packages);\n    \n    const deepPackagesDependencies = await getDeepPackagesDependencies(nodeModulesPath, packages, packageName);\n    delete deepPackagesDependencies[packageName];\n    console.log('deepPackagesDependencies', deepPackagesDependencies);\n    \n    buildInstallationQueue(deepPackagesDependencies, installationQueue, installationSet);\n    \n    console.log('installationQueue', installationQueue);\n    console.log('installationSet', installationSet);\n  } finally {\n    fs.rmSync(tempDirectory, { recursive: true, force: true });\n  }\n  \n  const existingPackages = await getExistingPackages(installationQueue.map(e => e.name));\n  console.log('existingPackages', existingPackages);\n\n  for (const dependencyPackage of installationQueue) {\n    const dependencyPackageName = dependencyPackage.name;\n    const existingPackage = existingPackages[dependencyPackageName];\n    if (existingPackage) {\n      await deep.insert({\n        type_id: await deep.id('@deep-foundation/npm-packager', 'Used'),\n        from_id: newLink.id,\n        to_id: existingPackage.id,\n      });\n    } else {\n      const importedDependency = await deepImport(dependencyPackage.deepJson, dependencyPackage.packageJson);\n      if (importedDependency?.errors?.length > 0 || !importedDependency?.packageId) {\n        console.log(`Unable to install dependency ${dependencyPackageName}.`, importedDependency);\n        throw new Error(`Unable to install dependency ${dependencyPackageName}.`);\n      }\n      await deep.insert({\n        type_id: await deep.id('@deep-foundation/npm-packager', 'Installed'),\n        from_id: newLink.id,\n        to_id: importedDependency.packageId,\n      });\n      // TODO: Should it be inserted?\n      // await deep.insert({\n      //   type_id: await deep.id('@deep-foundation/core', 'Contain'),\n      //   from_id: newLink.from_id,\n      //   to_id: importedDependency.packageId,\n      // });\n    }\n  }\n\n  const imported = await deepImport(deepJson, packageJson);\n  await deep.insert({\n    type_id: await deep.id('@deep-foundation/core', 'Contain'),\n    from_id: newLink.from_id,\n    to_id: imported.packageId,\n  });\n  await deep.insert({\n    type_id: await deep.id('@deep-foundation/npm-packager', 'Installed'),\n    from_id: newLink.id,\n    to_id: imported.packageId,\n  });\n  return imported;\n}",
          "link_id": 746
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 853,
      "src_id": 798,
      "handler_id": 799,
      "execution_provider_id": 33,
      "isolation_provider_id": 144,
      "dist": {
        "id": 853,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 347,
          "value": "({ deep, require }) => {\n    const React = require('react');\n    const { useState } = React;\n    const json5 = require('json5');\n    const { useContainer, CytoEditorPreview } = require('@deep-foundation/deepcase');\n    const { Box, SimpleGrid } = require('@chakra-ui/react');\n    return ({ fillSize, style, link }) => {\n        const currentValue = deep.stringify(link?.value?.value) || '';\n        const [value, setValue] = useState(currentValue);\n        const isSaved = value == currentValue;\n        const [container] = useContainer();\n        const { data } = deep.useDeepSubscription({\n            type_id: { _in: [\n                    deep.idLocal('@deep-foundation/core', 'Active'),\n                    deep.idLocal('@deep-foundation/core', 'Contain'),\n                ] },\n            to_id: { _eq: link.id },\n        });\n        const contain = data?.find(l => l.type_id === deep.idLocal('@deep-foundation/core', 'Contain'));\n        const active = data?.find(l => l.type_id === deep.idLocal('@deep-foundation/core', 'Active'));\n        return React.createElement(\"div\", { style: {\n                width: 600,\n                height: 600,\n                ...style,\n                position: 'relative',\n            } },\n            React.createElement(CytoEditorPreview, { link: link, compact: true }));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxDQUFDLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxFQUFFLEVBQUU7SUFDcEIsTUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQy9CLE1BQU0sRUFBRSxRQUFRLEVBQUUsR0FBRyxLQUFLLENBQUM7SUFDM0IsTUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQy9CLE1BQU0sRUFBRSxZQUFZLEVBQUUsaUJBQWlCLEVBQUUsR0FBRyxPQUFPLENBQUMsMkJBQTJCLENBQUMsQ0FBQztJQUNqRixNQUFNLEVBQUUsR0FBRyxFQUFFLFVBQVUsRUFBRSxHQUFHLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBRXhELE9BQU8sQ0FBQyxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRTtRQUNuQyxNQUFNLFlBQVksR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksRUFBRSxLQUFLLEVBQUUsS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDO1FBQzlELE1BQU0sQ0FBQyxLQUFLLEVBQUUsUUFBUSxDQUFDLEdBQUcsUUFBUSxDQUFDLFlBQVksQ0FBQyxDQUFDO1FBQ2pELE1BQU0sT0FBTyxHQUFHLEtBQUssSUFBSSxZQUFZLENBQUM7UUFDdEMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxHQUFHLFlBQVksRUFBRSxDQUFDO1FBQ25DLE1BQU0sRUFBRSxJQUFJLEVBQUUsR0FBRyxJQUFJLENBQUMsbUJBQW1CLENBQUM7WUFDeEMsT0FBTyxFQUFFLEVBQUUsR0FBRyxFQUFFO29CQUNkLElBQUksQ0FBQyxPQUFPLENBQUMsdUJBQXVCLEVBQUUsUUFBUSxDQUFDO29CQUMvQyxJQUFJLENBQUMsT0FBTyxDQUFDLHVCQUF1QixFQUFFLFNBQVMsQ0FBQztpQkFDakQsRUFBRTtZQUNILEtBQUssRUFBRSxFQUFFLEdBQUcsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1NBQ3hCLENBQUMsQ0FBQztRQUNILE1BQU0sT0FBTyxHQUFHLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxLQUFLLElBQUksQ0FBQyxPQUFPLENBQUMsdUJBQXVCLEVBQUUsU0FBUyxDQUFDLENBQUMsQ0FBQTtRQUMvRixNQUFNLE1BQU0sR0FBRyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sS0FBSyxJQUFJLENBQUMsT0FBTyxDQUFDLHVCQUF1QixFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUE7UUFDN0YsT0FBTyw2QkFDTCxLQUFLLEVBQUU7Z0JBQ0wsS0FBSyxFQUFFLEdBQUc7Z0JBQ1YsTUFBTSxFQUFFLEdBQUc7Z0JBQ1gsR0FBRyxLQUFLO2dCQUNSLFFBQVEsRUFBRSxVQUFVO2FBQ3JCO1lBRUQsb0JBQUMsaUJBQWlCLElBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxPQUFPLFNBQUUsQ0FDcEMsQ0FBQztJQUNULENBQUMsQ0FBQTtBQUNILENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbIih7IGRlZXAsIHJlcXVpcmUgfSkgPT4ge1xuICBjb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG4gIGNvbnN0IHsgdXNlU3RhdGUgfSA9IFJlYWN0O1xuICBjb25zdCBqc29uNSA9IHJlcXVpcmUoJ2pzb241Jyk7XG4gIGNvbnN0IHsgdXNlQ29udGFpbmVyLCBDeXRvRWRpdG9yUHJldmlldyB9ID0gcmVxdWlyZSgnQGRlZXAtZm91bmRhdGlvbi9kZWVwY2FzZScpO1xuICBjb25zdCB7IEJveCwgU2ltcGxlR3JpZCB9ID0gcmVxdWlyZSgnQGNoYWtyYS11aS9yZWFjdCcpO1xuICAvLyBPbmx5IG9iamVjdHMgZWRpdG9yLlxuICByZXR1cm4gKHsgZmlsbFNpemUsIHN0eWxlLCBsaW5rIH0pID0+IHtcbiAgICBjb25zdCBjdXJyZW50VmFsdWUgPSBkZWVwLnN0cmluZ2lmeShsaW5rPy52YWx1ZT8udmFsdWUpIHx8ICcnO1xuICAgIGNvbnN0IFt2YWx1ZSwgc2V0VmFsdWVdID0gdXNlU3RhdGUoY3VycmVudFZhbHVlKTtcbiAgICBjb25zdCBpc1NhdmVkID0gdmFsdWUgPT0gY3VycmVudFZhbHVlO1xuICAgIGNvbnN0IFtjb250YWluZXJdID0gdXNlQ29udGFpbmVyKCk7XG4gICAgY29uc3QgeyBkYXRhIH0gPSBkZWVwLnVzZURlZXBTdWJzY3JpcHRpb24oe1xuICAgICAgdHlwZV9pZDogeyBfaW46IFtcbiAgICAgICAgZGVlcC5pZExvY2FsKCdAZGVlcC1mb3VuZGF0aW9uL2NvcmUnLCAnQWN0aXZlJyksXG4gICAgICAgIGRlZXAuaWRMb2NhbCgnQGRlZXAtZm91bmRhdGlvbi9jb3JlJywgJ0NvbnRhaW4nKSxcbiAgICAgIF0gfSxcbiAgICAgIHRvX2lkOiB7IF9lcTogbGluay5pZCB9LFxuICAgIH0pO1xuICAgIGNvbnN0IGNvbnRhaW4gPSBkYXRhPy5maW5kKGwgPT4gbC50eXBlX2lkID09PSBkZWVwLmlkTG9jYWwoJ0BkZWVwLWZvdW5kYXRpb24vY29yZScsICdDb250YWluJykpXG4gICAgY29uc3QgYWN0aXZlID0gZGF0YT8uZmluZChsID0+IGwudHlwZV9pZCA9PT0gZGVlcC5pZExvY2FsKCdAZGVlcC1mb3VuZGF0aW9uL2NvcmUnLCAnQWN0aXZlJykpXG4gICAgcmV0dXJuIDxkaXZcbiAgICAgIHN0eWxlPXt7XG4gICAgICAgIHdpZHRoOiA2MDAsXG4gICAgICAgIGhlaWdodDogNjAwLFxuICAgICAgICAuLi5zdHlsZSxcbiAgICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gICAgICB9fVxuICAgID5cbiAgICAgIDxDeXRvRWRpdG9yUHJldmlldyBsaW5rPXtsaW5rfSBjb21wYWN0Lz5cbiAgICA8L2Rpdj47XG4gIH1cbn0iXX0=",
          "link_id": 853
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 862,
      "src_id": 802,
      "handler_id": 803,
      "execution_provider_id": 33,
      "isolation_provider_id": 144,
      "dist": {
        "id": 862,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 353,
          "value": "({ deep, require }) => {\n    const React = require('react');\n    const { useState, useEffect } = React;\n    const json5 = require('json5');\n    const { useContainer, Resize, CustomizableIcon } = require('@deep-foundation/deepcase');\n    const MonacoEditor = require('@monaco-editor/react');\n    const { Box, IconButton, useColorModeValue, useColorMode } = require('@chakra-ui/react');\n    const { BsCheck2, BsLightbulbFill, BsLightbulbOff } = require('react-icons/bs');\n    const { motion, useAnimation } = require('framer-motion');\n    const variants = {\n        view: {\n            opacity: 1,\n            scale: 1,\n            transition: {\n                duration: 1,\n                delay: 0.3,\n                scale: { delay: 0.5, }\n            }\n        },\n        hide: {\n            opacity: 0,\n            scale: 0,\n            transition: {\n                type: 'spring'\n            }\n        },\n        initial: {\n            originX: 1,\n            opacity: 1,\n            scale: 1,\n        }\n    };\n    const stackVariants = {\n        outside: {\n            x: '0%',\n            opacity: 1,\n            scale: 1,\n            originX: 0,\n            transition: {\n                type: 'spring',\n                duration: 0.5,\n                delay: 0.2,\n                scale: { delay: 0.3, }\n            }\n        },\n        nested: {\n            x: '-100%',\n            opacity: 1,\n            scale: 1,\n            originX: 1,\n            transition: {\n                type: 'spring',\n                duration: 0.5,\n                delay: 0.2,\n                scale: { delay: 0.3, }\n            }\n        },\n        initial: {\n            x: '0%',\n            opacity: 0,\n            scale: 0,\n        }\n    };\n    return ({ fillSize, style, link }) => {\n        const currentValue = deep.stringify(link?.value?.value) || '';\n        const [value, setValue] = useState(currentValue);\n        const isSaved = value == currentValue;\n        const [container] = useContainer();\n        const { data } = deep.useDeepSubscription({\n            type_id: { _in: [\n                    deep.idLocal('@deep-foundation/core', 'Active'),\n                    deep.idLocal('@deep-foundation/core', 'Contain'),\n                ] },\n            to_id: { _eq: link.id },\n        });\n        const contain = data?.find(l => l.type_id === deep.idLocal('@deep-foundation/core', 'Contain'));\n        const active = data?.find(l => l.type_id === deep.idLocal('@deep-foundation/core', 'Active'));\n        const [viewSize, setViewSize] = useState({ width: 300, height: 300 });\n        const terminalBorderWidth = viewSize.width - 1;\n        const terminalBorderHeight = viewSize.height - 1;\n        const control = useAnimation();\n        const controlStack = useAnimation();\n        useEffect(() => {\n            if (value) {\n                control.start('view');\n            }\n            else {\n                control.start('hide');\n            }\n            ;\n            if (fillSize === true) {\n                controlStack.start('nested');\n            }\n            else {\n                controlStack.start('outside');\n            }\n            ;\n        }, [control, controlStack, value, fillSize]);\n        const { colorMode } = useColorMode();\n        const body = React.createElement(\"div\", { style: {\n                width: viewSize.width,\n                height: viewSize.height,\n                ...style,\n                position: 'relative',\n            } },\n            React.createElement(Box, { position: 'relative', display: 'grid', gridTemplateColumns: '1fr max-content', height: 'inherit' },\n                React.createElement(Box, { position: 'relative', overflow: 'hidden', sx: { borderRadius: 5 }, border: '1px dashed #605c60' },\n                    React.createElement(MonacoEditor, { options: {\n                            minimap: {\n                                enabled: false\n                            },\n                            lineNumbers: 'off',\n                            wordWrap: true,\n                        }, height: \"100%\", width: \"100%\", theme: colorMode === 'light' ? 'light' : \"vs-dark\", defaultLanguage: \"json\", defaultValue: value || '', onChange: (value) => setValue(value) })),\n                React.createElement(Box, { as: motion.div, animate: controlStack, variants: stackVariants, initial: 'initial', height: fillSize ? '100%' : viewSize.height, display: 'flex', justifyContent: 'space-between', flexDirection: 'column', ml: fillSize ? 0 : '0.2rem' },\n                    React.createElement(IconButton, { as: motion.div, variants: variants, initial: 'initial', animate: 'view', \"aria-label\": 'activate/inactivate button', bg: active && colorMode === 'dark' ? 'gray.700' : 'blue.50', _hover: {\n                            bg: 'blue.100'\n                        }, isRound: true, variant: 'outline', sx: { borderColor: active ? '#111' : 'rgb(0, 128, 255)' }, mr: fillSize ? '0.2rem' : 0, mt: fillSize ? '0.2rem' : 0, size: 'xs', onClick: async () => {\n                            if (active) {\n                                await deep.delete({\n                                    _or: [{\n                                            id: { _eq: active?.id },\n                                        }, {\n                                            type_id: deep.idLocal('@deep-foundation/core', 'Contain'),\n                                            from_id: link.id,\n                                            to_id: active.id,\n                                        }],\n                                });\n                            }\n                            else {\n                                await deep.insert({\n                                    type_id: deep.idLocal('@deep-foundation/core', 'Active'),\n                                    from_id: contain.from_id,\n                                    to_id: contain.to_id,\n                                    in: { data: {\n                                            type_id: deep.idLocal('@deep-foundation/core', 'Contain'),\n                                            from_id: link.id,\n                                        } },\n                                });\n                            }\n                        }, icon: active ? React.createElement(BsLightbulbOff, null) : React.createElement(CustomizableIcon, { Component: BsLightbulbFill, value: { color: 'rgb(0, 128, 255)' } }) }),\n                    React.createElement(IconButton, { as: motion.div, variants: variants, initial: 'initial', animate: control, whileInView: 'view', \"aria-label\": 'save button', isRound: true, bg: 'blue.50', _hover: {\n                            bg: 'blue.100'\n                        }, variant: 'outline', sx: { borderColor: 'rgb(0, 128, 255)' }, mr: fillSize ? '0.2rem' : 0, mb: fillSize ? '0.2rem' : 0, size: 'xs', icon: React.createElement(CustomizableIcon, { Component: BsCheck2, value: { color: 'rgb(0, 128, 255)' } }), onClick: () => {\n                            try {\n                                const _value = json5.parse(value);\n                                if (!link.value)\n                                    deep.insert({\n                                        link_id: link.id, value: _value,\n                                    }, { table: 'objects' });\n                                deep.update({ link_id: link.id }, { value: _value }, { table: 'objects' });\n                            }\n                            catch (error) { }\n                        } }))));\n        return React.createElement(React.Fragment, null, fillSize\n            ? body\n            : React.createElement(Resize, { onChangeSize: (viewSize) => setViewSize(viewSize), style: {\n                    borderRadius: 5,\n                    border: 'none',\n                } }, body));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxDQUFDLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxFQUFFLEVBQUU7SUFDbEIsTUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQy9CLE1BQU0sRUFBRSxRQUFRLEVBQUUsU0FBUyxFQUFFLEdBQUcsS0FBSyxDQUFDO0lBQ3RDLE1BQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUMvQixNQUFNLEVBQUUsWUFBWSxFQUFFLE1BQU0sRUFBRSxnQkFBZ0IsRUFBRSxHQUFHLE9BQU8sQ0FBQywyQkFBMkIsQ0FBQyxDQUFDO0lBQ3hGLE1BQU0sWUFBWSxHQUFHLE9BQU8sQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO0lBQ3JELE1BQU0sRUFBRSxHQUFHLEVBQUUsVUFBVSxFQUFFLGlCQUFpQixFQUFFLFlBQVksRUFBRSxHQUFHLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBQ3pGLE1BQU0sRUFBRSxRQUFRLEVBQUUsZUFBZSxFQUFFLGNBQWMsRUFBRSxHQUFHLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0lBQ2hGLE1BQU0sRUFBRSxNQUFNLEVBQUUsWUFBWSxFQUFFLEdBQUcsT0FBTyxDQUFDLGVBQWUsQ0FBQyxDQUFDO0lBRTFELE1BQU0sUUFBUSxHQUFHO1FBQ2YsSUFBSSxFQUFFO1lBQ0osT0FBTyxFQUFFLENBQUM7WUFDVixLQUFLLEVBQUUsQ0FBQztZQUNSLFVBQVUsRUFBRTtnQkFDVixRQUFRLEVBQUUsQ0FBQztnQkFDWCxLQUFLLEVBQUUsR0FBRztnQkFDVixLQUFLLEVBQUUsRUFBRSxLQUFLLEVBQUUsR0FBRyxHQUFHO2FBQ3ZCO1NBQ0Y7UUFDRCxJQUFJLEVBQUU7WUFDSixPQUFPLEVBQUUsQ0FBQztZQUNWLEtBQUssRUFBRSxDQUFDO1lBQ1IsVUFBVSxFQUFF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LE9BQU8sRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLENBQUMsQ0FBQzs0QkFDN0UsQ0FBQzs0QkFBQyxPQUFNLEtBQUssRUFBRSxDQUFDLENBQUEsQ0FBQzt3QkFDbkIsQ0FBQyxHQUNELENBQ0UsQ0FDRixDQUNGLENBQUM7UUFFVCxPQUFRLDBDQUNMLFFBQVE7WUFDVCxDQUFDLENBQUMsSUFBSTtZQUNOLENBQUMsQ0FBQyxvQkFBQyxNQUFNLElBQ0wsWUFBWSxFQUFFLENBQUMsUUFBUSxFQUFFLEVBQUUsQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLEVBQ2pELEtBQUssRUFBRTtvQkFHUCxZQUFZLEVBQUUsQ0FBQztvQkFDZixNQUFNLEVBQUUsTUFBTTtpQkFDZixJQUNELElBQUksQ0FBVSxDQUNmLENBQUM7SUFDTixDQUFDLENBQUE7QUFDSCxDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIoeyBkZWVwLCByZXF1aXJlIH0pID0+IHtcbiAgICBjb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG4gICAgY29uc3QgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gPSBSZWFjdDtcbiAgICBjb25zdCBqc29uNSA9IHJlcXVpcmUoJ2pzb241Jyk7XG4gICAgY29uc3QgeyB1c2VDb250YWluZXIsIFJlc2l6ZSwgQ3VzdG9taXphYmxlSWNvbiB9ID0gcmVxdWlyZSgnQGRlZXAtZm91bmRhdGlvbi9kZWVwY2FzZScpO1xuICAgIGNvbnN0IE1vbmFjb0VkaXRvciA9IHJlcXVpcmUoJ0Btb25hY28tZWRpdG9yL3JlYWN0Jyk7XG4gICAgY29uc3QgeyBCb3gsIEljb25CdXR0b24sIHVzZUNvbG9yTW9kZVZhbHVlLCB1c2VDb2xvck1vZGUgfSA9IHJlcXVpcmUoJ0BjaGFrcmEtdWkvcmVhY3QnKTtcbiAgICBjb25zdCB7IEJzQ2hlY2syLCBCc0xpZ2h0YnVsYkZpbGwsIEJzTGlnaHRidWxiT2ZmIH0gPSByZXF1aXJlKCdyZWFjdC1pY29ucy9icycpO1xuICAgIGNvbnN0IHsgbW90aW9uLCB1c2VBbmltYXRpb24gfSA9IHJlcXVpcmUoJ2ZyYW1lci1tb3Rpb24nKTtcblxuICAgIGNvbnN0IHZhcmlhbnRzID0ge1xuICAgICAgdmlldzoge1xuICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICBzY2FsZTogMSxcbiAgICAgICAgdHJhbnNpdGlvbjoge1xuICAgICAgICAgIGR1cmF0aW9uOiAxLFxuICAgICAgICAgIGRlbGF5OiAwLjMsXG4gICAgICAgICAgc2NhbGU6IHsgZGVsYXk6IDAuNSwgfSBcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGhpZGU6IHtcbiAgICAgICAgb3BhY2l0eTogMCwgXG4gICAgICAgIHNjYWxlOiAwLFxuICAgICAgICB0cmFuc2l0aW9uOiB7XG4gICAgICAgICAgdHlwZTogJ3NwcmluZydcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGluaXRpYWw6IHtcbiAgICAgICAgb3JpZ2luWDogMSxcbiAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgc2NhbGU6IDEsXG4gICAgICB9XG4gICAgfTtcbiAgXG4gICAgY29uc3Qgc3RhY2tWYXJpYW50cyA9IHtcbiAgICAgIG91dHNpZGU6IHtcbiAgICAgICAgeDogJzAlJyxcbiAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgc2NhbGU6IDEsXG4gICAgICAgIG9yaWdpblg6IDAsXG4gICAgICAgIHRyYW5zaXRpb246IHtcbiAgICAgICAgICB0eXBlOiAnc3ByaW5nJyxcblxuICAgICAgICAgIGR1cmF0aW9uOiAwLjUsXG4gICAgICAgICAgZGVsYXk6IDAuMixcbiAgICAgICAgICBzY2FsZTogeyBkZWxheTogMC4zLCB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBuZXN0ZWQ6IHtcbiAgICAgICAgeDogJy0xMDAlJyxcbiAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgc2NhbGU6IDEsXG4gICAgICAgIG9yaWdpblg6IDEsXG4gICAgICAgIHRyYW5zaXRpb246IHtcbiAgICAgICAgICB0eXBlOiAnc3ByaW5nJyxcbiAgICAgICAgICBkdXJhdGlvbjogMC41LFxuICAgICAgICAgIGRlbGF5OiAwLjIsXG4gICAgICAgICAgc2NhbGU6IHsgZGVsYXk6IDAuMywgfVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgaW5pdGlhbDoge1xuICAgICAgICB4OiAnMCUnLFxuICAgICAgICBvcGFjaXR5OiAwLFxuICAgICAgICBzY2FsZTogMCxcbiAgICAgIH1cbiAgICB9O1xuICAgIFxuICAgIC8vIE9ubHkgb2JqZWN0cyBlZGl0b3IuXG4gICAgcmV0dXJuICh7IGZpbGxTaXplLCBzdHlsZSwgbGluayB9KSA9PiB7XG4gICAgICBjb25zdCBjdXJyZW50VmFsdWUgPSBkZWVwLnN0cmluZ2lmeShsaW5rPy52YWx1ZT8udmFsdWUpIHx8ICcnO1xuICAgICAgY29uc3QgW3ZhbHVlLCBzZXRWYWx1ZV0gPSB1c2VTdGF0ZShjdXJyZW50VmFsdWUpO1xuICAgICAgY29uc3QgaXNTYXZlZCA9IHZhbHVlID09IGN1cnJlbnRWYWx1ZTtcbiAgICAgIGNvbnN0IFtjb250YWluZXJdID0gdXNlQ29udGFpbmVyKCk7XG4gICAgICBjb25zdCB7IGRhdGEgfSA9IGRlZXAudXNlRGVlcFN1YnNjcmlwdGlvbih7XG4gICAgICAgIHR5cGVfaWQ6IHsgX2luOiBbXG4gICAgICAgICAgZGVlcC5pZExvY2FsKCdAZGVlcC1mb3VuZGF0aW9uL2NvcmUnLCAnQWN0aXZlJyksXG4gICAgICAgICAgZGVlcC5pZExvY2FsKCdAZGVlcC1mb3VuZGF0aW9uL2NvcmUnLCAnQ29udGFpbicpLFxuICAgICAgICBdIH0sXG4gICAgICAgIHRvX2lkOiB7IF9lcTogbGluay5pZCB9LFxuICAgICAgfSk7XG4gICAgICBjb25zdCBjb250YWluID0gZGF0YT8uZmluZChsID0+IGwudHlwZV9pZCA9PT0gZGVlcC5pZExvY2FsKCdAZGVlcC1mb3VuZGF0aW9uL2NvcmUnLCAnQ29udGFpbicpKVxuICAgICAgY29uc3QgYWN0aXZlID0gZGF0YT8uZmluZChsID0+IGwudHlwZV9pZCA9PT0gZGVlcC5pZExvY2FsKCdAZGVlcC1mb3VuZGF0aW9uL2NvcmUnLCAnQWN0aXZlJykpXG5cbiAgICAgIGNvbnN0IFt2aWV3U2l6ZSwgc2V0Vmlld1NpemVdID0gdXNlU3RhdGUoe3dpZHRoOiAzMDAsIGhlaWdodDogMzAwfSk7XG4gICAgICBjb25zdCB0ZXJtaW5hbEJvcmRlcldpZHRoID0gdmlld1NpemUud2lkdGggLSAxO1xuICAgICAgY29uc3QgdGVybWluYWxCb3JkZXJIZWlnaHQgPSB2aWV3U2l6ZS5oZWlnaHQgLSAxO1xuXG4gICAgICBjb25zdCBjb250cm9sID0gdXNlQW5pbWF0aW9uKCk7XG4gICAgICBjb25zdCBjb250cm9sU3RhY2sgPSB1c2VBbmltYXRpb24oKTtcblxuICAgICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgY29udHJvbC5zdGFydCgndmlldycpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29udHJvbC5zdGFydCgnaGlkZScpXG4gICAgICAgIH07XG4gICAgICAgIGlmIChmaWxsU2l6ZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgIGNvbnRyb2xTdGFjay5zdGFydCgnbmVzdGVkJylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBjb250cm9sU3RhY2suc3RhcnQoJ2luaXRpYWwnKVxuICAgICAgICAgIGNvbnRyb2xTdGFjay5zdGFydCgnb3V0c2lkZScpXG4gICAgICAgIH07XG5cbiAgICAgIH0sIFtjb250cm9sLCBjb250cm9sU3RhY2ssIHZhbHVlLCBmaWxsU2l6ZV0pXG5cbiAgICAgIGNvbnN0IHsgY29sb3JNb2RlIH0gPSB1c2VDb2xvck1vZGUoKTtcblxuICAgICAgY29uc3QgYm9keSA9IDxkaXZcbiAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgd2lkdGg6IHZpZXdTaXplLndpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0OiB2aWV3U2l6ZS5oZWlnaHQsXG4gICAgICAgICAgICAuLi5zdHlsZSxcbiAgICAgICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgICAgICAgIH19XG4gICAgICAgID5cbiAgICAgICAgICA8Qm94IFxuICAgICAgICAgICAgcG9zaXRpb249J3JlbGF0aXZlJ1xuICAgICAgICAgICAgZGlzcGxheT0nZ3JpZCcgXG4gICAgICAgICAgICBncmlkVGVtcGxhdGVDb2x1bW5zPScxZnIgbWF4LWNvbnRlbnQnIFxuICAgICAgICAgICAgaGVpZ2h0PSdpbmhlcml0J1xuICAgICAgICAgID5cbiAgICAgICAgICAgIDxCb3hcbiAgICAgICAgICAgICAgcG9zaXRpb249J3JlbGF0aXZlJ1xuICAgICAgICAgICAgICBvdmVyZmxvdz0naGlkZGVuJyBzeD17eyBib3JkZXJSYWRpdXM6IDUgfX1cbiAgICAgICAgICAgICAgYm9yZGVyPScxcHggZGFzaGVkICM2MDVjNjAnXG4gICAgICAgICAgICA+IFxuICAgICAgICAgICAgICA8TW9uYWNvRWRpdG9yXG4gICAgICAgICAgICAgICAgb3B0aW9ucz17e1xuICAgICAgICAgICAgICAgICAgbWluaW1hcDoge1xuICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIGxpbmVOdW1iZXJzOiAnb2ZmJyxcbiAgICAgICAgICAgICAgICAgIHdvcmRXcmFwOiB0cnVlLFxuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgaGVpZ2h0PVwiMTAwJVwiXG4gICAgICAgICAgICAgICAgd2lkdGg9XCIxMDAlXCJcbiAgICAgICAgICAgICAgICB0aGVtZT17Y29sb3JNb2RlID09PSAnbGlnaHQnID8gJ2xpZ2h0JyA6IFwidnMtZGFya1wifVxuICAgICAgICAgICAgICAgIGRlZmF1bHRMYW5ndWFnZT1cImpzb25cIlxuICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT17dmFsdWUgfHwgJyd9XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4gc2V0VmFsdWUodmFsdWUpfVxuICAgICAgICAgICAgICAgIC8vIG9uTW91bnQ9e2hhbmRsZUVkaXRvckRpZE1vdW50fVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9Cb3g+XG4gICAgICAgICAgICA8Qm94XG4gICAgICAgICAgICAgIGFzPXttb3Rpb24uZGl2fVxuICAgICAgICAgICAgICBhbmltYXRlPXtjb250cm9sU3RhY2t9XG4gICAgICAgICAgICAgIHZhcmlhbnRzPXtzdGFja1ZhcmlhbnRzfVxuICAgICAgICAgICAgICBpbml0aWFsPSdpbml0aWFsJ1xuICAgICAgICAgICAgICAvLyBoZWlnaHQ9e3N0YWNrSGVpZ2h0fVxuICAgICAgICAgICAgICBoZWlnaHQ9e2ZpbGxTaXplID8gJzEwMCUnIDogdmlld1NpemUuaGVpZ2h0fVxuICAgICAgICAgICAgICBkaXNwbGF5PSdmbGV4J1xuICAgICAgICAgICAgICBqdXN0aWZ5Q29udGVudD0nc3BhY2UtYmV0d2VlbidcbiAgICAgICAgICAgICAgZmxleERpcmVjdGlvbj0nY29sdW1uJ1xuICAgICAgICAgICAgICBtbD17ZmlsbFNpemUgPyAwIDogJzAuMnJlbSd9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxJY29uQnV0dG9uIFxuICAgICAgICAgICAgICAgIGFzPXttb3Rpb24uZGl2fVxuICAgICAgICAgICAgICAgIHZhcmlhbnRzPXt2YXJpYW50c31cbiAgICAgICAgICAgICAgICBpbml0aWFsPSdpbml0aWFsJ1xuICAgICAgICAgICAgICAgIC8vIHdoaWxlSW5WaWV3PSd2aWV3J1xuICAgICAgICAgICAgICAgIGFuaW1hdGU9J3ZpZXcnXG4gICAgICAgICAgICAgICAgYXJpYS1sYWJlbD0nYWN0aXZhdGUvaW5hY3RpdmF0ZSBidXR0b24nIFxuICAgICAgICAgICAgICAgIGJnPXthY3RpdmUgJiYgY29sb3JNb2RlID09PSAnZGFyaycgPyAnZ3JheS43MDAnIDogJ2JsdWUuNTAnfVxuICAgICAgICAgICAgICAgIF9ob3Zlcj17e1xuICAgICAgICAgICAgICAgICAgYmc6ICdibHVlLjEwMCdcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIGlzUm91bmRcbiAgICAgICAgICAgICAgICB2YXJpYW50PSdvdXRsaW5lJ1xuICAgICAgICAgICAgICAgIHN4PXt7IGJvcmRlckNvbG9yOiBhY3RpdmUgPyAnIzExMScgOiAncmdiKDAsIDEyOCwgMjU1KScgfX1cbiAgICAgICAgICAgICAgICBtcj17ZmlsbFNpemUgPyAnMC4ycmVtJyA6IDB9XG4gICAgICAgICAgICAgICAgbXQ9e2ZpbGxTaXplID8gJzAuMnJlbScgOiAwfVxuICAgICAgICAgICAgICAgIHNpemU9J3hzJ1xuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2FzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFjdGl2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGRlZXAuZGVsZXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9vcjogW3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHsgX2VxOiBhY3RpdmU/LmlkIH0sXG4gICAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlX2lkOiBkZWVwLmlkTG9jYWwoJ0BkZWVwLWZvdW5kYXRpb24vY29yZScsICdDb250YWluJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBmcm9tX2lkOiBsaW5rLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG9faWQ6IGFjdGl2ZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICB9XSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGRlZXAuaW5zZXJ0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVfaWQ6IGRlZXAuaWRMb2NhbCgnQGRlZXAtZm91bmRhdGlvbi9jb3JlJywgJ0FjdGl2ZScpLFxuICAgICAgICAgICAgICAgICAgICAgIGZyb21faWQ6IGNvbnRhaW4uZnJvbV9pZCxcbiAgICAgICAgICAgICAgICAgICAgICB0b19pZDogY29udGFpbi50b19pZCxcbiAgICAgICAgICAgICAgICAgICAgICBpbjogeyBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVfaWQ6IGRlZXAuaWRMb2NhbCgnQGRlZXAtZm91bmRhdGlvbi9jb3JlJywgJ0NvbnRhaW4nKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyb21faWQ6IGxpbmsuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgfSB9LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIGljb249e2FjdGl2ZSA/IDxCc0xpZ2h0YnVsYk9mZiAvPiA6IDxDdXN0b21pemFibGVJY29uIENvbXBvbmVudD17QnNMaWdodGJ1bGJGaWxsfSB2YWx1ZT17eyBjb2xvcjogJ3JnYigwLCAxMjgsIDI1NSknIH19IC8+fVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8SWNvbkJ1dHRvbiBcbiAgICAgICAgICAgICAgICBhcz17bW90aW9uLmRpdn1cbiAgICAgICAgICAgICAgICB2YXJpYW50cz17dmFyaWFudHN9XG4gICAgICAgICAgICAgICAgaW5pdGlhbD0naW5pdGlhbCdcbiAgICAgICAgICAgICAgICBhbmltYXRlPXtjb250cm9sfVxuICAgICAgICAgICAgICAgIHdoaWxlSW5WaWV3PSd2aWV3J1xuICAgICAgICAgICAgICAgIC8vIGlzRGlzYWJsZWQ9e2lzU2F2ZWR9XG4gICAgICAgICAgICAgICAgYXJpYS1sYWJlbD0nc2F2ZSBidXR0b24nIFxuICAgICAgICAgICAgICAgIGlzUm91bmRcbiAgICAgICAgICAgICAgICBiZz0nYmx1ZS41MCdcbiAgICAgICAgICAgICAgICBfaG92ZXI9e3tcbiAgICAgICAgICAgICAgICAgIGJnOiAnYmx1ZS4xMDAnXG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICB2YXJpYW50PSdvdXRsaW5lJ1xuICAgICAgICAgICAgICAgIHN4PXt7IGJvcmRlckNvbG9yOiAncmdiKDAsIDEyOCwgMjU1KScgfX1cbiAgICAgICAgICAgICAgICBtcj17ZmlsbFNpemUgPyAnMC4ycmVtJyA6IDB9XG4gICAgICAgICAgICAgICAgbWI9e2ZpbGxTaXplID8gJzAuMnJlbScgOiAwfVxuICAgICAgICAgICAgICAgIC8vIGlzTG9hZGluZz17IWlzU2F2ZWR9XG4gICAgICAgICAgICAgICAgc2l6ZT0neHMnXG4gICAgICAgICAgICAgICAgaWNvbj17PEN1c3RvbWl6YWJsZUljb24gQ29tcG9uZW50PXtCc0NoZWNrMn0gdmFsdWU9e3sgY29sb3I6ICdyZ2IoMCwgMTI4LCAyNTUpJyB9fSAvPn1cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBfdmFsdWUgPSBqc29uNS5wYXJzZSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghbGluay52YWx1ZSkgZGVlcC5pbnNlcnQoe1xuICAgICAgICAgICAgICAgICAgICAgIGxpbmtfaWQ6IGxpbmsuaWQsIHZhbHVlOiBfdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIH0sIHsgdGFibGU6ICdvYmplY3RzJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgZGVlcC51cGRhdGUoeyBsaW5rX2lkOiBsaW5rLmlkIH0sIHsgdmFsdWU6IF92YWx1ZSB9LCB7IHRhYmxlOiAnb2JqZWN0cycgfSk7XG4gICAgICAgICAgICAgICAgICB9IGNhdGNoKGVycm9yKSB7fVxuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L0JveD5cbiAgICAgICAgICA8L0JveD5cbiAgICAgICAgPC9kaXY+O1xuXG4gICAgICByZXR1cm4gIDw+XG4gICAgICAgIHtmaWxsU2l6ZSBcbiAgICAgICAgPyBib2R5IFxuICAgICAgICA6IDxSZXNpemVcbiAgICAgICAgICAgIG9uQ2hhbmdlU2l6ZT17KHZpZXdTaXplKSA9PiBzZXRWaWV3U2l6ZSh2aWV3U2l6ZSl9IFxuICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgIC8vIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgICAgICAgICAgLy8gb3ZlcmZsb3c6IG5lc3RlZCA/ICdoaWRkZW4nIDogJ2luaGVyaXQnLFxuICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiA1LFxuICAgICAgICAgICAgYm9yZGVyOiAnbm9uZScsXG4gICAgICAgICAgfX1cbiAgICAgICAgPntib2R5fTwvUmVzaXplPn1cbiAgICAgIDwvPjtcbiAgICB9XG4gIH1cbiJdfQ==",
          "link_id": 862
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 871,
      "src_id": 805,
      "handler_id": 806,
      "execution_provider_id": 33,
      "isolation_provider_id": 144,
      "dist": {
        "id": 871,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 358,
          "value": "({ deep, require }) => {\n    const React = require('react');\n    const { useState, useEffect } = React;\n    const json5 = require('json5');\n    const { Input, useColorModeValue } = require('@chakra-ui/react');\n    const { useHotkeys } = require('react-hotkeys-hook');\n    const { useDebounceCallback } = require('@react-hook/debounce');\n    const { useContainer } = require('@deep-foundation/deepcase');\n    return ({ fillSize, style, link, onClose }) => {\n        const currentValue = deep.stringify(link?.value?.value) || '';\n        const [value, setValue] = useState(currentValue);\n        const save = async (value) => {\n            if (!link.value)\n                await deep.insert({\n                    link_id: link.id, value: value,\n                }, { table: 'strings' });\n            deep.update({ link_id: link.id }, { value: value }, { table: 'strings' });\n        };\n        const ref = useHotkeys('enter', async () => {\n            await save(value);\n            onClose && onClose();\n        }, { enableOnTags: [\"INPUT\"] });\n        const setValuesDebounced = useDebounceCallback(async (value) => { await save(value); }, 500);\n        useEffect(() => {\n            setValuesDebounced(value);\n        }, [value]);\n        const bg = useColorModeValue('#eeeeee', '#434343');\n        const hover = useColorModeValue('white', '#1e1e1e');\n        const borderColor = useColorModeValue('#434343', '#eeeeee');\n        const color = useColorModeValue('#1e1e1e', 'white');\n        return React.createElement(\"div\", { style: {\n                width: 300,\n                ...style,\n                position: 'relative',\n            } },\n            React.createElement(Input, { ref: ref, autoFocus: true, type: \"text\", variant: 'filled', variant: 'filled', bg: bg, color: color, borderWidth: 'thin', borderColor: borderColor, _hover: { bg: hover }, _focus: { bg: bg }, sx: {\n                    width: '100%',\n                }, onChange: (e) => setValue(e.target.value), value: value }));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxDQUFDLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxFQUFFLEVBQUU7SUFDaEIsTUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQ2pDLE1BQU0sRUFBRSxRQUFRLEVBQUUsU0FBUyxFQUFFLEdBQUcsS0FBSyxDQUFDO0lBQ3RDLE1BQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUMvQixNQUFNLEVBQUUsS0FBSyxFQUFFLGlCQUFpQixFQUFFLEdBQUcsT0FBTyxDQUFDLGtCQUFrQixDQUFDLENBQUM7SUFDakUsTUFBTSxFQUFFLFVBQVUsRUFBRSxHQUFHLE9BQU8sQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDO0lBQ3JELE1BQU0sRUFBRSxtQkFBbUIsRUFBRSxHQUFHLE9BQU8sQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO0lBQ2hFLE1BQU0sRUFBRSxZQUFZLEVBQUUsR0FBRyxPQUFPLENBQUMsMkJBQTJCLENBQUMsQ0FBQztJQUU5RCxPQUFPLENBQUMsRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFO1FBRzVDLE1BQU0sWUFBWSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxFQUFFLEtBQUssRUFBRSxLQUFLLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDOUQsTUFBTSxDQUFDLEtBQUssRUFBRSxRQUFRLENBQUMsR0FBRyxRQUFRLENBQUMsWUFBWSxDQUFDLENBQUM7UUFDakQsTUFBTSxJQUFJLEdBQUcsS0FBSyxFQUFFLEtBQUssRUFBRSxFQUFFO1lBQ3pCLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSztnQkFBRSxNQUFNLElBQUksQ0FBQyxNQUFNLENBQUM7b0JBQ2pDLE9BQU8sRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFLEtBQUssRUFBRSxLQUFLO2lCQUNqQyxFQUFFLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRSxDQUFDLENBQUM7WUFDekIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFLE9BQU8sRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLENBQUMsQ0FBQztRQUU1RSxDQUFDLENBQUM7UUFDRixNQUFNLEdBQUcsR0FBRyxVQUFVLENBQUMsT0FBTyxFQUFFLEtBQUssSUFBSSxFQUFFO1lBQ3pDLE1BQU0sSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ2xCLE9BQU8sSUFBSSxPQUFPLEVBQUUsQ0FBQztRQUN2QixDQUFDLEVBQUUsRUFBRSxZQUFZLEVBQUUsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLENBQUM7UUFFaEMsTUFBTSxrQkFBa0IsR0FBRyxtQkFBbUIsQ0FBQyxLQUFLLEVBQUMsS0FBSyxFQUFFLEVBQUUsR0FBRSxNQUFNLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQSxDQUFBLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztRQUV6RixTQUFTLENBQUMsR0FBRyxFQUFFO1lBQ2Isa0JBQWtCLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDNUIsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQTtRQUVYLE1BQU0sRUFBRSxHQUFHLGlCQUFpQixDQUFDLFNBQVMsRUFBRSxTQUFTLENBQUMsQ0FBQztRQUNuRCxNQUFNLEtBQUssR0FBRyxpQkFBaUIsQ0FBQyxPQUFPLEVBQUUsU0FBUyxDQUFDLENBQUM7UUFDcEQsTUFBTSxXQUFXLEdBQUcsaUJBQWlCLENBQUMsU0FBUyxFQUFFLFNBQVMsQ0FBQyxDQUFDO1FBQzVELE1BQU0sS0FBSyxHQUFHLGlCQUFpQixDQUFDLFNBQVMsRUFBRSxPQUFPLENBQUMsQ0FBQztRQUV0RCxPQUFPLDZCQUNILEtBQUssRUFBRTtnQkFDTCxLQUFLLEVBQUUsR0FBRztnQkFDVixHQUFHLEtBQUs7Z0JBQ1IsUUFBUSxFQUFFLFVBQVU7YUFFckI7WUFFRCxvQkFBQyxLQUFLLElBQ0osR0FBRyxFQUFFLEdBQUcsRUFDUixTQUFTLFFBQ1QsSUFBSSxFQUFDLE1BQU0sRUFDWCxPQUFPLEVBQUMsUUFBUSxFQUNoQixPQUFPLEVBQUMsUUFBUSxFQUNoQixFQUFFLEVBQUUsRUFBRSxFQUNOLEtBQUssRUFBRSxLQUFLLEVBQ1osV0FBVyxFQUFDLE1BQU0sRUFDbEIsV0FBVyxFQUFFLFdBQVcsRUFDeEIsTUFBTSxFQUFFLEVBQUMsRUFBRSxFQUFFLEtBQUssRUFBQyxFQUNuQixNQUFNLEVBQUUsRUFBQyxFQUFFLEVBQUUsRUFBRSxFQUFDLEVBQ2hCLEVBQUUsRUFBRTtvQkFDRixLQUFLLEVBQUUsTUFBTTtpQkFDZCxFQUNELFFBQVEsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLEVBQ3pDLEtBQUssRUFBRSxLQUFLLEdBQ1osQ0FDRSxDQUFDO0lBQ1QsQ0FBQyxDQUFBO0FBQ0gsQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiKHsgZGVlcCwgcmVxdWlyZSB9KSA9PiB7XG4gICAgICBjb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG4gICAgY29uc3QgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gPSBSZWFjdDtcbiAgICBjb25zdCBqc29uNSA9IHJlcXVpcmUoJ2pzb241Jyk7XG4gICAgY29uc3QgeyBJbnB1dCwgdXNlQ29sb3JNb2RlVmFsdWUgfSA9IHJlcXVpcmUoJ0BjaGFrcmEtdWkvcmVhY3QnKTtcbiAgICBjb25zdCB7IHVzZUhvdGtleXMgfSA9IHJlcXVpcmUoJ3JlYWN0LWhvdGtleXMtaG9vaycpO1xuICAgIGNvbnN0IHsgdXNlRGVib3VuY2VDYWxsYmFjayB9ID0gcmVxdWlyZSgnQHJlYWN0LWhvb2svZGVib3VuY2UnKTtcbiAgICBjb25zdCB7IHVzZUNvbnRhaW5lciB9ID0gcmVxdWlyZSgnQGRlZXAtZm91bmRhdGlvbi9kZWVwY2FzZScpO1xuICAgIC8vIE9ubHkgc3RyaW5nIGVkaXRvci5cbiAgICByZXR1cm4gKHsgZmlsbFNpemUsIHN0eWxlLCBsaW5rLCBvbkNsb3NlIH0pID0+IHtcbiAgICAgIFxuICAgICAgXG4gICAgICBjb25zdCBjdXJyZW50VmFsdWUgPSBkZWVwLnN0cmluZ2lmeShsaW5rPy52YWx1ZT8udmFsdWUpIHx8ICcnO1xuICAgICAgY29uc3QgW3ZhbHVlLCBzZXRWYWx1ZV0gPSB1c2VTdGF0ZShjdXJyZW50VmFsdWUpO1xuICAgICAgY29uc3Qgc2F2ZSA9IGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgIGlmICghbGluay52YWx1ZSkgYXdhaXQgZGVlcC5pbnNlcnQoe1xuICAgICAgICAgICAgbGlua19pZDogbGluay5pZCwgdmFsdWU6IHZhbHVlLFxuICAgICAgICB9LCB7IHRhYmxlOiAnc3RyaW5ncycgfSk7XG4gICAgICAgIGRlZXAudXBkYXRlKHsgbGlua19pZDogbGluay5pZCB9LCB7IHZhbHVlOiB2YWx1ZSB9LCB7IHRhYmxlOiAnc3RyaW5ncycgfSk7XG4gICAgICAgIFxuICAgICAgfTtcbiAgICAgIGNvbnN0IHJlZiA9IHVzZUhvdGtleXMoJ2VudGVyJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCBzYXZlKHZhbHVlKTtcbiAgICAgICAgb25DbG9zZSAmJiBvbkNsb3NlKCk7XG4gICAgICB9LCB7IGVuYWJsZU9uVGFnczogW1wiSU5QVVRcIl0gfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHNldFZhbHVlc0RlYm91bmNlZCA9IHVzZURlYm91bmNlQ2FsbGJhY2soYXN5bmModmFsdWUpID0+IHthd2FpdCBzYXZlKHZhbHVlKX0sIDUwMCk7XG5cbiAgICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIHNldFZhbHVlc0RlYm91bmNlZCh2YWx1ZSk7XG4gICAgICB9LCBbdmFsdWVdKVxuXG4gICAgICBjb25zdCBiZyA9IHVzZUNvbG9yTW9kZVZhbHVlKCcjZWVlZWVlJywgJyM0MzQzNDMnKTtcbiAgICAgIGNvbnN0IGhvdmVyID0gdXNlQ29sb3JNb2RlVmFsdWUoJ3doaXRlJywgJyMxZTFlMWUnKTtcbiAgICAgIGNvbnN0IGJvcmRlckNvbG9yID0gdXNlQ29sb3JNb2RlVmFsdWUoJyM0MzQzNDMnLCAnI2VlZWVlZScpO1xuICAgICAgY29uc3QgY29sb3IgPSB1c2VDb2xvck1vZGVWYWx1ZSgnIzFlMWUxZScsICd3aGl0ZScpO1xuXG4gICAgcmV0dXJuIDxkaXZcbiAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICB3aWR0aDogMzAwLFxuICAgICAgICAgIC4uLnN0eWxlLFxuICAgICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLCBcbiAgICAgICAgICAvLyBiYWNrZ3JvdW5kOiAncmVkJ1xuICAgICAgICB9fVxuICAgICAgPlxuICAgICAgICA8SW5wdXRcbiAgICAgICAgICByZWY9e3JlZn1cbiAgICAgICAgICBhdXRvRm9jdXNcbiAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgdmFyaWFudD0nZmlsbGVkJ1xuICAgICAgICAgIHZhcmlhbnQ9J2ZpbGxlZCdcbiAgICAgICAgICBiZz17Ymd9XG4gICAgICAgICAgY29sb3I9e2NvbG9yfVxuICAgICAgICAgIGJvcmRlcldpZHRoPSd0aGluJ1xuICAgICAgICAgIGJvcmRlckNvbG9yPXtib3JkZXJDb2xvcn1cbiAgICAgICAgICBfaG92ZXI9e3tiZzogaG92ZXJ9fVxuICAgICAgICAgIF9mb2N1cz17e2JnOiBiZ319XG4gICAgICAgICAgc3g9e3tcbiAgICAgICAgICAgIHdpZHRoOiAnMTAwJScsXG4gICAgICAgICAgfX1cbiAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldFZhbHVlKGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICB2YWx1ZT17dmFsdWV9XG4gICAgICAgIC8+XG4gICAgICA8L2Rpdj47XG4gICAgfVxuICB9Il19",
          "link_id": 871
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 880,
      "src_id": 810,
      "handler_id": 811,
      "execution_provider_id": 33,
      "isolation_provider_id": 144,
      "dist": {
        "id": 880,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 365,
          "value": "({ deep, require }) => {\n    const React = require('react');\n    const { useState } = require('react');\n    const axiosHooks = require(\"axios-hooks\");\n    const axios = require(\"axios\");\n    const useAxios = axiosHooks.makeUseAxios({ axios: axios.create() });\n    return ({ fillSize, style, link }) => {\n        const ssl = deep.apolloClient.ssl;\n        const path = deep.apolloClient.path.slice(0, -4);\n        const url = `${ssl ? \"https://\" : \"http://\"}${path}/file?linkId=${link.id}`;\n        const [{ data, loading, error }, refetch] = useAxios({\n            method: 'get',\n            url,\n            headers: {\n                'Authorization': `Bearer ${deep.token}`\n            },\n            responseType: \"blob\",\n        });\n        const [src, setSrc] = useState(\"test\");\n        if (!loading && data) {\n            const reader = new window.FileReader();\n            reader.onload = () => {\n                setSrc(reader.result);\n            };\n            reader.readAsDataURL(data);\n        }\n        const renderMedia = () => {\n            if (src.startsWith('data:image')) {\n                return React.createElement(\"img\", { src: src, alt: \"An image from Deep file storage.\", style: style });\n            }\n            else if (src.startsWith('data:audio')) {\n                return React.createElement(\"audio\", { src: src, controls: true, style: style }, \"Your browser does not support the audio element.\");\n            }\n            else {\n                return React.createElement(\"div\", null, \"Unsupported file type.\");\n            }\n        };\n        return renderMedia();\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxDQUFDLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxFQUFFLEVBQUU7SUFDcEIsTUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQy9CLE1BQU0sRUFBRSxRQUFRLEVBQUUsR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDdEMsTUFBTSxVQUFVLEdBQUcsT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFDO0lBQzFDLE1BQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUMvQixNQUFNLFFBQVEsR0FBRyxVQUFVLENBQUMsWUFBWSxDQUFDLEVBQUUsS0FBSyxFQUFFLEtBQUssQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFFcEUsT0FBTyxDQUFDLEVBQUUsUUFBUSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFO1FBRW5DLE1BQU0sR0FBRyxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUMsR0FBRyxDQUFDO1FBQ2xDLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNqRCxNQUFNLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxTQUFTLEdBQUcsSUFBSSxnQkFBZ0IsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDO1FBRTVFLE1BQU0sQ0FBQyxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLEVBQUUsT0FBTyxDQUFDLEdBQUcsUUFBUSxDQUFDO1lBQ25ELE1BQU0sRUFBRSxLQUFLO1lBQ2IsR0FBRztZQUNILE9BQU8sRUFBRTtnQkFDUCxlQUFlLEVBQUUsVUFBVSxJQUFJLENBQUMsS0FBSyxFQUFFO2FBQ3hDO1lBRUQsWUFBWSxFQUFFLE1BQU07U0FDckIsQ0FBQyxDQUFDO1FBRUgsTUFBTSxDQUFDLEdBQUcsRUFBRSxNQUFNLENBQUMsR0FBRyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDdkMsSUFBSSxDQUFDLE9BQU8sSUFBSSxJQUFJLEVBQUUsQ0FBQztZQUNyQixNQUFNLE1BQU0sR0FBRyxJQUFJLE1BQU0sQ0FBQyxVQUFVLEVBQUUsQ0FBQztZQUN2QyxNQUFNLENBQUMsTUFBTSxHQUFHLEdBQUcsRUFBRTtnQkFDbkIsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUN4QixDQUFDLENBQUE7WUFDRCxNQUFNLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzdCLENBQUM7UUFFRCxNQUFNLFdBQVcsR0FBRyxHQUFHLEVBQUU7WUFDdkIsSUFBSSxHQUFHLENBQUMsVUFBVSxDQUFDLFlBQVksQ0FBQyxFQUFFLENBQUM7Z0JBQ2pDLE9BQU8sNkJBQUssR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUMsa0NBQWtDLEVBQUMsS0FBSyxFQUFFLEtBQUssR0FBUSxDQUFDO1lBQ3BGLENBQUM7aUJBQU0sSUFBSSxHQUFHLENBQUMsVUFBVSxDQUFDLFlBQVksQ0FBQyxFQUFFLENBQUM7Z0JBQ3hDLE9BQU8sK0JBQU8sR0FBRyxFQUFFLEdBQUcsRUFBRSxRQUFRLFFBQUMsS0FBSyxFQUFFLEtBQUssdURBQTBELENBQUM7WUFDMUcsQ0FBQztpQkFBTSxDQUFDO2dCQUNOLE9BQU8sMERBQWlDLENBQUM7WUFDM0MsQ0FBQztRQUNILENBQUMsQ0FBQTtRQUVELE9BQU8sV0FBVyxFQUFFLENBQUM7SUFDdkIsQ0FBQyxDQUFBO0FBQ0gsQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiKHsgZGVlcCwgcmVxdWlyZSB9KSA9PiB7XG4gIGNvbnN0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbiAgY29uc3QgeyB1c2VTdGF0ZSB9ID0gcmVxdWlyZSgncmVhY3QnKTtcbiAgY29uc3QgYXhpb3NIb29rcyA9IHJlcXVpcmUoXCJheGlvcy1ob29rc1wiKTtcbiAgY29uc3QgYXhpb3MgPSByZXF1aXJlKFwiYXhpb3NcIik7XG4gIGNvbnN0IHVzZUF4aW9zID0gYXhpb3NIb29rcy5tYWtlVXNlQXhpb3MoeyBheGlvczogYXhpb3MuY3JlYXRlKCkgfSk7XG5cbiAgcmV0dXJuICh7IGZpbGxTaXplLCBzdHlsZSwgbGluayB9KSA9PiB7XG5cbiAgICBjb25zdCBzc2wgPSBkZWVwLmFwb2xsb0NsaWVudC5zc2w7XG4gICAgY29uc3QgcGF0aCA9IGRlZXAuYXBvbGxvQ2xpZW50LnBhdGguc2xpY2UoMCwgLTQpO1xuICAgIGNvbnN0IHVybCA9IGAke3NzbCA/IFwiaHR0cHM6Ly9cIiA6IFwiaHR0cDovL1wifSR7cGF0aH0vZmlsZT9saW5rSWQ9JHtsaW5rLmlkfWA7XG5cbiAgICBjb25zdCBbeyBkYXRhLCBsb2FkaW5nLCBlcnJvciB9LCByZWZldGNoXSA9IHVzZUF4aW9zKHsgXG4gICAgICBtZXRob2Q6ICdnZXQnLFxuICAgICAgdXJsLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHtkZWVwLnRva2VufWBcbiAgICAgIH0sXG4gICAgICBcbiAgICAgIHJlc3BvbnNlVHlwZTogXCJibG9iXCIsXG4gICAgfSk7XG5cbiAgICBjb25zdCBbc3JjLCBzZXRTcmNdID0gdXNlU3RhdGUoXCJ0ZXN0XCIpO1xuICAgIGlmICghbG9hZGluZyAmJiBkYXRhKSB7XG4gICAgICBjb25zdCByZWFkZXIgPSBuZXcgd2luZG93LkZpbGVSZWFkZXIoKTtcbiAgICAgIHJlYWRlci5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICAgIHNldFNyYyhyZWFkZXIucmVzdWx0KTtcbiAgICAgIH1cbiAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGRhdGEpO1xuICAgIH1cblxuICAgIGNvbnN0IHJlbmRlck1lZGlhID0gKCkgPT4ge1xuICAgICAgaWYgKHNyYy5zdGFydHNXaXRoKCdkYXRhOmltYWdlJykpIHtcbiAgICAgICAgcmV0dXJuIDxpbWcgc3JjPXtzcmN9IGFsdD1cIkFuIGltYWdlIGZyb20gRGVlcCBmaWxlIHN0b3JhZ2UuXCIgc3R5bGU9e3N0eWxlfT48L2ltZz47XG4gICAgICB9IGVsc2UgaWYgKHNyYy5zdGFydHNXaXRoKCdkYXRhOmF1ZGlvJykpIHtcbiAgICAgICAgcmV0dXJuIDxhdWRpbyBzcmM9e3NyY30gY29udHJvbHMgc3R5bGU9e3N0eWxlfT5Zb3VyIGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCB0aGUgYXVkaW8gZWxlbWVudC48L2F1ZGlvPjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiA8ZGl2PlVuc3VwcG9ydGVkIGZpbGUgdHlwZS48L2Rpdj47XG4gICAgICB9XG4gICAgfSBcblxuICAgIHJldHVybiByZW5kZXJNZWRpYSgpO1xuICB9XG59XG4iXX0=",
          "link_id": 880
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 925,
      "src_id": 906,
      "handler_id": 907,
      "execution_provider_id": 33,
      "isolation_provider_id": 144,
      "dist": {
        "id": 925,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 391,
          "value": "async ({ deep, require }) => {\n    const React = require('react');\n    const { useState, useEffect, useRef } = React;\n    const { Text, Box, Button, Link, Input, VStack, useColorModeValue } = require('@chakra-ui/react');\n    const { ExternalLinkIcon } = require('@chakra-ui/icons');\n    const { useEditorTabs, useCytoEditor } = require('@deep-foundation/deepcase');\n    const Publish = await deep.id('@deep-foundation/npm-packager', 'Publish');\n    return ({ fillSize, style, link, setHandlerId }) => {\n        const axiosHooks = require(\"axios-hooks\");\n        const axios = require(\"axios\");\n        const useAxios = axiosHooks.makeUseAxios({ axios: axios.create() });\n        const packageId = link.id;\n        const packageTypeId = deep.idLocal('@deep-foundation/core', 'Package');\n        const packageNamespaceTypeId = deep.idLocal('@deep-foundation/core', 'PackageNamespace');\n        const packageVersionTypeId = deep.idLocal('@deep-foundation/core', 'PackageVersion');\n        const packageActiveTypeId = deep.idLocal('@deep-foundation/core', 'PackageActive');\n        const packageQueryTypeId = deep.idLocal('@deep-foundation/core', 'PackageQuery');\n        const { data: prefetchedNpmPackageLinks } = deep.useDeepSubscription({\n            up: {\n                parent: {\n                    type_id: { _eq: packageTypeId },\n                    string: { value: { _in: [\"@deep-foundation/npm-packager\"] } }\n                }\n            }\n        });\n        const { data: prefetchedPackageActiveLinksAndNamespace } = deep.useDeepSubscription({\n            type_id: { _in: [packageNamespaceTypeId, packageVersionTypeId, packageTypeId, packageActiveTypeId] }\n        });\n        const pkg = deep.minilinks.byId[packageId];\n        const pkgVersion = pkg?.in?.filter(v => v.type_id === packageVersionTypeId)?.[0];\n        const pkgVersionValue = pkgVersion?.value?.value || \"\";\n        const packageNamespaceId = pkgVersion?.from_id;\n        const packageName = pkg?.value?.value || \"\";\n        const [currentPackageName, setCurrentPackageName] = useState(packageName);\n        const [currentPackageVersion, setCurrentPackageVersion] = useState(pkgVersionValue);\n        let packageUrl = `https://registry.npmjs.com/${currentPackageName}`;\n        let displayUrl = `npmjs.com/package/${currentPackageName}`;\n        const { data: [Published], loading: pubLoading } = deep.useDeepSubscription({\n            type_id: Publish,\n            from_id: link.id,\n            order_by: { id: 'desc' },\n            limit: 1,\n        });\n        const { data: [Result], loading: resLoading } = deep.useDeepSubscription(Published ? {\n            type_id: { _in: [\n                    deep.idLocal('@deep-foundation/core', 'Rejected'),\n                    deep.idLocal('@deep-foundation/core', 'Resolved'),\n                ] },\n            up: {\n                tree_id: deep.idLocal('@deep-foundation/core', 'promiseTree'),\n                parent_id: Published?.id,\n            },\n            limit: 1,\n        } : { id: 0 });\n        const publishingLoading = pubLoading || resLoading;\n        const bg = useColorModeValue('#eeeeee', '#1e1e1e');\n        const borderColor = useColorModeValue('#a3a3a3', '#4d4d4d');\n        const { addTab, activeTab } = useEditorTabs();\n        const [cytoEditor, setCytoEditor] = useCytoEditor();\n        const [disabled, setDisabled] = useState(false);\n        const resultRef = useRef();\n        useEffect(() => {\n            if (!!Result && Result?.id != resultRef?.current?.id && disabled) {\n                setDisabled(false);\n                setCurrentPackageVersion(pkgVersionValue);\n            }\n            if (!!Result && Result?.id != resultRef?.current?.id) {\n                resultRef.current = Result;\n            }\n        }, [Result]);\n        return (React.createElement(\"div\", { style: {\n                ...style,\n                position: 'relative',\n            } },\n            React.createElement(Box, { maxW: 'md', minW: 'sm', w: 'sm', borderColor: borderColor, borderWidth: '1px', borderRadius: 'lg', overflow: 'hidden', bg: bg },\n                displayUrl ? React.createElement(Box, { p: 2 },\n                    React.createElement(Link, { fontSize: 'xs', href: `https://${displayUrl}`, isExternal: true },\n                        displayUrl,\n                        \" \",\n                        React.createElement(ExternalLinkIcon, { mx: '2px' })),\n                    \" \") : null,\n                React.createElement(VStack, { p: 2 },\n                    React.createElement(Input, { placeholder: 'package name', value: currentPackageName, borderColor: borderColor, size: 'sm', onChange: (e) => setCurrentPackageName(e.target.value) }),\n                    React.createElement(Input, { placeholder: 'package version', value: currentPackageVersion, borderColor: borderColor, size: 'sm', onChange: (e) => setCurrentPackageVersion(e.target.value) }),\n                    React.createElement(Button, { colorScheme: 'blue', size: 'sm', w: '100%', disabled: disabled, isLoading: disabled, onClick: async () => {\n                            let actualNamespaceId = packageNamespaceId;\n                            if (!packageNamespaceId && currentPackageName) {\n                                const { data: [packageNamespaceLink] } = await deep.insert({\n                                    type_id: packageNamespaceTypeId,\n                                    string: { data: { value: currentPackageName } },\n                                }, { returning: deep.selectReturning });\n                                deep.minilinks.apply([packageNamespaceLink]);\n                                actualNamespaceId = packageNamespaceLink.id;\n                            }\n                            else if (currentPackageName) {\n                                const { data: [{ link: packageNamespaceLink }] } = await deep.update({ link_id: packageNamespaceId }, { value: currentPackageName }, { table: 'strings', returning: `link { ${deep.selectReturning} }` });\n                                deep.minilinks.apply([packageNamespaceLink]);\n                                actualNamespaceId = packageNamespaceId;\n                            }\n                            const packageActiveLinks = deep.minilinks.byId[actualNamespaceId]?.out?.filter(l => l.type_id == packageActiveTypeId) || [];\n                            if (!packageActiveLinks?.length) {\n                                const { data: [packageActiveLink] } = await deep.insert({\n                                    from_id: actualNamespaceId,\n                                    type_id: packageActiveTypeId,\n                                    to_id: packageId,\n                                }, { returning: deep.selectReturning });\n                                deep.minilinks.apply([packageActiveLink]);\n                            }\n                            if (currentPackageName) {\n                                if (pkg?.value?.value) {\n                                    await deep.update({ link_id: pkg?.id }, { value: currentPackageName }, { table: 'strings' });\n                                }\n                                else {\n                                    await deep.insert({\n                                        link_id: pkg?.id,\n                                        value: currentPackageName\n                                    }, { table: 'strings' });\n                                }\n                            }\n                            if (!pkgVersion?.id) {\n                                const { data: [{ id: packageVersionId }] } = await deep.insert({\n                                    from_id: actualNamespaceId,\n                                    type_id: packageVersionTypeId,\n                                    to_id: pkg?.id,\n                                    string: { data: { value: currentPackageVersion || '0.0.0' } },\n                                });\n                            }\n                            else if (currentPackageVersion) {\n                                await deep.update({ link_id: pkgVersion?.id }, { value: currentPackageVersion }, { table: 'strings' });\n                            }\n                        } }, \"save\"),\n                    React.createElement(Button, { colorScheme: 'blue', size: 'sm', w: '100%', disabled: disabled, isLoading: disabled, onClick: async () => {\n                            if (!(prefetchedNpmPackageLinks?.length > 0)) {\n                                return;\n                            }\n                            const { data: [{ id: packageQueryId }] } = await deep.insert({\n                                type_id: packageQueryTypeId,\n                                string: { data: { value: currentPackageName } },\n                            });\n                            const { data: [{ id: publishId }] } = await deep.insert({\n                                from_id: pkg?.id,\n                                type_id: Publish,\n                                to_id: packageQueryId\n                            });\n                            setDisabled(true);\n                        } }, \"publish\"),\n                    !!Published && React.createElement(Button, { isLoading: !!Published && (!Result || publishingLoading), variant: \"outline\", colorScheme: publishingLoading ? 'default' : Result ? Result.type_id === deep.idLocal('@deep-foundation/core', 'Resolved') ? 'green' : 'red' : 'default', loadingText: publishingLoading ? 'Loading' : 'Publishing', disabled: true, onClick: async () => {\n                            if (Result) {\n                                addTab({\n                                    id: Result.to_id,\n                                    initialValue: deep.stringify((await deep.select(Result.to_id))?.data?.[0]?.value?.value)\n                                });\n                                activeTab(Result.to_id);\n                                setCytoEditor(Result.to_id);\n                            }\n                        } },\n                        React.createElement(\"div\", null,\n                            Result ? Result.type_id === deep.idLocal('@deep-foundation/core', 'Resolved') ? 'Published' : 'Failed' : 'Publishing',\n                            React.createElement(\"br\", null),\n                            React.createElement(Text, { fontSize: \"xs\" }, Result ? '(click open in editor)' : '')))))));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLEVBQUUsRUFBRTtJQUMxQixNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDL0IsTUFBTSxFQUFFLFFBQVEsRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFFLEdBQUcsS0FBSyxDQUFDO0lBQzlDLE1BQU0sRUFBRSxJQUFJLEVBQUUsR0FBRyxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxpQkFBaUIsRUFBRSxHQUFHLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBQ2xHLE1BQU0sRUFBRSxnQkFBZ0IsRUFBRSxHQUFHLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBQ3pELE1BQU0sRUFBRSxhQUFhLEVBQUUsYUFBYSxFQUFFLEdBQUcsT0FBTyxDQUFDLDJCQUEyQixDQUFDLENBQUM7SUFFOUUsTUFBTSxPQUFPLEdBQUcsTUFBTSxJQUFJLENBQUMsRUFBRSxDQUFDLCtCQUErQixFQUFFLFNBQVMsQ0FBQyxDQUFDO0lBRTFFLE9BQU8sQ0FBQyxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLFlBQVksRUFBRSxFQUFFLEVBQUU7UUFDakQsTUFBTSxVQUFVLEdBQUcsT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQzFDLE1BQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUMvQixNQUFNLFFBQVEsR0FBRyxVQUFVLENBQUMsWUFBWSxDQUFDLEVBQUUsS0FBSyxFQUFFLEtBQUssQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFDcEUsTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQztRQUMxQixNQUFNLGFBQWEsR0FBRyxJQUFJLENBQUMs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TUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLEtBQUssQ0FBQztpQ0FDekYsQ0FBQyxDQUFDO2dDQUNILFNBQVMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7Z0NBQ3hCLGFBQWEsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7NEJBQzlCLENBQUM7d0JBQ0gsQ0FBQzt3QkFDRjs0QkFDRSxNQUFNLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxPQUFPLEtBQUssSUFBSSxDQUFDLE9BQU8sQ0FBQyx1QkFBdUIsRUFBRSxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLFlBQVk7NEJBQ3RILCtCQUFLOzRCQUNMLG9CQUFDLElBQUksSUFBQyxRQUFRLEVBQUMsSUFBSSxJQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsd0JBQXdCLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBUSxDQUMvRCxDQUFTLENBQ1IsQ0FDTCxDQUNGLENBQ1AsQ0FBQztJQUNGLENBQUMsQ0FBQTtBQUNILENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImFzeW5jICh7IGRlZXAsIHJlcXVpcmUgfSkgPT4ge1xuICBjb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG4gIGNvbnN0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlUmVmIH0gPSBSZWFjdDtcbiAgY29uc3QgeyBUZXh0LCBCb3gsIEJ1dHRvbiwgTGluaywgSW5wdXQsIFZTdGFjaywgdXNlQ29sb3JNb2RlVmFsdWUgfSA9IHJlcXVpcmUoJ0BjaGFrcmEtdWkvcmVhY3QnKTtcbiAgY29uc3QgeyBFeHRlcm5hbExpbmtJY29uIH0gPSByZXF1aXJlKCdAY2hha3JhLXVpL2ljb25zJyk7XG4gIGNvbnN0IHsgdXNlRWRpdG9yVGFicywgdXNlQ3l0b0VkaXRvciB9ID0gcmVxdWlyZSgnQGRlZXAtZm91bmRhdGlvbi9kZWVwY2FzZScpO1xuXG4gIGNvbnN0IFB1Ymxpc2ggPSBhd2FpdCBkZWVwLmlkKCdAZGVlcC1mb3VuZGF0aW9uL25wbS1wYWNrYWdlcicsICdQdWJsaXNoJyk7XG5cbiAgcmV0dXJuICh7IGZpbGxTaXplLCBzdHlsZSwgbGluaywgc2V0SGFuZGxlcklkIH0pID0+IHtcbiAgICBjb25zdCBheGlvc0hvb2tzID0gcmVxdWlyZShcImF4aW9zLWhvb2tzXCIpO1xuICAgIGNvbnN0IGF4aW9zID0gcmVxdWlyZShcImF4aW9zXCIpO1xuICAgIGNvbnN0IHVzZUF4aW9zID0gYXhpb3NIb29rcy5tYWtlVXNlQXhpb3MoeyBheGlvczogYXhpb3MuY3JlYXRlKCkgfSk7XG4gICAgY29uc3QgcGFja2FnZUlkID0gbGluay5pZDtcbiAgICBjb25zdCBwYWNrYWdlVHlwZUlkID0gZGVlcC5pZExvY2FsKCdAZGVlcC1mb3VuZGF0aW9uL2NvcmUnLCAnUGFja2FnZScpO1xuICAgIGNvbnN0IHBhY2thZ2VOYW1lc3BhY2VUeXBlSWQgPSBkZWVwLmlkTG9jYWwoJ0BkZWVwLWZvdW5kYXRpb24vY29yZScsICdQYWNrYWdlTmFtZXNwYWNlJyk7XG4gICAgY29uc3QgcGFja2FnZVZlcnNpb25UeXBlSWQgPSBkZWVwLmlkTG9jYWwoJ0BkZWVwLWZvdW5kYXRpb24vY29yZScsICdQYWNrYWdlVmVyc2lvbicpO1xuICAgIGNvbnN0IHBhY2thZ2VBY3RpdmVUeXBlSWQgPSBkZWVwLmlkTG9jYWwoJ0BkZWVwLWZvdW5kYXRpb24vY29yZScsICdQYWNrYWdlQWN0aXZlJyk7XG4gICAgY29uc3QgcGFja2FnZVF1ZXJ5VHlwZUlkID0gZGVlcC5pZExvY2FsKCdAZGVlcC1mb3VuZGF0aW9uL2NvcmUnLCAnUGFja2FnZVF1ZXJ5Jyk7IFxuICAgIGNvbnN0IHsgZGF0YTogcHJlZmV0Y2hlZE5wbVBhY2thZ2VMaW5rcyB9ID0gZGVlcC51c2VEZWVwU3Vic2NyaXB0aW9uKHsgXG4gICAgICB1cDogeyBcbiAgICAgICAgcGFyZW50OiB7IFxuICAgICAgICAgIHR5cGVfaWQ6IHtfZXE6IHBhY2thZ2VUeXBlSWR9LFxuICAgICAgICAgIHN0cmluZzogeyB2YWx1ZTogeyBfaW46IFtcIkBkZWVwLWZvdW5kYXRpb24vbnBtLXBhY2thZ2VyXCJdIH0gfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7ICAgICBcbiAgICBjb25zdCB7IGRhdGE6IHByZWZldGNoZWRQYWNrYWdlQWN0aXZlTGlua3NBbmROYW1lc3BhY2UgfSA9IGRlZXAudXNlRGVlcFN1YnNjcmlwdGlvbih7XG4gICAgICB0eXBlX2lkOiB7IF9pbjogW3BhY2thZ2VOYW1lc3BhY2VUeXBlSWQsIHBhY2thZ2VWZXJzaW9uVHlwZUlkLCBwYWNrYWdlVHlwZUlkLCBwYWNrYWdlQWN0aXZlVHlwZUlkXSB9IFxuICAgIH0pO1xuICAgIGNvbnN0IHBrZyA9IGRlZXAubWluaWxpbmtzLmJ5SWRbcGFja2FnZUlkXTtcbiAgICBjb25zdCBwa2dWZXJzaW9uID0gcGtnPy5pbj8uZmlsdGVyKHYgPT4gdi50eXBlX2lkID09PSBwYWNrYWdlVmVyc2lvblR5cGVJZCk/LlswXTtcbiAgICBjb25zdCBwa2dWZXJzaW9uVmFsdWUgPSBwa2dWZXJzaW9uPy52YWx1ZT8udmFsdWUgfHwgXCJcIjtcbiAgICBjb25zdCBwYWNrYWdlTmFtZXNwYWNlSWQgPSBwa2dWZXJzaW9uPy5mcm9tX2lkO1xuICAgIGNvbnN0IHBhY2thZ2VOYW1lID0gcGtnPy52YWx1ZT8udmFsdWUgfHwgXCJcIjtcbiAgICBjb25zdCBbY3VycmVudFBhY2thZ2VOYW1lLCBzZXRDdXJyZW50UGFja2FnZU5hbWVdID0gdXNlU3RhdGUocGFja2FnZU5hbWUpO1xuICAgIGNvbnN0IFtjdXJyZW50UGFja2FnZVZlcnNpb24sIHNldEN1cnJlbnRQYWNrYWdlVmVyc2lvbl0gPSB1c2VTdGF0ZShwa2dWZXJzaW9uVmFsdWUpOyBcbiAgICBsZXQgcGFja2FnZVVybCA9IGBodHRwczovL3JlZ2lzdHJ5Lm5wbWpzLmNvbS8ke2N1cnJlbnRQYWNrYWdlTmFtZX1gO1xuICAgIGxldCBkaXNwbGF5VXJsID0gYG5wbWpzLmNvbS9wYWNrYWdlLyR7Y3VycmVudFBhY2thZ2VOYW1lfWBcblxuICAgIGNvbnN0IHsgZGF0YTogW1B1Ymxpc2hlZF0sIGxvYWRpbmc6IHB1YkxvYWRpbmcgfSA9IGRlZXAudXNlRGVlcFN1YnNjcmlwdGlvbih7XG4gICAgICB0eXBlX2lkOiBQdWJsaXNoLFxuICAgICAgZnJvbV9pZDogbGluay5pZCxcbiAgICAgIG9yZGVyX2J5OiB7IGlkOiAnZGVzYycgfSxcbiAgICAgIGxpbWl0OiAxLFxuICAgIH0pO1xuXG4gICAgY29uc3QgeyBkYXRhOiBbUmVzdWx0XSwgbG9hZGluZzogcmVzTG9hZGluZyB9ID0gZGVlcC51c2VEZWVwU3Vic2NyaXB0aW9uKFB1Ymxpc2hlZCA/IHtcbiAgICAgIHR5cGVfaWQ6IHsgX2luOiBbXG4gICAgICAgIGRlZXAuaWRMb2NhbCgnQGRlZXAtZm91bmRhdGlvbi9jb3JlJywgJ1JlamVjdGVkJyksXG4gICAgICAgIGRlZXAuaWRMb2NhbCgnQGRlZXAtZm91bmRhdGlvbi9jb3JlJywgJ1Jlc29sdmVkJyksXG4gICAgICBdIH0sXG4gICAgICB1cDoge1xuICAgICAgICB0cmVlX2lkOiBkZWVwLmlkTG9jYWwoJ0BkZWVwLWZvdW5kYXRpb24vY29yZScsICdwcm9taXNlVHJlZScpLFxuICAgICAgICBwYXJlbnRfaWQ6IFB1Ymxpc2hlZD8uaWQsXG4gICAgICB9LFxuICAgICAgbGltaXQ6IDEsXG4gICAgfSA6IHsgaWQ6IDAgfSk7XG5cbiAgICBjb25zdCBwdWJsaXNoaW5nTG9hZGluZyA9IHB1YkxvYWRpbmcgfHwgcmVzTG9hZGluZztcblxuICAgIGNvbnN0IGJnID0gdXNlQ29sb3JNb2RlVmFsdWUoJyNlZWVlZWUnLCAnIzFlMWUxZScpO1xuICAgIGNvbnN0IGJvcmRlckNvbG9yID0gdXNlQ29sb3JNb2RlVmFsdWUoJyNhM2EzYTMnLCAnIzRkNGQ0ZCcpO1xuXG4gICAgY29uc3QgeyBhZGRUYWIsIGFjdGl2ZVRhYiB9ID0gdXNlRWRpdG9yVGFicygpO1xuICAgIGNvbnN0IFtjeXRvRWRpdG9yLCBzZXRDeXRvRWRpdG9yXSA9IHVzZUN5dG9FZGl0b3IoKTtcblxuICAgIGNvbnN0IFtkaXNhYmxlZCwgc2V0RGlzYWJsZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICAgIGNvbnN0IHJlc3VsdFJlZiA9IHVzZVJlZigpO1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICBpZiAoISFSZXN1bHQgJiYgUmVzdWx0Py5pZCAhPSByZXN1bHRSZWY/LmN1cnJlbnQ/LmlkICYmIGRpc2FibGVkKSB7XG4gICAgICAgIHNldERpc2FibGVkKGZhbHNlKTtcbiAgICAgICAgc2V0Q3VycmVudFBhY2thZ2VWZXJzaW9uKHBrZ1ZlcnNpb25WYWx1ZSk7IFxuICAgICAgfVxuICAgICAgaWYgKCEhUmVzdWx0ICYmIFJlc3VsdD8uaWQgIT0gcmVzdWx0UmVmPy5jdXJyZW50Py5pZCkge1xuICAgICAgICByZXN1bHRSZWYuY3VycmVudCA9IFJlc3VsdDtcbiAgICAgIH1cbiAgICB9LCBbUmVzdWx0XSk7XG5cbiAgICByZXR1cm4gKDxkaXZcbiAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAvLyB3aWR0aDogJzEwMCUnLFxuICAgICAgICAgIC8vIGhlaWdodDogJzEwMCUnLFxuICAgICAgICAgIC4uLnN0eWxlLFxuICAgICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgICAgICB9fVxuICAgICAgPlxuICAgICAgICA8Qm94IG1heFc9J21kJyBtaW5XPSdzbScgdz0nc20nIGJvcmRlckNvbG9yPXtib3JkZXJDb2xvcn0gYm9yZGVyV2lkdGg9JzFweCcgYm9yZGVyUmFkaXVzPSdsZycgb3ZlcmZsb3c9J2hpZGRlbicgYmc9e2JnfT5cbiAgICAgIHtkaXNwbGF5VXJsID8gPEJveCBwPXsyfT48TGluayBmb250U2l6ZT0neHMnIGhyZWY9e2BodHRwczovLyR7ZGlzcGxheVVybH1gfSBpc0V4dGVybmFsPlxuICAgICAgICB7ZGlzcGxheVVybH0gPEV4dGVybmFsTGlua0ljb24gbXg9JzJweCcgLz5cbiAgICAgIDwvTGluaz4gPC9Cb3g+IDogbnVsbH1cbiAgICAgICAgPFZTdGFjayBwPXsyfT5cbiAgICAgICAgICA8SW5wdXQgXG4gICAgICAgICAgICBwbGFjZWhvbGRlcj0ncGFja2FnZSBuYW1lJ1xuICAgICAgICAgICAgdmFsdWU9e2N1cnJlbnRQYWNrYWdlTmFtZX1cbiAgICAgICAgICAgIGJvcmRlckNvbG9yPXtib3JkZXJDb2xvcn1cbiAgICAgICAgICAgIHNpemU9J3NtJ1xuICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRDdXJyZW50UGFja2FnZU5hbWUoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8SW5wdXQgXG4gICAgICAgICAgICBwbGFjZWhvbGRlcj0ncGFja2FnZSB2ZXJzaW9uJ1xuICAgICAgICAgICAgdmFsdWU9e2N1cnJlbnRQYWNrYWdlVmVyc2lvbn1cbiAgICAgICAgICAgIGJvcmRlckNvbG9yPXtib3JkZXJDb2xvcn1cbiAgICAgICAgICAgIHNpemU9J3NtJ1xuICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRDdXJyZW50UGFja2FnZVZlcnNpb24oZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8QnV0dG9uIGNvbG9yU2NoZW1lPSdibHVlJyBzaXplPSdzbScgdz0nMTAwJScgZGlzYWJsZWQ9e2Rpc2FibGVkfSBpc0xvYWRpbmc9e2Rpc2FibGVkfSBvbkNsaWNrPXthc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBsZXQgYWN0dWFsTmFtZXNwYWNlSWQgPSBwYWNrYWdlTmFtZXNwYWNlSWQ7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnbnBtLXBhY2thZ2VyLXVpLW91dHB1dCcsICdhY3R1YWxOYW1lc3BhY2VJZCcsIGFjdHVhbE5hbWVzcGFjZUlkKTtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCducG0tcGFja2FnZXItdWktb3V0cHV0JywgJ2N1cnJlbnRQYWNrYWdlTmFtZScsIGN1cnJlbnRQYWNrYWdlTmFtZSk7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnbnBtLXBhY2thZ2VyLXVpLW91dHB1dCcsICchcGFja2FnZU5hbWVzcGFjZUlkICYmIGN1cnJlbnRQYWNrYWdlTmFtZScsICFwYWNrYWdlTmFtZXNwYWNlSWQgJiYgY3VycmVudFBhY2thZ2VOYW1lKTtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCducG0tcGFja2FnZXItdWktb3V0cHV0JywgJyEhY3VycmVudFBhY2thZ2VOYW1lJywgISFjdXJyZW50UGFja2FnZU5hbWUpO1xuICAgICAgICAgICAgaWYgKCFwYWNrYWdlTmFtZXNwYWNlSWQgJiYgY3VycmVudFBhY2thZ2VOYW1lKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHsgZGF0YTogW3BhY2thZ2VOYW1lc3BhY2VMaW5rXSB9ID0gYXdhaXQgZGVlcC5pbnNlcnQoe1xuICAgICAgICAgICAgICAgIHR5cGVfaWQ6IHBhY2thZ2VOYW1lc3BhY2VUeXBlSWQsXG4gICAgICAgICAgICAgICAgc3RyaW5nOiB7IGRhdGE6IHsgdmFsdWU6IGN1cnJlbnRQYWNrYWdlTmFtZSB9IH0sXG4gICAgICAgICAgICAgIH0sIHsgcmV0dXJuaW5nOiBkZWVwLnNlbGVjdFJldHVybmluZyB9KTtcbiAgICAgICAgICAgICAgZGVlcC5taW5pbGlua3MuYXBwbHkoW3BhY2thZ2VOYW1lc3BhY2VMaW5rXSk7XG4gICAgICAgICAgICAgIGFjdHVhbE5hbWVzcGFjZUlkID0gcGFja2FnZU5hbWVzcGFjZUxpbmsuaWQ7XG4gICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCducG0tcGFja2FnZXItdWktb3V0cHV0JywgJ2FjdHVhbE5hbWVzcGFjZUlkIGFmdGVyIGluc2VydCcsIGFjdHVhbE5hbWVzcGFjZUlkKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VycmVudFBhY2thZ2VOYW1lKSB7XG4gICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCducG0tcGFja2FnZXItdWktb3V0cHV0JywgJ2JlZm9yZSB1cGRhdGUnKTtcbiAgICAgICAgICAgICAgY29uc3QgeyBkYXRhOiBbeyBsaW5rOiBwYWNrYWdlTmFtZXNwYWNlTGluayB9XSB9ID0gYXdhaXQgZGVlcC51cGRhdGUoXG4gICAgICAgICAgICAgICAgeyBsaW5rX2lkOiBwYWNrYWdlTmFtZXNwYWNlSWQgfSxcbiAgICAgICAgICAgICAgICB7IHZhbHVlOiBjdXJyZW50UGFja2FnZU5hbWUgfSxcbiAgICAgICAgICAgICAgICB7IHRhYmxlOiAnc3RyaW5ncycsIHJldHVybmluZzogYGxpbmsgeyAke2RlZXAuc2VsZWN0UmV0dXJuaW5nfSB9YCB9XG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGRlZXAubWluaWxpbmtzLmFwcGx5KFtwYWNrYWdlTmFtZXNwYWNlTGlua10pO1xuICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnbnBtLXBhY2thZ2VyLXVpLW91dHB1dCcsICdhZnRlciB1cGRhdGUnLCBwYWNrYWdlTmFtZXNwYWNlTGluayk7XG4gICAgICAgICAgICAgIGFjdHVhbE5hbWVzcGFjZUlkID0gcGFja2FnZU5hbWVzcGFjZUlkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcGFja2FnZUFjdGl2ZUxpbmtzID0gZGVlcC5taW5pbGlua3MuYnlJZFthY3R1YWxOYW1lc3BhY2VJZF0/Lm91dD8uZmlsdGVyKGwgPT4gbC50eXBlX2lkID09IHBhY2thZ2VBY3RpdmVUeXBlSWQpIHx8IFtdO1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ25wbS1wYWNrYWdlci11aS1vdXRwdXQnLCAncGFja2FnZUFjdGl2ZUxpbmtzJywgcGFja2FnZUFjdGl2ZUxpbmtzKTtcbiAgICAgICAgICAgIGlmICghcGFja2FnZUFjdGl2ZUxpbmtzPy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgY29uc3QgeyBkYXRhOiBbcGFja2FnZUFjdGl2ZUxpbmtdIH0gPSBhd2FpdCBkZWVwLmluc2VydCh7XG4gICAgICAgICAgICAgICAgZnJvbV9pZDogYWN0dWFsTmFtZXNwYWNlSWQsXG4gICAgICAgICAgICAgICAgdHlwZV9pZDogcGFja2FnZUFjdGl2ZVR5cGVJZCxcbiAgICAgICAgICAgICAgICB0b19pZDogcGFja2FnZUlkLFxuICAgICAgICAgICAgICB9LCB7IHJldHVybmluZzogZGVlcC5zZWxlY3RSZXR1cm5pbmcgfSk7XG4gICAgICAgICAgICAgIGRlZXAubWluaWxpbmtzLmFwcGx5KFtwYWNrYWdlQWN0aXZlTGlua10pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGN1cnJlbnRQYWNrYWdlTmFtZSkge1xuICAgICAgICAgICAgICBpZiAocGtnPy52YWx1ZT8udmFsdWUpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBkZWVwLnVwZGF0ZShcbiAgICAgICAgICAgICAgICAgIHsgbGlua19pZDogcGtnPy5pZCB9LFxuICAgICAgICAgICAgICAgICAgeyB2YWx1ZTogY3VycmVudFBhY2thZ2VOYW1lIH0sXG4gICAgICAgICAgICAgICAgICB7IHRhYmxlOiAnc3RyaW5ncycgfVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgZGVlcC5pbnNlcnQoXG4gICAgICAgICAgICAgICAgICB7IFxuICAgICAgICAgICAgICAgICAgICBsaW5rX2lkOiBwa2c/LmlkLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogY3VycmVudFBhY2thZ2VOYW1lXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgeyB0YWJsZTogJ3N0cmluZ3MnIH1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXBrZ1ZlcnNpb24/LmlkKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHsgZGF0YTogW3sgaWQ6IHBhY2thZ2VWZXJzaW9uSWQgfV0gfSA9IGF3YWl0IGRlZXAuaW5zZXJ0KHtcbiAgICAgICAgICAgICAgICBmcm9tX2lkOiBhY3R1YWxOYW1lc3BhY2VJZCxcbiAgICAgICAgICAgICAgICB0eXBlX2lkOiBwYWNrYWdlVmVyc2lvblR5cGVJZCxcbiAgICAgICAgICAgICAgICB0b19pZDogcGtnPy5pZCxcbiAgICAgICAgICAgICAgICBzdHJpbmc6IHsgZGF0YTogeyB2YWx1ZTogY3VycmVudFBhY2thZ2VWZXJzaW9uIHx8ICcwLjAuMCcgfSB9LFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VycmVudFBhY2thZ2VWZXJzaW9uKSB7XG4gICAgICAgICAgICAgIGF3YWl0IGRlZXAudXBkYXRlKFxuICAgICAgICAgICAgICAgIHsgbGlua19pZDogcGtnVmVyc2lvbj8uaWQgfSxcbiAgICAgICAgICAgICAgICB7IHZhbHVlOiBjdXJyZW50UGFja2FnZVZlcnNpb24gfSxcbiAgICAgICAgICAgICAgICB7IHRhYmxlOiAnc3RyaW5ncycgfVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH19PnNhdmU8L0J1dHRvbj5cbiAgICAgICAgICA8QnV0dG9uIGNvbG9yU2NoZW1lPSdibHVlJyBzaXplPSdzbScgdz0nMTAwJScgZGlzYWJsZWQ9e2Rpc2FibGVkfSBpc0xvYWRpbmc9e2Rpc2FibGVkfSBvbkNsaWNrPXthc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIShwcmVmZXRjaGVkTnBtUGFja2FnZUxpbmtzPy5sZW5ndGggPiAwKSkge1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB7IGRhdGE6IFt7IGlkOiBwYWNrYWdlUXVlcnlJZCB9XSB9ID0gYXdhaXQgZGVlcC5pbnNlcnQoe1xuICAgICAgICAgICAgICB0eXBlX2lkOiBwYWNrYWdlUXVlcnlUeXBlSWQsXG4gICAgICAgICAgICAgIHN0cmluZzogeyBkYXRhOiB7IHZhbHVlOiBjdXJyZW50UGFja2FnZU5hbWUgfSB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCB7IGRhdGE6IFt7IGlkOiBwdWJsaXNoSWQgfV0gfSA9IGF3YWl0IGRlZXAuaW5zZXJ0KHtcbiAgICAgICAgICAgICAgZnJvbV9pZDogcGtnPy5pZCxcbiAgICAgICAgICAgICAgdHlwZV9pZDogUHVibGlzaCxcbiAgICAgICAgICAgICAgdG9faWQ6IHBhY2thZ2VRdWVyeUlkXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHNldERpc2FibGVkKHRydWUpO1xuICAgICAgICAgIH19PnB1Ymxpc2g8L0J1dHRvbj5cbiAgICAgICAgICB7ISFQdWJsaXNoZWQgJiYgPEJ1dHRvblxuICAgICAgICAgICAgaXNMb2FkaW5nPXshIVB1Ymxpc2hlZCAmJiAoIVJlc3VsdCB8fCBwdWJsaXNoaW5nTG9hZGluZyl9XG4gICAgICAgICAgICB2YXJpYW50PVwib3V0bGluZVwiXG4gICAgICAgICAgICBjb2xvclNjaGVtZT17cHVibGlzaGluZ0xvYWRpbmcgPyAnZGVmYXVsdCcgOiBSZXN1bHQgPyBSZXN1bHQudHlwZV9pZCA9PT0gZGVlcC5pZExvY2FsKCdAZGVlcC1mb3VuZGF0aW9uL2NvcmUnLCAnUmVzb2x2ZWQnKSA/ICdncmVlbicgOiAncmVkJyA6ICdkZWZhdWx0J31cbiAgICAgICAgICAgIGxvYWRpbmdUZXh0PXtwdWJsaXNoaW5nTG9hZGluZyA/ICdMb2FkaW5nJyA6ICdQdWJsaXNoaW5nJ31cbiAgICAgICAgICAgIGRpc2FibGVkXG4gICAgICAgICAgICBvbkNsaWNrPXthc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgIGlmIChSZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBhZGRUYWIoe1xuICAgICAgICAgICAgICAgICAgaWQ6IFJlc3VsdC50b19pZCxcbiAgICAgICAgICAgICAgICAgIGluaXRpYWxWYWx1ZTogZGVlcC5zdHJpbmdpZnkoKGF3YWl0IGRlZXAuc2VsZWN0KFJlc3VsdC50b19pZCkpPy5kYXRhPy5bMF0/LnZhbHVlPy52YWx1ZSlcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBhY3RpdmVUYWIoUmVzdWx0LnRvX2lkKTtcbiAgICAgICAgICAgICAgICBzZXRDeXRvRWRpdG9yKFJlc3VsdC50b19pZCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH19XG4gICAgICAgICAgPjxkaXY+XG4gICAgICAgICAgICB7UmVzdWx0ID8gUmVzdWx0LnR5cGVfaWQgPT09IGRlZXAuaWRMb2NhbCgnQGRlZXAtZm91bmRhdGlvbi9jb3JlJywgJ1Jlc29sdmVkJykgPyAnUHVibGlzaGVkJyA6ICdGYWlsZWQnIDogJ1B1Ymxpc2hpbmcnfVxuICAgICAgICAgICAgPGJyLz5cbiAgICAgICAgICAgIDxUZXh0IGZvbnRTaXplPVwieHNcIj57UmVzdWx0ID8gJyhjbGljayBvcGVuIGluIGVkaXRvciknIDogJyd9PC9UZXh0PlxuICAgICAgICAgIDwvZGl2PjwvQnV0dG9uPn1cbiAgICAgICAgPC9WU3RhY2s+XG4gICAgICA8L0JveD5cbiAgICA8L2Rpdj5cbiAgKTtcbiAgfVxufSJdfQ==",
          "link_id": 925
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 967,
      "src_id": 946,
      "handler_id": 947,
      "execution_provider_id": 33,
      "isolation_provider_id": 144,
      "dist": {
        "id": 967,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 401,
          "value": "({ deep, require }) => {\n    const React = require('react');\n    const { Wrap, WrapItem, Stack, HStack, VStack, Flex, StackDivider, Box, Button, Text, Input } = require('@chakra-ui/react');\n    const { Resize } = require('@deep-foundation/deepcase');\n    const MonacoEditor = require('@monaco-editor/react');\n    const json5 = require('json5');\n    const { TbArrowMoveLeft, TbArrowMoveRight } = require('react-icons/tb');\n    const { useDebounceCallback } = require('@react-hook/debounce');\n    const { useColorModeValue, useColorMode } = require('@chakra-ui/react');\n    const getSymbol = (link) => link?.inByType?.[deep.idLocal('@deep-foundation/core', 'Symbol')]?.[0]?.value?.value;\n    const getTypes = (link) => {\n        const types = [];\n        for (let l = link; l?.type && l?.id !== 1; l = link?.type)\n            types.push(link?.type_id);\n        return types;\n    };\n    const Contain = deep.idLocal('@deep-foundation/core', 'Contain');\n    const ListItem = ({ link, current, setCurrent, setMode, ...props }) => {\n        const _symbol = getSymbol(link) || getSymbol(link?.type) || getSymbol(link?.type?.type);\n        const _value = deep.stringify(link?.value?.value);\n        const __value = _value?.length > 29 ? _value.slice(0, 20) + '...' + _value.slice(-9, _value.length) : _value;\n        const [fromL] = deep.useMinilinksSubscription({\n            out: { id: link.id, type_id: Contain }\n        });\n        const [parentL] = deep.useMinilinksSubscription(link.type_id === Contain ? {\n            out: { type_id: Contain, to_id: link.from_id },\n        } : {\n            out: { type_id: Contain, to_id: link.id },\n        });\n        const broadcrumbs = [];\n        if (fromL)\n            broadcrumbs.push(fromL.id);\n        let next = parentL;\n        do {\n            if (next) {\n                if (deep.nameLocal(next?.id))\n                    broadcrumbs.push(next?.id);\n                next = next?.inByType?.[Contain]?.[0]?.from;\n            }\n        } while (next);\n        return (React.createElement(Box, { background: 'backgroundModal', p: '0.2rem', ...props, xs: {\n                border: current?.id === link?.id ? '3px #ffffff solid' : '0px transparent solid',\n                transition: 'all 1s ease',\n                cursor: 'pointer',\n            }, _hover: { border: '3px #ffffff7d solid' } },\n            React.createElement(Box, { mr: '0.5rem' },\n                React.createElement(Text, null,\n                    _symbol,\n                    \" \",\n                    link?.id,\n                    \" \",\n                    deep.nameLocal(link?.id))),\n            React.createElement(Box, { mr: '0.5rem' },\n                React.createElement(Text, null, broadcrumbs.map(id => React.createElement(Button, { key: id, size: \"xs\", onClick: async () => {\n                        const { data: [next] } = await deep.select(id);\n                        setCurrent(next);\n                        setMode('Contains');\n                    } }, deep.nameLocal(id))))),\n            React.createElement(Box, { mr: '0.5rem' },\n                React.createElement(Text, null, __value)),\n            React.createElement(Flex, { divider: React.createElement(StackDivider, { borderColor: 'borderColor' }), spacing: 2, justifyContent: 'space-between', alignItems: 'center', sx: {\n                    '& > *:not(:last-of-type)': {\n                        mr: '0.5rem'\n                    }\n                } },\n                !!link?.from_id && React.createElement(Button, { size: 'sm', variant: \"outline\", width: 'max-content', rightIcon: React.createElement(TbArrowMoveLeft, { size: '1.3rem' }), onClick: async () => {\n                        const { data: [next] } = await deep.select(link?.from_id);\n                        setCurrent(next);\n                    } },\n                    React.createElement(Text, { fontSize: 'sm' }, link?.from_id || 0)),\n                !!link?.to_id && React.createElement(Button, { size: 'sm', fontSize: 'sm', variant: \"outline\", leftIcon: React.createElement(TbArrowMoveRight, { size: '1.3rem' }), onClick: async () => {\n                        const { data: [next] } = await deep.select(link?.to_id);\n                        setCurrent(next);\n                    } },\n                    React.createElement(Text, null, link?.to_id || 0)),\n                !!link?.type_id && React.createElement(Button, { size: 'sm', fontSize: 'sm', variant: \"outline\", onClick: async () => {\n                        const { data: [next] } = await deep.select(link?.type_id);\n                        setCurrent(next);\n                    } },\n                    React.createElement(Text, null,\n                        link?.type_id,\n                        \" \",\n                        deep.nameLocal(link?.type_id))))));\n    };\n    const List = ({ link, parentsQuery, childrenQuery, current, setCurrent, setMode }) => {\n        const { data: parents } = deep.useDeepSubscription(parentsQuery);\n        const { data: children } = deep.useDeepSubscription(childrenQuery);\n        const descriptionQuery = React.useMemo(() => {\n            return {\n                to: { down: {\n                        tree_id: deep.idLocal('@deep-foundation/core', 'typesTree'),\n                        link_id: { _in: [\n                                ...(current?.id ? [current.id] : []),\n                                ...parents?.map(l => l.id),\n                                ...children?.map(l => l.id),\n                                ...parents?.map(l => l.from_id),\n                                ...children?.map(l => l.from_id),\n                                ...parents?.map(l => l.to_id),\n                                ...children?.map(l => l.to_id),\n                            ] },\n                    } },\n                type_id: { _in: [deep.idLocal('@deep-foundation/core', 'Contain'), deep.idLocal('@deep-foundation/core', 'Symbol')] },\n            };\n        }, [current, parents, children]);\n        const description = deep.useDeepSubscription(descriptionQuery);\n        deep.useDeepSubscription({\n            down: {\n                tree_id: { _in: [\n                        deep.idLocal('@deep-foundation/core', 'typesTree'),\n                        deep.idLocal('@deep-foundation/core', 'containTree'),\n                    ] },\n                link_id: { _in: [\n                        ...(current?.id ? [current.id] : []),\n                        ...parents?.map(l => l.id),\n                        ...children?.map(l => l.id),\n                        ...parents?.map(l => l.from_id),\n                        ...children?.map(l => l.from_id),\n                        ...parents?.map(l => l.to_id),\n                        ...children?.map(l => l.to_id),\n                    ] },\n            },\n        });\n        return React.createElement(React.Fragment, null, !description.loading &&\n            React.createElement(VStack, { divider: React.createElement(StackDivider, { borderColor: 'borderColor' }), spacing: 1, align: 'stretch', fontSize: 'sm' },\n                parents?.map(c => (React.createElement(ListItem, { key: c?.id, current: current, setMode: setMode, setCurrent: setCurrent, link: c, onClick: () => setCurrent(c), bg: 'backgroundModal', p: '0.2rem' }))),\n                !!current && React.createElement(ListItem, { current: current, setMode: setMode, setCurrent: setCurrent, link: current, p: '0.2rem' }),\n                children?.map(c => (React.createElement(ListItem, { key: c?.id, current: current, setMode: setMode, setCurrent: setCurrent, link: c, onClick: () => setCurrent(c) })))));\n    };\n    return ({ style, link, onChange, search, query, fillSize, children = null, }) => {\n        const [currentId, setCurrentId] = React.useState(link?.id || 0);\n        const setCurrent = React.useCallback((link) => setCurrentId(link?.id || 0));\n        const { data: [current] = [] } = deep.useDeepSubscription({ id: currentId });\n        const [mode, setMode] = React.useState(typeof (search) === 'string' ? 'Search' : typeof (query) === 'object' ? 'Query' : 'Contains');\n        const [viewSize, setViewSize] = React.useState({ height: 400, width: 450 });\n        React.useEffect(() => onChange && onChange(current), [current]);\n        const [trees, setTrees] = React.useState([]);\n        React.useEffect(() => {\n            mode === 'Trees' && (async () => {\n                setTrees((await deep.select({\n                    link_id: { _eq: current?.id },\n                    parent_id: { _eq: current?.id },\n                    distinct_on: ['tree_id'],\n                }, {\n                    table: 'tree',\n                    returning: `\n          id link_id tree_id root_id depth position_id\n        `,\n                }))?.data);\n            })();\n        }, [mode, current]);\n        const [tree, setTree] = React.useState();\n        React.useEffect(() => setTree(), [mode, current]);\n        const [q, setQ] = React.useState(query);\n        const setQoDebounce = useDebounceCallback((q) => {\n            try {\n                setQo(json5.parse(q));\n            }\n            catch (error) { }\n        }, 1000);\n        const [qo, setQo] = React.useState(q);\n        const [s, setS] = React.useState(search || '');\n        const setSoDebounce = useDebounceCallback((s) => {\n            const num = parseFloat(s);\n            const _or = [];\n            if (!Number.isNaN(num)) {\n                _or.push({ id: num }, { number: { value: num } });\n            }\n            _or.push({ string: { value: s } }, { string: { value: { _ilike: `%${s}%` } } }, { string: { value: { _similar: s } } }, { in: { type_id: deep.idLocal('@deep-foundation/core', 'Contain'), string: { value: s } } }, { in: { type_id: deep.idLocal('@deep-foundation/core', 'Contain'), string: { value: { _ilike: `%${s}%` } } } }, { in: { type_id: deep.idLocal('@deep-foundation/core', 'Contain'), string: { value: { _similar: s } } } });\n            const query = JSON.stringify({\n                _not: { type_id: deep.idLocal('@deep-foundation/core', 'Contain') },\n                _or,\n            });\n            setQ(query);\n            try {\n                setQo(json5.parse(query));\n            }\n            catch (error) { }\n        }, 1000);\n        const { colorMode } = useColorMode();\n        const bg = useColorModeValue('#eeeeee', '#434343');\n        const hover = useColorModeValue('white', '#1e1e1e');\n        const borderColor = useColorModeValue('#434343', '#eeeeee');\n        const color = useColorModeValue('#1e1e1e', 'white');\n        const body = React.createElement(Box, { sx: {\n                height: fillSize ? '100%' : viewSize.height,\n                width: fillSize ? '100%' : viewSize.width,\n                overflowY: 'auto',\n                position: 'relative',\n                borderColor: 'borderColor',\n                borderWidth: 'thin',\n                borderRadius: '0.5rem',\n                p: '0.2rem',\n                ...style\n            } },\n            React.createElement(HStack, { align: 'stretch', justifyContent: 'space-between', sx: { position: 'sticky', top: 0, mb: '0.3rem' }, bg: 'transparent' },\n                React.createElement(Button, { variant: 'solid', size: 'sm', background: !(mode === 'Search') ? 'backgroundModal' : 'gray.400', borderColor: !(mode === 'Search') ? 'borderColor' : 'backgroundModal', borderWidth: 'thin', onClick: () => setMode('Search') }, \"\\uD83E\\uDEAC\"),\n                React.createElement(Button, { variant: 'solid', size: 'sm', background: !(mode === 'Query') ? 'backgroundModal' : 'gray.400', borderColor: !(mode === 'Query') ? 'borderColor' : 'backgroundModal', borderWidth: 'thin', onClick: () => setMode('Query') }, \"\\uD83D\\uDD0D\"),\n                React.createElement(Button, { variant: 'solid', size: 'sm', background: !(mode === 'Contains') ? 'backgroundModal' : 'gray.400', borderColor: !(mode === 'Contains') ? 'borderColor' : 'backgroundModal', borderWidth: 'thin', onClick: () => setMode('Contains') }, \"\\uD83D\\uDDC2\"),\n                React.createElement(Button, { variant: 'solid', size: 'sm', background: !(mode === 'In/Out') ? 'backgroundModal' : 'gray.400', borderColor: !(mode === 'In/Out') ? 'borderColor' : 'backgroundModal', borderWidth: 'thin', onClick: () => setMode('In/Out') }, \"In/Out\"),\n                React.createElement(Button, { variant: 'solid', size: 'sm', background: !(mode === 'Trees') ? 'backgroundModal' : 'gray.400', borderColor: !(mode === 'Trees') ? 'borderColor' : 'backgroundModal', borderWidth: 'thin', onClick: () => setMode('Trees') }, \"\\uD83C\\uDF32\")),\n            mode === 'Search' && React.createElement(React.Fragment, null,\n                current && React.createElement(List, { link: link, current: current, setMode: setMode, setCurrent: setCurrent, parentsQuery: { id: 0 }, childrenQuery: { id: 0 } }),\n                React.createElement(Input, { autoFocus: true, type: \"text\", variant: 'filled', variant: 'filled', bg: bg, color: color, borderWidth: 'thin', borderColor: borderColor, _hover: { bg: hover }, _focus: { bg: bg }, sx: {\n                        width: '100%',\n                    }, onChange: (e) => {\n                        setS(e.target.value);\n                        setSoDebounce(e.target.value);\n                    }, value: s }),\n                React.createElement(List, { link: link, current: null, setMode: setMode, setCurrent: setCurrent, parentsQuery: { id: 0 }, childrenQuery: {\n                        ...qo,\n                        limit: 30,\n                    } })),\n            mode === 'Query' && React.createElement(React.Fragment, null,\n                current && React.createElement(List, { link: link, current: current, setMode: setMode, setCurrent: setCurrent, parentsQuery: { id: 0 }, childrenQuery: { id: 0 } }),\n                React.createElement(MonacoEditor, { options: {\n                        minimap: {\n                            enabled: false\n                        },\n                        lineNumbers: 'off',\n                        wordWrap: true,\n                    }, height: \"200px\", width: \"100%\", theme: colorMode === 'light' ? 'light' : \"vs-dark\", defaultLanguage: \"json\", defaultValue: q || '', onChange: (value) => {\n                        setQ(value);\n                        setQoDebounce(value);\n                    } }),\n                React.createElement(List, { link: link, current: null, setMode: setMode, setCurrent: setCurrent, parentsQuery: { id: 0 }, childrenQuery: {\n                        ...qo,\n                        limit: 30,\n                    } })),\n            mode === 'Contains' && current && React.createElement(List, { link: link, current: current, setMode: setMode, setCurrent: setCurrent, parentsQuery: {\n                    out: {\n                        type_id: deep.idLocal('@deep-foundation/core', 'Contain'),\n                        to_id: current?.id,\n                    }\n                }, childrenQuery: {\n                    in: {\n                        type_id: deep.idLocal('@deep-foundation/core', 'Contain'),\n                        from_id: current?.id,\n                    }\n                } }),\n            mode === 'In/Out' && current && React.createElement(React.Fragment, null,\n                React.createElement(List, { link: link, current: current, setMode: setMode, setCurrent: setCurrent, parentsQuery: {\n                        to_id: current?.id\n                    }, childrenQuery: {\n                        from_id: current?.id\n                    } })),\n            mode === 'Trees' && React.createElement(React.Fragment, null,\n                React.createElement(VStack, { divider: React.createElement(StackDivider, { borderColor: 'borderColor' }), spacing: 1, align: 'stretch', bg: 'gray.800' }, [React.createElement(Wrap, { key: tree?.id || 0, spacing: 1, justify: 'center' }, trees?.map(t => React.createElement(WrapItem, { key: t?.id },\n                        React.createElement(Button, { size: 'sm', variant: tree?.id === t?.id ? 'solid' : \"outline\", onClick: () => setTree(t) }, deep.nameLocal(t?.tree_id)))))]),\n                !tree && React.createElement(React.Fragment, null,\n                    React.createElement(List, { link: link, current: current, setMode: setMode, setCurrent: setCurrent, parentsQuery: {\n                            id: 0\n                        }, childrenQuery: {\n                            id: 0\n                        } })),\n                !!tree && !!current?.id && React.createElement(React.Fragment, null, [React.createElement(List, { key: tree?.id, link: link, current: current, setMode: setMode, setCurrent: setCurrent, parentsQuery: {\n                            down: {\n                                tree_id: tree?.tree_id,\n                                position_id: tree?.position_id,\n                                link_id: current?.id\n                            },\n                        }, childrenQuery: { _and: [\n                                { up: {\n                                        tree_id: tree?.tree_id,\n                                        root_id: tree?.root_id,\n                                        parent_id: tree?.link_id,\n                                        depth: tree?.depth,\n                                    } },\n                                { down: {\n                                        tree_id: tree?.tree_id,\n                                        root_id: tree?.root_id,\n                                        depth: tree?.depth + 1,\n                                    } },\n                            ] } })])),\n            children);\n        return React.createElement(React.Fragment, null, fillSize\n            ? body\n            : React.createElement(Resize, { onChangeSize: (viewSize) => setViewSize(viewSize), style: {\n                    borderRadius: 5,\n                    border: 'none',\n                } }, body));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxDQUFDLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxFQUFFLEVBQUU7SUFDcEIsTUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQy9CLE1BQU0sRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxZQUFZLEVBQUUsR0FBRyxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLEdBQUcsT0FBTyxDQUFDLGtCQUFrQixDQUFDLENBQUM7SUFDNUgsTUFBTSxFQUFFLE1BQU0sRUFBRSxHQUFHLE9BQU8sQ0FBQywyQkFBMkIsQ0FBQyxDQUFDO0lBQ3hELE1BQU0sWUFBWSxHQUFHLE9BQU8sQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO0lBQ3JELE1BQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUMvQixNQUFNLEVBQUMsZUFBZSxFQUFFLGdCQUFnQixFQUFFLEdBQUUsT0FBTyxDQUFDLGdCQUFnQixDQUFDLENBQUM7SUFDdEUsTUFBTSxFQUFFLG1CQUFtQixFQUFFLEdBQUcsT0FBTyxDQUFDLHNCQUFzQixDQUFDLENBQUM7SUFDaEUsTUFBTSxFQUFFLGlCQUFpQixFQUFFLFlBQVksRUFBRSxHQUFHLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBRXhFLE1BQU0sU0FBUyxHQUFHLENBQUMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxJQUFJLEVBQUUsUUFBUSxFQUFFLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyx1QkFBdUIsRUFBRSxRQUFRLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLEtBQUssQ0FBQTtJQUVoSCxNQUFNLFFBQVEsR0FBRyxDQUFDLElBQUksRUFBRSxFQUFF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RUFBRSxPQUFPO3dDQUN0QixLQUFLLEVBQUUsSUFBSSxFQUFFLEtBQUssR0FBRyxDQUFDO3FDQUN2QixFQUFFOzZCQUNKLEVBQUMsR0FDRixDQUFDLENBQ0YsQ0FDRjtZQUNGLFFBQVEsQ0FDTCxDQUFBO1FBRU4sT0FBTywwQ0FDSixRQUFRO1lBQ1QsQ0FBQyxDQUFDLElBQUk7WUFDTixDQUFDLENBQUMsb0JBQUMsTUFBTSxJQUNMLFlBQVksRUFBRSxDQUFDLFFBQVEsRUFBRSxFQUFFLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxFQUNqRCxLQUFLLEVBQUU7b0JBR1AsWUFBWSxFQUFFLENBQUM7b0JBQ2YsTUFBTSxFQUFFLE1BQU07aUJBQ2YsSUFDRCxJQUFJLENBQVUsQ0FDZixDQUFDO0lBQ04sQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiKHsgZGVlcCwgcmVxdWlyZSB9KSA9PiB7XG4gIGNvbnN0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbiAgY29uc3QgeyBXcmFwLCBXcmFwSXRlbSwgU3RhY2ssIEhTdGFjaywgVlN0YWNrLCBGbGV4LCBTdGFja0RpdmlkZXIsIEJveCwgQnV0dG9uLCBUZXh0LCBJbnB1dCB9ID0gcmVxdWlyZSgnQGNoYWtyYS11aS9yZWFjdCcpO1xuICBjb25zdCB7IFJlc2l6ZSB9ID0gcmVxdWlyZSgnQGRlZXAtZm91bmRhdGlvbi9kZWVwY2FzZScpO1xuICBjb25zdCBNb25hY29FZGl0b3IgPSByZXF1aXJlKCdAbW9uYWNvLWVkaXRvci9yZWFjdCcpO1xuICBjb25zdCBqc29uNSA9IHJlcXVpcmUoJ2pzb241Jyk7XG4gIGNvbnN0IHtUYkFycm93TW92ZUxlZnQsIFRiQXJyb3dNb3ZlUmlnaHQgfSA9cmVxdWlyZSgncmVhY3QtaWNvbnMvdGInKTtcbiAgY29uc3QgeyB1c2VEZWJvdW5jZUNhbGxiYWNrIH0gPSByZXF1aXJlKCdAcmVhY3QtaG9vay9kZWJvdW5jZScpO1xuICBjb25zdCB7IHVzZUNvbG9yTW9kZVZhbHVlLCB1c2VDb2xvck1vZGUgfSA9IHJlcXVpcmUoJ0BjaGFrcmEtdWkvcmVhY3QnKTtcblxuICBjb25zdCBnZXRTeW1ib2wgPSAobGluaykgPT4gbGluaz8uaW5CeVR5cGU/LltkZWVwLmlkTG9jYWwoJ0BkZWVwLWZvdW5kYXRpb24vY29yZScsICdTeW1ib2wnKV0/LlswXT8udmFsdWU/LnZhbHVlXG5cbiAgY29uc3QgZ2V0VHlwZXMgPSAobGluaykgPT4ge1xuICAgIGNvbnN0IHR5cGVzID0gW107XG4gICAgZm9yIChsZXQgbCA9IGxpbms7IGw/LnR5cGUgJiYgbD8uaWQgIT09IDE7IGwgPSBsaW5rPy50eXBlKSB0eXBlcy5wdXNoKGxpbms/LnR5cGVfaWQpO1xuICAgIHJldHVybiB0eXBlcztcbiAgfTtcblxuICBjb25zdCBDb250YWluID0gZGVlcC5pZExvY2FsKCdAZGVlcC1mb3VuZGF0aW9uL2NvcmUnLCAnQ29udGFpbicpO1xuXG4gIGNvbnN0IExpc3RJdGVtID0gKHsgbGluaywgY3VycmVudCwgc2V0Q3VycmVudCwgIHNldE1vZGUsIC4uLnByb3BzIH0pID0+IHtcbiAgICAvLyBjb25zdCBbX19zeW1ib2xdID0gZGVlcC51c2VNaW5pbGlua3NTdWJzY3JpcHRpb24oe1xuICAgIC8vICAgdHlwZV9pZDogZGVlcC5pZExvY2FsKCdAZGVlcC1mb3VuZGF0aW9uL2NvcmUnLCAnU3ltYm9sJyksXG4gICAgLy8gICB0b19pZDogeyBfaW46IGdldFR5cGVzKGxpbmspIH0sYGBgXG4gICAgLy8gfSk7XG4gICAgLy8gY29uc3QgX3N5bWJvbCA9IF9fc3ltYm9sPy52YWx1ZT8udmFsdWU7XG4gICAgY29uc3QgX3N5bWJvbCA9IGdldFN5bWJvbChsaW5rKSB8fCBnZXRTeW1ib2wobGluaz8udHlwZSkgfHwgZ2V0U3ltYm9sKGxpbms/LnR5cGU/LnR5cGUpO1xuICAgIGNvbnN0IF92YWx1ZSA9IGRlZXAuc3RyaW5naWZ5KGxpbms/LnZhbHVlPy52YWx1ZSk7XG4gICAgY29uc3QgX192YWx1ZSA9IF92YWx1ZT8ubGVuZ3RoID4gMjkgPyBfdmFsdWUuc2xpY2UoMCwgMjApKycuLi4nK192YWx1ZS5zbGljZSgtOSwgX3ZhbHVlLmxlbmd0aCkgOiBfdmFsdWU7XG5cbiAgICBjb25zdCBbZnJvbUxdID0gZGVlcC51c2VNaW5pbGlua3NTdWJzY3JpcHRpb24oe1xuICAgICAgb3V0OiB7IGlkOiBsaW5rLmlkLCB0eXBlX2lkOiBDb250YWluIH1cbiAgICB9KTtcbiAgICBjb25zdCBbcGFyZW50TF0gPSBkZWVwLnVzZU1pbmlsaW5rc1N1YnNjcmlwdGlvbihsaW5rLnR5cGVfaWQgPT09IENvbnRhaW4gPyB7XG4gICAgICBvdXQ6IHsgdHlwZV9pZDogQ29udGFpbiwgdG9faWQ6IGxpbmsuZnJvbV9pZCB9LFxuICAgIH0gOiB7XG4gICAgICBvdXQ6IHsgdHlwZV9pZDogQ29udGFpbiwgdG9faWQ6IGxpbmsuaWQgfSxcbiAgICB9KTtcbiAgICBjb25zdCBicm9hZGNydW1icyA9IFtdO1xuICAgIGlmIChmcm9tTCkgYnJvYWRjcnVtYnMucHVzaChmcm9tTC5pZCk7XG4gICAgbGV0IG5leHQgPSBwYXJlbnRMO1xuICAgIGRvIHtcbiAgICAgIGlmIChuZXh0KSB7XG4gICAgICAgIGlmIChkZWVwLm5hbWVMb2NhbChuZXh0Py5pZCkpIGJyb2FkY3J1bWJzLnB1c2gobmV4dD8uaWQpO1xuICAgICAgICBuZXh0ID0gbmV4dD8uaW5CeVR5cGU/LltDb250YWluXT8uWzBdPy5mcm9tO1xuICAgICAgfVxuICAgIH0gd2hpbGUgKG5leHQpO1xuICAgIC8vIGlmIChwYXJlbnRMKSBicm9hZGNydW1icy5wdXNoKHBhcmVudEwuaWQpO1xuXG4gICAgcmV0dXJuICg8Qm94XG4gICAgICBiYWNrZ3JvdW5kPSdiYWNrZ3JvdW5kTW9kYWwnIHA9JzAuMnJlbScgey4uLnByb3BzfVxuICAgICAgeHM9e3tcbiAgICAgICAgYm9yZGVyOiBjdXJyZW50Py5pZCA9PT0gbGluaz8uaWQgPyAnM3B4ICNmZmZmZmYgc29saWQnIDogJzBweCB0cmFuc3BhcmVudCBzb2xpZCcsXG4gICAgICAgIHRyYW5zaXRpb246ICdhbGwgMXMgZWFzZScsXG4gICAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxuICAgICAgfX1cbiAgICAgIF9ob3Zlcj17eyBib3JkZXI6ICczcHggI2ZmZmZmZjdkIHNvbGlkJyB9fVxuICAgID5cbiAgICAgIDxCb3ggbXI9JzAuNXJlbSc+PFRleHQ+e19zeW1ib2x9IHtsaW5rPy5pZH0ge2RlZXAubmFtZUxvY2FsKGxpbms/LmlkKX08L1RleHQ+PC9Cb3g+XG4gICAgICA8Qm94IG1yPScwLjVyZW0nPjxUZXh0PlxuICAgICAgICB7YnJvYWRjcnVtYnMubWFwKGlkID0+IDxCdXR0b25cbiAgICAgICAgICBrZXk9e2lkfVxuICAgICAgICAgIHNpemU9XCJ4c1wiXG4gICAgICAgICAgb25DbGljaz17YXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgeyBkYXRhOiBbbmV4dF0gfSA9IGF3YWl0IGRlZXAuc2VsZWN0KGlkKTtcbiAgICAgICAgICAgIHNldEN1cnJlbnQobmV4dCk7XG4gICAgICAgICAgICBzZXRNb2RlKCdDb250YWlucycpO1xuICAgICAgICAgIH19XG4gICAgICAgID57ZGVlcC5uYW1lTG9jYWwoaWQpfTwvQnV0dG9uPil9XG4gICAgICA8L1RleHQ+PC9Cb3g+XG4gICAgICA8Qm94IG1yPScwLjVyZW0nPjxUZXh0PntfX3ZhbHVlfTwvVGV4dD48L0JveD5cbiAgICAgIDxGbGV4IFxuICAgICAgICBkaXZpZGVyPXs8U3RhY2tEaXZpZGVyIGJvcmRlckNvbG9yPSdib3JkZXJDb2xvcicgLz59XG4gICAgICAgIHNwYWNpbmc9ezJ9XG4gICAgICAgIGp1c3RpZnlDb250ZW50PSdzcGFjZS1iZXR3ZWVuJ1xuICAgICAgICBhbGlnbkl0ZW1zPSdjZW50ZXInXG4gICAgICAgIHN4PXt7XG4gICAgICAgICAgJyYgPiAqOm5vdCg6bGFzdC1vZi10eXBlKSc6IHtcbiAgICAgICAgICAgIG1yOiAnMC41cmVtJ1xuICAgICAgICAgIH1cbiAgICAgICAgfX1cbiAgICAgID5cbiAgICAgICAgeyEhbGluaz8uZnJvbV9pZCAmJiA8QnV0dG9uIFxuICAgICAgICAgIHNpemU9J3NtJ1xuICAgICAgICAgIHZhcmlhbnQ9XCJvdXRsaW5lXCIgXG4gICAgICAgICAgd2lkdGg9J21heC1jb250ZW50J1xuICAgICAgICAgIHJpZ2h0SWNvbj17PFRiQXJyb3dNb3ZlTGVmdCBzaXplPScxLjNyZW0nIC8+fVxuICAgICAgICAgIG9uQ2xpY2s9e2FzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgZGF0YTogW25leHRdIH0gPSBhd2FpdCBkZWVwLnNlbGVjdChsaW5rPy5mcm9tX2lkKTtcbiAgICAgICAgICAgIHNldEN1cnJlbnQobmV4dCk7XG4gICAgICAgICAgfX1cbiAgICAgICAgPjxUZXh0IGZvbnRTaXplPSdzbSc+e2xpbms/LmZyb21faWQgfHwgMH08L1RleHQ+PC9CdXR0b24+fVxuICAgICAgICB7ISFsaW5rPy50b19pZCAmJiA8QnV0dG9uIFxuICAgICAgICAgIHNpemU9J3NtJ1xuICAgICAgICAgIGZvbnRTaXplPSdzbSdcbiAgICAgICAgICB2YXJpYW50PVwib3V0bGluZVwiXG4gICAgICAgICAgbGVmdEljb249ezxUYkFycm93TW92ZVJpZ2h0IHNpemU9JzEuM3JlbScgLz59IFxuICAgICAgICAgICAgb25DbGljaz17YXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgeyBkYXRhOiBbbmV4dF0gfSA9IGF3YWl0IGRlZXAuc2VsZWN0KGxpbms/LnRvX2lkKTtcbiAgICAgICAgICAgIHNldEN1cnJlbnQobmV4dCk7XG4gICAgICAgICAgfX1cbiAgICAgICAgPjxUZXh0PntsaW5rPy50b19pZCB8fCAwfTwvVGV4dD48L0J1dHRvbj59XG4gICAgICAgIHshIWxpbms/LnR5cGVfaWQgJiYgPEJ1dHRvblxuICAgICAgICAgIHNpemU9J3NtJyBcbiAgICAgICAgICBmb250U2l6ZT0nc20nXG4gICAgICAgICAgdmFyaWFudD1cIm91dGxpbmVcIiBcbiAgICAgICAgICAgIG9uQ2xpY2s9e2FzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgZGF0YTogW25leHRdIH0gPSBhd2FpdCBkZWVwLnNlbGVjdChsaW5rPy50eXBlX2lkKTtcbiAgICAgICAgICAgIHNldEN1cnJlbnQobmV4dCk7XG4gICAgICAgICAgfX1cbiAgICAgICAgPjxUZXh0PntsaW5rPy50eXBlX2lkfSB7ZGVlcC5uYW1lTG9jYWwobGluaz8udHlwZV9pZCl9PC9UZXh0PjwvQnV0dG9uPn1cbiAgICAgIDwvRmxleD5cbiAgICA8L0JveD4pO1xuICB9O1xuXG4gIGNvbnN0IExpc3QgPSAoe1xuICAgIGxpbmssIHBhcmVudHNRdWVyeSwgY2hpbGRyZW5RdWVyeSwgY3VycmVudCwgc2V0Q3VycmVudCwgc2V0TW9kZVxuICB9KSA9PiB7XG4gICAgY29uc3QgeyBkYXRhOiBwYXJlbnRzIH0gPSBkZWVwLnVzZURlZXBTdWJzY3JpcHRpb24ocGFyZW50c1F1ZXJ5KTtcblxuICAgIGNvbnN0IHsgZGF0YTogY2hpbGRyZW4gfSA9IGRlZXAudXNlRGVlcFN1YnNjcmlwdGlvbihjaGlsZHJlblF1ZXJ5KTtcblxuICAgIGNvbnN0IGRlc2NyaXB0aW9uUXVlcnkgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRvOiB7IGRvd246IHtcbiAgICAgICAgICB0cmVlX2lkOiBkZWVwLmlkTG9jYWwoJ0BkZWVwLWZvdW5kYXRpb24vY29yZScsICd0eXBlc1RyZWUnKSxcbiAgICAgICAgICBsaW5rX2lkOiB7IF9pbjogW1xuICAgICAgICAgICAgLi4uKGN1cnJlbnQ/LmlkID8gW2N1cnJlbnQuaWRdIDogW10pLFxuICAgICAgICAgICAgLi4ucGFyZW50cz8ubWFwKGwgPT4gbC5pZCksXG4gICAgICAgICAgICAuLi5jaGlsZHJlbj8ubWFwKGwgPT4gbC5pZCksXG4gICAgICAgICAgICAuLi5wYXJlbnRzPy5tYXAobCA9PiBsLmZyb21faWQpLFxuICAgICAgICAgICAgLi4uY2hpbGRyZW4/Lm1hcChsID0+IGwuZnJvbV9pZCksXG4gICAgICAgICAgICAuLi5wYXJlbnRzPy5tYXAobCA9PiBsLnRvX2lkKSxcbiAgICAgICAgICAgIC4uLmNoaWxkcmVuPy5tYXAobCA9PiBsLnRvX2lkKSxcbiAgICAgICAgICBdIH0sXG4gICAgICAgICB9IH0sXG4gICAgICAgIHR5cGVfaWQ6IHsgX2luOiBbZGVlcC5pZExvY2FsKCdAZGVlcC1mb3VuZGF0aW9uL2NvcmUnLCAnQ29udGFpbicpLCBkZWVwLmlkTG9jYWwoJ0BkZWVwLWZvdW5kYXRpb24vY29yZScsICdTeW1ib2wnKV0gfSxcbiAgICAgIH07XG4gICAgfSwgW2N1cnJlbnQsIHBhcmVudHMsIGNoaWxkcmVuXSk7XG4gICAgY29uc3QgZGVzY3JpcHRpb24gPSBkZWVwLnVzZURlZXBTdWJzY3JpcHRpb24oZGVzY3JpcHRpb25RdWVyeSk7XG5cbiAgICBkZWVwLnVzZURlZXBTdWJzY3JpcHRpb24oe1xuICAgICAgZG93bjoge1xuICAgICAgICB0cmVlX2lkOiB7IF9pbjogW1xuICAgICAgICAgIGRlZXAuaWRMb2NhbCgnQGRlZXAtZm91bmRhdGlvbi9jb3JlJywgJ3R5cGVzVHJlZScpLFxuICAgICAgICAgIGRlZXAuaWRMb2NhbCgnQGRlZXAtZm91bmRhdGlvbi9jb3JlJywgJ2NvbnRhaW5UcmVlJyksXG4gICAgICAgIF0gfSxcbiAgICAgICAgbGlua19pZDogeyBfaW46IFtcbiAgICAgICAgICAuLi4oY3VycmVudD8uaWQgPyBbY3VycmVudC5pZF0gOiBbXSksXG4gICAgICAgICAgLi4ucGFyZW50cz8ubWFwKGwgPT4gbC5pZCksXG4gICAgICAgICAgLi4uY2hpbGRyZW4/Lm1hcChsID0+IGwuaWQpLFxuICAgICAgICAgIC4uLnBhcmVudHM/Lm1hcChsID0+IGwuZnJvbV9pZCksXG4gICAgICAgICAgLi4uY2hpbGRyZW4/Lm1hcChsID0+IGwuZnJvbV9pZCksXG4gICAgICAgICAgLi4ucGFyZW50cz8ubWFwKGwgPT4gbC50b19pZCksXG4gICAgICAgICAgLi4uY2hpbGRyZW4/Lm1hcChsID0+IGwudG9faWQpLFxuICAgICAgICBdIH0sXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIDw+eyFkZXNjcmlwdGlvbi5sb2FkaW5nICYmXG4gICAgICA8VlN0YWNrXG4gICAgICAgIGRpdmlkZXI9ezxTdGFja0RpdmlkZXIgYm9yZGVyQ29sb3I9J2JvcmRlckNvbG9yJyAvPn1cbiAgICAgICAgc3BhY2luZz17MX1cbiAgICAgICAgYWxpZ249J3N0cmV0Y2gnXG4gICAgICAgIGZvbnRTaXplPSdzbSdcbiAgICAgID5cbiAgICAgICAge3BhcmVudHM/Lm1hcChjID0+IChcbiAgICAgICAgICA8TGlzdEl0ZW0ga2V5PXtjPy5pZH0gY3VycmVudD17Y3VycmVudH0gc2V0TW9kZT17c2V0TW9kZX0gc2V0Q3VycmVudD17c2V0Q3VycmVudH0gbGluaz17Y30gb25DbGljaz17KCkgPT4gc2V0Q3VycmVudChjKX0gYmc9J2JhY2tncm91bmRNb2RhbCcgcD0nMC4ycmVtJyAvPlxuICAgICAgICApKX1cbiAgICAgICAgeyEhY3VycmVudCAmJiA8TGlzdEl0ZW0gY3VycmVudD17Y3VycmVudH0gc2V0TW9kZT17c2V0TW9kZX0gIHNldEN1cnJlbnQ9e3NldEN1cnJlbnR9IGxpbms9e2N1cnJlbnR9ICBwPScwLjJyZW0nIC8+fVxuICAgICAgICB7Y2hpbGRyZW4/Lm1hcChjID0+IChcbiAgICAgICAgICA8TGlzdEl0ZW0ga2V5PXtjPy5pZH0gY3VycmVudD17Y3VycmVudH0gc2V0TW9kZT17c2V0TW9kZX0gIHNldEN1cnJlbnQ9e3NldEN1cnJlbnR9IGxpbms9e2N9IG9uQ2xpY2s9eygpID0+IHNldEN1cnJlbnQoYyl9Lz5cbiAgICAgICAgKSl9XG4gICAgICA8L1ZTdGFjaz5cbiAgICB9PC8+O1xuICB9O1xuXG4gIHJldHVybiAoe1xuICAgIHN0eWxlLFxuICAgIGxpbmssXG4gICAgb25DaGFuZ2UsXG4gICAgc2VhcmNoLFxuICAgIHF1ZXJ5LFxuICAgIGZpbGxTaXplLFxuICAgIGNoaWxkcmVuID0gbnVsbCxcbiAgfToge1xuICAgIHN0eWxlOiBhbnk7XG4gICAgbGluazogYW55O1xuICAgIG9uQ2hhbmdlPzogYW55O1xuICAgIHNlYXJjaD86IGFueTtcbiAgICBxdWVyeT86IGFueTtcbiAgICBmaWxsU2l6ZT86IGJvb2xlYW47XG4gICAgY2hpbGRyZW4/OiBhbnk7XG4gIH0pID0+IHtcbiAgICBjb25zdCBbY3VycmVudElkLCBzZXRDdXJyZW50SWRdID0gUmVhY3QudXNlU3RhdGU8bnVtYmVyPihsaW5rPy5pZCB8fCAwKVxuICAgIGNvbnN0IHNldEN1cnJlbnQgPSBSZWFjdC51c2VDYWxsYmFjaygobGluaykgPT4gc2V0Q3VycmVudElkKGxpbms/LmlkIHx8IDApKTtcbiAgICBjb25zdCB7IGRhdGE6IFtjdXJyZW50XSA9IFtdIH0gPSBkZWVwLnVzZURlZXBTdWJzY3JpcHRpb24oeyBpZDogY3VycmVudElkIH0pO1xuICAgIGNvbnN0IFttb2RlLCBzZXRNb2RlXSA9IFJlYWN0LnVzZVN0YXRlKHR5cGVvZihzZWFyY2gpID09PSAnc3RyaW5nJyA/ICdTZWFyY2gnIDogdHlwZW9mKHF1ZXJ5KSA9PT0gJ29iamVjdCcgPyAnUXVlcnknIDogJ0NvbnRhaW5zJyk7XG4gICAgY29uc3QgWyB2aWV3U2l6ZSwgc2V0Vmlld1NpemUgXSA9IFJlYWN0LnVzZVN0YXRlKHsgaGVpZ2h0OiA0MDAsIHdpZHRoOiA0NTAgfSk7XG5cbiAgICBSZWFjdC51c2VFZmZlY3QoKCkgPT4gb25DaGFuZ2UgJiYgb25DaGFuZ2UoY3VycmVudCksIFtjdXJyZW50XSk7XG5cbiAgICBjb25zdCBbdHJlZXMsIHNldFRyZWVzXSA9IFJlYWN0LnVzZVN0YXRlKFtdKTtcbiAgICBSZWFjdC51c2VFZmZlY3QoKCkgPT4geyBtb2RlID09PSAnVHJlZXMnICYmIChhc3luYyAoKSA9PiB7XG4gICAgICBzZXRUcmVlcygoYXdhaXQgZGVlcC5zZWxlY3Qoe1xuICAgICAgICBsaW5rX2lkOiB7IF9lcTogY3VycmVudD8uaWQgfSxcbiAgICAgICAgcGFyZW50X2lkOiB7IF9lcTogY3VycmVudD8uaWQgfVxuICAgICAgICBkaXN0aW5jdF9vbjogWyd0cmVlX2lkJ10sXG4gICAgICB9LCB7XG4gICAgICAgIHRhYmxlOiAndHJlZScsXG4gICAgICAgIHJldHVybmluZzogYFxuICAgICAgICAgIGlkIGxpbmtfaWQgdHJlZV9pZCByb290X2lkIGRlcHRoIHBvc2l0aW9uX2lkXG4gICAgICAgIGAsXG4gICAgICB9KSk/LmRhdGEpO1xuICAgIH0pKCkgfSwgW21vZGUsIGN1cnJlbnRdKTtcbiAgICBjb25zdCBbdHJlZSwgc2V0VHJlZV0gPSBSZWFjdC51c2VTdGF0ZSgpO1xuICAgIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiBzZXRUcmVlKCksIFttb2RlLCBjdXJyZW50XSk7XG5cbiAgICBjb25zdCBbcSwgc2V0UV0gPSBSZWFjdC51c2VTdGF0ZShxdWVyeSk7XG4gICAgY29uc3Qgc2V0UW9EZWJvdW5jZSA9IHVzZURlYm91bmNlQ2FsbGJhY2soKHEpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHNldFFvKGpzb241LnBhcnNlKHEpKTtcbiAgICAgIH0gY2F0Y2goZXJyb3IpIHt9XG4gICAgfSwgMTAwMCk7XG4gICAgY29uc3QgW3FvIHNldFFvXSA9IFJlYWN0LnVzZVN0YXRlKHEpO1xuXG4gICAgY29uc3QgW3MsIHNldFNdID0gUmVhY3QudXNlU3RhdGUoc2VhcmNoIHx8ICcnKTtcbiAgICBjb25zdCBzZXRTb0RlYm91bmNlID0gdXNlRGVib3VuY2VDYWxsYmFjaygocykgPT4ge1xuICAgICAgY29uc3QgbnVtID0gcGFyc2VGbG9hdChzKTtcbiAgICAgIGNvbnN0IF9vciA9IFtdO1xuICAgICAgaWYgKCFOdW1iZXIuaXNOYU4obnVtKSkge1xuICAgICAgICBfb3IucHVzaCh7IGlkOiBudW0gfSwgeyBudW1iZXI6IHsgdmFsdWU6IG51bSB9IH0pO1xuICAgICAgfVxuICAgICAgX29yLnB1c2goXG4gICAgICAgIHsgc3RyaW5nOiB7IHZhbHVlOiBzIH0gfSxcbiAgICAgICAgeyBzdHJpbmc6IHsgdmFsdWU6IHsgX2lsaWtlOiBgJSR7c30lYCB9IH0gfSxcbiAgICAgICAgeyBzdHJpbmc6IHsgdmFsdWU6IHsgX3NpbWlsYXI6IHMgfSB9IH0sXG4gICAgICAgIHsgaW46IHsgdHlwZV9pZDogZGVlcC5pZExvY2FsKCdAZGVlcC1mb3VuZGF0aW9uL2NvcmUnLCAnQ29udGFpbicpLCBzdHJpbmc6IHsgdmFsdWU6IHMgfSB9IH0sXG4gICAgICAgIHsgaW46IHsgdHlwZV9pZDogZGVlcC5pZExvY2FsKCdAZGVlcC1mb3VuZGF0aW9uL2NvcmUnLCAnQ29udGFpbicpLCBzdHJpbmc6IHsgdmFsdWU6IHsgX2lsaWtlOiBgJSR7c30lYCB9IH0gfSB9LFxuICAgICAgICB7IGluOiB7IHR5cGVfaWQ6IGRlZXAuaWRMb2NhbCgnQGRlZXAtZm91bmRhdGlvbi9jb3JlJywgJ0NvbnRhaW4nKSwgc3RyaW5nOiB7IHZhbHVlOiB7IF9zaW1pbGFyOiBzIH0gfSB9IH0sXG4gICAgICApO1xuICAgICAgXG4gICAgICBcbiAgICAgIGNvbnN0IHF1ZXJ5ID0gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBfbm90OiB7IHR5cGVfaWQ6IGRlZXAuaWRMb2NhbCgnQGRlZXAtZm91bmRhdGlvbi9jb3JlJywgJ0NvbnRhaW4nKSB9LFxuICAgICAgICBfb3IsXG4gICAgICB9KTtcbiAgICAgIHNldFEocXVlcnkpO1xuICAgICAgLy8gc2V0UW9EZWJvdW5jZShxdWVyeSk7XG4gICAgICB0cnkge1xuICAgICAgICBzZXRRbyhqc29uNS5wYXJzZShxdWVyeSkpO1xuICAgICAgfSBjYXRjaChlcnJvcikge31cbiAgICB9LCAxMDAwKTtcblxuICAgIGNvbnN0IHsgY29sb3JNb2RlIH0gPSB1c2VDb2xvck1vZGUoKTtcblxuICAgIGNvbnN0IGJnID0gdXNlQ29sb3JNb2RlVmFsdWUoJyNlZWVlZWUnLCAnIzQzNDM0MycpO1xuICAgIGNvbnN0IGhvdmVyID0gdXNlQ29sb3JNb2RlVmFsdWUoJ3doaXRlJywgJyMxZTFlMWUnKTtcbiAgICBjb25zdCBib3JkZXJDb2xvciA9IHVzZUNvbG9yTW9kZVZhbHVlKCcjNDM0MzQzJywgJyNlZWVlZWUnKTtcbiAgICBjb25zdCBjb2xvciA9IHVzZUNvbG9yTW9kZVZhbHVlKCcjMWUxZTFlJywgJ3doaXRlJyk7XG5cbiAgICBjb25zdCBib2R5ID0gPEJveCBzeD17eyBcbiAgICAgICAgaGVpZ2h0OiBmaWxsU2l6ZSA/ICcxMDAlJyA6IHZpZXdTaXplLmhlaWdodCwgXG4gICAgICAgIHdpZHRoOiBmaWxsU2l6ZSA/ICcxMDAlJyA6IHZpZXdTaXplLndpZHRoLCBcbiAgICAgICAgb3ZlcmZsb3dZOiAnYXV0bycsIFxuICAgICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJywgXG4gICAgICAgIGJvcmRlckNvbG9yOiAnYm9yZGVyQ29sb3InLCBcbiAgICAgICAgYm9yZGVyV2lkdGg6ICd0aGluJyxcbiAgICAgICAgYm9yZGVyUmFkaXVzOiAnMC41cmVtJyxcbiAgICAgICAgcDogJzAuMnJlbScsXG4gICAgICAgIC4uLnN0eWxlIH19XG4gICAgICA+XG4gICAgICA8SFN0YWNrXG4gICAgICAgIC8vIGRpdmlkZXI9ezxTdGFja0RpdmlkZXIgYm9yZGVyQ29sb3I9J2JvcmRlckNvbG9yJyAvPn1cbiAgICAgICAgLy8gc3BhY2luZz17MX1cbiAgICAgICAgYWxpZ249J3N0cmV0Y2gnXG4gICAgICAgIGp1c3RpZnlDb250ZW50PSdzcGFjZS1iZXR3ZWVuJ1xuICAgICAgICBzeD17eyBwb3NpdGlvbjogJ3N0aWNreScsIHRvcDogMCwgbWI6ICcwLjNyZW0nIH19XG4gICAgICAgIGJnPSd0cmFuc3BhcmVudCdcbiAgICAgID5cbiAgICAgICAgPEJ1dHRvbiB2YXJpYW50PSdzb2xpZCcgc2l6ZT0nc20nIGJhY2tncm91bmQ9eyEobW9kZSA9PT0gJ1NlYXJjaCcpID8gJ2JhY2tncm91bmRNb2RhbCcgOiAnZ3JheS40MDAnfSBib3JkZXJDb2xvcj17IShtb2RlID09PSAnU2VhcmNoJykgPyAnYm9yZGVyQ29sb3InIDogJ2JhY2tncm91bmRNb2RhbCd9IGJvcmRlcldpZHRoPSd0aGluJyBvbkNsaWNrPXsoKSA9PiBzZXRNb2RlKCdTZWFyY2gnKX0+8J+qrDwvQnV0dG9uPlxuICAgICAgICA8QnV0dG9uIHZhcmlhbnQ9J3NvbGlkJyBzaXplPSdzbScgYmFja2dyb3VuZD17IShtb2RlID09PSAnUXVlcnknKSA/ICdiYWNrZ3JvdW5kTW9kYWwnIDogJ2dyYXkuNDAwJ30gYm9yZGVyQ29sb3I9eyEobW9kZSA9PT0gJ1F1ZXJ5JykgPyAnYm9yZGVyQ29sb3InIDogJ2JhY2tncm91bmRNb2RhbCd9IGJvcmRlcldpZHRoPSd0aGluJyBvbkNsaWNrPXsoKSA9PiBzZXRNb2RlKCdRdWVyeScpfT7wn5SNPC9CdXR0b24+XG4gICAgICAgIDxCdXR0b24gdmFyaWFudD0nc29saWQnIHNpemU9J3NtJyBiYWNrZ3JvdW5kPXshKG1vZGUgPT09ICdDb250YWlucycpID8gJ2JhY2tncm91bmRNb2RhbCcgOiAnZ3JheS40MDAnfSBib3JkZXJDb2xvcj17IShtb2RlID09PSAnQ29udGFpbnMnKSA/ICdib3JkZXJDb2xvcicgOiAnYmFja2dyb3VuZE1vZGFsJ30gYm9yZGVyV2lkdGg9J3RoaW4nIG9uQ2xpY2s9eygpID0+IHNldE1vZGUoJ0NvbnRhaW5zJyl9PvCfl4I8L0J1dHRvbj5cbiAgICAgICAgPEJ1dHRvbiB2YXJpYW50PSdzb2xpZCcgc2l6ZT0nc20nIGJhY2tncm91bmQ9eyEobW9kZSA9PT0gJ0luL091dCcpID8gJ2JhY2tncm91bmRNb2RhbCcgOiAnZ3JheS40MDAnfSBib3JkZXJDb2xvcj17IShtb2RlID09PSAnSW4vT3V0JykgPyAnYm9yZGVyQ29sb3InIDogJ2JhY2tncm91bmRNb2RhbCd9IGJvcmRlcldpZHRoPSd0aGluJyBvbkNsaWNrPXsoKSA9PiBzZXRNb2RlKCdJbi9PdXQnKX0+SW4vT3V0PC9CdXR0b24+XG4gICAgICAgIDxCdXR0b24gdmFyaWFudD0nc29saWQnIHNpemU9J3NtJyBiYWNrZ3JvdW5kPXshKG1vZGUgPT09ICdUcmVlcycpID8gJ2JhY2tncm91bmRNb2RhbCcgOiAnZ3JheS40MDAnfSBib3JkZXJDb2xvcj17IShtb2RlID09PSAnVHJlZXMnKSA/ICdib3JkZXJDb2xvcicgOiAnYmFja2dyb3VuZE1vZGFsJ30gYm9yZGVyV2lkdGg9J3RoaW4nIG9uQ2xpY2s9eygpID0+IHNldE1vZGUoJ1RyZWVzJyl9PvCfjLI8L0J1dHRvbj5cbiAgICAgIDwvSFN0YWNrPlxuICAgICAge21vZGUgPT09ICdTZWFyY2gnICYmIDw+XG4gICAgICAgIHtjdXJyZW50ICYmIDxMaXN0XG4gICAgICAgICAgbGluaz17bGlua31cbiAgICAgICAgICBjdXJyZW50PXtjdXJyZW50fVxuICAgICAgICAgIHNldE1vZGU9e3NldE1vZGV9XG4gICAgICAgICAgc2V0Q3VycmVudD17c2V0Q3VycmVudH1cbiAgICAgICAgICBwYXJlbnRzUXVlcnk9e3sgaWQ6IDAgfX1cbiAgICAgICAgICBjaGlsZHJlblF1ZXJ5PXt7IGlkOiAwIH19XG4gICAgICAgIC8+fVxuICAgICAgICA8SW5wdXRcbiAgICAgICAgICBhdXRvRm9jdXNcbiAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgdmFyaWFudD0nZmlsbGVkJ1xuICAgICAgICAgIHZhcmlhbnQ9J2ZpbGxlZCdcbiAgICAgICAgICBiZz17Ymd9XG4gICAgICAgICAgY29sb3I9e2NvbG9yfVxuICAgICAgICAgIGJvcmRlcldpZHRoPSd0aGluJ1xuICAgICAgICAgIGJvcmRlckNvbG9yPXtib3JkZXJDb2xvcn1cbiAgICAgICAgICBfaG92ZXI9e3tiZzogaG92ZXJ9fVxuICAgICAgICAgIF9mb2N1cz17e2JnOiBiZ319XG4gICAgICAgICAgc3g9e3tcbiAgICAgICAgICAgIHdpZHRoOiAnMTAwJScsXG4gICAgICAgICAgfX1cbiAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgIHNldFMoZS50YXJnZXQudmFsdWUpO1xuICAgICAgICAgICAgc2V0U29EZWJvdW5jZShlLnRhcmdldC52YWx1ZSk7XG4gICAgICAgICAgfX1cbiAgICAgICAgICB2YWx1ZT17c31cbiAgICAgICAgLz5cbiAgICAgICAgezxMaXN0XG4gICAgICAgICAgbGluaz17bGlua31cbiAgICAgICAgICBjdXJyZW50PXtudWxsfVxuICAgICAgICAgIHNldE1vZGU9e3NldE1vZGV9XG4gICAgICAgICAgc2V0Q3VycmVudD17c2V0Q3VycmVudH1cbiAgICAgICAgICBwYXJlbnRzUXVlcnk9e3sgaWQ6IDAgfX1cbiAgICAgICAgICBjaGlsZHJlblF1ZXJ5PXt7XG4gICAgICAgICAgICAuLi5xbyxcbiAgICAgICAgICAgIGxpbWl0OiAzMCxcbiAgICAgICAgICB9fVxuICAgICAgICAvPn1cbiAgICAgIDwvPn1cbiAgICAgIHttb2RlID09PSAnUXVlcnknICYmIDw+XG4gICAgICAgIHtjdXJyZW50ICYmIDxMaXN0XG4gICAgICAgICAgbGluaz17bGlua31cbiAgICAgICAgICBjdXJyZW50PXtjdXJyZW50fVxuICAgICAgICAgIHNldE1vZGU9e3NldE1vZGV9XG4gICAgICAgICAgc2V0Q3VycmVudD17c2V0Q3VycmVudH1cbiAgICAgICAgICBwYXJlbnRzUXVlcnk9e3sgaWQ6IDAgfX1cbiAgICAgICAgICBjaGlsZHJlblF1ZXJ5PXt7IGlkOiAwIH19XG4gICAgICAgIC8+fVxuICAgICAgICA8TW9uYWNvRWRpdG9yXG4gICAgICAgICAgb3B0aW9ucz17e1xuICAgICAgICAgICAgbWluaW1hcDoge1xuICAgICAgICAgICAgICBlbmFibGVkOiBmYWxzZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGxpbmVOdW1iZXJzOiAnb2ZmJyxcbiAgICAgICAgICAgIHdvcmRXcmFwOiB0cnVlLFxuICAgICAgICAgIH19XG4gICAgICAgICAgaGVpZ2h0PVwiMjAwcHhcIlxuICAgICAgICAgIHdpZHRoPVwiMTAwJVwiXG4gICAgICAgICAgdGhlbWU9e2NvbG9yTW9kZSA9PT0gJ2xpZ2h0JyA/ICdsaWdodCcgOiBcInZzLWRhcmtcIn1cbiAgICAgICAgICBkZWZhdWx0TGFuZ3VhZ2U9XCJqc29uXCJcbiAgICAgICAgICBkZWZhdWx0VmFsdWU9e3EgfHwgJyd9XG4gICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgc2V0USh2YWx1ZSk7XG4gICAgICAgICAgICBzZXRRb0RlYm91bmNlKHZhbHVlKTtcbiAgICAgICAgICB9fVxuICAgICAgICAgIC8vIG9uTW91bnQ9e2hhbmRsZUVkaXRvckRpZE1vdW50fVxuICAgICAgICAvPlxuICAgICAgICA8TGlzdFxuICAgICAgICAgIGxpbms9e2xpbmt9XG4gICAgICAgICAgY3VycmVudD17bnVsbH1cbiAgICAgICAgICBzZXRNb2RlPXtzZXRNb2RlfVxuICAgICAgICAgIHNldEN1cnJlbnQ9e3NldEN1cnJlbnR9XG4gICAgICAgICAgcGFyZW50c1F1ZXJ5PXt7IGlkOiAwIH19XG4gICAgICAgICAgY2hpbGRyZW5RdWVyeT17e1xuICAgICAgICAgICAgLi4ucW8sXG4gICAgICAgICAgICBsaW1pdDogMzAsXG4gICAgICAgICAgfX1cbiAgICAgICAgLz5cbiAgICAgIDwvPn1cbiAgICAgIHttb2RlID09PSAnQ29udGFpbnMnICYmIGN1cnJlbnQgJiYgPExpc3RcbiAgICAgICAgbGluaz17bGlua31cbiAgICAgICAgY3VycmVudD17Y3VycmVudH1cbiAgICAgICAgc2V0TW9kZT17c2V0TW9kZX1cbiAgICAgICAgc2V0Q3VycmVudD17c2V0Q3VycmVudH1cbiAgICAgICAgcGFyZW50c1F1ZXJ5PXt7XG4gICAgICAgICAgb3V0OiB7XG4gICAgICAgICAgICB0eXBlX2lkOiBkZWVwLmlkTG9jYWwoJ0BkZWVwLWZvdW5kYXRpb24vY29yZScsICdDb250YWluJyksXG4gICAgICAgICAgICB0b19pZDogY3VycmVudD8uaWQsXG4gICAgICAgICAgfVxuICAgICAgICB9fVxuICAgICAgICBjaGlsZHJlblF1ZXJ5PXt7XG4gICAgICAgICAgaW46IHtcbiAgICAgICAgICAgIHR5cGVfaWQ6IGRlZXAuaWRMb2NhbCgnQGRlZXAtZm91bmRhdGlvbi9jb3JlJywgJ0NvbnRhaW4nKSxcbiAgICAgICAgICAgIGZyb21faWQ6IGN1cnJlbnQ/LmlkLFxuICAgICAgICAgIH1cbiAgICAgICAgfX1cbiAgICAgIC8+fVxuICAgICAge21vZGUgPT09ICdJbi9PdXQnICYmIGN1cnJlbnQgJiYgPD5cbiAgICAgICAgPExpc3RcbiAgICAgICAgICBsaW5rPXtsaW5rfVxuICAgICAgICAgIGN1cnJlbnQ9e2N1cnJlbnR9XG4gICAgICAgICAgc2V0TW9kZT17c2V0TW9kZX1cbiAgICAgICAgICBzZXRDdXJyZW50PXtzZXRDdXJyZW50fVxuICAgICAgICAgIHBhcmVudHNRdWVyeT17e1xuICAgICAgICAgICAgdG9faWQ6IGN1cnJlbnQ/LmlkXG4gICAgICAgICAgfX1cbiAgICAgICAgICBjaGlsZHJlblF1ZXJ5PXt7XG4gICAgICAgICAgICBmcm9tX2lkOiBjdXJyZW50Py5pZFxuICAgICAgICAgIH19XG4gICAgICAgIC8+XG4gICAgICA8Lz59XG4gICAgICB7bW9kZSA9PT0gJ1RyZWVzJyAmJiA8PlxuICAgICAgICA8VlN0YWNrXG4gICAgICAgICAgZGl2aWRlcj17PFN0YWNrRGl2aWRlciBib3JkZXJDb2xvcj0nYm9yZGVyQ29sb3InIC8+fVxuICAgICAgICAgIHNwYWNpbmc9ezF9XG4gICAgICAgICAgYWxpZ249J3N0cmV0Y2gnXG4gICAgICAgICAgYmc9J2dyYXkuODAwJ1xuICAgICAgICA+XG4gICAgICAgICAge1s8V3JhcCBrZXk9e3RyZWU/LmlkIHx8IDB9IHNwYWNpbmc9ezF9IGp1c3RpZnk9J2NlbnRlcic+XG4gICAgICAgICAgICB7dHJlZXM/Lm1hcCh0ID0+IDxXcmFwSXRlbSBrZXk9e3Q/LmlkfT5cbiAgICAgICAgICAgICAgPEJ1dHRvbiBzaXplPSdzbScgdmFyaWFudD17dHJlZT8uaWQgPT09IHQ/LmlkID8gJ3NvbGlkJyA6IFwib3V0bGluZVwifSBvbkNsaWNrPXsoKSA9PiBzZXRUcmVlKHQpfT57ZGVlcC5uYW1lTG9jYWwodD8udHJlZV9pZCl9PC9CdXR0b24+XG4gICAgICAgICAgICA8L1dyYXBJdGVtPil9XG4gICAgICAgICAgPC9XcmFwPl19XG4gICAgICAgIDwvVlN0YWNrPlxuICAgICAgICB7IXRyZWUgJiYgPD5cbiAgICAgICAgICA8TGlzdFxuICAgICAgICAgICAgbGluaz17bGlua31cbiAgICAgICAgICAgIGN1cnJlbnQ9e2N1cnJlbnR9XG4gICAgICAgICAgICBzZXRNb2RlPXtzZXRNb2RlfVxuICAgICAgICAgICAgc2V0Q3VycmVudD17c2V0Q3VycmVudH1cbiAgICAgICAgICAgIHBhcmVudHNRdWVyeT17e1xuICAgICAgICAgICAgICBpZDogMFxuICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIGNoaWxkcmVuUXVlcnk9e3sgXG4gICAgICAgICAgICAgIGlkOiAwXG4gICAgICAgICAgICB9fVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvPn1cbiAgICAgICAgeyEhdHJlZSAmJiAhIWN1cnJlbnQ/LmlkICYmIDw+XG4gICAgICAgICAge1s8TGlzdFxuICAgICAgICAgICAga2V5PXt0cmVlPy5pZH1cbiAgICAgICAgICAgIGxpbms9e2xpbmt9XG4gICAgICAgICAgICBjdXJyZW50PXtjdXJyZW50fVxuICAgICAgICAgICAgc2V0TW9kZT17c2V0TW9kZX1cbiAgICAgICAgICAgIHNldEN1cnJlbnQ9e3NldEN1cnJlbnR9XG4gICAgICAgICAgICBwYXJlbnRzUXVlcnk9e3tcbiAgICAgICAgICAgICAgZG93bjoge1xuICAgICAgICAgICAgICAgIHRyZWVfaWQ6IHRyZWU/LnRyZWVfaWQsXG4gICAgICAgICAgICAgICAgcG9zaXRpb25faWQ6IHRyZWU/LnBvc2l0aW9uX2lkLFxuICAgICAgICAgICAgICAgIGxpbmtfaWQ6IGN1cnJlbnQ/LmlkXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAgY2hpbGRyZW5RdWVyeT17eyBfYW5kOiBbXG4gICAgICAgICAgICAgIHsgdXA6IHtcbiAgICAgICAgICAgICAgICB0cmVlX2lkOiB0cmVlPy50cmVlX2lkLFxuICAgICAgICAgICAgICAgIHJvb3RfaWQ6IHRyZWU/LnJvb3RfaWQsXG4gICAgICAgICAgICAgICAgcGFyZW50X2lkOiB0cmVlPy5saW5rX2lkLFxuICAgICAgICAgICAgICAgIGRlcHRoOiB0cmVlPy5kZXB0aCxcbiAgICAgICAgICAgICAgfSB9LFxuICAgICAgICAgICAgICB7IGRvd246IHtcbiAgICAgICAgICAgICAgICB0cmVlX2lkOiB0cmVlPy50cmVlX2lkLFxuICAgICAgICAgICAgICAgIHJvb3RfaWQ6IHRyZWU/LnJvb3RfaWQsXG4gICAgICAgICAgICAgICAgZGVwdGg6IHRyZWU/LmRlcHRoICsgMSxcbiAgICAgICAgICAgICAgfSB9LFxuICAgICAgICAgICAgXX19XG4gICAgICAgICAgLz5dfVxuICAgICAgICA8Lz59XG4gICAgICA8Lz59XG4gICAgICB7Y2hpbGRyZW59XG4gICAgPC9kaXY+XG4gICAgXG4gICAgcmV0dXJuIDw+XG4gICAgICB7ZmlsbFNpemUgXG4gICAgICA/IGJvZHkgXG4gICAgICA6IDxSZXNpemVcbiAgICAgICAgICBvbkNoYW5nZVNpemU9eyh2aWV3U2l6ZSkgPT4gc2V0Vmlld1NpemUodmlld1NpemUpfSBcbiAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgIC8vIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgICAgICAgIC8vIG92ZXJmbG93OiBuZXN0ZWQgPyAnaGlkZGVuJyA6ICdpbmhlcml0JyxcbiAgICAgICAgICBib3JkZXJSYWRpdXM6IDUsXG4gICAgICAgICAgYm9yZGVyOiAnbm9uZScsXG4gICAgICAgIH19XG4gICAgICA+e2JvZHl9PC9SZXNpemU+fVxuICAgIDwvPjtcbiAgfTtcbn1cbiJdfQ==",
          "link_id": 967
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 1208,
      "src_id": 1208,
      "handler_id": 1210,
      "execution_provider_id": 33,
      "isolation_provider_id": 81,
      "dist": {
        "id": 1208,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 477,
          "value": "async ({ data: { newLink: reply, triggeredByLinkId }, deep }) => {\n  const ml = deep.minilinks;\n\n  const startTime = Date.now();\n  const axios = await deep.import('axios');\n\n  const ChatGPT = await deep.id(deep.linkId, 'ChatGPT');\n  const Conversation = await deep.id(deep.linkId, 'Conversation');\n  const ApiKey = await deep.id('@deep-foundation/openai', 'ApiKey');\n  const UsesApiKey = await deep.id('@deep-foundation/openai', 'UsesApiKey');\n  const Model = await deep.id('@deep-foundation/openai', 'Model');\n  const UsesModel = await deep.id('@deep-foundation/openai', 'UsesModel');\n  const Message = await deep.id('@deep-foundation/messaging', 'Message');\n  const Reply = await deep.id('@deep-foundation/chatgpt-azure', 'Reply');\n  const Author = await deep.id('@deep-foundation/messaging', 'Author');\n  const messagingTree = await deep.id('@deep-foundation/messaging', 'messagingTree');\n  const System = await deep.id('@deep-foundation/chatgpt-azure', 'System');\n  const Tokens = await deep.id(\"@deep-foundation/tokens\", \"Tokens\")\n  const ProvidedBy = await deep.id(\"@deep-foundation/chatgpt-azure\", \"ProvidedBy\")\n\n  await deep.await(reply.from_id);  const { data: [message] } = await deep.select({\n    id: reply.from_id,\n    _not: { out: { to_id: ChatGPT, type_id: Author } },\n  });\n  if (!message) return 'No need to react to message of this reply.';\n  if (!message.value?.value) throw new Error(`Message (##${message?.id}) must have a value`);\n\n  ml.apply(await deep.select({\n    type_id: ApiKey,\n    in: { from_id: triggeredByLinkId, type_id: UsesApiKey },\n    return: {\n      uses: { relation: 'in', type_id: UsesApiKey },\n    },\n  }), 'apikey');\n\n  const apikeys = ml.select({ type_id: ApiKey });\n  const useses = ml.select({ tyoe_id: UsesApiKey, to: { type_id: ApiKey } });\n  \n  if (!apikeys.length) throw new Error(`ApiKey not founded`);\n  if (useses.length > 1) throw new Error(`More than 1 links of type UsesApiKey are found`);\n  if (!apikeys[0]?.value?.value) throw new Error(`ApiKey ##${apikeys[0]?.id} has no value`);\n\n  const { data: [conversation] } = await deep.select({\n    type_id: Conversation,\n    down: { tree_id: messagingTree, link_id: reply.id }\n  });\n  if (!conversation) return 'Conversation upper not founded.';\n\n  const messagesByReply = await deep.select({\n    type_id: Message,\n    down: { tree_id: messagingTree, link_id: reply.from_id },\n    order_by: { id: 'asc' },\n    return: {\n      authors: { relation: 'out', type_id: Author },\n      tokens: { relation: 'out', type_id: Tokens },\n    }\n  });\n  ml.apply(messagesByReply, 'messagesByReply');\n\n  const messagesById = await deep.select({\n    id: { _nin: messagesByReply.data.map(l => l.id) },\n    type_id: Message,\n    up: { tree_id: messagingTree, parent_id: conversation.id },\n    order_by: { id: 'asc' },\n    return: {\n      authors: { relation: 'out', type_id: Author },\n      tokens: { relation: 'out', type_id: Tokens },\n    }\n  });\n  ml.apply(messagesById, 'messagesById');\n\n  const messagesToSend = [...messagesById.data, ...messagesByReply.data];\n  const models = await deep.select({\n    type_id: Model,\n    in: { type_id: UsesModel, from_id: { _in: [conversation.id, triggeredByLinkId] } },\n    return: {\n      usesModel: { relation: 'in', type_id: UsesModel },\n      tokens: { relation: 'out', type_id: Tokens },\n      providedBy: {\n        relation: 'out', type_id: ProvidedBy,\n        return: {\n          endpoint: { relation: 'to' }\n        },\n      },\n    },\n  });\n  ml.apply(models, 'models');\n\n  const [userLinkedModel] = ml.select({ type_id: Model, in: { type_id: UsesModel, from_id: triggeredByLinkId } });\n  if (!userLinkedModel) throw new Error(`UsersModel from triggeredByLinkId ${triggeredByLinkId} to Model not founded.`);\n  const [userLinkedModelTokens] = ml.select({ type_id: Tokens, from_id: userLinkedModel?.id });\n  const [linkedModel] = ml.select({ type_id: Model, in: { type_id: UsesModel, from_id: conversation.id } });\n  \n  const MAX_TOKENS = userLinkedModelTokens?.value?.value;\n  if (!MAX_TOKENS) throw new Error(`MAX_TOKENS Tokens (##${userLinkedModelTokens?.id}) .value from model not founded.`);\n  \n  const endpoint = ml.select({ in: { type_id: ProvidedBy } })[0];\n  const API_ENDPOINT = endpoint?.value?.value;\n  if (!API_ENDPOINT) throw new Error(`API_ENDPOINT Endpoint (##${endpoint?.id}) instance.value nout founded.`);\n  \n  const model = linkedModel?.value?.value || userLinkedModel?.value?.value;\n  if(!model) throw new Error(`UsersModel from conversation.id (##${conversation.id}) to Model not founded.`);\n\n  let preparedMessages = messagesToSend.map((link) => {\n    const tokens = ml.select({ type_id: Tokens, from_id: link.id })[0]?.value?.value;\n    return {\n      role: ml.select({ type_id: Author, from_id: link.id })[0]?.to_id === ChatGPT ? 'assistant' : 'user',\n      content: link.value.value,\n      tokens: ml.select({ type_id: Tokens, from_id: link.id })[0]?.value?.value,\n    }\n  });\n\n  const systems = await deep.select({\n    type_id: System, to_id: { _in: [triggeredByLinkId, conversation.id] },\n    return: {\n      message: { relation: 'from' },\n      conversation: { relation: 'to' },\n      tokens: { relation: 'in', type_id: Tokens },\n    },\n  });\n  ml.apply(systems, 'systems');\n\n  const conversationSystem = ml.select({ type_id: System, to_id: conversation.id })?.[0];\n  if (!!conversationSystem && !conversationSystem?.value?.value) throw new Error(`System .value to conversation not defined`);\n  const userSystems = ml.select({ type_id: System, to_id: triggeredByLinkId });\n  if (userSystems.length > 1) throw new Error(\"Multiple system messages linked to the user are found\");\n  const userSystem = userSystems[0];\n\n  const systemMessage = conversationSystem?.from || userSystem?.from;\n  if (systemMessage) {\n    if (!systemMessage?.value?.value) throw new Error(`System (##${systemMessage?.id}) .from Message.value not founded`);\n    preparedMessages.unshift({ role: 'system', content: systemMessage?.value?.value });\n  }\n\n  const tokenLimit = MAX_TOKENS * 7 / 8;\n  let totalTokens = 0;\n  let messages = [];\n\n  for (let i = preparedMessages.length - 1; i >= 0; i--) {\n    const message = preparedMessages[i];\n    if (message.role === 'system' || totalTokens + message.tokens <= tokenLimit) {\n      messages.unshift({ role: message.role, content: message.content });\n      totalTokens += message.tokens;\n    } else {\n      break;\n    }\n  }\n\n  let response;\n  try {\n    response = await axios.post(API_ENDPOINT, { messages }, {\n      headers: { 'Content-Type': 'application/json', 'api-key': apikeys[0]?.value?.value },\n    });\n  } catch (error) {\n    console.error('Error making API call:', error.response ? error.response.data : error.message);\n  }\n\n  const content = response.data.choices[0]?.message?.content;\n  await deep.insert({\n    type_id: Message,\n    string: { data: { value: content } },\n    out: { data: [\n      { type_id: Author, to_id: ChatGPT },\n      { type_id: Reply, to_id: reply.from_id },\n    ] },\n  });\n\n  const endTime = Date.now();\n  const duration = (endTime - startTime) / 1000;\n\n  ml.remove(Object.keys(ml.byId));\n\n  return {\n    request: { model, messages },\n    response: response.data,\n    duration, totalTokens,\n  };\n};",
          "link_id": 1208
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 1268,
      "src_id": 1211,
      "handler_id": 1212,
      "execution_provider_id": 33,
      "isolation_provider_id": 144,
      "dist": {
        "id": 1268,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 480,
          "value": "async ({ deep, require }) => {\n    const PACKAGE_NAME = \"@deep-foundation/chatgpt-azure-discord-bot\";\n    const logsPrefix = \"@chatgpt-azure\" + \" \" + \"manager\" + \"ClientHandler\";\n    const React = await deep.import(\"react\");\n    const { useState, useMemo, useRef } = React;\n    const Chakra = await deep.import(\"@chakra-ui/react\");\n    console.log(logsPrefix, { Chakra });\n    const { Input, InputGroup, InputRightElement, IconButton, Popover, PopoverTrigger, PopoverContent, PopoverArrow, PopoverBody, FormControl, FormLabel, Box, PopoverHeader, PopoverCloseButton, HStack, Stack, Text, Link, Select, Tooltip, Button, NumberInput, NumberInputField, FormHelperText, FormErrorMessage, Divider, } = Chakra;\n    const ChakraIcons = await deep.import(\"@chakra-ui/icons\");\n    const { InfoOutlineIcon } = ChakraIcons;\n    console.log(logsPrefix, ChakraIcons);\n    const DeepCase = await deep.import(\"@deep-foundation/deepcase\");\n    const { FinderPopover } = await deep.import(\"./cyto/hooks\");\n    const { ClientHandler } = DeepCase;\n    console.log(logsPrefix, { DeepCase });\n    console.log(logsPrefix, { FinderPopover });\n    const ReactHookForm = await deep.import(\"react-hook-form\");\n    console.log(logsPrefix, { ReactHookForm });\n    const { useForm, Controller } = ReactHookForm;\n    const containTypeLinkId = await deep.id(\"@deep-foundation/core\", \"Contain\");\n    const chatGPTAzureClientHandlerLinkId = await deep.id(\"@deep-foundation/chatgpt-azure\", \"managerClientHandler\");\n    return ({ fillSize, style, link }) => {\n        const { handleSubmit, register, formState: { errors, isSubmitting }, control, setValue, setError, } = useForm();\n        async function onSubmit(values) {\n            const { apiKey, chatGPTModelLinkId, userLinkId, containerLinkId } = values;\n            const containTypeLinkId = await deep.id(\"@deep-foundation/core\", \"Contain\");\n            const reservedLinkIds = await deep.reserve(6);\n            const apiKeyLinkId = reservedLinkIds.pop();\n            const containForApiKeyLinkId = reservedLinkIds.pop();\n            const usesApiKeyLinkId = reservedLinkIds.pop();\n            const containForUsesApiKeyLinkId = reservedLinkIds.pop();\n            const usesModelLinkId = reservedLinkIds.pop();\n            const containForUsesModelLinkId = reservedLinkIds.pop();\n            await deep\n                .serial({\n                operations: [\n                    {\n                        type: \"insert\",\n                        table: \"links\",\n                        objects: {\n                            id: apiKeyLinkId,\n                            type_id: await deep.id(\"@deep-foundation/openai\", \"ApiKey\"),\n                        },\n                    },\n                    {\n                        type: \"insert\",\n                        table: \"strings\",\n                        objects: {\n                            link_id: apiKeyLinkId,\n                            value: apiKey,\n                        },\n                    },\n                    {\n                        type: \"insert\",\n                        table: \"links\",\n                        objects: {\n                            id: containForApiKeyLinkId,\n                            type_id: containTypeLinkId,\n                            from_id: containerLinkId,\n                            to_id: apiKeyLinkId,\n                        },\n                    },\n                    {\n                        type: \"insert\",\n                        table: \"links\",\n                        objects: {\n                            id: usesApiKeyLinkId,\n                            type_id: await deep.id(\"@deep-foundation/openai\", \"UsesApiKey\"),\n                            from_id: userLinkId,\n                            to_id: apiKeyLinkId,\n                        },\n                    },\n                    {\n                        type: \"insert\",\n                        table: \"links\",\n                        objects: {\n                            id: containForUsesApiKeyLinkId,\n                            type_id: containTypeLinkId,\n                            from_id: containerLinkId,\n                            to_id: usesApiKeyLinkId,\n                        },\n                    },\n                    {\n                        type: \"insert\",\n                        table: \"links\",\n                        objects: {\n                            id: usesModelLinkId,\n                            type_id: await deep.id(\"@deep-foundation/openai\", \"UsesModel\"),\n                            from_id: userLinkId,\n                            to_id: chatGPTModelLinkId,\n                        },\n                    },\n                    {\n                        type: \"insert\",\n                        table: \"links\",\n                        objects: {\n                            id: containForUsesModelLinkId,\n                            type_id: containTypeLinkId,\n                            from_id: containerLinkId,\n                            to_id: usesModelLinkId,\n                        },\n                    },\n                ],\n            })\n                .catch(setError);\n        }\n        return (React.createElement(Box, { style: { minWidth: 450, ...style }, bg: \"bgColor\", color: \"text\", borderColor: \"borderColor\", borderWidth: \"1px\", borderRadius: \"lg\", padding: 4 },\n            React.createElement(\"form\", { onSubmit: handleSubmit(onSubmit) },\n                React.createElement(FormControl, { isInvalid: errors.root },\n                    React.createElement(Stack, { spacing: 6, divider: React.createElement(Divider, null), display: \"flex\", justifyContent: \"center\" },\n                        React.createElement(ApiKeyTextField, { register: register, error: errors.apiKey && errors.apiKey.message }),\n                        React.createElement(ModelLinkIdSelect, { register: register, error: errors.chatGPTModelLinkId && errors.chatGPTModelLinkId.message }),\n                        React.createElement(UserLinkIdTextField, { control: control, error: errors.userLinkId && errors.userLinkId.message, setValue: setValue }),\n                        React.createElement(ContainerLinkIdTextField, { control: control, setValue: setValue, error: errors.containerLinkId && errors.containerLinkId.message }),\n                        errors.root && React.createElement(FormErrorMessage, null, JSON.stringify(errors.root, null, 2)),\n                        React.createElement(Button, { isLoading: isSubmitting, type: \"submit\" }, \"Submit\"))))));\n    };\n    function ModelLinkIdSelect(options) {\n        const { register, error } = options;\n        const { data: modelLinks } = deep.useDeepSubscription({\n            type_id: {\n                _id: [\"@deep-foundation/openai\", \"Model\"],\n            },\n        });\n        const modelOptions = useMemo(() => {\n            if (!modelLinks || modelLinks.length === 0)\n                return null;\n            return modelLinks.map((link) => {\n                const name = link.value.value;\n                return React.createElement(\"option\", { value: link.id }, name);\n            });\n        }, [modelLinks]);\n        console.log({ modelOptions });\n        return (React.createElement(Tooltip, { label: `No model links of type [\"@deep-foundation/openai\", \"Model\"] available to choose from. You can install \"@deep-foundation/chatgpt-azure-deep\" for already configured chatgpt models`, isDisabled: modelLinks.length > 0 },\n            React.createElement(FormControl, { isInvalid: error },\n                React.createElement(FormLabel, { htmlFor: \"chatGPTModelLinkId\" }, \"ChatGPT Model Link ID\"),\n                React.createElement(Select, { placeholder: \"ChatGPT Model link ID\", ...register(\"chatGPTModelLinkId\", {\n                        required: \"ChatGPT Model link ID is required\",\n                    }), isDisabled: modelLinks.length === 0 }, modelOptions),\n                React.createElement(FormErrorMessage, null, error),\n                React.createElement(FormHelperText, null, \"ChatGPT model is required to know which model should be used for requests\"))));\n    }\n    function ApiKeyTextField(options) {\n        const { error, register } = options;\n        return (React.createElement(HStack, null,\n            React.createElement(FormControl, { isInvalid: error },\n                React.createElement(FormLabel, { htmlFor: \"apiKey\" }, \"ApiKey Link ID\"),\n                React.createElement(Input, { ...register(\"apiKey\", {\n                        required: \"Api Key is required\",\n                    }) }),\n                React.createElement(FormErrorMessage, null, error),\n                React.createElement(FormHelperText, null,\n                    React.createElement(Stack, null,\n                        React.createElement(Text, null, \"Api Key is required to make requests to openai on your behalf\"),\n                        React.createElement(Link, { isExternal: true, href: \"https://platform.openai.com/api-keys\" }, \"Obtain Api Key\"))))));\n    }\n    function UserLinkIdTextField(options) {\n        const { setValue, error, control } = options;\n        return (React.createElement(FormControl, { isInvalid: error },\n            React.createElement(FormLabel, { htmlFor: \"userLinkId\" }, \"User Link ID\"),\n            React.createElement(Controller, { name: \"userLinkId\", control: control, defaultValue: undefined, rules: {\n                    required: {\n                        value: true,\n                        message: \"User link ID is required\",\n                    },\n                    validate: async (value) => {\n                        const valueNumber = parseInt(value);\n                        if (isNaN(valueNumber)) {\n                            return \"User link ID must be a number\";\n                        }\n                        const { data: [link], } = await deep.select({ id: valueNumber });\n                        if (!link) {\n                            return `Link ${valueNumber} does not exist`;\n                        }\n                        else {\n                            return true;\n                        }\n                    },\n                }, render: ({ field }) => (React.createElement(HStack, null,\n                    React.createElement(NumberInput, { ...field, min: 0 },\n                        React.createElement(NumberInputField, { ref: field.ref, name: field.name })),\n                    React.createElement(FinderPopover, { link: deep.linkId, onSubmit: async (link) => {\n                            setValue(\"containerLinkId\", link.id);\n                        } },\n                        React.createElement(IconButton, { \"aria-label\": \"finder\", icon: React.createElement(React.Fragment, null, \"\\uD83E\\uDEAC\") })))) }),\n            React.createElement(FormErrorMessage, null, error),\n            React.createElement(FormHelperText, null, \"User link is a link that is considered as a user of ApiKey. User link will be \\\"from\\\" for UsesApiKey\")));\n    }\n    function ContainerLinkIdTextField(options) {\n        const { setValue, error, control } = options;\n        const helpContent = `Container link is a link that will contain newly created ApiKey, UsesApiKey`;\n        return (React.createElement(FormControl, { isInvalid: error },\n            React.createElement(FormLabel, { htmlFor: \"containerLinkId\" }, \"Container Link ID\"),\n            React.createElement(HStack, null,\n                React.createElement(Controller, { name: \"containerLinkId\", control: control, defaultValue: undefined, rules: {\n                        required: {\n                            value: true,\n                            message: \"Container link id is required\",\n                        },\n                        validate: async (value) => {\n                            const valueNumber = parseInt(value);\n                            if (isNaN(valueNumber)) {\n                                return \"Container link id must be a number\";\n                            }\n                            const { data: [link], } = await deep.select({ id: valueNumber });\n                            if (!link) {\n                                return `Link ${valueNumber} does not exist`;\n                            }\n                            else {\n                                return true;\n                            }\n                        },\n                    }, render: ({ field }) => (React.createElement(NumberInput, { ...field, min: 0 },\n                        React.createElement(NumberInputField, { ref: field.ref, name: field.name }))) }),\n                React.createElement(FinderPopover, { link: deep.linkId, onSubmit: async (link) => {\n                        setValue(\"containerLinkId\", link.id);\n                    } },\n                    React.createElement(IconButton, { \"aria-label\": \"finder\", icon: React.createElement(React.Fragment, null, \"\\uD83E\\uDEAC\") }))),\n            React.createElement(FormErrorMessage, null, error),\n            React.createElement(FormHelperText, null, \"Container link is a link that will contain newly created ApiKey, UsesApiKey\")));\n    }\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLEVBQUUsRUFBRTtJQUMxQixNQUFNLFlBQVksR0FBRyw0Q0FBNEMsQ0FBQztJQUNsRSxNQUFNLFVBQVUsR0FBRyxnQkFBZ0IsR0FBRyxHQUFHLEdBQUcsU0FBUyxHQUFHLGVBQWUsQ0FBQztJQUN4RSxNQUFNLEtBQUssR0FBRyxNQUFNLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDekMsTUFBTSxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsTUFBTSxFQUFFLEdBQUcsS0FBSyxDQUFDO0lBQzVDLE1BQU0sTUFBTSxHQUFHLE1BQU0sSUFBSSxDQUFDLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBQ3JELE9BQU8sQ0FBQyxHQUFHLENBQUMsVUFBVSxFQUFFLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQztJQUNwQyxNQUFNLEVBQ0osS0FBSyxFQUNMLFVBQVUsRUFDVixpQkFBaUIsRUFDakIsVUFBVSxFQUNWLE9BQU8sRUFDUCxjQUFjLEVBQ2QsY0FBYyxFQUNkLFlBQVksRUFDWixXQUFXLEVBQ1gsV0FBVyxFQUNYLFNBQVMsRUFDVCxHQUFHLEVBQ0gsYUFBYSxFQUNiLGtCQUFrQixFQUNsQixNQUFNLEVBQ04sS0FBSyxFQUNMLElBQUksRUFDSixJQUFJLEVBQ0osTUFBTSxFQUNOLE9BQU8sRUFDUCxNQUFNLEVBQ04sV0FBVyxFQUNYLGdCQUFnQixFQUNoQixjQUFjLEVBQ2QsZ0JBQWdCLEVBQ2hCLE9BQU8sR0FDUixHQUFHLE1BQU0sQ0FBQztJQUNYLE1BQU0sV0FBVyxHQUFHLE1BQU0sSUFBSSxDQUFDLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBQzFELE1BQU0sRUFBRSxlQUFlLEVBQUUsR0FBRyxXQUFXLENBQUM7SUFDeEMs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RUFBRSxXQUFXLEVBQUUsQ0FBQyxDQUFDOzRCQUMzQyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7Z0NBQ1YsT0FBTyxRQUFRLFdBQVcsaUJBQWlCLENBQUM7NEJBQzlDLENBQUM7aUNBQU0sQ0FBQztnQ0FDTixPQUFPLElBQUksQ0FBQzs0QkFDZCxDQUFDO3dCQUNILENBQUM7cUJBQ0YsRUFDRCxNQUFNLEVBQUUsQ0FBQyxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUNyQixvQkFBQyxXQUFXLE9BQUssS0FBSyxFQUFFLEdBQUcsRUFBRSxDQUFDO3dCQUM1QixvQkFBQyxnQkFBZ0IsSUFBQyxHQUFHLEVBQUUsS0FBSyxDQUFDLEdBQUcsRUFBRSxJQUFJLEVBQUUsS0FBSyxDQUFDLElBQUksR0FBSSxDQUMxQyxDQUNmLEdBQ0Q7Z0JBQ0Ysb0JBQUMsYUFBYSxJQUNaLElBQUksRUFBRSxJQUFJLENBQUMsTUFBTSxFQUNqQixRQUFRLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxFQUFFO3dCQUN2QixRQUFRLENBQUMsaUJBQWlCLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO29CQUN2QyxDQUFDO29CQUVELG9CQUFDLFVBQVUsa0JBQVksUUFBUSxFQUFDLElBQUksRUFBRSx5REFBTyxHQUFJLENBQ25DLENBQ1Q7WUFDVCxvQkFBQyxnQkFBZ0IsUUFBRSxLQUFLLENBQW9CO1lBQzVDLG9CQUFDLGNBQWMsc0ZBR0UsQ0FDTCxDQUNmLENBQUM7SUFDSixDQUFDO0FBQ0gsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiYXN5bmMgKHsgZGVlcCwgcmVxdWlyZSB9KSA9PiB7XG4gIGNvbnN0IFBBQ0tBR0VfTkFNRSA9IFwiQGRlZXAtZm91bmRhdGlvbi9jaGF0Z3B0LWF6dXJlLWRpc2NvcmQtYm90XCI7XG4gIGNvbnN0IGxvZ3NQcmVmaXggPSBcIkBjaGF0Z3B0LWF6dXJlXCIgKyBcIiBcIiArIFwibWFuYWdlclwiICsgXCJDbGllbnRIYW5kbGVyXCI7XG4gIGNvbnN0IFJlYWN0ID0gYXdhaXQgZGVlcC5pbXBvcnQoXCJyZWFjdFwiKTtcbiAgY29uc3QgeyB1c2VTdGF0ZSwgdXNlTWVtbywgdXNlUmVmIH0gPSBSZWFjdDtcbiAgY29uc3QgQ2hha3JhID0gYXdhaXQgZGVlcC5pbXBvcnQoXCJAY2hha3JhLXVpL3JlYWN0XCIpO1xuICBjb25zb2xlLmxvZyhsb2dzUHJlZml4LCB7IENoYWtyYSB9KTtcbiAgY29uc3Qge1xuICAgIElucHV0LFxuICAgIElucHV0R3JvdXAsXG4gICAgSW5wdXRSaWdodEVsZW1lbnQsXG4gICAgSWNvbkJ1dHRvbixcbiAgICBQb3BvdmVyLFxuICAgIFBvcG92ZXJUcmlnZ2VyLFxuICAgIFBvcG92ZXJDb250ZW50LFxuICAgIFBvcG92ZXJBcnJvdyxcbiAgICBQb3BvdmVyQm9keSxcbiAgICBGb3JtQ29udHJvbCxcbiAgICBGb3JtTGFiZWwsXG4gICAgQm94LFxuICAgIFBvcG92ZXJIZWFkZXIsXG4gICAgUG9wb3ZlckNsb3NlQnV0dG9uLFxuICAgIEhTdGFjayxcbiAgICBTdGFjayxcbiAgICBUZXh0LFxuICAgIExpbmssXG4gICAgU2VsZWN0LFxuICAgIFRvb2x0aXAsXG4gICAgQnV0dG9uLFxuICAgIE51bWJlcklucHV0LFxuICAgIE51bWJlcklucHV0RmllbGQsXG4gICAgRm9ybUhlbHBlclRleHQsXG4gICAgRm9ybUVycm9yTWVzc2FnZSxcbiAgICBEaXZpZGVyLFxuICB9ID0gQ2hha3JhO1xuICBjb25zdCBDaGFrcmFJY29ucyA9IGF3YWl0IGRlZXAuaW1wb3J0KFwiQGNoYWtyYS11aS9pY29uc1wiKTtcbiAgY29uc3QgeyBJbmZvT3V0bGluZUljb24gfSA9IENoYWtyYUljb25zO1xuICBjb25zb2xlLmxvZyhsb2dzUHJlZml4LCBDaGFrcmFJY29ucyk7XG4gIGNvbnN0IERlZXBDYXNlID0gYXdhaXQgZGVlcC5pbXBvcnQoXCJAZGVlcC1mb3VuZGF0aW9uL2RlZXBjYXNlXCIpO1xuICBjb25zdCB7IEZpbmRlclBvcG92ZXIgfSA9IGF3YWl0IGRlZXAuaW1wb3J0KFwiLi9jeXRvL2hvb2tzXCIpO1xuICBjb25zdCB7IENsaWVudEhhbmRsZXIgfSA9IERlZXBDYXNlO1xuICBjb25zb2xlLmxvZyhsb2dzUHJlZml4LCB7IERlZXBDYXNlIH0pO1xuICBjb25zb2xlLmxvZyhsb2dzUHJlZml4LCB7IEZpbmRlclBvcG92ZXIgfSk7XG4gIGNvbnN0IFJlYWN0SG9va0Zvcm0gPSBhd2FpdCBkZWVwLmltcG9ydChcInJlYWN0LWhvb2stZm9ybVwiKTtcbiAgY29uc29sZS5sb2cobG9nc1ByZWZpeCwgeyBSZWFjdEhvb2tGb3JtIH0pO1xuICBjb25zdCB7IHVzZUZvcm0sIENvbnRyb2xsZXIgfSA9IFJlYWN0SG9va0Zvcm07XG4gIGNvbnN0IGNvbnRhaW5UeXBlTGlua0lkID0gYXdhaXQgZGVlcC5pZChcIkBkZWVwLWZvdW5kYXRpb24vY29yZVwiLCBcIkNvbnRhaW5cIik7XG5cbiAgY29uc3QgY2hhdEdQVEF6dXJlQ2xpZW50SGFuZGxlckxpbmtJZCA9IGF3YWl0IGRlZXAuaWQoXG4gICAgXCJAZGVlcC1mb3VuZGF0aW9uL2NoYXRncHQtYXp1cmVcIixcbiAgICBcIm1hbmFnZXJDbGllbnRIYW5kbGVyXCJcbiAgKTtcblxuICByZXR1cm4gKHsgZmlsbFNpemUsIHN0eWxlLCBsaW5rIH0pID0+IHtcbiAgICBjb25zdCB7XG4gICAgICBoYW5kbGVTdWJtaXQsXG4gICAgICByZWdpc3RlcixcbiAgICAgIGZvcm1TdGF0ZTogeyBlcnJvcnMsIGlzU3VibWl0dGluZyB9LFxuICAgICAgY29udHJvbCxcbiAgICAgIHNldFZhbHVlLFxuICAgICAgc2V0RXJyb3IsXG4gICAgfSA9IHVzZUZvcm0oKTtcblxuICAgIGFzeW5jIGZ1bmN0aW9uIG9uU3VibWl0KHZhbHVlczoge1xuICAgICAgYXBpS2V5OiBzdHJpbmc7XG4gICAgICBjaGF0R1BUTW9kZWxMaW5rSWQ6IHN0cmluZztcbiAgICAgIHVzZXJMaW5rSWQ6IHN0cmluZztcbiAgICAgIGNvbnRhaW5lckxpbmtJZDogc3RyaW5nO1xuICAgIH0pIHtcbiAgICAgIGNvbnN0IHsgYXBpS2V5LCBjaGF0R1BUTW9kZWxMaW5rSWQsIHVzZXJMaW5rSWQsIGNvbnRhaW5lckxpbmtJZCB9ID1cbiAgICAgICAgdmFsdWVzO1xuXG4gICAgICBjb25zdCBjb250YWluVHlwZUxpbmtJZCA9IGF3YWl0IGRlZXAuaWQoXG4gICAgICAgIFwiQGRlZXAtZm91bmRhdGlvbi9jb3JlXCIsXG4gICAgICAgIFwiQ29udGFpblwiXG4gICAgICApO1xuICAgICAgY29uc3QgcmVzZXJ2ZWRMaW5rSWRzID0gYXdhaXQgZGVlcC5yZXNlcnZlKDYpO1xuICAgICAgY29uc3QgYXBpS2V5TGlua0lkID0gcmVzZXJ2ZWRMaW5rSWRzLnBvcCgpO1xuICAgICAgY29uc3QgY29udGFpbkZvckFwaUtleUxpbmtJZCA9IHJlc2VydmVkTGlua0lkcy5wb3AoKTtcbiAgICAgIGNvbnN0IHVzZXNBcGlLZXlMaW5rSWQgPSByZXNlcnZlZExpbmtJZHMucG9wKCk7XG4gICAgICBjb25zdCBjb250YWluRm9yVXNlc0FwaUtleUxpbmtJZCA9IHJlc2VydmVkTGlua0lkcy5wb3AoKTtcbiAgICAgIGNvbnN0IHVzZXNNb2RlbExpbmtJZCA9IHJlc2VydmVkTGlua0lkcy5wb3AoKTtcbiAgICAgIGNvbnN0IGNvbnRhaW5Gb3JVc2VzTW9kZWxMaW5rSWQgPSByZXNlcnZlZExpbmtJZHMucG9wKCk7XG5cbiAgICAgIGF3YWl0IGRlZXBcbiAgICAgICAgLnNlcmlhbCh7XG4gICAgICAgICAgb3BlcmF0aW9uczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICB0eXBlOiBcImluc2VydFwiLFxuICAgICAgICAgICAgICB0YWJsZTogXCJsaW5rc1wiLFxuICAgICAgICAgICAgICBvYmplY3RzOiB7XG4gICAgICAgICAgICAgICAgaWQ6IGFwaUtleUxpbmtJZCxcbiAgICAgICAgICAgICAgICB0eXBlX2lkOiBhd2FpdCBkZWVwLmlkKFwiQGRlZXAtZm91bmRhdGlvbi9vcGVuYWlcIiwgXCJBcGlLZXlcIiksXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICB0eXBlOiBcImluc2VydFwiLFxuICAgICAgICAgICAgICB0YWJsZTogXCJzdHJpbmdzXCIsXG4gICAgICAgICAgICAgIG9iamVjdHM6IHtcbiAgICAgICAgICAgICAgICBsaW5rX2lkOiBhcGlLZXlMaW5rSWQsXG4gICAgICAgICAgICAgICAgdmFsdWU6IGFwaUtleSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHR5cGU6IFwiaW5zZXJ0XCIsXG4gICAgICAgICAgICAgIHRhYmxlOiBcImxpbmtzXCIsXG4gICAgICAgICAgICAgIG9iamVjdHM6IHtcbiAgICAgICAgICAgICAgICBpZDogY29udGFpbkZvckFwaUtleUxpbmtJZCxcbiAgICAgICAgICAgICAgICB0eXBlX2lkOiBjb250YWluVHlwZUxpbmtJZCxcbiAgICAgICAgICAgICAgICBmcm9tX2lkOiBjb250YWluZXJMaW5rSWQsXG4gICAgICAgICAgICAgICAgdG9faWQ6IGFwaUtleUxpbmtJZCxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHR5cGU6IFwiaW5zZXJ0XCIsXG4gICAgICAgICAgICAgIHRhYmxlOiBcImxpbmtzXCIsXG4gICAgICAgICAgICAgIG9iamVjdHM6IHtcbiAgICAgICAgICAgICAgICBpZDogdXNlc0FwaUtleUxpbmtJZCxcbiAgICAgICAgICAgICAgICB0eXBlX2lkOiBhd2FpdCBkZWVwLmlkKFwiQGRlZXAtZm91bmRhdGlvbi9vcGVuYWlcIiwgXCJVc2VzQXBpS2V5XCIpLFxuICAgICAgICAgICAgICAgIGZyb21faWQ6IHVzZXJMaW5rSWQsXG4gICAgICAgICAgICAgICAgdG9faWQ6IGFwaUtleUxpbmtJZCxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHR5cGU6IFwiaW5zZXJ0XCIsXG4gICAgICAgICAgICAgIHRhYmxlOiBcImxpbmtzXCIsXG4gICAgICAgICAgICAgIG9iamVjdHM6IHtcbiAgICAgICAgICAgICAgICBpZDogY29udGFpbkZvclVzZXNBcGlLZXlMaW5rSWQsXG4gICAgICAgICAgICAgICAgdHlwZV9pZDogY29udGFpblR5cGVMaW5rSWQsXG4gICAgICAgICAgICAgICAgZnJvbV9pZDogY29udGFpbmVyTGlua0lkLFxuICAgICAgICAgICAgICAgIHRvX2lkOiB1c2VzQXBpS2V5TGlua0lkLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgdHlwZTogXCJpbnNlcnRcIixcbiAgICAgICAgICAgICAgdGFibGU6IFwibGlua3NcIixcbiAgICAgICAgICAgICAgb2JqZWN0czoge1xuICAgICAgICAgICAgICAgIGlkOiB1c2VzTW9kZWxMaW5rSWQsXG4gICAgICAgICAgICAgICAgdHlwZV9pZDogYXdhaXQgZGVlcC5pZChcIkBkZWVwLWZvdW5kYXRpb24vb3BlbmFpXCIsIFwiVXNlc01vZGVsXCIpLFxuICAgICAgICAgICAgICAgIGZyb21faWQ6IHVzZXJMaW5rSWQsXG4gICAgICAgICAgICAgICAgdG9faWQ6IGNoYXRHUFRNb2RlbExpbmtJZCxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHR5cGU6IFwiaW5zZXJ0XCIsXG4gICAgICAgICAgICAgIHRhYmxlOiBcImxpbmtzXCIsXG4gICAgICAgICAgICAgIG9iamVjdHM6IHtcbiAgICAgICAgICAgICAgICBpZDogY29udGFpbkZvclVzZXNNb2RlbExpbmtJZCxcbiAgICAgICAgICAgICAgICB0eXBlX2lkOiBjb250YWluVHlwZUxpbmtJZCxcbiAgICAgICAgICAgICAgICBmcm9tX2lkOiBjb250YWluZXJMaW5rSWQsXG4gICAgICAgICAgICAgICAgdG9faWQ6IHVzZXNNb2RlbExpbmtJZCxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgXSxcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKHNldEVycm9yKTtcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgPEJveFxuICAgICAgICBzdHlsZT17eyBtaW5XaWR0aDogNDUwLCAuLi5zdHlsZSB9fVxuICAgICAgICBiZz17XCJiZ0NvbG9yXCJ9XG4gICAgICAgIGNvbG9yPXtcInRleHRcIn1cbiAgICAgICAgYm9yZGVyQ29sb3I9e1wiYm9yZGVyQ29sb3JcIn1cbiAgICAgICAgYm9yZGVyV2lkdGg9XCIxcHhcIlxuICAgICAgICBib3JkZXJSYWRpdXM9XCJsZ1wiXG4gICAgICAgIHBhZGRpbmc9ezR9XG4gICAgICA+XG4gICAgICAgIDxmb3JtIG9uU3VibWl0PXtoYW5kbGVTdWJtaXQob25TdWJtaXQpfT5cbiAgICAgICAgICA8Rm9ybUNvbnRyb2wgaXNJbnZhbGlkPXtlcnJvcnMucm9vdH0+XG4gICAgICAgICAgICA8U3RhY2tcbiAgICAgICAgICAgICAgc3BhY2luZz17Nn1cbiAgICAgICAgICAgICAgZGl2aWRlcj17PERpdmlkZXIgLz59XG4gICAgICAgICAgICAgIGRpc3BsYXk9XCJmbGV4XCJcbiAgICAgICAgICAgICAganVzdGlmeUNvbnRlbnQ9XCJjZW50ZXJcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8QXBpS2V5VGV4dEZpZWxkXG4gICAgICAgICAgICAgICAgcmVnaXN0ZXI9e3JlZ2lzdGVyfVxuICAgICAgICAgICAgICAgIGVycm9yPXtlcnJvcnMuYXBpS2V5ICYmIGVycm9ycy5hcGlLZXkubWVzc2FnZX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPE1vZGVsTGlua0lkU2VsZWN0XG4gICAgICAgICAgICAgICAgcmVnaXN0ZXI9e3JlZ2lzdGVyfVxuICAgICAgICAgICAgICAgIGVycm9yPXtcbiAgICAgICAgICAgICAgICAgIGVycm9ycy5jaGF0R1BUTW9kZWxMaW5rSWQgJiYgZXJyb3JzLmNoYXRHUFRNb2RlbExpbmtJZC5tZXNzYWdlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8VXNlckxpbmtJZFRleHRGaWVsZFxuICAgICAgICAgICAgICAgIGNvbnRyb2w9e2NvbnRyb2x9XG4gICAgICAgICAgICAgICAgZXJyb3I9e2Vycm9ycy51c2VyTGlua0lkICYmIGVycm9ycy51c2VyTGlua0lkLm1lc3NhZ2V9XG4gICAgICAgICAgICAgICAgc2V0VmFsdWU9e3NldFZhbHVlfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8Q29udGFpbmVyTGlua0lkVGV4dEZpZWxkXG4gICAgICAgICAgICAgICAgY29udHJvbD17Y29udHJvbH1cbiAgICAgICAgICAgICAgICBzZXRWYWx1ZT17c2V0VmFsdWV9XG4gICAgICAgICAgICAgICAgZXJyb3I9e2Vycm9ycy5jb250YWluZXJMaW5rSWQgJiYgZXJyb3JzLmNvbnRhaW5lckxpbmtJZC5tZXNzYWdlfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICB7ZXJyb3JzLnJvb3QgJiYgPEZvcm1FcnJvck1lc3NhZ2U+XG4gICAgICAgICAgICAgICAge0pTT04uc3RyaW5naWZ5KGVycm9ycy5yb290LCBudWxsLCAyKX1cbiAgICAgICAgICAgICAgPC9Gb3JtRXJyb3JNZXNzYWdlPn1cbiAgICAgICAgICAgICAgPEJ1dHRvbiBpc0xvYWRpbmc9e2lzU3VibWl0dGluZ30gdHlwZT1cInN1Ym1pdFwiPlxuICAgICAgICAgICAgICAgIFN1Ym1pdFxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgIDwvU3RhY2s+XG4gICAgICAgICAgPC9Gb3JtQ29udHJvbD5cbiAgICAgICAgPC9mb3JtPlxuICAgICAgPC9Cb3g+XG4gICAgKTtcbiAgfTtcblxuICBmdW5jdGlvbiBNb2RlbExpbmtJZFNlbGVjdChvcHRpb25zOiB7IHJlZ2lzdGVyOiBGdW5jdGlvbjsgZXJyb3I6IHN0cmluZyB9KSB7XG4gICAgY29uc3QgeyByZWdpc3RlciwgZXJyb3IgfSA9IG9wdGlvbnM7XG4gICAgY29uc3QgeyBkYXRhOiBtb2RlbExpbmtzIH0gPSBkZWVwLnVzZURlZXBTdWJzY3JpcHRpb24oe1xuICAgICAgdHlwZV9pZDoge1xuICAgICAgICBfaWQ6IFtcIkBkZWVwLWZvdW5kYXRpb24vb3BlbmFpXCIsIFwiTW9kZWxcIl0sXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgY29uc3QgbW9kZWxPcHRpb25zID0gdXNlTWVtbygoKSA9PiB7XG4gICAgICBpZiAoIW1vZGVsTGlua3MgfHwgbW9kZWxMaW5rcy5sZW5ndGggPT09IDApIHJldHVybiBudWxsO1xuICAgICAgcmV0dXJuIG1vZGVsTGlua3MubWFwKChsaW5rKSA9PiB7XG4gICAgICAgIGNvbnN0IG5hbWUgPSBsaW5rLnZhbHVlLnZhbHVlO1xuICAgICAgICByZXR1cm4gPG9wdGlvbiB2YWx1ZT17bGluay5pZH0+e25hbWV9PC9vcHRpb24+O1xuICAgICAgfSk7XG4gICAgfSwgW21vZGVsTGlua3NdKTtcbiAgICBjb25zb2xlLmxvZyh7IG1vZGVsT3B0aW9ucyB9KTtcblxuICAgIHJldHVybiAoXG4gICAgICA8VG9vbHRpcFxuICAgICAgICBsYWJlbD17YE5vIG1vZGVsIGxpbmtzIG9mIHR5cGUgW1wiQGRlZXAtZm91bmRhdGlvbi9vcGVuYWlcIiwgXCJNb2RlbFwiXSBhdmFpbGFibGUgdG8gY2hvb3NlIGZyb20uIFlvdSBjYW4gaW5zdGFsbCBcIkBkZWVwLWZvdW5kYXRpb24vY2hhdGdwdC1henVyZS1kZWVwXCIgZm9yIGFscmVhZHkgY29uZmlndXJlZCBjaGF0Z3B0IG1vZGVsc2B9XG4gICAgICAgIGlzRGlzYWJsZWQ9e21vZGVsTGlua3MubGVuZ3RoID4gMH1cbiAgICAgID5cbiAgICAgICAgPEZvcm1Db250cm9sIGlzSW52YWxpZD17ZXJyb3J9PlxuICAgICAgICAgIDxGb3JtTGFiZWwgaHRtbEZvcj1cImNoYXRHUFRNb2RlbExpbmtJZFwiPlxuICAgICAgICAgICAgQ2hhdEdQVCBNb2RlbCBMaW5rIElEXG4gICAgICAgICAgPC9Gb3JtTGFiZWw+XG4gICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJDaGF0R1BUIE1vZGVsIGxpbmsgSURcIlxuICAgICAgICAgICAgey4uLnJlZ2lzdGVyKFwiY2hhdEdQVE1vZGVsTGlua0lkXCIsIHtcbiAgICAgICAgICAgICAgcmVxdWlyZWQ6IFwiQ2hhdEdQVCBNb2RlbCBsaW5rIElEIGlzIHJlcXVpcmVkXCIsXG4gICAgICAgICAgICB9KX1cbiAgICAgICAgICAgIGlzRGlzYWJsZWQ9e21vZGVsTGlua3MubGVuZ3RoID09PSAwfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIHttb2RlbE9wdGlvbnN9XG4gICAgICAgICAgPC9TZWxlY3Q+XG4gICAgICAgICAgPEZvcm1FcnJvck1lc3NhZ2U+e2Vycm9yfTwvRm9ybUVycm9yTWVzc2FnZT5cbiAgICAgICAgICA8Rm9ybUhlbHBlclRleHQ+XG4gICAgICAgICAgICBDaGF0R1BUIG1vZGVsIGlzIHJlcXVpcmVkIHRvIGtub3cgd2hpY2ggbW9kZWwgc2hvdWxkIGJlIHVzZWQgZm9yXG4gICAgICAgICAgICByZXF1ZXN0c1xuICAgICAgICAgIDwvRm9ybUhlbHBlclRleHQ+XG4gICAgICAgIDwvRm9ybUNvbnRyb2w+XG4gICAgICA8L1Rvb2x0aXA+XG4gICAgKTtcbiAgfVxuXG4gIC8vIGZ1bmN0aW9uIEFwaUtleVRleHRGaWVsZChvcHRpb25zOiB7XG4gIC8vICAgYXBpS2V5OiBzdHJpbmc7XG4gIC8vICAgaGFuZGxlQXBpS2V5Q2hhbmdlOiAoYXBpS2V5OiBzdHJpbmcpID0+IHZvaWQ7XG4gIC8vIH0pIHtcbiAgLy8gICBjb25zdCB7IGFwaUtleTogYXBpS2V5LCBoYW5kbGVBcGlLZXlDaGFuZ2U6IGhhbmRsZUFwaUtleUNoYW5nZSB9ID0gb3B0aW9ucztcblxuICAvLyAgIGNvbnN0IGhlbHBDb250ZW50ID0gKFxuICAvLyAgICAgPFN0YWNrPlxuICAvLyAgICAgICA8VGV4dD5cbiAgLy8gICAgICAgICBBcGkgS2V5IGlzIHJlcXVpcmVkIHRvIG1ha2UgcmVxdWVzdHMgdG8gZGlzY29yZCBvbiB5b3VyIGJlaGFsZlxuICAvLyAgICAgICA8L1RleHQ+XG4gIC8vICAgICAgIDxMaW5rXG4gIC8vICAgICAgICAgaXNFeHRlcm5hbFxuICAvLyAgICAgICAgIGhyZWY9XCJodHRwczovL2Rpc2NvcmQuY29tL2RldmVsb3BlcnMvZG9jcy9nZXR0aW5nLXN0YXJ0ZWQjY29uZmlndXJpbmcteW91ci1ib3RcIlxuICAvLyAgICAgICA+XG4gIC8vICAgICAgICAgT2J0YWluIEFwaSBLZXlcbiAgLy8gICAgICAgPC9MaW5rPlxuICAvLyAgICAgPC9TdGFjaz5cbiAgLy8gICApO1xuXG4gIC8vICAgcmV0dXJuIChcbiAgLy8gICAgIDxTdGFjaz5cbiAgLy8gICAgICAgPEhTdGFjaz5cbiAgLy8gICAgICAgICA8SW5wdXRcbiAgLy8gICAgICAgICAgIHBsYWNlaG9sZGVyPVwiRW50ZXIgQXBpIEtleVwiXG4gIC8vICAgICAgICAgICB2YXJpYW50PVwib3V0bGluZWRcIlxuICAvLyAgICAgICAgICAgdmFsdWU9e2FwaUtleX1cbiAgLy8gICAgICAgICAgIG9uQ2hhbmdlPXsoZXZlbnQpID0+IHtcbiAgLy8gICAgICAgICAgICAgaGFuZGxlQXBpS2V5Q2hhbmdlKGV2ZW50LnRhcmdldC52YWx1ZSk7XG4gIC8vICAgICAgICAgICB9fVxuICAvLyAgICAgICAgIC8+XG4gIC8vICAgICAgICAgPFBvcG92ZXI+XG4gIC8vICAgICAgICAgICA8UG9wb3ZlclRyaWdnZXI+XG4gIC8vICAgICAgICAgICAgIDxJY29uQnV0dG9uIGFyaWEtbGFiZWw9XCJoZWxwXCIgaWNvbj17PEluZm9PdXRsaW5lSWNvbiAvPn0gLz5cbiAgLy8gICAgICAgICAgIDwvUG9wb3ZlclRyaWdnZXI+XG4gIC8vICAgICAgICAgICA8UG9wb3ZlckNvbnRlbnQ+XG4gIC8vICAgICAgICAgICAgIDxQb3BvdmVyQXJyb3cgLz5cbiAgLy8gICAgICAgICAgICAgPFBvcG92ZXJDbG9zZUJ1dHRvbiAvPlxuICAvLyAgICAgICAgICAgICA8UG9wb3ZlckJvZHk+e2hlbHBDb250ZW50fTwvUG9wb3ZlckJvZHk+XG4gIC8vICAgICAgICAgICA8L1BvcG92ZXJDb250ZW50PlxuICAvLyAgICAgICAgIDwvUG9wb3Zlcj5cbiAgLy8gICAgICAgPC9IU3RhY2s+XG4gIC8vICAgICA8L1N0YWNrPlxuICAvLyAgICk7XG4gIC8vIH1cblxuICAvLyBmdW5jdGlvbiBVc2VyTGlua0lkVGV4dEZpZWxkKG9wdGlvbnM6IHtcbiAgLy8gICB1c2VyTGlua0lkOiBudW1iZXI7XG4gIC8vICAgaGFuZGxlVXNlckxpbmtJZENoYW5nZTogKHZhbHVlOiBudW1iZXIpID0+IHZvaWQ7XG4gIC8vIH0pIHtcbiAgLy8gICBjb25zdCB7IHVzZXJMaW5rSWQsIGhhbmRsZVVzZXJMaW5rSWRDaGFuZ2UgfSA9IG9wdGlvbnM7XG4gIC8vICAgY29uc3QgW2lzUG9wb3Zlck9wZW4sIHNldElzUG9wb3Zlck9wZW5dID0gdXNlU3RhdGUoZmFsc2UpO1xuXG4gIC8vICAgY29uc3QgaGFuZGxlSGVscENsaWNrID0gKCkgPT4ge1xuICAvLyAgICAgc2V0SXNQb3BvdmVyT3BlbighaXNQb3BvdmVyT3Blbik7XG4gIC8vICAgfTtcblxuICAvLyAgIGNvbnN0IGhlbHBDb250ZW50ID0gYFVzZXIgbGluayBpcyBhIGxpbmsgdGhhdCBpcyBjb25zaWRlcmVkIGFzIGEgdXNlciBvZiBBcGlLZXkuIFVzZXIgbGluayB3aWxsIGJlIFwiZnJvbVwiIGZvciBVc2VzQXBpS2V5YDtcblxuICAvLyAgIHJldHVybiAoXG4gIC8vICAgICA8SFN0YWNrPlxuICAvLyAgICAgICA8Rm9ybUNvbnRyb2w+XG4gIC8vICAgICAgICAgPElucHV0R3JvdXA+XG4gIC8vICAgICAgICAgICA8SW5wdXRcbiAgLy8gICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJVc2VyIExpbmsgSURcIlxuICAvLyAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gIC8vICAgICAgICAgICAgIHZhcmlhbnQ9XCJvdXRsaW5lXCJcbiAgLy8gICAgICAgICAgICAgdmFsdWU9e3VzZXJMaW5rSWR9XG4gIC8vICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZXZlbnQpID0+IHtcbiAgLy8gICAgICAgICAgICAgICBoYW5kbGVVc2VyTGlua0lkQ2hhbmdlKGV2ZW50LnRhcmdldC52YWx1ZSk7XG4gIC8vICAgICAgICAgICAgIH19XG4gIC8vICAgICAgICAgICAgIHJlcXVpcmVkXG4gIC8vICAgICAgICAgICAvPlxuICAvLyAgICAgICAgIDwvSW5wdXRHcm91cD5cbiAgLy8gICAgICAgPC9Gb3JtQ29udHJvbD5cbiAgLy8gICAgICAgPFBvcG92ZXI+XG4gIC8vICAgICAgICAgPFBvcG92ZXJUcmlnZ2VyPlxuICAvLyAgICAgICAgICAgPEljb25CdXR0b24gYXJpYS1sYWJlbD1cImhlbHBcIiBpY29uPXs8SW5mb091dGxpbmVJY29uIC8+fSAvPlxuICAvLyAgICAgICAgIDwvUG9wb3ZlclRyaWdnZXI+XG4gIC8vICAgICAgICAgPFBvcG92ZXJDb250ZW50PlxuICAvLyAgICAgICAgICAgPFBvcG92ZXJBcnJvdyAvPlxuICAvLyAgICAgICAgICAgPFBvcG92ZXJDbG9zZUJ1dHRvbiAvPlxuICAvLyAgICAgICAgICAgPFBvcG92ZXJCb2R5PntoZWxwQ29udGVudH08L1BvcG92ZXJCb2R5PlxuICAvLyAgICAgICAgIDwvUG9wb3ZlckNvbnRlbnQ+XG4gIC8vICAgICAgIDwvUG9wb3Zlcj5cbiAgLy8gICAgICAgPEZpbmRlclBvcG92ZXJcbiAgLy8gICAgICAgICBsaW5rPXtkZWVwLmxpbmtJZH1cbiAgLy8gICAgICAgICBvblN1Ym1pdD17YXN5bmMgKGxpbmspID0+IHtcbiAgLy8gICAgICAgICAgIGhhbmRsZVVzZXJMaW5rSWRDaGFuZ2UobGluay5pZCk7XG4gIC8vICAgICAgICAgfX1cbiAgLy8gICAgICAgPlxuICAvLyAgICAgICAgIDxJY29uQnV0dG9uIGFyaWEtbGFiZWw9XCJmaW5kZXJcIiBpY29uPXs8PvCfqqw8Lz59IC8+XG4gIC8vICAgICAgIDwvRmluZGVyUG9wb3Zlcj5cbiAgLy8gICAgIDwvSFN0YWNrPlxuICAvLyAgICk7XG4gIC8vIH1cblxuICBmdW5jdGlvbiBBcGlLZXlUZXh0RmllbGQob3B0aW9uczogeyBlcnJvcjogc3RyaW5nOyByZWdpc3RlcjogRnVuY3Rpb24gfSkge1xuICAgIGNvbnN0IHsgZXJyb3IsIHJlZ2lzdGVyIH0gPSBvcHRpb25zO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxIU3RhY2s+XG4gICAgICAgIDxGb3JtQ29udHJvbCBpc0ludmFsaWQ9e2Vycm9yfT5cbiAgICAgICAgICA8Rm9ybUxhYmVsIGh0bWxGb3I9XCJhcGlLZXlcIj5BcGlLZXkgTGluayBJRDwvRm9ybUxhYmVsPlxuICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgey4uLnJlZ2lzdGVyKFwiYXBpS2V5XCIsIHtcbiAgICAgICAgICAgICAgcmVxdWlyZWQ6IFwiQXBpIEtleSBpcyByZXF1aXJlZFwiLFxuICAgICAgICAgICAgfSl9XG4gICAgICAgICAgLz5cbiAgICAgICAgICA8Rm9ybUVycm9yTWVzc2FnZT57ZXJyb3J9PC9Gb3JtRXJyb3JNZXNzYWdlPlxuICAgICAgICAgIDxGb3JtSGVscGVyVGV4dD5cbiAgICAgICAgICAgIDxTdGFjaz5cbiAgICAgICAgICAgICAgPFRleHQ+XG4gICAgICAgICAgICAgICAgQXBpIEtleSBpcyByZXF1aXJlZCB0byBtYWtlIHJlcXVlc3RzIHRvIG9wZW5haSBvbiB5b3VyIGJlaGFsZlxuICAgICAgICAgICAgICA8L1RleHQ+XG4gICAgICAgICAgICAgIDxMaW5rXG4gICAgICAgICAgICAgICAgaXNFeHRlcm5hbFxuICAgICAgICAgICAgICAgIGhyZWY9XCJodHRwczovL3BsYXRmb3JtLm9wZW5haS5jb20vYXBpLWtleXNcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgT2J0YWluIEFwaSBLZXlcbiAgICAgICAgICAgICAgPC9MaW5rPlxuICAgICAgICAgICAgPC9TdGFjaz5cbiAgICAgICAgICA8L0Zvcm1IZWxwZXJUZXh0PlxuICAgICAgICA8L0Zvcm1Db250cm9sPlxuICAgICAgPC9IU3RhY2s+XG4gICAgKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIFVzZXJMaW5rSWRUZXh0RmllbGQob3B0aW9uczoge1xuICAgIHNldFZhbHVlOiBhbnk7XG4gICAgZXJyb3I6IHN0cmluZztcbiAgICBjb250cm9sOiBhbnk7XG4gIH0pIHtcbiAgICBjb25zdCB7IHNldFZhbHVlLCBlcnJvciwgY29udHJvbCB9ID0gb3B0aW9ucztcblxuICAgIHJldHVybiAoXG4gICAgICA8Rm9ybUNvbnRyb2wgaXNJbnZhbGlkPXtlcnJvcn0+XG4gICAgICAgIDxGb3JtTGFiZWwgaHRtbEZvcj1cInVzZXJMaW5rSWRcIj5Vc2VyIExpbmsgSUQ8L0Zvcm1MYWJlbD5cbiAgICAgICAgPENvbnRyb2xsZXJcbiAgICAgICAgICBuYW1lPVwidXNlckxpbmtJZFwiXG4gICAgICAgICAgY29udHJvbD17Y29udHJvbH1cbiAgICAgICAgICBkZWZhdWx0VmFsdWU9e3VuZGVmaW5lZH1cbiAgICAgICAgICBydWxlcz17e1xuICAgICAgICAgICAgcmVxdWlyZWQ6IHtcbiAgICAgICAgICAgICAgdmFsdWU6IHRydWUsXG4gICAgICAgICAgICAgIG1lc3NhZ2U6IFwiVXNlciBsaW5rIElEIGlzIHJlcXVpcmVkXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdmFsaWRhdGU6IGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCB2YWx1ZU51bWJlciA9IHBhcnNlSW50KHZhbHVlKTtcbiAgICAgICAgICAgICAgaWYgKGlzTmFOKHZhbHVlTnVtYmVyKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBcIlVzZXIgbGluayBJRCBtdXN0IGJlIGEgbnVtYmVyXCI7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgICAgIGRhdGE6IFtsaW5rXSxcbiAgICAgICAgICAgICAgfSA9IGF3YWl0IGRlZXAuc2VsZWN0KHsgaWQ6IHZhbHVlTnVtYmVyIH0pO1xuICAgICAgICAgICAgICBpZiAoIWxpbmspIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYExpbmsgJHt2YWx1ZU51bWJlcn0gZG9lcyBub3QgZXhpc3RgO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH19XG4gICAgICAgICAgcmVuZGVyPXsoeyBmaWVsZCB9KSA9PiAoXG4gICAgICAgICAgICA8SFN0YWNrPlxuICAgICAgICAgICAgICA8TnVtYmVySW5wdXQgey4uLmZpZWxkfSBtaW49ezB9PlxuICAgICAgICAgICAgICAgIDxOdW1iZXJJbnB1dEZpZWxkIHJlZj17ZmllbGQucmVmfSBuYW1lPXtmaWVsZC5uYW1lfSAvPlxuICAgICAgICAgICAgICA8L051bWJlcklucHV0PlxuICAgICAgICAgICAgICA8RmluZGVyUG9wb3ZlclxuICAgICAgICAgICAgICAgIGxpbms9e2RlZXAubGlua0lkfVxuICAgICAgICAgICAgICAgIG9uU3VibWl0PXthc3luYyAobGluaykgPT4ge1xuICAgICAgICAgICAgICAgICAgc2V0VmFsdWUoXCJjb250YWluZXJMaW5rSWRcIiwgbGluay5pZCk7XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxJY29uQnV0dG9uIGFyaWEtbGFiZWw9XCJmaW5kZXJcIiBpY29uPXs8PvCfqqw8Lz59IC8+XG4gICAgICAgICAgICAgIDwvRmluZGVyUG9wb3Zlcj5cbiAgICAgICAgICAgIDwvSFN0YWNrPlxuICAgICAgICAgICl9XG4gICAgICAgIC8+XG4gICAgICAgIDxGb3JtRXJyb3JNZXNzYWdlPntlcnJvcn08L0Zvcm1FcnJvck1lc3NhZ2U+XG4gICAgICAgIDxGb3JtSGVscGVyVGV4dD5cbiAgICAgICAgICBVc2VyIGxpbmsgaXMgYSBsaW5rIHRoYXQgaXMgY29uc2lkZXJlZCBhcyBhIHVzZXIgb2YgQXBpS2V5LiBVc2VyIGxpbmtcbiAgICAgICAgICB3aWxsIGJlIFwiZnJvbVwiIGZvciBVc2VzQXBpS2V5XG4gICAgICAgIDwvRm9ybUhlbHBlclRleHQ+XG4gICAgICA8L0Zvcm1Db250cm9sPlxuICAgICk7XG4gIH1cblxuICBmdW5jdGlvbiBDb250YWluZXJMaW5rSWRUZXh0RmllbGQob3B0aW9uczoge1xuICAgIHNldFZhbHVlOiBhbnk7XG4gICAgZXJyb3I6IHN0cmluZztcbiAgICBjb250cm9sOiBhbnk7XG4gIH0pIHtcbiAgICBjb25zdCB7IHNldFZhbHVlLCBlcnJvciwgY29udHJvbCB9ID0gb3B0aW9ucztcblxuICAgIGNvbnN0IGhlbHBDb250ZW50ID0gYENvbnRhaW5lciBsaW5rIGlzIGEgbGluayB0aGF0IHdpbGwgY29udGFpbiBuZXdseSBjcmVhdGVkIEFwaUtleSwgVXNlc0FwaUtleWA7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPEZvcm1Db250cm9sIGlzSW52YWxpZD17ZXJyb3J9PlxuICAgICAgICA8Rm9ybUxhYmVsIGh0bWxGb3I9XCJjb250YWluZXJMaW5rSWRcIj5Db250YWluZXIgTGluayBJRDwvRm9ybUxhYmVsPlxuICAgICAgICA8SFN0YWNrPlxuICAgICAgICAgIDxDb250cm9sbGVyXG4gICAgICAgICAgICBuYW1lPVwiY29udGFpbmVyTGlua0lkXCJcbiAgICAgICAgICAgIGNvbnRyb2w9e2NvbnRyb2x9XG4gICAgICAgICAgICBkZWZhdWx0VmFsdWU9e3VuZGVmaW5lZH1cbiAgICAgICAgICAgIHJ1bGVzPXt7XG4gICAgICAgICAgICAgIHJlcXVpcmVkOiB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHRydWUsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogXCJDb250YWluZXIgbGluayBpZCBpcyByZXF1aXJlZFwiLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB2YWxpZGF0ZTogYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWVOdW1iZXIgPSBwYXJzZUludCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKGlzTmFOKHZhbHVlTnVtYmVyKSkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiQ29udGFpbmVyIGxpbmsgaWQgbXVzdCBiZSBhIG51bWJlclwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICAgICAgICBkYXRhOiBbbGlua10sXG4gICAgICAgICAgICAgICAgfSA9IGF3YWl0IGRlZXAuc2VsZWN0KHsgaWQ6IHZhbHVlTnVtYmVyIH0pO1xuICAgICAgICAgICAgICAgIGlmICghbGluaykge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIGBMaW5rICR7dmFsdWVOdW1iZXJ9IGRvZXMgbm90IGV4aXN0YDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIHJlbmRlcj17KHsgZmllbGQgfSkgPT4gKFxuICAgICAgICAgICAgICA8TnVtYmVySW5wdXQgey4uLmZpZWxkfSBtaW49ezB9PlxuICAgICAgICAgICAgICAgIDxOdW1iZXJJbnB1dEZpZWxkIHJlZj17ZmllbGQucmVmfSBuYW1lPXtmaWVsZC5uYW1lfSAvPlxuICAgICAgICAgICAgICA8L051bWJlcklucHV0PlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAvPlxuICAgICAgICAgIDxGaW5kZXJQb3BvdmVyXG4gICAgICAgICAgICBsaW5rPXtkZWVwLmxpbmtJZH1cbiAgICAgICAgICAgIG9uU3VibWl0PXthc3luYyAobGluaykgPT4ge1xuICAgICAgICAgICAgICBzZXRWYWx1ZShcImNvbnRhaW5lckxpbmtJZFwiLCBsaW5rLmlkKTtcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgPlxuICAgICAgICAgICAgPEljb25CdXR0b24gYXJpYS1sYWJlbD1cImZpbmRlclwiIGljb249ezw+8J+qrDwvPn0gLz5cbiAgICAgICAgICA8L0ZpbmRlclBvcG92ZXI+XG4gICAgICAgIDwvSFN0YWNrPlxuICAgICAgICA8Rm9ybUVycm9yTWVzc2FnZT57ZXJyb3J9PC9Gb3JtRXJyb3JNZXNzYWdlPlxuICAgICAgICA8Rm9ybUhlbHBlclRleHQ+XG4gICAgICAgICAgQ29udGFpbmVyIGxpbmsgaXMgYSBsaW5rIHRoYXQgd2lsbCBjb250YWluIG5ld2x5IGNyZWF0ZWQgQXBpS2V5LFxuICAgICAgICAgIFVzZXNBcGlLZXlcbiAgICAgICAgPC9Gb3JtSGVscGVyVGV4dD5cbiAgICAgIDwvRm9ybUNvbnRyb2w+XG4gICAgKTtcbiAgfVxufTtcbiJdfQ==",
          "link_id": 1268
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 1408,
      "src_id": 1408,
      "handler_id": 1409,
      "execution_provider_id": 33,
      "isolation_provider_id": 81,
      "dist": {
        "id": 1408,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 545,
          "value": "async ({ require, deep, data: { newLink, triggeredByLinkId } }) => {\r\n    const Conversation = await deep.id(\"@deep-foundation/chatgpt-azure\", \"Conversation\");\r\n    const Result = await deep.id(\"@deep-foundation/chatgpt-azure-templates\", \"Result\");\r\n    const Message = await deep.id(\"@deep-foundation/messaging\", \"Message\");\r\n    const Contain = await deep.id(\"@deep-foundation/core\", \"Contain\");\r\n    const Reply = await deep.id(\"@deep-foundation/chatgpt-azure\", 'Reply');\r\n    const Continue = await deep.id(deep.linkId, \"Continue\");\r\n\r\n    const { data: [template] } = await deep.select(newLink.from_id);\r\n    const { data: [cont] } = await deep.select({\r\n        type_id: Continue,\r\n        from_id: newLink.id,\r\n    });\r\n\r\n    const evalTemplate = async (options) => {\r\n        const { linkId, deep, template } = options;\r\n        const result = eval('(async () => (`'+template+'`))()');\r\n        return result;\r\n    }\r\n\r\n    const linkId = newLink.to_id;\r\n    const value = template?.value?.value || '';\r\n    const result = await evalTemplate({ linkId, deep, template: value });\r\n\r\n    const { data: [{ id: messageLinkId }] } = await deep.insert({\r\n        string: { data: { value: result } },\r\n        type_id: Message,\r\n        in: { data: [\r\n            {\r\n                type_id: Contain,\r\n                from_id: newLink.from_id,\r\n            },\r\n            {\r\n                type_id: Result,\r\n                from_id: newLink.id,\r\n                in: {\r\n                    data: {\r\n                        type_id: Contain,\r\n                        from_id: newLink.from_id,\r\n                    },\r\n                },\r\n            },\r\n        ] },\r\n    });\r\n\r\n    await deep.insert({\r\n        type_id: Reply,\r\n        from_id: messageLinkId,\r\n        ...(cont ? {\r\n            to_id: cont.to_id,\r\n        } : {\r\n            to: { data: {\r\n                type_id: Conversation,\r\n                in: { data: {\r\n                    type_id: Contain,\r\n                    from_id: newLink.id,\r\n                } },\r\n            } },\r\n        }),\r\n        in: { data: [{\r\n                type_id: Contain,\r\n                from_id: newLink.id,\r\n        }] }\r\n    });\r\n\r\n    return {\r\n        templateId: linkId,\r\n        template: template?.value?.value,\r\n        result,\r\n    };\r\n}",
          "link_id": 1408
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 1470,
      "src_id": 1470,
      "handler_id": 1471,
      "execution_provider_id": 33,
      "isolation_provider_id": 81,
      "dist": {
        "id": 1470,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 559,
          "value": "async ({ deep, data: { oldLink }, require }) => {\n    const axios = require('axios');\n    const router = await deep.id('@deep-foundation/telegram-bot', 'router');\n    const onTelegramInHandler = await deep.id('@deep-foundation/telegram-bot', 'onTelegramInHandler');\n\n    const containTree = deep.idLocal('@deep-foundation/core', 'containTree');\n    const Contain = deep.idLocal('@deep-foundation/core', 'Contain');\n\n    const { data: deletedLinks } = await deep.delete({\n        up: {\n            tree_id: containTree,\n            parent: {\n                type_id: Contain,\n                string: { value: { _in: [\n                    'route'+oldLink.from_id,\n                    'handle'+oldLink.from_id,\n                    'use'+oldLink.from_id,\n                    'include'+oldLink.from_id,\n                    'tree'+oldLink.from_id,\n                    'ruleInclude'+oldLink.from_id,\n                    'ruleTree'+oldLink.from_id,\n                ] } },\n            },\n        },\n    });\n\n    const { data: deletedWebhook } = await axios.get(`https://api.telegram.org/bot${token?.value?.value}/deleteWebhook`);\n\n    return {\n        deletedLinks,\n        deletedWebhook\n    };\n}",
          "link_id": 1470
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 1472,
      "src_id": 1472,
      "handler_id": 1473,
      "execution_provider_id": 33,
      "isolation_provider_id": 81,
      "dist": {
        "id": 1472,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 560,
          "value": "async ({ deep, data: { newLink, triggeredByLinkId }, require }) => {\n    const { Telegraf } = require('telegraf');\n    const Markup = require('telegraf/markup');\n\n    const Bot = await deep.id('@deep-foundation/telegram-bot', 'Bot');\n    const Token = await deep.id('@deep-foundation/telegram-bot', 'Token');\n    const Active = await deep.id('@deep-foundation/telegram-bot', 'Active');\n    const Conversation = await deep.id('@deep-foundation/telegram-bot', 'Conversation');\n    const HandleTelegramBotOut = await deep.id('@deep-foundation/telegram-bot', 'HandleTelegramBotOut');\n    const messagingTree = await deep.id('@deep-foundation/messaging', 'messagingTree');\n    const containTree = deep.idLocal('@deep-foundation/core', 'containTree');\n    const Contain = deep.idLocal('@deep-foundation/core', 'Contain');\n\n    function splitStringIntoChunks(str, chunkSize = 4096) {\n        const chunks = [];\n        for (let i = 0, len = str.length; i < len; i += chunkSize) {\n            chunks.push(str.substring(i, i + chunkSize));\n        }\n        return chunks;\n    }\n\n    const botId = (await deep.select({\n        type_id: Bot,\n        down: {\n            tree_id: containTree,\n            link_id: triggeredByLinkId\n        },\n    }))?.data?.[0]?.id;\n    if (!botId) {\n        const botId = (await deep.select({\n            type_id: Bot,\n            down: {\n                tree_id: messagingTree,\n                link_id: newLink.id,\n            },\n        }))?.data?.[0]?.id;\n        const token = (await deep.select({\n            type_id: Token,\n            in: {\n                type_id: Active,\n                from: {\n                    down: {\n                        tree_id: messagingTree,\n                        link_id: newLink.id,\n                    },\n                },\n            },\n        }))?.data?.[0];\n        const conversationId = (await deep.select({\n            type_id: Conversation,\n            down: {\n                tree_id: messagingTree,\n                link_id: newLink.id,\n            },\n        }))?.data?.[0]?.id;\n        const replyToId = newLink.to_id;\n\n        const message = (await deep.select(newLink.from_id))?.data?.[0];\n\n        const bot = new Telegraf(token?.value?.value);\n\n        const { data: handles } = await deep.select({\n            type_id: HandleTelegramBotOut,\n            from_id: botId,\n            order_by: { id: 'asc' },\n        });\n\n        const state = {\n            defaultHandling: true,\n        };\n        const handled = {};\n        for (let h in handles) {\n            const packageId = (await deep.select({\n                out: { type_id: Contain, to_id: handles[h].to_id },\n            }))?.data?.[0]?.id;\n            if (!packageId) {\n                handled[handles[h].to_id] = { error: `!packageId by handler(${handles[h].to_id}).in(Contain).from` };\n                continue;\n            }\n            const hdeep = new deep.DeepClient({\n                deep, ...(await deep.jwt({ linkId: packageId }))\n            })\n            handled[handles[h].to_id] = await hdeep.eval({\n                linkId: botId,\n                handlerId: handles[h].to_id,\n                input: {\n                    data: {\n                        state,\n                        bot,\n                        botId,\n                        userId: triggeredByLinkId,\n                        conversationId,\n                        handlerId: handles[h].to_id,\n                        reply: newLink,\n                        message,\n                    },\n                },\n            });\n        }\n\n        if (state.defaultHandling) {\n            const chanks = splitStringIntoChunks(message?.value?.value);\n            for (let c in chanks) {\n                bot.telegram.sendMessage(\n                    await deep.name(conversationId),\n                    chanks[c],\n                );\n            }\n        }\n\n        return {\n            botId,\n            conversationId,\n            replyToId,\n            message,\n            token,\n        };\n    } else {\n        return { botId };\n    }\n}",
          "link_id": 1472
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 1475,
      "src_id": 1475,
      "handler_id": 1476,
      "execution_provider_id": 33,
      "isolation_provider_id": 81,
      "dist": {
        "id": 1475,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 561,
          "value": "async (req, res, next, { deep, require, data: { baseUrl, originalUrl, path } }) => {\n    const { DeepClient } = await import('@deep-foundation/deeplinks/imports/client.js');\n\n    const User = deep.idLocal('@deep-foundation/core', 'User');\n    const Join = deep.idLocal('@deep-foundation/core', 'Join');\n    const Contain = deep.idLocal('@deep-foundation/core', 'Contain');\n    const Message = await deep.id('@deep-foundation/messaging', 'Message');\n    const Reply = await deep.id('@deep-foundation/messaging', 'Reply');\n    const Conversation = await deep.id('@deep-foundation/telegram-bot', 'Conversation');\n\n    const HandleTelegramBotIn = await deep.id('@deep-foundation/telegram-bot', 'HandleTelegramBotIn');\n\n    const m = req?.body?.message || req?.body?.callback_query?.message;\n    const _message_id = m?.message_id;\n    const _date = m?.date;\n    const _message = m?.text;\n    const _voice = m?.voice;\n    const _audio = m?.audio;\n    const _userId = m?.from?.id;\n    const _is_bot = m?.from?.is_bot;\n    const _username = m?.from?.username;\n    const _conversationId = m?.chat?.id;\n    const _replyId = m?.reply_to_message?.message_id;\n\n    const botId = +baseUrl.split('/').slice(-1)[0];\n    \n    // found or insert user based on telegram nick\n    let userId;\n    userId = (await deep.select({\n        type_id: User,\n        in: {\n            type_id: Contain, from_id: botId,\n            string: { value: `${_userId}` },\n        },\n    }))?.data?.[0]?.id;\n    if (!userId) {\n        userId = (await deep.insert({\n            type_id: User,\n            out: { data: [\n                {\n                    type_id: Join,\n                    to_id: await deep.id('deep', 'users'),\n                },\n                {\n                    type_id: Join,\n                    to_id: botId,\n                },\n            ] },\n            in: { data: {\n                type_id: Contain, from_id: botId,\n                string: { data: { value: `${_userId}` } }, // telegram nick\n            } },\n        }))?.data?.[0]?.id;\n    }\n\n    const udeep = new DeepClient({ deep, ...(await deep.jwt({ linkId: userId })) });\n\n    // found or insert user based on telegram nick\n    let conversationId;\n    conversationId = (await deep.select({\n        type_id: Conversation,\n        in: {\n            type_id: Contain, from_id: userId,\n            string: { value: `${_conversationId}` },\n        },\n    }))?.data?.[0]?.id;\n    if (!conversationId) {\n        conversationId = (await deep.insert({\n            type_id: Conversation,\n            in: { data: {\n                type_id: Contain, from_id: userId,\n                string: { data: { value: `${_conversationId}` } }, // telegram conversation id\n            } },\n            out: { data: {\n                type_id: Reply,\n                to_id: botId,\n                in: { data: {\n                    type_id: Contain, from_id: userId,\n                } },\n            } },\n        }))?.data?.[0]?.id;\n    }\n\n    const { data: handles } = await deep.select({\n        type_id: HandleTelegramBotIn,\n        from_id: botId,\n        order_by: { id: 'asc' },\n    });\n\n    const state = {\n        defaultHandling: true,\n    };\n    const handled = {};\n    for (let h in handles) {\n        const packageId = (await deep.select({\n            out: { type_id: Contain, to_id: handles[h].to_id },\n        }))?.data?.[0]?.id;\n        if (!packageId) {\n            handled[handles[h].to_id] = { error: `!packageId by handler(${handles[h].to_id}).in(Contain).from` };\n            continue;\n        }\n        const hdeep = new deep.DeepClient({\n            deep, ...(await deep.jwt({ linkId: packageId }))\n        });\n        handled[handles[h].to_id] = await hdeep.eval({\n            linkId: botId,\n            handlerId: handles[h].to_id,\n            input: {\n                data: {\n                    state,\n                    req, res,\n                    botId,\n                    userId,\n                    conversationId,\n                    handlerId: handles[h].to_id,\n                    udeep,\n                },\n            },\n        });\n    }\n\n    if (state.defaultHandling) {\n        // found or insert user based on telegram nick\n        let replyId = conversationId; // if not exists, then convers\n        if (_replyId) replyId = (await deep.select({ \n            type_id: Contain,\n            string: { value: `${_replyId}` },\n        }))?.data?.[0]?.to_id;\n        const messageInserted = await udeep.insert({\n            type_id: Message,\n            string: { data: { value: _message } },\n            in: { data: {\n                type_id: Contain, from_id: userId,\n                string: { data: { value: `${_message_id}` } },\n            } },\n            out: { data: {\n                type_id: Reply,\n                to_id: replyId,\n                in: { data: {\n                    type_id: Contain, from_id: userId,\n                } },\n            } },\n        });\n        const { data: messageId } = messageInserted;\n        res.send(JSON.stringify({\n            userId,\n            conversationId,\n            messageId,\n        }));\n    }\n}",
          "link_id": 1475
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 1477,
      "src_id": 1477,
      "handler_id": 1478,
      "execution_provider_id": 33,
      "isolation_provider_id": 81,
      "dist": {
        "id": 1477,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 562,
          "value": "async ({ deep, data: { newLink, deeplinksUrl }, require }) => {\n    const axios = require('axios');\n    const router = await deep.id('@deep-foundation/telegram-bot', 'router');\n    const onTelegramInHandler = await deep.id('@deep-foundation/telegram-bot', 'onTelegramInHandler');\n    const selector = await deep.id('@deep-foundation/telegram-bot', 'botSelector');\n    const tuaimRuleSubjectSelector = await deep.id('@deep-foundation/telegram-bot', 'tuaimRuleSubjectSelector');\n    const messagingTree = await deep.id('@deep-foundation/messaging', 'messagingTree');\n    const joinTree = await deep.id('@deep-foundation/core', 'joinTree');\n\n    let { data: [token] } = await deep.select({ id: newLink.to_id });\n\n    const Route = deep.idLocal('@deep-foundation/core', 'Route');\n    const RouterStringUse = deep.idLocal('@deep-foundation/core', 'RouterStringUse');\n    const HandleRoute = deep.idLocal('@deep-foundation/core', 'HandleRoute');\n    const Contain = deep.idLocal('@deep-foundation/core', 'Contain');\n    const SelectorTree = deep.idLocal('@deep-foundation/core', 'SelectorTree');\n    const SelectorInclude = deep.idLocal('@deep-foundation/core', 'SelectorInclude');\n\n    const contain = (value, from_id) => ({\n        in: { data: {\n            type_id: Contain,\n            from_id: from_id,\n            string: { data: { value } },\n        } },\n    });\n\n    const { data: insertedLinks } = await deep.insert([\n        {\n            type_id: SelectorInclude,\n            from_id: tuaimRuleSubjectSelector,\n            to_id: newLink.from_id,\n            ...contain('ruleInclude'+newLink.from_id, tuaimRuleSubjectSelector),\n            out: { data: {\n                type_id: SelectorTree,\n                to_id: joinTree,\n                ...contain('ruleTree'+newLink.from_id, tuaimRuleSubjectSelector),\n            } },\n        },\n        {\n            type_id: SelectorInclude,\n            from_id: selector,\n            to_id: newLink.from_id,\n            ...contain('include'+newLink.from_id, selector),\n            out: { data: {\n                type_id: SelectorTree,\n                to_id: messagingTree,\n                ...contain('tree'+newLink.from_id, selector),\n            } },\n        },\n        {\n            type_id: Route,\n            ...contain('route'+newLink.from_id, router),\n            out: { data: [\n                {\n                    type_id: HandleRoute,\n                    to_id: onTelegramInHandler,\n                    ...contain('handle'+newLink.from_id, router),\n                },\n                {\n                    type_id: RouterStringUse,\n                    to_id: router,\n                    string: { data: { value: '/packages/deep-foundation/telegram-bot/'+newLink.from_id } },\n                    ...contain('use'+newLink.from_id, router),\n                },\n            ] },\n        },\n    ]);\n\n    const { data: insertedWebhook } = await axios.get(`https://api.telegram.org/bot${token?.value?.value}/setWebhook?url=${deeplinksUrl}/packages/deep-foundation/telegram-bot/${newLink.from_id}`);\n\n    return {\n        insertedLinks,\n        insertedWebhook,\n    };\n}",
          "link_id": 1477
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 1601,
      "src_id": 1601,
      "handler_id": 1602,
      "execution_provider_id": 33,
      "isolation_provider_id": 81,
      "dist": {
        "id": 1601,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 615,
          "value": "async ({ deep, data: { newLink } }) => {\n    const selector = await deep.id(deep.linkId, 'inSelector');\n    const executor = await deep.id(deep.linkId, 'executor');\n    const reader = await deep.id(deep.linkId, 'reader');\n    const HandleTelegramBotIn = await deep.id('@deep-foundation/telegram-bot', 'HandleTelegramBotIn');\n    const onTelegramBotInHandler = await deep.id(deep.linkId, 'onTelegramBotInHandler');\n    const HandleTelegramBotOut = await deep.id('@deep-foundation/telegram-bot', 'HandleTelegramBotOut');\n    const onTelegramBotOutHandler = await deep.id(deep.linkId, 'onTelegramBotOutHandler');\n    const messagingTree = await deep.id('@deep-foundation/messaging', 'messagingTree');\n    const systemMessage = await deep.id(deep.linkId, 'systemMessage');\n    const System = await deep.id('@deep-foundation/chatgpt-azure', 'System');\n\n    const Join = deep.idLocal('@deep-foundation/core', 'Join');\n    const Contain = deep.idLocal('@deep-foundation/core', 'Contain');\n    const SelectorTree = deep.idLocal('@deep-foundation/core', 'SelectorTree');\n    const SelectorInclude = deep.idLocal('@deep-foundation/core', 'SelectorInclude');\n\n    const contain = (value, from_id) => ({\n        in: { data: {\n            type_id: Contain,\n            from_id: from_id,\n            string: { data: { value } },\n        } },\n    });\n\n    await deep.insert([\n        {\n            type_id: SelectorInclude,\n            from_id: selector,\n            to_id: newLink.to_id,\n            ...contain('include'+newLink.to_id, selector),\n            out: { data: {\n                type_id: SelectorTree,\n                to_id: messagingTree,\n                ...contain('tree'+newLink.to_id, selector),\n            } },\n        },\n        {\n            type_id: HandleTelegramBotIn,\n            from_id: newLink.to_id,\n            to_id: onTelegramBotInHandler,\n            ...contain('handleTelegramBotIn'+newLink.to_id, selector),\n        },\n        {\n            type_id: HandleTelegramBotOut,\n            from_id: newLink.to_id,\n            to_id: onTelegramBotOutHandler,\n            ...contain('handleTelegramBotOut'+newLink.to_id, selector),\n        },\n        {\n            type_id: Join,\n            from_id: executor,\n            to_id: deep.linkId,\n            ...contain('executorJoin'+newLink.to_id, selector),\n        },\n        {\n            type_id: System,\n            from_id: systemMessage,\n            to_id: await deep.id('@deep-foundation/chatgpt-azure-templates'),\n            ...contain('system'+newLink.to_id, selector),\n        },\n    ]);\n}",
          "link_id": 1601
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 1604,
      "src_id": 1604,
      "handler_id": 1605,
      "execution_provider_id": 33,
      "isolation_provider_id": 81,
      "dist": {
        "id": 1604,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 616,
          "value": "async ({ deep, data: { oldLink } }) => {\n    const router = await deep.id('@deep-foundation/telegram-bot', 'router');\n    const onTelegramInHandler = await deep.id('@deep-foundation/telegram-bot', 'onTelegramInHandler');\n\n    const containTree = deep.idLocal('@deep-foundation/core', 'containTree');\n    const Contain = deep.idLocal('@deep-foundation/core', 'Contain');\n\n    await deep.delete({\n        up: {\n            tree_id: containTree,\n            parent: {\n                type_id: Contain,\n                string: { value: { _in: [\n                    'include'+oldLink.to_id,\n                    'tree'+oldLink.to_id,\n                    'handleTelegramBotIn'+oldLink.to_id,\n                    'handleTelegramBotOut'+oldLink.to_id,\n                    'system'+oldLink.to_id,\n                    'executorJoin'+oldLink.to_id,\n                ] } },\n            },\n        },\n    });\n}",
          "link_id": 1604
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 1607,
      "src_id": 1607,
      "handler_id": 1608,
      "execution_provider_id": 33,
      "isolation_provider_id": 81,
      "dist": {
        "id": 1607,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 617,
          "value": "async ({ deep, data: { newLink, triggeredByLinkId } }) => {\n    const Bot = await deep.id('@deep-foundation/telegram-bot', 'Bot');\n    const Token = await deep.id('@deep-foundation/telegram-bot', 'Token');\n    const Active = await deep.id('@deep-foundation/deepmemorybot', 'Active');\n    const Contain = await deep.id('@deep-foundation/core', 'Contain');\n    const Message = await deep.id('@deep-foundation/messaging', 'Message');\n    const messagingTree = await deep.id('@deep-foundation/messaging', 'messagingTree');\n    const Reply = await deep.id('@deep-foundation/messaging', 'Reply');\n    const containTree = deep.idLocal('@deep-foundation/core', 'containTree');\n    var bConversation = await deep.id('@deep-foundation/telegram-bot', 'Conversation');\n    var gptConversation = await deep.id('@deep-foundation/chatgpt-azure', 'Conversation');\n\n    const reader = await deep.id('@deep-foundation/deepmemorybot', 'reader');\n    const executor = await deep.id('@deep-foundation/deepmemorybot', 'executor');\n\n    const botIdByContain = (await deep.select({\n        type_id: Bot,\n        down: {\n            tree_id: containTree,\n            link_id: triggeredByLinkId\n        },\n    }))?.data?.[0]?.id;\n    // found gpt convesations before\n    var { data: [bconv] } = await deep.select({ type_id: bConversation, down: { tree_id: messagingTree, link_id: newLink.id } });\n    const gptconv = bconv ? (await deep.select({\n        type_id: gptConversation,\n        down: {\n            tree_id: messagingTree,\n            link: {\n                up: {\n                    tree_id: messagingTree,\n                    parent_id: bconv.id,\n                },\n            },\n        },\n    }))?.data?.[0] : undefined;\n    // const conversationId = (await deep.select({\n    //     type_id: Conversation,\n    //     down: {\n    //         tree_id: messagingTree,\n    //         link_id: newLink.id,\n    //     },\n    // }))?.data?.[0]?.id;\n    if (!!botIdByContain || triggeredByLinkId == reader || triggeredByLinkId == executor) {\n        const botId = botIdByContain || (await deep.select({\n            type_id: Bot,\n            down: {\n                tree_id: messagingTree,\n                link_id: newLink.id,\n            },\n        }))?.data?.[0]?.id;\n        if (!botId) return { error: '!botId', botId, triggeredByLinkId, botIdByContain, executor, reader }\n        const { data: [active] } = await deep.select({\n            type_id: Active,\n            to_id: botId,\n        });\n        if (!active) return { error: '!active', botId, triggeredByLinkId }\n        const { data: [{ id }] } = await deep.insert({\n            type_id: await deep.id('@deep-foundation/chatgpt-azure-templates', 'Apply'),\n            from_id: await deep.id('@deep-foundation/deepmemorybot', 'template'),\n            to_id: newLink.from_id,\n            ...(gptconv ? {\n                out: { data: {\n                    type_id: await deep.id('@deep-foundation/chatgpt-azure-templates', 'Continue'),\n                    to_id: gptconv.id,\n                    in: { data: {\n                        type_id: Contain,\n                        from_id: active.id\n                    } },\n                } }\n            } : {}),\n            in: { data: {\n                type_id: Contain,\n                from_id: active.id\n            } },\n        });\n        const { data: [apply] } = await deep.select(id);\n        \n        const response = await new Promise(async (res, rej) => {\n            let counter = 0;\n            const interval = setInterval(async () => {\n                const { data: [response] } = await deep.Traveler([apply])\n                    .out({ type_id: await deep.id('@deep-foundation/chatgpt-azure-templates', 'Result') })\n                    .to().in({ type_id: await deep.id('@deep-foundation/chatgpt-azure', 'Reply') }).from()\n                    .select();\n                if (response) res(response);\n                else {\n                    if (counter > 500) {\n                        clearInterval(interval);\n                        rej(new Error(`timeout ${counter} times`));\n                    } else {\n                        counter++;\n                    }\n                }\n            }, 1000);\n        });\n\n        if (!response) return { error: '!response' };\n\n        await deep.insert({\n            type_id: Reply,\n            from_id: response?.id,\n            to_id: newLink.from_id,\n            in: { data: {\n                type_id: Contain,\n                from_id: active.id\n            } },\n        });\n        return { botId, triggeredByLinkId };\n    } else {\n        return { botId: botIdByContain, triggeredByLinkId };\n    }\n}",
          "link_id": 1607
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 1609,
      "src_id": 1609,
      "handler_id": 1610,
      "execution_provider_id": 33,
      "isolation_provider_id": 81,
      "dist": {
        "id": 1609,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 618,
          "value": "async ({ deep, data: {\n    state,\n    req, res,\n    botId,\n    userId,\n    conversationId,\n    handlerId,\n    udeep,\n}, require }) => {\n    const Active = await deep.id('@deep-foundation/deepmemorybot', 'Active');\n    const Contain = await deep.id('@deep-foundation/core', 'Contain');\n    const Message = await deep.id('@deep-foundation/messaging', 'Message');\n    const Reply = await deep.id('@deep-foundation/messaging', 'Reply');\n\n    const reader = await deep.id('@deep-foundation/deepmemorybot', 'reader');\n    const executor = await deep.id('@deep-foundation/deepmemorybot', 'executor');\n\n    const { serializeError } = await deep.import('serialize-error');\n\n    const edeep = new deep.DeepClient({\n        deep, ...(await deep.jwt({ linkId: executor }))\n    });\n\n    if (req?.body?.callback_query?.data) {\n        const data = JSON.parse(req?.body?.callback_query?.data);\n        if (data.messageId) {\n            state.defaultHandling = false;\n            const { data: [active] } = await edeep.select({\n                type_id: Active,\n                to_id: botId,\n            });\n            if (!active) return { error: '!active' }\n            let result;\n            try {\n                result = await edeep.eval({\n                    linkId: data.messageId,\n                    handlerId: data.handlerId,\n                });\n                if (result.error) result.error = serializeError(result.error);\n            } catch(error) {\n                result = { error: serializeError(error) };\n            }\n            const { data: [reply] } = await edeep.insert({\n                type_id: Reply,\n                from: { data: {\n                    type_id: Message,\n                    string: { data: { value: `${JSON.stringify(result, null, 2)}` } },\n                    in: { data: {\n                        type_id: Contain,\n                        from_id: executor,\n                    } },\n                } },\n                to_id: data.messageId,\n                in: { data: {\n                    type_id: Contain,\n                    from_id: executor,\n                } },\n            });\n            if (reply) await deep.await(reply.id);\n            res.send(JSON.stringify({\n                userId: executor,\n                replyId: reply.id,\n                result,\n            }));\n        }\n    }\n}",
          "link_id": 1609
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 1611,
      "src_id": 1611,
      "handler_id": 1612,
      "execution_provider_id": 33,
      "isolation_provider_id": 81,
      "dist": {
        "id": 1611,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 619,
          "value": "async ({ deep, data: {\n    state,\n    bot,\n    botId,\n    userId,\n    conversationId,\n    handlerId,\n    reply,\n    message,\n} }) => {\n    if ((message?.value?.value || '').includes('DEEP_MEMORY_EXECUTE')) {\n        const codeMatch = message?.value?.value.matchAll(/```javascript([\\s\\S]*?)```/g);\n        const codes = [...codeMatch].map(c => c[1].trim());\n        for (let c in codes) {\n            const { data: [{ id: newHandlerId }] } = await deep.insert({\n                type_id: deep.idLocal('@deep-foundation/core', 'Handler'),\n                to: { data: {\n                    type_id: deep.idLocal('@deep-foundation/core', 'SyncTextFile'),\n                    string: { data: { value: `async ({ deep, sql }) => { ${codes[c]} }` } },\n                    in: { data: {\n                        type_id: deep.idLocal('@deep-foundation/core', 'Contain'),\n                        from_id: await deep.id('@deep-foundation/deepmemorybot', 'executor'),\n                    } },\n                } },\n                from_id: 83,\n                in: { data: {\n                    type_id: deep.idLocal('@deep-foundation/core', 'Contain'),\n                    from_id: await deep.id('@deep-foundation/deepmemorybot', 'executor'),\n                } },\n            });\n            bot.telegram.sendMessage(\n                await deep.name(conversationId),\n                codes[c],\n                { reply_markup: { inline_keyboard: [[\n                    {\n                        text: 'Execute',\n                        callback_data: JSON.stringify({\n                            messageId: message.id,\n                            handlerId: newHandlerId,\n                        }),\n                    },\n                ]] } },\n            );\n        }\n    }\n}",
          "link_id": 1611
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 1733,
      "src_id": 1741,
      "handler_id": 1735,
      "execution_provider_id": 33,
      "isolation_provider_id": 81,
      "dist": {
        "id": 1733,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 663,
          "value": "async (options) => {\n    const { deep, data: { newLink: parseItLink }, } = options;\n    const { default: ts } = await import(\"typescript\");\n    const { default: util } = await import(\"util\");\n    try {\n        const result = await main();\n        return {\n            result: util.inspect(result),\n        };\n    }\n    catch (error) {\n        throw {\n            error: util.inspect(error),\n        };\n    }\n    async function main() {\n        const { data: [rootLink], } = await deep.select({\n            id: parseItLink.from_id,\n        });\n        if (!rootLink) {\n            throw new Error(`parseIt.to does not exist: ##${parseItLink.from_id}`);\n        }\n        let obj;\n        if (typeof rootLink.value?.value === 'object') {\n            obj = rootLink.value?.value;\n        }\n        else if (typeof rootLink.value?.value === 'string') {\n            try {\n                obj = JSON.parse(rootLink.value?.value);\n            }\n            catch (error) {\n                throw new Error(`##${rootLink.id} must be valid JSON if it is a string`);\n            }\n        }\n        else {\n            throw new Error(`##${rootLink.id} must have value`);\n        }\n        if (!obj) {\n            throw new Error(`##${rootLink.id} must have value`);\n        }\n        const clientHandlerResult = await callClientHandler({\n            deep,\n            linkId: await deep.id(deep.linkId, \"clientHandler\"),\n            args: [\n                {\n                    deep: deep,\n                    obj: obj,\n                    rootLinkId: rootLink.id,\n                    resultLinkId: parseItLink.to_id,\n                },\n            ],\n        });\n        return clientHandlerResult;\n    }\n    async function callClientHandler(options) {\n        const { linkId, deep, args } = options;\n        const code = await deep\n            .select({\n            in: {\n                id: linkId,\n            },\n        })\n            .then((result) => {\n            const link = result.data[0];\n            if (!link)\n                throw new Error(`Unable to find SyncTextFile for ##${linkId}`);\n            const code = link.value?.value;\n            if (!code)\n                throw new Error(`##${link.id} must have value`);\n            return code;\n        });\n        const functionExpressionString = ts\n            .transpileModule(code, {\n            compilerOptions: {\n                module: ts.ModuleKind.ESNext,\n                sourceMap: true,\n                target: ts.ScriptTarget.ESNext,\n            },\n        })\n            .outputText.replace(\"export {}\", \"\");\n        const fn = eval(functionExpressionString);\n        const result = await fn(...args);\n        return result;\n    }\n};\n//# sourceMappingURL=module.js.map",
          "link_id": 1733
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 1734,
      "src_id": 1739,
      "handler_id": 1736,
      "execution_provider_id": 33,
      "isolation_provider_id": 81,
      "dist": {
        "id": 1734,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 664,
          "value": "async (options) => {\n    const { deep, data: { newLink: rootLink }, } = options;\n    const { default: ts } = await import(\"typescript\");\n    const { default: util } = await import(\"util\");\n    try {\n        const result = await main();\n        return {\n            result: util.inspect(result),\n        };\n    }\n    catch (error) {\n        throw {\n            error: util.inspect(error),\n        };\n    }\n    async function main() {\n        let obj;\n        if (typeof rootLink.value?.value === \"object\") {\n            obj = rootLink.value?.value;\n        }\n        else if (typeof rootLink.value?.value === \"string\") {\n            try {\n                obj = JSON.parse(rootLink.value?.value);\n            }\n            catch (error) {\n                throw new Error(`##${rootLink.id} must be valid JSON if it is a string`);\n            }\n        }\n        else {\n            throw new Error(`##${rootLink.id} must have value`);\n        }\n        if (!obj) {\n            throw new Error(`##${rootLink.id} must have value`);\n        }\n        const clientHandlerResult = await callClientHandler({\n            deep,\n            linkId: await deep.id(deep.linkId, \"clientHandler\"),\n            args: [\n                {\n                    deep: deep,\n                    obj: obj,\n                    rootLinkId: rootLink.id,\n                    resultLinkId: rootLink.to_id,\n                },\n            ],\n        });\n        return clientHandlerResult;\n    }\n    async function callClientHandler(options) {\n        const { linkId, deep, args } = options;\n        const code = await deep\n            .select({\n            in: {\n                id: linkId,\n            },\n        })\n            .then((result) => {\n            const link = result.data[0];\n            if (!link)\n                throw new Error(`Unable to find SyncTextFile for ##${linkId}`);\n            const code = link.value?.value;\n            if (!code)\n                throw new Error(`##${link.id} must have value`);\n            return code;\n        });\n        const functionExpressionString = ts\n            .transpileModule(code, {\n            compilerOptions: {\n                module: ts.ModuleKind.ESNext,\n                sourceMap: true,\n                target: ts.ScriptTarget.ESNext,\n            },\n        })\n            .outputText.replace(\"export {}\", \"\");\n        const fn = eval(functionExpressionString);\n        const result = await fn(...args);\n        return result;\n    }\n};\n//# sourceMappingURL=module.js.map",
          "link_id": 1734
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 1805,
      "src_id": 1737,
      "handler_id": 1738,
      "execution_provider_id": 33,
      "isolation_provider_id": 144,
      "dist": {
        "id": 1805,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 667,
          "value": "async (options) => {\n    const { deep, rootLinkId, obj, customMethods, resultLinkId } = options;\n    const { createSerialOperation } = await import(\"@deep-foundation/deeplinks/imports/gql/index.js\");\n    const { pascalCase } = await import(\"case-anything\");\n    const { default: debug } = await import(\"debug\");\n    const { default: util } = await import(\"util\");\n    const logs = [];\n    const packageLog = debug(\"@deep-foundation/object-to-links-async-converter\");\n    packageLog({ options });\n    class ObjectToLinksConverter {\n        reservedLinkIds;\n        rootLink;\n        obj;\n        resultLink;\n        deep = deep;\n        static requiredPackageNames = {\n            core: \"@deep-foundation/core\",\n            boolean: \"@deep-foundation/boolean\",\n        };\n        static requiredPackagesInMinilinks = {\n            ...this.requiredPackageNames,\n            objectToLinksConverter: \"@deep-foundation/object-to-links-async-converter\",\n        };\n        constructor(options) {\n            this.rootLink = options.rootLink;\n            this.reservedLinkIds = options.reservedLinkIds;\n            this.obj = options.obj;\n            this.resultLink = options.resultLink;\n        }\n        static getLogger(namespace) {\n            const getLoggerLogger = debug(this.getLogger.name);\n            getLoggerLogger({ options });\n            const resultLogger = packageLog.extend(`${ObjectToLinksConverter.name}${namespace ? `:${namespace}` : \"\"}`);\n            resultLogger.enabled = true;\n            resultLogger.log = (...content) => {\n                logs.push(...content);\n            };\n            return resultLogger;\n        }\n        static async applyContainTreeLinksDownToParentToMinilinks(options) {\n            const log = ObjectToLinksConverter.getLogger(ObjectToLinksConverter.applyContainTreeLinksDownToParentToMinilinks\n                .name);\n            const links = (await this.getContainTreeLinksDownToParent({\n                linkExp: options.linkExp,\n            }));\n            log({ links });\n            const minilinksApplyResult = options.minilinks.apply(links.data);\n            log({ minilinksApplyResult });\n            return minilinksApplyResult;\n        }\n        static async getContainTreeLinksDownToParent(options) {\n            const log = ObjectToLinksConverter.getLogger(ObjectToLinksConverter.getContainTreeLinksDownToParent.name);\n            const { linkExp } = options;\n            const query = {\n                up: {\n                    tree_id: await deep.id(\"@deep-foundation/core\", \"containTree\"),\n                    parent: linkExp,\n                },\n            };\n            log({ query });\n            const result = await deep.select(query);\n            log({ result });\n            return result;\n        }\n        static async init(options) {\n            const log = ObjectToLinksConverter.getLogger(ObjectToLinksConverter.init.name);\n            const { obj } = options;\n            const containTreeLinksDownToCoreAndThisPackageLinkApplyMinilinksResult = await this.applyContainTreeLinksDownToParentToMinilinks({\n                linkExp: {\n                    _or: Object.values(ObjectToLinksConverter.requiredPackagesInMinilinks).map((packageName) => ({\n                        id: {\n                            _id: [packageName],\n                        },\n                    })),\n                },\n                minilinks: deep.minilinks,\n            });\n            log({ containTreeLinksDownToCoreAndThisPackageLinkApplyMinilinksResult });\n            const rootLink = options.rootLinkId\n                ? await deep.select(options.rootLinkId).then((result) => result.data[0])\n                : await deep\n                    .insert({\n                    type_id: await deep.id(deep.linkId, \"Root\"),\n                }, {\n                    returning: deep.linksSelectReturning,\n                })\n                    .then((result) => result.data[0]);\n            log({ rootLink });\n            const containTreeLinksDownToRootLinkApplyMinilinksResult = await this.applyContainTreeLinksDownToParentToMinilinks({\n                linkExp: {\n                    id: rootLink.id,\n                },\n                minilinks: deep.minilinks,\n            });\n            log({ containTreeLinksDownToRootLinkApplyMinilinksResult });\n            const linkIdsToReserveCount = this.getLinksToReserveCount({ value: obj });\n            log({ linkIdsToReserveCount });\n            const reservedLinkIds = await deep.reserve(linkIdsToReserveCount);\n            log({ reservedLinkIds });\n            const resultLink = options.resultLinkId\n                ? await deep\n                    .select(options.resultLinkId)\n                    .then((result) => result.data[0])\n                : rootLink;\n            if (options.resultLinkId && !resultLink) {\n                throw new Error(`Result link with id ${options.resultLinkId} not found`);\n            }\n            const converter = new this({\n                reservedLinkIds,\n                rootLink,\n                obj,\n                resultLink,\n            });\n            log({ converter });\n            return converter;\n        }\n        async convert() {\n            const log = ObjectToLinksConverter.getLogger(\"convert\");\n            const operations = await this.makeUpdateOperationsForObjectValue({\n                link: this.resultLink,\n                value: this.obj,\n            });\n            log({ operations });\n            const hasResultTypeLinkId = await deep.id(deep.linkId, \"HasResult\");\n            const { data: [hasResultLink], } = await deep.select({\n                type_id: hasResultTypeLinkId,\n                from_id: this.rootLink.id,\n            });\n            if (hasResultLink) {\n                operations.push(createSerialOperation({\n                    type: \"update\",\n                    table: \"links\",\n                    exp: {\n                        type_id: hasResultTypeLinkId,\n                        from_id: this.rootLink.id,\n                    },\n                    value: {\n                        to_id: this.resultLink.id,\n                    },\n                }));\n            }\n            else {\n                operations.push(createSerialOperation({\n                    type: \"insert\",\n                    table: \"links\",\n                    objects: {\n                        type_id: hasResultTypeLinkId,\n                        from_id: this.rootLink.id,\n                        to_id: this.resultLink.id,\n                    },\n                }));\n            }\n            const serialResult = await deep.serial({\n                operations,\n            });\n            log({ serialResult });\n            return {\n                serialResult,\n                rootLinkId: this.rootLink.id,\n                resultLinkId: this.resultLink.id,\n            };\n        }\n        static getLinksToReserveCount(options) {\n            const { value } = options;\n            const log = ObjectToLinksConverter.getLogger(ObjectToLinksConverter.getLinksToReserveCount.name);\n            let count = 0;\n            const typeOfValue = typeof value;\n            log({ typeOfValue });\n            const reservedLinksCountForOneLink = 1 +\n                1;\n            if (typeOfValue === \"string\") {\n                count = reservedLinksCountForOneLink;\n            }\n            else if (typeOfValue === \"number\") {\n                count = reservedLinksCountForOneLink;\n            }\n            else if (typeOfValue === \"boolean\") {\n                count = reservedLinksCountForOneLink;\n            }\n            else if (Array.isArray(value)) {\n                const array = value;\n                for (const arrayValue of array) {\n                    if (!arrayValue)\n                        return count;\n                    count += this.getLinksToReserveCount({ value: arrayValue });\n                }\n            }\n            else if (typeOfValue === \"object\") {\n                count += reservedLinksCountForOneLink;\n                for (const [propertyKey, propertyValue] of Object.entries(value)) {\n                    if (!value)\n                        return count;\n                    count += this.getLinksToReserveCount({ value: propertyValue });\n                }\n            }\n            log({ count });\n            return count;\n        }\n        async makeUpdateOperationsForBooleanValue(options) {\n            const log = ObjectToLinksConverter.getLogger(this.makeUpdateOperationsForBooleanValue.name);\n            log({ options });\n            const { link, value } = options;\n            const operations = [];\n            operations.push(createSerialOperation({\n                type: \"update\",\n                table: \"links\",\n                exp: {\n                    id: link.id,\n                },\n                value: {\n                    to_id: await deep.id(ObjectToLinksConverter.requiredPackageNames.boolean, value.toString()),\n                },\n            }));\n            log({ operations });\n            return operations;\n        }\n        async makeUpdateOperationsForStringValue(options) {\n            const log = ObjectToLinksConverter.getLogger(this.makeUpdateOperationsForStringValue.name);\n            log({ options });\n            const { link, value } = options;\n            const operations = [];\n            operations.push(createSerialOperation({\n                type: \"update\",\n                table: `strings`,\n                exp: {\n                    link_id: link.id,\n                },\n                value: {\n                    value: value,\n                },\n            }));\n            log({ operations });\n            return operations;\n        }\n        async makeUpdateOperationsForNumberValue(options) {\n            const log = ObjectToLinksConverter.getLogger(this.makeUpdateOperationsForNumberValue.name);\n            log({ options });\n            const { link, value } = options;\n            const operations = [];\n            operations.push(createSerialOperation({\n                type: \"update\",\n                table: `numbers`,\n                exp: {\n                    link_id: link.id,\n                },\n                value: {\n                    value: value,\n                },\n            }));\n            log({ operations });\n            return operations;\n        }\n        async makeUpdateOperationsForArrayValue(options) {\n            const log = ObjectToLinksConverter.getLogger(this.makeUpdateOperationsForAnyValue.name);\n            const { link, value } = options;\n            const operations = [];\n            await deep.delete({\n                up: {\n                    tree_id: await deep.id(ObjectToLinksConverter.requiredPackagesInMinilinks.core, \"ContainTree\"),\n                    parent_id: link.id,\n                },\n            });\n            for (let i = 0; i < value.length; i++) {\n                const element = value[i];\n                operations.push(...(await this.makeInsertOperationsForAnyValue({\n                    value: element,\n                    linkId: this.reservedLinkIds.pop(),\n                    name: i.toString(0),\n                    parentLinkId: link.id,\n                })));\n            }\n            return operations;\n        }\n        async makeUpdateOperationsForAnyValue(options) {\n            const log = ObjectToLinksConverter.getLogger(this.makeUpdateOperationsForAnyValue.name);\n            const { link, value } = options;\n            const operations = [];\n            if (typeof value === \"boolean\") {\n                operations.push(...(await this.makeUpdateOperationsForBooleanValue({\n                    ...options,\n                    value,\n                })));\n            }\n            else if (typeof value === \"string\") {\n                operations.push(...(await this.makeUpdateOperationsForStringValue({\n                    ...options,\n                    value,\n                })));\n            }\n            else if (typeof value === \"number\") {\n                operations.push(...(await this.makeUpdateOperationsForNumberValue({\n                    ...options,\n                    value,\n                })));\n            }\n            else if (Array.isArray(value)) {\n                operations.push(...(await this.makeUpdateOperationsForArrayValue({\n                    ...options,\n                    value,\n                })));\n            }\n            else if (typeof value === \"object\") {\n                operations.push(...(await this.makeUpdateOperationsForObjectValue({\n                    ...options,\n                    value,\n                })));\n            }\n            else {\n                throw new Error(`Type of value ${typeof value} is not supported`);\n            }\n            return operations;\n        }\n        async makeUpdateOperationsForObjectValue(options) {\n            const log = ObjectToLinksConverter.getLogger(this.makeUpdateOperationsForObjectValue.name);\n            const { link, value } = options;\n            log({ options });\n            const operations = [];\n            for (const [propertyKey, propertyValue] of Object.entries(value)) {\n                log({ propertyKey, propertyValue });\n                const [propertyLink] = deep.minilinks.query({\n                    id: {\n                        _id: [link.id, propertyKey],\n                    },\n                });\n                log({ propertyLink });\n                if (propertyLink) {\n                    let propertyUpdateOperations = [];\n                    propertyUpdateOperations = await this.makeUpdateOperationsForAnyValue({\n                        link: propertyLink,\n                        value: propertyValue,\n                    });\n                    log({ propertyUpdateOperations });\n                    operations.push(...propertyUpdateOperations);\n                }\n                else {\n                    if (typeof propertyValue !== \"string\" &&\n                        typeof propertyValue !== \"number\" &&\n                        typeof propertyValue !== \"boolean\" &&\n                        !Array.isArray(propertyValue) &&\n                        typeof propertyValue !== \"object\") {\n                        log(`Skipping property ${propertyKey} because its type ${typeof value} is not supported`);\n                        continue;\n                    }\n                    log(\"TEMPORARY! REMOVE THIS!\");\n                    log(`minilinks.links`, deep.minilinks.links);\n                    log(`package link`, deep.minilinks.query({\n                        id: deep.linkId,\n                    }));\n                    log(`contain to string`, deep.minilinks.query({\n                        type_id: await deep.id(\"@deep-foundation/core\", \"Contain\"),\n                        string: {\n                            value: \"String\",\n                        },\n                        from_id: deep.linkId,\n                    }));\n                    log(`contain to string`, deep.minilinks.query({\n                        id: {\n                            _id: [deep.linkId, \"String\"],\n                        },\n                    }));\n                    const propertyLinkId = this.reservedLinkIds.pop();\n                    log({ propertyLinkId });\n                    if (!propertyLinkId) {\n                        throw new Error(`Not enough reserved link ids`);\n                    }\n                    const propertyInsertOperations = await this.makeInsertOperationsForAnyValue({\n                        linkId: propertyLinkId,\n                        parentLinkId: link.id,\n                        value: propertyValue,\n                        name: propertyKey,\n                    });\n                    log({ propertyInsertOperations });\n                    operations.push(...propertyInsertOperations);\n                }\n                log({ operations });\n            }\n            return operations;\n        }\n        async makeInsertOperationsForBooleanValue(options) {\n            const operations = [];\n            const { value, parentLinkId, linkId, name } = options;\n            const log = ObjectToLinksConverter.getLogger(this.makeInsertOperationsForBooleanValue.name);\n            const linkInsertSerialOperation = createSerialOperation({\n                type: \"insert\",\n                table: \"links\",\n                objects: {\n                    id: linkId,\n                    type_id: await deep.id(deep.linkId, pascalCase(typeof value)),\n                    from_id: parentLinkId,\n                    to_id: await deep.id(ObjectToLinksConverter.requiredPackageNames.boolean, value.toString()),\n                },\n            });\n            log({ linkInsertSerialOperation });\n            operations.push(linkInsertSerialOperation);\n            const containInsertSerialOperation = createSerialOperation({\n                type: \"insert\",\n                table: \"links\",\n                objects: {\n                    type_id: await deep.id(\"@deep-foundation/core\", \"Contain\"),\n                    from_id: parentLinkId,\n                    to_id: linkId,\n                    string: {\n                        data: {\n                            value: name,\n                        },\n                    },\n                },\n            });\n            log({ containInsertSerialOperation });\n            operations.push(containInsertSerialOperation);\n            log({ operations });\n            return operations;\n        }\n        async makeInsertOperationsForStringValue(options) {\n            const operations = [];\n            const { value, parentLinkId, linkId, name } = options;\n            const log = ObjectToLinksConverter.getLogger(\"makeInsertOperationsForStringValue\");\n            const linkInsertSerialOperation = createSerialOperation({\n                type: \"insert\",\n                table: \"links\",\n                objects: {\n                    id: linkId,\n                    from_id: parentLinkId,\n                    to_id: parentLinkId,\n                    type_id: await deep.id(deep.linkId, pascalCase(typeof value)),\n                },\n            });\n            log({ linkInsertSerialOperation });\n            operations.push(linkInsertSerialOperation);\n            const stringValueInsertSerialOperation = createSerialOperation({\n                type: \"insert\",\n                table: `${typeof value}s`,\n                objects: {\n                    link_id: linkId,\n                    value: value,\n                },\n            });\n            log({ stringValueInsertSerialOperation });\n            operations.push(stringValueInsertSerialOperation);\n            const containInsertSerialOperation = createSerialOperation({\n                type: \"insert\",\n                table: \"links\",\n                objects: {\n                    type_id: await deep.id(\"@deep-foundation/core\", \"Contain\"),\n                    from_id: parentLinkId,\n                    to_id: linkId,\n                    string: {\n                        data: {\n                            value: name,\n                        },\n                    },\n                },\n            });\n            log({ containInsertSerialOperation });\n            operations.push(containInsertSerialOperation);\n            log({ operations });\n            return operations;\n        }\n        async makeInsertOperationsForNumberValue(options) {\n            const operations = [];\n            const { value, parentLinkId, linkId, name } = options;\n            const log = ObjectToLinksConverter.getLogger(\"makeInsertOperationsForStringValue\");\n            const linkInsertSerialOperation = createSerialOperation({\n                type: \"insert\",\n                table: \"links\",\n                objects: {\n                    id: linkId,\n                    from_id: parentLinkId,\n                    to_id: parentLinkId,\n                    type_id: await deep.id(deep.linkId, pascalCase(typeof value)),\n                },\n            });\n            log({ linkInsertSerialOperation });\n            operations.push(linkInsertSerialOperation);\n            const stringValueInsertSerialOperation = createSerialOperation({\n                type: \"insert\",\n                table: `${typeof value}s`,\n                objects: {\n                    link_id: linkId,\n                    value: value,\n                },\n            });\n            log({ stringValueInsertSerialOperation });\n            operations.push(stringValueInsertSerialOperation);\n            const containInsertSerialOperation = createSerialOperation({\n                type: \"insert\",\n                table: \"links\",\n                objects: {\n                    type_id: await deep.id(\"@deep-foundation/core\", \"Contain\"),\n                    from_id: parentLinkId,\n                    to_id: linkId,\n                    string: {\n                        data: {\n                            value: name,\n                        },\n                    },\n                },\n            });\n            log({ containInsertSerialOperation });\n            operations.push(containInsertSerialOperation);\n            log({ operations });\n            return operations;\n        }\n        async makeInsertOperationsForArrayValue(options) {\n            const operations = [];\n            const { value, linkId, name, parentLinkId } = options;\n            const log = ObjectToLinksConverter.getLogger(\"makeInsertOperationsForStringValue\");\n            const linkInsertSerialOperation = createSerialOperation({\n                type: \"insert\",\n                table: \"links\",\n                objects: {\n                    id: linkId,\n                    type_id: await deep.id(deep.linkId, pascalCase(typeof value)),\n                    from_id: parentLinkId,\n                    to_id: parentLinkId,\n                },\n            });\n            log({ linkInsertSerialOperation });\n            operations.push(linkInsertSerialOperation);\n            const containInsertSerialOperation = createSerialOperation({\n                type: \"insert\",\n                table: \"links\",\n                objects: {\n                    type_id: await deep.id(\"@deep-foundation/core\", \"Contain\"),\n                    from_id: parentLinkId,\n                    to_id: linkId,\n                    string: {\n                        data: {\n                            value: name,\n                        },\n                    },\n                },\n            });\n            log({ containInsertSerialOperation });\n            operations.push(containInsertSerialOperation);\n            for (let i = 0; i < value.length; i++) {\n                const element = value[i];\n                operations.push(...(await this.makeInsertOperationsForAnyValue({\n                    value: element,\n                    parentLinkId: linkId,\n                    linkId: this.reservedLinkIds.pop(),\n                    name: i.toString(),\n                })));\n            }\n            return operations;\n        }\n        async makeInsertOperationsForPrimitiveValue(options) {\n            const operations = [];\n            const { value } = options;\n            if (typeof value === \"string\") {\n                operations.push(...(await this.makeInsertOperationsForStringValue({\n                    ...options,\n                    value,\n                })));\n            }\n            else if (typeof value === \"number\") {\n                operations.push(...(await this.makeInsertOperationsForNumberValue({\n                    ...options,\n                    value,\n                })));\n            }\n            else if (typeof value === \"boolean\") {\n                operations.push(...(await this.makeInsertOperationsForBooleanValue({\n                    ...options,\n                    value,\n                })));\n            }\n            return operations;\n        }\n        async makeInsertOperationsForObjectValue(options) {\n            const operations = [];\n            const { value, linkId, name, parentLinkId } = options;\n            const log = ObjectToLinksConverter.getLogger(this.makeInsertOperationsForObjectValue.name);\n            const linkInsertSerialOperation = createSerialOperation({\n                type: \"insert\",\n                table: \"links\",\n                objects: {\n                    id: linkId,\n                    type_id: await deep.id(deep.linkId, pascalCase(typeof value)),\n                    from_id: parentLinkId,\n                    to_id: parentLinkId,\n                },\n            });\n            log({ linkInsertSerialOperation });\n            operations.push(linkInsertSerialOperation);\n            const containInsertSerialOperation = createSerialOperation({\n                type: \"insert\",\n                table: \"links\",\n                objects: {\n                    type_id: await deep.id(\"@deep-foundation/core\", \"Contain\"),\n                    from_id: parentLinkId,\n                    to_id: linkId,\n                    string: {\n                        data: {\n                            value: name,\n                        },\n                    },\n                },\n            });\n            log({ containInsertSerialOperation });\n            operations.push(containInsertSerialOperation);\n            for (const [propertyKey, propertyValue] of Object.entries(value)) {\n                if (typeof propertyValue !== \"string\" &&\n                    typeof propertyValue !== \"number\" &&\n                    typeof propertyValue !== \"boolean\" &&\n                    !Array.isArray(propertyValue) &&\n                    typeof propertyValue !== \"object\") {\n                    log(`Skipping property ${propertyKey} because its type ${typeof value} is not supported`);\n                    continue;\n                }\n                const propertyLinkId = this.reservedLinkIds.pop();\n                log({ propertyLinkId });\n                if (!propertyLinkId) {\n                    throw new Error(`Not enough reserved link ids`);\n                }\n                const propertyInsertOperations = await this.makeInsertOperationsForAnyValue({\n                    linkId: propertyLinkId,\n                    parentLinkId: linkId,\n                    value: propertyValue,\n                    name: propertyKey,\n                });\n                operations.push(...propertyInsertOperations);\n            }\n            return operations;\n        }\n        async makeInsertOperationsForAnyValue(options) {\n            const operations = [];\n            const { value } = options;\n            const log = ObjectToLinksConverter.getLogger(this.makeInsertOperationsForAnyValue.name);\n            if (typeof value === \"string\" ||\n                typeof value === \"number\" ||\n                typeof value === \"boolean\") {\n                operations.push(...(await this.makeInsertOperationsForPrimitiveValue({\n                    ...options,\n                    value,\n                })));\n            }\n            else if (Array.isArray(value)) {\n                operations.push(...(await this.makeInsertOperationsForArrayValue({\n                    ...options,\n                    value,\n                })));\n            }\n            else if (typeof value === \"object\") {\n                operations.push(...(await this.makeInsertOperationsForObjectValue({\n                    ...options,\n                    value,\n                })));\n            }\n            else {\n                throw new Error(`Type of value ${typeof value} is not supported`);\n            }\n            log({ operations });\n            return operations;\n        }\n    }\n    function getObjectToLinksConverterProxy(options) {\n        const { target, customMethods } = options;\n        return new Proxy(target, {\n            get: function (obj, prop) {\n                if (customMethods && prop in customMethods) {\n                    return customMethods[prop];\n                }\n                return obj[prop];\n            },\n        });\n    }\n    try {\n        const result = await main();\n        return {\n            result,\n            logs: logs,\n        };\n    }\n    catch (error) {\n        throw {\n            error: util.inspect(error),\n            logs: logs,\n        };\n    }\n    async function main() {\n        const log = ObjectToLinksConverter.getLogger(main.name);\n        if (Object.keys(obj).length === 0) {\n            return;\n        }\n        const objectToLinksConverter = await ObjectToLinksConverter.init({\n            obj,\n            rootLinkId,\n            resultLinkId,\n        });\n        log({ objectToLinksConverter });\n        const proxiedObjectToLinksConverter = getObjectToLinksConverterProxy({\n            target: objectToLinksConverter,\n            customMethods,\n        });\n        log({ proxiedObjectToLinksConverter });\n        const convertResult = await proxiedObjectToLinksConverter.convert();\n        log({ convertResult });\n        return convertResult;\n    }\n};\nexport {};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFZQSxLQUFLLEVBQUUsT0FNTixFQUFFLEVBQUU7SUFDSCxNQUFNLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRSxHQUFHLEVBQUUsYUFBYSxFQUFFLFlBQVksRUFBRSxHQUFHLE9BQU8sQ0FBQztJQUN2RSxNQUFNLEVBQUUscUJBQXFCLEVBQUUsR0FBRyxNQUFNLE1BQU0sQ0FDNUMsaURBQWlELENBQ2xELENBQUM7SUFDRixNQUFNLEVBQUUsVUFBVSxFQUFFLEdBQUcsTUFBTSxNQUFNLENBQUMsZUFBZSxDQUFDLENBQUM7SUFDckQsTUFBTSxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsR0FBRyxNQUFNLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUNqRCxNQUFNLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxHQUFHLE1BQU0sTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQy9DLE1BQU0sSUFBSSxHQUFlLEVBQUUsQ0FBQztJQUM1QixNQUFNLFVBQVUsR0FBRyxLQUFLLENBQUMsa0RBQWtELENBQUMsQ0FBQztJQUM3RSxVQUFVLENBQUMsRUFBRSxPQUFPLEVBQUUsQ0FBQyxDQUFDO0lBRXhCLE1BQU0sc0JBQXNCO1FBQzFCLGVBQWUsQ0FBZ0I7UUFDL0IsUUFBUSxDQUFlO1FBQ3ZCLEdBQUcsQ0FBTTtRQUNULFVBQVUsQ0FBZTtRQUN6QixJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ1osTUFBTSxDQUFDLG9CQUFvQixHQUFHO1lBQzVCLElBQUksRUFBRSx1QkFBdUI7WUFDN0IsT0FBTyxFQUFFLDBCQUEwQjtTQUNwQyxDQUFDO1FBQ0YsTUFBTSxDQUFDLDJCQUEyQixHQUFHO1lBQ25DLEdBQUcsSUFBSSxDQUFDLG9CQUFvQjtZQUM1QixzQkFBc0IsRUFDcEIsa0RBQWtEO1NBQ3JELENBQUM7UUFFRixZQUFZLE9BQXNDO1lBQ2hE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VUFBVTtZQUNWLFlBQVk7U0FDYixDQUFDLENBQUM7UUFDSCxHQUFHLENBQUMsRUFBRSxzQkFBc0IsRUFBRSxDQUFDLENBQUM7UUFFaEMsTUFBTSw2QkFBNkIsR0FBRyw4QkFBOEIsQ0FBQztZQUNuRSxNQUFNLEVBQUUsc0JBQXNCO1lBQzlCLGFBQWE7U0FDZCxDQUFDLENBQUM7UUFDSCxHQUFHLENBQUMsRUFBRSw2QkFBNkIsRUFBRSxDQUFDLENBQUM7UUFFdkMsTUFBTSxhQUFhLEdBQUcsTUFBTSw2QkFBNkIsQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUNwRSxHQUFHLENBQUMsRUFBRSxhQUFhLEVBQUUsQ0FBQyxDQUFDO1FBRXZCLE9BQU8sYUFBYSxDQUFDO0lBQ3ZCLENBQUM7QUE4R0gsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcclxuICBEZWVwQ2xpZW50LFxyXG4gIERlZXBDbGllbnRSZXN1bHQsXHJcbiAgU2VyaWFsT3BlcmF0aW9uLFxyXG4gIFRhYmxlLFxyXG59IGZyb20gXCJAZGVlcC1mb3VuZGF0aW9uL2RlZXBsaW5rcy9pbXBvcnRzL2NsaWVudC5qc1wiO1xyXG5pbXBvcnQgeyBCb29sRXhwTGluayB9IGZyb20gXCJAZGVlcC1mb3VuZGF0aW9uL2RlZXBsaW5rcy9pbXBvcnRzL2NsaWVudF90eXBlcy5qc1wiO1xyXG5pbXBvcnQge1xyXG4gIExpbmssXHJcbiAgTWluaWxpbmtzUmVzdWx0LFxyXG59IGZyb20gXCJAZGVlcC1mb3VuZGF0aW9uL2RlZXBsaW5rcy9pbXBvcnRzL21pbmlsaW5rcy5qc1wiO1xyXG5cclxuYXN5bmMgKG9wdGlvbnM6IHtcclxuICBkZWVwOiBEZWVwQ2xpZW50O1xyXG4gIHJvb3RMaW5rSWQ/OiBudW1iZXI7XHJcbiAgb2JqOiBPYmo7XHJcbiAgY3VzdG9tTWV0aG9kcz86IFJlY29yZDxzdHJpbmcsIEZ1bmN0aW9uPjtcclxuICByZXN1bHRMaW5rSWQ/OiBudW1iZXI7XHJcbn0pID0+IHtcclxuICBjb25zdCB7IGRlZXAsIHJvb3RMaW5rSWQsIG9iaiwgY3VzdG9tTWV0aG9kcywgcmVzdWx0TGlua0lkIH0gPSBvcHRpb25zO1xyXG4gIGNvbnN0IHsgY3JlYXRlU2VyaWFsT3BlcmF0aW9uIH0gPSBhd2FpdCBpbXBvcnQoXHJcbiAgICBcIkBkZWVwLWZvdW5kYXRpb24vZGVlcGxpbmtzL2ltcG9ydHMvZ3FsL2luZGV4LmpzXCJcclxuICApO1xyXG4gIGNvbnN0IHsgcGFzY2FsQ2FzZSB9ID0gYXdhaXQgaW1wb3J0KFwiY2FzZS1hbnl0aGluZ1wiKTtcclxuICBjb25zdCB7IGRlZmF1bHQ6IGRlYnVnIH0gPSBhd2FpdCBpbXBvcnQoXCJkZWJ1Z1wiKTtcclxuICBjb25zdCB7IGRlZmF1bHQ6IHV0aWwgfSA9IGF3YWl0IGltcG9ydChcInV0aWxcIik7XHJcbiAgY29uc3QgbG9nczogQXJyYXk8YW55PiA9IFtdO1xyXG4gIGNvbnN0IHBhY2thZ2VMb2cgPSBkZWJ1ZyhcIkBkZWVwLWZvdW5kYXRpb24vb2JqZWN0LXRvLWxpbmtzLWFzeW5jLWNvbnZlcnRlclwiKTtcclxuICBwYWNrYWdlTG9nKHsgb3B0aW9ucyB9KTtcclxuXHJcbiAgY2xhc3MgT2JqZWN0VG9MaW5rc0NvbnZlcnRlciB7XHJcbiAgICByZXNlcnZlZExpbmtJZHM6IEFycmF5PG51bWJlcj47XHJcbiAgICByb290TGluazogTGluazxudW1iZXI+O1xyXG4gICAgb2JqOiBPYmo7XHJcbiAgICByZXN1bHRMaW5rOiBMaW5rPG51bWJlcj47XHJcbiAgICBkZWVwID0gZGVlcDtcclxuICAgIHN0YXRpYyByZXF1aXJlZFBhY2thZ2VOYW1lcyA9IHtcclxuICAgICAgY29yZTogXCJAZGVlcC1mb3VuZGF0aW9uL2NvcmVcIixcclxuICAgICAgYm9vbGVhbjogXCJAZGVlcC1mb3VuZGF0aW9uL2Jvb2xlYW5cIixcclxuICAgIH07XHJcbiAgICBzdGF0aWMgcmVxdWlyZWRQYWNrYWdlc0luTWluaWxpbmtzID0ge1xyXG4gICAgICAuLi50aGlzLnJlcXVpcmVkUGFja2FnZU5hbWVzLFxyXG4gICAgICBvYmplY3RUb0xpbmtzQ29udmVydGVyOlxyXG4gICAgICAgIFwiQGRlZXAtZm91bmRhdGlvbi9vYmplY3QtdG8tbGlua3MtYXN5bmMtY29udmVydGVyXCIsXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnM6IE9iamVjdFRvTGlua3NDb252ZXJ0ZXJPcHRpb25zKSB7XHJcbiAgICAgIHRoaXMucm9vdExpbmsgPSBvcHRpb25zLnJvb3RMaW5rO1xyXG4gICAgICB0aGlzLnJlc2VydmVkTGlua0lkcyA9IG9wdGlvbnMucmVzZXJ2ZWRMaW5rSWRzO1xyXG4gICAgICB0aGlzLm9iaiA9IG9wdGlvbnMub2JqO1xyXG4gICAgICB0aGlzLnJlc3VsdExpbmsgPSBvcHRpb25zLnJlc3VsdExpbms7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldExvZ2dlcihuYW1lc3BhY2U6IHN0cmluZykge1xyXG4gICAgICBjb25zdCBnZXRMb2dnZXJMb2dnZXIgPSBkZWJ1Zyh0aGlzLmdldExvZ2dlci5uYW1lKTtcclxuICAgICAgZ2V0TG9nZ2VyTG9nZ2VyKHsgb3B0aW9ucyB9KTtcclxuICAgICAgY29uc3QgcmVzdWx0TG9nZ2VyID0gcGFja2FnZUxvZy5leHRlbmQoXHJcbiAgICAgICAgYCR7T2JqZWN0VG9MaW5rc0NvbnZlcnRlci5uYW1lfSR7bmFtZXNwYWNlID8gYDoke25hbWVzcGFjZX1gIDogXCJcIn1gLFxyXG4gICAgICApO1xyXG4gICAgICByZXN1bHRMb2dnZXIuZW5hYmxlZCA9IHRydWU7XHJcbiAgICAgIHJlc3VsdExvZ2dlci5sb2cgPSAoLi4uY29udGVudDogQXJyYXk8YW55PikgPT4ge1xyXG4gICAgICAgIGxvZ3MucHVzaCguLi5jb250ZW50KTtcclxuICAgICAgfTtcclxuICAgICAgcmV0dXJuIHJlc3VsdExvZ2dlcjtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgYXN5bmMgYXBwbHlDb250YWluVHJlZUxpbmtzRG93blRvUGFyZW50VG9NaW5pbGlua3MoXHJcbiAgICAgIG9wdGlvbnM6IEFwcGx5Q29udGFpblRyZWVMaW5rc0Rvd25Ub1BhcmVudFRvTWluaWxpbmtzT3B0aW9ucyxcclxuICAgICkge1xyXG4gICAgICBjb25zdCBsb2cgPSBPYmplY3RUb0xpbmtzQ29udmVydGVyLmdldExvZ2dlcihcclxuICAgICAgICBPYmplY3RUb0xpbmtzQ29udmVydGVyLmFwcGx5Q29udGFpblRyZWVMaW5rc0Rvd25Ub1BhcmVudFRvTWluaWxpbmtzXHJcbiAgICAgICAgICAubmFtZSxcclxuICAgICAgKTtcclxuICAgICAgY29uc3QgbGlua3MgPSAoYXdhaXQgdGhpcy5nZXRDb250YWluVHJlZUxpbmtzRG93blRvUGFyZW50KHtcclxuICAgICAgICBsaW5rRXhwOiBvcHRpb25zLmxpbmtFeHAsXHJcbiAgICAgIH0pKSBhcyBEZWVwQ2xpZW50UmVzdWx0PExpbms8bnVtYmVyPltdPjtcclxuICAgICAgbG9nKHsgbGlua3MgfSk7XHJcbiAgICAgIGNvbnN0IG1pbmlsaW5rc0FwcGx5UmVzdWx0ID0gb3B0aW9ucy5taW5pbGlua3MuYXBwbHkobGlua3MuZGF0YSk7XHJcbiAgICAgIGxvZyh7IG1pbmlsaW5rc0FwcGx5UmVzdWx0IH0pO1xyXG4gICAgICByZXR1cm4gbWluaWxpbmtzQXBwbHlSZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGFzeW5jIGdldENvbnRhaW5UcmVlTGlua3NEb3duVG9QYXJlbnQoXHJcbiAgICAgIG9wdGlvbnM6IEdldENvbnRhaW5UcmVlTGlua3NEb3duVG9MaW5rT3B0aW9ucyxcclxuICAgICkge1xyXG4gICAgICBjb25zdCBsb2cgPSBPYmplY3RUb0xpbmtzQ29udmVydGVyLmdldExvZ2dlcihcclxuICAgICAgICBPYmplY3RUb0xpbmtzQ29udmVydGVyLmdldENvbnRhaW5UcmVlTGlua3NEb3duVG9QYXJlbnQubmFtZSxcclxuICAgICAgKTtcclxuICAgICAgY29uc3QgeyBsaW5rRXhwIH0gPSBvcHRpb25zO1xyXG4gICAgICBjb25zdCBxdWVyeTogQm9vbEV4cExpbmsgPSB7XHJcbiAgICAgICAgdXA6IHtcclxuICAgICAgICAgIHRyZWVfaWQ6IGF3YWl0IGRlZXAuaWQoXCJAZGVlcC1mb3VuZGF0aW9uL2NvcmVcIiwgXCJjb250YWluVHJlZVwiKSxcclxuICAgICAgICAgIHBhcmVudDogbGlua0V4cCxcclxuICAgICAgICB9LFxyXG4gICAgICB9O1xyXG4gICAgICBsb2coeyBxdWVyeSB9KTtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGVlcC5zZWxlY3QocXVlcnkpO1xyXG4gICAgICBsb2coeyByZXN1bHQgfSk7XHJcbiAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVbmRlZmluZWQgaXMgcmV0dXJuZWQgb2Ygcm9vdCBvYmplY3QgaXMgZW1wdHlcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGFzeW5jIGluaXQoXHJcbiAgICAgIG9wdGlvbnM6IE9iamVjdFRvTGlua3NDb252ZXJ0ZXJJbml0T3B0aW9ucyxcclxuICAgICk6IFByb21pc2U8T2JqZWN0VG9MaW5rc0NvbnZlcnRlcj4ge1xyXG4gICAgICBjb25zdCBsb2cgPSBPYmplY3RUb0xpbmtzQ29udmVydGVyLmdldExvZ2dlcihcclxuICAgICAgICBPYmplY3RUb0xpbmtzQ29udmVydGVyLmluaXQubmFtZSxcclxuICAgICAgKTtcclxuICAgICAgY29uc3QgeyBvYmogfSA9IG9wdGlvbnM7XHJcbiAgICAgIGNvbnN0IGNvbnRhaW5UcmVlTGlua3NEb3duVG9Db3JlQW5kVGhpc1BhY2thZ2VMaW5rQXBwbHlNaW5pbGlua3NSZXN1bHQgPVxyXG4gICAgICAgIGF3YWl0IHRoaXMuYXBwbHlDb250YWluVHJlZUxpbmtzRG93blRvUGFyZW50VG9NaW5pbGlua3Moe1xyXG4gICAgICAgICAgbGlua0V4cDoge1xyXG4gICAgICAgICAgICBfb3I6IE9iamVjdC52YWx1ZXMoXHJcbiAgICAgICAgICAgICAgT2JqZWN0VG9MaW5rc0NvbnZlcnRlci5yZXF1aXJlZFBhY2thZ2VzSW5NaW5pbGlua3MsXHJcbiAgICAgICAgICAgICkubWFwKChwYWNrYWdlTmFtZSkgPT4gKHtcclxuICAgICAgICAgICAgICBpZDoge1xyXG4gICAgICAgICAgICAgICAgX2lkOiBbcGFja2FnZU5hbWVdLFxyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0pKSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBtaW5pbGlua3M6IGRlZXAubWluaWxpbmtzLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICBsb2coeyBjb250YWluVHJlZUxpbmtzRG93blRvQ29yZUFuZFRoaXNQYWNrYWdlTGlua0FwcGx5TWluaWxpbmtzUmVzdWx0IH0pO1xyXG4gICAgICBjb25zdCByb290TGluazogTGluazxudW1iZXI+ID0gb3B0aW9ucy5yb290TGlua0lkXHJcbiAgICAgICAgPyBhd2FpdCBkZWVwLnNlbGVjdChvcHRpb25zLnJvb3RMaW5rSWQpLnRoZW4oKHJlc3VsdCkgPT4gcmVzdWx0LmRhdGFbMF0pXHJcbiAgICAgICAgOiBhd2FpdCBkZWVwXHJcbiAgICAgICAgICAgIC5pbnNlcnQoXHJcbiAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgLy8gVE9ETzogUmVwbGFjZSBpZCB3aXRoIGlkTG9jYWwgd2hlbiBpdCB3b3JrIHByb3Blcmx5XHJcbiAgICAgICAgICAgICAgICB0eXBlX2lkOiBhd2FpdCBkZWVwLmlkKGRlZXAubGlua0lkISwgXCJSb290XCIpLFxyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuaW5nOiBkZWVwLmxpbmtzU2VsZWN0UmV0dXJuaW5nLFxyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgLnRoZW4oKHJlc3VsdCkgPT4gcmVzdWx0LmRhdGFbMF0gYXMgTGluazxudW1iZXI+KTtcclxuICAgICAgbG9nKHsgcm9vdExpbmsgfSk7XHJcbiAgICAgIGNvbnN0IGNvbnRhaW5UcmVlTGlua3NEb3duVG9Sb290TGlua0FwcGx5TWluaWxpbmtzUmVzdWx0ID1cclxuICAgICAgICBhd2FpdCB0aGlzLmFwcGx5Q29udGFpblRyZWVMaW5rc0Rvd25Ub1BhcmVudFRvTWluaWxpbmtzKHtcclxuICAgICAgICAgIGxpbmtFeHA6IHtcclxuICAgICAgICAgICAgaWQ6IHJvb3RMaW5rLmlkLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIG1pbmlsaW5rczogZGVlcC5taW5pbGlua3MsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIGxvZyh7IGNvbnRhaW5UcmVlTGlua3NEb3duVG9Sb290TGlua0FwcGx5TWluaWxpbmtzUmVzdWx0IH0pO1xyXG4gICAgICBjb25zdCBsaW5rSWRzVG9SZXNlcnZlQ291bnQgPSB0aGlzLmdldExpbmtzVG9SZXNlcnZlQ291bnQoeyB2YWx1ZTogb2JqIH0pO1xyXG4gICAgICBsb2coeyBsaW5rSWRzVG9SZXNlcnZlQ291bnQgfSk7XHJcbiAgICAgIGNvbnN0IHJlc2VydmVkTGlua0lkcyA9IGF3YWl0IGRlZXAucmVzZXJ2ZShsaW5rSWRzVG9SZXNlcnZlQ291bnQpO1xyXG4gICAgICBsb2coeyByZXNlcnZlZExpbmtJZHMgfSk7XHJcbiAgICAgIGNvbnN0IHJlc3VsdExpbmsgPSBvcHRpb25zLnJlc3VsdExpbmtJZFxyXG4gICAgICAgID8gYXdhaXQgZGVlcFxyXG4gICAgICAgICAgICAuc2VsZWN0KG9wdGlvbnMucmVzdWx0TGlua0lkKVxyXG4gICAgICAgICAgICAudGhlbigocmVzdWx0KSA9PiByZXN1bHQuZGF0YVswXSlcclxuICAgICAgICA6IHJvb3RMaW5rO1xyXG4gICAgICBpZiAob3B0aW9ucy5yZXN1bHRMaW5rSWQgJiYgIXJlc3VsdExpbmspIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXHJcbiAgICAgICAgICBgUmVzdWx0IGxpbmsgd2l0aCBpZCAke29wdGlvbnMucmVzdWx0TGlua0lkfSBub3QgZm91bmRgLFxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgY29udmVydGVyID0gbmV3IHRoaXMoe1xyXG4gICAgICAgIHJlc2VydmVkTGlua0lkcyxcclxuICAgICAgICByb290TGluayxcclxuICAgICAgICBvYmosXHJcbiAgICAgICAgcmVzdWx0TGluayxcclxuICAgICAgfSk7XHJcbiAgICAgIGxvZyh7IGNvbnZlcnRlciB9KTtcclxuICAgICAgcmV0dXJuIGNvbnZlcnRlcjtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBjb252ZXJ0KCkge1xyXG4gICAgICBjb25zdCBsb2cgPSBPYmplY3RUb0xpbmtzQ29udmVydGVyLmdldExvZ2dlcihcImNvbnZlcnRcIik7XHJcblxyXG4gICAgICBjb25zdCBvcGVyYXRpb25zID0gYXdhaXQgdGhpcy5tYWtlVXBkYXRlT3BlcmF0aW9uc0Zvck9iamVjdFZhbHVlKHtcclxuICAgICAgICBsaW5rOiB0aGlzLnJlc3VsdExpbmssXHJcbiAgICAgICAgdmFsdWU6IHRoaXMub2JqLFxyXG4gICAgICB9KTtcclxuICAgICAgbG9nKHsgb3BlcmF0aW9ucyB9KTtcclxuXHJcbiAgICAgIGNvbnN0IGhhc1Jlc3VsdFR5cGVMaW5rSWQgPSBhd2FpdCBkZWVwLmlkKGRlZXAubGlua0lkISwgXCJIYXNSZXN1bHRcIik7XHJcbiAgICAgIGNvbnN0IHtcclxuICAgICAgICBkYXRhOiBbaGFzUmVzdWx0TGlua10sXHJcbiAgICAgIH0gPSBhd2FpdCBkZWVwLnNlbGVjdCh7XHJcbiAgICAgICAgdHlwZV9pZDogaGFzUmVzdWx0VHlwZUxpbmtJZCxcclxuICAgICAgICBmcm9tX2lkOiB0aGlzLnJvb3RMaW5rLmlkLFxyXG4gICAgICB9KTtcclxuICAgICAgaWYgKGhhc1Jlc3VsdExpbmspIHtcclxuICAgICAgICBvcGVyYXRpb25zLnB1c2goXHJcbiAgICAgICAgICBjcmVhdGVTZXJpYWxPcGVyYXRpb24oe1xyXG4gICAgICAgICAgICB0eXBlOiBcInVwZGF0ZVwiLFxyXG4gICAgICAgICAgICB0YWJsZTogXCJsaW5rc1wiLFxyXG4gICAgICAgICAgICBleHA6IHtcclxuICAgICAgICAgICAgICB0eXBlX2lkOiBoYXNSZXN1bHRUeXBlTGlua0lkLFxyXG4gICAgICAgICAgICAgIGZyb21faWQ6IHRoaXMucm9vdExpbmsuaWQsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHZhbHVlOiB7XHJcbiAgICAgICAgICAgICAgdG9faWQ6IHRoaXMucmVzdWx0TGluay5pZCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgIH0pLFxyXG4gICAgICAgICk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgb3BlcmF0aW9ucy5wdXNoKFxyXG4gICAgICAgICAgY3JlYXRlU2VyaWFsT3BlcmF0aW9uKHtcclxuICAgICAgICAgICAgdHlwZTogXCJpbnNlcnRcIixcclxuICAgICAgICAgICAgdGFibGU6IFwibGlua3NcIixcclxuICAgICAgICAgICAgb2JqZWN0czoge1xyXG4gICAgICAgICAgICAgIHR5cGVfaWQ6IGhhc1Jlc3VsdFR5cGVMaW5rSWQsXHJcbiAgICAgICAgICAgICAgZnJvbV9pZDogdGhpcy5yb290TGluay5pZCxcclxuICAgICAgICAgICAgICB0b19pZDogdGhpcy5yZXN1bHRMaW5rLmlkLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgfSksXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3Qgc2VyaWFsUmVzdWx0ID0gYXdhaXQgZGVlcC5zZXJpYWwoe1xyXG4gICAgICAgIG9wZXJhdGlvbnMsXHJcbiAgICAgIH0pO1xyXG4gICAgICBsb2coeyBzZXJpYWxSZXN1bHQgfSk7XHJcblxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHNlcmlhbFJlc3VsdCxcclxuICAgICAgICByb290TGlua0lkOiB0aGlzLnJvb3RMaW5rLmlkLFxyXG4gICAgICAgIHJlc3VsdExpbmtJZDogdGhpcy5yZXN1bHRMaW5rLmlkLFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXRMaW5rc1RvUmVzZXJ2ZUNvdW50KG9wdGlvbnM6IHtcclxuICAgICAgdmFsdWU6IHN0cmluZyB8IG51bWJlciB8IGJvb2xlYW4gfCBvYmplY3Q7XHJcbiAgICB9KTogbnVtYmVyIHtcclxuICAgICAgY29uc3QgeyB2YWx1ZSB9ID0gb3B0aW9ucztcclxuICAgICAgY29uc3QgbG9nID0gT2JqZWN0VG9MaW5rc0NvbnZlcnRlci5nZXRMb2dnZXIoXHJcbiAgICAgICAgT2JqZWN0VG9MaW5rc0NvbnZlcnRlci5nZXRMaW5rc1RvUmVzZXJ2ZUNvdW50Lm5hbWUsXHJcbiAgICAgICk7XHJcbiAgICAgIGxldCBjb3VudCA9IDA7XHJcbiAgICAgIGNvbnN0IHR5cGVPZlZhbHVlID0gdHlwZW9mIHZhbHVlO1xyXG4gICAgICBsb2coeyB0eXBlT2ZWYWx1ZSB9KTtcclxuICAgICAgY29uc3QgcmVzZXJ2ZWRMaW5rc0NvdW50Rm9yT25lTGluayA9XHJcbiAgICAgICAgMSArIC8vIFR5cGVcclxuICAgICAgICAxOyAvLyBDb250YWluIGZvciB0eXBlXHJcbiAgICAgIGlmICh0eXBlT2ZWYWx1ZSA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgIGNvdW50ID0gcmVzZXJ2ZWRMaW5rc0NvdW50Rm9yT25lTGluaztcclxuICAgICAgfSBlbHNlIGlmICh0eXBlT2ZWYWx1ZSA9PT0gXCJudW1iZXJcIikge1xyXG4gICAgICAgIGNvdW50ID0gcmVzZXJ2ZWRMaW5rc0NvdW50Rm9yT25lTGluaztcclxuICAgICAgfSBlbHNlIGlmICh0eXBlT2ZWYWx1ZSA9PT0gXCJib29sZWFuXCIpIHtcclxuICAgICAgICBjb3VudCA9IHJlc2VydmVkTGlua3NDb3VudEZvck9uZUxpbms7XHJcbiAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcclxuICAgICAgICBjb25zdCBhcnJheSA9IHZhbHVlIGFzIEFycmF5PGFueT47XHJcbiAgICAgICAgZm9yIChjb25zdCBhcnJheVZhbHVlIG9mIGFycmF5KSB7XHJcbiAgICAgICAgICBpZiAoIWFycmF5VmFsdWUpIHJldHVybiBjb3VudDtcclxuICAgICAgICAgIGNvdW50ICs9IHRoaXMuZ2V0TGlua3NUb1Jlc2VydmVDb3VudCh7IHZhbHVlOiBhcnJheVZhbHVlIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIGlmICh0eXBlT2ZWYWx1ZSA9PT0gXCJvYmplY3RcIikge1xyXG4gICAgICAgIGNvdW50ICs9IHJlc2VydmVkTGlua3NDb3VudEZvck9uZUxpbms7XHJcbiAgICAgICAgZm9yIChjb25zdCBbcHJvcGVydHlLZXksIHByb3BlcnR5VmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHZhbHVlKSkge1xyXG4gICAgICAgICAgaWYgKCF2YWx1ZSkgcmV0dXJuIGNvdW50O1xyXG4gICAgICAgICAgY291bnQgKz0gdGhpcy5nZXRMaW5rc1RvUmVzZXJ2ZUNvdW50KHsgdmFsdWU6IHByb3BlcnR5VmFsdWUgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGxvZyh7IGNvdW50IH0pO1xyXG4gICAgICByZXR1cm4gY291bnQ7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgbWFrZVVwZGF0ZU9wZXJhdGlvbnNGb3JCb29sZWFuVmFsdWUoXHJcbiAgICAgIG9wdGlvbnM6IE1ha2VVcGRhdGVPcGVyYXRpb25zRm9yQm9vbGVhblZhbHVlT3B0aW9ucyxcclxuICAgICkge1xyXG4gICAgICBjb25zdCBsb2cgPSBPYmplY3RUb0xpbmtzQ29udmVydGVyLmdldExvZ2dlcihcclxuICAgICAgICB0aGlzLm1ha2VVcGRhdGVPcGVyYXRpb25zRm9yQm9vbGVhblZhbHVlLm5hbWUsXHJcbiAgICAgICk7XHJcbiAgICAgIGxvZyh7IG9wdGlvbnMgfSk7XHJcbiAgICAgIGNvbnN0IHsgbGluaywgdmFsdWUgfSA9IG9wdGlvbnM7XHJcbiAgICAgIGNvbnN0IG9wZXJhdGlvbnM6IEFycmF5PFNlcmlhbE9wZXJhdGlvbj4gPSBbXTtcclxuICAgICAgb3BlcmF0aW9ucy5wdXNoKFxyXG4gICAgICAgIGNyZWF0ZVNlcmlhbE9wZXJhdGlvbih7XHJcbiAgICAgICAgICB0eXBlOiBcInVwZGF0ZVwiLFxyXG4gICAgICAgICAgdGFibGU6IFwibGlua3NcIixcclxuICAgICAgICAgIGV4cDoge1xyXG4gICAgICAgICAgICBpZDogbGluay5pZCxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICB2YWx1ZToge1xyXG4gICAgICAgICAgICB0b19pZDogYXdhaXQgZGVlcC5pZChcclxuICAgICAgICAgICAgICBPYmplY3RUb0xpbmtzQ29udmVydGVyLnJlcXVpcmVkUGFja2FnZU5hbWVzLmJvb2xlYW4sXHJcbiAgICAgICAgICAgICAgdmFsdWUudG9TdHJpbmcoKSxcclxuICAgICAgICAgICAgKSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSksXHJcbiAgICAgICk7XHJcbiAgICAgIGxvZyh7IG9wZXJhdGlvbnMgfSk7XHJcbiAgICAgIHJldHVybiBvcGVyYXRpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIG1ha2VVcGRhdGVPcGVyYXRpb25zRm9yU3RyaW5nVmFsdWUoXHJcbiAgICAgIG9wdGlvbnM6IE1ha2VVcGRhdGVPcGVyYXRpb25zRm9yU3RyaW5nVmFsdWVPcHRpb25zLFxyXG4gICAgKSB7XHJcbiAgICAgIGNvbnN0IGxvZyA9IE9iamVjdFRvTGlua3NDb252ZXJ0ZXIuZ2V0TG9nZ2VyKFxyXG4gICAgICAgIHRoaXMubWFrZVVwZGF0ZU9wZXJhdGlvbnNGb3JTdHJpbmdWYWx1ZS5uYW1lLFxyXG4gICAgICApO1xyXG4gICAgICBsb2coeyBvcHRpb25zIH0pO1xyXG4gICAgICBjb25zdCB7IGxpbmssIHZhbHVlIH0gPSBvcHRpb25zO1xyXG4gICAgICBjb25zdCBvcGVyYXRpb25zOiBBcnJheTxTZXJpYWxPcGVyYXRpb24+ID0gW107XHJcbiAgICAgIG9wZXJhdGlvbnMucHVzaChcclxuICAgICAgICBjcmVhdGVTZXJpYWxPcGVyYXRpb24oe1xyXG4gICAgICAgICAgdHlwZTogXCJ1cGRhdGVcIixcclxuICAgICAgICAgIHRhYmxlOiBgc3RyaW5nc2AgYXMgVGFibGU8XCJ1cGRhdGVcIj4sXHJcbiAgICAgICAgICBleHA6IHtcclxuICAgICAgICAgICAgbGlua19pZDogbGluay5pZCxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICB2YWx1ZToge1xyXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0pLFxyXG4gICAgICApO1xyXG4gICAgICBsb2coeyBvcGVyYXRpb25zIH0pO1xyXG4gICAgICByZXR1cm4gb3BlcmF0aW9ucztcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBtYWtlVXBkYXRlT3BlcmF0aW9uc0Zvck51bWJlclZhbHVlKFxyXG4gICAgICBvcHRpb25zOiBNYWtlVXBkYXRlT3BlcmF0aW9uc0Zvck51bWJlclZhbHVlT3B0aW9ucyxcclxuICAgICkge1xyXG4gICAgICBjb25zdCBsb2cgPSBPYmplY3RUb0xpbmtzQ29udmVydGVyLmdldExvZ2dlcihcclxuICAgICAgICB0aGlzLm1ha2VVcGRhdGVPcGVyYXRpb25zRm9yTnVtYmVyVmFsdWUubmFtZSxcclxuICAgICAgKTtcclxuICAgICAgbG9nKHsgb3B0aW9ucyB9KTtcclxuICAgICAgY29uc3QgeyBsaW5rLCB2YWx1ZSB9ID0gb3B0aW9ucztcclxuICAgICAgY29uc3Qgb3BlcmF0aW9uczogQXJyYXk8U2VyaWFsT3BlcmF0aW9uPiA9IFtdO1xyXG4gICAgICBvcGVyYXRpb25zLnB1c2goXHJcbiAgICAgICAgY3JlYXRlU2VyaWFsT3BlcmF0aW9uKHtcclxuICAgICAgICAgIHR5cGU6IFwidXBkYXRlXCIsXHJcbiAgICAgICAgICB0YWJsZTogYG51bWJlcnNgIGFzIFRhYmxlPFwidXBkYXRlXCI+LFxyXG4gICAgICAgICAgZXhwOiB7XHJcbiAgICAgICAgICAgIGxpbmtfaWQ6IGxpbmsuaWQsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgdmFsdWU6IHtcclxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9KSxcclxuICAgICAgKTtcclxuICAgICAgbG9nKHsgb3BlcmF0aW9ucyB9KTtcclxuICAgICAgcmV0dXJuIG9wZXJhdGlvbnM7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgbWFrZVVwZGF0ZU9wZXJhdGlvbnNGb3JBcnJheVZhbHVlPFRWYWx1ZSBleHRlbmRzIEFsbG93ZWRBcnJheT4oXHJcbiAgICAgIG9wdGlvbnM6IE1ha2VVcGRhdGVPcGVyYXRpb25zRm9yQW55VmFsdWVPcHRpb25zPFRWYWx1ZT4sXHJcbiAgICApIHtcclxuICAgICAgY29uc3QgbG9nID0gT2JqZWN0VG9MaW5rc0NvbnZlcnRlci5nZXRMb2dnZXIoXHJcbiAgICAgICAgdGhpcy5tYWtlVXBkYXRlT3BlcmF0aW9uc0ZvckFueVZhbHVlLm5hbWUsXHJcbiAgICAgICk7XHJcbiAgICAgIGNvbnN0IHsgbGluaywgdmFsdWUgfSA9IG9wdGlvbnM7XHJcbiAgICAgIGNvbnN0IG9wZXJhdGlvbnM6IEFycmF5PFNlcmlhbE9wZXJhdGlvbj4gPSBbXTtcclxuXHJcbiAgICAgIGF3YWl0IGRlZXAuZGVsZXRlKHtcclxuICAgICAgICB1cDoge1xyXG4gICAgICAgICAgdHJlZV9pZDogYXdhaXQgZGVlcC5pZChcclxuICAgICAgICAgICAgT2JqZWN0VG9MaW5rc0NvbnZlcnRlci5yZXF1aXJlZFBhY2thZ2VzSW5NaW5pbGlua3MuY29yZSxcclxuICAgICAgICAgICAgXCJDb250YWluVHJlZVwiLFxyXG4gICAgICAgICAgKSxcclxuICAgICAgICAgIHBhcmVudF9pZDogbGluay5pZCxcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsdWUubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb25zdCBlbGVtZW50ID0gdmFsdWVbaV07XHJcbiAgICAgICAgb3BlcmF0aW9ucy5wdXNoKFxyXG4gICAgICAgICAgLi4uKGF3YWl0IHRoaXMubWFrZUluc2VydE9wZXJhdGlvbnNGb3JBbnlWYWx1ZSh7XHJcbiAgICAgICAgICAgIHZhbHVlOiBlbGVtZW50LFxyXG4gICAgICAgICAgICBsaW5rSWQ6IHRoaXMucmVzZXJ2ZWRMaW5rSWRzLnBvcCgpISxcclxuICAgICAgICAgICAgbmFtZTogaS50b1N0cmluZygwKSxcclxuICAgICAgICAgICAgcGFyZW50TGlua0lkOiBsaW5rLmlkLFxyXG4gICAgICAgICAgfSkpLFxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBvcGVyYXRpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIG1ha2VVcGRhdGVPcGVyYXRpb25zRm9yQW55VmFsdWU8VFZhbHVlIGV4dGVuZHMgQWxsb3dlZFZhbHVlPihcclxuICAgICAgb3B0aW9uczogTWFrZVVwZGF0ZU9wZXJhdGlvbnNGb3JBbnlWYWx1ZU9wdGlvbnM8VFZhbHVlPixcclxuICAgICkge1xyXG4gICAgICBjb25zdCBsb2cgPSBPYmplY3RUb0xpbmtzQ29udmVydGVyLmdldExvZ2dlcihcclxuICAgICAgICB0aGlzLm1ha2VVcGRhdGVPcGVyYXRpb25zRm9yQW55VmFsdWUubmFtZSxcclxuICAgICAgKTtcclxuICAgICAgY29uc3QgeyBsaW5rLCB2YWx1ZSB9ID0gb3B0aW9ucztcclxuICAgICAgY29uc3Qgb3BlcmF0aW9uczogQXJyYXk8U2VyaWFsT3BlcmF0aW9uPiA9IFtdO1xyXG4gICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcImJvb2xlYW5cIikge1xyXG4gICAgICAgIG9wZXJhdGlvbnMucHVzaChcclxuICAgICAgICAgIC4uLihhd2FpdCB0aGlzLm1ha2VVcGRhdGVPcGVyYXRpb25zRm9yQm9vbGVhblZhbHVlKHtcclxuICAgICAgICAgICAgLi4ub3B0aW9ucyxcclxuICAgICAgICAgICAgdmFsdWUsXHJcbiAgICAgICAgICB9KSksXHJcbiAgICAgICAgKTtcclxuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICBvcGVyYXRpb25zLnB1c2goXHJcbiAgICAgICAgICAuLi4oYXdhaXQgdGhpcy5tYWtlVXBkYXRlT3BlcmF0aW9uc0ZvclN0cmluZ1ZhbHVlKHtcclxuICAgICAgICAgICAgLi4ub3B0aW9ucyxcclxuICAgICAgICAgICAgdmFsdWUsXHJcbiAgICAgICAgICB9KSksXHJcbiAgICAgICAgKTtcclxuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09IFwibnVtYmVyXCIpIHtcclxuICAgICAgICBvcGVyYXRpb25zLnB1c2goXHJcbiAgICAgICAgICAuLi4oYXdhaXQgdGhpcy5tYWtlVXBkYXRlT3BlcmF0aW9uc0Zvck51bWJlclZhbHVlKHtcclxuICAgICAgICAgICAgLi4ub3B0aW9ucyxcclxuICAgICAgICAgICAgdmFsdWUsXHJcbiAgICAgICAgICB9KSksXHJcbiAgICAgICAgKTtcclxuICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xyXG4gICAgICAgIG9wZXJhdGlvbnMucHVzaChcclxuICAgICAgICAgIC4uLihhd2FpdCB0aGlzLm1ha2VVcGRhdGVPcGVyYXRpb25zRm9yQXJyYXlWYWx1ZSh7XHJcbiAgICAgICAgICAgIC4uLm9wdGlvbnMsXHJcbiAgICAgICAgICAgIHZhbHVlLFxyXG4gICAgICAgICAgfSkpLFxyXG4gICAgICAgICk7XHJcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiKSB7XHJcbiAgICAgICAgb3BlcmF0aW9ucy5wdXNoKFxyXG4gICAgICAgICAgLi4uKGF3YWl0IHRoaXMubWFrZVVwZGF0ZU9wZXJhdGlvbnNGb3JPYmplY3RWYWx1ZSh7XHJcbiAgICAgICAgICAgIC4uLm9wdGlvbnMsXHJcbiAgICAgICAgICAgIHZhbHVlLFxyXG4gICAgICAgICAgfSkpLFxyXG4gICAgICAgICk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUeXBlIG9mIHZhbHVlICR7dHlwZW9mIHZhbHVlfSBpcyBub3Qgc3VwcG9ydGVkYCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBvcGVyYXRpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIG1ha2VVcGRhdGVPcGVyYXRpb25zRm9yT2JqZWN0VmFsdWUoXHJcbiAgICAgIG9wdGlvbnM6IE1ha2VVcGRhdGVPcGVyYXRpb25zRm9yT2JqZWN0VmFsdWVPcHRpb25zLFxyXG4gICAgKSB7XHJcbiAgICAgIGNvbnN0IGxvZyA9IE9iamVjdFRvTGlua3NDb252ZXJ0ZXIuZ2V0TG9nZ2VyKFxyXG4gICAgICAgIHRoaXMubWFrZVVwZGF0ZU9wZXJhdGlvbnNGb3JPYmplY3RWYWx1ZS5uYW1lLFxyXG4gICAgICApO1xyXG4gICAgICBjb25zdCB7IGxpbmssIHZhbHVlIH0gPSBvcHRpb25zO1xyXG4gICAgICBsb2coeyBvcHRpb25zIH0pO1xyXG4gICAgICBjb25zdCBvcGVyYXRpb25zOiBBcnJheTxTZXJpYWxPcGVyYXRpb24+ID0gW107XHJcblxyXG4gICAgICBmb3IgKGNvbnN0IFtwcm9wZXJ0eUtleSwgcHJvcGVydHlWYWx1ZV0gb2YgT2JqZWN0LmVudHJpZXModmFsdWUpKSB7XHJcbiAgICAgICAgbG9nKHsgcHJvcGVydHlLZXksIHByb3BlcnR5VmFsdWUgfSk7XHJcbiAgICAgICAgY29uc3QgW3Byb3BlcnR5TGlua10gPSBkZWVwLm1pbmlsaW5rcy5xdWVyeSh7XHJcbiAgICAgICAgICBpZDoge1xyXG4gICAgICAgICAgICBfaWQ6IFtsaW5rLmlkLCBwcm9wZXJ0eUtleV0sXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGxvZyh7IHByb3BlcnR5TGluayB9KTtcclxuICAgICAgICBpZiAocHJvcGVydHlMaW5rKSB7XHJcbiAgICAgICAgICBsZXQgcHJvcGVydHlVcGRhdGVPcGVyYXRpb25zOiBBcnJheTxTZXJpYWxPcGVyYXRpb24+ID0gW107XHJcbiAgICAgICAgICBwcm9wZXJ0eVVwZGF0ZU9wZXJhdGlvbnMgPSBhd2FpdCB0aGlzLm1ha2VVcGRhdGVPcGVyYXRpb25zRm9yQW55VmFsdWUoXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBsaW5rOiBwcm9wZXJ0eUxpbmssXHJcbiAgICAgICAgICAgICAgdmFsdWU6IHByb3BlcnR5VmFsdWUsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgICAgbG9nKHsgcHJvcGVydHlVcGRhdGVPcGVyYXRpb25zIH0pO1xyXG4gICAgICAgICAgb3BlcmF0aW9ucy5wdXNoKC4uLnByb3BlcnR5VXBkYXRlT3BlcmF0aW9ucyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgdHlwZW9mIHByb3BlcnR5VmFsdWUgIT09IFwic3RyaW5nXCIgJiZcclxuICAgICAgICAgICAgdHlwZW9mIHByb3BlcnR5VmFsdWUgIT09IFwibnVtYmVyXCIgJiZcclxuICAgICAgICAgICAgdHlwZW9mIHByb3BlcnR5VmFsdWUgIT09IFwiYm9vbGVhblwiICYmXHJcbiAgICAgICAgICAgICFBcnJheS5pc0FycmF5KHByb3BlcnR5VmFsdWUpICYmXHJcbiAgICAgICAgICAgIHR5cGVvZiBwcm9wZXJ0eVZhbHVlICE9PSBcIm9iamVjdFwiXHJcbiAgICAgICAgICApIHtcclxuICAgICAgICAgICAgbG9nKFxyXG4gICAgICAgICAgICAgIGBTa2lwcGluZyBwcm9wZXJ0eSAke3Byb3BlcnR5S2V5fSBiZWNhdXNlIGl0cyB0eXBlICR7dHlwZW9mIHZhbHVlfSBpcyBub3Qgc3VwcG9ydGVkYCxcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgbG9nKFwiVEVNUE9SQVJZISBSRU1PVkUgVEhJUyFcIik7XHJcbiAgICAgICAgICBsb2coYG1pbmlsaW5rcy5saW5rc2AsIGRlZXAubWluaWxpbmtzLmxpbmtzKTtcclxuICAgICAgICAgIGxvZyhcclxuICAgICAgICAgICAgYHBhY2thZ2UgbGlua2AsXHJcbiAgICAgICAgICAgIGRlZXAubWluaWxpbmtzLnF1ZXJ5KHtcclxuICAgICAgICAgICAgICBpZDogZGVlcC5saW5rSWQhLFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgICBsb2coXHJcbiAgICAgICAgICAgIGBjb250YWluIHRvIHN0cmluZ2AsXHJcbiAgICAgICAgICAgIGRlZXAubWluaWxpbmtzLnF1ZXJ5KHtcclxuICAgICAgICAgICAgICAvLyBUT0RPOiBSZXBsYWNlIGlkIHdpdGggaWRMb2NhbCB3aGVuIGl0IHdvcmsgcHJvcGVybHlcclxuICAgICAgICAgICAgICB0eXBlX2lkOiBhd2FpdCBkZWVwLmlkKFwiQGRlZXAtZm91bmRhdGlvbi9jb3JlXCIsIFwiQ29udGFpblwiKSxcclxuICAgICAgICAgICAgICBzdHJpbmc6IHtcclxuICAgICAgICAgICAgICAgIHZhbHVlOiBcIlN0cmluZ1wiLFxyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgZnJvbV9pZDogZGVlcC5saW5rSWQhLFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgICBsb2coXHJcbiAgICAgICAgICAgIGBjb250YWluIHRvIHN0cmluZ2AsXHJcbiAgICAgICAgICAgIGRlZXAubWluaWxpbmtzLnF1ZXJ5KHtcclxuICAgICAgICAgICAgICBpZDoge1xyXG4gICAgICAgICAgICAgICAgX2lkOiBbZGVlcC5saW5rSWQhLCBcIlN0cmluZ1wiXSxcclxuICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgY29uc3QgcHJvcGVydHlMaW5rSWQgPSB0aGlzLnJlc2VydmVkTGlua0lkcy5wb3AoKTtcclxuICAgICAgICAgIGxvZyh7IHByb3BlcnR5TGlua0lkIH0pO1xyXG4gICAgICAgICAgaWYgKCFwcm9wZXJ0eUxpbmtJZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE5vdCBlbm91Z2ggcmVzZXJ2ZWQgbGluayBpZHNgKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGNvbnN0IHByb3BlcnR5SW5zZXJ0T3BlcmF0aW9ucyA9XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMubWFrZUluc2VydE9wZXJhdGlvbnNGb3JBbnlWYWx1ZSh7XHJcbiAgICAgICAgICAgICAgbGlua0lkOiBwcm9wZXJ0eUxpbmtJZCxcclxuICAgICAgICAgICAgICBwYXJlbnRMaW5rSWQ6IGxpbmsuaWQsXHJcbiAgICAgICAgICAgICAgdmFsdWU6IHByb3BlcnR5VmFsdWUsXHJcbiAgICAgICAgICAgICAgbmFtZTogcHJvcGVydHlLZXksXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgbG9nKHsgcHJvcGVydHlJbnNlcnRPcGVyYXRpb25zIH0pO1xyXG4gICAgICAgICAgb3BlcmF0aW9ucy5wdXNoKC4uLnByb3BlcnR5SW5zZXJ0T3BlcmF0aW9ucyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsb2coeyBvcGVyYXRpb25zIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gb3BlcmF0aW9ucztcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBtYWtlSW5zZXJ0T3BlcmF0aW9uc0ZvckJvb2xlYW5WYWx1ZShcclxuICAgICAgb3B0aW9uczogTWFrZUluc2VydE9wZXJhdGlvbnNGb3JCb29sZWFuT3B0aW9ucyxcclxuICAgICkge1xyXG4gICAgICBjb25zdCBvcGVyYXRpb25zOiBBcnJheTxTZXJpYWxPcGVyYXRpb24+ID0gW107XHJcbiAgICAgIGNvbnN0IHsgdmFsdWUsIHBhcmVudExpbmtJZCwgbGlua0lkLCBuYW1lIH0gPSBvcHRpb25zO1xyXG4gICAgICBjb25zdCBsb2cgPSBPYmplY3RUb0xpbmtzQ29udmVydGVyLmdldExvZ2dlcihcclxuICAgICAgICB0aGlzLm1ha2VJbnNlcnRPcGVyYXRpb25zRm9yQm9vbGVhblZhbHVlLm5hbWUsXHJcbiAgICAgICk7XHJcblxyXG4gICAgICBjb25zdCBsaW5rSW5zZXJ0U2VyaWFsT3BlcmF0aW9uID0gY3JlYXRlU2VyaWFsT3BlcmF0aW9uKHtcclxuICAgICAgICB0eXBlOiBcImluc2VydFwiLFxyXG4gICAgICAgIHRhYmxlOiBcImxpbmtzXCIsXHJcbiAgICAgICAgb2JqZWN0czoge1xyXG4gICAgICAgICAgaWQ6IGxpbmtJZCxcclxuICAgICAgICAgIHR5cGVfaWQ6IGF3YWl0IGRlZXAuaWQoZGVlcC5saW5rSWQhLCBwYXNjYWxDYXNlKHR5cGVvZiB2YWx1ZSkpLFxyXG4gICAgICAgICAgZnJvbV9pZDogcGFyZW50TGlua0lkLFxyXG4gICAgICAgICAgdG9faWQ6IGF3YWl0IGRlZXAuaWQoXHJcbiAgICAgICAgICAgIE9iamVjdFRvTGlua3NDb252ZXJ0ZXIucmVxdWlyZWRQYWNrYWdlTmFtZXMuYm9vbGVhbixcclxuICAgICAgICAgICAgdmFsdWUudG9TdHJpbmcoKSxcclxuICAgICAgICAgICksXHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcbiAgICAgIGxvZyh7IGxpbmtJbnNlcnRTZXJpYWxPcGVyYXRpb24gfSk7XHJcbiAgICAgIG9wZXJhdGlvbnMucHVzaChsaW5rSW5zZXJ0U2VyaWFsT3BlcmF0aW9uKTtcclxuXHJcbiAgICAgIGNvbnN0IGNvbnRhaW5JbnNlcnRTZXJpYWxPcGVyYXRpb24gPSBjcmVhdGVTZXJpYWxPcGVyYXRpb24oe1xyXG4gICAgICAgIHR5cGU6IFwiaW5zZXJ0XCIsXHJcbiAgICAgICAgdGFibGU6IFwibGlua3NcIixcclxuICAgICAgICBvYmplY3RzOiB7XHJcbiAgICAgICAgICAvLyBUT0RPOiBSZXBsYWNlIGlkIHdpdGggaWRMb2NhbCB3aGVuIGl0IHdvcmsgcHJvcGVybHlcclxuICAgICAgICAgIHR5cGVfaWQ6IGF3YWl0IGRlZXAuaWQoXCJAZGVlcC1mb3VuZGF0aW9uL2NvcmVcIiwgXCJDb250YWluXCIpLFxyXG4gICAgICAgICAgZnJvbV9pZDogcGFyZW50TGlua0lkLFxyXG4gICAgICAgICAgdG9faWQ6IGxpbmtJZCxcclxuICAgICAgICAgIHN0cmluZzoge1xyXG4gICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgdmFsdWU6IG5hbWUsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgICBsb2coeyBjb250YWluSW5zZXJ0U2VyaWFsT3BlcmF0aW9uIH0pO1xyXG4gICAgICBvcGVyYXRpb25zLnB1c2goY29udGFpbkluc2VydFNlcmlhbE9wZXJhdGlvbik7XHJcblxyXG4gICAgICBsb2coeyBvcGVyYXRpb25zIH0pO1xyXG4gICAgICByZXR1cm4gb3BlcmF0aW9ucztcclxuICAgIH1cclxuICAgIGFzeW5jIG1ha2VJbnNlcnRPcGVyYXRpb25zRm9yU3RyaW5nVmFsdWUoXHJcbiAgICAgIG9wdGlvbnM6IE1ha2VJbnNlcnRPcGVyYXRpb25zRm9yU3RyaW5nT3B0aW9ucyxcclxuICAgICkge1xyXG4gICAgICBjb25zdCBvcGVyYXRpb25zOiBBcnJheTxTZXJpYWxPcGVyYXRpb24+ID0gW107XHJcbiAgICAgIGNvbnN0IHsgdmFsdWUsIHBhcmVudExpbmtJZCwgbGlua0lkLCBuYW1lIH0gPSBvcHRpb25zO1xyXG4gICAgICBjb25zdCBsb2cgPSBPYmplY3RUb0xpbmtzQ29udmVydGVyLmdldExvZ2dlcihcclxuICAgICAgICBcIm1ha2VJbnNlcnRPcGVyYXRpb25zRm9yU3RyaW5nVmFsdWVcIixcclxuICAgICAgKTtcclxuICAgICAgY29uc3QgbGlua0luc2VydFNlcmlhbE9wZXJhdGlvbiA9IGNyZWF0ZVNlcmlhbE9wZXJhdGlvbih7XHJcbiAgICAgICAgdHlwZTogXCJpbnNlcnRcIixcclxuICAgICAgICB0YWJsZTogXCJsaW5rc1wiLFxyXG4gICAgICAgIG9iamVjdHM6IHtcclxuICAgICAgICAgIGlkOiBsaW5rSWQsXHJcbiAgICAgICAgICBmcm9tX2lkOiBwYXJlbnRMaW5rSWQsXHJcbiAgICAgICAgICB0b19pZDogcGFyZW50TGlua0lkLFxyXG4gICAgICAgICAgdHlwZV9pZDogYXdhaXQgZGVlcC5pZChkZWVwLmxpbmtJZCEsIHBhc2NhbENhc2UodHlwZW9mIHZhbHVlKSksXHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcbiAgICAgIGxvZyh7IGxpbmtJbnNlcnRTZXJpYWxPcGVyYXRpb24gfSk7XHJcbiAgICAgIG9wZXJhdGlvbnMucHVzaChsaW5rSW5zZXJ0U2VyaWFsT3BlcmF0aW9uKTtcclxuXHJcbiAgICAgIGNvbnN0IHN0cmluZ1ZhbHVlSW5zZXJ0U2VyaWFsT3BlcmF0aW9uID0gY3JlYXRlU2VyaWFsT3BlcmF0aW9uKHtcclxuICAgICAgICB0eXBlOiBcImluc2VydFwiLFxyXG4gICAgICAgIHRhYmxlOiBgJHt0eXBlb2YgdmFsdWV9c2AgYXMgVGFibGU8XCJpbnNlcnRcIj4sXHJcbiAgICAgICAgb2JqZWN0czoge1xyXG4gICAgICAgICAgbGlua19pZDogbGlua0lkLFxyXG4gICAgICAgICAgdmFsdWU6IHZhbHVlLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgICBsb2coeyBzdHJpbmdWYWx1ZUluc2VydFNlcmlhbE9wZXJhdGlvbiB9KTtcclxuICAgICAgb3BlcmF0aW9ucy5wdXNoKHN0cmluZ1ZhbHVlSW5zZXJ0U2VyaWFsT3BlcmF0aW9uKTtcclxuXHJcbiAgICAgIGNvbnN0IGNvbnRhaW5JbnNlcnRTZXJpYWxPcGVyYXRpb24gPSBjcmVhdGVTZXJpYWxPcGVyYXRpb24oe1xyXG4gICAgICAgIHR5cGU6IFwiaW5zZXJ0XCIsXHJcbiAgICAgICAgdGFibGU6IFwibGlua3NcIixcclxuICAgICAgICBvYmplY3RzOiB7XHJcbiAgICAgICAgICAvLyBUT0RPOiBSZXBsYWNlIGlkIHdpdGggaWRMb2NhbCB3aGVuIGl0IHdvcmsgcHJvcGVybHlcclxuICAgICAgICAgIHR5cGVfaWQ6IGF3YWl0IGRlZXAuaWQoXCJAZGVlcC1mb3VuZGF0aW9uL2NvcmVcIiwgXCJDb250YWluXCIpLFxyXG4gICAgICAgICAgZnJvbV9pZDogcGFyZW50TGlua0lkLFxyXG4gICAgICAgICAgdG9faWQ6IGxpbmtJZCxcclxuICAgICAgICAgIHN0cmluZzoge1xyXG4gICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgdmFsdWU6IG5hbWUsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgICBsb2coeyBjb250YWluSW5zZXJ0U2VyaWFsT3BlcmF0aW9uIH0pO1xyXG4gICAgICBvcGVyYXRpb25zLnB1c2goY29udGFpbkluc2VydFNlcmlhbE9wZXJhdGlvbik7XHJcblxyXG4gICAgICBsb2coeyBvcGVyYXRpb25zIH0pO1xyXG4gICAgICByZXR1cm4gb3BlcmF0aW9ucztcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBtYWtlSW5zZXJ0T3BlcmF0aW9uc0Zvck51bWJlclZhbHVlKFxyXG4gICAgICBvcHRpb25zOiBNYWtlSW5zZXJ0T3BlcmF0aW9uc0Zvck51bWJlck9wdGlvbnMsXHJcbiAgICApIHtcclxuICAgICAgY29uc3Qgb3BlcmF0aW9uczogQXJyYXk8U2VyaWFsT3BlcmF0aW9uPiA9IFtdO1xyXG4gICAgICBjb25zdCB7IHZhbHVlLCBwYXJlbnRMaW5rSWQsIGxpbmtJZCwgbmFtZSB9ID0gb3B0aW9ucztcclxuICAgICAgY29uc3QgbG9nID0gT2JqZWN0VG9MaW5rc0NvbnZlcnRlci5nZXRMb2dnZXIoXHJcbiAgICAgICAgXCJtYWtlSW5zZXJ0T3BlcmF0aW9uc0ZvclN0cmluZ1ZhbHVlXCIsXHJcbiAgICAgICk7XHJcbiAgICAgIGNvbnN0IGxpbmtJbnNlcnRTZXJpYWxPcGVyYXRpb24gPSBjcmVhdGVTZXJpYWxPcGVyYXRpb24oe1xyXG4gICAgICAgIHR5cGU6IFwiaW5zZXJ0XCIsXHJcbiAgICAgICAgdGFibGU6IFwibGlua3NcIixcclxuICAgICAgICBvYmplY3RzOiB7XHJcbiAgICAgICAgICBpZDogbGlua0lkLFxyXG4gICAgICAgICAgZnJvbV9pZDogcGFyZW50TGlua0lkLFxyXG4gICAgICAgICAgdG9faWQ6IHBhcmVudExpbmtJZCxcclxuICAgICAgICAgIHR5cGVfaWQ6IGF3YWl0IGRlZXAuaWQoZGVlcC5saW5rSWQhLCBwYXNjYWxDYXNlKHR5cGVvZiB2YWx1ZSkpLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgICBsb2coeyBsaW5rSW5zZXJ0U2VyaWFsT3BlcmF0aW9uIH0pO1xyXG4gICAgICBvcGVyYXRpb25zLnB1c2gobGlua0luc2VydFNlcmlhbE9wZXJhdGlvbik7XHJcblxyXG4gICAgICBjb25zdCBzdHJpbmdWYWx1ZUluc2VydFNlcmlhbE9wZXJhdGlvbiA9IGNyZWF0ZVNlcmlhbE9wZXJhdGlvbih7XHJcbiAgICAgICAgdHlwZTogXCJpbnNlcnRcIixcclxuICAgICAgICB0YWJsZTogYCR7dHlwZW9mIHZhbHVlfXNgIGFzIFRhYmxlPFwiaW5zZXJ0XCI+LFxyXG4gICAgICAgIG9iamVjdHM6IHtcclxuICAgICAgICAgIGxpbmtfaWQ6IGxpbmtJZCxcclxuICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuICAgICAgbG9nKHsgc3RyaW5nVmFsdWVJbnNlcnRTZXJpYWxPcGVyYXRpb24gfSk7XHJcbiAgICAgIG9wZXJhdGlvbnMucHVzaChzdHJpbmdWYWx1ZUluc2VydFNlcmlhbE9wZXJhdGlvbik7XHJcblxyXG4gICAgICBjb25zdCBjb250YWluSW5zZXJ0U2VyaWFsT3BlcmF0aW9uID0gY3JlYXRlU2VyaWFsT3BlcmF0aW9uKHtcclxuICAgICAgICB0eXBlOiBcImluc2VydFwiLFxyXG4gICAgICAgIHRhYmxlOiBcImxpbmtzXCIsXHJcbiAgICAgICAgb2JqZWN0czoge1xyXG4gICAgICAgICAgLy8gVE9ETzogUmVwbGFjZSBpZCB3aXRoIGlkTG9jYWwgd2hlbiBpdCB3b3JrIHByb3Blcmx5XHJcbiAgICAgICAgICB0eXBlX2lkOiBhd2FpdCBkZWVwLmlkKFwiQGRlZXAtZm91bmRhdGlvbi9jb3JlXCIsIFwiQ29udGFpblwiKSxcclxuICAgICAgICAgIGZyb21faWQ6IHBhcmVudExpbmtJZCxcclxuICAgICAgICAgIHRvX2lkOiBsaW5rSWQsXHJcbiAgICAgICAgICBzdHJpbmc6IHtcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgIHZhbHVlOiBuYW1lLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuICAgICAgbG9nKHsgY29udGFpbkluc2VydFNlcmlhbE9wZXJhdGlvbiB9KTtcclxuICAgICAgb3BlcmF0aW9ucy5wdXNoKGNvbnRhaW5JbnNlcnRTZXJpYWxPcGVyYXRpb24pO1xyXG5cclxuICAgICAgbG9nKHsgb3BlcmF0aW9ucyB9KTtcclxuICAgICAgcmV0dXJuIG9wZXJhdGlvbnM7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgbWFrZUluc2VydE9wZXJhdGlvbnNGb3JBcnJheVZhbHVlKFxyXG4gICAgICBvcHRpb25zOiBNYWtlSW5zZXJ0T3BlcmF0aW9uc0ZvckFycmF5VmFsdWVPcHRpb25zLFxyXG4gICAgKSB7XHJcbiAgICAgIGNvbnN0IG9wZXJhdGlvbnM6IEFycmF5PFNlcmlhbE9wZXJhdGlvbj4gPSBbXTtcclxuICAgICAgY29uc3QgeyB2YWx1ZSwgbGlua0lkLCBuYW1lLCBwYXJlbnRMaW5rSWQgfSA9IG9wdGlvbnM7XHJcbiAgICAgIGNvbnN0IGxvZyA9IE9iamVjdFRvTGlua3NDb252ZXJ0ZXIuZ2V0TG9nZ2VyKFxyXG4gICAgICAgIFwibWFrZUluc2VydE9wZXJhdGlvbnNGb3JTdHJpbmdWYWx1ZVwiLFxyXG4gICAgICApO1xyXG5cclxuICAgICAgY29uc3QgbGlua0luc2VydFNlcmlhbE9wZXJhdGlvbiA9IGNyZWF0ZVNlcmlhbE9wZXJhdGlvbih7XHJcbiAgICAgICAgdHlwZTogXCJpbnNlcnRcIixcclxuICAgICAgICB0YWJsZTogXCJsaW5rc1wiLFxyXG4gICAgICAgIG9iamVjdHM6IHtcclxuICAgICAgICAgIGlkOiBsaW5rSWQsXHJcbiAgICAgICAgICB0eXBlX2lkOiBhd2FpdCBkZWVwLmlkKGRlZXAubGlua0lkISwgcGFzY2FsQ2FzZSh0eXBlb2YgdmFsdWUpKSxcclxuICAgICAgICAgIGZyb21faWQ6IHBhcmVudExpbmtJZCxcclxuICAgICAgICAgIHRvX2lkOiBwYXJlbnRMaW5rSWQsXHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcbiAgICAgIGxvZyh7IGxpbmtJbnNlcnRTZXJpYWxPcGVyYXRpb24gfSk7XHJcbiAgICAgIG9wZXJhdGlvbnMucHVzaChsaW5rSW5zZXJ0U2VyaWFsT3BlcmF0aW9uKTtcclxuXHJcbiAgICAgIGNvbnN0IGNvbnRhaW5JbnNlcnRTZXJpYWxPcGVyYXRpb24gPSBjcmVhdGVTZXJpYWxPcGVyYXRpb24oe1xyXG4gICAgICAgIHR5cGU6IFwiaW5zZXJ0XCIsXHJcbiAgICAgICAgdGFibGU6IFwibGlua3NcIixcclxuICAgICAgICBvYmplY3RzOiB7XHJcbiAgICAgICAgICAvLyBUT0RPOiBSZXBsYWNlIGlkIHdpdGggaWRMb2NhbCB3aGVuIGl0IHdvcmsgcHJvcGVybHlcclxuICAgICAgICAgIHR5cGVfaWQ6IGF3YWl0IGRlZXAuaWQoXCJAZGVlcC1mb3VuZGF0aW9uL2NvcmVcIiwgXCJDb250YWluXCIpLFxyXG4gICAgICAgICAgZnJvbV9pZDogcGFyZW50TGlua0lkLFxyXG4gICAgICAgICAgdG9faWQ6IGxpbmtJZCxcclxuICAgICAgICAgIHN0cmluZzoge1xyXG4gICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgdmFsdWU6IG5hbWUsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgICBsb2coeyBjb250YWluSW5zZXJ0U2VyaWFsT3BlcmF0aW9uIH0pO1xyXG4gICAgICBvcGVyYXRpb25zLnB1c2goY29udGFpbkluc2VydFNlcmlhbE9wZXJhdGlvbik7XHJcblxyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZhbHVlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IHZhbHVlW2ldO1xyXG4gICAgICAgIG9wZXJhdGlvbnMucHVzaChcclxuICAgICAgICAgIC4uLihhd2FpdCB0aGlzLm1ha2VJbnNlcnRPcGVyYXRpb25zRm9yQW55VmFsdWUoe1xyXG4gICAgICAgICAgICB2YWx1ZTogZWxlbWVudCxcclxuICAgICAgICAgICAgcGFyZW50TGlua0lkOiBsaW5rSWQsXHJcbiAgICAgICAgICAgIGxpbmtJZDogdGhpcy5yZXNlcnZlZExpbmtJZHMucG9wKCkhLFxyXG4gICAgICAgICAgICBuYW1lOiBpLnRvU3RyaW5nKCksXHJcbiAgICAgICAgICB9KSksXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIG9wZXJhdGlvbnM7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgbWFrZUluc2VydE9wZXJhdGlvbnNGb3JQcmltaXRpdmVWYWx1ZShcclxuICAgICAgb3B0aW9uczogTWFrZUluc2VydE9wZXJhdGlvbnNGb3JQcmltaXRpdmVWYWx1ZU9wdGlvbnMsXHJcbiAgICApIHtcclxuICAgICAgY29uc3Qgb3BlcmF0aW9uczogQXJyYXk8U2VyaWFsT3BlcmF0aW9uPiA9IFtdO1xyXG4gICAgICBjb25zdCB7IHZhbHVlIH0gPSBvcHRpb25zO1xyXG4gICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgb3BlcmF0aW9ucy5wdXNoKFxyXG4gICAgICAgICAgLi4uKGF3YWl0IHRoaXMubWFrZUluc2VydE9wZXJhdGlvbnNGb3JTdHJpbmdWYWx1ZSh7XHJcbiAgICAgICAgICAgIC4uLm9wdGlvbnMsXHJcbiAgICAgICAgICAgIHZhbHVlLFxyXG4gICAgICAgICAgfSkpLFxyXG4gICAgICAgICk7XHJcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSBcIm51bWJlclwiKSB7XHJcbiAgICAgICAgb3BlcmF0aW9ucy5wdXNoKFxyXG4gICAgICAgICAgLi4uKGF3YWl0IHRoaXMubWFrZUluc2VydE9wZXJhdGlvbnNGb3JOdW1iZXJWYWx1ZSh7XHJcbiAgICAgICAgICAgIC4uLm9wdGlvbnMsXHJcbiAgICAgICAgICAgIHZhbHVlLFxyXG4gICAgICAgICAgfSkpLFxyXG4gICAgICAgICk7XHJcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSBcImJvb2xlYW5cIikge1xyXG4gICAgICAgIG9wZXJhdGlvbnMucHVzaChcclxuICAgICAgICAgIC4uLihhd2FpdCB0aGlzLm1ha2VJbnNlcnRPcGVyYXRpb25zRm9yQm9vbGVhblZhbHVlKHtcclxuICAgICAgICAgICAgLi4ub3B0aW9ucyxcclxuICAgICAgICAgICAgdmFsdWUsXHJcbiAgICAgICAgICB9KSksXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gb3BlcmF0aW9ucztcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBtYWtlSW5zZXJ0T3BlcmF0aW9uc0Zvck9iamVjdFZhbHVlKFxyXG4gICAgICBvcHRpb25zOiBNYWtlSW5zZXJ0T3BlcmF0aW9uc0Zvck9iamVjdFZhbHVlLFxyXG4gICAgKSB7XHJcbiAgICAgIGNvbnN0IG9wZXJhdGlvbnM6IEFycmF5PFNlcmlhbE9wZXJhdGlvbj4gPSBbXTtcclxuICAgICAgY29uc3QgeyB2YWx1ZSwgbGlua0lkLCBuYW1lLCBwYXJlbnRMaW5rSWQgfSA9IG9wdGlvbnM7XHJcbiAgICAgIGNvbnN0IGxvZyA9IE9iamVjdFRvTGlua3NDb252ZXJ0ZXIuZ2V0TG9nZ2VyKFxyXG4gICAgICAgIHRoaXMubWFrZUluc2VydE9wZXJhdGlvbnNGb3JPYmplY3RWYWx1ZS5uYW1lLFxyXG4gICAgICApO1xyXG5cclxuICAgICAgY29uc3QgbGlua0luc2VydFNlcmlhbE9wZXJhdGlvbiA9IGNyZWF0ZVNlcmlhbE9wZXJhdGlvbih7XHJcbiAgICAgICAgdHlwZTogXCJpbnNlcnRcIixcclxuICAgICAgICB0YWJsZTogXCJsaW5rc1wiLFxyXG4gICAgICAgIG9iamVjdHM6IHtcclxuICAgICAgICAgIGlkOiBsaW5rSWQsXHJcbiAgICAgICAgICB0eXBlX2lkOiBhd2FpdCBkZWVwLmlkKGRlZXAubGlua0lkISwgcGFzY2FsQ2FzZSh0eXBlb2YgdmFsdWUpKSxcclxuICAgICAgICAgIGZyb21faWQ6IHBhcmVudExpbmtJZCxcclxuICAgICAgICAgIHRvX2lkOiBwYXJlbnRMaW5rSWQsXHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcbiAgICAgIGxvZyh7IGxpbmtJbnNlcnRTZXJpYWxPcGVyYXRpb24gfSk7XHJcbiAgICAgIG9wZXJhdGlvbnMucHVzaChsaW5rSW5zZXJ0U2VyaWFsT3BlcmF0aW9uKTtcclxuXHJcbiAgICAgIGNvbnN0IGNvbnRhaW5JbnNlcnRTZXJpYWxPcGVyYXRpb24gPSBjcmVhdGVTZXJpYWxPcGVyYXRpb24oe1xyXG4gICAgICAgIHR5cGU6IFwiaW5zZXJ0XCIsXHJcbiAgICAgICAgdGFibGU6IFwibGlua3NcIixcclxuICAgICAgICBvYmplY3RzOiB7XHJcbiAgICAgICAgICAvLyBUT0RPOiBSZXBsYWNlIGlkIHdpdGggaWRMb2NhbCB3aGVuIGl0IHdvcmsgcHJvcGVybHlcclxuICAgICAgICAgIHR5cGVfaWQ6IGF3YWl0IGRlZXAuaWQoXCJAZGVlcC1mb3VuZGF0aW9uL2NvcmVcIiwgXCJDb250YWluXCIpLFxyXG4gICAgICAgICAgZnJvbV9pZDogcGFyZW50TGlua0lkLFxyXG4gICAgICAgICAgdG9faWQ6IGxpbmtJZCxcclxuICAgICAgICAgIHN0cmluZzoge1xyXG4gICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgdmFsdWU6IG5hbWUsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgICBsb2coeyBjb250YWluSW5zZXJ0U2VyaWFsT3BlcmF0aW9uIH0pO1xyXG4gICAgICBvcGVyYXRpb25zLnB1c2goY29udGFpbkluc2VydFNlcmlhbE9wZXJhdGlvbik7XHJcblxyXG4gICAgICBmb3IgKGNvbnN0IFtwcm9wZXJ0eUtleSwgcHJvcGVydHlWYWx1ZV0gb2YgT2JqZWN0LmVudHJpZXModmFsdWUpKSB7XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgdHlwZW9mIHByb3BlcnR5VmFsdWUgIT09IFwic3RyaW5nXCIgJiZcclxuICAgICAgICAgIHR5cGVvZiBwcm9wZXJ0eVZhbHVlICE9PSBcIm51bWJlclwiICYmXHJcbiAgICAgICAgICB0eXBlb2YgcHJvcGVydHlWYWx1ZSAhPT0gXCJib29sZWFuXCIgJiZcclxuICAgICAgICAgICFBcnJheS5pc0FycmF5KHByb3BlcnR5VmFsdWUpICYmXHJcbiAgICAgICAgICB0eXBlb2YgcHJvcGVydHlWYWx1ZSAhPT0gXCJvYmplY3RcIlxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgbG9nKFxyXG4gICAgICAgICAgICBgU2tpcHBpbmcgcHJvcGVydHkgJHtwcm9wZXJ0eUtleX0gYmVjYXVzZSBpdHMgdHlwZSAke3R5cGVvZiB2YWx1ZX0gaXMgbm90IHN1cHBvcnRlZGAsXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHByb3BlcnR5TGlua0lkID0gdGhpcy5yZXNlcnZlZExpbmtJZHMucG9wKCk7XHJcbiAgICAgICAgbG9nKHsgcHJvcGVydHlMaW5rSWQgfSk7XHJcbiAgICAgICAgaWYgKCFwcm9wZXJ0eUxpbmtJZCkge1xyXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBOb3QgZW5vdWdoIHJlc2VydmVkIGxpbmsgaWRzYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHByb3BlcnR5SW5zZXJ0T3BlcmF0aW9ucyA9XHJcbiAgICAgICAgICBhd2FpdCB0aGlzLm1ha2VJbnNlcnRPcGVyYXRpb25zRm9yQW55VmFsdWUoe1xyXG4gICAgICAgICAgICBsaW5rSWQ6IHByb3BlcnR5TGlua0lkLFxyXG4gICAgICAgICAgICBwYXJlbnRMaW5rSWQ6IGxpbmtJZCxcclxuICAgICAgICAgICAgdmFsdWU6IHByb3BlcnR5VmFsdWUsXHJcbiAgICAgICAgICAgIG5hbWU6IHByb3BlcnR5S2V5LFxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgb3BlcmF0aW9ucy5wdXNoKC4uLnByb3BlcnR5SW5zZXJ0T3BlcmF0aW9ucyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBvcGVyYXRpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIG1ha2VJbnNlcnRPcGVyYXRpb25zRm9yQW55VmFsdWUoXHJcbiAgICAgIG9wdGlvbnM6IE1ha2VJbnNlcnRPcGVyYXRpb25zRm9yQW55VmFsdWVPcHRpb25zLFxyXG4gICAgKSB7XHJcbiAgICAgIGNvbnN0IG9wZXJhdGlvbnM6IEFycmF5PFNlcmlhbE9wZXJhdGlvbj4gPSBbXTtcclxuICAgICAgY29uc3QgeyB2YWx1ZSB9ID0gb3B0aW9ucztcclxuICAgICAgY29uc3QgbG9nID0gT2JqZWN0VG9MaW5rc0NvbnZlcnRlci5nZXRMb2dnZXIoXHJcbiAgICAgICAgdGhpcy5tYWtlSW5zZXJ0T3BlcmF0aW9uc0ZvckFueVZhbHVlLm5hbWUsXHJcbiAgICAgICk7XHJcblxyXG4gICAgICBpZiAoXHJcbiAgICAgICAgdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiIHx8XHJcbiAgICAgICAgdHlwZW9mIHZhbHVlID09PSBcIm51bWJlclwiIHx8XHJcbiAgICAgICAgdHlwZW9mIHZhbHVlID09PSBcImJvb2xlYW5cIlxyXG4gICAgICApIHtcclxuICAgICAgICBvcGVyYXRpb25zLnB1c2goXHJcbiAgICAgICAgICAuLi4oYXdhaXQgdGhpcy5tYWtlSW5zZXJ0T3BlcmF0aW9uc0ZvclByaW1pdGl2ZVZhbHVlKHtcclxuICAgICAgICAgICAgLi4ub3B0aW9ucyxcclxuICAgICAgICAgICAgdmFsdWUsXHJcbiAgICAgICAgICB9KSksXHJcbiAgICAgICAgKTtcclxuICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xyXG4gICAgICAgIG9wZXJhdGlvbnMucHVzaChcclxuICAgICAgICAgIC4uLihhd2FpdCB0aGlzLm1ha2VJbnNlcnRPcGVyYXRpb25zRm9yQXJyYXlWYWx1ZSh7XHJcbiAgICAgICAgICAgIC4uLm9wdGlvbnMsXHJcbiAgICAgICAgICAgIHZhbHVlLFxyXG4gICAgICAgICAgfSkpLFxyXG4gICAgICAgICk7XHJcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiKSB7XHJcbiAgICAgICAgb3BlcmF0aW9ucy5wdXNoKFxyXG4gICAgICAgICAgLi4uKGF3YWl0IHRoaXMubWFrZUluc2VydE9wZXJhdGlvbnNGb3JPYmplY3RWYWx1ZSh7XHJcbiAgICAgICAgICAgIC4uLm9wdGlvbnMsXHJcbiAgICAgICAgICAgIHZhbHVlLFxyXG4gICAgICAgICAgfSkpLFxyXG4gICAgICAgICk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUeXBlIG9mIHZhbHVlICR7dHlwZW9mIHZhbHVlfSBpcyBub3Qgc3VwcG9ydGVkYCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGxvZyh7IG9wZXJhdGlvbnMgfSk7XHJcbiAgICAgIHJldHVybiBvcGVyYXRpb25zO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZ2V0T2JqZWN0VG9MaW5rc0NvbnZlcnRlclByb3h5KG9wdGlvbnM6IHtcclxuICAgIHRhcmdldDogT2JqZWN0VG9MaW5rc0NvbnZlcnRlcjtcclxuICAgIGN1c3RvbU1ldGhvZHM/OiBSZWNvcmQ8c3RyaW5nLCBGdW5jdGlvbj47XHJcbiAgfSk6IE9iamVjdFRvTGlua3NDb252ZXJ0ZXIge1xyXG4gICAgY29uc3QgeyB0YXJnZXQsIGN1c3RvbU1ldGhvZHMgfSA9IG9wdGlvbnM7XHJcblxyXG4gICAgcmV0dXJuIG5ldyBQcm94eSh0YXJnZXQsIHtcclxuICAgICAgZ2V0OiBmdW5jdGlvbiAob2JqOiBPYmplY3RUb0xpbmtzQ29udmVydGVyLCBwcm9wOiBzdHJpbmcgfCBzeW1ib2wpIHtcclxuICAgICAgICBpZiAoY3VzdG9tTWV0aG9kcyAmJiBwcm9wIGluIGN1c3RvbU1ldGhvZHMpIHtcclxuICAgICAgICAgIC8vIElmIHRoZSBwcm9wZXJ0eSBpcyBpbiB0aGUgY3VzdG9tTWV0aG9kcyBvYmplY3QsIHJldHVybiB0aGF0LlxyXG4gICAgICAgICAgcmV0dXJuIGN1c3RvbU1ldGhvZHNbcHJvcCBhcyBzdHJpbmddO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gT3RoZXJ3aXNlLCByZXR1cm4gdGhlIHByb3BlcnR5IGZyb20gdGhlIG9yaWdpbmFsIG9iamVjdC5cclxuICAgICAgICByZXR1cm4gb2JqW3Byb3AgYXMga2V5b2YgT2JqZWN0VG9MaW5rc0NvbnZlcnRlcl07XHJcbiAgICAgIH0sXHJcbiAgICB9KSBhcyBPYmplY3RUb0xpbmtzQ29udmVydGVyO1xyXG4gIH1cclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG1haW4oKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHJlc3VsdCxcclxuICAgICAgbG9nczogbG9ncyxcclxuICAgIH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIHRocm93IHtcclxuICAgICAgZXJyb3I6IHV0aWwuaW5zcGVjdChlcnJvciksXHJcbiAgICAgIGxvZ3M6IGxvZ3MsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgZnVuY3Rpb24gbWFpbigpIHtcclxuICAgIGNvbnN0IGxvZyA9IE9iamVjdFRvTGlua3NDb252ZXJ0ZXIuZ2V0TG9nZ2VyKG1haW4ubmFtZSk7XHJcblxyXG4gICAgaWYgKE9iamVjdC5rZXlzKG9iaikubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBvYmplY3RUb0xpbmtzQ29udmVydGVyID0gYXdhaXQgT2JqZWN0VG9MaW5rc0NvbnZlcnRlci5pbml0KHtcclxuICAgICAgb2JqLFxyXG4gICAgICByb290TGlua0lkLFxyXG4gICAgICByZXN1bHRMaW5rSWQsXHJcbiAgICB9KTtcclxuICAgIGxvZyh7IG9iamVjdFRvTGlua3NDb252ZXJ0ZXIgfSk7XHJcblxyXG4gICAgY29uc3QgcHJveGllZE9iamVjdFRvTGlua3NDb252ZXJ0ZXIgPSBnZXRPYmplY3RUb0xpbmtzQ29udmVydGVyUHJveHkoe1xyXG4gICAgICB0YXJnZXQ6IG9iamVjdFRvTGlua3NDb252ZXJ0ZXIsXHJcbiAgICAgIGN1c3RvbU1ldGhvZHMsXHJcbiAgICB9KTtcclxuICAgIGxvZyh7IHByb3hpZWRPYmplY3RUb0xpbmtzQ29udmVydGVyIH0pO1xyXG5cclxuICAgIGNvbnN0IGNvbnZlcnRSZXN1bHQgPSBhd2FpdCBwcm94aWVkT2JqZWN0VG9MaW5rc0NvbnZlcnRlci5jb252ZXJ0KCk7XHJcbiAgICBsb2coeyBjb252ZXJ0UmVzdWx0IH0pO1xyXG5cclxuICAgIHJldHVybiBjb252ZXJ0UmVzdWx0O1xyXG4gIH1cclxuXHJcbiAgdHlwZSBBcHBseUNvbnRhaW5UcmVlTGlua3NEb3duVG9QYXJlbnRUb01pbmlsaW5rc09wdGlvbnMgPSBPbWl0PFxyXG4gICAgR2V0Q29udGFpblRyZWVMaW5rc0Rvd25Ub0xpbmtPcHRpb25zLFxyXG4gICAgXCJ1c2VNaW5pbGlua3NcIlxyXG4gID4gJiB7XHJcbiAgICBtaW5pbGlua3M6IE1pbmlsaW5rc1Jlc3VsdDxMaW5rPG51bWJlcj4+O1xyXG4gIH07XHJcblxyXG4gIGludGVyZmFjZSBHZXRDb250YWluVHJlZUxpbmtzRG93blRvTGlua09wdGlvbnMge1xyXG4gICAgbGlua0V4cDogQm9vbEV4cExpbms7XHJcbiAgfVxyXG5cclxuICB0eXBlIEN1c3RvbU1ldGhvZHMgPSB7XHJcbiAgICBjb252ZXJ0OiB0eXBlb2YgT2JqZWN0VG9MaW5rc0NvbnZlcnRlci5wcm90b3R5cGUuY29udmVydDtcclxuICAgIG1ha2VJbnNlcnRPcGVyYXRpb25zRm9yQW55VmFsdWU6IHR5cGVvZiBPYmplY3RUb0xpbmtzQ29udmVydGVyLnByb3RvdHlwZS5tYWtlSW5zZXJ0T3BlcmF0aW9uc0ZvckFueVZhbHVlO1xyXG4gICAgbWFrZVVwZGF0ZU9wZXJhdGlvbnNGb3JBbnlWYWx1ZTogdHlwZW9mIE9iamVjdFRvTGlua3NDb252ZXJ0ZXIucHJvdG90eXBlLm1ha2VVcGRhdGVPcGVyYXRpb25zRm9yQW55VmFsdWU7XHJcbiAgICBtYWtlSW5zZXJ0T3BlcmF0aW9uc0ZvclByaW1pdGl2ZVZhbHVlOiB0eXBlb2YgT2JqZWN0VG9MaW5rc0NvbnZlcnRlci5wcm90b3R5cGUubWFrZUluc2VydE9wZXJhdGlvbnNGb3JQcmltaXRpdmVWYWx1ZTtcclxuICAgIG1ha2VJbnNlcnRPcGVyYXRpb25zRm9yQXJyYXlWYWx1ZTogdHlwZW9mIE9iamVjdFRvTGlua3NDb252ZXJ0ZXIucHJvdG90eXBlLm1ha2VJbnNlcnRPcGVyYXRpb25zRm9yQXJyYXlWYWx1ZTtcclxuICAgIG1ha2VJbnNlcnRPcGVyYXRpb25zRm9yT2JqZWN0VmFsdWU6IHR5cGVvZiBPYmplY3RUb0xpbmtzQ29udmVydGVyLnByb3RvdHlwZS5tYWtlSW5zZXJ0T3BlcmF0aW9uc0Zvck9iamVjdFZhbHVlO1xyXG4gICAgbWFrZUluc2VydE9wZXJhdGlvbnNGb3JTdHJpbmdWYWx1ZTogdHlwZW9mIE9iamVjdFRvTGlua3NDb252ZXJ0ZXIucHJvdG90eXBlLm1ha2VJbnNlcnRPcGVyYXRpb25zRm9yU3RyaW5nVmFsdWU7XHJcbiAgICBtYWtlSW5zZXJ0T3BlcmF0aW9uc0Zvck51bWJlclZhbHVlOiB0eXBlb2YgT2JqZWN0VG9MaW5rc0NvbnZlcnRlci5wcm90b3R5cGUubWFrZUluc2VydE9wZXJhdGlvbnNGb3JOdW1iZXJWYWx1ZTtcclxuICAgIG1ha2VJbnNlcnRPcGVyYXRpb25zRm9yQm9vbGVhblZhbHVlOiB0eXBlb2YgT2JqZWN0VG9MaW5rc0NvbnZlcnRlci5wcm90b3R5cGUubWFrZUluc2VydE9wZXJhdGlvbnNGb3JCb29sZWFuVmFsdWU7XHJcbiAgICBtYWtlVXBkYXRlT3BlcmF0aW9uc0ZvckJvb2xlYW5WYWx1ZTogdHlwZW9mIE9iamVjdFRvTGlua3NDb252ZXJ0ZXIucHJvdG90eXBlLm1ha2VVcGRhdGVPcGVyYXRpb25zRm9yQm9vbGVhblZhbHVlO1xyXG4gICAgbWFrZVVwZGF0ZU9wZXJhdGlvbnNGb3JTdHJpbmdPck51bWJlclZhbHVlOiB0eXBlb2YgT2JqZWN0VG9MaW5rc0NvbnZlcnRlci5wcm90b3R5cGUubWFrZVVwZGF0ZU9wZXJhdGlvbnNGb3JTdHJpbmdWYWx1ZTtcclxuICAgIG1ha2VVcGRhdGVPcGVyYXRpb25zRm9yQXJyYXlWYWx1ZTogdHlwZW9mIE9iamVjdFRvTGlua3NDb252ZXJ0ZXIucHJvdG90eXBlLm1ha2VVcGRhdGVPcGVyYXRpb25zRm9yQXJyYXlWYWx1ZTtcclxuICAgIG1ha2VVcGRhdGVPcGVyYXRpb25zRm9yT2JqZWN0VmFsdWU6IHR5cGVvZiBPYmplY3RUb0xpbmtzQ29udmVydGVyLnByb3RvdHlwZS5tYWtlVXBkYXRlT3BlcmF0aW9uc0Zvck9iamVjdFZhbHVlO1xyXG4gICAgYXBwbHlDb250YWluVHJlZUxpbmtzRG93blRvUGFyZW50VG9NaW5pbGlua3M6IHR5cGVvZiBPYmplY3RUb0xpbmtzQ29udmVydGVyLmFwcGx5Q29udGFpblRyZWVMaW5rc0Rvd25Ub1BhcmVudFRvTWluaWxpbmtzO1xyXG4gICAgZ2V0Q29udGFpblRyZWVMaW5rc0Rvd25Ub1BhcmVudDogdHlwZW9mIE9iamVjdFRvTGlua3NDb252ZXJ0ZXIuZ2V0Q29udGFpblRyZWVMaW5rc0Rvd25Ub1BhcmVudDtcclxuICAgIGdldExpbmtzVG9SZXNlcnZlQ291bnQ6IHR5cGVvZiBPYmplY3RUb0xpbmtzQ29udmVydGVyLmdldExpbmtzVG9SZXNlcnZlQ291bnQ7XHJcbiAgICBpbml0OiB0eXBlb2YgT2JqZWN0VG9MaW5rc0NvbnZlcnRlci5pbml0O1xyXG4gIH07XHJcblxyXG4gIGludGVyZmFjZSBPYmplY3RUb0xpbmtzQ29udmVydGVyT3B0aW9ucyB7XHJcbiAgICByb290TGluazogTGluazxudW1iZXI+O1xyXG4gICAgcmVzZXJ2ZWRMaW5rSWRzOiBBcnJheTxudW1iZXI+O1xyXG4gICAgb2JqOiBPYmo7XHJcbiAgICBjdXN0b21NZXRob2RzPzogQ3VzdG9tTWV0aG9kcztcclxuICAgIHJlc3VsdExpbms6IExpbms8bnVtYmVyPjtcclxuICB9XHJcblxyXG4gIGludGVyZmFjZSBPYmplY3RUb0xpbmtzQ29udmVydGVySW5pdE9wdGlvbnMge1xyXG4gICAgb2JqOiBPYmo7XHJcbiAgICByb290TGlua0lkPzogbnVtYmVyO1xyXG4gICAgY3VzdG9tTWV0aG9kcz86IEN1c3RvbU1ldGhvZHM7XHJcbiAgICByZXN1bHRMaW5rSWQ/OiBudW1iZXI7XHJcbiAgfVxyXG5cclxuICB0eXBlIEFsbG93ZWRQcmltaXRpdmUgPSBzdHJpbmcgfCBudW1iZXIgfCBib29sZWFuO1xyXG5cclxuICBpbnRlcmZhY2UgQWxsb3dlZE9iamVjdCB7XHJcbiAgICBba2V5OiBzdHJpbmddOiBBbGxvd2VkVmFsdWU7XHJcbiAgfVxyXG5cclxuICB0eXBlIEFsbG93ZWRBcnJheSA9IEFycmF5PEFsbG93ZWRWYWx1ZT47XHJcblxyXG4gIHR5cGUgQWxsb3dlZFZhbHVlID0gQWxsb3dlZFByaW1pdGl2ZSB8IEFsbG93ZWRPYmplY3QgfCBBbGxvd2VkQXJyYXk7XHJcblxyXG4gIHR5cGUgTWFrZUluc2VydE9wZXJhdGlvbnNGb3JTdHJpbmdPcHRpb25zID1cclxuICAgIE1ha2VJbnNlcnRPcGVyYXRpb25zRm9yVmFsdWVPcHRpb25zPHN0cmluZz47XHJcblxyXG4gIHR5cGUgTWFrZUluc2VydE9wZXJhdGlvbnNGb3JOdW1iZXJPcHRpb25zID1cclxuICAgIE1ha2VJbnNlcnRPcGVyYXRpb25zRm9yVmFsdWVPcHRpb25zPG51bWJlcj47XHJcblxyXG4gIHR5cGUgTWFrZUluc2VydE9wZXJhdGlvbnNGb3JCb29sZWFuT3B0aW9ucyA9XHJcbiAgICBNYWtlSW5zZXJ0T3BlcmF0aW9uc0ZvclZhbHVlT3B0aW9uczxib29sZWFuPjtcclxuXHJcbiAgdHlwZSBNYWtlSW5zZXJ0T3BlcmF0aW9uc0Zvck9iamVjdFZhbHVlID1cclxuICAgIE1ha2VJbnNlcnRPcGVyYXRpb25zRm9yVmFsdWVPcHRpb25zPEFsbG93ZWRPYmplY3Q+O1xyXG5cclxuICB0eXBlIE1ha2VJbnNlcnRPcGVyYXRpb25zRm9yQXJyYXlWYWx1ZU9wdGlvbnMgPVxyXG4gICAgTWFrZUluc2VydE9wZXJhdGlvbnNGb3JWYWx1ZU9wdGlvbnM8QWxsb3dlZEFycmF5PjtcclxuXHJcbiAgdHlwZSBNYWtlSW5zZXJ0T3BlcmF0aW9uc0ZvclByaW1pdGl2ZVZhbHVlT3B0aW9ucyA9XHJcbiAgICBNYWtlSW5zZXJ0T3BlcmF0aW9uc0ZvclZhbHVlT3B0aW9uczxBbGxvd2VkUHJpbWl0aXZlPjtcclxuXHJcbiAgdHlwZSBNYWtlSW5zZXJ0T3BlcmF0aW9uc0ZvckFueVZhbHVlT3B0aW9ucyA9IE9taXQ8XHJcbiAgICBNYWtlSW5zZXJ0T3BlcmF0aW9uc0ZvclZhbHVlT3B0aW9uczxBbGxvd2VkVmFsdWU+LFxyXG4gICAgXCJ0eXBlTGlua0lkXCJcclxuICA+O1xyXG5cclxuICB0eXBlIE1ha2VJbnNlcnRPcGVyYXRpb25zRm9yVmFsdWVPcHRpb25zPFRWYWx1ZSBleHRlbmRzIEFsbG93ZWRWYWx1ZT4gPSB7XHJcbiAgICBwYXJlbnRMaW5rSWQ6IG51bWJlcjtcclxuICAgIGxpbmtJZDogbnVtYmVyO1xyXG4gICAgdmFsdWU6IFRWYWx1ZTtcclxuICAgIG5hbWU6IHN0cmluZztcclxuICB9O1xyXG5cclxuICBpbnRlcmZhY2UgTWFrZVVwZGF0ZU9wZXJhdGlvbnNGb3JWYWx1ZU9wdGlvbnM8VFZhbHVlIGV4dGVuZHMgQWxsb3dlZFZhbHVlPiB7XHJcbiAgICBsaW5rOiBMaW5rPG51bWJlcj47XHJcbiAgICB2YWx1ZTogVFZhbHVlO1xyXG4gIH1cclxuXHJcbiAgdHlwZSBNYWtlVXBkYXRlT3BlcmF0aW9uc0ZvckFueVZhbHVlT3B0aW9uczxUVmFsdWUgZXh0ZW5kcyBBbGxvd2VkVmFsdWU+ID1cclxuICAgIE1ha2VVcGRhdGVPcGVyYXRpb25zRm9yVmFsdWVPcHRpb25zPFRWYWx1ZT47XHJcblxyXG4gIHR5cGUgTWFrZVVwZGF0ZU9wZXJhdGlvbnNGb3JPYmplY3RWYWx1ZU9wdGlvbnMgPVxyXG4gICAgTWFrZVVwZGF0ZU9wZXJhdGlvbnNGb3JWYWx1ZU9wdGlvbnM8QWxsb3dlZE9iamVjdD47XHJcblxyXG4gIHR5cGUgTWFrZVVwZGF0ZU9wZXJhdGlvbnNGb3JTdHJpbmdWYWx1ZU9wdGlvbnMgPVxyXG4gICAgTWFrZVVwZGF0ZU9wZXJhdGlvbnNGb3JWYWx1ZU9wdGlvbnM8c3RyaW5nPjtcclxuXHJcbiAgdHlwZSBNYWtlVXBkYXRlT3BlcmF0aW9uc0ZvckFycmF5VmFsdWVPcHRpb25zID1cclxuICAgIE1ha2VVcGRhdGVPcGVyYXRpb25zRm9yVmFsdWVPcHRpb25zPEFsbG93ZWRBcnJheT47XHJcblxyXG4gIHR5cGUgTWFrZVVwZGF0ZU9wZXJhdGlvbnNGb3JCb29sZWFuVmFsdWVPcHRpb25zID1cclxuICAgIE1ha2VVcGRhdGVPcGVyYXRpb25zRm9yVmFsdWVPcHRpb25zPGJvb2xlYW4+O1xyXG5cclxuICB0eXBlIE1ha2VVcGRhdGVPcGVyYXRpb25zRm9yTnVtYmVyVmFsdWVPcHRpb25zID1cclxuICAgIE1ha2VVcGRhdGVPcGVyYXRpb25zRm9yVmFsdWVPcHRpb25zPG51bWJlcj47XHJcbn07XHJcblxyXG5pbnRlcmZhY2UgT2JqIHtcclxuICBba2V5OiBzdHJpbmddOiBzdHJpbmcgfCBudW1iZXIgfCBPYmogfCBib29sZWFuO1xyXG59XHJcbiJdfQ==",
          "link_id": 1805
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 1890,
      "src_id": 1834,
      "handler_id": 1835,
      "execution_provider_id": 33,
      "isolation_provider_id": 81,
      "dist": {
        "id": 1890,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 704,
          "value": "async (req, res, next, { deep, require, gql }) => {\n    const { PassThrough, Readable } = require('stream');\n    const express = require('express');\n    const http = require('http');\n    const ApolloServer = require('apollo-server-express').ApolloServer;\n    const { ApolloServerPluginDrainHttpServer, ApolloServerPluginLandingPageGraphQLPlayground } = require('apollo-server-core');\n    const axios = require('axios');\n    const ffmpeg = require('fluent-ffmpeg');\n    const FormData = require('form-data');\n    function base64ToStream(base64String) {\n        const base64Data = base64String.replace(/^data:[^;]+;base64,/, '');\n        const binaryData = Buffer.from(base64Data, 'base64');\n        const stream = new Readable();\n        stream.push(binaryData);\n        stream.push(null);\n        return stream;\n    }\n    const typeDefs = `\n        input Voice {\n            id: Int!\n            record: String!\n            duration: Float!\n            mimeType: String!\n        }\n        type Query { deepmemo_upload(voice: Voice!): String }\n    `;\n    const resolvers = {\n        Query: { deepmemo_upload: async (parent, { voice: { id, record, duration, mimeType } }, contextValue, info) => {\n                let inputFormat;\n                if (mimeType.includes('audio/webm')) {\n                    inputFormat = 'webm';\n                }\n                else if (mimeType.includes('audio/aac')) {\n                    inputFormat = 'aac';\n                }\n                else if (mimeType.includes('audio/mp4')) {\n                    inputFormat = 'mp4';\n                }\n                else\n                    return 'not supported type';\n                return new Promise((res, rej) => {\n                    const stream = new PassThrough();\n                    let chunkData = [];\n                    stream.on('data', chunk => {\n                        chunkData.push(chunk);\n                    });\n                    ffmpeg()\n                        .input(base64ToStream(record))\n                        .inputFormat(inputFormat)\n                        .outputFormat('mp3')\n                        .on('end', () => {\n                        stream.end();\n                        const byteArray = Buffer.concat(chunkData);\n                        const form = new FormData();\n                        form.append('file', byteArray, { type: 'audio/mp3', filename: `${id}.mp3` });\n                        axios.post(`http://${deep.client.path.slice(0, -4)}/file`, form, {\n                            headers: {\n                                linkId: id,\n                                Authorization: contextValue?.headers?.authorization,\n                                ...form.getHeaders(),\n                            },\n                        })\n                            .then((r) => {\n                            res('done');\n                        })\n                            .catch((e) => {\n                            console.error(e);\n                            rej('error');\n                        });\n                    })\n                        .pipe(stream, { end: true });\n                });\n            } },\n    };\n    const context = ({ req }) => { return { headers: req.headers }; };\n    const generateApolloServer = () => {\n        return new ApolloServer({\n            introspection: true,\n            typeDefs,\n            resolvers,\n            context,\n            plugins: [\n                ApolloServerPluginLandingPageGraphQLPlayground(),\n            ],\n        });\n    };\n    const router = express.Router();\n    const apolloServer = generateApolloServer();\n    await apolloServer.start();\n    apolloServer.applyMiddleware({ app: router, path: '/' });\n    router.handle(req, res);\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxLQUFLLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLEdBQUcsRUFBRSxFQUFFLEVBQUU7SUFDN0MsTUFBTSxFQUFFLFdBQVcsRUFBRSxRQUFRLEVBQUUsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDcEQsTUFBTSxPQUFPLEdBQUcsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDO0lBQ25DLE1BQU0sSUFBSSxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUM3QixNQUFNLFlBQVksR0FBRyxPQUFPLENBQUMsdUJBQXVCLENBQUMsQ0FBQyxZQUFZLENBQUM7SUFDbkUsTUFBTSxFQUFFLGlDQUFpQyxFQUFFLDhDQUE4QyxFQUFFLEdBQUcsT0FBTyxDQUFDLG9CQUFvQixDQUFDLENBQUM7SUFDNUgsTUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQy9CLE1BQU0sTUFBTSxHQUFHLE9BQU8sQ0FBQyxlQUFlLENBQUMsQ0FBQztJQUN4QyxNQUFNLFFBQVEsR0FBRyxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUM7SUFFdEMsU0FBUyxjQUFjLENBQUMsWUFBWTtRQUNoQyxNQUFNLFVBQVUsR0FBRyxZQUFZLENBQUMsT0FBTyxDQUFDLHFCQUFxQixFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBQ25FLE1BQU0sVUFBVSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLFFBQVEsQ0FBQyxDQUFDO1FBQ3JELE1BQU0sTUFBTSxHQUFHLElBQUksUUFBUSxFQUFFLENBQUM7UUFFOUIsTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUN4QixNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBRWxC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R0FBRyxFQUFFLEVBQUUsRUFBRSxHQUFHLE9BQU8sRUFBRSxPQUFPLEVBQUUsR0FBRyxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBRWxFLE1BQU0sb0JBQW9CLEdBQUcsR0FBRyxFQUFFO1FBQzlCLE9BQU8sSUFBSSxZQUFZLENBQUM7WUFDcEIsYUFBYSxFQUFFLElBQUk7WUFDbkIsUUFBUTtZQUNSLFNBQVM7WUFDVCxPQUFPO1lBQ1AsT0FBTyxFQUFFO2dCQUNMLDhDQUE4QyxFQUFFO2FBQ25EO1NBQ0osQ0FBQyxDQUFDO0lBQ1AsQ0FBQyxDQUFDO0lBRUYsTUFBTSxNQUFNLEdBQUcsT0FBTyxDQUFDLE1BQU0sRUFBRSxDQUFDO0lBQ2hDLE1BQU0sWUFBWSxHQUFHLG9CQUFvQixFQUFFLENBQUM7SUFDNUMsTUFBTSxZQUFZLENBQUMsS0FBSyxFQUFFLENBQUM7SUFDM0IsWUFBWSxDQUFDLGVBQWUsQ0FBQyxFQUFFLEdBQUcsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFDekQsTUFBTSxDQUFDLE1BQU0sQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7QUFDNUIsQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiYXN5bmMgKHJlcSwgcmVzLCBuZXh0LCB7IGRlZXAsIHJlcXVpcmUsIGdxbCB9KSA9PiB7XG4gICAgY29uc3QgeyBQYXNzVGhyb3VnaCwgUmVhZGFibGUgfSA9IHJlcXVpcmUoJ3N0cmVhbScpO1xuICAgIGNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XG4gICAgY29uc3QgaHR0cCA9IHJlcXVpcmUoJ2h0dHAnKTtcbiAgICBjb25zdCBBcG9sbG9TZXJ2ZXIgPSByZXF1aXJlKCdhcG9sbG8tc2VydmVyLWV4cHJlc3MnKS5BcG9sbG9TZXJ2ZXI7XG4gICAgY29uc3QgeyBBcG9sbG9TZXJ2ZXJQbHVnaW5EcmFpbkh0dHBTZXJ2ZXIsIEFwb2xsb1NlcnZlclBsdWdpbkxhbmRpbmdQYWdlR3JhcGhRTFBsYXlncm91bmQgfSA9IHJlcXVpcmUoJ2Fwb2xsby1zZXJ2ZXItY29yZScpO1xuICAgIGNvbnN0IGF4aW9zID0gcmVxdWlyZSgnYXhpb3MnKTtcbiAgICBjb25zdCBmZm1wZWcgPSByZXF1aXJlKCdmbHVlbnQtZmZtcGVnJyk7XG4gICAgY29uc3QgRm9ybURhdGEgPSByZXF1aXJlKCdmb3JtLWRhdGEnKTtcblxuICAgIGZ1bmN0aW9uIGJhc2U2NFRvU3RyZWFtKGJhc2U2NFN0cmluZykge1xuICAgICAgICBjb25zdCBiYXNlNjREYXRhID0gYmFzZTY0U3RyaW5nLnJlcGxhY2UoL15kYXRhOlteO10rO2Jhc2U2NCwvLCAnJyk7XG4gICAgICAgIGNvbnN0IGJpbmFyeURhdGEgPSBCdWZmZXIuZnJvbShiYXNlNjREYXRhLCAnYmFzZTY0Jyk7XG4gICAgICAgIGNvbnN0IHN0cmVhbSA9IG5ldyBSZWFkYWJsZSgpO1xuXG4gICAgICAgIHN0cmVhbS5wdXNoKGJpbmFyeURhdGEpO1xuICAgICAgICBzdHJlYW0ucHVzaChudWxsKTtcblxuICAgICAgICByZXR1cm4gc3RyZWFtO1xuICAgIH1cblxuICAgIGNvbnN0IHR5cGVEZWZzID0gYFxuICAgICAgICBpbnB1dCBWb2ljZSB7XG4gICAgICAgICAgICBpZDogSW50IVxuICAgICAgICAgICAgcmVjb3JkOiBTdHJpbmchXG4gICAgICAgICAgICBkdXJhdGlvbjogRmxvYXQhXG4gICAgICAgICAgICBtaW1lVHlwZTogU3RyaW5nIVxuICAgICAgICB9XG4gICAgICAgIHR5cGUgUXVlcnkgeyBkZWVwbWVtb191cGxvYWQodm9pY2U6IFZvaWNlISk6IFN0cmluZyB9XG4gICAgYDtcblxuICAgIGNvbnN0IHJlc29sdmVycyA9IHtcbiAgICAgICAgUXVlcnk6IHsgZGVlcG1lbW9fdXBsb2FkOiBhc3luYyAocGFyZW50LCB7IHZvaWNlOiB7XG4gICAgICAgICAgICBpZCwgcmVjb3JkLCBkdXJhdGlvbiwgbWltZVR5cGVcbiAgICAgICAgfSB9LCBjb250ZXh0VmFsdWUsIGluZm8pID0+IHtcbiAgICAgICAgICAgIGxldCBpbnB1dEZvcm1hdDtcbiAgICAgICAgICAgIGlmIChtaW1lVHlwZS5pbmNsdWRlcygnYXVkaW8vd2VibScpKSB7XG4gICAgICAgICAgICAgICAgaW5wdXRGb3JtYXQgPSAnd2VibSc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG1pbWVUeXBlLmluY2x1ZGVzKCdhdWRpby9hYWMnKSkge1xuICAgICAgICAgICAgICAgIGlucHV0Rm9ybWF0ID0gJ2FhYyc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG1pbWVUeXBlLmluY2x1ZGVzKCdhdWRpby9tcDQnKSkge1xuICAgICAgICAgICAgICAgIGlucHV0Rm9ybWF0ID0gJ21wNCc7XG4gICAgICAgICAgICB9IGVsc2UgcmV0dXJuICdub3Qgc3VwcG9ydGVkIHR5cGUnO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXMsIHJlaikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzdHJlYW0gPSBuZXcgUGFzc1Rocm91Z2goKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNodW5rRGF0YSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBzdHJlYW0ub24oJ2RhdGEnLCBjaHVuayA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaHVua0RhdGEucHVzaChjaHVuayk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBmZm1wZWcoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmlucHV0KGJhc2U2NFRvU3RyZWFtKHJlY29yZCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAuaW5wdXRGb3JtYXQoaW5wdXRGb3JtYXQpXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAub3V0cHV0KHN0cmVhbSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vdXRwdXRGb3JtYXQoJ21wMycpXG4gICAgICAgICAgICAgICAgICAgICAgICAub24oJ2VuZCcsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJlYW0uZW5kKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYnl0ZUFycmF5ID0gQnVmZmVyLmNvbmNhdChjaHVua0RhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZvcm0gPSBuZXcgRm9ybURhdGEoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtLmFwcGVuZCgnZmlsZScsIGJ5dGVBcnJheSwgeyB0eXBlOiAnYXVkaW8vbXAzJywgZmlsZW5hbWU6IGAke2lkfS5tcDNgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF4aW9zLnBvc3QoYGh0dHA6Ly8ke2RlZXAuY2xpZW50LnBhdGguc2xpY2UoMCwgLTQpfS9maWxlYCwgZm9ybSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5rSWQ6IGlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogY29udGV4dFZhbHVlPy5oZWFkZXJzPy5hdXRob3JpemF0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gJ0NvbnRlbnQtTGVuZ3RoJzogZGF0YUFzU3RyaW5nLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICdDb250ZW50LVR5cGUnOiAnbXVsdGlwYXJ0L2Zvcm0tZGF0YSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICdDb250ZW50LVR5cGUnOiAnYXVkaW8vbXAzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmZvcm0uZ2V0SGVhZGVycygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMoJ2RvbmUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqKCdlcnJvcicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAucGlwZShzdHJlYW0sIHsgZW5kOiB0cnVlIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gLnJ1bigpO1xuICAgICAgICAgICAgICAgIC8vIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gfSxcbiAgICB9O1xuICAgIFxuICAgIGNvbnN0IGNvbnRleHQgPSAoeyByZXEgfSkgPT4geyByZXR1cm4geyBoZWFkZXJzOiByZXEuaGVhZGVycyB9OyB9O1xuICAgIFxuICAgIGNvbnN0IGdlbmVyYXRlQXBvbGxvU2VydmVyID0gKCkgPT4ge1xuICAgICAgICByZXR1cm4gbmV3IEFwb2xsb1NlcnZlcih7XG4gICAgICAgICAgICBpbnRyb3NwZWN0aW9uOiB0cnVlLFxuICAgICAgICAgICAgdHlwZURlZnMsIFxuICAgICAgICAgICAgcmVzb2x2ZXJzLFxuICAgICAgICAgICAgY29udGV4dCxcbiAgICAgICAgICAgIHBsdWdpbnM6IFtcbiAgICAgICAgICAgICAgICBBcG9sbG9TZXJ2ZXJQbHVnaW5MYW5kaW5nUGFnZUdyYXBoUUxQbGF5Z3JvdW5kKCksXG4gICAgICAgICAgICBdLFxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcbiAgICBjb25zdCBhcG9sbG9TZXJ2ZXIgPSBnZW5lcmF0ZUFwb2xsb1NlcnZlcigpO1xuICAgIGF3YWl0IGFwb2xsb1NlcnZlci5zdGFydCgpO1xuICAgIGFwb2xsb1NlcnZlci5hcHBseU1pZGRsZXdhcmUoeyBhcHA6IHJvdXRlciwgcGF0aDogJy8nIH0pO1xuICAgIHJvdXRlci5oYW5kbGUocmVxLCByZXMpO1xufSJdfQ==",
          "link_id": 1890
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 1943,
      "src_id": 1911,
      "handler_id": 1912,
      "execution_provider_id": 33,
      "isolation_provider_id": 81,
      "dist": {
        "id": 1943,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 727,
          "value": "async ({ deep, data: { newLink, oldLink } }) => {\n    await deep.unsafe.hasura.query({\n        type: 'untrack_table',\n        args: {\n            table: {\n                schema: 'public',\n                name: `semantic`,\n            },\n            cascade: true,\n        },\n    });\n    await deep.unsafe.hasura.sql(`\ndrop view semantic;\ndrop view semantic_types;\n    `);\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRSxFQUFFLEVBQUUsRUFBRTtJQUMzQyxNQUFNLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQztRQUMzQixJQUFJLEVBQUUsZUFBZTtRQUNyQixJQUFJLEVBQUU7WUFDRixLQUFLLEVBQUU7Z0JBQ0gsTUFBTSxFQUFFLFFBQVE7Z0JBQ2hCLElBQUksRUFBRSxVQUFVO2FBQ25CO1lBQ0QsT0FBTyxFQUFFLElBQUk7U0FDaEI7S0FDSixDQUFDLENBQUM7SUFDSCxNQUFNLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQzs7O0tBRzVCLENBQUMsQ0FBQztBQUNQLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImFzeW5jICh7IGRlZXAsIGRhdGE6IHsgbmV3TGluaywgb2xkTGluayB9IH0pID0+IHtcbiAgICBhd2FpdCBkZWVwLnVuc2FmZS5oYXN1cmEucXVlcnkoe1xuICAgICAgICB0eXBlOiAndW50cmFja190YWJsZScsXG4gICAgICAgIGFyZ3M6IHtcbiAgICAgICAgICAgIHRhYmxlOiB7XG4gICAgICAgICAgICAgICAgc2NoZW1hOiAncHVibGljJyxcbiAgICAgICAgICAgICAgICBuYW1lOiBgc2VtYW50aWNgLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNhc2NhZGU6IHRydWUsXG4gICAgICAgIH0sXG4gICAgfSk7XG4gICAgYXdhaXQgZGVlcC51bnNhZmUuaGFzdXJhLnNxbChgXG5kcm9wIHZpZXcgc2VtYW50aWM7XG5kcm9wIHZpZXcgc2VtYW50aWNfdHlwZXM7XG4gICAgYCk7XG59Il19",
          "link_id": 1943
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 1952,
      "src_id": 1913,
      "handler_id": 1914,
      "execution_provider_id": 33,
      "isolation_provider_id": 81,
      "dist": {
        "id": 1952,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 730,
          "value": "async ({ deep, data: { newLink, oldLink } }) => {\n    await deep.unsafe.hasura.sql(`\nCREATE OR REPLACE VIEW \"public\".\"semantic_types\" AS \n  SELECT\n    instance.id AS id,\n    instance.type_id AS type_id,\n    instance.from_id AS from_id,\n    (CASE WHEN instance.from_id = 0 THEN 0 ELSE (\n      SELECT type_id FROM links WHERE id = instance.from_id\n    ) END) as type_from_id,\n    instance.to_id AS to_id,\n    (CASE WHEN instance.from_id = 0 THEN 0 ELSE (\n      SELECT type_id FROM links WHERE id = instance.to_id\n    ) END) as type_to_id\n  FROM\n    links instance\n  WHERE instance.type_id != 0\n ;\n    `);\n    await deep.unsafe.hasura.sql(`\nCREATE OR REPLACE VIEW \"public\".\"semantic\" AS \n  SELECT DISTINCT ON (cst.type_id, cst.type_from_id, cst.type_to_id)\n    cst.type_id as type_id, cst.type_from_id as type_from_id, cst.type_to_id as type_to_id,\n    (\n      SELECT count(*) FROM semantic_types as st WHERE\n      st.type_id = cst.type_id AND\n      st.type_from_id = cst.type_from_id AND\n      st.type_to_id = cst.type_to_id\n    ) AS count\n  FROM semantic_types as cst\n;\n    `);\n    await deep.unsafe.hasura.query({\n        type: 'track_table',\n        args: {\n            schema: 'public',\n            name: `semantic`,\n        },\n    });\n    return 'ok';\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRSxFQUFFLEVBQUUsRUFBRTtJQUMzQyxNQUFNLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7S0FpQjVCLENBQUMsQ0FBQztJQUNILE1BQU0sSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDOzs7Ozs7Ozs7Ozs7S0FZNUIsQ0FBQyxDQUFDO0lBQ0gsTUFBTSxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUM7UUFDM0IsSUFBSSxFQUFFLGFBQWE7UUFDbkIsSUFBSSxFQUFFO1lBQ0YsTUFBTSxFQUFFLFFBQVE7WUFDaEIsSUFBSSxFQUFFLFVBQVU7U0FDbkI7S0FDSixDQUFDLENBQUM7SUFDSCxPQUFPLElBQUksQ0FBQztBQUNoQixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJhc3luYyAoeyBkZWVwLCBkYXRhOiB7IG5ld0xpbmssIG9sZExpbmsgfSB9KSA9PiB7XG4gICAgYXdhaXQgZGVlcC51bnNhZmUuaGFzdXJhLnNxbChgXG5DUkVBVEUgT1IgUkVQTEFDRSBWSUVXIFwicHVibGljXCIuXCJzZW1hbnRpY190eXBlc1wiIEFTIFxuICBTRUxFQ1RcbiAgICBpbnN0YW5jZS5pZCBBUyBpZCxcbiAgICBpbnN0YW5jZS50eXBlX2lkIEFTIHR5cGVfaWQsXG4gICAgaW5zdGFuY2UuZnJvbV9pZCBBUyBmcm9tX2lkLFxuICAgIChDQVNFIFdIRU4gaW5zdGFuY2UuZnJvbV9pZCA9IDAgVEhFTiAwIEVMU0UgKFxuICAgICAgU0VMRUNUIHR5cGVfaWQgRlJPTSBsaW5rcyBXSEVSRSBpZCA9IGluc3RhbmNlLmZyb21faWRcbiAgICApIEVORCkgYXMgdHlwZV9mcm9tX2lkLFxuICAgIGluc3RhbmNlLnRvX2lkIEFTIHRvX2lkLFxuICAgIChDQVNFIFdIRU4gaW5zdGFuY2UuZnJvbV9pZCA9IDAgVEhFTiAwIEVMU0UgKFxuICAgICAgU0VMRUNUIHR5cGVfaWQgRlJPTSBsaW5rcyBXSEVSRSBpZCA9IGluc3RhbmNlLnRvX2lkXG4gICAgKSBFTkQpIGFzIHR5cGVfdG9faWRcbiAgRlJPTVxuICAgIGxpbmtzIGluc3RhbmNlXG4gIFdIRVJFIGluc3RhbmNlLnR5cGVfaWQgIT0gMFxuIDtcbiAgICBgKTtcbiAgICBhd2FpdCBkZWVwLnVuc2FmZS5oYXN1cmEuc3FsKGBcbkNSRUFURSBPUiBSRVBMQUNFIFZJRVcgXCJwdWJsaWNcIi5cInNlbWFudGljXCIgQVMgXG4gIFNFTEVDVCBESVNUSU5DVCBPTiAoY3N0LnR5cGVfaWQsIGNzdC50eXBlX2Zyb21faWQsIGNzdC50eXBlX3RvX2lkKVxuICAgIGNzdC50eXBlX2lkIGFzIHR5cGVfaWQsIGNzdC50eXBlX2Zyb21faWQgYXMgdHlwZV9mcm9tX2lkLCBjc3QudHlwZV90b19pZCBhcyB0eXBlX3RvX2lkLFxuICAgIChcbiAgICAgIFNFTEVDVCBjb3VudCgqKSBGUk9NIHNlbWFudGljX3R5cGVzIGFzIHN0IFdIRVJFXG4gICAgICBzdC50eXBlX2lkID0gY3N0LnR5cGVfaWQgQU5EXG4gICAgICBzdC50eXBlX2Zyb21faWQgPSBjc3QudHlwZV9mcm9tX2lkIEFORFxuICAgICAgc3QudHlwZV90b19pZCA9IGNzdC50eXBlX3RvX2lkXG4gICAgKSBBUyBjb3VudFxuICBGUk9NIHNlbWFudGljX3R5cGVzIGFzIGNzdFxuO1xuICAgIGApO1xuICAgIGF3YWl0IGRlZXAudW5zYWZlLmhhc3VyYS5xdWVyeSh7XG4gICAgICAgIHR5cGU6ICd0cmFja190YWJsZScsXG4gICAgICAgIGFyZ3M6IHtcbiAgICAgICAgICAgIHNjaGVtYTogJ3B1YmxpYycsXG4gICAgICAgICAgICBuYW1lOiBgc2VtYW50aWNgLFxuICAgICAgICB9LFxuICAgIH0pO1xuICAgIHJldHVybiAnb2snO1xufSJdfQ==",
          "link_id": 1952
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 2643,
      "src_id": 2639,
      "handler_id": 2759,
      "execution_provider_id": 33,
      "isolation_provider_id": 144,
      "dist": {
        "id": 2643,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 791,
          "value": "({ deep, data, require, Go }) => {\n    const { MdEdit, MdPreview, MdSaveAlt } = require(\"react-icons/md\");\n    const React = require('react');\n    const { TypedIcon, DownIcon, UpIcon, TypeIcon, InIcon, OutIcon, FromIcon, ToIcon, } = require('@deep-foundation/perception-app');\n    const c = require('@chakra-ui/react');\n    const dpl = '@deep-foundation/perception-links';\n    const dc = '@deep-foundation/core';\n    const Stack = deep.idLocal(dpl, 'Stack');\n    const Selector = deep.idLocal(dc, 'Selector');\n    const Promise = deep.idLocal(dc, 'Promise');\n    const Rejected = deep.idLocal(dc, 'Rejected');\n    const promiseTree = deep.idLocal(dc, 'promiseTree');\n    const Value = deep.idLocal(dc, 'Value');\n    const String = deep.idLocal(dc, 'String');\n    const Number = deep.idLocal(dc, 'Number');\n    const Object = deep.idLocal(dc, 'Object');\n    const File = deep.idLocal(dc, 'File');\n    const Query = deep.idLocal(dc, 'Query');\n    const Contain = deep.idLocal(dc, 'Contain');\n    const History = deep.idLocal(dpl, 'History');\n    const Header = deep.idLocal(dpl, 'Header');\n    const TreeLink = deep.idLocal(dpl, 'TreeLink');\n    const TreeList = deep.idLocal(dpl, 'TreeList');\n    const TreeEditor = deep.idLocal(dpl, 'TreeEditor');\n    const TreeQuery = deep.idLocal(dpl, 'TreeQuery');\n    const TreeLinkInsert = deep.idLocal(dpl, 'TreeLinkInsert');\n    const TreeLinkDelete = deep.idLocal(dpl, 'TreeLinkDelete');\n    const TreeLinkButton = deep.idLocal(dpl, 'TreeLinkButton');\n    return ({ go, handlerId, isActive, isConcentrated, operations = true, fullWidth = null, }, ref) => {\n        const valueType = React.useMemo(() => go.link?.type?.outByType[Value]?.[0]?.to_id, [go]);\n        const fromDisclosure = c.useDisclosure();\n        const toDisclosure = c.useDisclosure();\n        const queries = React.useMemo(() => ({\n            'parents': ({ out: { type_id: Contain, to_id: go.linkId }, order_by: { id: 'desc' } }),\n            'contains': ({ in: { type_id: Contain, from_id: go.linkId }, order_by: { id: 'desc' } }),\n            'out': ({ from_id: go.linkId, order_by: { id: 'desc' } }),\n            'typed': ({ type_id: go.linkId, order_by: { id: 'desc' } }),\n            'in': ({ to_id: go.linkId, order_by: { id: 'desc' } }),\n            'selectors': ({ type_id: Selector, selected: { item_id: { _eq: go.linkId } }, order_by: { id: 'desc' } }),\n            'selected': ({ selected: { selector_id: { _eq: go.linkId } }, order_by: { id: 'desc' } }),\n            'promises': ({ type_id: Promise, up: { tree_id: { _eq: promiseTree }, parent_id: { _eq: go.linkId } }, order_by: { id: 'desc' } }),\n            'rejects': ({ type_id: Rejected, up: { tree_id: { _eq: promiseTree }, parent_id: { _eq: go.linkId } }, order_by: { id: 'desc' } }),\n        }), []);\n        const [query, setQuery] = React.useState(null);\n        const { data: links } = deep.useQuery(query || {}, { skip: !query });\n        const column = React.createElement(c.VStack, { position: 'relative', minW: fullWidth || '30em', maxW: fullWidth || '30em', h: '100%', spacing: 1, bg: isActive ? 'deepBgDark' : null },\n            React.createElement(c.Flex, { w: '100%' },\n                React.createElement(go.Handler, { handlerId: TreeLinkButton, linkId: go.linkId, flex: '1', onClick: () => go.focus('current').go.do('exec'), needParent: false, isActive: go.value === 'current' }),\n                React.createElement(c.Button, { minW: '3e,', w: '3em', h: '100%', minH: '3em', p: '0', onClick: () => go.focus('close').go.do('close'), variant: go.value === 'close' ? 'active' : null }, \"x\")),\n            React.createElement(c.SimpleGrid, { spacing: 1, w: '100%', columns: 2 + (operations ? 2 : 0) },\n                React.createElement(c.Button, { variant: go.value === 'parents' ? 'active' : null, justifyContent: 'center', onClick: () => go.focus('parents').go.do('parents') },\n                    React.createElement(c.Text, { pr: 1 }, \"\\uD83D\\uDDC2\\uFE0F\"),\n                    \" parents\"),\n                React.createElement(c.Button, { variant: go.value === 'contains' ? 'active' : null, justifyContent: 'center', onClick: () => go.focus('contains').go.do('contains') },\n                    React.createElement(c.Text, { pr: 1 }, \"\\uD83D\\uDDC2\\uFE0F\"),\n                    \" contains\"),\n                operations && React.createElement(React.Fragment, null,\n                    React.createElement(go.Provider, { linkId: TreeLinkInsert },\n                        React.createElement(go.Handler, { isActive: go.value === 'insert' ? go.ref : null, handlerId: TreeLinkInsert, defaultContainerId: go.linkId, defaultTypeId: 1 })),\n                    React.createElement(go.Provider, { linkId: TreeLinkDelete },\n                        React.createElement(go.Handler, { isActive: go.value === 'delete' ? go.ref : null, handlerId: TreeLinkDelete, linkId: go.linkId })))),\n            (!!go.link.type_id === 1 || !!go.link.from_id) && React.createElement(go.Component, { path: [dpl, 'Finder'], disclosure: fromDisclosure, initialId: go.link.from_id, initialHandlerId: TreeList, onSubmit: (id) => {\n                    deep.update(go.linkId, { from_id: id });\n                    fromDisclosure.onClose();\n                } }),\n            (!!go.link.type_id === 1 || !!go.link.to_id) && React.createElement(go.Component, { path: [dpl, 'Finder'], disclosure: toDisclosure, initialId: go.link.to_id, initialHandlerId: TreeList, onSubmit: (id) => {\n                    deep.update(go.linkId, { to_id: id });\n                    toDisclosure.onClose();\n                } }),\n            [React.createElement(go.Query, { key: `${fromDisclosure.isOpen}${toDisclosure.isOpen}`, query: { id: go.linkId } })],\n            React.createElement(c.SimpleGrid, { spacing: 1, w: '100%', columns: 3 },\n                React.createElement(c.Flex, null,\n                    React.createElement(c.Button, { variant: go.value === 'edit-from' ? 'active' : undefined, justifyContent: 'right', textAlign: 'right', h: '3em', disabled: !go.link?.from_id, onClick: () => go.focus('edit-from').go.do('edit-from') },\n                        React.createElement(c.Box, null,\n                            React.createElement(MdEdit, null))),\n                    React.createElement(c.Button, { variant: go.value === 'from' ? 'active' : undefined, justifyContent: 'right', textAlign: 'right', flex: '1', h: '3em', onClick: () => go.focus('from').go.do('from'), rightIcon: React.createElement(FromIcon, null), overflow: 'hidden' },\n                        React.createElement(c.Box, null,\n                            React.createElement(c.Text, null, \"from\"),\n                            React.createElement(c.Box, null,\n                                React.createElement(c.Text, { fontSize: 'xs' },\n                                    go.link?.from?.symbol,\n                                    \" \",\n                                    !!go.link?.from && go.link.from.name,\n                                    \" \",\n                                    go.link?.from_id))))),\n                React.createElement(c.Button, { variant: go.value === 'type' ? 'active' : undefined, disabled: !go.link?.type_id, leftIcon: React.createElement(TypeIcon, null), onClick: () => go.focus('type').go.do('type'), h: '3em', overflow: 'hidden' },\n                    React.createElement(c.Box, null,\n                        React.createElement(c.Text, null, \"type\"),\n                        React.createElement(c.Box, null,\n                            React.createElement(c.Text, { fontSize: 'xs' },\n                                go.link?.type?.symbol,\n                                \" \",\n                                !!go.link?.type && go.link.type.name,\n                                \" \",\n                                go.link?.type_id)))),\n                React.createElement(c.Flex, null,\n                    React.createElement(c.Button, { variant: go.value === 'to' ? 'active' : undefined, justifyContent: 'left', textAlign: 'left', flex: '1', h: '3em', rightIcon: React.createElement(ToIcon, null), onClick: () => go.focus('to').go.do('to'), overflow: 'hidden' },\n                        React.createElement(c.Box, null,\n                            React.createElement(c.Text, null, \"to\"),\n                            React.createElement(c.Box, null,\n                                React.createElement(c.Text, { fontSize: 'xs' },\n                                    go.link?.to?.symbol,\n                                    \" \",\n                                    !!go.link?.to && go.link.to.name,\n                                    \" \",\n                                    go.link?.to_id)))),\n                    React.createElement(c.Button, { variant: go.value === 'edit-to' ? 'active' : undefined, justifyContent: 'right', textAlign: 'right', h: '3em', disabled: !go.link?.to_id, onClick: () => go.focus('edit-to').go.do('edit-to') },\n                        React.createElement(c.Box, null,\n                            React.createElement(MdEdit, null))))),\n            React.createElement(c.SimpleGrid, { spacing: 1, w: '100%', columns: 5 },\n                React.createElement(c.Button, { variant: go.value === 'up-tree' ? 'active' : undefined, justifyContent: 'center', onClick: () => go.focus('up-tree').go.do('up-tree'), leftIcon: React.createElement(UpIcon, null) },\n                    React.createElement(c.Text, null, \"up\")),\n                React.createElement(c.Button, { variant: go.value === 'out' ? 'active' : undefined, justifyContent: 'left', textAlign: 'left', onClick: () => go.focus('out').go.do('out'), leftIcon: React.createElement(OutIcon, null) },\n                    React.createElement(c.Text, null, \"out\")),\n                React.createElement(c.Button, { variant: go.value === 'typed' ? 'active' : undefined, onClick: () => go.focus('typed').go.do('typed'), leftIcon: React.createElement(TypedIcon, null) },\n                    React.createElement(c.Text, null, \"typed\")),\n                React.createElement(c.Button, { variant: go.value === 'in' ? 'active' : undefined, justifyContent: 'right', textAlign: 'right', onClick: () => go.focus('in').go.do('in'), rightIcon: React.createElement(InIcon, null) },\n                    React.createElement(c.Text, null, \"in\")),\n                React.createElement(c.Button, { variant: go.value === 'down-tree' ? 'active' : undefined, justifyContent: 'center', onClick: () => go.focus('down-tree').go.do('down-tree'), leftIcon: React.createElement(DownIcon, null) },\n                    React.createElement(c.Text, null, \"down\"))),\n            React.createElement(c.SimpleGrid, { spacing: 1, w: '100%', columns: 4 },\n                React.createElement(c.Button, { variant: go.value === 'selectors' ? 'active' : undefined, justifyContent: 'center', onClick: () => go.focus('selectors').go.do('selectors') },\n                    React.createElement(c.Text, { pr: 1 }, \"\\uD83E\\uDEA1\"),\n                    \" selectors\"),\n                React.createElement(c.Button, { variant: go.value === 'selected' ? 'active' : undefined, justifyContent: 'center', onClick: () => go.focus('selected').go.do('selected') },\n                    React.createElement(c.Text, { pr: 1 }, \"\\uD83E\\uDEA1\"),\n                    \" selected\"),\n                React.createElement(c.Button, { variant: go.value === 'promises' ? 'active' : undefined, justifyContent: 'center', onClick: () => go.focus('promises').go.do('promises') },\n                    React.createElement(c.Text, { pr: 1 }, \"\\uD83E\\uDD1E\"),\n                    \" promises\"),\n                React.createElement(c.Button, { variant: go.value === 'rejects' ? 'active' : undefined, justifyContent: 'center', onClick: () => go.focus('rejects').go.do('rejects') },\n                    React.createElement(c.Text, { pr: 1 }, \"\\uD83D\\uDD34\"),\n                    \" rejects\")),\n            React.createElement(c.SimpleGrid, { spacing: 1, w: '100%' },\n                !valueType && React.createElement(React.Fragment, null,\n                    React.createElement(c.Button, { variant: go.value === 'value' ? 'active' : undefined, bg: go.value === TreeEditor ? 'deepBgDark' : null, justifyContent: 'center', disabled: true }, \"type can't have Value\")),\n                valueType === String && React.createElement(React.Fragment, null,\n                    React.createElement(c.Button, { variant: go.value === 'value' ? 'active' : undefined, bg: go.value === TreeEditor ? 'deepBgDark' : null, justifyContent: 'center', onClick: () => go.focus('value').go.do('value') },\n                        React.createElement(c.Text, { pr: 1 },\n                            \"\\\"\\\".length === \",\n                            go.link?.value?.value?.length || 0),\n                        \" string\")),\n                valueType === Number && React.createElement(React.Fragment, null,\n                    React.createElement(c.Button, { variant: go.value === 'value' ? 'active' : undefined, bg: go.value === TreeEditor ? 'deepBgDark' : null, justifyContent: 'center', onClick: () => go.focus('value').go.do('value') },\n                        React.createElement(c.Text, { pr: 1 }, +go.link?.value?.value),\n                        \" number\")),\n                valueType === Object && React.createElement(React.Fragment, null,\n                    React.createElement(c.Button, { variant: go.value === 'value' ? 'active' : undefined, bg: go.value === TreeEditor ? 'deepBgDark' : null, justifyContent: 'center', onClick: () => go.focus('value').go.do('value') },\n                        React.createElement(c.Text, { pr: 1 }, `{...}`),\n                        \" object\"))),\n            go.value === TreeEditor && React.createElement(c.Box, { minW: fullWidth || '30em', maxW: fullWidth || '30em', flex: '1', position: 'relative' },\n                React.createElement(go.Handler, { handlerId: TreeEditor, linkId: go.linkId, fillSize: true, autoFocus: true })),\n            !!links?.length && React.createElement(go.Provider, { linkId: Stack },\n                React.createElement(go.Component, { path: [dpl, 'Stack'], links: links, direction: 'vertical', flex: '1' })));\n        const nav = go.useNav();\n        nav('current', 'left', 'up', 'close', 'contains');\n        if (isConcentrated !== false) {\n            nav('close', 'current', 'up', 'right', 'contains');\n            nav('parents', 'left', 'current', 'contains', 'type');\n            nav('contains', 'parents', 'current', 'insert', 'type');\n            nav('insert', 'contains', 'current', 'delete', 'type');\n            nav('delete', 'insert', 'close', 'right', 'type');\n            nav('edit-from', 'left', 'contains', 'from', 'up-tree');\n            nav('from', 'edit-from', 'contains', 'to', 'out');\n            nav('type', 'from', 'contains', 'to', 'typed');\n            nav('to', 'type', 'contains', 'edit-to', 'in');\n            nav('edit-to', 'to', 'contains', 'right', 'down-tree');\n            nav('up-tree', 'left', 'edit-from', 'out', 'selectors');\n            nav('out', 'up-tree', 'from', 'typed', 'selected');\n            nav('typed', 'out', 'type', 'in', 'promises');\n            nav('in', 'typed', 'to', 'down-tree', 'promises');\n            nav('down-tree', 'in', 'edit-to', 'right', 'rejects');\n            nav('selectors', 'left', 'up-tree', 'selected', 'value');\n            nav('selected', 'selectors', 'out', 'promises', 'value');\n            nav('promises', 'selected', 'in', 'rejects', 'value');\n            nav('rejects', 'promises', 'down-tree', 'right', 'value');\n            nav('value', 'left', 'promises', 'right', Stack);\n            nav(Stack, 'left', 'value', 'right', 'down');\n        }\n        const openLink = async (id) => {\n            !!id && go.go.do('open', { handlerId: TreeLink, id: id, prevId: go.linkId });\n            await go.go.await(id);\n            go.go.focus(id);\n        };\n        const deconcentrated = React.createElement(c.Button, { h: '100%', w: '3em', pt: '1em', variant: isActive ? 'active' : undefined, alignItems: 'flex-start' }, go?.link?.symbol);\n        const content = isConcentrated === false ? deconcentrated : column;\n        return React.createElement(go.On, { do: {\n                focus: (g, v, linkId, o) => !go.value && go.focus('current'),\n                use: (g, v, o) => o?.id && go.value === Stack ? (go(Stack).do('use', o)) : (go.set('current')),\n                close: (g, v, o) => go.go.do('close', { id: go.linkId }),\n                exec: (g, v, o) => o?.id ? go.go.do('open', { id: o.id, prevId: go.linkId, focus: true }) : go.value && go.do(go.value, o),\n                left: (g, v, o) => go.focus(nav.get(go.value || 'current', 'left'), { prev: go.value }),\n                up: (g, v, o) => go.focus(nav.get(go.value || 'current', 'up'), { prev: go.value }),\n                right: (g, v, o) => go.focus(nav.get(go.value || 'current', 'right'), { prev: go.value }),\n                down: (g, v, o) => go.focus(nav.get(go.value || 'current', 'down'), { prev: go.value }),\n                'current': () => { },\n                'parents': () => setQuery({ ...queries.parents, limit: 100 }),\n                'contains': () => setQuery({ ...queries.contains, limit: 100 }),\n                'edit-from': () => fromDisclosure.onOpen(),\n                'from': () => openLink(go.link.from_id),\n                'type': () => openLink(go.link.type_id),\n                'to': () => openLink(go.link.to_id),\n                'edit-to': () => toDisclosure.onOpen(),\n                'up-tree': () => { },\n                'out': () => setQuery({ ...queries.out, limit: 100 }),\n                'typed': () => setQuery({ ...queries.typed, limit: 100 }),\n                'in': () => setQuery({ ...queries.in, limit: 100 }),\n                'down-tree': () => { },\n                'selectors': () => setQuery({ ...queries.selectors, limit: 100 }),\n                'selected': () => setQuery({ ...queries.selected, limit: 100 }),\n                'promises': () => setQuery({ ...queries.promises, limit: 100 }),\n                'rejects': () => setQuery({ ...queries.rejects, limit: 100 }),\n                'value': () => {\n                    setQuery(null);\n                    go.focus(go.value === TreeEditor ? 'value' : TreeEditor);\n                },\n                [Stack]: (g, v, o) => openLink(o?.id),\n            }, focus: {\n                up: (q, v, o) => go.set().go?.go?.do('up'),\n                down: (q, v, o) => go.set().go?.go?.do('down'),\n                left: (q, v, o) => go.set(o?.left).go?.go?.do('left'),\n                right: (q, v, o) => go.set(o?.right).go?.go?.do('right'),\n            } },\n            React.createElement(c.HStack, { ref: ref, h: '100%', overflow: 'hidden' }, content));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxDQUFDLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRTtJQUM5QixNQUFNLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztJQUNuRSxNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7SUFFL0IsTUFBTSxFQUNKLFNBQVMsRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLEdBQ3pFLEdBQUcsT0FBTyxDQUFDLGlDQUFpQyxDQUFDLENBQUM7SUFFL0MsTUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLGtCQUFrQixDQUFDLENBQUM7SUFFdEMsTUFBTSxHQUFHLEdBQUcsbUNBQW1DLENBQUM7SUFDaEQsTUFBTSxFQUFFLEdBQUcsdUJBQXVCLENBQUM7SUFFbkMsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDekMsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsVUFBVSxDQUFDLENBQUM7SUFDOUMsTUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsU0FBUyxDQUFDLENBQUM7SUFDNUMsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsVUFBVSxDQUFDLENBQUM7SUFDOUMsTUFBTSxXQUFXLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsYUFBYSxDQUFDLENBQUM7SUFDcEQsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDeEMsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsUUFBUSxDQUFDLENBQUM7SUFDMUMsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsUUFBUSxDQUFDLENBQUM7SUFDMUMsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsUUFBUSxDQUFDLENBQUM7SUFDMUMsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDdEMsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDeEMsTUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsU0FBUyxDQUFDLENBQUM7SUFDNUMsTUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsU0FBUyxDQUFDLENBQUM7SUFDN0MsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsUUFBUSxDQUFDLENBQUM7SUFDM0MsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsVUFBVSxDQUFDLENBQUM7SUFDL0MsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsVUFBVSxDQUFDLENBQUM7SUFDL0MsTUFBTSxVQUFVLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsWUFBWSxDQUFDLENBQUM7SUFDbkQsTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsV0FBVyxDQUFDLENBQUM7SUFDakQsTUFBTSxjQUFjLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQztJQUMzRCxNQUFNLGNBQWMsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxnQkFBZ0IsQ0FBQyxDQUFDO0lBQzNELE1BQU0sY0FBYyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLGdCQUFnQixDQUFDLENBQUM7SUFFM0QsT0FBTyxDQUFDLEVBQ04sRUFBRSxFQUNGLFNBQVMsRUFFVCxRQUFRLEVBQ1IsY0FBYyxFQUVkLFVBQVUsR0FBRyxJQUFJLEVBQ2pCLFNBQVMsR0FBRyxJQUFJLEdBQ2pCLEVBQUUsR0FBRyxFQUFFLEVBQUU7UUFDUixNQUFNLFNBQVMsR0FBRyxLQUFLLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLFNBQVMsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFFekYsTUFBTSxjQUFjLEdBQUcsQ0FBQyxDQUFDLGFBQWEsRUFBRSxDQUFDO1FBQ3pDLE1BQU0sWUFBWSxHQUFHLENBQUMsQ0FBQyxhQUFhLEVBQUUsQ0FBQztRQUV2QyxNQUFNLE9BQU8sR0FBRyxLQUFLLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUM7WUFDbkMsU0FBUyxFQUFFLENBQUMsRUFBRSxHQUFHLEVBQUUsRUFBRSxPQUFPLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxFQUFFLENBQUMsTUFBTSxFQUFFLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBRSxFQUFFLE1BQU0sRUFBRSxFQUFFLENBQUM7WUFDdEYsVUFBVSxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRSxFQUFFLENBQUMsTUFBTSxFQUFFLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBRSxFQUFFLE1BQU0sRUFBRSxFQUFFLENBQUM7WUFDeEYsS0FBSyxFQUFFLENBQUMsRUFBRSxPQUFPLEVBQUUsRUFBRSxDQUFDLE1BQU0sRUFBRSxRQUFRLEVBQUUsRUFBRSxFQUFFLEVBQUUsTUFBTSxFQUFFLEVBQUUsQ0FBQztZQUN6RCxPQUFPLEVBQUUsQ0FBQyxFQUFFLE9BQU8sRUFBRSxFQUFFLENBQUMsTUFBTSxFQUFFLFFBQVEsRUFBRSxFQUFFLEVBQUUsRUFBRSxNQUFNLEVBQUUsRUFBRSxDQUFDO1lBQzNELElBQUksRUFBRSxDQUFDLEVBQUUsS0FBSyxFQUFFLEVBQUUsQ0FBQyxNQUFNLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBRSxFQUFFLE1BQU0sRUFBRSxFQUFFLENBQUM7WUFDdEQsV0FBVyxFQUFFLENBQUMsRUFBRSxPQUFPLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxFQUFFLE9BQU8sRUFBRSxFQUFFLEdBQUcsRUFBRSxFQUFFLENBQUMsTUFBTSxFQUFFLEVBQUUsRUFBRSxRQUFRLEVBQUUsRUFBRSxFQUFFLEVBQUUsTUFBTSxFQUFFLEVBQUUsQ0FBQztZQUN6RyxVQUFVLEVBQUUsQ0FBQyxFQUFFLFFBQVEsRUFBRSxFQUFFLFdBQVcsRUFBRSxFQUFFLEdBQUcsRUFBRSxFQUFFLENBQUMsTUFBTSxFQUFFLEVBQUUsRUFBRSxRQUFRLEVBQUUsRUFBRSxFQUFFLEVBQUUsTUFBTSxFQUFFLEVBQUUsQ0FBQztZQUN6RixVQUFVLEVBQUUsQ0FBQyxFQUFFLE9BQU8sRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQUUsT0FBTyxFQUFFLEVBQUUsR0FBRyxFQUFFLFdBQVcsRUFBRSxFQUFFLFNBQVMsRUFBRSxFQUFFLEdBQUcsRUFBRSxFQUFFLENBQUMsTUFBTSxFQUFFLEVBQUUsRUFBRSxRQUFRLEVBQUUsRUFBRSxFQUFFLEVBQUUsTUFBTSxFQUFFLEVBQUUsQ0FBQztZQUNsSSxTQUFTLEVBQUUsQ0FBQyxFQUFFLE9BQU8sRUFBRSxRQUFRLEVBQUUsRUFBRSxFQUFFLEVBQUUsT0FBTyxFQUFFLEVBQUUsR0FBRyxFQUFFLFdBQVcsRUFBRSxFQUFFLFNBQVMsRUFBRSxFQUFFLEdBQUcsRUFBRSxFQUFFLENBQUMsTUFBTSxFQUFFLEVBQUUsRUFBRSxRQUFRLEVBQUUsRUFBRSxFQUFFLEVBQUUsTUFBTSxFQUFFLEVBQUUsQ0FBQztTQUNuSSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFFUixNQUFNLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxHQUFHLEtBQUssQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDL0MsTUFBTSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssSUFBSSxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDO1FBSXJFLE1BQU0sTUFBTSxHQUFHLG9CQUFDLENBQUMsQ0FBQyxNQUFNLElBQ3RCLFFBQVEsRUFBQyxVQUFVLEVBQUMsSUFBSSxFQUFFLFNBQVMsSUFBSSxNQUFNLEVBQUUsSUFBSSxFQUFFLFNBQVMsSUFBSSxNQUFNLEVBQUUsQ0FBQyxFQUFDLE1BQU0sRUFBQyxPQUFPLEVBQUUsQ0FBQyxFQUM3RixFQUFFLEVBQUUsUUFBUSxDQUFDLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLElBQUk7WUFFbEMsb0JBQUMsQ0FBQyxDQUFDLElBQUksSUFBQyxDQUFDLEVBQUMsTUFBTTtnQkFDZCxvQkFBQyxFQUFFLENBQUMsT0FBTyxJQUNULFNBQVMsRUFBRSxjQUFjLEVBQUUsTUFBTSxFQUFFLEVBQUUsQ0FBQyxNQUFNLEVBQUUsSUFBSSxFQUFDLEdBQUcsRUFDdEQsT0FBTyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsRUFDaEQsVUFBVSxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsRUFBRSxDQUFDLEtBQUssS0FBSyxTQUFTLEdBQ25EO2dCQUNGLG9CQUFDLENBQUMsQ0FBQyxNQUFNLElBQ1AsSUFBSSxFQUFDLEtBQUssRUFBQyxDQUFDLEVBQUMsS0FBSyxFQUFDLENBQUMsRUFBQyxNQUFNLEVBQUMsSUFBSSxFQUFDLEtBQUssRUFBQyxDQUFDLEVBQUMsR0FBRyxFQUM1QyxPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxFQUMvQyxPQUFPLEVBQUUsRUFBRSxDQUFDLEtBQUssS0FBSyxPQUFPLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsSUFBSSxRQUNwQyxDQUNOO1lBQ1Qsb0JBQUMsQ0FBQyxDQUFDLFVBQVUsSUFBQyxPQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBQyxNQUFNLEVBQUMsT0FBTyxFQUFFLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ2xFLG9CQUFDLENBQUMsQ0FBQyxNQUFNLElBQ1AsT0FBTyxFQUFFLEVBQUUsQ0FBQyxLQUFLLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLElBQUksRUFDakQsY0FBYyxFQUFDLFFBQVEsRUFDdkIsT0FBTyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxTQUFTLENBQUM7b0JBRW5ELG9CQUFDLENBQUMsQ0FBQyxJQUFJLElBQUMsRUFBRSxFQUFFLENBQUMseUJBQWM7K0JBQ2xCO2dCQUNYLG9CQUFDLENBQUMsQ0FBQyxNQUFNLElBQ1AsT0FBTyxFQUFFLEVBQUUsQ0FBQyxLQUFLLEtBQUssVUFBVSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLElBQUksRUFDbEQsY0FBYyxFQUFDLFFBQVEsRUFDdkIsT0FBTyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUM7b0JBRXJELG9CQUFDLENBQUMsQ0FBQyxJQUFJLElBQUMsRUFBRSxFQUFFLENBQUMseUJBQWM7Z0NBQ2xCO2dCQUNWLFVBQVUsSUFBSTtvQkFDYixvQkFBQyxFQUFFLENBQUMsUUFBUSxJQUFDLE1BQU0sRUFBRSxjQUFjO3dCQUNqQyxvQkFBQyxFQUFFLENBQUMsT0FBTyxJQUNULFFBQVEsRUFBRSxFQUFFLENBQUMsS0FBSyxLQUFLLFFBQVEsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUMvQyxTQUFTLEVBQUUsY0FBYyxFQUN6QixrQkFBa0IsRUFBRSxFQUFFLENBQUMsTUFBTSxFQUFFLGFBQWEsRUFBRSxDQUFDLEdBQy9DLENBQ1U7b0JBQ2Qsb0JBQUMsRUFBRSxDQUFDLFFBQVEsSUFBQyxNQUFNLEVBQUUsY0FBYzt3QkFDakMsb0JBQUMsRUFBRSxDQUFDLE9BQU8sSUFDVCxRQUFRLEVBQUUsRUFBRSxDQUFDLEtBQUssS0FBSyxRQUFRLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksRUFDL0MsU0FBUyxFQUFFLGNBQWMsRUFDekIsTUFBTSxFQUFFLEVBQUUsQ0FBQyxNQUFNLEdBQ2pCLENBQ1UsQ0FDYixDQUNVO1lBQ2QsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxPQUFPLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLG9CQUFDLEVBQUUsQ0FBQyxTQUFTLElBQUMsSUFBSSxFQUFFLENBQUMsR0FBRyxFQUFFLFFBQVEsQ0FBQyxFQUNwRixVQUFVLEVBQUUsY0FBYyxFQUFFLFNBQVMsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxRQUFRLEVBQ2xGLFFBQVEsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFO29CQUNmLElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxFQUFFLE9BQU8sRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO29CQUN4QyxjQUFjLENBQUMsT0FBTyxFQUFFLENBQUM7Z0JBQzNCLENBQUMsR0FDRDtZQUNELENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsT0FBTyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxvQkFBQyxFQUFFLENBQUMsU0FBUyxJQUFDLElBQUksRUFBRSxDQUFDLEdBQUcsRUFBRSxRQUFRLENBQUMsRUFDbEYsVUFBVSxFQUFFLFlBQVksRUFBRSxTQUFTLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsZ0JBQWdCLEVBQUUsUUFBUSxFQUM5RSxRQUFRLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRTtvQkFDZixJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztvQkFDdEMsWUFBWSxDQUFDLE9BQU8sRUFBRSxDQUFDO2dCQUN6QixDQUFDLEdBQ0Q7WUFDRCxDQUFDLG9CQUFDLEVBQUUsQ0FBQyxLQUFLLElBQUMsR0FBRyxFQUFFLEdBQUcsY0FBYyxDQUFDLE1BQU0sR0FBRyxZQUFZLENBQUMsTUFBTSxFQUFFLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxNQUFNLEVBQUUsR0FBRyxDQUFDO1lBQy9GLG9CQUFDLENBQUMsQ0FBQyxVQUFVLElBQUMsT0FBTyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUMsTUFBTSxFQUFDLE9BQU8sRUFBRSxDQUFDO2dCQUMzQyxvQkFBQyxDQUFDLENBQUMsSUFBSTtvQkFDTCxvQkFBQyxDQUFDLENBQUMsTUFBTSxJQUNQLE9BQU8sRUFBRSxFQUFFLENBQUMsS0FBSyxLQUFLLFdBQVcsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQ3hELGNBQWMsRUFBQyxPQUFPLEVBQUMsU0FBUyxFQUFDLE9BQU8sRUFBQyxDQUFDLEVBQUMsS0FBSyxFQUFDLFFBQVEsRUFBRSxDQUFDLEVBQUUsQ0FBQyxJQUFJLEVBQUUsT0FBTyxFQUM1RSxPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLFdBQVcsQ0FBQzt3QkFDeEQsb0JBQUMsQ0FBQyxDQUFDLEdBQUc7NEJBQ0gsb0JBQUMsTUFBTSxPQUFHLENBQ0osQ0FBVztvQkFDckIsb0JBQUMsQ0FBQyxDQUFDLE1BQU0sSUFDUCxPQUFPLEVBQUUsRUFBRSxDQUFDLEtBQUssS0FBSyxNQUFNLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUNuRCxjQUFjLEVBQUMsT0FBTyxFQUFDLFNBQVMsRUFBQyxPQUFPLEVBQ3hDLElBQUksRUFBQyxHQUFHLEVBQUMsQ0FBQyxFQUFDLEtBQUssRUFDaEIsT0FBTyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsRUFDN0MsU0FBUyxFQUFFLG9CQUFDLFFBQVEsT0FBRyxFQUN2QixRQUFRLEVBQUMsUUFBUTt3QkFDbEIsb0JBQUMsQ0FBQyxDQUFDLEdBQUc7NEJBQ0gsb0JBQUMsQ0FBQyxDQUFDLElBQUksZUFBYzs0QkFDckIsb0JBQUMsQ0FBQyxDQUFDLEdBQUc7Z0NBQUMsb0JBQUMsQ0FBQyxDQUFDLElBQUksSUFBQyxRQUFRLEVBQUMsSUFBSTtvQ0FBRSxFQUFFLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxNQUFNOztvQ0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksRUFBRSxJQUFJLElBQUksRUFBRSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSTs7b0NBQUcsRUFBRSxDQUFDLElBQUksRUFBRSxPQUFPLENBQVUsQ0FBUSxDQUN6SCxDQUFXLENBQ2Q7Z0JBQ1Qsb0JBQUMsQ0FBQyxDQUFDLE1BQU0sSUFDUCxPQUFPLEVBQUUsRUFBRSxDQUFDLEtBQUssS0FBSyxNQUFNLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUNuRCxRQUFRLEVBQUUsQ0FBQyxFQUFFLENBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxRQUFRLEVBQUUsb0JBQUMsUUFBUSxPQUFHLEVBQ25ELE9BQU8sRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLEVBQzdDLENBQUMsRUFBQyxLQUFLLEVBQUMsUUFBUSxFQUFDLFFBQVE7b0JBQzFCLG9CQUFDLENBQUMsQ0FBQyxHQUFHO3dCQUNILG9CQUFDLENBQUMsQ0FBQyxJQUFJLGVBQWM7d0JBQ3JCLG9CQUFDLENBQUMsQ0FBQyxHQUFHOzRCQUFDLG9CQUFDLENBQUMsQ0FBQyxJQUFJLElBQUMsUUFBUSxFQUFDLElBQUk7Z0NBQUUsRUFBRSxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsTUFBTTs7Z0NBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLEVBQUUsSUFBSSxJQUFJLEVBQUUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUk7O2dDQUFHLEVBQUUsQ0FBQyxJQUFJLEVBQUUsT0FBTyxDQUFVLENBQVEsQ0FDekgsQ0FBVztnQkFDckIsb0JBQUMsQ0FBQyxDQUFDLElBQUk7b0JBQ0wsb0JBQUMsQ0FBQyxDQUFDLE1BQU0sSUFDUCxPQUFPLEVBQUUsRUFBRSxDQUFDLEtBQUssS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUNqRCxjQUFjLEVBQUMsTUFBTSxFQUFDLFNBQVMsRUFBQyxNQUFNLEVBQUMsSUFBSSxFQUFDLEdBQUcsRUFBQyxDQUFDLEVBQUMsS0FBSyxFQUFDLFNBQVMsRUFBRSxvQkFBQyxNQUFNLE9BQUcsRUFDN0UsT0FBTyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsRUFDekMsUUFBUSxFQUFDLFFBQVE7d0JBQ2xCLG9CQUFDLENBQUMsQ0FBQyxHQUFHOzRCQUNILG9CQUFDLENBQUMsQ0FBQyxJQUFJLGFBQVk7NEJBQ25CLG9CQUFDLENBQUMsQ0FBQyxHQUFHO2dDQUFDLG9CQUFDLENBQUMsQ0FBQyxJQUFJLElBQUMsUUFBUSxFQUFDLElBQUk7b0NBQUUsRUFBRSxDQUFDLElBQUksRUFBRSxFQUFFLEVBQUUsTUFBTTs7b0NBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUk7O29DQUFHLEVBQUUsQ0FBQyxJQUFJLEVBQUUsS0FBSyxDQUFVLENBQVEsQ0FDakgsQ0FBVztvQkFDckIsb0JBQUMsQ0FBQyxDQUFDLE1BQU0sSUFDUCxPQUFPLEVBQUUsRUFBRSxDQUFDLEtBQUssS0FBSyxTQUFTLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUN0RCxjQUFjLEVBQUMsT0FBTyxFQUFDLFNBQVMsRUFBQyxPQUFPLEVBQUMsQ0FBQyxFQUFDLEtBQUssRUFBQyxRQUFRLEVBQUUsQ0FBQyxFQUFFLENBQUMsSUFBSSxFQUFFLEtBQUssRUFDMUUsT0FBTyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxTQUFTLENBQUM7d0JBQ3BELG9CQUFDLENBQUMsQ0FBQyxHQUFHOzRCQUNILG9CQUFDLE1BQU0sT0FBRyxDQUNKLENBQVcsQ0FDZCxDQUNJO1lBQ2Ysb0JBQUMsQ0FBQyxDQUFDLFVBQVUsSUFBQyxPQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBQyxNQUFNLEVBQUMsT0FBTyxFQUFFLENBQUM7Z0JBQzNDLG9CQUFDLENBQUMsQ0FBQyxNQUFNLElBQ1AsT0FBTyxFQUFFLEVBQUUsQ0FBQyxLQUFLLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFBRSxjQUFjLEVBQUMsUUFBUSxFQUMvRSxPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLFNBQVMsQ0FBQyxFQUNuRCxRQUFRLEVBQUUsb0JBQUMsTUFBTSxPQUFHO29CQUVwQixvQkFBQyxDQUFDLENBQUMsSUFBSSxhQUFZLENBQ1Y7Z0JBQ1gsb0JBQUMsQ0FBQyxDQUFDLE1BQU0sSUFDUCxPQUFPLEVBQUUsRUFBRSxDQUFDLEtBQUssS0FBSyxLQUFLLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUFFLGNBQWMsRUFBQyxNQUFNLEVBQUMsU0FBUyxFQUFDLE1BQU0sRUFDMUYsT0FBTyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsRUFDM0MsUUFBUSxFQUFFLG9CQUFDLE9BQU8sT0FBRztvQkFFckIsb0JBQUMsQ0FBQyxDQUFDLElBQUksY0FBYSxDQUNYO2dCQUVYLG9CQUFDLENBQUMsQ0FBQyxNQUFNLElBQ1AsT0FBTyxFQUFFLEVBQUUsQ0FBQyxLQUFLLEtBQUssT0FBTyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFDcEQsT0FBTyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxPQUFPLENBQUMsRUFDL0MsUUFBUSxFQUFFLG9CQUFDLFNBQVMsT0FBRztvQkFFdkIsb0JBQUMsQ0FBQyxDQUFDLElBQUksZ0JBQWUsQ0FDYjtnQkFDWCxvQkFBQyxDQUFDLENBQUMsTUFBTSxJQUNQLE9BQU8sRUFBRSxFQUFFLENBQUMsS0FBSyxLQUFLLElBQUksQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQUUsY0FBYyxFQUFDLE9BQU8sRUFBQyxTQUFTLEVBQUMsT0FBTyxFQUMzRixPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxFQUN6QyxTQUFTLEVBQUUsb0JBQUMsTUFBTSxPQUFHO29CQUVyQixvQkFBQyxDQUFDLENBQUMsSUFBSSxhQUFZLENBQ1Y7Z0JBQ1gsb0JBQUMsQ0FBQyxDQUFDLE1BQU0sSUFDUCxPQUFPLEVBQUUsRUFBRSxDQUFDLEtBQUssS0FBSyxXQUFXLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUFFLGNBQWMsRUFBQyxRQUFRLEVBQ2pGLE9BQU8sRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsV0FBVyxDQUFDLEVBQ3ZELFFBQVEsRUFBRSxvQkFBQyxRQUFRLE9BQUc7b0JBRXRCLG9CQUFDLENBQUMsQ0FBQyxJQUFJLGVBQWMsQ0FDWixDQUNFO1lBQ2Ysb0JBQUMsQ0FBQyxDQUFDLFVBQVUsSUFBQyxPQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBQyxNQUFNLEVBQUMsT0FBTyxFQUFFLENBQUM7Z0JBQzNDLG9CQUFDLENBQUMsQ0FBQyxNQUFNLElBQ1AsT0FBTyxFQUFFLEVBQUUsQ0FBQyxLQUFLLEtBQUssV0FBVyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFBRSxjQUFjLEVBQUMsUUFBUSxFQUNqRixPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLFdBQVcsQ0FBQztvQkFFdkQsb0JBQUMsQ0FBQyxDQUFDLElBQUksSUFBQyxFQUFFLEVBQUUsQ0FBQyxtQkFBYTtpQ0FDakI7Z0JBQ1gsb0JBQUMsQ0FBQyxDQUFDLE1BQU0sSUFDUCxPQUFPLEVBQUUsRUFBRSxDQUFDLEtBQUssS0FBSyxVQUFVLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUFFLGNBQWMsRUFBQyxRQUFRLEVBQ2hGLE9BQU8sRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDO29CQUVyRCxvQkFBQyxDQUFDLENBQUMsSUFBSSxJQUFDLEVBQUUsRUFBRSxDQUFDLG1CQUFhO2dDQUNqQjtnQkFDWCxvQkFBQyxDQUFDLENBQUMsTUFBTSxJQUNQLE9BQU8sRUFBRSxFQUFFLENBQUMsS0FBSyxLQUFLLFVBQVUsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQUUsY0FBYyxFQUFDLFFBQVEsRUFDaEYsT0FBTyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUM7b0JBRXJELG9CQUFDLENBQUMsQ0FBQyxJQUFJLElBQUMsRUFBRSxFQUFFLENBQUMsbUJBQWE7Z0NBQ2pCO2dCQUNYLG9CQUFDLENBQUMsQ0FBQyxNQUFNLElBQ1AsT0FBTyxFQUFFLEVBQUUsQ0FBQyxLQUFLLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFBRSxjQUFjLEVBQUMsUUFBUSxFQUMvRSxPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLFNBQVMsQ0FBQztvQkFFbkQsb0JBQUMsQ0FBQyxDQUFDLElBQUksSUFBQyxFQUFFLEVBQUUsQ0FBQyxtQkFBYTsrQkFDakIsQ0FDRTtZQUNmLG9CQUFDLENBQUMsQ0FBQyxVQUFVLElBQUMsT0FBTyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUMsTUFBTTtnQkFDL0IsQ0FBQyxTQUFTLElBQUk7b0JBQ2Isb0JBQUMsQ0FBQyxDQUFDLE1BQU0sSUFDUCxPQUFPLEVBQUUsRUFBRSxDQUFDLEtBQUssS0FBSyxPQUFPLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsS0FBSyxLQUFLLFVBQVUsQ0FBQyxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsY0FBYyxFQUFDLFFBQVEsRUFDaEksUUFBUSxrQ0FHQyxDQUNWO2dCQUNGLFNBQVMsS0FBSyxNQUFNLElBQUk7b0JBQ3ZCLG9CQUFDLENBQUMsQ0FBQyxNQUFNLElBQ1AsT0FBTyxFQUFFLEVBQUUsQ0FBQyxLQUFLLEtBQUssT0FBTyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLEtBQUssS0FBSyxVQUFVLENBQUMsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLGNBQWMsRUFBQyxRQUFRLEVBQ2hJLE9BQU8sRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDO3dCQUUvQyxvQkFBQyxDQUFDLENBQUMsSUFBSSxJQUFDLEVBQUUsRUFBRSxDQUFDOzs0QkFBaUIsRUFBRSxDQUFDLElBQUksRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLE1BQU0sSUFBSSxDQUFDLENBQVU7a0NBQ2pFLENBQ1Y7Z0JBQ0YsU0FBUyxLQUFLLE1BQU0sSUFBSTtvQkFDdkIsb0JBQUMsQ0FBQyxDQUFDLE1BQU0sSUFDUCxPQUFPLEVBQUUsRUFBRSxDQUFDLEtBQUssS0FBSyxPQUFPLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsS0FBSyxLQUFLLFVBQVUsQ0FBQyxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsY0FBYyxFQUFDLFFBQVEsRUFDaEksT0FBTyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxPQUFPLENBQUM7d0JBRS9DLG9CQUFDLENBQUMsQ0FBQyxJQUFJLElBQUMsRUFBRSxFQUFFLENBQUMsSUFBRyxDQUFDLEVBQUUsQ0FBQyxJQUFJLEVBQUUsS0FBSyxFQUFFLEtBQUssQ0FBVTtrQ0FDdkMsQ0FDVjtnQkFDRixTQUFTLEtBQUssTUFBTSxJQUFJO29CQUN2QixvQkFBQyxDQUFDLENBQUMsTUFBTSxJQUNQLE9BQU8sRUFBRSxFQUFFLENBQUMsS0FBSyxLQUFLLE9BQU8sQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxLQUFLLEtBQUssVUFBVSxDQUFDLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxjQUFjLEVBQUMsUUFBUSxFQUNoSSxPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQzt3QkFFL0Msb0JBQUMsQ0FBQyxDQUFDLElBQUksSUFBQyxFQUFFLEVBQUUsQ0FBQyxJQUFHLE9BQU8sQ0FBVTtrQ0FDeEIsQ0FDVixDQUNVO1lBQ2QsRUFBRSxDQUFDLEtBQUssS0FBSyxVQUFVLElBQUksb0JBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBQyxJQUFJLEVBQUUsU0FBUyxJQUFJLE1BQU0sRUFBRSxJQUFJLEVBQUUsU0FBUyxJQUFJLE1BQU0sRUFBRSxJQUFJLEVBQUMsR0FBRyxFQUFDLFFBQVEsRUFBQyxVQUFVO2dCQUNuSCxvQkFBQyxFQUFFLENBQUMsT0FBTyxJQUFDLFNBQVMsRUFBRSxVQUFVLEVBQUUsTUFBTSxFQUFFLEVBQUUsQ0FBQyxNQUFNLEVBQUUsUUFBUSxRQUFDLFNBQVMsU0FBRyxDQUNyRTtZQUNQLENBQUMsQ0FBQyxLQUFLLEVBQUUsTUFBTSxJQUFJLG9CQUFDLEVBQUUsQ0FBQyxRQUFRLElBQUMsTUFBTSxFQUFFLEtBQUs7Z0JBQzVDLG9CQUFDLEVBQUUsQ0FBQyxTQUFTLElBQUMsSUFBSSxFQUFFLENBQUMsR0FBRyxFQUFFLE9BQU8sQ0FBQyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFDLFVBQVUsRUFBQyxJQUFJLEVBQUMsR0FBRyxHQUFHLENBQ3RFLENBQ0wsQ0FBQztRQUVaLE1BQU0sR0FBRyxHQUFHLEVBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQztRQUN4QixHQUFHLENBQUMsU0FBUyxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLFVBQVUsQ0FBQyxDQUFDO1FBRWxELElBQUksY0FBYyxLQUFLLEtBQUssRUFBRSxDQUFDO1lBQzdCLEdBQUcsQ0FBQyxPQUFPLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsVUFBVSxDQUFDLENBQUM7WUFFbkQsR0FBRyxDQUFDLFNBQVMsRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBRSxNQUFNLENBQUMsQ0FBQztZQUN0RCxHQUFHLENBQUMsVUFBVSxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsUUFBUSxFQUFFLE1BQU0sQ0FBQyxDQUFDO1lBQ3hELEdBQUcsQ0FBQyxRQUFRLEVBQUUsVUFBVSxFQUFFLFNBQVMsRUFBRSxRQUFRLEVBQUUsTUFBTSxDQUFDLENBQUM7WUFDdkQsR0FBRyxDQUFDLFFBQVEsRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLENBQUMsQ0FBQztZQUVsRCxHQUFHLENBQUMsV0FBVyxFQUFFLE1BQU0sRUFBRSxVQUFVLEVBQUUsTUFBTSxFQUFFLFNBQVMsQ0FBQyxDQUFDO1lBQ3hELEdBQUcsQ0FBQyxNQUFNLEVBQUUsV0FBVyxFQUFFLFVBQVUsRUFBRSxJQUFJLEVBQUUsS0FBSyxDQUFDLENBQUM7WUFDbEQsR0FBRyxDQUFDLE1BQU0sRUFBRSxNQUFNLEVBQUUsVUFBVSxFQUFFLElBQUksRUFBRSxPQUFPLENBQUMsQ0FBQztZQUMvQyxHQUFHLENBQUMsSUFBSSxFQUFFLE1BQU0sRUFBRSxVQUFVLEVBQUUsU0FBUyxFQUFFLElBQUksQ0FBQyxDQUFDO1lBQy9DLEdBQUcsQ0FBQyxTQUFTLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRSxPQUFPLEVBQUUsV0FBVyxDQUFDLENBQUM7WUFFdkQsR0FBRyxDQUFDLFNBQVMsRUFBRSxNQUFNLEVBQUUsV0FBVyxFQUFFLEtBQUssRUFBRSxXQUFXLENBQUMsQ0FBQztZQUN4RCxHQUFHLENBQUMsS0FBSyxFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQUUsT0FBTyxFQUFFLFVBQVUsQ0FBQyxDQUFDO1lBQ25ELEdBQUcsQ0FBQyxPQUFPLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsVUFBVSxDQUFDLENBQUM7WUFDOUMsR0FBRyxDQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRSxVQUFVLENBQUMsQ0FBQztZQUNsRCxHQUFHLENBQUMsV0FBVyxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUUsT0FBTyxFQUFFLFNBQVMsQ0FBQyxDQUFDO1lBRXRELEdBQUcsQ0FBQyxXQUFXLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxVQUFVLEVBQUUsT0FBTyxDQUFDLENBQUM7WUFDekQsR0FBRyxDQUFDLFVBQVUsRUFBRSxXQUFXLEVBQUUsS0FBSyxFQUFFLFVBQVUsRUFBRSxPQUFPLENBQUMsQ0FBQztZQUN6RCxHQUFHLENBQUMsVUFBVSxFQUFFLFVBQVUsRUFBRSxJQUFJLEVBQUUsU0FBUyxFQUFFLE9BQU8sQ0FBQyxDQUFDO1lBQ3RELEdBQUcsQ0FBQyxTQUFTLEVBQUUsVUFBVSxFQUFFLFdBQVcsRUFBRSxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUM7WUFFMUQsR0FBRyxDQUFDLE9BQU8sRUFBRSxNQUFNLEVBQUUsVUFBVSxFQUFFLE9BQU8sRUFBRSxLQUFLLENBQUMsQ0FBQztZQUVqRCxHQUFHLENBQUMsS0FBSyxFQUFFLE1BQU0sRUFBRSxPQUFPLEVBQUUsT0FBTyxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBQy9DLENBQUM7UUFFRCxNQUFNLFFBQVEsR0FBRyxLQUFLLEVBQUUsRUFBRSxFQUFFLEVBQUU7WUFDNUIsQ0FBQyxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsRUFBRSxTQUFTLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsTUFBTSxFQUFFLEVBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFBO1lBQzVFLE1BQU0sRUFBRSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDdEIsRUFBRSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDbEIsQ0FBQyxDQUFDO1FBRUYsTUFBTSxjQUFjLEdBQUcsb0JBQUMsQ0FBQyxDQUFDLE1BQU0sSUFDOUIsQ0FBQyxFQUFDLE1BQU0sRUFBQyxDQUFDLEVBQUMsS0FBSyxFQUFDLEVBQUUsRUFBQyxLQUFLLEVBQUMsT0FBTyxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQ2xFLFVBQVUsRUFBQyxZQUFZLElBRXRCLEVBQUUsRUFBRSxJQUFJLEVBQUUsTUFBTSxDQUNSLENBQUE7UUFFWCxNQUFNLE9BQU8sR0FBRyxjQUFjLEtBQUssS0FBSyxDQUFDLENBQUMsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQztRQUVuRSxPQUFPLG9CQUFDLEVBQUUsQ0FBQyxFQUFFLElBQ1gsRUFBRSxFQUFFO2dCQUNGLEtBQUssRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsS0FBSyxJQUFJLEVBQUUsQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDO2dCQUM1RCxHQUFHLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsSUFBSSxFQUFFLENBQUMsS0FBSyxLQUFLLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLENBQUM7Z0JBQzlGLEtBQUssRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLE1BQU0sRUFBRSxDQUFDO2dCQUN4RCxJQUFJLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsTUFBTSxFQUFFLEVBQUUsQ0FBQyxNQUFNLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxLQUFLLElBQUksRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQztnQkFFMUgsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsS0FBSyxJQUFJLFNBQVMsRUFBRSxNQUFNLENBQUMsRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFLENBQUMsS0FBSyxFQUFFLENBQUM7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Q0FBQzthQUN6RDtZQUVELG9CQUFDLENBQUMsQ0FBQyxNQUFNLElBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUMsTUFBTSxFQUFDLFFBQVEsRUFBQyxRQUFRLElBQzNDLE9BQU8sQ0FDQyxDQUVMLENBQUE7SUFDVixDQUFDLENBQUM7QUFDSixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIoeyBkZWVwLCBkYXRhLCByZXF1aXJlLCBHbyB9KSA9PiB7XG4gIGNvbnN0IHsgTWRFZGl0LCBNZFByZXZpZXcsIE1kU2F2ZUFsdCB9ID0gcmVxdWlyZShcInJlYWN0LWljb25zL21kXCIpO1xuICBjb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG5cbiAgY29uc3Qge1xuICAgIFR5cGVkSWNvbiwgRG93bkljb24sIFVwSWNvbiwgVHlwZUljb24sIEluSWNvbiwgT3V0SWNvbiwgRnJvbUljb24sIFRvSWNvbixcbiAgfSA9IHJlcXVpcmUoJ0BkZWVwLWZvdW5kYXRpb24vcGVyY2VwdGlvbi1hcHAnKTtcblxuICBjb25zdCBjID0gcmVxdWlyZSgnQGNoYWtyYS11aS9yZWFjdCcpO1xuXG4gIGNvbnN0IGRwbCA9ICdAZGVlcC1mb3VuZGF0aW9uL3BlcmNlcHRpb24tbGlua3MnO1xuICBjb25zdCBkYyA9ICdAZGVlcC1mb3VuZGF0aW9uL2NvcmUnO1xuXG4gIGNvbnN0IFN0YWNrID0gZGVlcC5pZExvY2FsKGRwbCwgJ1N0YWNrJyk7XG4gIGNvbnN0IFNlbGVjdG9yID0gZGVlcC5pZExvY2FsKGRjLCAnU2VsZWN0b3InKTtcbiAgY29uc3QgUHJvbWlzZSA9IGRlZXAuaWRMb2NhbChkYywgJ1Byb21pc2UnKTtcbiAgY29uc3QgUmVqZWN0ZWQgPSBkZWVwLmlkTG9jYWwoZGMsICdSZWplY3RlZCcpO1xuICBjb25zdCBwcm9taXNlVHJlZSA9IGRlZXAuaWRMb2NhbChkYywgJ3Byb21pc2VUcmVlJyk7XG4gIGNvbnN0IFZhbHVlID0gZGVlcC5pZExvY2FsKGRjLCAnVmFsdWUnKTtcbiAgY29uc3QgU3RyaW5nID0gZGVlcC5pZExvY2FsKGRjLCAnU3RyaW5nJyk7XG4gIGNvbnN0IE51bWJlciA9IGRlZXAuaWRMb2NhbChkYywgJ051bWJlcicpO1xuICBjb25zdCBPYmplY3QgPSBkZWVwLmlkTG9jYWwoZGMsICdPYmplY3QnKTtcbiAgY29uc3QgRmlsZSA9IGRlZXAuaWRMb2NhbChkYywgJ0ZpbGUnKTtcbiAgY29uc3QgUXVlcnkgPSBkZWVwLmlkTG9jYWwoZGMsICdRdWVyeScpO1xuICBjb25zdCBDb250YWluID0gZGVlcC5pZExvY2FsKGRjLCAnQ29udGFpbicpO1xuICBjb25zdCBIaXN0b3J5ID0gZGVlcC5pZExvY2FsKGRwbCwgJ0hpc3RvcnknKTtcbiAgY29uc3QgSGVhZGVyID0gZGVlcC5pZExvY2FsKGRwbCwgJ0hlYWRlcicpO1xuICBjb25zdCBUcmVlTGluayA9IGRlZXAuaWRMb2NhbChkcGwsICdUcmVlTGluaycpO1xuICBjb25zdCBUcmVlTGlzdCA9IGRlZXAuaWRMb2NhbChkcGwsICdUcmVlTGlzdCcpO1xuICBjb25zdCBUcmVlRWRpdG9yID0gZGVlcC5pZExvY2FsKGRwbCwgJ1RyZWVFZGl0b3InKTtcbiAgY29uc3QgVHJlZVF1ZXJ5ID0gZGVlcC5pZExvY2FsKGRwbCwgJ1RyZWVRdWVyeScpO1xuICBjb25zdCBUcmVlTGlua0luc2VydCA9IGRlZXAuaWRMb2NhbChkcGwsICdUcmVlTGlua0luc2VydCcpO1xuICBjb25zdCBUcmVlTGlua0RlbGV0ZSA9IGRlZXAuaWRMb2NhbChkcGwsICdUcmVlTGlua0RlbGV0ZScpO1xuICBjb25zdCBUcmVlTGlua0J1dHRvbiA9IGRlZXAuaWRMb2NhbChkcGwsICdUcmVlTGlua0J1dHRvbicpO1xuXG4gIHJldHVybiAoe1xuICAgIGdvLFxuICAgIGhhbmRsZXJJZCxcblxuICAgIGlzQWN0aXZlLFxuICAgIGlzQ29uY2VudHJhdGVkLFxuXG4gICAgb3BlcmF0aW9ucyA9IHRydWUsXG4gICAgZnVsbFdpZHRoID0gbnVsbCxcbiAgfSwgcmVmKSA9PiB7XG4gICAgY29uc3QgdmFsdWVUeXBlID0gUmVhY3QudXNlTWVtbygoKSA9PiBnby5saW5rPy50eXBlPy5vdXRCeVR5cGVbVmFsdWVdPy5bMF0/LnRvX2lkLCBbZ29dKTtcbiAgICBcbiAgICBjb25zdCBmcm9tRGlzY2xvc3VyZSA9IGMudXNlRGlzY2xvc3VyZSgpO1xuICAgIGNvbnN0IHRvRGlzY2xvc3VyZSA9IGMudXNlRGlzY2xvc3VyZSgpO1xuXG4gICAgY29uc3QgcXVlcmllcyA9IFJlYWN0LnVzZU1lbW8oKCkgPT4gKHtcbiAgICAgICdwYXJlbnRzJzogKHsgb3V0OiB7IHR5cGVfaWQ6IENvbnRhaW4sIHRvX2lkOiBnby5saW5rSWQgfSwgb3JkZXJfYnk6IHsgaWQ6ICdkZXNjJyB9IH0pLFxuICAgICAgJ2NvbnRhaW5zJzogKHsgaW46IHsgdHlwZV9pZDogQ29udGFpbiwgZnJvbV9pZDogZ28ubGlua0lkIH0sIG9yZGVyX2J5OiB7IGlkOiAnZGVzYycgfSB9KSxcbiAgICAgICdvdXQnOiAoeyBmcm9tX2lkOiBnby5saW5rSWQsIG9yZGVyX2J5OiB7IGlkOiAnZGVzYycgfSB9KSxcbiAgICAgICd0eXBlZCc6ICh7IHR5cGVfaWQ6IGdvLmxpbmtJZCwgb3JkZXJfYnk6IHsgaWQ6ICdkZXNjJyB9IH0pLFxuICAgICAgJ2luJzogKHsgdG9faWQ6IGdvLmxpbmtJZCwgb3JkZXJfYnk6IHsgaWQ6ICdkZXNjJyB9IH0pLFxuICAgICAgJ3NlbGVjdG9ycyc6ICh7IHR5cGVfaWQ6IFNlbGVjdG9yLCBzZWxlY3RlZDogeyBpdGVtX2lkOiB7IF9lcTogZ28ubGlua0lkIH0gfSwgb3JkZXJfYnk6IHsgaWQ6ICdkZXNjJyB9IH0pLFxuICAgICAgJ3NlbGVjdGVkJzogKHsgc2VsZWN0ZWQ6IHsgc2VsZWN0b3JfaWQ6IHsgX2VxOiBnby5saW5rSWQgfSB9LCBvcmRlcl9ieTogeyBpZDogJ2Rlc2MnIH0gfSksXG4gICAgICAncHJvbWlzZXMnOiAoeyB0eXBlX2lkOiBQcm9taXNlLCB1cDogeyB0cmVlX2lkOiB7IF9lcTogcHJvbWlzZVRyZWUgfSwgcGFyZW50X2lkOiB7IF9lcTogZ28ubGlua0lkIH0gfSwgb3JkZXJfYnk6IHsgaWQ6ICdkZXNjJyB9IH0pLFxuICAgICAgJ3JlamVjdHMnOiAoeyB0eXBlX2lkOiBSZWplY3RlZCwgdXA6IHsgdHJlZV9pZDogeyBfZXE6IHByb21pc2VUcmVlIH0sIHBhcmVudF9pZDogeyBfZXE6IGdvLmxpbmtJZCB9IH0sIG9yZGVyX2J5OiB7IGlkOiAnZGVzYycgfSB9KSxcbiAgICB9KSwgW10pO1xuXG4gICAgY29uc3QgW3F1ZXJ5LCBzZXRRdWVyeV0gPSBSZWFjdC51c2VTdGF0ZShudWxsKTtcbiAgICBjb25zdCB7IGRhdGE6IGxpbmtzIH0gPSBkZWVwLnVzZVF1ZXJ5KHF1ZXJ5IHx8IHt9LCB7IHNraXA6ICFxdWVyeSB9KTtcbiAgICAvLyBjb25zdCBbbGlua3MsIHNldExpbmtzXSA9IFJlYWN0LnVzZVN0YXRlKFtdKTtcbiAgICAvLyBSZWFjdC51c2VFZmZlY3QoKCkgPT4gc2V0TGlua3MoW10pLCBbcXVlcnldKTtcblxuICAgIGNvbnN0IGNvbHVtbiA9IDxjLlZTdGFja1xuICAgICAgcG9zaXRpb249J3JlbGF0aXZlJyBtaW5XPXtmdWxsV2lkdGggfHwgJzMwZW0nfSBtYXhXPXtmdWxsV2lkdGggfHwgJzMwZW0nfSBoPScxMDAlJyBzcGFjaW5nPXsxfVxuICAgICAgYmc9e2lzQWN0aXZlID8gJ2RlZXBCZ0RhcmsnIDogbnVsbH1cbiAgICA+XG4gICAgICA8Yy5GbGV4IHc9JzEwMCUnPlxuICAgICAgICA8Z28uSGFuZGxlclxuICAgICAgICAgIGhhbmRsZXJJZD17VHJlZUxpbmtCdXR0b259IGxpbmtJZD17Z28ubGlua0lkfSBmbGV4PScxJ1xuICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGdvLmZvY3VzKCdjdXJyZW50JykuZ28uZG8oJ2V4ZWMnKX1cbiAgICAgICAgICBuZWVkUGFyZW50PXtmYWxzZX0gaXNBY3RpdmU9e2dvLnZhbHVlID09PSAnY3VycmVudCd9XG4gICAgICAgIC8+XG4gICAgICAgIDxjLkJ1dHRvblxuICAgICAgICAgIG1pblc9JzNlLCcgdz0nM2VtJyBoPScxMDAlJyBtaW5IPSczZW0nIHA9JzAnXG4gICAgICAgICAgb25DbGljaz17KCkgPT4gZ28uZm9jdXMoJ2Nsb3NlJykuZ28uZG8oJ2Nsb3NlJyl9XG4gICAgICAgICAgdmFyaWFudD17Z28udmFsdWUgPT09ICdjbG9zZScgPyAnYWN0aXZlJyA6IG51bGx9XG4gICAgICAgID54PC9jLkJ1dHRvbj5cbiAgICAgIDwvYy5GbGV4PlxuICAgICAgPGMuU2ltcGxlR3JpZCBzcGFjaW5nPXsxfSB3PScxMDAlJyBjb2x1bW5zPXsyICsgKG9wZXJhdGlvbnMgPyAyIDogMCl9PlxuICAgICAgICA8Yy5CdXR0b25cbiAgICAgICAgICB2YXJpYW50PXtnby52YWx1ZSA9PT0gJ3BhcmVudHMnID8gJ2FjdGl2ZScgOiBudWxsfVxuICAgICAgICAgIGp1c3RpZnlDb250ZW50PSdjZW50ZXInXG4gICAgICAgICAgb25DbGljaz17KCkgPT4gZ28uZm9jdXMoJ3BhcmVudHMnKS5nby5kbygncGFyZW50cycpfVxuICAgICAgICA+XG4gICAgICAgICAgPGMuVGV4dCBwcj17MX0+8J+Xgu+4jzwvYy5UZXh0PiBwYXJlbnRzXG4gICAgICAgIDwvYy5CdXR0b24+XG4gICAgICAgIDxjLkJ1dHRvblxuICAgICAgICAgIHZhcmlhbnQ9e2dvLnZhbHVlID09PSAnY29udGFpbnMnID8gJ2FjdGl2ZScgOiBudWxsfVxuICAgICAgICAgIGp1c3RpZnlDb250ZW50PSdjZW50ZXInXG4gICAgICAgICAgb25DbGljaz17KCkgPT4gZ28uZm9jdXMoJ2NvbnRhaW5zJykuZ28uZG8oJ2NvbnRhaW5zJyl9XG4gICAgICAgID5cbiAgICAgICAgICA8Yy5UZXh0IHByPXsxfT7wn5eC77iPPC9jLlRleHQ+IGNvbnRhaW5zXG4gICAgICAgIDwvYy5CdXR0b24+XG4gICAgICAgIHtvcGVyYXRpb25zICYmIDw+XG4gICAgICAgICAgPGdvLlByb3ZpZGVyIGxpbmtJZD17VHJlZUxpbmtJbnNlcnR9PlxuICAgICAgICAgICAgPGdvLkhhbmRsZXJcbiAgICAgICAgICAgICAgaXNBY3RpdmU9e2dvLnZhbHVlID09PSAnaW5zZXJ0JyA/IGdvLnJlZiA6IG51bGx9XG4gICAgICAgICAgICAgIGhhbmRsZXJJZD17VHJlZUxpbmtJbnNlcnR9XG4gICAgICAgICAgICAgIGRlZmF1bHRDb250YWluZXJJZD17Z28ubGlua0lkfSBkZWZhdWx0VHlwZUlkPXsxfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L2dvLlByb3ZpZGVyPlxuICAgICAgICAgIDxnby5Qcm92aWRlciBsaW5rSWQ9e1RyZWVMaW5rRGVsZXRlfT5cbiAgICAgICAgICAgIDxnby5IYW5kbGVyXG4gICAgICAgICAgICAgIGlzQWN0aXZlPXtnby52YWx1ZSA9PT0gJ2RlbGV0ZScgPyBnby5yZWYgOiBudWxsfVxuICAgICAgICAgICAgICBoYW5kbGVySWQ9e1RyZWVMaW5rRGVsZXRlfVxuICAgICAgICAgICAgICBsaW5rSWQ9e2dvLmxpbmtJZH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9nby5Qcm92aWRlcj5cbiAgICAgICAgPC8+fVxuICAgICAgPC9jLlNpbXBsZUdyaWQ+XG4gICAgICB7KCEhZ28ubGluay50eXBlX2lkID09PSAxIHx8ICEhZ28ubGluay5mcm9tX2lkKSAmJiA8Z28uQ29tcG9uZW50IHBhdGg9e1tkcGwsICdGaW5kZXInXX1cbiAgICAgICAgZGlzY2xvc3VyZT17ZnJvbURpc2Nsb3N1cmV9IGluaXRpYWxJZD17Z28ubGluay5mcm9tX2lkfSBpbml0aWFsSGFuZGxlcklkPXtUcmVlTGlzdH1cbiAgICAgICAgb25TdWJtaXQ9eyhpZCkgPT4ge1xuICAgICAgICAgIGRlZXAudXBkYXRlKGdvLmxpbmtJZCwgeyBmcm9tX2lkOiBpZCB9KTtcbiAgICAgICAgICBmcm9tRGlzY2xvc3VyZS5vbkNsb3NlKCk7XG4gICAgICAgIH19XG4gICAgICAvPn1cbiAgICAgIHsoISFnby5saW5rLnR5cGVfaWQgPT09IDEgfHwgISFnby5saW5rLnRvX2lkKSAmJiA8Z28uQ29tcG9uZW50IHBhdGg9e1tkcGwsICdGaW5kZXInXX1cbiAgICAgICAgZGlzY2xvc3VyZT17dG9EaXNjbG9zdXJlfSBpbml0aWFsSWQ9e2dvLmxpbmsudG9faWR9IGluaXRpYWxIYW5kbGVySWQ9e1RyZWVMaXN0fVxuICAgICAgICBvblN1Ym1pdD17KGlkKSA9PiB7XG4gICAgICAgICAgZGVlcC51cGRhdGUoZ28ubGlua0lkLCB7IHRvX2lkOiBpZCB9KTtcbiAgICAgICAgICB0b0Rpc2Nsb3N1cmUub25DbG9zZSgpO1xuICAgICAgICB9fVxuICAgICAgLz59XG4gICAgICB7Wzxnby5RdWVyeSBrZXk9e2Ake2Zyb21EaXNjbG9zdXJlLmlzT3Blbn0ke3RvRGlzY2xvc3VyZS5pc09wZW59YH0gcXVlcnk9e3sgaWQ6IGdvLmxpbmtJZCB9fS8+XX1cbiAgICAgIDxjLlNpbXBsZUdyaWQgc3BhY2luZz17MX0gdz0nMTAwJScgY29sdW1ucz17M30+XG4gICAgICAgIDxjLkZsZXg+XG4gICAgICAgICAgPGMuQnV0dG9uXG4gICAgICAgICAgICB2YXJpYW50PXtnby52YWx1ZSA9PT0gJ2VkaXQtZnJvbScgPyAnYWN0aXZlJyA6IHVuZGVmaW5lZH1cbiAgICAgICAgICAgIGp1c3RpZnlDb250ZW50PSdyaWdodCcgdGV4dEFsaWduPSdyaWdodCcgaD0nM2VtJyBkaXNhYmxlZD17IWdvLmxpbms/LmZyb21faWR9XG4gICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBnby5mb2N1cygnZWRpdC1mcm9tJykuZ28uZG8oJ2VkaXQtZnJvbScpfVxuICAgICAgICAgID48Yy5Cb3g+XG4gICAgICAgICAgICAgIDxNZEVkaXQgLz5cbiAgICAgICAgICAgIDwvYy5Cb3g+PC9jLkJ1dHRvbj5cbiAgICAgICAgICA8Yy5CdXR0b25cbiAgICAgICAgICAgIHZhcmlhbnQ9e2dvLnZhbHVlID09PSAnZnJvbScgPyAnYWN0aXZlJyA6IHVuZGVmaW5lZH1cbiAgICAgICAgICAgIGp1c3RpZnlDb250ZW50PSdyaWdodCcgdGV4dEFsaWduPSdyaWdodCdcbiAgICAgICAgICAgIGZsZXg9JzEnIGg9JzNlbSdcbiAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGdvLmZvY3VzKCdmcm9tJykuZ28uZG8oJ2Zyb20nKX1cbiAgICAgICAgICAgIHJpZ2h0SWNvbj17PEZyb21JY29uIC8+fVxuICAgICAgICAgICAgb3ZlcmZsb3c9J2hpZGRlbidcbiAgICAgICAgICA+PGMuQm94PlxuICAgICAgICAgICAgICA8Yy5UZXh0PmZyb208L2MuVGV4dD5cbiAgICAgICAgICAgICAgPGMuQm94PjxjLlRleHQgZm9udFNpemU9J3hzJz57Z28ubGluaz8uZnJvbT8uc3ltYm9sfSB7ISFnby5saW5rPy5mcm9tICYmIGdvLmxpbmsuZnJvbS5uYW1lfSB7Z28ubGluaz8uZnJvbV9pZH08L2MuVGV4dD48L2MuQm94PlxuICAgICAgICAgICAgPC9jLkJveD48L2MuQnV0dG9uPlxuICAgICAgICA8L2MuRmxleD5cbiAgICAgICAgPGMuQnV0dG9uXG4gICAgICAgICAgdmFyaWFudD17Z28udmFsdWUgPT09ICd0eXBlJyA/ICdhY3RpdmUnIDogdW5kZWZpbmVkfVxuICAgICAgICAgIGRpc2FibGVkPXshZ28ubGluaz8udHlwZV9pZH0gbGVmdEljb249ezxUeXBlSWNvbiAvPn1cbiAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBnby5mb2N1cygndHlwZScpLmdvLmRvKCd0eXBlJyl9XG4gICAgICAgICAgaD0nM2VtJyBvdmVyZmxvdz0naGlkZGVuJ1xuICAgICAgICA+PGMuQm94PlxuICAgICAgICAgICAgPGMuVGV4dD50eXBlPC9jLlRleHQ+XG4gICAgICAgICAgICA8Yy5Cb3g+PGMuVGV4dCBmb250U2l6ZT0neHMnPntnby5saW5rPy50eXBlPy5zeW1ib2x9IHshIWdvLmxpbms/LnR5cGUgJiYgZ28ubGluay50eXBlLm5hbWV9IHtnby5saW5rPy50eXBlX2lkfTwvYy5UZXh0PjwvYy5Cb3g+XG4gICAgICAgICAgPC9jLkJveD48L2MuQnV0dG9uPlxuICAgICAgICA8Yy5GbGV4PlxuICAgICAgICAgIDxjLkJ1dHRvblxuICAgICAgICAgICAgdmFyaWFudD17Z28udmFsdWUgPT09ICd0bycgPyAnYWN0aXZlJyA6IHVuZGVmaW5lZH1cbiAgICAgICAgICAgIGp1c3RpZnlDb250ZW50PSdsZWZ0JyB0ZXh0QWxpZ249J2xlZnQnIGZsZXg9JzEnIGg9JzNlbScgcmlnaHRJY29uPXs8VG9JY29uIC8+fVxuICAgICAgICAgICAgb25DbGljaz17KCkgPT4gZ28uZm9jdXMoJ3RvJykuZ28uZG8oJ3RvJyl9XG4gICAgICAgICAgICBvdmVyZmxvdz0naGlkZGVuJ1xuICAgICAgICAgID48Yy5Cb3g+XG4gICAgICAgICAgICAgIDxjLlRleHQ+dG88L2MuVGV4dD5cbiAgICAgICAgICAgICAgPGMuQm94PjxjLlRleHQgZm9udFNpemU9J3hzJz57Z28ubGluaz8udG8/LnN5bWJvbH0geyEhZ28ubGluaz8udG8gJiYgZ28ubGluay50by5uYW1lfSB7Z28ubGluaz8udG9faWR9PC9jLlRleHQ+PC9jLkJveD5cbiAgICAgICAgICAgIDwvYy5Cb3g+PC9jLkJ1dHRvbj5cbiAgICAgICAgICA8Yy5CdXR0b25cbiAgICAgICAgICAgIHZhcmlhbnQ9e2dvLnZhbHVlID09PSAnZWRpdC10bycgPyAnYWN0aXZlJyA6IHVuZGVmaW5lZH1cbiAgICAgICAgICAgIGp1c3RpZnlDb250ZW50PSdyaWdodCcgdGV4dEFsaWduPSdyaWdodCcgaD0nM2VtJyBkaXNhYmxlZD17IWdvLmxpbms/LnRvX2lkfVxuICAgICAgICAgICAgb25DbGljaz17KCkgPT4gZ28uZm9jdXMoJ2VkaXQtdG8nKS5nby5kbygnZWRpdC10bycpfVxuICAgICAgICAgID48Yy5Cb3g+XG4gICAgICAgICAgICAgIDxNZEVkaXQgLz5cbiAgICAgICAgICAgIDwvYy5Cb3g+PC9jLkJ1dHRvbj5cbiAgICAgICAgPC9jLkZsZXg+XG4gICAgICA8L2MuU2ltcGxlR3JpZD5cbiAgICAgIDxjLlNpbXBsZUdyaWQgc3BhY2luZz17MX0gdz0nMTAwJScgY29sdW1ucz17NX0+XG4gICAgICAgIDxjLkJ1dHRvblxuICAgICAgICAgIHZhcmlhbnQ9e2dvLnZhbHVlID09PSAndXAtdHJlZScgPyAnYWN0aXZlJyA6IHVuZGVmaW5lZH0ganVzdGlmeUNvbnRlbnQ9J2NlbnRlcidcbiAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBnby5mb2N1cygndXAtdHJlZScpLmdvLmRvKCd1cC10cmVlJyl9XG4gICAgICAgICAgbGVmdEljb249ezxVcEljb24gLz59XG4gICAgICAgID5cbiAgICAgICAgICA8Yy5UZXh0PnVwPC9jLlRleHQ+XG4gICAgICAgIDwvYy5CdXR0b24+XG4gICAgICAgIDxjLkJ1dHRvblxuICAgICAgICAgIHZhcmlhbnQ9e2dvLnZhbHVlID09PSAnb3V0JyA/ICdhY3RpdmUnIDogdW5kZWZpbmVkfSBqdXN0aWZ5Q29udGVudD0nbGVmdCcgdGV4dEFsaWduPSdsZWZ0J1xuICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGdvLmZvY3VzKCdvdXQnKS5nby5kbygnb3V0Jyl9XG4gICAgICAgICAgbGVmdEljb249ezxPdXRJY29uIC8+fVxuICAgICAgICA+XG4gICAgICAgICAgPGMuVGV4dD5vdXQ8L2MuVGV4dD5cbiAgICAgICAgPC9jLkJ1dHRvbj5cbiAgICAgICAgey8qIDxJY29uQnV0dG9uIGFyaWEtbGFiZWw9J3R5cGVkJyBpY29uPXs8VHlwZWRJY29uIC8+fSAvPiAqL31cbiAgICAgICAgPGMuQnV0dG9uXG4gICAgICAgICAgdmFyaWFudD17Z28udmFsdWUgPT09ICd0eXBlZCcgPyAnYWN0aXZlJyA6IHVuZGVmaW5lZH1cbiAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBnby5mb2N1cygndHlwZWQnKS5nby5kbygndHlwZWQnKX1cbiAgICAgICAgICBsZWZ0SWNvbj17PFR5cGVkSWNvbiAvPn1cbiAgICAgICAgPlxuICAgICAgICAgIDxjLlRleHQ+dHlwZWQ8L2MuVGV4dD5cbiAgICAgICAgPC9jLkJ1dHRvbj5cbiAgICAgICAgPGMuQnV0dG9uXG4gICAgICAgICAgdmFyaWFudD17Z28udmFsdWUgPT09ICdpbicgPyAnYWN0aXZlJyA6IHVuZGVmaW5lZH0ganVzdGlmeUNvbnRlbnQ9J3JpZ2h0JyB0ZXh0QWxpZ249J3JpZ2h0J1xuICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGdvLmZvY3VzKCdpbicpLmdvLmRvKCdpbicpfVxuICAgICAgICAgIHJpZ2h0SWNvbj17PEluSWNvbiAvPn1cbiAgICAgICAgPlxuICAgICAgICAgIDxjLlRleHQ+aW48L2MuVGV4dD5cbiAgICAgICAgPC9jLkJ1dHRvbj5cbiAgICAgICAgPGMuQnV0dG9uXG4gICAgICAgICAgdmFyaWFudD17Z28udmFsdWUgPT09ICdkb3duLXRyZWUnID8gJ2FjdGl2ZScgOiB1bmRlZmluZWR9IGp1c3RpZnlDb250ZW50PSdjZW50ZXInXG4gICAgICAgICAgb25DbGljaz17KCkgPT4gZ28uZm9jdXMoJ2Rvd24tdHJlZScpLmdvLmRvKCdkb3duLXRyZWUnKX1cbiAgICAgICAgICBsZWZ0SWNvbj17PERvd25JY29uIC8+fVxuICAgICAgICA+XG4gICAgICAgICAgPGMuVGV4dD5kb3duPC9jLlRleHQ+XG4gICAgICAgIDwvYy5CdXR0b24+XG4gICAgICA8L2MuU2ltcGxlR3JpZD5cbiAgICAgIDxjLlNpbXBsZUdyaWQgc3BhY2luZz17MX0gdz0nMTAwJScgY29sdW1ucz17NH0+XG4gICAgICAgIDxjLkJ1dHRvblxuICAgICAgICAgIHZhcmlhbnQ9e2dvLnZhbHVlID09PSAnc2VsZWN0b3JzJyA/ICdhY3RpdmUnIDogdW5kZWZpbmVkfSBqdXN0aWZ5Q29udGVudD0nY2VudGVyJ1xuICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGdvLmZvY3VzKCdzZWxlY3RvcnMnKS5nby5kbygnc2VsZWN0b3JzJyl9XG4gICAgICAgID5cbiAgICAgICAgICA8Yy5UZXh0IHByPXsxfT7wn6qhPC9jLlRleHQ+IHNlbGVjdG9yc1xuICAgICAgICA8L2MuQnV0dG9uPlxuICAgICAgICA8Yy5CdXR0b25cbiAgICAgICAgICB2YXJpYW50PXtnby52YWx1ZSA9PT0gJ3NlbGVjdGVkJyA/ICdhY3RpdmUnIDogdW5kZWZpbmVkfSBqdXN0aWZ5Q29udGVudD0nY2VudGVyJ1xuICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGdvLmZvY3VzKCdzZWxlY3RlZCcpLmdvLmRvKCdzZWxlY3RlZCcpfVxuICAgICAgICA+XG4gICAgICAgICAgPGMuVGV4dCBwcj17MX0+8J+qoTwvYy5UZXh0PiBzZWxlY3RlZFxuICAgICAgICA8L2MuQnV0dG9uPlxuICAgICAgICA8Yy5CdXR0b25cbiAgICAgICAgICB2YXJpYW50PXtnby52YWx1ZSA9PT0gJ3Byb21pc2VzJyA/ICdhY3RpdmUnIDogdW5kZWZpbmVkfSBqdXN0aWZ5Q29udGVudD0nY2VudGVyJ1xuICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGdvLmZvY3VzKCdwcm9taXNlcycpLmdvLmRvKCdwcm9taXNlcycpfVxuICAgICAgICA+XG4gICAgICAgICAgPGMuVGV4dCBwcj17MX0+8J+knjwvYy5UZXh0PiBwcm9taXNlc1xuICAgICAgICA8L2MuQnV0dG9uPlxuICAgICAgICA8Yy5CdXR0b25cbiAgICAgICAgICB2YXJpYW50PXtnby52YWx1ZSA9PT0gJ3JlamVjdHMnID8gJ2FjdGl2ZScgOiB1bmRlZmluZWR9IGp1c3RpZnlDb250ZW50PSdjZW50ZXInXG4gICAgICAgICAgb25DbGljaz17KCkgPT4gZ28uZm9jdXMoJ3JlamVjdHMnKS5nby5kbygncmVqZWN0cycpfVxuICAgICAgICA+XG4gICAgICAgICAgPGMuVGV4dCBwcj17MX0+8J+UtDwvYy5UZXh0PiByZWplY3RzXG4gICAgICAgIDwvYy5CdXR0b24+XG4gICAgICA8L2MuU2ltcGxlR3JpZD5cbiAgICAgIDxjLlNpbXBsZUdyaWQgc3BhY2luZz17MX0gdz0nMTAwJSc+XG4gICAgICAgIHshdmFsdWVUeXBlICYmIDw+XG4gICAgICAgICAgPGMuQnV0dG9uXG4gICAgICAgICAgICB2YXJpYW50PXtnby52YWx1ZSA9PT0gJ3ZhbHVlJyA/ICdhY3RpdmUnIDogdW5kZWZpbmVkfSBiZz17Z28udmFsdWUgPT09IFRyZWVFZGl0b3IgPyAnZGVlcEJnRGFyaycgOiBudWxsfSBqdXN0aWZ5Q29udGVudD0nY2VudGVyJ1xuICAgICAgICAgICAgZGlzYWJsZWRcbiAgICAgICAgICA+XG4gICAgICAgICAgICB0eXBlIGNhbid0IGhhdmUgVmFsdWVcbiAgICAgICAgICA8L2MuQnV0dG9uPlxuICAgICAgICA8Lz59XG4gICAgICAgIHt2YWx1ZVR5cGUgPT09IFN0cmluZyAmJiA8PlxuICAgICAgICAgIDxjLkJ1dHRvblxuICAgICAgICAgICAgdmFyaWFudD17Z28udmFsdWUgPT09ICd2YWx1ZScgPyAnYWN0aXZlJyA6IHVuZGVmaW5lZH0gYmc9e2dvLnZhbHVlID09PSBUcmVlRWRpdG9yID8gJ2RlZXBCZ0RhcmsnIDogbnVsbH0ganVzdGlmeUNvbnRlbnQ9J2NlbnRlcidcbiAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGdvLmZvY3VzKCd2YWx1ZScpLmdvLmRvKCd2YWx1ZScpfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxjLlRleHQgcHI9ezF9PlwiXCIubGVuZ3RoID09PSB7Z28ubGluaz8udmFsdWU/LnZhbHVlPy5sZW5ndGggfHwgMH08L2MuVGV4dD4gc3RyaW5nXG4gICAgICAgICAgPC9jLkJ1dHRvbj5cbiAgICAgICAgPC8+fVxuICAgICAgICB7dmFsdWVUeXBlID09PSBOdW1iZXIgJiYgPD5cbiAgICAgICAgICA8Yy5CdXR0b25cbiAgICAgICAgICAgIHZhcmlhbnQ9e2dvLnZhbHVlID09PSAndmFsdWUnID8gJ2FjdGl2ZScgOiB1bmRlZmluZWR9IGJnPXtnby52YWx1ZSA9PT0gVHJlZUVkaXRvciA/ICdkZWVwQmdEYXJrJyA6IG51bGx9IGp1c3RpZnlDb250ZW50PSdjZW50ZXInXG4gICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBnby5mb2N1cygndmFsdWUnKS5nby5kbygndmFsdWUnKX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8Yy5UZXh0IHByPXsxfT57K2dvLmxpbms/LnZhbHVlPy52YWx1ZX08L2MuVGV4dD4gbnVtYmVyXG4gICAgICAgICAgPC9jLkJ1dHRvbj5cbiAgICAgICAgPC8+fVxuICAgICAgICB7dmFsdWVUeXBlID09PSBPYmplY3QgJiYgPD5cbiAgICAgICAgICA8Yy5CdXR0b25cbiAgICAgICAgICAgIHZhcmlhbnQ9e2dvLnZhbHVlID09PSAndmFsdWUnID8gJ2FjdGl2ZScgOiB1bmRlZmluZWR9IGJnPXtnby52YWx1ZSA9PT0gVHJlZUVkaXRvciA/ICdkZWVwQmdEYXJrJyA6IG51bGx9IGp1c3RpZnlDb250ZW50PSdjZW50ZXInXG4gICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBnby5mb2N1cygndmFsdWUnKS5nby5kbygndmFsdWUnKX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8Yy5UZXh0IHByPXsxfT57YHsuLi59YH08L2MuVGV4dD4gb2JqZWN0XG4gICAgICAgICAgPC9jLkJ1dHRvbj5cbiAgICAgICAgPC8+fVxuICAgICAgPC9jLlNpbXBsZUdyaWQ+XG4gICAgICB7Z28udmFsdWUgPT09IFRyZWVFZGl0b3IgJiYgPGMuQm94IG1pblc9e2Z1bGxXaWR0aCB8fCAnMzBlbSd9IG1heFc9e2Z1bGxXaWR0aCB8fCAnMzBlbSd9IGZsZXg9JzEnIHBvc2l0aW9uPSdyZWxhdGl2ZSc+XG4gICAgICAgIDxnby5IYW5kbGVyIGhhbmRsZXJJZD17VHJlZUVkaXRvcn0gbGlua0lkPXtnby5saW5rSWR9IGZpbGxTaXplIGF1dG9Gb2N1cyAvPlxuICAgICAgPC9jLkJveD59XG4gICAgICB7ISFsaW5rcz8ubGVuZ3RoICYmIDxnby5Qcm92aWRlciBsaW5rSWQ9e1N0YWNrfT5cbiAgICAgICAgPGdvLkNvbXBvbmVudCBwYXRoPXtbZHBsLCAnU3RhY2snXX0gbGlua3M9e2xpbmtzfSBkaXJlY3Rpb249J3ZlcnRpY2FsJyBmbGV4PScxJyAvPlxuICAgICAgPC9nby5Qcm92aWRlcj59XG4gICAgPC9jLlZTdGFjaz47XG5cbiAgICBjb25zdCBuYXYgPSBnby51c2VOYXYoKTtcbiAgICBuYXYoJ2N1cnJlbnQnLCAnbGVmdCcsICd1cCcsICdjbG9zZScsICdjb250YWlucycpO1xuICAgIFxuICAgIGlmIChpc0NvbmNlbnRyYXRlZCAhPT0gZmFsc2UpIHtcbiAgICAgIG5hdignY2xvc2UnLCAnY3VycmVudCcsICd1cCcsICdyaWdodCcsICdjb250YWlucycpO1xuICBcbiAgICAgIG5hdigncGFyZW50cycsICdsZWZ0JywgJ2N1cnJlbnQnLCAnY29udGFpbnMnLCAndHlwZScpO1xuICAgICAgbmF2KCdjb250YWlucycsICdwYXJlbnRzJywgJ2N1cnJlbnQnLCAnaW5zZXJ0JywgJ3R5cGUnKTtcbiAgICAgIG5hdignaW5zZXJ0JywgJ2NvbnRhaW5zJywgJ2N1cnJlbnQnLCAnZGVsZXRlJywgJ3R5cGUnKTtcbiAgICAgIG5hdignZGVsZXRlJywgJ2luc2VydCcsICdjbG9zZScsICdyaWdodCcsICd0eXBlJyk7XG4gIFxuICAgICAgbmF2KCdlZGl0LWZyb20nLCAnbGVmdCcsICdjb250YWlucycsICdmcm9tJywgJ3VwLXRyZWUnKTtcbiAgICAgIG5hdignZnJvbScsICdlZGl0LWZyb20nLCAnY29udGFpbnMnLCAndG8nLCAnb3V0Jyk7XG4gICAgICBuYXYoJ3R5cGUnLCAnZnJvbScsICdjb250YWlucycsICd0bycsICd0eXBlZCcpO1xuICAgICAgbmF2KCd0bycsICd0eXBlJywgJ2NvbnRhaW5zJywgJ2VkaXQtdG8nLCAnaW4nKTtcbiAgICAgIG5hdignZWRpdC10bycsICd0bycsICdjb250YWlucycsICdyaWdodCcsICdkb3duLXRyZWUnKTtcbiAgXG4gICAgICBuYXYoJ3VwLXRyZWUnLCAnbGVmdCcsICdlZGl0LWZyb20nLCAnb3V0JywgJ3NlbGVjdG9ycycpO1xuICAgICAgbmF2KCdvdXQnLCAndXAtdHJlZScsICdmcm9tJywgJ3R5cGVkJywgJ3NlbGVjdGVkJyk7XG4gICAgICBuYXYoJ3R5cGVkJywgJ291dCcsICd0eXBlJywgJ2luJywgJ3Byb21pc2VzJyk7XG4gICAgICBuYXYoJ2luJywgJ3R5cGVkJywgJ3RvJywgJ2Rvd24tdHJlZScsICdwcm9taXNlcycpO1xuICAgICAgbmF2KCdkb3duLXRyZWUnLCAnaW4nLCAnZWRpdC10bycsICdyaWdodCcsICdyZWplY3RzJyk7XG4gIFxuICAgICAgbmF2KCdzZWxlY3RvcnMnLCAnbGVmdCcsICd1cC10cmVlJywgJ3NlbGVjdGVkJywgJ3ZhbHVlJyk7XG4gICAgICBuYXYoJ3NlbGVjdGVkJywgJ3NlbGVjdG9ycycsICdvdXQnLCAncHJvbWlzZXMnLCAndmFsdWUnKTtcbiAgICAgIG5hdigncHJvbWlzZXMnLCAnc2VsZWN0ZWQnLCAnaW4nLCAncmVqZWN0cycsICd2YWx1ZScpO1xuICAgICAgbmF2KCdyZWplY3RzJywgJ3Byb21pc2VzJywgJ2Rvd24tdHJlZScsICdyaWdodCcsICd2YWx1ZScpO1xuICBcbiAgICAgIG5hdigndmFsdWUnLCAnbGVmdCcsICdwcm9taXNlcycsICdyaWdodCcsIFN0YWNrKTtcbiAgXG4gICAgICBuYXYoU3RhY2ssICdsZWZ0JywgJ3ZhbHVlJywgJ3JpZ2h0JywgJ2Rvd24nKTtcbiAgICB9XG5cbiAgICBjb25zdCBvcGVuTGluayA9IGFzeW5jIChpZCkgPT4ge1xuICAgICAgISFpZCAmJiBnby5nby5kbygnb3BlbicsIHsgaGFuZGxlcklkOiBUcmVlTGluaywgaWQ6IGlkLCBwcmV2SWQ6IGdvLmxpbmtJZCB9KVxuICAgICAgYXdhaXQgZ28uZ28uYXdhaXQoaWQpO1xuICAgICAgZ28uZ28uZm9jdXMoaWQpO1xuICAgIH07XG5cbiAgICBjb25zdCBkZWNvbmNlbnRyYXRlZCA9IDxjLkJ1dHRvblxuICAgICAgaD0nMTAwJScgdz0nM2VtJyBwdD0nMWVtJyB2YXJpYW50PXtpc0FjdGl2ZSA/ICdhY3RpdmUnIDogdW5kZWZpbmVkfVxuICAgICAgYWxpZ25JdGVtcz0nZmxleC1zdGFydCdcbiAgICA+XG4gICAgICB7Z28/Lmxpbms/LnN5bWJvbH1cbiAgICA8L2MuQnV0dG9uPlxuXG4gICAgY29uc3QgY29udGVudCA9IGlzQ29uY2VudHJhdGVkID09PSBmYWxzZSA/IGRlY29uY2VudHJhdGVkIDogY29sdW1uO1xuXG4gICAgcmV0dXJuIDxnby5PblxuICAgICAgZG89e3tcbiAgICAgICAgZm9jdXM6IChnLCB2LCBsaW5rSWQsIG8pID0+ICFnby52YWx1ZSAmJiBnby5mb2N1cygnY3VycmVudCcpLFxuICAgICAgICB1c2U6IChnLCB2LCBvKSA9PiBvPy5pZCAmJiBnby52YWx1ZSA9PT0gU3RhY2sgPyAoZ28oU3RhY2spLmRvKCd1c2UnLCBvKSkgOiAoZ28uc2V0KCdjdXJyZW50JykpLFxuICAgICAgICBjbG9zZTogKGcsIHYsIG8pID0+IGdvLmdvLmRvKCdjbG9zZScsIHsgaWQ6IGdvLmxpbmtJZCB9KSxcbiAgICAgICAgZXhlYzogKGcsIHYsIG8pID0+IG8/LmlkID8gZ28uZ28uZG8oJ29wZW4nLCB7IGlkOiBvLmlkLCBwcmV2SWQ6IGdvLmxpbmtJZCwgZm9jdXM6IHRydWUgfSkgOiBnby52YWx1ZSAmJiBnby5kbyhnby52YWx1ZSwgbyksXG5cbiAgICAgICAgbGVmdDogKGcsIHYsIG8pID0+IGdvLmZvY3VzKG5hdi5nZXQoZ28udmFsdWUgfHwgJ2N1cnJlbnQnLCAnbGVmdCcpLCB7IHByZXY6IGdvLnZhbHVlIH0pLFxuICAgICAgICB1cDogKGcsIHYsIG8pID0+IGdvLmZvY3VzKG5hdi5nZXQoZ28udmFsdWUgfHwgJ2N1cnJlbnQnLCAndXAnKSwgeyBwcmV2OiBnby52YWx1ZSB9KSxcbiAgICAgICAgcmlnaHQ6IChnLCB2LCBvKSA9PiBnby5mb2N1cyhuYXYuZ2V0KGdvLnZhbHVlIHx8ICdjdXJyZW50JywgJ3JpZ2h0JyksIHsgcHJldjogZ28udmFsdWUgfSksXG4gICAgICAgIGRvd246IChnLCB2LCBvKSA9PiBnby5mb2N1cyhuYXYuZ2V0KGdvLnZhbHVlIHx8ICdjdXJyZW50JywgJ2Rvd24nKSwgeyBwcmV2OiBnby52YWx1ZSB9KSxcblxuICAgICAgICAnY3VycmVudCc6ICgpID0+IHsgfSxcbiAgICAgICAgJ3BhcmVudHMnOiAoKSA9PiBzZXRRdWVyeSh7IC4uLnF1ZXJpZXMucGFyZW50cywgbGltaXQ6IDEwMCB9KSxcbiAgICAgICAgJ2NvbnRhaW5zJzogKCkgPT4gc2V0UXVlcnkoeyAuLi5xdWVyaWVzLmNvbnRhaW5zLCBsaW1pdDogMTAwIH0pLFxuXG4gICAgICAgICdlZGl0LWZyb20nOiAoKSA9PiBmcm9tRGlzY2xvc3VyZS5vbk9wZW4oKSxcbiAgICAgICAgJ2Zyb20nOiAoKSA9PiBvcGVuTGluayhnby5saW5rLmZyb21faWQpLFxuICAgICAgICAndHlwZSc6ICgpID0+IG9wZW5MaW5rKGdvLmxpbmsudHlwZV9pZCksXG4gICAgICAgICd0byc6ICgpID0+IG9wZW5MaW5rKGdvLmxpbmsudG9faWQpLFxuICAgICAgICAnZWRpdC10byc6ICgpID0+IHRvRGlzY2xvc3VyZS5vbk9wZW4oKSxcblxuICAgICAgICAndXAtdHJlZSc6ICgpID0+IHsgfSxcbiAgICAgICAgJ291dCc6ICgpID0+IHNldFF1ZXJ5KHsgLi4ucXVlcmllcy5vdXQsIGxpbWl0OiAxMDAgfSksXG4gICAgICAgICd0eXBlZCc6ICgpID0+IHNldFF1ZXJ5KHsgLi4ucXVlcmllcy50eXBlZCwgbGltaXQ6IDEwMCB9KSxcbiAgICAgICAgJ2luJzogKCkgPT4gc2V0UXVlcnkoeyAuLi5xdWVyaWVzLmluLCBsaW1pdDogMTAwIH0pLFxuICAgICAgICAnZG93bi10cmVlJzogKCkgPT4geyB9LFxuXG4gICAgICAgICdzZWxlY3RvcnMnOiAoKSA9PiBzZXRRdWVyeSh7IC4uLnF1ZXJpZXMuc2VsZWN0b3JzLCBsaW1pdDogMTAwIH0pLFxuICAgICAgICAnc2VsZWN0ZWQnOiAoKSA9PiBzZXRRdWVyeSh7IC4uLnF1ZXJpZXMuc2VsZWN0ZWQsIGxpbWl0OiAxMDAgfSksXG4gICAgICAgICdwcm9taXNlcyc6ICgpID0+IHNldFF1ZXJ5KHsgLi4ucXVlcmllcy5wcm9taXNlcywgbGltaXQ6IDEwMCB9KSxcbiAgICAgICAgJ3JlamVjdHMnOiAoKSA9PiBzZXRRdWVyeSh7IC4uLnF1ZXJpZXMucmVqZWN0cywgbGltaXQ6IDEwMCB9KSxcblxuICAgICAgICAndmFsdWUnOiAoKSA9PiB7XG4gICAgICAgICAgc2V0UXVlcnkobnVsbCk7XG4gICAgICAgICAgZ28uZm9jdXMoZ28udmFsdWUgPT09IFRyZWVFZGl0b3IgPyAndmFsdWUnIDogVHJlZUVkaXRvcik7XG4gICAgICAgIH0sXG5cbiAgICAgICAgW1N0YWNrXTogKGcsIHYsIG8pID0+IG9wZW5MaW5rKG8/LmlkKSxcbiAgICAgIH19XG4gICAgICBmb2N1cz17e1xuICAgICAgICB1cDogKHEsIHYsIG8pID0+IGdvLnNldCgpLmdvPy5nbz8uZG8oJ3VwJyksXG4gICAgICAgIGRvd246IChxLCB2LCBvKSA9PiBnby5zZXQoKS5nbz8uZ28/LmRvKCdkb3duJyksXG4gICAgICAgIGxlZnQ6IChxLCB2LCBvKSA9PiBnby5zZXQobz8ubGVmdCkuZ28/LmdvPy5kbygnbGVmdCcpLFxuICAgICAgICByaWdodDogKHEsIHYsIG8pID0+IGdvLnNldChvPy5yaWdodCkuZ28/LmdvPy5kbygncmlnaHQnKSxcbiAgICAgIH19XG4gICAgPlxuICAgICAgPGMuSFN0YWNrIHJlZj17cmVmfSBoPScxMDAlJyBvdmVyZmxvdz0naGlkZGVuJz5cbiAgICAgICAge2NvbnRlbnR9XG4gICAgICA8L2MuSFN0YWNrPlxuICAgICAgey8qIHshIXF1ZXJ5ICYmIDxnby5RdWVyeSBxdWVyeT17cXVlcnl9IG9uQ2hhbmdlPXsoeyBkYXRhIH0pID0+IHNldExpbmtzKGRhdGEpfSAvPn0gKi99XG4gICAgPC9nby5Pbj5cbiAgfTtcbn1cbiJdfQ==",
          "link_id": 2643
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 2656,
      "src_id": 2652,
      "handler_id": 5827,
      "execution_provider_id": 33,
      "isolation_provider_id": 144,
      "dist": {
        "id": 2656,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 796,
          "value": "async ({ deep, data, Go, require }) => {\n    const React = require('react');\n    const { PiGraphBold } = require(\"react-icons/pi\");\n    const c = require('@chakra-ui/react');\n    const _ = require('lodash');\n    const dpl = '@deep-foundation/perception-links';\n    const dc = '@deep-foundation/core';\n    const Dpl = deep.idLocal(dpl);\n    const Focus = deep.idLocal(dc, 'Focus');\n    const Active = deep.idLocal(dc, 'Active');\n    const History = deep.idLocal(dpl, 'History');\n    const Layer = deep.idLocal(dpl, 'Layer');\n    const Graph = deep.idLocal(dpl, 'Graph');\n    const GraphLink = deep.idLocal(dpl, 'GraphLink');\n    const containTree = deep.idLocal(dc, 'containTree');\n    const Link = React.memo(({ isActive, ...props }) => {\n        const go = Go.useGo();\n        return React.createElement(React.Fragment, null,\n            React.createElement(go.Handler, { handlerId: GraphLink, isActive: isActive, ...props }));\n    }, _.isEqual);\n    return ({ go, using = false, initialId = deep.linkId, }, ref) => {\n        const initialOpened = React.useMemo(() => {\n            if (!initialId)\n                return [];\n            return [{ link: deep.get(initialId) }];\n        }, []);\n        const [opened, setOpened] = React.useState(initialOpened);\n        const parental = React.useMemo(() => {\n            const byParent = {};\n            for (let i = 0; i < opened.length; i++) {\n                if (opened[i]?.parentId) {\n                    byParent[opened[i].parentId] = byParent[opened[i]?.parentId] || [];\n                    byParent[opened[i].parentId].push(opened[i]);\n                }\n            }\n            return byParent;\n        }, [opened]);\n        React.useEffect(() => {\n            if (initialId)\n                go.do('use', { id: initialId });\n        }, []);\n        React.useEffect(() => {\n            if (go?.current) {\n                if (using && go.root()?.data?.usedId != go.value)\n                    go.root().do('use', { id: go.value });\n                go.do('changed', { id: go.value });\n                go?.current?.do('scroll');\n            }\n        }, [go.value]);\n        const mapOpened = (opened, i) => React.createElement(go.Provider, { key: opened.link.id, linkId: opened.link.id },\n            React.createElement(Link, { isActive: go.value === opened.link.id }, !!parental[opened.link?.id] && parental[opened.link.id].map(mapOpened)));\n        return React.createElement(go.On, { do: {\n                focus: (g, v, o) => o?.id ? go.focus(o?.id) : initialId && !go.value ? go.focus(initialId) : undefined,\n                use: (g, v, o) => {\n                    o?.id && o?.id != go.value && go(o?.id) && go.set(o.id).go(o?.id).go?.do('scroll').go?.do('use');\n                },\n                open: (g, v, { id, ids: _ids, parentId, focus } = {}) => {\n                    const ids = id ? [id] : _ids;\n                    if (ids?.length) {\n                        const toAdd = [];\n                        for (let i in ids) {\n                            const id = ids[i];\n                            if (!opened.find(o => o?.link?.id === id))\n                                toAdd.push({ link: deep.get(id), parentId });\n                        }\n                        if (toAdd.length)\n                            setOpened([...opened, ...toAdd]);\n                        if (focus && ids[0])\n                            go.awaitRef(ids[0]).then(g => {\n                                go.focus(ids[0]).go(ids[0]).do('scroll');\n                            });\n                    }\n                },\n            } },\n            React.createElement(c.Box, { w: '100%', h: '100%', ref: ref },\n                React.createElement(go.Graph, { onLoaded: cy => {\n                        window.cy = cy;\n                    } },\n                    React.createElement(go.Provider, { linkId: deep.linkId },\n                        React.createElement(Link, null)),\n                    React.createElement(go.GraphStyle, { stylesheet: [\n                            {\n                                selector: '.link-children',\n                                style: {\n                                    'background-opacity': 0.05,\n                                    'background-color': 'deepBgGraphChildren',\n                                    opacity: 1,\n                                    'background-fit': 'cover',\n                                    'border-width': 0,\n                                }\n                            },\n                            {\n                                selector: '.link-file',\n                                style: {\n                                    color: 'deepColor',\n                                    width: 30,\n                                    height: 30,\n                                    'font-size': 16,\n                                    'text-margin-y': 23,\n                                    'text-margin-x': -2,\n                                    label: 'data(label)',\n                                    \"text-wrap\": \"wrap\",\n                                    'background-image': 'data(image)',\n                                    'background-fit': 'cover',\n                                }\n                            },\n                            {\n                                selector: '.link-ghost',\n                                style: {\n                                    color: 'deepLinkNodeColor',\n                                    'background-opacity': 0,\n                                    'background-color': 'deepLinkNodeBg',\n                                    width: 30,\n                                    height: 30,\n                                    'font-size': 16,\n                                    'text-margin-y': 23,\n                                    'text-margin-x': 1,\n                                    'label': 'data(label)',\n                                    \"text-wrap\": \"wrap\",\n                                    'background-fit': 'cover',\n                                    'border-color': 'deepLinkNodeColor',\n                                    'border-width': 3,\n                                }\n                            },\n                            {\n                                selector: '.link-node',\n                                style: {\n                                    color: 'deepLinkNodeColor',\n                                    'background-opacity': 1,\n                                    'background-color': 'deepLinkNodeBg',\n                                    opacity: 1,\n                                    width: 30,\n                                    height: 30,\n                                    'font-size': 16,\n                                    'text-margin-y': 23,\n                                    'text-margin-x': 1,\n                                    'label': 'data(label)',\n                                    \"text-wrap\": \"wrap\",\n                                    'background-fit': 'cover',\n                                }\n                            },\n                            {\n                                selector: '.link-node-active',\n                                style: {\n                                    \"border-color\": \"deepColorActive\",\n                                    'border-width': '3',\n                                }\n                            },\n                            {\n                                selector: '.link-edge',\n                                style: {\n                                    width: 1,\n                                    'curve-style': 'bezier',\n                                    'target-distance-from-node': 8,\n                                    'source-distance-from-node': 1,\n                                }\n                            },\n                            {\n                                selector: '.link-edge-active',\n                                style: {\n                                    \"line-color\": \"deepColorActive\",\n                                }\n                            },\n                            {\n                                selector: '.link-to',\n                                style: {\n                                    'target-arrow-shape': 'triangle',\n                                }\n                            },\n                            {\n                                selector: '.link-from',\n                                style: {\n                                    'target-arrow-shape': 'tee',\n                                }\n                            },\n                            {\n                                selector: '.link-type',\n                                style: {\n                                    'target-arrow-shape': 'triangle',\n                                    'line-style': 'dashed',\n                                    'line-dash-pattern': [5, 5]\n                                }\n                            },\n                        ] }),\n                    opened.map(mapOpened))));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFO0lBQ3BDLE1BQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUMvQixNQUFNLEVBQUUsV0FBVyxFQUFFLEdBQUcsT0FBTyxDQUFDLGdCQUFnQixDQUFDLENBQUM7SUFDbEQsTUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLGtCQUFrQixDQUFDLENBQUM7SUFDdEMsTUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBRTVCLE1BQU0sR0FBRyxHQUFHLG1DQUFtQyxDQUFDO0lBQ2hELE1BQU0sRUFBRSxHQUFHLHVCQUF1QixDQUFDO0lBRW5DLE1BQU0sR0FBRyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDOUIsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDeEMsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsUUFBUSxDQUFDLENBQUM7SUFDMUMsTUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsU0FBUyxDQUFDLENBQUM7SUFDN0MsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDekMsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDekMsTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsV0FBVyxDQUFDLENBQUM7SUFDakQsTUFBTSxXQUFXLEdB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QyxDQUFDLENBQUM7UUFFZixNQUFNLFNBQVMsR0FBRyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLG9CQUFDLEVBQUUsQ0FBQyxRQUFRLElBQUMsR0FBRyxFQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUFFLE1BQU0sRUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUU7WUFFdkYsb0JBQUMsSUFBSSxJQUFDLFFBQVEsRUFBRSxFQUFFLENBQUMsS0FBSyxLQUFLLE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxJQUN4QyxDQUFDLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLElBQUksUUFBUSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUNsRSxDQUNLLENBQUM7UUFFZixPQUFPLG9CQUFDLEVBQUUsQ0FBQyxFQUFFLElBQUMsRUFBRSxFQUFFO2dCQUNoQixLQUFLLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVM7Z0JBQ3RHLEdBQUcsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUU7b0JBQ2YsQ0FBQyxFQUFFLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxJQUFJLEVBQUUsQ0FBQyxLQUFLLElBQUksRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLEVB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LENBQUM7b0NBQzlCLDJCQUEyQixFQUFFLENBQUM7aUNBQy9COzZCQUNGOzRCQUNEO2dDQUNFLFFBQVEsRUFBRSxtQkFBbUI7Z0NBQzdCLEtBQUssRUFBRTtvQ0FDTCxZQUFZLEVBQUUsaUJBQWlCO2lDQUNoQzs2QkFDRjs0QkFDRDtnQ0FDRSxRQUFRLEVBQUUsVUFBVTtnQ0FDcEIsS0FBSyxFQUFFO29DQUNMLG9CQUFvQixFQUFFLFVBQVU7aUNBQ2pDOzZCQUNGOzRCQUNEO2dDQUNFLFFBQVEsRUFBRSxZQUFZO2dDQUN0QixLQUFLLEVBQUU7b0NBQ0wsb0JBQW9CLEVBQUUsS0FBSztpQ0FDNUI7NkJBQ0Y7NEJBQ0Q7Z0NBQ0UsUUFBUSxFQUFFLFlBQVk7Z0NBQ3RCLEtBQUssRUFBRTtvQ0FDTCxvQkFBb0IsRUFBRSxVQUFVO29DQUNoQyxZQUFZLEVBQUUsUUFBUTtvQ0FDdEIsbUJBQW1CLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO2lDQUM1Qjs2QkFDRjt5QkFDRixHQUFJO29CQUNKLE1BQU0sQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLENBQ2IsQ0FDTCxDQUNGLENBQUM7SUFDWCxDQUFDLENBQUM7QUFDSixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJhc3luYyAoeyBkZWVwLCBkYXRhLCBHbywgcmVxdWlyZSB9KSA9PiB7XG4gIGNvbnN0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbiAgY29uc3QgeyBQaUdyYXBoQm9sZCB9ID0gcmVxdWlyZShcInJlYWN0LWljb25zL3BpXCIpO1xuICBjb25zdCBjID0gcmVxdWlyZSgnQGNoYWtyYS11aS9yZWFjdCcpO1xuICBjb25zdCBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XG5cbiAgY29uc3QgZHBsID0gJ0BkZWVwLWZvdW5kYXRpb24vcGVyY2VwdGlvbi1saW5rcyc7XG4gIGNvbnN0IGRjID0gJ0BkZWVwLWZvdW5kYXRpb24vY29yZSc7XG5cbiAgY29uc3QgRHBsID0gZGVlcC5pZExvY2FsKGRwbCk7XG4gIGNvbnN0IEZvY3VzID0gZGVlcC5pZExvY2FsKGRjLCAnRm9jdXMnKTtcbiAgY29uc3QgQWN0aXZlID0gZGVlcC5pZExvY2FsKGRjLCAnQWN0aXZlJyk7XG4gIGNvbnN0IEhpc3RvcnkgPSBkZWVwLmlkTG9jYWwoZHBsLCAnSGlzdG9yeScpO1xuICBjb25zdCBMYXllciA9IGRlZXAuaWRMb2NhbChkcGwsICdMYXllcicpO1xuICBjb25zdCBHcmFwaCA9IGRlZXAuaWRMb2NhbChkcGwsICdHcmFwaCcpO1xuICBjb25zdCBHcmFwaExpbmsgPSBkZWVwLmlkTG9jYWwoZHBsLCAnR3JhcGhMaW5rJyk7XG4gIGNvbnN0IGNvbnRhaW5UcmVlID0gZGVlcC5pZExvY2FsKGRjLCAnY29udGFpblRyZWUnKTtcblxuICBjb25zdCBMaW5rID0gUmVhY3QubWVtbygoeyBpc0FjdGl2ZSwgLi4ucHJvcHMgfSkgPT4ge1xuICAgIGNvbnN0IGdvID0gR28udXNlR28oKTtcbiAgICByZXR1cm4gPD5cbiAgICAgIDxnby5IYW5kbGVyIGhhbmRsZXJJZD17R3JhcGhMaW5rfSBpc0FjdGl2ZT17aXNBY3RpdmV9IHsuLi5wcm9wc30gLz5cbiAgICA8Lz47XG4gIH0sIF8uaXNFcXVhbCk7XG5cbiAgcmV0dXJuICh7XG4gICAgZ28sXG4gICAgdXNpbmcgPSBmYWxzZSxcbiAgICBpbml0aWFsSWQgPSBkZWVwLmxpbmtJZCxcbiAgfSwgcmVmKSA9PiB7XG4gICAgY29uc3QgaW5pdGlhbE9wZW5lZCA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgICAgaWYgKCFpbml0aWFsSWQpIHJldHVybiBbXTtcbiAgICAgIHJldHVybiBbeyBsaW5rOiBkZWVwLmdldChpbml0aWFsSWQpIH1dO1xuICAgIH0sIFtdKTtcbiAgICBjb25zdCBbb3BlbmVkLCBzZXRPcGVuZWRdID0gUmVhY3QudXNlU3RhdGUoaW5pdGlhbE9wZW5lZCk7XG4gICAgY29uc3QgcGFyZW50YWwgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICAgIGNvbnN0IGJ5UGFyZW50ID0ge307XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9wZW5lZC5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAob3BlbmVkW2ldPy5wYXJlbnRJZCkge1xuICAgICAgICAgIGJ5UGFyZW50W29wZW5lZFtpXS5wYXJlbnRJZF0gPSBieVBhcmVudFtvcGVuZWRbaV0/LnBhcmVudElkXSB8fCBbXTtcbiAgICAgICAgICBieVBhcmVudFtvcGVuZWRbaV0ucGFyZW50SWRdLnB1c2gob3BlbmVkW2ldKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGJ5UGFyZW50O1xuICAgIH0sIFtvcGVuZWRdKTtcbiAgICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgaWYgKGluaXRpYWxJZCkgZ28uZG8oJ3VzZScsIHsgaWQ6IGluaXRpYWxJZCB9KTtcbiAgICB9LCBbXSk7XG4gICAgLy8gZGVlcC51c2VTdWJzY3JpcHRpb24oe1xuICAgIC8vICAgdHlwZV9pZDogeyBfaW46IFtIaXN0b3J5LCBGb2N1cywgQWN0aXZlXSB9LFxuICAgIC8vICAgZnJvbV9pZDogZGVlcC5saW5rSWQsXG4gICAgLy8gICBvcmRlcl9ieTogeyBpZDogJ2Rlc2MnIH0sXG4gICAgLy8gICByZXR1cm46IHtcbiAgICAvLyAgICAgaXRlbTogeyByZWxhdGlvbjogJ3RvJyB9LFxuICAgIC8vICAgfSxcbiAgICAvLyB9KTtcbiAgICAvLyBjb25zdCBoaXN0b3J5ID0gZGVlcC51c2VMb2NhbFN1YnNjcmlwdGlvbih7XG4gICAgLy8gICB0eXBlX2lkOiBIaXN0b3J5LFxuICAgIC8vICAgZnJvbV9pZDogZGVlcC5saW5rSWQsXG4gICAgLy8gICBvcmRlcl9ieTogeyBpZDogJ2Rlc2MnIH0sXG4gICAgLy8gfSk7XG5cbiAgICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgaWYgKGdvPy5jdXJyZW50KSB7XG4gICAgICAgIGlmICh1c2luZyAmJiBnby5yb290KCk/LmRhdGE/LnVzZWRJZCAhPSBnby52YWx1ZSkgZ28ucm9vdCgpLmRvKCd1c2UnLCB7IGlkOiBnby52YWx1ZSB9KTtcbiAgICAgICAgZ28uZG8oJ2NoYW5nZWQnLCB7IGlkOiBnby52YWx1ZSB9KTtcbiAgICAgICAgZ28/LmN1cnJlbnQ/LmRvKCdzY3JvbGwnKTtcbiAgICAgIH1cbiAgICB9LCBbZ28udmFsdWVdKTtcblxuICAgIGNvbnN0IG1hcE9wZW5lZCA9IChvcGVuZWQsIGkpID0+IDxnby5Qcm92aWRlciBrZXk9e29wZW5lZC5saW5rLmlkfSBsaW5rSWQ9e29wZW5lZC5saW5rLmlkfT5cbiAgICAgIHsvKiA8TGluayBwb3NpdGlvbj17eyB5OiAwLCB4OiAwLShpICogOTApIH19IGxvY2tlZC8+ICovfVxuICAgICAgPExpbmsgaXNBY3RpdmU9e2dvLnZhbHVlID09PSBvcGVuZWQubGluay5pZH0+XG4gICAgICAgIHshIXBhcmVudGFsW29wZW5lZC5saW5rPy5pZF0gJiYgcGFyZW50YWxbb3BlbmVkLmxpbmsuaWRdLm1hcChtYXBPcGVuZWQpfVxuICAgICAgPC9MaW5rPlxuICAgIDwvZ28uUHJvdmlkZXI+O1xuXG4gICAgcmV0dXJuIDxnby5PbiBkbz17e1xuICAgICAgZm9jdXM6IChnLCB2LCBvKSA9PiBvPy5pZCA/IGdvLmZvY3VzKG8/LmlkKSA6IGluaXRpYWxJZCAmJiAhZ28udmFsdWUgPyBnby5mb2N1cyhpbml0aWFsSWQpIDogdW5kZWZpbmVkLFxuICAgICAgdXNlOiAoZywgdiwgbykgPT4ge1xuICAgICAgICBvPy5pZCAmJiBvPy5pZCAhPSBnby52YWx1ZSAmJiBnbyhvPy5pZCkgJiYgZ28uc2V0KG8uaWQpLmdvKG8/LmlkKS5nbz8uZG8oJ3Njcm9sbCcpLmdvPy5kbygndXNlJylcbiAgICAgIH0sXG4gICAgICBvcGVuOiAoZywgdiwgeyBpZCwgaWRzOiBfaWRzLCBwYXJlbnRJZCwgZm9jdXMgfSA9IHt9KSA9PiB7XG4gICAgICAgIGNvbnN0IGlkcyA9IGlkID8gW2lkXSA6IF9pZHM7XG4gICAgICAgIGlmIChpZHM/Lmxlbmd0aCkge1xuICAgICAgICAgIGNvbnN0IHRvQWRkID0gW107XG4gICAgICAgICAgZm9yIChsZXQgaSBpbiBpZHMpIHtcbiAgICAgICAgICAgIGNvbnN0IGlkID0gaWRzW2ldO1xuICAgICAgICAgICAgaWYgKCFvcGVuZWQuZmluZChvID0+IG8/Lmxpbms/LmlkID09PSBpZCkpIHRvQWRkLnB1c2goeyBsaW5rOiBkZWVwLmdldChpZCksIHBhcmVudElkIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodG9BZGQubGVuZ3RoKSBzZXRPcGVuZWQoWy4uLm9wZW5lZCwgLi4udG9BZGRdKTtcbiAgICAgICAgICBpZiAoZm9jdXMgJiYgaWRzWzBdKSBnby5hd2FpdFJlZihpZHNbMF0pLnRoZW4oZyA9PiB7XG4gICAgICAgICAgICBnby5mb2N1cyhpZHNbMF0pLmdvKGlkc1swXSkuZG8oJ3Njcm9sbCcpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgIH19PlxuICAgICAgPGMuQm94XG4gICAgICAgIHc9JzEwMCUnIGg9JzEwMCUnXG4gICAgICAgIHJlZj17cmVmfVxuICAgICAgPlxuICAgICAgICA8Z28uR3JhcGggb25Mb2FkZWQ9e2N5ID0+IHtcbiAgICAgICAgICB3aW5kb3cuY3kgPSBjeTtcbiAgICAgICAgfX0+XG4gICAgICAgICAgezxnby5Qcm92aWRlciBsaW5rSWQ9e2RlZXAubGlua0lkfT5cbiAgICAgICAgICAgIDxMaW5rIC8+XG4gICAgICAgICAgPC9nby5Qcm92aWRlcj59XG4gICAgICAgICAgPGdvLkdyYXBoU3R5bGUgc3R5bGVzaGVldD17W1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBzZWxlY3RvcjogJy5saW5rLWNoaWxkcmVuJyxcbiAgICAgICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgICAgICAnYmFja2dyb3VuZC1vcGFjaXR5JzogMC4wNSxcbiAgICAgICAgICAgICAgICAnYmFja2dyb3VuZC1jb2xvcic6ICdkZWVwQmdHcmFwaENoaWxkcmVuJyxcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgICAgICdiYWNrZ3JvdW5kLWZpdCc6ICdjb3ZlcicsXG4gICAgICAgICAgICAgICAgJ2JvcmRlci13aWR0aCc6IDAsXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHNlbGVjdG9yOiAnLmxpbmstZmlsZScsXG4gICAgICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgY29sb3I6ICdkZWVwQ29sb3InLFxuICAgICAgICAgICAgICAgIHdpZHRoOiAzMCxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDMwLFxuICAgICAgICAgICAgICAgICdmb250LXNpemUnOiAxNixcbiAgICAgICAgICAgICAgICAndGV4dC1tYXJnaW4teSc6IDIzLCAvLyAtNFxuICAgICAgICAgICAgICAgICd0ZXh0LW1hcmdpbi14JzogLTIsXG4gICAgICAgICAgICAgICAgbGFiZWw6ICdkYXRhKGxhYmVsKScsXG4gICAgICAgICAgICAgICAgXCJ0ZXh0LXdyYXBcIjogXCJ3cmFwXCIsXG4gICAgICAgICAgICAgICAgJ2JhY2tncm91bmQtaW1hZ2UnOiAnZGF0YShpbWFnZSknLFxuICAgICAgICAgICAgICAgICdiYWNrZ3JvdW5kLWZpdCc6ICdjb3ZlcicsXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHNlbGVjdG9yOiAnLmxpbmstZ2hvc3QnLFxuICAgICAgICAgICAgICBzdHlsZToge1xuICAgICAgICAgICAgICAgIGNvbG9yOiAnZGVlcExpbmtOb2RlQ29sb3InLFxuICAgICAgICAgICAgICAgICdiYWNrZ3JvdW5kLW9wYWNpdHknOiAwLFxuICAgICAgICAgICAgICAgICdiYWNrZ3JvdW5kLWNvbG9yJzogJ2RlZXBMaW5rTm9kZUJnJyxcbiAgICAgICAgICAgICAgICB3aWR0aDogMzAsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAzMCxcbiAgICAgICAgICAgICAgICAnZm9udC1zaXplJzogMTYsXG4gICAgICAgICAgICAgICAgJ3RleHQtbWFyZ2luLXknOiAyMywgLy8gLTRcbiAgICAgICAgICAgICAgICAndGV4dC1tYXJnaW4teCc6IDEsXG4gICAgICAgICAgICAgICAgJ2xhYmVsJzogJ2RhdGEobGFiZWwpJyxcbiAgICAgICAgICAgICAgICBcInRleHQtd3JhcFwiOiBcIndyYXBcIixcbiAgICAgICAgICAgICAgICAnYmFja2dyb3VuZC1maXQnOiAnY292ZXInLFxuICAgICAgICAgICAgICAgICdib3JkZXItY29sb3InOiAnZGVlcExpbmtOb2RlQ29sb3InLFxuICAgICAgICAgICAgICAgICdib3JkZXItd2lkdGgnOiAzLFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBzZWxlY3RvcjogJy5saW5rLW5vZGUnLFxuICAgICAgICAgICAgICBzdHlsZToge1xuICAgICAgICAgICAgICAgIGNvbG9yOiAnZGVlcExpbmtOb2RlQ29sb3InLFxuICAgICAgICAgICAgICAgICdiYWNrZ3JvdW5kLW9wYWNpdHknOiAxLFxuICAgICAgICAgICAgICAgICdiYWNrZ3JvdW5kLWNvbG9yJzogJ2RlZXBMaW5rTm9kZUJnJyxcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgICAgIHdpZHRoOiAzMCxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDMwLFxuICAgICAgICAgICAgICAgICdmb250LXNpemUnOiAxNixcbiAgICAgICAgICAgICAgICAndGV4dC1tYXJnaW4teSc6IDIzLCAvLyAtNFxuICAgICAgICAgICAgICAgICd0ZXh0LW1hcmdpbi14JzogMSxcbiAgICAgICAgICAgICAgICAnbGFiZWwnOiAnZGF0YShsYWJlbCknLFxuICAgICAgICAgICAgICAgIFwidGV4dC13cmFwXCI6IFwid3JhcFwiLFxuICAgICAgICAgICAgICAgICdiYWNrZ3JvdW5kLWZpdCc6ICdjb3ZlcicsXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHNlbGVjdG9yOiAnLmxpbmstbm9kZS1hY3RpdmUnLFxuICAgICAgICAgICAgICBzdHlsZToge1xuICAgICAgICAgICAgICAgIFwiYm9yZGVyLWNvbG9yXCI6IFwiZGVlcENvbG9yQWN0aXZlXCIsXG4gICAgICAgICAgICAgICAgJ2JvcmRlci13aWR0aCc6ICczJyxcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgc2VsZWN0b3I6ICcubGluay1lZGdlJyxcbiAgICAgICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgICAgICB3aWR0aDogMSxcbiAgICAgICAgICAgICAgICAnY3VydmUtc3R5bGUnOiAnYmV6aWVyJyxcbiAgICAgICAgICAgICAgICAndGFyZ2V0LWRpc3RhbmNlLWZyb20tbm9kZSc6IDgsXG4gICAgICAgICAgICAgICAgJ3NvdXJjZS1kaXN0YW5jZS1mcm9tLW5vZGUnOiAxLFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBzZWxlY3RvcjogJy5saW5rLWVkZ2UtYWN0aXZlJyxcbiAgICAgICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgICAgICBcImxpbmUtY29sb3JcIjogXCJkZWVwQ29sb3JBY3RpdmVcIixcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgc2VsZWN0b3I6ICcubGluay10bycsXG4gICAgICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgJ3RhcmdldC1hcnJvdy1zaGFwZSc6ICd0cmlhbmdsZScsXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHNlbGVjdG9yOiAnLmxpbmstZnJvbScsXG4gICAgICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgJ3RhcmdldC1hcnJvdy1zaGFwZSc6ICd0ZWUnLFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBzZWxlY3RvcjogJy5saW5rLXR5cGUnLFxuICAgICAgICAgICAgICBzdHlsZToge1xuICAgICAgICAgICAgICAgICd0YXJnZXQtYXJyb3ctc2hhcGUnOiAndHJpYW5nbGUnLFxuICAgICAgICAgICAgICAgICdsaW5lLXN0eWxlJzogJ2Rhc2hlZCcsXG4gICAgICAgICAgICAgICAgJ2xpbmUtZGFzaC1wYXR0ZXJuJzogWzUsIDVdXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgXX0gLz5cbiAgICAgICAgICB7b3BlbmVkLm1hcChtYXBPcGVuZWQpfVxuICAgICAgICA8L2dvLkdyYXBoPlxuICAgICAgPC9jLkJveD5cbiAgICA8L2dvLk9uPjtcbiAgfTtcbn0iXX0=",
          "link_id": 2656
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 2710,
      "src_id": 2637,
      "handler_id": 2739,
      "execution_provider_id": 33,
      "isolation_provider_id": 144,
      "dist": {
        "id": 2710,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 817,
          "value": "async ({ deep, data, Go, require }) => {\n    const React = require('react');\n    const c = require('@chakra-ui/react');\n    const dpl = '@deep-foundation/perception-links';\n    const dc = '@deep-foundation/core';\n    const Stack = deep.idLocal(dpl, 'Stack');\n    const Any = deep.idLocal(dc, 'Any');\n    const Query = deep.idLocal(dc, 'Query');\n    const TreeList = deep.idLocal(dpl, 'TreeList');\n    const TreeLink = deep.idLocal(dpl, 'TreeLink');\n    const TreeQuery = deep.idLocal(dpl, 'TreeQuery');\n    const Menu = deep.idLocal(dpl, 'Menu');\n    const Layer = deep.idLocal(dpl, 'Layer');\n    const Header = deep.idLocal(dpl, 'Header');\n    const History = deep.idLocal(dpl, 'History');\n    const HistoryHandler = deep.idLocal(dpl, 'HistoryHandler');\n    const handlers = {\n        [Any]: TreeLink,\n        [Query]: TreeQuery,\n    };\n    const getHandlerId = (linkId) => {\n        const l = deep.get(linkId);\n        console.log('getHandlerId', l);\n        return l?.type_id === Query ? TreeList : TreeLink;\n    };\n    function useStore(queryField, defaultValue) {\n        return React.useState(defaultValue);\n    }\n    return ({ go, using = false, queryField = '', saveHistory = false, fullWidth = null, initialId = deep.linkId, initialHandlerId, startProps = {}, }, ref) => {\n        const initialColumns = React.useMemo(() => {\n            if (!initialId)\n                return [];\n            return [[initialId, initialHandlerId || getHandlerId(initialId)]];\n        }, []);\n        const [columns, setColumns] = useStore(queryField, initialColumns);\n        const Item = React.useCallback(({ link, isActive, ...props }) => {\n            const go = Go.useGo();\n            return React.createElement(React.Fragment, null,\n                !!saveHistory && !!isActive && React.createElement(go.Save, { handlerId: link.handlerId }),\n                React.createElement(go.Handler, { linkId: link.id, handlerId: link.handlerId, isActive: isActive, fullWidth: fullWidth, saveHistory: saveHistory, ...props }));\n        }, [saveHistory, fullWidth]);\n        console.log({ columns });\n        const { data: list, ids } = React.useMemo(() => {\n            const ids = [];\n            const data = columns.map(c => {\n                ids.push(c[0]);\n                return { id: c[0], handlerId: c[1] };\n            });\n            return { data, ids };\n        }, [columns]);\n        const [concentrate, setConcentrate] = React.useState();\n        const { ids: concentrated } = deep.useSearch(concentrate, {\n            db: false, sort: false,\n            query: { id: { _in: ids } },\n            skip: !!concentrate,\n        });\n        return React.createElement(go.On, { do: {\n                focus: (g, v, linkId, o) => {\n                    !go.value && go.focus(Stack);\n                    o?.id && go.do('open', o);\n                },\n                use: (g, v, o) => go(Stack).do('use', o),\n                open: (g, v, { id, prevId, handlerId, focus } = {}) => {\n                    if (!id)\n                        throw new Error(`open options must contains id ({ id, prevId?, handlerId? })`);\n                    const founded = columns.find(c => c[0] === id);\n                    const _prevId = prevId || columns[columns.length - 1][0];\n                    if (founded)\n                        go.do('use', { id });\n                    else {\n                        const prevI = columns.findIndex(c => c[0] === _prevId);\n                        setColumns([\n                            ...(!!~prevI ? columns.slice(0, prevI + 1) : []),\n                            [id, handlerId || getHandlerId(id)],\n                            ...(!!~prevI ? columns.slice(prevI + 1) : []),\n                        ]);\n                    }\n                    if (focus)\n                        go(Stack).awaitRef(id).then(g => go(Stack).focus(id).go(id).scroll());\n                },\n                close: (g, v, o) => {\n                    if (!o.id)\n                        throw new Error(`close options must contains id ({ id })`);\n                    setColumns(columns.filter(c => c[0] !== o.id));\n                },\n                concentrate: (g, v, o) => {\n                    setConcentrate(o?.value);\n                },\n            } },\n            React.createElement(go.Provider, { linkId: Stack },\n                React.createElement(go.Component, { path: [dpl, 'Stack'], concentrated: !!concentrate && concentrated, links: list, direction: 'horizontal', Item: Item, using: using, saveHistory: saveHistory, startProps: startProps })));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFO0lBQ3BDLE1BQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUMvQixNQUFNLENBQUMsR0FBRyxPQUFPLENBQUMsa0JBQWtCLENBQUMsQ0FBQztJQUV0QyxNQUFNLEdBQUcsR0FBRyxtQ0FBbUMsQ0FBQztJQUNoRCxNQUFNLEVBQUUsR0FBRyx1QkFBdUIsQ0FBQztJQUVuQyxNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxPQUFPLENBQUMsQ0FBQztJQUN6QyxNQUFNLEdBQUcsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUUsRUFBRSxLQUFLLENBQUMsQ0FBQztJQUNwQyxNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUUsRUFBRSxPQUFPLENBQUMsQ0FBQztJQUN4QyxNQUFNLFFBQVEsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxVQUFVLENBQUMsQ0FBQztJQUMvQyxNQUFNLFFBQVEsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxVQUFVLENBQUMsQ0FBQztJQUMvQyxNQUFNLFNBQVMsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxXQUFXLENBQUMsQ0FBQztJQUNqRCxNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxNQUFNLENBQUMsQ0FBQztJQUN2QyxNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxPQUFPLENBQUMsQ0FBQztJQUN6QyxNQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcs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eyBkZWVwLCBkYXRhLCBHbywgcmVxdWlyZSB9KSA9PiB7XG4gIGNvbnN0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbiAgY29uc3QgYyA9IHJlcXVpcmUoJ0BjaGFrcmEtdWkvcmVhY3QnKTtcblxuICBjb25zdCBkcGwgPSAnQGRlZXAtZm91bmRhdGlvbi9wZXJjZXB0aW9uLWxpbmtzJztcbiAgY29uc3QgZGMgPSAnQGRlZXAtZm91bmRhdGlvbi9jb3JlJztcblxuICBjb25zdCBTdGFjayA9IGRlZXAuaWRMb2NhbChkcGwsICdTdGFjaycpO1xuICBjb25zdCBBbnkgPSBkZWVwLmlkTG9jYWwoZGMsICdBbnknKTtcbiAgY29uc3QgUXVlcnkgPSBkZWVwLmlkTG9jYWwoZGMsICdRdWVyeScpO1xuICBjb25zdCBUcmVlTGlzdCA9IGRlZXAuaWRMb2NhbChkcGwsICdUcmVlTGlzdCcpO1xuICBjb25zdCBUcmVlTGluayA9IGRlZXAuaWRMb2NhbChkcGwsICdUcmVlTGluaycpO1xuICBjb25zdCBUcmVlUXVlcnkgPSBkZWVwLmlkTG9jYWwoZHBsLCAnVHJlZVF1ZXJ5Jyk7XG4gIGNvbnN0IE1lbnUgPSBkZWVwLmlkTG9jYWwoZHBsLCAnTWVudScpO1xuICBjb25zdCBMYXllciA9IGRlZXAuaWRMb2NhbChkcGwsICdMYXllcicpO1xuICBjb25zdCBIZWFkZXIgPSBkZWVwLmlkTG9jYWwoZHBsLCAnSGVhZGVyJyk7XG4gIGNvbnN0IEhpc3RvcnkgPSBkZWVwLmlkTG9jYWwoZHBsLCAnSGlzdG9yeScpO1xuICBjb25zdCBIaXN0b3J5SGFuZGxlciA9IGRlZXAuaWRMb2NhbChkcGwsICdIaXN0b3J5SGFuZGxlcicpO1xuXG4gIGludGVyZmFjZSBDb2x1bW5JIHtcbiAgICBpZDogYW55O1xuICAgIGhhbmRsZXJJZDogYW55O1xuICAgIGZvY3VzPzogYm9vbGVhbjtcbiAgfVxuXG4gIGNvbnN0IGhhbmRsZXJzID0ge1xuICAgIFtBbnldOiBUcmVlTGluayxcbiAgICBbUXVlcnldOiBUcmVlUXVlcnksXG4gIH07XG5cbiAgY29uc3QgZ2V0SGFuZGxlcklkID0gKGxpbmtJZCkgPT4ge1xuICAgIGNvbnN0IGwgPSBkZWVwLmdldChsaW5rSWQpO1xuICAgIGNvbnNvbGUubG9nKCdnZXRIYW5kbGVySWQnLCBsKTtcbiAgICByZXR1cm4gbD8udHlwZV9pZCA9PT0gUXVlcnkgPyBUcmVlTGlzdCA6IFRyZWVMaW5rO1xuICB9XG5cbiAgZnVuY3Rpb24gdXNlU3RvcmUocXVlcnlGaWVsZCwgZGVmYXVsdFZhbHVlKSB7XG4gICAgLy8gcmV0dXJuIChxdWVyeUZpZWxkID8gR28udXNlUXVlcnlTdG9yZShxdWVyeUZpZWxkLCBkZWZhdWx0VmFsdWUpIDogUmVhY3QudXNlU3RhdGUoZGVmYXVsdFZhbHVlKSk7XG4gICAgcmV0dXJuIFJlYWN0LnVzZVN0YXRlKGRlZmF1bHRWYWx1ZSk7XG4gIH1cblxuICByZXR1cm4gKHtcbiAgICBnbyxcblxuICAgIHVzaW5nID0gZmFsc2UsXG4gICAgcXVlcnlGaWVsZCA9ICcnLFxuICAgIHNhdmVIaXN0b3J5ID0gZmFsc2UsXG4gICAgZnVsbFdpZHRoID0gbnVsbCxcbiAgICBpbml0aWFsSWQgPSBkZWVwLmxpbmtJZCxcbiAgICBpbml0aWFsSGFuZGxlcklkLFxuICAgIHN0YXJ0UHJvcHMgPSB7fSxcbiAgfSwgcmVmKSA9PiB7XG4gICAgY29uc3QgaW5pdGlhbENvbHVtbnMgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICAgIGlmICghaW5pdGlhbElkKSByZXR1cm4gW107XG4gICAgICByZXR1cm4gW1tpbml0aWFsSWQsIGluaXRpYWxIYW5kbGVySWQgfHwgZ2V0SGFuZGxlcklkKGluaXRpYWxJZCldXVxuICAgIH0sIFtdKTtcbiAgICBjb25zdCBbY29sdW1ucywgc2V0Q29sdW1uc10gPSB1c2VTdG9yZShxdWVyeUZpZWxkLCBpbml0aWFsQ29sdW1ucyk7XG4gICAgLy8gY29uc3QgW3Rlc3QsIHNldFRlc3RdID0gZ28udXNlUXVlcnlTdG9yZSgndGVzdCcsIDApO1xuICAgIFxuICAgIGNvbnN0IEl0ZW0gPSBSZWFjdC51c2VDYWxsYmFjaygoeyBsaW5rLCBpc0FjdGl2ZSwgLi4ucHJvcHMgfSkgPT4ge1xuICAgICAgY29uc3QgZ28gPSBHby51c2VHbygpO1xuICAgICAgcmV0dXJuIDw+XG4gICAgICAgIHshIXNhdmVIaXN0b3J5ICYmICEhaXNBY3RpdmUgJiYgPGdvLlNhdmUgaGFuZGxlcklkPXtsaW5rLmhhbmRsZXJJZH0vPn1cbiAgICAgICAgPGdvLkhhbmRsZXIgbGlua0lkPXtsaW5rLmlkfSBoYW5kbGVySWQ9e2xpbmsuaGFuZGxlcklkfVxuICAgICAgICAgIGlzQWN0aXZlPXtpc0FjdGl2ZX0gZnVsbFdpZHRoPXtmdWxsV2lkdGh9IHNhdmVIaXN0b3J5PXtzYXZlSGlzdG9yeX1cbiAgICAgICAgICB7Li4ucHJvcHN9XG4gICAgICAgIC8+XG4gICAgICA8Lz47XG4gICAgfSwgW3NhdmVIaXN0b3J5LCBmdWxsV2lkdGhdKTtcbiAgICBjb25zb2xlLmxvZyh7IGNvbHVtbnMgfSk7XG5cbiAgICBjb25zdCB7IGRhdGE6IGxpc3QsIGlkcyB9ID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgICBjb25zdCBpZHMgPSBbXTtcbiAgICAgIGNvbnN0IGRhdGEgPSBjb2x1bW5zLm1hcChjID0+IHtcbiAgICAgICAgaWRzLnB1c2goY1swXSk7XG4gICAgICAgIHJldHVybiB7IGlkOiBjWzBdLCBoYW5kbGVySWQ6IGNbMV0gfTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHsgZGF0YSwgaWRzIH07XG4gICAgfSwgW2NvbHVtbnNdKTtcblxuICAgIGNvbnN0IFtjb25jZW50cmF0ZSwgc2V0Q29uY2VudHJhdGVdID0gUmVhY3QudXNlU3RhdGUoKTtcbiAgICBjb25zdCB7IGlkczogY29uY2VudHJhdGVkIH0gPSBkZWVwLnVzZVNlYXJjaChjb25jZW50cmF0ZSwge1xuICAgICAgZGI6IGZhbHNlLCBzb3J0OiBmYWxzZSxcbiAgICAgIHF1ZXJ5OiB7IGlkOiB7IF9pbjogaWRzIH0gfSxcbiAgICAgIHNraXA6ICEhY29uY2VudHJhdGUsXG4gICAgfSk7XG5cbiAgICByZXR1cm4gPGdvLk9uIGRvPXt7XG4gICAgICBmb2N1czogKGcsdixsaW5rSWQsbykgPT4ge1xuICAgICAgICAhZ28udmFsdWUgJiYgZ28uZm9jdXMoU3RhY2spO1xuICAgICAgICBvPy5pZCAmJiBnby5kbygnb3BlbicsIG8pO1xuICAgICAgfSxcbiAgICAgIHVzZTogKGcsdixvKSA9PiBnbyhTdGFjaykuZG8oJ3VzZScsbyksXG4gICAgICBvcGVuOiAoZyx2LHsgaWQsIHByZXZJZCwgaGFuZGxlcklkLCBmb2N1cyB9ID0ge30pID0+IHtcbiAgICAgICAgaWYgKCFpZCkgdGhyb3cgbmV3IEVycm9yKGBvcGVuIG9wdGlvbnMgbXVzdCBjb250YWlucyBpZCAoeyBpZCwgcHJldklkPywgaGFuZGxlcklkPyB9KWApO1xuICAgICAgICBjb25zdCBmb3VuZGVkID0gY29sdW1ucy5maW5kKGMgPT4gY1swXSA9PT0gaWQpO1xuICAgICAgICBjb25zdCBfcHJldklkID0gcHJldklkIHx8IGNvbHVtbnNbY29sdW1ucy5sZW5ndGggLSAxXVswXTtcbiAgICAgICAgaWYgKGZvdW5kZWQpIGdvLmRvKCd1c2UnLHsgaWQgfSk7XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGNvbnN0IHByZXZJID0gY29sdW1ucy5maW5kSW5kZXgoYyA9PiBjWzBdID09PSBfcHJldklkKTtcbiAgICAgICAgICBzZXRDb2x1bW5zKFtcbiAgICAgICAgICAgIC4uLighIX5wcmV2SSA/IGNvbHVtbnMuc2xpY2UoMCwgcHJldkkrMSkgOiBbXSksXG4gICAgICAgICAgICBbaWQsIGhhbmRsZXJJZCB8fCBnZXRIYW5kbGVySWQoaWQpXSxcbiAgICAgICAgICAgIC4uLighIX5wcmV2SSA/IGNvbHVtbnMuc2xpY2UocHJldkkrMSkgOiBbXSksXG4gICAgICAgICAgXSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZvY3VzKSBnbyhTdGFjaykuYXdhaXRSZWYoaWQpLnRoZW4oZyA9PiBnbyhTdGFjaykuZm9jdXMoaWQpLmdvKGlkKS5zY3JvbGwoKSk7XG4gICAgICB9LFxuICAgICAgY2xvc2U6IChnLHYsbykgPT4ge1xuICAgICAgICBpZiAoIW8uaWQpIHRocm93IG5ldyBFcnJvcihgY2xvc2Ugb3B0aW9ucyBtdXN0IGNvbnRhaW5zIGlkICh7IGlkIH0pYCk7XG4gICAgICAgIHNldENvbHVtbnMoY29sdW1ucy5maWx0ZXIoYyA9PiBjWzBdICE9PSBvLmlkKSk7XG4gICAgICB9LFxuICAgICAgY29uY2VudHJhdGU6IChnLHYsbykgPT4ge1xuICAgICAgICBzZXRDb25jZW50cmF0ZShvPy52YWx1ZSk7XG4gICAgICB9LFxuICAgIH19PlxuICAgICAgPGdvLlByb3ZpZGVyIGxpbmtJZD17U3RhY2t9PlxuICAgICAgICA8Z28uQ29tcG9uZW50IHBhdGg9e1tkcGwsICdTdGFjayddfSBjb25jZW50cmF0ZWQ9eyEhY29uY2VudHJhdGUgJiYgY29uY2VudHJhdGVkfSBsaW5rcz17bGlzdH0gZGlyZWN0aW9uPSdob3Jpem9udGFsJyBJdGVtPXtJdGVtfSB1c2luZz17dXNpbmd9IHNhdmVIaXN0b3J5PXtzYXZlSGlzdG9yeX0gc3RhcnRQcm9wcz17c3RhcnRQcm9wc30vPlxuICAgICAgPC9nby5Qcm92aWRlcj5cbiAgICA8L2dvLk9uPjtcbiAgfTtcbn0iXX0=",
          "link_id": 2710
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 2773,
      "src_id": 2650,
      "handler_id": 10114,
      "execution_provider_id": 33,
      "isolation_provider_id": 144,
      "dist": {
        "id": 2773,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 823,
          "value": "({ deep, data, require, Go }) => {\n    const { MdEdit, MdPreview, MdSaveAlt } = require(\"react-icons/md\");\n    const React = require('react');\n    const { TypedIcon, DownIcon, UpIcon, TypeIcon, InIcon, OutIcon, FromIcon, ToIcon, useSymbol, } = require('@deep-foundation/perception-app');\n    const c = require('@chakra-ui/react');\n    const dpl = '@deep-foundation/perception-links';\n    const dc = '@deep-foundation/core';\n    const History = deep.idLocal(dpl, 'History');\n    const Header = deep.idLocal(dpl, 'Header');\n    const Search = deep.idLocal(dpl, 'Search');\n    const TreeQuery = deep.idLocal(dpl, 'TreeQuery');\n    const TreeList = deep.idLocal(dpl, 'TreeList');\n    const TreeLink = deep.idLocal(dpl, 'TreeLink');\n    const TreeLinkInsert = deep.idLocal(dpl, 'TreeLinkInsert');\n    const TreeLinkDelete = deep.idLocal(dpl, 'TreeLinkDelete');\n    const TreeLinkButton = deep.idLocal(dpl, 'TreeLinkButton');\n    const Item = ({ l, isActive }) => {\n        const go = Go.useGo();\n        return React.createElement(c.Box, { ref: go.ref, w: '100%' },\n            React.createElement(go.Handler, { handlerId: TreeLinkButton, linkId: l.id, onClick: () => go.go.focus(l.id).go.do(l.id), variant: 'full', isActive: isActive, w: '100%' }));\n    };\n    return ({ go, handlerId, isActive, operations = true, saveHistory = false, children, }, ref) => {\n        const [results, setResults] = React.useState([]);\n        const content = React.createElement(c.Flex, { ref: ref, direction: 'column', position: 'relative', minW: '30em', maxW: '30em', h: '100%', bg: isActive ? 'deepBg' : 'deepBgDark' },\n            React.createElement(c.VStack, { ref: ref, flex: 1, w: '100%', h: '100%' },\n                React.createElement(go.Handler, { handlerId: TreeLinkButton, linkId: go.linkId, onClick: () => go.focus('current').go.do('current'), needParent: false, isActive: go.value === 'current', w: '100%' }),\n                React.createElement(c.Box, { w: '100%' },\n                    React.createElement(go.Provider, { linkId: Search },\n                        React.createElement(go.Handler, { handlerId: Search, linkId: go.linkId, isActive: go.value === Search, w: '100%', onSearch: (results) => setResults(results) }))),\n                React.createElement(go.Provider, { linkId: TreeList },\n                    React.createElement(go.Handler, { handlerId: TreeList, linkId: TreeList, links: results, isActive: go.value === TreeList, w: '100%', flex: '1' }))),\n            children);\n        React.useEffect(() => {\n            if (go?.current)\n                go?.current.scroll();\n        }, [go.value]);\n        const nav = go.useNav();\n        nav('current', 'prev', 'up', 'next', Search);\n        nav(Search, 'prev', 'current', 'next', TreeList);\n        nav(TreeList, 'prev', Search, 'next', TreeList);\n        return React.createElement(go.Provider, { onDo: {\n                current: () => go.do('next', { linkId: go.linkId, handlerId: TreeLink }),\n                focus: () => go.focus('current').go.scroll(),\n                up: () => go.focus(nav.get(go.value, 'up')),\n                down: () => go.focus(nav.get(go.value, 'down')),\n                space: () => go.go.do('next', {\n                    linkId: go.value === 'current' ? go.linkId : go.value === TreeList ? go(TreeList).linkId : go.linkId,\n                    handlerId: TreeLink\n                }),\n            }, onFocus: {\n                current: () => go.save(handlerId),\n                up: () => go?.go.do('up'),\n                down: () => go?.go.do('down'),\n            } }, content);\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxDQUFDLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRTtJQUM5QixNQUFNLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztJQUNuRSxNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7SUFFL0IsTUFBTSxFQUNKLFNBQVMsRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQ3hFLFNBQVMsR0FDVixHQUFHLE9BQU8sQ0FBQyxpQ0FBaUMsQ0FBQyxDQUFDO0lBRS9DLE1BQU0sQ0FBQyxHQUFHLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBRXRDLE1BQU0sR0FBRyxHQUFHLG1DQUFtQyxDQUFDO0lBQ2hELE1BQU0sRUFBRSxHQUFHLHVCQUF1QixDQUFDO0lBRW5DLE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLFNBQVMsQ0FBQyxDQUFDO0lBQzdDLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLFFBQVEsQ0FBQyxDQUFDO0lBQzNDLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLFFBQVEsQ0FBQyxDQUFDO0lBQzNDLE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLFdBQVcsQ0FBQyxDQUFDO0lBQ2pELE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLFVBQVUsQ0FBQyxDQUFDO0lBQy9DLE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxP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aXQsIE1kUHJldmlldywgTWRTYXZlQWx0IH0gPSByZXF1aXJlKFwicmVhY3QtaWNvbnMvbWRcIik7XG4gIGNvbnN0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcblxuICBjb25zdCB7XG4gICAgVHlwZWRJY29uLCBEb3duSWNvbiwgVXBJY29uLCBUeXBlSWNvbiwgSW5JY29uLCBPdXRJY29uLCBGcm9tSWNvbiwgVG9JY29uLFxuICAgIHVzZVN5bWJvbCxcbiAgfSA9IHJlcXVpcmUoJ0BkZWVwLWZvdW5kYXRpb24vcGVyY2VwdGlvbi1hcHAnKTtcbiAgXG4gIGNvbnN0IGMgPSByZXF1aXJlKCdAY2hha3JhLXVpL3JlYWN0Jyk7XG5cbiAgY29uc3QgZHBsID0gJ0BkZWVwLWZvdW5kYXRpb24vcGVyY2VwdGlvbi1saW5rcyc7XG4gIGNvbnN0IGRjID0gJ0BkZWVwLWZvdW5kYXRpb24vY29yZSc7XG4gIFxuICBjb25zdCBIaXN0b3J5ID0gZGVlcC5pZExvY2FsKGRwbCwgJ0hpc3RvcnknKTtcbiAgY29uc3QgSGVhZGVyID0gZGVlcC5pZExvY2FsKGRwbCwgJ0hlYWRlcicpO1xuICBjb25zdCBTZWFyY2ggPSBkZWVwLmlkTG9jYWwoZHBsLCAnU2VhcmNoJyk7XG4gIGNvbnN0IFRyZWVRdWVyeSA9IGRlZXAuaWRMb2NhbChkcGwsICdUcmVlUXVlcnknKTtcbiAgY29uc3QgVHJlZUxpc3QgPSBkZWVwLmlkTG9jYWwoZHBsLCAnVHJlZUxpc3QnKTtcbiAgY29uc3QgVHJlZUxpbmsgPSBkZWVwLmlkTG9jYWwoZHBsLCAnVHJlZUxpbmsnKTtcbiAgY29uc3QgVHJlZUxpbmtJbnNlcnQgPSBkZWVwLmlkTG9jYWwoZHBsLCAnVHJlZUxpbmtJbnNlcnQnKTtcbiAgY29uc3QgVHJlZUxpbmtEZWxldGUgPSBkZWVwLmlkTG9jYWwoZHBsLCAnVHJlZUxpbmtEZWxldGUnKTtcbiAgY29uc3QgVHJlZUxpbmtCdXR0b24gPSBkZWVwLmlkTG9jYWwoZHBsLCAnVHJlZUxpbmtCdXR0b24nKTtcblxuICBjb25zdCBJdGVtID0gKHsgbCwgaXNBY3RpdmUgfSkgPT4ge1xuICAgIGNvbnN0IGdvID0gR28udXNlR28oKTtcbiAgICByZXR1cm4gPGMuQm94IHJlZj17Z28ucmVmfSB3PScxMDAlJz5cbiAgICAgIDxnby5IYW5kbGVyXG4gICAgICAgIGhhbmRsZXJJZD17VHJlZUxpbmtCdXR0b259IGxpbmtJZD17bC5pZH1cbiAgICAgICAgb25DbGljaz17KCkgPT4gZ28uZ28uZm9jdXMobC5pZCkuZ28uZG8obC5pZCl9IHZhcmlhbnQ9J2Z1bGwnXG4gICAgICAgIGlzQWN0aXZlPXtpc0FjdGl2ZX0gdz0nMTAwJSdcbiAgICAgIC8+XG4gICAgPC9jLkJveD47XG4gIH1cblxuICByZXR1cm4gKHtcbiAgICBnbyxcbiAgICBoYW5kbGVySWQsXG5cbiAgICBpc0FjdGl2ZSxcbiAgICBvcGVyYXRpb25zID0gdHJ1ZSxcbiAgICBzYXZlSGlzdG9yeSA9IGZhbHNlLFxuXG4gICAgY2hpbGRyZW4sXG4gIH0sIHJlZikgPT4ge1xuICAgIGNvbnN0IFtyZXN1bHRzLCBzZXRSZXN1bHRzXSA9IFJlYWN0LnVzZVN0YXRlKFtdKTtcblxuICAgIGNvbnN0IGNvbnRlbnQgPSA8Yy5GbGV4IHJlZj17cmVmfSBkaXJlY3Rpb249J2NvbHVtbidcbiAgICAgIHBvc2l0aW9uPSdyZWxhdGl2ZScgbWluVz0nMzBlbScgbWF4Vz0nMzBlbScgaD0nMTAwJSdcbiAgICAgIGJnPXtpc0FjdGl2ZSA/ICdkZWVwQmcnIDogJ2RlZXBCZ0RhcmsnfVxuICAgID5cbiAgICAgIDxjLlZTdGFjayByZWY9e3JlZn1cbiAgICAgICAgZmxleD17MX1cbiAgICAgICAgdz0nMTAwJScgaD0nMTAwJSdcbiAgICAgID5cbiAgICAgICAgPGdvLkhhbmRsZXJcbiAgICAgICAgICBoYW5kbGVySWQ9e1RyZWVMaW5rQnV0dG9ufSBsaW5rSWQ9e2dvLmxpbmtJZH1cbiAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBnby5mb2N1cygnY3VycmVudCcpLmdvLmRvKCdjdXJyZW50Jyl9IG5lZWRQYXJlbnQ9e2ZhbHNlfVxuICAgICAgICAgIGlzQWN0aXZlPXtnby52YWx1ZSA9PT0gJ2N1cnJlbnQnfSB3PScxMDAlJ1xuICAgICAgICAvPlxuICAgICAgICA8Yy5Cb3ggdz0nMTAwJSc+XG4gICAgICAgICAgPGdvLlByb3ZpZGVyIGxpbmtJZD17U2VhcmNofT5cbiAgICAgICAgICAgIDxnby5IYW5kbGVyXG4gICAgICAgICAgICAgIGhhbmRsZXJJZD17U2VhcmNofSBsaW5rSWQ9e2dvLmxpbmtJZH1cbiAgICAgICAgICAgICAgaXNBY3RpdmU9e2dvLnZhbHVlID09PSBTZWFyY2h9IHc9JzEwMCUnXG4gICAgICAgICAgICAgIG9uU2VhcmNoPXsocmVzdWx0cykgPT4gc2V0UmVzdWx0cyhyZXN1bHRzKX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9nby5Qcm92aWRlcj5cbiAgICAgICAgPC9jLkJveD5cbiAgICAgICAgPGdvLlByb3ZpZGVyIGxpbmtJZD17VHJlZUxpc3R9PlxuICAgICAgICAgIDxnby5IYW5kbGVyXG4gICAgICAgICAgICBoYW5kbGVySWQ9e1RyZWVMaXN0fSBsaW5rSWQ9e1RyZWVMaXN0fSBsaW5rcz17cmVzdWx0c31cbiAgICAgICAgICAgIGlzQWN0aXZlPXtnby52YWx1ZSA9PT0gVHJlZUxpc3R9IHc9JzEwMCUnIGZsZXg9JzEnXG4gICAgICAgICAgLz5cbiAgICAgICAgPC9nby5Qcm92aWRlcj5cbiAgICAgIDwvYy5WU3RhY2s+XG4gICAgICB7Y2hpbGRyZW59XG4gICAgPC9jLkZsZXg+O1xuXG4gICAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICAgIGlmIChnbz8uY3VycmVudCkgZ28/LmN1cnJlbnQuc2Nyb2xsKCk7XG4gICAgfSwgW2dvLnZhbHVlXSk7XG5cbiAgICBjb25zdCBuYXYgPSBnby51c2VOYXYoKTtcbiAgICBuYXYoJ2N1cnJlbnQnLCAncHJldicsICd1cCcsICduZXh0JywgU2VhcmNoKTtcbiAgICBuYXYoU2VhcmNoLCAncHJldicsICdjdXJyZW50JywgJ25leHQnLCBUcmVlTGlzdCk7XG4gICAgbmF2KFRyZWVMaXN0LCAncHJldicsIFNlYXJjaCwgJ25leHQnLCBUcmVlTGlzdCk7XG5cbiAgICByZXR1cm4gPGdvLlByb3ZpZGVyXG4gICAgICBvbkRvPXt7XG4gICAgICAgIGN1cnJlbnQ6ICgpID0+IGdvLmRvKCduZXh0JywgeyBsaW5rSWQ6IGdvLmxpbmtJZCwgaGFuZGxlcklkOiBUcmVlTGluayB9KSxcbiAgICAgICAgZm9jdXM6ICgpID0+IGdvLmZvY3VzKCdjdXJyZW50JykuZ28uc2Nyb2xsKCk7XG4gICAgICAgIHVwOiAoKSA9PiAgZ28uZm9jdXMobmF2LmdldChnby52YWx1ZSwgJ3VwJykpLFxuICAgICAgICBkb3duOiAoKSA9PiBnby5mb2N1cyhuYXYuZ2V0KGdvLnZhbHVlLCAnZG93bicpKSxcbiAgICAgICAgc3BhY2U6ICgpID0+IGdvLmdvLmRvKCduZXh0Jywge1xuICAgICAgICAgIGxpbmtJZDogZ28udmFsdWUgPT09ICdjdXJyZW50JyA/IGdvLmxpbmtJZCA6IGdvLnZhbHVlID09PSBUcmVlTGlzdCA/IGdvKFRyZWVMaXN0KS5saW5rSWQgOiBnby5saW5rSWQsXG4gICAgICAgICAgaGFuZGxlcklkOiBUcmVlTGlua1xuICAgICAgICB9KSxcbiAgICAgIH19XG4gICAgICBvbkZvY3VzPXt7XG4gICAgICAgIGN1cnJlbnQ6ICgpID0+IGdvLnNhdmUoaGFuZGxlcklkKSxcbiAgICAgICAgdXA6ICgpID0+IGdvPy5nby5kbygndXAnKSxcbiAgICAgICAgZG93bjogKCkgPT4gZ28/LmdvLmRvKCdkb3duJyksXG4gICAgICB9fVxuICAgID5cbiAgICAgIHtjb250ZW50fVxuICAgIDwvZ28uUHJvdmlkZXI+XG4gIH07XG59XG4iXX0=",
          "link_id": 2773
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 3936,
      "src_id": 3844,
      "handler_id": 17544,
      "execution_provider_id": 33,
      "isolation_provider_id": 144,
      "dist": {
        "id": 3936,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 951,
          "value": "({ deep, data, require, go }) => {\n    const React = require('react');\n    const { useSymbol } = require('@deep-foundation/perception-app');\n    const c = require('@chakra-ui/react');\n    const _ = require('lodash');\n    const dpl = '@deep-foundation/perception-links';\n    const dc = '@deep-foundation/core';\n    const Contain = deep.idLocal(dc, 'Contain');\n    return ({ go, linkId, isActive, onClick, variant = 'short', needParent = false, isConcentrated, children = null, ...props }, ref) => {\n        const [co] = deep.useLocalQuery({ type_id: Contain, to_id: linkId });\n        const link = deep.get(linkId);\n        const contain = link?.inByType?.[Contain]?.[0];\n        const name = link?.name;\n        const type = link?.type?.name;\n        const icon = link?.symbol;\n        const parent = contain?.from;\n        const parentName = parent?.name || '';\n        const parentIcon = parent?.symbol;\n        const [editing, setEditing] = React.useState(false);\n        const heightRef = React.useRef(0);\n        const [value, setValue] = React.useState(link?.name);\n        const editingRef = React.useRef(editing);\n        const afterEdit = (!!editingRef.current && !editing);\n        editingRef.current = editing;\n        return React.createElement(go.On, { do: {\n                enter: async () => {\n                    if (!isActive || !contain)\n                        return;\n                    heightRef.current = ref.current.clientHeight;\n                    if (!editing) {\n                        setEditing(true);\n                        setValue(link?.name);\n                    }\n                    else {\n                        await deep.value(contain?.id, value);\n                        setEditing(false);\n                    }\n                },\n                escape: () => {\n                    setEditing(false);\n                },\n            } },\n            isConcentrated != false && React.createElement(React.Fragment, null,\n                editing && React.createElement(c.Box, { ref: ref, height: `${heightRef.current}px`, w: '100%', overflow: 'hidden' },\n                    React.createElement(c.Input, { autoFocus: true, value: value, onChange: e => setValue(e.target.value), h: '100%', onKeyDown: event => event.key === 'Escape' ? go.do('escape') : null })),\n                !!afterEdit && React.createElement(go.Query, { query: { type_id: Contain, to_id: linkId } }),\n                !editing && React.createElement(c.Button, { ref: ref, ...props, variant: isActive ? 'active' : undefined, onClick: (e) => {\n                        e.stopPropagation();\n                        e.preventDefault();\n                        go.do('exec', { id: linkId });\n                        onClick && onClick(link);\n                    }, justifyContent: 'left', pt: 2, pb: 2, w: '100%', h: '100%' },\n                    icon,\n                    \" \",\n                    React.createElement(c.Box, { textAlign: 'left', pl: '0.5em', w: '100%', overflow: 'hidden', position: 'relative' },\n                        !!parent && !!needParent && React.createElement(c.Box, { fontSize: \"0.6em\", textAlign: 'right' },\n                            parentName,\n                            \" \",\n                            parentIcon),\n                        !!((name) || (type)) && React.createElement(c.Box, { fontSize: \"sm\" }, name || type),\n                        React.createElement(c.Box, { fontSize: \"xxs\" },\n                            name ? type : '',\n                            \" \",\n                            linkId),\n                        children,\n                        variant === 'full' && !!link?.value && React.createElement(React.Fragment, null,\n                            React.createElement(c.Text, { fontSize: \"xxs\", opacity: 0.5 }, \"value:\"),\n                            React.createElement(c.Text, { fontSize: \"xs\" },\n                                typeof (link?.value?.value) == 'string' && React.createElement(React.Fragment, null,\n                                    React.createElement(c.Heading, { as: 'pre', fontSize: 'xs', noOfLines: 1, w: '100%' }, link?.value?.value)),\n                                typeof (link?.value?.value) == 'number' && React.createElement(React.Fragment, null,\n                                    React.createElement(c.Heading, { as: 'pre', fontSize: 'xs', noOfLines: 1, w: '100%' }, link?.value?.value)),\n                                typeof (link?.value?.value) == 'object' && React.createElement(React.Fragment, null,\n                                    React.createElement(c.Heading, { as: 'pre', fontSize: 'xs', noOfLines: 1, w: '100%' }, JSON.stringify(link?.value?.value)))))))),\n            isConcentrated === false && React.createElement(React.Fragment, null,\n                React.createElement(c.Button, { ref: ref, ...props, variant: isActive ? 'active' : undefined, onClick: (e) => {\n                        e.stopPropagation();\n                        e.preventDefault();\n                        go.do('exec', { id: linkId });\n                        onClick && onClick(link);\n                    }, justifyContent: 'left', pt: 2, pb: 2, w: '0', h: '100%' }, icon)));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxDQUFDLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRTtJQUM5QixNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDL0IsTUFBTSxFQUFFLFNBQVMsRUFBRSxHQUFHLE9BQU8sQ0FBQyxpQ0FBaUMsQ0FBQyxDQUFDO0lBQ2pFLE1BQU0sQ0FBQyxHQUFHLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBQ3RDLE1BQU0sQ0FBQyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUU1QixNQUFNLEdBQUcsR0FBRyxtQ0FBbUMsQ0FBQztJQUNoRCxNQUFNLEVBQUUsR0FBRyx1QkFBdUIsQ0FBQztJQUVuQyxNQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUUsRUFBRSxTQUFTLENBQUMsQ0FBQztJQUU1QyxPQUFPLENBQUMsRUFDTixFQUFFLEVBRUYsTUFBTSxFQUNOLFFBQVEsRUFFUixPQUFPLEVBRVAsT0FBTyxHQUFDLE9BQU8sRUFDZixVQUFVLEdBQUcsS0FBSyxFQUNsQixjQUFjLEVBRWQsUUFBUSxHQUFHLElBQUksRUFDZixHQUFHLEtBQUssRUFDVCxFQUFFLEdBQUcsRUFBRSxFQUFFO1FBQ1IsTUFBTSxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsRUFBRSxPQUFPLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsQ0FBQyxDQUFDO1FBR3JFLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDOUIsTUFBTSxPQUFPLEdBQUcsSUFBSSxFQUFFLFFBQVEsRUFBRSxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7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SUFBSTtnQkFDM0Isb0JBQUMsQ0FBQyxDQUFDLE1BQU0sSUFDUCxHQUFHLEVBQUUsR0FBRyxLQUNKLEtBQUssRUFDVCxPQUFPLEVBQUUsUUFBUSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFDeEMsT0FBTyxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUU7d0JBQ2IsQ0FBQyxDQUFDLGVBQWUsRUFBRSxDQUFDO3dCQUNwQixDQUFDLENBQUMsY0FBYyxFQUFFLENBQUM7d0JBQ25CLEVBQUUsQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLEVBQUUsRUFBRSxFQUFFLE1BQU0sRUFBRSxDQUFDLENBQUM7d0JBQzlCLE9BQU8sSUFBSSxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7b0JBQzNCLENBQUMsRUFDRCxjQUFjLEVBQUUsTUFBTSxFQUN0QixFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFDLEdBQUcsRUFBQyxDQUFDLEVBQUMsTUFBTSxJQUUzQixJQUFJLENBQ0ksQ0FDVixDQUNHLENBQUM7SUFDWCxDQUFDLENBQUM7QUFDSixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIoeyBkZWVwLCBkYXRhLCByZXF1aXJlLCBnbyB9KSA9PiB7XG4gIGNvbnN0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbiAgY29uc3QgeyB1c2VTeW1ib2wgfSA9IHJlcXVpcmUoJ0BkZWVwLWZvdW5kYXRpb24vcGVyY2VwdGlvbi1hcHAnKTtcbiAgY29uc3QgYyA9IHJlcXVpcmUoJ0BjaGFrcmEtdWkvcmVhY3QnKTtcbiAgY29uc3QgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xuXG4gIGNvbnN0IGRwbCA9ICdAZGVlcC1mb3VuZGF0aW9uL3BlcmNlcHRpb24tbGlua3MnO1xuICBjb25zdCBkYyA9ICdAZGVlcC1mb3VuZGF0aW9uL2NvcmUnO1xuXG4gIGNvbnN0IENvbnRhaW4gPSBkZWVwLmlkTG9jYWwoZGMsICdDb250YWluJyk7XG5cbiAgcmV0dXJuICh7XG4gICAgZ28sXG5cbiAgICBsaW5rSWQsXG4gICAgaXNBY3RpdmUsXG5cbiAgICBvbkNsaWNrLFxuXG4gICAgdmFyaWFudD0nc2hvcnQnLCAvLyBmdWxsIHwgc2hvcnRcbiAgICBuZWVkUGFyZW50ID0gZmFsc2UsXG4gICAgaXNDb25jZW50cmF0ZWQsXG5cbiAgICBjaGlsZHJlbiA9IG51bGwsXG4gICAgLi4ucHJvcHNcbiAgfSwgcmVmKSA9PiB7XG4gICAgY29uc3QgW2NvXSA9IGRlZXAudXNlTG9jYWxRdWVyeSh7IHR5cGVfaWQ6IENvbnRhaW4sIHRvX2lkOiBsaW5rSWQgfSk7XG4gICAgLy8gY29uc3QgW2xpbmssIGNvbnRhaW5dID0gZGVlcC51c2VMaW5rcyhsaW5rSWQsIGNvKTtcbiAgICAvLyBjb25zb2xlLmxvZygnWFhYWFgnLCBsaW5rLCBjb250YWluKTtcbiAgICBjb25zdCBsaW5rID0gZGVlcC5nZXQobGlua0lkKTtcbiAgICBjb25zdCBjb250YWluID0gbGluaz8uaW5CeVR5cGU/LltDb250YWluXT8uWzBdO1xuICAgIGNvbnN0IG5hbWUgPSBsaW5rPy5uYW1lO1xuICAgIGNvbnN0IHR5cGUgPSBsaW5rPy50eXBlPy5uYW1lO1xuICAgIGNvbnN0IGljb24gPSBsaW5rPy5zeW1ib2w7XG4gIFxuICAgIGNvbnN0IHBhcmVudCA9IGNvbnRhaW4/LmZyb207XG4gICAgY29uc3QgcGFyZW50TmFtZSA9IHBhcmVudD8ubmFtZSB8fCAnJztcbiAgICBjb25zdCBwYXJlbnRJY29uID0gcGFyZW50Py5zeW1ib2w7XG4gICAgY29uc3QgW2VkaXRpbmcsIHNldEVkaXRpbmddID0gUmVhY3QudXNlU3RhdGUoZmFsc2UpO1xuICAgIGNvbnN0IGhlaWdodFJlZiA9IFJlYWN0LnVzZVJlZigwKTtcbiAgICBjb25zdCBbdmFsdWUsIHNldFZhbHVlXSA9IFJlYWN0LnVzZVN0YXRlKGxpbms/Lm5hbWUpO1xuICBcbiAgICBjb25zdCBlZGl0aW5nUmVmID0gUmVhY3QudXNlUmVmKGVkaXRpbmcpO1xuICAgIGNvbnN0IGFmdGVyRWRpdCA9ICghIWVkaXRpbmdSZWYuY3VycmVudCAmJiAhZWRpdGluZyk7XG4gICAgZWRpdGluZ1JlZi5jdXJyZW50ID0gZWRpdGluZztcbiAgXG4gICAgcmV0dXJuIDxnby5PbiBkbz17e1xuICAgICAgZW50ZXI6IGFzeW5jICgpID0+IHtcbiAgICAgICAgaWYgKCFpc0FjdGl2ZSB8fCAhY29udGFpbikgcmV0dXJuO1xuICAgICAgICBoZWlnaHRSZWYuY3VycmVudCA9IHJlZi5jdXJyZW50LmNsaWVudEhlaWdodDtcbiAgICAgICAgaWYgKCFlZGl0aW5nKSB7XG4gICAgICAgICAgc2V0RWRpdGluZyh0cnVlKTtcbiAgICAgICAgICBzZXRWYWx1ZShsaW5rPy5uYW1lKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhd2FpdCBkZWVwLnZhbHVlKGNvbnRhaW4/LmlkLCB2YWx1ZSk7XG4gICAgICAgICAgc2V0RWRpdGluZyhmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBlc2NhcGU6ICgpID0+IHtcbiAgICAgICAgc2V0RWRpdGluZyhmYWxzZSk7XG4gICAgICB9LFxuICAgIH19PlxuICAgICAge2lzQ29uY2VudHJhdGVkICE9IGZhbHNlICYmIDw+XG4gICAgICAgIHtlZGl0aW5nICYmIDxjLkJveCByZWY9e3JlZn0gaGVpZ2h0PXtgJHtoZWlnaHRSZWYuY3VycmVudH1weGB9IHc9JzEwMCUnIG92ZXJmbG93PSdoaWRkZW4nPlxuICAgICAgICAgIDxjLklucHV0XG4gICAgICAgICAgICBhdXRvRm9jdXMgdmFsdWU9e3ZhbHVlfSBvbkNoYW5nZT17ZSA9PiBzZXRWYWx1ZShlLnRhcmdldC52YWx1ZSl9IGg9JzEwMCUnXG4gICAgICAgICAgICBvbktleURvd249e2V2ZW50ID0+IGV2ZW50LmtleSA9PT0gJ0VzY2FwZScgPyBnby5kbygnZXNjYXBlJykgOiBudWxsfVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvYy5Cb3g+fVxuICAgICAgICB7ISFhZnRlckVkaXQgJiYgPGdvLlF1ZXJ5IHF1ZXJ5PXt7IHR5cGVfaWQ6IENvbnRhaW4sIHRvX2lkOiBsaW5rSWQgfX0vPn1cbiAgICAgICAgeyFlZGl0aW5nICYmIDxjLkJ1dHRvblxuICAgICAgICAgIHJlZj17cmVmfVxuICAgICAgICAgIHsuLi5wcm9wc31cbiAgICAgICAgICB2YXJpYW50PXtpc0FjdGl2ZSA/ICdhY3RpdmUnIDogdW5kZWZpbmVkfVxuICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB7XG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgZ28uZG8oJ2V4ZWMnLCB7IGlkOiBsaW5rSWQgfSk7XG4gICAgICAgICAgICBvbkNsaWNrICYmIG9uQ2xpY2sobGluayk7XG4gICAgICAgICAgfX1cbiAgICAgICAgICBqdXN0aWZ5Q29udGVudD17J2xlZnQnfVxuICAgICAgICAgIHB0PXsyfSBwYj17Mn0gdz0nMTAwJScgaD0nMTAwJSdcbiAgICAgICAgPlxuICAgICAgICAgIHtpY29ufSA8Yy5Cb3ggdGV4dEFsaWduPSdsZWZ0JyBwbD0nMC41ZW0nIHc9JzEwMCUnIG92ZXJmbG93PSdoaWRkZW4nIHBvc2l0aW9uPSdyZWxhdGl2ZSc+XG4gICAgICAgICAgeyEhcGFyZW50ICYmICEhbmVlZFBhcmVudCAmJiA8Yy5Cb3ggZm9udFNpemU9XCIwLjZlbVwiIHRleHRBbGlnbj0ncmlnaHQnPntwYXJlbnROYW1lfSB7cGFyZW50SWNvbn08L2MuQm94Pn1cbiAgICAgICAgICB7ISEoKG5hbWUpIHx8ICh0eXBlKSkgJiYgPGMuQm94IGZvbnRTaXplPVwic21cIj57bmFtZSB8fCB0eXBlfVxuICAgICAgICAgIDwvYy5Cb3g+fVxuICAgICAgICAgIDxjLkJveCBmb250U2l6ZT1cInh4c1wiPntuYW1lID8gdHlwZSA6ICcnfSB7bGlua0lkfTwvYy5Cb3g+XG4gICAgICAgICAge2NoaWxkcmVufVxuICAgICAgICAgIHt2YXJpYW50ID09PSAnZnVsbCcgJiYgISFsaW5rPy52YWx1ZSAmJiA8PlxuICAgICAgICAgICAgPGMuVGV4dCBmb250U2l6ZT1cInh4c1wiIG9wYWNpdHk9ezAuNX0+dmFsdWU6PC9jLlRleHQ+XG4gICAgICAgICAgICA8Yy5UZXh0IGZvbnRTaXplPVwieHNcIj5cbiAgICAgICAgICAgICAge3R5cGVvZihsaW5rPy52YWx1ZT8udmFsdWUpID09ICdzdHJpbmcnICYmIDw+XG4gICAgICAgICAgICAgICAgPGMuSGVhZGluZyBhcz0ncHJlJyBmb250U2l6ZT0neHMnIG5vT2ZMaW5lcz17MX0gdz0nMTAwJSc+e2xpbms/LnZhbHVlPy52YWx1ZX08L2MuSGVhZGluZz5cbiAgICAgICAgICAgICAgPC8+fVxuICAgICAgICAgICAgICB7dHlwZW9mKGxpbms/LnZhbHVlPy52YWx1ZSkgPT0gJ251bWJlcicgJiYgPD5cbiAgICAgICAgICAgICAgICA8Yy5IZWFkaW5nIGFzPSdwcmUnIGZvbnRTaXplPSd4cycgbm9PZkxpbmVzPXsxfSB3PScxMDAlJz57bGluaz8udmFsdWU/LnZhbHVlfTwvYy5IZWFkaW5nPlxuICAgICAgICAgICAgICA8Lz59XG4gICAgICAgICAgICAgIHt0eXBlb2YobGluaz8udmFsdWU/LnZhbHVlKSA9PSAnb2JqZWN0JyAmJiA8PlxuICAgICAgICAgICAgICAgIDxjLkhlYWRpbmcgYXM9J3ByZScgZm9udFNpemU9J3hzJyBub09mTGluZXM9ezF9IHc9JzEwMCUnPntKU09OLnN0cmluZ2lmeShsaW5rPy52YWx1ZT8udmFsdWUpfTwvYy5IZWFkaW5nPlxuICAgICAgICAgICAgICA8Lz59XG4gICAgICAgICAgICA8L2MuVGV4dD5cbiAgICAgICAgICA8Lz59XG4gICAgICAgICAgPC9jLkJveD5cbiAgICAgICAgPC9jLkJ1dHRvbj59XG4gICAgICA8Lz59XG4gICAgICB7aXNDb25jZW50cmF0ZWQgPT09IGZhbHNlICYmIDw+XG4gICAgICAgIDxjLkJ1dHRvblxuICAgICAgICAgIHJlZj17cmVmfVxuICAgICAgICAgIHsuLi5wcm9wc31cbiAgICAgICAgICB2YXJpYW50PXtpc0FjdGl2ZSA/ICdhY3RpdmUnIDogdW5kZWZpbmVkfVxuICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB7XG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgZ28uZG8oJ2V4ZWMnLCB7IGlkOiBsaW5rSWQgfSk7XG4gICAgICAgICAgICBvbkNsaWNrICYmIG9uQ2xpY2sobGluayk7XG4gICAgICAgICAgfX1cbiAgICAgICAgICBqdXN0aWZ5Q29udGVudD17J2xlZnQnfVxuICAgICAgICAgIHB0PXsyfSBwYj17Mn0gdz0nMCcgaD0nMTAwJSdcbiAgICAgICAgPlxuICAgICAgICAgIHtpY29ufVxuICAgICAgICA8L2MuQnV0dG9uPlxuICAgICAgPC8+fVxuICAgIDwvZ28uT24+O1xuICB9O1xufSJdfQ==",
          "link_id": 3936
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 4545,
      "src_id": 4545,
      "handler_id": 4556,
      "execution_provider_id": 33,
      "isolation_provider_id": 144,
      "dist": {
        "id": 4545,
        "type_id": 717,
        "from_id": 0,
        "to_id": 0,
        "value": null,
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 4549,
      "src_id": 4549,
      "handler_id": 4553,
      "execution_provider_id": 33,
      "isolation_provider_id": 144,
      "dist": {
        "id": 4549,
        "type_id": 717,
        "from_id": 0,
        "to_id": 0,
        "value": null,
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 4586,
      "src_id": 4001,
      "handler_id": 4005,
      "execution_provider_id": 33,
      "isolation_provider_id": 144,
      "dist": {
        "id": 4586,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 1026,
          "value": "({ deep, data, require, go }) => {\n    const React = require('react');\n    const c = require('@chakra-ui/react');\n    const dpl = '@deep-foundation/perception-links';\n    const dc = '@deep-foundation/core';\n    return ({ go, disclosure: _disclosure, defaultContainerId, defaultTypeId, defaultFromId, defaultToId, isActive, }, ref) => {\n        const __disclosure = c.useDisclosure();\n        const disclosure = _disclosure || __disclosure;\n        return React.createElement(go.On, { do: {\n                'exec': () => disclosure.onOpen(),\n            } },\n            React.createElement(c.Button, { ref: ref, variant: isActive ? 'active' : undefined, justifyContent: 'center', position: 'relative', onClick: () => go.do('exec') },\n                React.createElement(c.Box, { position: 'absolute', right: 1, top: 1 }, true ? '🔓' : '🔒'),\n                React.createElement(c.Text, { pr: 1 }, \"+\"),\n                \" insert\"),\n            React.createElement(go.Component, { path: [dpl, 'LinkInsertModal'], disclosure: disclosure, defaultContainerId: defaultContainerId, defaultTypeId: defaultTypeId, defaultFromId: defaultFromId, defaultToId: defaultToId }));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxDQUFDLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRTtJQUM5QixNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDL0IsTUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLGtCQUFrQixDQUFDLENBQUM7SUFFdEMsTUFBTSxHQUFHLEdBQUcsbUNBQW1DLENBQUM7SUFDaEQsTUFBTSxFQUFFLEdBQUcsdUJBQXVCLENBQUM7SUFFbkMsT0FBTyxDQUFDLEVBQ04sRUFBRSxFQUVGLFVBQVUsRUFBRSxXQUFXLEVBRXZCLGtCQUFrQixFQUNsQixhQUFhLEVBQ2IsYUFBYSxFQUNiLFdBQVcsRUFFWCxRQUFRLEdBQ1QsRUFBRSxHQUFHLEVBQUUsRUFBRTtRQUNSLE1BQU0sWUFBWSxHQUFHLENBQUMsQ0FBQyxhQUFhLEVBQUUsQ0FBQztRQUN2QyxNQUFNLFVBQVUsR0FBRyxXQUFXLElBQUksWUFBWSxDQUFDO1FBRS9DLE9BQU8sb0JBQUMsRUFBRSxDQUFDLEVBQUUsSUFBQyxFQUFFLEVBQUU7Z0JBQ2hCLE1BQU0sRUFBRSxHQUFHLEVBQUUsQ0FBQyxVQUFVLENBQUMsTUFBTSxFQUFFO2FBQ2xDO1lBQ0Msb0JBQUMsQ0FBQyxDQUFDLE1BQU0sSUFDUCxHQUFHLEVBQUUsR0FBRyxFQUNSLE9BQU8sRUFBRSxRQUFRLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUFFLGNBQWMsRUFBQyxRQUFRLEVBQUMsUUFBUSxFQUFDLFVBQVUsRUFDckYsT0FBTyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDO2dCQUU1QixvQkFBQyxDQUFDLENBQUMsR0FBRyxJQUFDLFFBQVEsRUFBQyxVQUFVLEVBQUMsS0FBSyxFQUFFLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxJQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQVM7Z0JBQ3pFLG9CQUFDLENBQUMsQ0FBQyxJQUFJLElBQUMsRUFBRSxFQUFFLENBQUMsUUFBWTswQkFDaEI7WUFDWCxvQkFBQyxFQUFFLENBQUMsU0FBUyxJQUFDLElBQUksRUFBRSxDQUFDLEdBQUcsRUFBRSxpQkFBaUIsQ0FBQyxFQUFFLFVBQVUsRUFBRSxVQUFVLEVBQ2xFLGtCQUFrQixFQUFFLGtCQUFrQixFQUN0QyxhQUFhLEVBQUUsYUFBYSxFQUM1QixhQUFhLEVBQUUsYUFBYSxFQUM1QixXQUFXLEVBQUUsV0FBVyxHQUN4QixDQUNJLENBQUM7SUFDWCxDQUFDLENBQUM7QUFDSixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIoeyBkZWVwLCBkYXRhLCByZXF1aXJlLCBnbyB9KSA9PiB7XG4gIGNvbnN0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbiAgY29uc3QgYyA9IHJlcXVpcmUoJ0BjaGFrcmEtdWkvcmVhY3QnKTtcblxuICBjb25zdCBkcGwgPSAnQGRlZXAtZm91bmRhdGlvbi9wZXJjZXB0aW9uLWxpbmtzJztcbiAgY29uc3QgZGMgPSAnQGRlZXAtZm91bmRhdGlvbi9jb3JlJztcblxuICByZXR1cm4gKHtcbiAgICBnbyxcblxuICAgIGRpc2Nsb3N1cmU6IF9kaXNjbG9zdXJlLFxuXG4gICAgZGVmYXVsdENvbnRhaW5lcklkLFxuICAgIGRlZmF1bHRUeXBlSWQsXG4gICAgZGVmYXVsdEZyb21JZCxcbiAgICBkZWZhdWx0VG9JZCxcblxuICAgIGlzQWN0aXZlLFxuICB9LCByZWYpID0+IHtcbiAgICBjb25zdCBfX2Rpc2Nsb3N1cmUgPSBjLnVzZURpc2Nsb3N1cmUoKTtcbiAgICBjb25zdCBkaXNjbG9zdXJlID0gX2Rpc2Nsb3N1cmUgfHwgX19kaXNjbG9zdXJlO1xuXG4gICAgcmV0dXJuIDxnby5PbiBkbz17e1xuICAgICAgJ2V4ZWMnOiAoKSA9PiBkaXNjbG9zdXJlLm9uT3BlbigpLFxuICAgIH19PlxuICAgICAgPGMuQnV0dG9uXG4gICAgICAgIHJlZj17cmVmfVxuICAgICAgICB2YXJpYW50PXtpc0FjdGl2ZSA/ICdhY3RpdmUnIDogdW5kZWZpbmVkfSBqdXN0aWZ5Q29udGVudD0nY2VudGVyJyBwb3NpdGlvbj0ncmVsYXRpdmUnXG4gICAgICAgIG9uQ2xpY2s9eygpID0+IGdvLmRvKCdleGVjJyl9XG4gICAgICA+XG4gICAgICAgIDxjLkJveCBwb3NpdGlvbj0nYWJzb2x1dGUnIHJpZ2h0PXsxfSB0b3A9ezF9Pnt0cnVlID8gJ/CflJMnIDogJ/CflJInfTwvYy5Cb3g+XG4gICAgICAgIDxjLlRleHQgcHI9ezF9Pis8L2MuVGV4dD4gaW5zZXJ0XG4gICAgICA8L2MuQnV0dG9uPlxuICAgICAgPGdvLkNvbXBvbmVudCBwYXRoPXtbZHBsLCAnTGlua0luc2VydE1vZGFsJ119IGRpc2Nsb3N1cmU9e2Rpc2Nsb3N1cmV9XG4gICAgICAgIGRlZmF1bHRDb250YWluZXJJZD17ZGVmYXVsdENvbnRhaW5lcklkfVxuICAgICAgICBkZWZhdWx0VHlwZUlkPXtkZWZhdWx0VHlwZUlkfVxuICAgICAgICBkZWZhdWx0RnJvbUlkPXtkZWZhdWx0RnJvbUlkfVxuICAgICAgICBkZWZhdWx0VG9JZD17ZGVmYXVsdFRvSWR9XG4gICAgICAvPlxuICAgIDwvZ28uT24+O1xuICB9O1xufSJdfQ==",
          "link_id": 4586
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 4621,
      "src_id": 3983,
      "handler_id": 3987,
      "execution_provider_id": 33,
      "isolation_provider_id": 144,
      "dist": {
        "id": 4621,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 1030,
          "value": "({ deep, data, require, go }) => {\n    const React = require('react');\n    const c = require('@chakra-ui/react');\n    const dpl = '@deep-foundation/perception-links';\n    const dc = '@deep-foundation/core';\n    return ({ go, linkId, containerId, disclosure: _disclosure, isActive, }, ref) => {\n        if (!linkId)\n            throw new Error('!linkId');\n        const __disclosure = c.useDisclosure();\n        const disclosure = _disclosure || __disclosure;\n        return React.createElement(go.On, { do: {\n                'exec': () => disclosure.onOpen(),\n            } },\n            React.createElement(c.Button, { ref: ref, variant: isActive ? 'active' : undefined, justifyContent: 'center', position: 'relative', onClick: () => go.do('exec') },\n                React.createElement(c.Box, { position: 'absolute', right: 1, top: 1 }, true ? '🔓' : '🔒'),\n                React.createElement(c.Text, { pr: 1 }, \"x\"),\n                \" delete\"),\n            React.createElement(go.Component, { path: [dpl, 'LinkDeleteModal'], disclosure: disclosure, linkId: linkId, containerId: containerId }));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxDQUFDLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRTtJQUM5QixNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDL0IsTUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLGtCQUFrQixDQUFDLENBQUM7SUFFdEMsTUFBTSxHQUFHLEdBQUcsbUNBQW1DLENBQUM7SUFDaEQsTUFBTSxFQUFFLEdBQUcsdUJBQXVCLENBQUM7SUFFbkMsT0FBTyxDQUFDLEVBQ04sRUFBRSxFQUVGLE1BQU0sRUFDTixXQUFXLEVBRVgsVUFBVSxFQUFFLFdBQVcsRUFDdkIsUUFBUSxHQUNULEVBQUUsR0FBRyxFQUFFLEVBQUU7UUFDUixJQUFJLENBQUMsTUFBTTtZQUFFLE1BQU0sSUFBSSxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUM7UUFFeEMsTUFBTSxZQUFZLEdBQUcsQ0FBQyxDQUFDLGFBQWEsRUFBRSxDQUFDO1FBQ3ZDLE1BQU0sVUFBVSxHQUFHLFdBQVcsSUFBSSxZQUFZLENBQUM7UUFFL0MsT0FBTyxvQkFBQyxFQUFFLENBQUMsRUFBRSxJQUFDLEVBQUUsRUFBRTtnQkFDaEIsTUFBTSxFQUFFLEdBQUcsRUFBRSxDQUFDLFVBQVUsQ0FBQyxNQUFNLEVBQUU7YUFDbEM7WUFDQyxvQkFBQyxDQUFDLENBQUMsTUFBTSxJQUNQLEdBQUcsRUFBRSxHQUFHLEVBQ1IsT0FBTyxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQUUsY0FBYyxFQUFDLFFBQVEsRUFBQyxRQUFRLEVBQUMsVUFBVSxFQUNyRixPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUM7Z0JBRTVCLG9CQUFDLENBQUMsQ0FBQyxHQUFHLElBQUMsUUFBUSxFQUFDLFVBQVUsRUFBQyxLQUFLLEVBQUUsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLElBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBUztnQkFDekUsb0JBQUMsQ0FBQyxDQUFDLElBQUksSUFBQyxFQUFFLEVBQUUsQ0FBQyxRQUFZOzBCQUNoQjtZQUNYLG9CQUFDLEVBQUUsQ0FBQyxTQUFTLElBQUMsSUFBSSxFQUFFLENBQUMsR0FBRyxFQUFFLGlCQUFpQixDQUFDLEVBQUUsVUFBVSxFQUFFLFVBQVUsRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLFdBQVcsRUFBRSxXQUFXLEdBQUcsQ0FDckcsQ0FBQztJQUNqQixDQUFDLENBQUM7QUFDSixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIoeyBkZWVwLCBkYXRhLCByZXF1aXJlLCBnbyB9KSA9PiB7XG4gIGNvbnN0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbiAgY29uc3QgYyA9IHJlcXVpcmUoJ0BjaGFrcmEtdWkvcmVhY3QnKTtcblxuICBjb25zdCBkcGwgPSAnQGRlZXAtZm91bmRhdGlvbi9wZXJjZXB0aW9uLWxpbmtzJztcbiAgY29uc3QgZGMgPSAnQGRlZXAtZm91bmRhdGlvbi9jb3JlJztcblxuICByZXR1cm4gKHtcbiAgICBnbyxcblxuICAgIGxpbmtJZCxcbiAgICBjb250YWluZXJJZCxcblxuICAgIGRpc2Nsb3N1cmU6IF9kaXNjbG9zdXJlLFxuICAgIGlzQWN0aXZlLFxuICB9LCByZWYpID0+IHtcbiAgICBpZiAoIWxpbmtJZCkgdGhyb3cgbmV3IEVycm9yKCchbGlua0lkJyk7XG5cbiAgICBjb25zdCBfX2Rpc2Nsb3N1cmUgPSBjLnVzZURpc2Nsb3N1cmUoKTtcbiAgICBjb25zdCBkaXNjbG9zdXJlID0gX2Rpc2Nsb3N1cmUgfHwgX19kaXNjbG9zdXJlO1xuXG4gICAgcmV0dXJuIDxnby5PbiBkbz17e1xuICAgICAgJ2V4ZWMnOiAoKSA9PiBkaXNjbG9zdXJlLm9uT3BlbigpLFxuICAgIH19PlxuICAgICAgPGMuQnV0dG9uXG4gICAgICAgIHJlZj17cmVmfVxuICAgICAgICB2YXJpYW50PXtpc0FjdGl2ZSA/ICdhY3RpdmUnIDogdW5kZWZpbmVkfSBqdXN0aWZ5Q29udGVudD0nY2VudGVyJyBwb3NpdGlvbj0ncmVsYXRpdmUnXG4gICAgICAgIG9uQ2xpY2s9eygpID0+IGdvLmRvKCdleGVjJyl9XG4gICAgICA+XG4gICAgICAgIDxjLkJveCBwb3NpdGlvbj0nYWJzb2x1dGUnIHJpZ2h0PXsxfSB0b3A9ezF9Pnt0cnVlID8gJ/CflJMnIDogJ/CflJInfTwvYy5Cb3g+XG4gICAgICAgIDxjLlRleHQgcHI9ezF9Png8L2MuVGV4dD4gZGVsZXRlXG4gICAgICA8L2MuQnV0dG9uPlxuICAgICAgPGdvLkNvbXBvbmVudCBwYXRoPXtbZHBsLCAnTGlua0RlbGV0ZU1vZGFsJ119IGRpc2Nsb3N1cmU9e2Rpc2Nsb3N1cmV9IGxpbmtJZD17bGlua0lkfSBjb250YWluZXJJZD17Y29udGFpbmVySWR9Lz5cbiAgICA8L2dvLlByb3ZpZGVyPjtcbiAgfTtcbn0iXX0=",
          "link_id": 4621
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 5320,
      "src_id": 5236,
      "handler_id": 5240,
      "execution_provider_id": 33,
      "isolation_provider_id": 144,
      "dist": {
        "id": 5320,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 1182,
          "value": "async ({ deep, data, Go, require }) => {\n    const React = require('react');\n    const c = require('@chakra-ui/react');\n    const dpl = '@deep-foundation/perception-links';\n    const dc = '@deep-foundation/core';\n    const dml = '@deep-foundation/deepmemo-links';\n    const Handler = deep.idLocal(dc, 'Handler');\n    const Compatable = deep.idLocal(dpl, 'Compatable');\n    const Header = deep.idLocal(dpl, 'Header');\n    const Menu = deep.idLocal(dpl, 'Menu');\n    const Stack = deep.idLocal(dpl, 'Stack');\n    const Item = ({ link, isActive }) => (React.createElement(Go.Handler, { handlerId: link.id, linkId: link.id, isActive: isActive }));\n    return ({ go, }, ref) => {\n        const { data: menu } = deep.useSubscription({\n            type_id: Handler,\n            out: {\n                type_id: Compatable,\n                to_id: Menu,\n            },\n            order_by: { id: 'desc' }\n        });\n        return React.createElement(go.On, { do: {\n                focus: (g, v, linkId, o) => {\n                    !go.value && go.focus(Stack);\n                    o?.id && go(Stack).focus(o?.id);\n                },\n            } },\n            React.createElement(go.Provider, { linkId: Stack },\n                React.createElement(go.Component, { path: [dpl, 'Stack'], links: menu, direction: 'vertical', Item: Item })));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFO0lBQ3BDLE1BQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUMvQixNQUFNLENBQUMsR0FBRyxPQUFPLENBQUMsa0JBQWtCLENBQUMsQ0FBQztJQUV0QyxNQUFNLEdBQUcsR0FBRyxtQ0FBbUMsQ0FBQztJQUNoRCxNQUFNLEVBQUUsR0FBRyx1QkFBdUIsQ0FBQztJQUNuQyxNQUFNLEdBQUcsR0FBRyxpQ0FBaUMsQ0FBQztJQUU5QyxNQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUUsRUFBRSxTQUFTLENBQUMsQ0FBQztJQUM1QyxNQUFNLFVBQVUsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxZQUFZLENBQUMsQ0FBQztJQUNuRCxNQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxRQUFRLENBQUMsQ0FBQztJQUMzQyxNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxNQUFNLENBQUMsQ0FBQztJQUN2QyxNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxPQUFPLENBQUMsQ0FBQztJQUV6QyxNQUFNLElBQUksR0FBRyxDQUFDLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLG9CQUFDLEVBQUUsQ0FBQyxPQUFPLElBQy9DLFNBQVMsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUNsQixNQUFNLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFDZixRQUFRLEVBQUUsUUFBUSxHQUNsQixDQUFDLENBQUM7SUFFSixPQUFPLENBQUMsRUFDTixFQUFFLEdBQ0gsRUFBRSxHQUFHLEVBQUUsRUFBRTtRQUNSLE1BQU0sRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQztZQUMxQyxPQUFPLEVBQUUsT0FBTztZQUNoQixHQUFHLEVBQUU7Z0JBQ0gsT0FBTyxFQUFFLFVBQVU7Z0JBQ25CLEtBQUssRUFBRSxJQUFJO2FBQ1o7WUFDRCxRQUFRLEVBQUUsRUFBRSxFQUFFLEVBQUUsTUFBTSxFQUFFO1NBQ3pCLENBQUMsQ0FBQztRQUVILE9BQU8sb0JBQUMsRUFBRSxDQUFDLEVBQUUsSUFBQyxFQUFFLEVBQUU7Z0JBQ2hCLEtBQUssRUFBRSxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsTUFBTSxFQUFDLENBQUMsRUFBRSxFQUFFO29CQUN0QixDQUFDLEVBQUUsQ0FBQyxLQUFLLElBQUksRUFBRSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQztvQkFDN0IsQ0FBQyxFQUFFLEVBQUUsSUFBSSxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztnQkFDbEMsQ0FBQzthQUNGO1lBQ0Msb0JBQUMsRUFBRSxDQUFDLFFBQVEsSUFBQyxNQUFNLEVBQUUsS0FBSztnQkFDeEIsb0JBQUMsRUFBRSxDQUFDLFNBQVMsSUFBQyxJQUFJLEVBQUUsQ0FBQyxHQUFHLEVBQUUsT0FBTyxDQUFDLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUMsVUFBVSxFQUFDLElBQUksRUFBRSxJQUFJLEdBQUcsQ0FDdkUsQ0FDUixDQUFDO0lBQ1gsQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiYXN5bmMgKHsgZGVlcCwgZGF0YSwgR28sIHJlcXVpcmUgfSkgPT4ge1xuICBjb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG4gIGNvbnN0IGMgPSByZXF1aXJlKCdAY2hha3JhLXVpL3JlYWN0Jyk7XG5cbiAgY29uc3QgZHBsID0gJ0BkZWVwLWZvdW5kYXRpb24vcGVyY2VwdGlvbi1saW5rcyc7XG4gIGNvbnN0IGRjID0gJ0BkZWVwLWZvdW5kYXRpb24vY29yZSc7XG4gIGNvbnN0IGRtbCA9ICdAZGVlcC1mb3VuZGF0aW9uL2RlZXBtZW1vLWxpbmtzJztcblxuICBjb25zdCBIYW5kbGVyID0gZGVlcC5pZExvY2FsKGRjLCAnSGFuZGxlcicpO1xuICBjb25zdCBDb21wYXRhYmxlID0gZGVlcC5pZExvY2FsKGRwbCwgJ0NvbXBhdGFibGUnKTtcbiAgY29uc3QgSGVhZGVyID0gZGVlcC5pZExvY2FsKGRwbCwgJ0hlYWRlcicpO1xuICBjb25zdCBNZW51ID0gZGVlcC5pZExvY2FsKGRwbCwgJ01lbnUnKTtcbiAgY29uc3QgU3RhY2sgPSBkZWVwLmlkTG9jYWwoZHBsLCAnU3RhY2snKTtcblxuICBjb25zdCBJdGVtID0gKHsgbGluaywgaXNBY3RpdmUgfSkgPT4gKDxHby5IYW5kbGVyXG4gICAgaGFuZGxlcklkPXtsaW5rLmlkfVxuICAgIGxpbmtJZD17bGluay5pZH1cbiAgICBpc0FjdGl2ZT17aXNBY3RpdmV9XG4gIC8+KTtcbiAgXG4gIHJldHVybiAoe1xuICAgIGdvLFxuICB9LCByZWYpID0+IHtcbiAgICBjb25zdCB7IGRhdGE6IG1lbnUgfSA9IGRlZXAudXNlU3Vic2NyaXB0aW9uKHtcbiAgICAgIHR5cGVfaWQ6IEhhbmRsZXIsXG4gICAgICBvdXQ6IHtcbiAgICAgICAgdHlwZV9pZDogQ29tcGF0YWJsZSxcbiAgICAgICAgdG9faWQ6IE1lbnUsXG4gICAgICB9LFxuICAgICAgb3JkZXJfYnk6IHsgaWQ6ICdkZXNjJyB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gPGdvLk9uIGRvPXt7XG4gICAgICBmb2N1czogKGcsdixsaW5rSWQsbykgPT4ge1xuICAgICAgICAhZ28udmFsdWUgJiYgZ28uZm9jdXMoU3RhY2spO1xuICAgICAgICBvPy5pZCAmJiBnbyhTdGFjaykuZm9jdXMobz8uaWQpO1xuICAgICAgfSxcbiAgICB9fT5cbiAgICAgIDxnby5Qcm92aWRlciBsaW5rSWQ9e1N0YWNrfT5cbiAgICAgICAgPGdvLkNvbXBvbmVudCBwYXRoPXtbZHBsLCAnU3RhY2snXX0gbGlua3M9e21lbnV9IGRpcmVjdGlvbj0ndmVydGljYWwnIEl0ZW09e0l0ZW19Lz5cbiAgICAgIDwvZ28uUHJvdmlkZXI+XG4gICAgPC9nby5Pbj47XG4gIH07XG59Il19",
          "link_id": 5320
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 5510,
      "src_id": 5298,
      "handler_id": 5304,
      "execution_provider_id": 33,
      "isolation_provider_id": 144,
      "dist": {
        "id": 5510,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 1202,
          "value": "async ({ deep, data, require }) => {\n    const React = require('react');\n    const { FaTree } = require(\"react-icons/fa\");\n    const c = require('@chakra-ui/react');\n    const dpl = '@deep-foundation/perception-links';\n    const dc = '@deep-foundation/core';\n    const Tree = deep.idLocal(dpl, 'Tree');\n    return ({ go, handlerId, isActive, }, ref) => {\n        return React.createElement(go.On, { do: {\n                exec: (g, v, o) => go.go.do('right', { ...o, id: Tree }),\n                click: (g, v, o) => go.do('exec', o),\n                right: (g, v, o) => go.do('exec', o),\n            } },\n            React.createElement(c.Button, { w: '3em', h: '3em', variant: isActive ? 'active' : undefined, ref: ref, onClick: () => go.do('exec') },\n                React.createElement(FaTree, null)));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxFQUFFLEVBQUU7SUFDaEMsTUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQy9CLE1BQU0sRUFBRSxNQUFNLEVBQUUsR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztJQUM3QyxNQUFNLENBQUMsR0FBRyxPQUFPLENBQUMsa0JBQWtCLENBQUMsQ0FBQztJQUV0QyxNQUFNLEdBQUcsR0FBRyxtQ0FBbUMsQ0FBQztJQUNoRCxNQUFNLEVBQUUsR0FBRyx1QkFBdUIsQ0FBQztJQUVuQyxNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxNQUFNLENBQUMsQ0FBQztJQUV2QyxPQUFPLENBQUMsRUFDTixFQUFFLEVBQ0YsU0FBUyxFQUVULFFBQVEsR0FDVCxFQUFFLEdBQUcsRUFBRSxFQUFFO1FBQ1IsT0FBTyxvQkFBQyxFQUFFLENBQUMsRUFBRSxJQUFDLEVBQUUsRUFBRTtnQkFDaEIsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxFQUFFLEdBQUcsQ0FBQyxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsQ0FBQztnQkFDdEQsS0FBSyxFQUFFLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQztnQkFDbEMsS0FBSyxFQUFFLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQzthQUNuQztZQUNDLG9CQUFDLENBQUMsQ0FBQyxNQUFNLElBQ1AsQ0FBQyxFQUFDLEtBQUssRUFBQyxDQUFDLEVBQUMsS0FBSyxFQUNmLE9BQU8sRUFBRSxRQUFRLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUN4QyxHQUFHLEVBQUUsR0FBRyxFQUNSLE9BQU8sRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQztnQkFFNUIsb0JBQUMsTUFBTSxPQUFFLENBQ0EsQ0FDTCxDQUFDO0lBQ1gsQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiYXN5bmMgKHsgZGVlcCwgZGF0YSwgcmVxdWlyZSB9KSA9PiB7XG4gIGNvbnN0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbiAgY29uc3QgeyBGYVRyZWUgfSA9IHJlcXVpcmUoXCJyZWFjdC1pY29ucy9mYVwiKTtcbiAgY29uc3QgYyA9IHJlcXVpcmUoJ0BjaGFrcmEtdWkvcmVhY3QnKTtcblxuICBjb25zdCBkcGwgPSAnQGRlZXAtZm91bmRhdGlvbi9wZXJjZXB0aW9uLWxpbmtzJztcbiAgY29uc3QgZGMgPSAnQGRlZXAtZm91bmRhdGlvbi9jb3JlJztcblxuICBjb25zdCBUcmVlID0gZGVlcC5pZExvY2FsKGRwbCwgJ1RyZWUnKTtcblxuICByZXR1cm4gKHtcbiAgICBnbyxcbiAgICBoYW5kbGVySWQsXG5cbiAgICBpc0FjdGl2ZSxcbiAgfSwgcmVmKSA9PiB7XG4gICAgcmV0dXJuIDxnby5PbiBkbz17e1xuICAgICAgZXhlYzogKGcsdixvKSA9PiBnby5nby5kbygncmlnaHQnLCB7IC4uLm8sIGlkOiBUcmVlIH0pKSxcbiAgICAgIGNsaWNrOiAoZyx2LG8pID0+IGdvLmRvKCdleGVjJywgbyksXG4gICAgICByaWdodDogKGcsdixvKSA9PiBnby5kbygnZXhlYycsIG8pLFxuICAgIH19PlxuICAgICAgPGMuQnV0dG9uXG4gICAgICAgIHc9JzNlbScgaD0nM2VtJ1xuICAgICAgICB2YXJpYW50PXtpc0FjdGl2ZSA/ICdhY3RpdmUnIDogdW5kZWZpbmVkfVxuICAgICAgICByZWY9e3JlZn1cbiAgICAgICAgb25DbGljaz17KCkgPT4gZ28uZG8oJ2V4ZWMnKX1cbiAgICAgID5cbiAgICAgICAgPEZhVHJlZS8+XG4gICAgICA8L2MuQnV0dG9uPlxuICAgIDwvZ28uT24+O1xuICB9O1xufSJdfQ==",
          "link_id": 5510
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 5679,
      "src_id": 5601,
      "handler_id": 5605,
      "execution_provider_id": 33,
      "isolation_provider_id": 144,
      "dist": {
        "id": 5679,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 1239,
          "value": "async ({ deep, data, require }) => {\n    const React = require('react');\n    const c = require('@chakra-ui/react');\n    const dpl = '@deep-foundation/perception-links';\n    const dc = '@deep-foundation/core';\n    const Tree = deep.idLocal(dpl, 'Tree');\n    return ({ go, using = false, fullWidth = null, }, ref) => {\n        return React.createElement(go.On, { do: {\n                focus: (g, v, linkId, o) => o?.id && go.focus(o.id),\n                use: (g, v, o) => go.current && go.current.do('use', o),\n                open: async (g, v, o) => {\n                    if (!go.current)\n                        await (go.focus(Tree).go.awaitRef(Tree));\n                    if (o?.id)\n                        go.current.do('open', o);\n                },\n                concentrate: (g, v, o) => {\n                    go.current && go.current.do('concentrate', o);\n                },\n            } },\n            React.createElement(c.Box, { ref: ref, w: '100%', h: '100%' }, !!go.value && [React.createElement(go.Provider, { key: go.value, linkId: go.value },\n                    React.createElement(go.Handler, { initialId: deep?.linkId, handlerId: go.value, saveHistory: true, using: using, fullWidth: fullWidth, queryField: 'opened' }))]));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxFQUFFLEVBQUU7SUFDaEMsTUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQy9CLE1BQU0sQ0FBQyxHQUFHLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBRXRDLE1BQU0sR0FBRyxHQUFHLG1DQUFtQyxDQUFDO0lBQ2hELE1BQU0sRUFBRSxHQUFHLHVCQUF1QixDQUFDO0lBRW5DLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBRXZDLE9BQU8sQ0FBQyxFQUNOLEVBQUUsRUFFRixLQUFLLEdBQUcsS0FBSyxFQUNiLFNBQVMsR0FBRyxJQUFJLEdBQ2pCLEVBQUUsR0FBRyxFQUFFLEVBQUU7UUFJUixPQUFPLG9CQUFDLEVBQUUsQ0FBQyxFQUFFLElBQUMsRUFBRSxFQUFFO2dCQUNoQixLQUFLLEVBQUUsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLE1BQU0sRUFBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLElBQUksRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO2dCQUNoRCxHQUFHLEVBQUUsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLE9BQU8sSUFBSSxFQUFFLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxLQUFLLEVBQUMsQ0FBQyxDQUFDO2dCQUNwRCxJQUFJLEVBQUUsS0FBSyxFQUFFLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFFLEVBQUU7b0JBQ3BCLElBQUksQ0FBQyxFQUFFLENBQUMsT0FBTzt3QkFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7b0JBQzFELElBQUksQ0FBQyxFQUFFLEVBQUU7d0JBQUUsRUFBRSxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUNyQyxDQUFDO2dCQUNELFdBQVcsRUFBRSxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFFLEVBQUU7b0JBQ3JCLEVBQUUsQ0FBQyxPQUFPLElBQUksRUFBRSxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsYUFBYSxFQUFFLENBQUMsQ0FBQyxDQUFDO2dCQUNoRCxDQUFDO2FBQ0Y7WUFDQyxvQkFBQyxDQUFDLENBQUMsR0FBRyxJQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFDLE1BQU0sRUFBQyxDQUFDLEVBQUMsTUFBTSxJQUMvQixDQUFDLENBQUMsRUFBRSxDQUFDLEtBQUssSUFBSSxDQUFDLG9CQUFDLEVBQUUsQ0FBQyxRQUFRLElBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQyxLQUFLLEVBQUUsTUFBTSxFQUFFLEVBQUUsQ0FBQyxLQUFLO29CQUMxRCxvQkFBQyxFQUFFLENBQUMsT0FBTyxJQUNULFNBQVMsRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUN2QixTQUFTLEVBQUUsRUFBRSxDQUFDLEtBQUssRUFDbkIsV0FBVyxRQUNYLEtBQUssRUFBRSxLQUFLLEVBQ1osU0FBUyxFQUFFLFNBQVMsRUFDcEIsVUFBVSxFQUFDLFFBQVEsR0FDbkIsQ0FDVSxDQUFDLENBQ1QsQ0FDRixDQUFDO0lBQ1gsQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiYXN5bmMgKHsgZGVlcCwgZGF0YSwgcmVxdWlyZSB9KSA9PiB7XG4gIGNvbnN0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbiAgY29uc3QgYyA9IHJlcXVpcmUoJ0BjaGFrcmEtdWkvcmVhY3QnKTtcblxuICBjb25zdCBkcGwgPSAnQGRlZXAtZm91bmRhdGlvbi9wZXJjZXB0aW9uLWxpbmtzJztcbiAgY29uc3QgZGMgPSAnQGRlZXAtZm91bmRhdGlvbi9jb3JlJztcblxuICBjb25zdCBUcmVlID0gZGVlcC5pZExvY2FsKGRwbCwgJ1RyZWUnKTtcblxuICByZXR1cm4gKHtcbiAgICBnbyxcblxuICAgIHVzaW5nID0gZmFsc2UsXG4gICAgZnVsbFdpZHRoID0gbnVsbCxcbiAgfSwgcmVmKSA9PiB7XG4gICAgLy8gY29uc3QgW2xheWVyLCBzZXRMYXllcl0gPSBnby51c2VRdWVyeVN0b3JlKGBsYXllcmAsIFRyZWUpO1xuICAgIC8vIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiBnby52YWx1ZSAmJiBzZXRMYXllcihnby52YWx1ZSksIFtnby52YWx1ZV0pO1xuXG4gICAgcmV0dXJuIDxnby5PbiBkbz17e1xuICAgICAgZm9jdXM6IChnLHYsbGlua0lkLG8pID0+IG8/LmlkICYmIGdvLmZvY3VzKG8uaWQpLFxuICAgICAgdXNlOiAoZyx2LG8pID0+IGdvLmN1cnJlbnQgJiYgZ28uY3VycmVudC5kbygndXNlJyxvKSxcbiAgICAgIG9wZW46IGFzeW5jIChnLHYsbykgPT4ge1xuICAgICAgICBpZiAoIWdvLmN1cnJlbnQpIGF3YWl0IChnby5mb2N1cyhUcmVlKS5nby5hd2FpdFJlZihUcmVlKSk7XG4gICAgICAgIGlmIChvPy5pZCkgZ28uY3VycmVudC5kbygnb3Blbicsbyk7XG4gICAgICB9LFxuICAgICAgY29uY2VudHJhdGU6IChnLHYsbykgPT4ge1xuICAgICAgICBnby5jdXJyZW50ICYmIGdvLmN1cnJlbnQuZG8oJ2NvbmNlbnRyYXRlJywgbyk7XG4gICAgICB9LFxuICAgIH19PlxuICAgICAgPGMuQm94IHJlZj17cmVmfSB3PScxMDAlJyBoPScxMDAlJz5cbiAgICAgICAgeyEhZ28udmFsdWUgJiYgWzxnby5Qcm92aWRlciBrZXk9e2dvLnZhbHVlfSBsaW5rSWQ9e2dvLnZhbHVlfT5cbiAgICAgICAgICA8Z28uSGFuZGxlclxuICAgICAgICAgICAgaW5pdGlhbElkPXtkZWVwPy5saW5rSWR9XG4gICAgICAgICAgICBoYW5kbGVySWQ9e2dvLnZhbHVlfVxuICAgICAgICAgICAgc2F2ZUhpc3RvcnlcbiAgICAgICAgICAgIHVzaW5nPXt1c2luZ31cbiAgICAgICAgICAgIGZ1bGxXaWR0aD17ZnVsbFdpZHRofVxuICAgICAgICAgICAgcXVlcnlGaWVsZD0nb3BlbmVkJ1xuICAgICAgICAgIC8+XG4gICAgICAgIDwvZ28uUHJvdmlkZXI+XX1cbiAgICAgIDwvYy5Cb3g+XG4gICAgPC9nby5Pbj47XG4gIH07XG59Il19",
          "link_id": 5679
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 5809,
      "src_id": 5809,
      "handler_id": 5821,
      "execution_provider_id": 33,
      "isolation_provider_id": 144,
      "dist": {
        "id": 5809,
        "type_id": 717,
        "from_id": 0,
        "to_id": 0,
        "value": null,
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 5865,
      "src_id": 5865,
      "handler_id": 5869,
      "execution_provider_id": 33,
      "isolation_provider_id": 144,
      "dist": {
        "id": 5865,
        "type_id": 717,
        "from_id": 0,
        "to_id": 0,
        "value": null,
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 6065,
      "src_id": 5628,
      "handler_id": 5632,
      "execution_provider_id": 33,
      "isolation_provider_id": 144,
      "dist": {
        "id": 6065,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 1284,
          "value": "async ({ deep, data, Go, require }) => {\n    const React = require('react');\n    const { MoonIcon, SunIcon } = require('@chakra-ui/icons');\n    const { GrGraphQl } = require(\"react-icons/gr\");\n    const { IoReload } = require(\"react-icons/io\");\n    const c = require('@chakra-ui/react');\n    const dpl = '@deep-foundation/perception-links';\n    const dc = '@deep-foundation/core';\n    const Menu = deep.idLocal(dpl, 'Menu');\n    const Layer = deep.idLocal(dpl, 'Layer');\n    const Header = deep.idLocal(dpl, 'Header');\n    const Queries = deep.idLocal(dpl, 'Queries');\n    const Tree = deep.idLocal(dpl, 'Tree');\n    return ({ go, linkId, Status, Auth, ColorMode, children, }, ref) => {\n        const nav = go.useNav();\n        nav(Menu, Menu, Header, Layer, Queries);\n        nav(Queries, Queries, Menu, Layer, Queries);\n        nav(Layer, Menu, Header, Layer, Layer);\n        nav(Header, Header, Header, Header, Layer);\n        React.useEffect(() => {\n            go.focus(Menu);\n        }, []);\n        const isMobile = c.useBreakpointValue({ base: true, md: false }, { fallback: 'xs' });\n        return React.createElement(go.On, { do: {\n                left: (g, v, o) => go.focus(nav.get(go.value, 'left'), o),\n                up: (g, v, o) => go.focus(nav.get(go.value, 'up'), o),\n                right: (g, v, o) => go.focus(nav.get(go.value, 'right'), o),\n                down: (g, v, o) => go.focus(nav.get(go.value, 'down'), o),\n                use: (g, v, o) => {\n                    if (go.data.usedId != o?.id && o?.id) {\n                        go.data.usedId = o.id;\n                        go(Header).do('use', o);\n                        go(Layer).do('use', o);\n                    }\n                },\n                open: async (g, v, o) => {\n                    if (!go(Layer))\n                        await (go.focus(Layer).go.awaitRef(Layer));\n                    go(Layer).do('open', o);\n                },\n                concentrate: (g, v, o) => {\n                    go(Layer).do('concentrate', o);\n                },\n            } },\n            React.createElement(c.Box, { ref: go.ref, h: '100vh', w: \"100vw\", position: \"fixed\", left: \"0%\", top: \"0%\" },\n                React.createElement(c.Grid, { templateAreas: `\"tabs tabs\"\n                              \"nav main\"`, gridTemplateRows: '3em 1fr', gridTemplateColumns: '3em 1fr', h: '100vh', w: \"100vw\", position: \"fixed\", left: \"0%\", top: \"0%\", color: 'blackAlpha.700', fontWeight: 'bold', ref: ref },\n                    React.createElement(c.GridItem, { area: 'tabs', zIndex: 1 },\n                        React.createElement(c.Flex, { w: \"100%\", h: \"100%\", bg: go.value === Header ? 'deepBgDark' : 'deepBg' },\n                            React.createElement(go.Provider, { linkId: Header },\n                                React.createElement(go.Handler, { linkId: deep.linkId, handlerId: Header, using: true })))),\n                    React.createElement(c.GridItem, { area: 'nav', zIndex: 1, position: \"relative\", h: \"100%\" },\n                        React.createElement(c.Flex, { direction: 'column', h: '100%', bg: go.value === Menu ? 'deepBgDark' : 'deepBg' },\n                            React.createElement(go.Provider, { linkId: Menu },\n                                React.createElement(go.Handler, { linkId: deep.linkId, handlerId: Menu }),\n                                React.createElement(c.Spacer, null)),\n                            React.createElement(c.VStack, null,\n                                React.createElement(c.Button, { w: '3em', h: '3em', as: 'a', href: `http://${deep?.client?.path}` },\n                                    React.createElement(GrGraphQl, null)),\n                                React.createElement(ColorMode, { w: '3em', h: '3em', dark: { children: React.createElement(SunIcon, null) }, light: { children: React.createElement(MoonIcon, null) } }),\n                                React.createElement(go.Provider, { linkId: Queries },\n                                    React.createElement(go.Component, { path: [dpl, 'Queries'], isActive: go.value === Queries },\n                                        React.createElement(Status, null))),\n                                React.createElement(Auth, null)))),\n                    React.createElement(c.GridItem, { area: 'main', overflow: \"hidden\", position: \"relative\", h: '100%', bg: go.value === Layer ? 'deepBgDark' : 'deepBg' },\n                        React.createElement(go.Provider, { linkId: Layer, value: Tree },\n                            React.createElement(go.Handler, { linkId: deep.linkId, handlerId: Layer, using: true, fullWidth: isMobile ? 'calc(100vw - 3em)' : null }))))));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFO0lBQ3BDLE1BQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUMvQixNQUFNLEVBQUUsUUFBUSxFQUFFLE9BQU8sRUFBRSxHQUFHLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBQzFELE1BQU0sRUFBRSxTQUFTLEVBQUUsR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztJQUNoRCxNQUFNLEVBQUUsUUFBUSxFQUFFLEdBQUcsT0FBTyxDQUFDLGdCQUFnQixDQUFDLENBQUM7SUFDL0MsTUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLGtCQUFrQixDQUFDLENBQUM7SUFFdEMsTUFBTSxHQUFHLEdBQUcsbUNBQW1DLENBQUM7SUFDaEQsTUFBTSxFQUFFLEdBQUcsdUJBQXVCLENBQUM7SUFFbkMsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDdkMsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDekMsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsUUFBUSxDQUFDLENBQUM7SUFDM0MsTUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsU0FBUyxDQUFDLENBQUM7SUFFN0MsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFFdkMsT0FBTyxDQUFDLEVBQ04sRUFBRSxFQUNGLE1BQU0sRUFFTixNQUFNLEVBQ04sSUFBSSxFQUNK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UUFBUSxJQUFDLE1BQU0sRUFBRSxPQUFPO29DQUMxQixvQkFBQyxFQUFFLENBQUMsU0FBUyxJQUFDLElBQUksRUFBRSxDQUFDLEdBQUcsRUFBRSxTQUFTLENBQUMsRUFBRSxRQUFRLEVBQUUsRUFBRSxDQUFDLEtBQUssS0FBSyxPQUFPO3dDQUFFLG9CQUFDLE1BQU0sT0FBRyxDQUFlLENBQ25GO2dDQUNkLG9CQUFDLElBQUksT0FBRyxDQUNDLENBQ0osQ0FDRTtvQkFDYixvQkFBQyxDQUFDLENBQUMsUUFBUSxJQUFDLElBQUksRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFDLFFBQVEsRUFBQyxRQUFRLEVBQUMsVUFBVSxFQUFDLENBQUMsRUFBQyxNQUFNLEVBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxLQUFLLEtBQUssS0FBSyxDQUFDLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLFFBQVE7d0JBQ3ZILG9CQUFDLEVBQUUsQ0FBQyxRQUFRLElBQUMsTUFBTSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsSUFBSTs0QkFDckMsb0JBQUMsRUFBRSxDQUFDLE9BQU8sSUFDVCxNQUFNLEVBQUUsSUFBSSxDQUFDLE1BQU0sRUFDbkIsU0FBUyxFQUFFLEtBQUssRUFDaEIsS0FBSyxRQUFDLFNBQVMsRUFBRSxRQUFRLENBQUMsQ0FBQyxDQUFDLG1CQUFtQixDQUFDLENBQUMsQ0FBQyxJQUFJLEdBQ3RELENBQ1UsQ0FDSCxDQUNOLENBQ0gsQ0FDRixDQUFDO0lBQ1gsQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiYXN5bmMgKHsgZGVlcCwgZGF0YSwgR28sIHJlcXVpcmUgfSkgPT4ge1xuICBjb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG4gIGNvbnN0IHsgTW9vbkljb24sIFN1bkljb24gfSA9IHJlcXVpcmUoJ0BjaGFrcmEtdWkvaWNvbnMnKTtcbiAgY29uc3QgeyBHckdyYXBoUWwgfSA9IHJlcXVpcmUoXCJyZWFjdC1pY29ucy9nclwiKTtcbiAgY29uc3QgeyBJb1JlbG9hZCB9ID0gcmVxdWlyZShcInJlYWN0LWljb25zL2lvXCIpO1xuICBjb25zdCBjID0gcmVxdWlyZSgnQGNoYWtyYS11aS9yZWFjdCcpO1xuXG4gIGNvbnN0IGRwbCA9ICdAZGVlcC1mb3VuZGF0aW9uL3BlcmNlcHRpb24tbGlua3MnO1xuICBjb25zdCBkYyA9ICdAZGVlcC1mb3VuZGF0aW9uL2NvcmUnO1xuXG4gIGNvbnN0IE1lbnUgPSBkZWVwLmlkTG9jYWwoZHBsLCAnTWVudScpO1xuICBjb25zdCBMYXllciA9IGRlZXAuaWRMb2NhbChkcGwsICdMYXllcicpO1xuICBjb25zdCBIZWFkZXIgPSBkZWVwLmlkTG9jYWwoZHBsLCAnSGVhZGVyJyk7XG4gIGNvbnN0IFF1ZXJpZXMgPSBkZWVwLmlkTG9jYWwoZHBsLCAnUXVlcmllcycpO1xuXG4gIGNvbnN0IFRyZWUgPSBkZWVwLmlkTG9jYWwoZHBsLCAnVHJlZScpO1xuXG4gIHJldHVybiAoe1xuICAgIGdvLFxuICAgIGxpbmtJZCxcblxuICAgIFN0YXR1cyxcbiAgICBBdXRoLFxuICAgIENvbG9yTW9kZSxcblxuICAgIGNoaWxkcmVuLFxuXG4gIH0sIHJlZikgPT4ge1xuICAgIGNvbnN0IG5hdiA9IGdvLnVzZU5hdigpO1xuICAgIG5hdihNZW51LCBNZW51LCBIZWFkZXIsIExheWVyLCBRdWVyaWVzKTtcbiAgICBuYXYoUXVlcmllcywgUXVlcmllcywgTWVudSwgTGF5ZXIsIFF1ZXJpZXMpO1xuICAgIG5hdihMYXllciwgTWVudSwgSGVhZGVyLCBMYXllciwgTGF5ZXIpO1xuICAgIG5hdihIZWFkZXIsIEhlYWRlciwgSGVhZGVyLCBIZWFkZXIsIExheWVyKTtcblxuICAgIC8vIGNvbnN0IHVzZVRoZW1lID0gZ28udXNlSG9vayh7IHBhdGg6IFtkcGwsICd1c2VUaGVtZSddIH0pO1xuICAgIC8vIGNvbnNvbGUubG9nKCd1c2VUaGVtZScsIHVzZVRoZW1lKTtcblxuICAgIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICBnby5mb2N1cyhNZW51KVxuXG4gICAgfSwgW10pO1xuXG4gICAgY29uc3QgaXNNb2JpbGUgPSBjLnVzZUJyZWFrcG9pbnRWYWx1ZShcbiAgICAgIHsgYmFzZTogdHJ1ZSwgbWQ6IGZhbHNlIH0sXG4gICAgICB7IGZhbGxiYWNrOiAneHMnIH0sXG4gICAgKTtcblxuICAgIHJldHVybiA8Z28uT25cbiAgICAgIGRvPXt7XG4gICAgICAgIGxlZnQ6IChnLCB2LCBvKSA9PiBnby5mb2N1cyhuYXYuZ2V0KGdvLnZhbHVlLCAnbGVmdCcpLCBvKSxcbiAgICAgICAgdXA6IChnLCB2LCBvKSA9PiBnby5mb2N1cyhuYXYuZ2V0KGdvLnZhbHVlLCAndXAnKSwgbyksXG4gICAgICAgIHJpZ2h0OiAoZywgdiwgbykgPT4gZ28uZm9jdXMobmF2LmdldChnby52YWx1ZSwgJ3JpZ2h0JyksIG8pLFxuICAgICAgICBkb3duOiAoZywgdiwgbykgPT4gZ28uZm9jdXMobmF2LmdldChnby52YWx1ZSwgJ2Rvd24nKSwgbyksXG4gICAgICAgIHVzZTogKGcsIHYsIG8pID0+IHtcbiAgICAgICAgICBpZiAoZ28uZGF0YS51c2VkSWQgIT0gbz8uaWQgJiYgbz8uaWQpIHtcbiAgICAgICAgICAgIGdvLmRhdGEudXNlZElkID0gby5pZDtcbiAgICAgICAgICAgIGdvKEhlYWRlcikuZG8oJ3VzZScsIG8pO1xuICAgICAgICAgICAgZ28oTGF5ZXIpLmRvKCd1c2UnLCBvKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIG9wZW46IGFzeW5jIChnLCB2LCBvKSA9PiB7XG4gICAgICAgICAgaWYgKCFnbyhMYXllcikpIGF3YWl0IChnby5mb2N1cyhMYXllcikuZ28uYXdhaXRSZWYoTGF5ZXIpKTtcbiAgICAgICAgICBnbyhMYXllcikuZG8oJ29wZW4nLCBvKTtcbiAgICAgICAgfSxcbiAgICAgICAgY29uY2VudHJhdGU6IChnLHYsbykgPT4ge1xuICAgICAgICAgIGdvKExheWVyKS5kbygnY29uY2VudHJhdGUnLCBvKTtcbiAgICAgICAgfSxcbiAgICAgIH19XG4gICAgPlxuICAgICAgPGMuQm94IHJlZj17Z28ucmVmfSBoPScxMDB2aCcgdz1cIjEwMHZ3XCIgcG9zaXRpb249XCJmaXhlZFwiIGxlZnQ9XCIwJVwiIHRvcD1cIjAlXCI+XG4gICAgICAgIDxjLkdyaWRcbiAgICAgICAgICB0ZW1wbGF0ZUFyZWFzPXtgXCJ0YWJzIHRhYnNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJuYXYgbWFpblwiYH1cbiAgICAgICAgICBncmlkVGVtcGxhdGVSb3dzPXsnM2VtIDFmcid9XG4gICAgICAgICAgZ3JpZFRlbXBsYXRlQ29sdW1ucz17JzNlbSAxZnInfVxuICAgICAgICAgIGg9JzEwMHZoJyB3PVwiMTAwdndcIiBwb3NpdGlvbj1cImZpeGVkXCIgbGVmdD1cIjAlXCIgdG9wPVwiMCVcIlxuICAgICAgICAgIGNvbG9yPSdibGFja0FscGhhLjcwMCdcbiAgICAgICAgICBmb250V2VpZ2h0PSdib2xkJ1xuICAgICAgICAgIHJlZj17cmVmfVxuICAgICAgICA+XG4gICAgICAgICAgPGMuR3JpZEl0ZW0gYXJlYT17J3RhYnMnfSB6SW5kZXg9ezF9PlxuICAgICAgICAgICAgPGMuRmxleCB3PVwiMTAwJVwiIGg9XCIxMDAlXCIgYmc9e2dvLnZhbHVlID09PSBIZWFkZXIgPyAnZGVlcEJnRGFyaycgOiAnZGVlcEJnJ30+XG4gICAgICAgICAgICAgIDxnby5Qcm92aWRlciBsaW5rSWQ9e0hlYWRlcn0+XG4gICAgICAgICAgICAgICAgPGdvLkhhbmRsZXJcbiAgICAgICAgICAgICAgICAgIGxpbmtJZD17ZGVlcC5saW5rSWR9XG4gICAgICAgICAgICAgICAgICBoYW5kbGVySWQ9e0hlYWRlcn1cbiAgICAgICAgICAgICAgICAgIHVzaW5nXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9nby5Qcm92aWRlcj5cbiAgICAgICAgICAgIDwvYy5GbGV4PlxuICAgICAgICAgIDwvYy5HcmlkSXRlbT5cbiAgICAgICAgICA8Yy5HcmlkSXRlbSBhcmVhPXsnbmF2J30gekluZGV4PXsxfSBwb3NpdGlvbj1cInJlbGF0aXZlXCIgaD1cIjEwMCVcIj5cbiAgICAgICAgICAgIDxjLkZsZXggZGlyZWN0aW9uPSdjb2x1bW4nIGg9JzEwMCUnIGJnPXtnby52YWx1ZSA9PT0gTWVudSA/ICdkZWVwQmdEYXJrJyA6ICdkZWVwQmcnfT5cbiAgICAgICAgICAgICAgPGdvLlByb3ZpZGVyIGxpbmtJZD17TWVudX0+XG4gICAgICAgICAgICAgICAgPGdvLkhhbmRsZXJcbiAgICAgICAgICAgICAgICAgIGxpbmtJZD17ZGVlcC5saW5rSWR9XG4gICAgICAgICAgICAgICAgICBoYW5kbGVySWQ9e01lbnV9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8Yy5TcGFjZXIgLz5cbiAgICAgICAgICAgICAgPC9nby5Qcm92aWRlcj5cbiAgICAgICAgICAgICAgPGMuVlN0YWNrPlxuICAgICAgICAgICAgICAgIDxjLkJ1dHRvbiB3PSczZW0nIGg9JzNlbScgYXM9J2EnIGhyZWY9e2BodHRwOi8vJHtkZWVwPy5jbGllbnQ/LnBhdGh9YH0+PEdyR3JhcGhRbCAvPjwvYy5CdXR0b24+XG4gICAgICAgICAgICAgICAgPENvbG9yTW9kZSB3PSczZW0nIGg9JzNlbScgZGFyaz17eyBjaGlsZHJlbjogPFN1bkljb24gLz4gfX0gbGlnaHQ9e3sgY2hpbGRyZW46IDxNb29uSWNvbiAvPiB9fSAvPlxuICAgICAgICAgICAgICAgIDxnby5Qcm92aWRlciBsaW5rSWQ9e1F1ZXJpZXN9PlxuICAgICAgICAgICAgICAgICAgPGdvLkNvbXBvbmVudCBwYXRoPXtbZHBsLCAnUXVlcmllcyddfSBpc0FjdGl2ZT17Z28udmFsdWUgPT09IFF1ZXJpZXN9PjxTdGF0dXMgLz48L2dvLkNvbXBvbmVudD5cbiAgICAgICAgICAgICAgICA8L2dvLlByb3ZpZGVyPlxuICAgICAgICAgICAgICAgIDxBdXRoIC8+XG4gICAgICAgICAgICAgIDwvYy5WU3RhY2s+XG4gICAgICAgICAgICA8L2MuRmxleD5cbiAgICAgICAgICA8L2MuR3JpZEl0ZW0+XG4gICAgICAgICAgPGMuR3JpZEl0ZW0gYXJlYT17J21haW4nfSBvdmVyZmxvdz1cImhpZGRlblwiIHBvc2l0aW9uPVwicmVsYXRpdmVcIiBoPScxMDAlJyBiZz17Z28udmFsdWUgPT09IExheWVyID8gJ2RlZXBCZ0RhcmsnIDogJ2RlZXBCZyd9PlxuICAgICAgICAgICAgPGdvLlByb3ZpZGVyIGxpbmtJZD17TGF5ZXJ9IHZhbHVlPXtUcmVlfT5cbiAgICAgICAgICAgICAgPGdvLkhhbmRsZXJcbiAgICAgICAgICAgICAgICBsaW5rSWQ9e2RlZXAubGlua0lkfVxuICAgICAgICAgICAgICAgIGhhbmRsZXJJZD17TGF5ZXJ9XG4gICAgICAgICAgICAgICAgdXNpbmcgZnVsbFdpZHRoPXtpc01vYmlsZSA/ICdjYWxjKDEwMHZ3IC0gM2VtKScgOiBudWxsfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9nby5Qcm92aWRlcj5cbiAgICAgICAgICA8L2MuR3JpZEl0ZW0+XG4gICAgICAgIDwvYy5HcmlkPlxuICAgICAgPC9jLkJveD5cbiAgICA8L2dvLk9uPjtcbiAgfTtcbn0iXX0=",
          "link_id": 6065
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 6282,
      "src_id": 6262,
      "handler_id": 6266,
      "execution_provider_id": 33,
      "isolation_provider_id": 144,
      "dist": {
        "id": 6282,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 1318,
          "value": "async ({ deep, data, require }) => {\n    const React = require('react');\n    const { PiGraphBold } = require(\"react-icons/pi\");\n    const c = require('@chakra-ui/react');\n    const dpl = '@deep-foundation/perception-links';\n    const dc = '@deep-foundation/core';\n    const Graph = deep.idLocal(dpl, 'Graph');\n    return ({ go, handlerId, isActive, }, ref) => {\n        return React.createElement(go.On, { do: {\n                exec: (g, v, o) => go.go.do('right', { ...o, id: Graph }),\n                click: (g, v, o) => go.do('exec', o),\n                right: (g, v, o) => go.do('exec', o),\n            } },\n            React.createElement(c.Button, { w: '3em', h: '3em', variant: isActive ? 'active' : undefined, onClick: () => go.do('exec'), ref: ref },\n                React.createElement(PiGraphBold, null)));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxFQUFFLEVBQUU7SUFDaEMsTUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQy9CLE1BQU0sRUFBRSxXQUFXLEVBQUUsR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztJQUNsRCxNQUFNLENBQUMsR0FBRyxPQUFPLENBQUMsa0JBQWtCLENBQUMsQ0FBQztJQUV0QyxNQUFNLEdBQUcsR0FBRyxtQ0FBbUMsQ0FBQztJQUNoRCxNQUFNLEVBQUUsR0FBRyx1QkFBdUIsQ0FBQztJQUVuQyxNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxPQUFPLENBQUMsQ0FBQztJQUV6QyxPQUFPLENBQUMsRUFDTixFQUFFLEVBQ0YsU0FBUyxFQUVULFFBQVEsR0FDVCxFQUFFLEdBQUcsRUFBRSxFQUFFO1FBQ1IsT0FBTyxvQkFBQyxFQUFFLENBQUMsRUFBRSxJQUFDLEVBQUUsRUFBRTtnQkFDaEIsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxFQUFFLEdBQUcsQ0FBQyxFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQUUsQ0FBQztnQkFDdkQsS0FBSyxFQUFFLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQztnQkFDbEMsS0FBSyxFQUFFLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQzthQUNuQztZQUNDLG9CQUFDLENBQUMsQ0FBQyxNQUFNLElBQ1AsQ0FBQyxFQUFDLEtBQUssRUFBQyxDQUFDLEVBQUMsS0FBSyxFQUNmLE9BQU8sRUFBRSxRQUFRLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUN4QyxPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsRUFDNUIsR0FBRyxFQUFFLEdBQUc7Z0JBRVIsb0JBQUMsV0FBVyxPQUFFLENBQ0wsQ0FDTCxDQUFDO0lBQ1gsQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiYXN5bmMgKHsgZGVlcCwgZGF0YSwgcmVxdWlyZSB9KSA9PiB7XG4gIGNvbnN0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbiAgY29uc3QgeyBQaUdyYXBoQm9sZCB9ID0gcmVxdWlyZShcInJlYWN0LWljb25zL3BpXCIpO1xuICBjb25zdCBjID0gcmVxdWlyZSgnQGNoYWtyYS11aS9yZWFjdCcpO1xuXG4gIGNvbnN0IGRwbCA9ICdAZGVlcC1mb3VuZGF0aW9uL3BlcmNlcHRpb24tbGlua3MnO1xuICBjb25zdCBkYyA9ICdAZGVlcC1mb3VuZGF0aW9uL2NvcmUnO1xuXG4gIGNvbnN0IEdyYXBoID0gZGVlcC5pZExvY2FsKGRwbCwgJ0dyYXBoJyk7XG5cbiAgcmV0dXJuICh7XG4gICAgZ28sXG4gICAgaGFuZGxlcklkLFxuXG4gICAgaXNBY3RpdmUsXG4gIH0sIHJlZikgPT4ge1xuICAgIHJldHVybiA8Z28uT24gZG89e3tcbiAgICAgIGV4ZWM6IChnLHYsbykgPT4gZ28uZ28uZG8oJ3JpZ2h0JywgeyAuLi5vLCBpZDogR3JhcGggfSkpLFxuICAgICAgY2xpY2s6IChnLHYsbykgPT4gZ28uZG8oJ2V4ZWMnLCBvKSxcbiAgICAgIHJpZ2h0OiAoZyx2LG8pID0+IGdvLmRvKCdleGVjJywgbyksXG4gICAgfX0+XG4gICAgICA8Yy5CdXR0b25cbiAgICAgICAgdz0nM2VtJyBoPSczZW0nXG4gICAgICAgIHZhcmlhbnQ9e2lzQWN0aXZlID8gJ2FjdGl2ZScgOiB1bmRlZmluZWR9XG4gICAgICAgIG9uQ2xpY2s9eygpID0+IGdvLmRvKCdleGVjJyl9XG4gICAgICAgIHJlZj17cmVmfVxuICAgICAgPlxuICAgICAgICA8UGlHcmFwaEJvbGQvPlxuICAgICAgPC9jLkJ1dHRvbj5cbiAgICA8L2dvLk9uPjtcbiAgfTtcbn0iXX0=",
          "link_id": 6282
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 8341,
      "src_id": 5646,
      "handler_id": 5650,
      "execution_provider_id": 33,
      "isolation_provider_id": 144,
      "dist": {
        "id": 8341,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 1359,
          "value": "async ({ deep, data, Go, require }) => {\n    const { GrClear } = require(\"react-icons/gr\");\n    const React = require('react');\n    const c = require('@chakra-ui/react');\n    const _ = require('lodash');\n    const { useDebounceCallback } = require('@react-hook/debounce');\n    const dpl = '@deep-foundation/perception-links';\n    const dc = '@deep-foundation/core';\n    const Contain = deep.idLocal(dc, 'Contain');\n    const containTree = deep.idLocal(dc, 'containTree');\n    const TreeLinkButton = deep.idLocal(dpl, 'TreeLinkButton');\n    const History = deep.idLocal(dpl, 'History');\n    const HistoryHandler = deep.idLocal(dpl, 'HistoryHandler');\n    const Menu = deep.idLocal(dpl, 'Menu');\n    const Stack = deep.idLocal(dpl, 'Stack');\n    const FinderButton = deep.idLocal(dpl, 'FinderButton');\n    const Item = ({ link, isActive, isConcentrated }) => {\n        const go = Go.useGo();\n        return React.createElement(Go.Handler, { handlerId: TreeLinkButton, linkId: link.id, isActive: isActive, minW: isConcentrated === false ? '3em' : '8em', h: '100%', maxH: '100%', variant: 'short', isConcentrated: isConcentrated });\n    };\n    return ({ go, using = false, }, ref) => {\n        const { data: history } = deep.useSubscription({\n            type_id: History,\n            from_id: deep.linkId,\n            order_by: { id: 'desc' },\n            limit: 30,\n            return: {\n                item: { relation: 'to' },\n            },\n        });\n        const [concentrate, setConcentrate] = React.useState('');\n        const concetrateDebounce = useDebounceCallback((concentrate) => {\n            go.root().do('concentrate', { value: concentrate });\n        }, 500);\n        React.useEffect(() => {\n            concetrateDebounce(concentrate);\n        }, [concentrate]);\n        const { data: items, ids } = React.useMemo(() => {\n            const _ids = [];\n            const filtered = _.uniqBy(history.map(h => h?.to), (l) => l?.id).filter(l => {\n                if (!!l?.id)\n                    _ids.push(l?.id);\n                return !!l?.id;\n            });\n            return { data: filtered, ids: _ids };\n        }, [history]);\n        const nav = go.useNav();\n        nav(FinderButton, FinderButton, FinderButton, Stack, 'down');\n        nav(Stack, FinderButton, Stack, 'clear', 'down');\n        nav('clear', Stack, 'clear', 'clear', 'down');\n        const { ids: concentrated } = deep.useSearch(concentrate, {\n            db: false, sort: false,\n            query: { id: { _in: ids } },\n            skip: !!concentrate,\n        });\n        console.log({ concentrated });\n        return React.createElement(go.On, { do: {\n                exec: (g, v, o) => o?.id || go.value == Stack || !go.value ? go.root().do('open', { id: o?.id || go(Stack).value, focus: true }) : go.do(go.value),\n                use: (g, v, o) => go(Stack) && go(Stack).do('use', o),\n                focus: (g, v, linkId, o) => {\n                    !go.value && go.focus(Stack);\n                    o?.id && go(Stack).focus(o?.id);\n                },\n                right: (g, v, o) => go.focus(nav.get(go.value || Stack, 'right')),\n                left: (g, v, o) => go.focus(nav.get(go.value || Stack, 'left')),\n                finder: (g, v, o) => go(FinderButton).do('exec'),\n                clear: (g, v, o) => deep.delete({\n                    up: {\n                        tree_id: containTree,\n                        parent: {\n                            type_id: Contain,\n                            to: { type_id: { _in: [History, HistoryHandler] } },\n                        },\n                    },\n                }),\n            } },\n            React.createElement(c.Flex, { ref: ref, w: '100%' },\n                React.createElement(go.Provider, { linkId: FinderButton },\n                    React.createElement(go.Handler, { handlerId: FinderButton, isActive: go.value === FinderButton })),\n                React.createElement(c.Box, { w: '12em', h: '100%', position: 'relative' },\n                    React.createElement(go.Editor, { value: concentrate, onChange: setConcentrate, fillSize: true, lineNumbers: false })),\n                React.createElement(go.Provider, { linkId: Stack },\n                    React.createElement(go.Component, { path: [dpl, 'Stack'], links: items, direction: 'horizontal', Item: Item, flex: '1', using: using, concentrated: !!concentrate && concentrated })),\n                React.createElement(c.Button, { h: '3em', w: '3em', variant: go.value === 'clear' ? 'active' : undefined, onClick: () => go.focus('clear').go.do('clear') },\n                    React.createElement(GrClear, null))));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFO0lBQ3BDLE1BQU0sRUFBRSxPQUFPLEVBQUUsR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztJQUM5QyxNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDL0IsTUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLGtCQUFrQixDQUFDLENBQUM7SUFDdEMsTUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQzVCLE1BQU0sRUFBRSxtQkFBbUIsRUFBRSxHQUFHLE9BQU8sQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO0lBRWhFLE1BQU0sR0FBRyxHQUFHLG1DQUFtQyxDQUFDO0lBQ2hELE1BQU0sRUFBRSxHQUFHLHVCQUF1QixDQUFDO0lBRW5DLE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsRUFBRSxFQUFFLFNBQVMsQ0FBQyxDQUFDO0lBQzVDLE1BQU0sV0FBVyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsRUFBRSxFQUFFLGFBQWEsQ0FBQyxDQUFDO0lBQ3BELE1BQU0sY0FBYyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLGdCQUFnQixDQUFDLENBQUM7SUFDM0QsTUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsU0FBUyxDQUFDLENBQUM7SUFDN0MsTUFBTSxjQUFjLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQztJQUMzRCxNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxNQUFNLENBQUMsQ0FBQztJQUN2QyxNQUFN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QUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQ3BFLE9BQU8sRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDO29CQUNoRCxvQkFBQyxPQUFPLE9BQUUsQ0FBVyxDQUNmLENBQ0gsQ0FBQztJQUNYLENBQUMsQ0FBQztBQUNKLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImFzeW5jICh7IGRlZXAsIGRhdGEsIEdvLCByZXF1aXJlIH0pID0+IHtcbiAgY29uc3QgeyBHckNsZWFyIH0gPSByZXF1aXJlKFwicmVhY3QtaWNvbnMvZ3JcIik7XG4gIGNvbnN0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbiAgY29uc3QgYyA9IHJlcXVpcmUoJ0BjaGFrcmEtdWkvcmVhY3QnKTtcbiAgY29uc3QgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xuICBjb25zdCB7IHVzZURlYm91bmNlQ2FsbGJhY2sgfSA9IHJlcXVpcmUoJ0ByZWFjdC1ob29rL2RlYm91bmNlJyk7XG5cbiAgY29uc3QgZHBsID0gJ0BkZWVwLWZvdW5kYXRpb24vcGVyY2VwdGlvbi1saW5rcyc7XG4gIGNvbnN0IGRjID0gJ0BkZWVwLWZvdW5kYXRpb24vY29yZSc7XG5cbiAgY29uc3QgQ29udGFpbiA9IGRlZXAuaWRMb2NhbChkYywgJ0NvbnRhaW4nKTtcbiAgY29uc3QgY29udGFpblRyZWUgPSBkZWVwLmlkTG9jYWwoZGMsICdjb250YWluVHJlZScpO1xuICBjb25zdCBUcmVlTGlua0J1dHRvbiA9IGRlZXAuaWRMb2NhbChkcGwsICdUcmVlTGlua0J1dHRvbicpO1xuICBjb25zdCBIaXN0b3J5ID0gZGVlcC5pZExvY2FsKGRwbCwgJ0hpc3RvcnknKTtcbiAgY29uc3QgSGlzdG9yeUhhbmRsZXIgPSBkZWVwLmlkTG9jYWwoZHBsLCAnSGlzdG9yeUhhbmRsZXInKTtcbiAgY29uc3QgTWVudSA9IGRlZXAuaWRMb2NhbChkcGwsICdNZW51Jyk7XG4gIGNvbnN0IFN0YWNrID0gZGVlcC5pZExvY2FsKGRwbCwgJ1N0YWNrJyk7XG4gIGNvbnN0IEZpbmRlckJ1dHRvbiA9IGRlZXAuaWRMb2NhbChkcGwsICdGaW5kZXJCdXR0b24nKTtcbiAgXG4gIGNvbnN0IEl0ZW0gPSAoeyBsaW5rLCBpc0FjdGl2ZSwgaXNDb25jZW50cmF0ZWQgfSkgPT4ge1xuICAgIGNvbnN0IGdvID0gR28udXNlR28oKTtcbiAgICByZXR1cm4gPEdvLkhhbmRsZXJcbiAgICAgIGhhbmRsZXJJZD17VHJlZUxpbmtCdXR0b259XG4gICAgICBsaW5rSWQ9e2xpbmsuaWR9XG4gICAgICBpc0FjdGl2ZT17aXNBY3RpdmV9XG4gICAgICBtaW5XPXtpc0NvbmNlbnRyYXRlZCA9PT0gZmFsc2UgPyAnM2VtJyA6ICc4ZW0nfSBoPScxMDAlJyBtYXhIPScxMDAlJyB2YXJpYW50PSdzaG9ydCdcbiAgICAgIGlzQ29uY2VudHJhdGVkPXtpc0NvbmNlbnRyYXRlZH1cbiAgICAvPjtcbiAgfTtcbiAgXG4gIHJldHVybiAoe1xuICAgIGdvLFxuXG4gICAgdXNpbmcgPSBmYWxzZSxcbiAgfSwgcmVmKSA9PiB7XG4gICAgY29uc3QgeyBkYXRhOiBoaXN0b3J5IH0gPSBkZWVwLnVzZVN1YnNjcmlwdGlvbih7XG4gICAgICB0eXBlX2lkOiBIaXN0b3J5LFxuICAgICAgZnJvbV9pZDogZGVlcC5saW5rSWQsXG4gICAgICBvcmRlcl9ieTogeyBpZDogJ2Rlc2MnIH0sXG4gICAgICBsaW1pdDogMzAsXG4gICAgICByZXR1cm46IHtcbiAgICAgICAgaXRlbTogeyByZWxhdGlvbjogJ3RvJyB9LFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIGNvbnN0IFtjb25jZW50cmF0ZSwgc2V0Q29uY2VudHJhdGVdID0gUmVhY3QudXNlU3RhdGUoJycpO1xuICAgIGNvbnN0IGNvbmNldHJhdGVEZWJvdW5jZSA9IHVzZURlYm91bmNlQ2FsbGJhY2soKGNvbmNlbnRyYXRlKSA9PiB7XG4gICAgICBnby5yb290KCkuZG8oJ2NvbmNlbnRyYXRlJywgeyB2YWx1ZTogY29uY2VudHJhdGUgfSk7XG4gICAgfSwgNTAwKTtcbiAgICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgY29uY2V0cmF0ZURlYm91bmNlKGNvbmNlbnRyYXRlKTtcbiAgICB9LCBbY29uY2VudHJhdGVdKTtcblxuICAgIGNvbnN0IHsgZGF0YTogaXRlbXMsIGlkcyB9ID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgICBjb25zdCBfaWRzID0gW107XG4gICAgICBjb25zdCBmaWx0ZXJlZCA9IF8udW5pcUJ5KGhpc3RvcnkubWFwKGggPT4gaD8udG8pLCAobCkgPT4gbD8uaWQpLmZpbHRlcihsID0+IHtcbiAgICAgICAgaWYgKCEhbD8uaWQpIF9pZHMucHVzaChsPy5pZCk7XG4gICAgICAgIHJldHVybiAhIWw/LmlkO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4geyBkYXRhOiBmaWx0ZXJlZCwgaWRzOiBfaWRzIH07XG4gICAgfSwgW2hpc3RvcnldO1xuXG4gICAgY29uc3QgbmF2ID0gZ28udXNlTmF2KCk7XG4gICAgbmF2KEZpbmRlckJ1dHRvbiwgRmluZGVyQnV0dG9uLCBGaW5kZXJCdXR0b24sIFN0YWNrLCAnZG93bicpO1xuICAgIG5hdihTdGFjaywgRmluZGVyQnV0dG9uLCBTdGFjaywgJ2NsZWFyJywgJ2Rvd24nKTtcbiAgICBuYXYoJ2NsZWFyJywgU3RhY2ssICdjbGVhcicsICdjbGVhcicsICdkb3duJyk7XG5cbiAgICBjb25zdCB7IGlkczogY29uY2VudHJhdGVkIH0gPSBkZWVwLnVzZVNlYXJjaChjb25jZW50cmF0ZSwge1xuICAgICAgZGI6IGZhbHNlLCBzb3J0OiBmYWxzZSxcbiAgICAgIHF1ZXJ5OiB7IGlkOiB7IF9pbjogaWRzIH0gfSxcbiAgICAgIHNraXA6ICEhY29uY2VudHJhdGUsXG4gICAgfSk7XG5cbiAgICBjb25zb2xlLmxvZyh7Y29uY2VudHJhdGVkfSk7XG5cbiAgICByZXR1cm4gPGdvLk9uIGRvPXt7XG4gICAgICBleGVjOiAoZyx2LG8pID0+IG8/LmlkIHx8IGdvLnZhbHVlID09IFN0YWNrIHx8ICFnby52YWx1ZSA/IGdvLnJvb3QoKS5kbygnb3BlbicsIHsgaWQ6IG8/LmlkIHx8IGdvKFN0YWNrKS52YWx1ZSwgZm9jdXM6IHRydWUgfSkgOiBnby5kbyhnby52YWx1ZSksXG4gICAgICB1c2U6IChnLHYsbykgPT4gZ28oU3RhY2spICYmIGdvKFN0YWNrKS5kbygndXNlJyxvKSxcbiAgICAgIGZvY3VzOiAoZyx2LGxpbmtJZCxvKSA9PiB7XG4gICAgICAgICFnby52YWx1ZSAmJiBnby5mb2N1cyhTdGFjayk7XG4gICAgICAgIG8/LmlkICYmIGdvKFN0YWNrKS5mb2N1cyhvPy5pZCk7XG4gICAgICB9LFxuICAgICAgcmlnaHQ6IChnLHYsbykgPT4gZ28uZm9jdXMobmF2LmdldChnby52YWx1ZSB8fCBTdGFjaywgJ3JpZ2h0JykpLFxuICAgICAgbGVmdDogKGcsdixvKSA9PiBnby5mb2N1cyhuYXYuZ2V0KGdvLnZhbHVlIHx8IFN0YWNrLCAnbGVmdCcpKSxcblxuICAgICAgZmluZGVyOiAoZyx2LG8pID0+IGdvKEZpbmRlckJ1dHRvbikuZG8oJ2V4ZWMnKSxcbiAgICAgIGNsZWFyOiAoZyx2LG8pID0+IGRlZXAuZGVsZXRlKHtcbiAgICAgICAgdXA6IHtcbiAgICAgICAgICB0cmVlX2lkOiBjb250YWluVHJlZSxcbiAgICAgICAgICBwYXJlbnQ6IHtcbiAgICAgICAgICAgIHR5cGVfaWQ6IENvbnRhaW4sXG4gICAgICAgICAgICB0bzogeyB0eXBlX2lkOiB7IF9pbjogW0hpc3RvcnksIEhpc3RvcnlIYW5kbGVyXSB9IH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0pLFxuICAgIH19PlxuICAgICAgPGMuRmxleCByZWY9e3JlZn0gdz0nMTAwJSc+XG4gICAgICAgIDxnby5Qcm92aWRlciBsaW5rSWQ9e0ZpbmRlckJ1dHRvbn0+XG4gICAgICAgICAgPGdvLkhhbmRsZXIgaGFuZGxlcklkPXtGaW5kZXJCdXR0b259IGlzQWN0aXZlPXtnby52YWx1ZSA9PT0gRmluZGVyQnV0dG9ufS8+XG4gICAgICAgIDwvZ28uUHJvdmlkZXI+XG4gICAgICAgIDxjLkJveCB3PScxMmVtJyBoPScxMDAlJyBwb3NpdGlvbj0ncmVsYXRpdmUnPlxuICAgICAgICAgIDxnby5FZGl0b3IgdmFsdWU9e2NvbmNlbnRyYXRlfSBvbkNoYW5nZT17c2V0Q29uY2VudHJhdGV9IGZpbGxTaXplIGxpbmVOdW1iZXJzPXtmYWxzZX0vPlxuICAgICAgICA8L2MuQm94PlxuICAgICAgICA8Z28uUHJvdmlkZXIgbGlua0lkPXtTdGFja30+XG4gICAgICAgICAgPGdvLkNvbXBvbmVudCBwYXRoPXtbZHBsLCAnU3RhY2snXX1cbiAgICAgICAgICAgIGxpbmtzPXtpdGVtc30gZGlyZWN0aW9uPSdob3Jpem9udGFsJyBJdGVtPXtJdGVtfSBmbGV4PScxJyB1c2luZz17dXNpbmd9XG4gICAgICAgICAgICBjb25jZW50cmF0ZWQ9eyEhY29uY2VudHJhdGUgJiYgY29uY2VudHJhdGVkfVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvZ28uUHJvdmlkZXI+XG4gICAgICAgIDxjLkJ1dHRvblxuICAgICAgICAgIGg9JzNlbScgdz0nM2VtJyB2YXJpYW50PXtnby52YWx1ZSA9PT0gJ2NsZWFyJyA/ICdhY3RpdmUnIDogdW5kZWZpbmVkfVxuICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGdvLmZvY3VzKCdjbGVhcicpLmdvLmRvKCdjbGVhcicpfVxuICAgICAgICA+PEdyQ2xlYXIvPjwvYy5CdXR0b24+XG4gICAgICA8L2MuRmxleD5cbiAgICA8L2dvLk9uPjtcbiAgfTtcbn0iXX0=",
          "link_id": 8341
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 10559,
      "src_id": 10426,
      "handler_id": 10430,
      "execution_provider_id": 33,
      "isolation_provider_id": 144,
      "dist": {
        "id": 10559,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 1435,
          "value": "({ deep, data, require, Go }) => {\n    const { MdEdit, MdPreview, MdSaveAlt } = require(\"react-icons/md\");\n    const { AiOutlineStop } = require(\"react-icons/ai\");\n    const { BsX, BsCheck2, BsXLg, BsDatabase, BsRegex } = require('react-icons/bs');\n    const { useResizeDetector } = require('react-resize-detector');\n    const { useDebounceCallback } = require('@react-hook/debounce');\n    const React = require('react');\n    const c = require('@chakra-ui/react');\n    const dpl = '@deep-foundation/perception-links';\n    const dc = '@deep-foundation/core';\n    const Contain = deep.idLocal('@deep-foundation/core', 'Contain');\n    const History = deep.idLocal(dpl, 'History');\n    const Header = deep.idLocal(dpl, 'Header');\n    const Search = deep.idLocal(dpl, 'Search');\n    const TreeQuery = deep.idLocal(dpl, 'TreeQuery');\n    const TreeLink = deep.idLocal(dpl, 'TreeLink');\n    const TreeLinkInsert = deep.idLocal(dpl, 'TreeLinkInsert');\n    const TreeLinkDelete = deep.idLocal(dpl, 'TreeLinkDelete');\n    const TreeLinkButton = deep.idLocal(dpl, 'TreeLinkButton');\n    const identifiy = (q) => {\n        let value;\n        const o = {};\n        if (q?._or) {\n            for (let i in q?._or) {\n                if (q?._or[i]?.string?.value?._ilike) {\n                    o.values = true;\n                    o.query = false;\n                    if (!value)\n                        value = q?._or[i]?.string?.value?._ilike.slice(1, -1);\n                }\n                if (q?._or[i]?.string?.value?._iregex) {\n                    o.values = true;\n                    o.query = false;\n                    o.regexp = true;\n                    if (!value)\n                        value = q?._or[i]?.string?.value?._iregex;\n                }\n                if (typeof (q?._or[i]?.number?.value) === 'number') {\n                    o.values = true;\n                    o.query = false;\n                    if (!value)\n                        value = q?._or[i]?.number?.value;\n                }\n                if (q?._or[i]?.in?.type_id === Contain) {\n                    if (q?._or[i]?.in?.string?.value?._iregex) {\n                        o.query = false;\n                        o.regexp = true;\n                        if (!value)\n                            value = q?._or[i]?.in?.string?.value?._iregex;\n                    }\n                    if (q?._or[i]?.in?.string?.value?._ilike) {\n                        o.query = false;\n                        if (!value)\n                            value = q?._or[i]?.in?.string?.value?._ilike.slice(1, -1);\n                    }\n                }\n                if (q?._not?.type_id === Contain)\n                    o.contains = false;\n                else if (q?.type_id === Contain)\n                    o.contains = true;\n            }\n        }\n        console.log('identified', q, o, value);\n        return { options: o, value };\n    };\n    return ({ go, linkId, isActive, oneline = false, saveHistory = false, finder = false, query: _query, search: _search, options: _options = {\n        db: false,\n        regexp: false,\n        query: false,\n        values: false,\n        contains: false,\n    }, onChange, onSearch, childrenSearchRight = null, children, }, ref) => {\n        if (!linkId)\n            throw new Error(`linkId must be Query instance id but ${linkId}`);\n        const nav = go.useNav();\n        if (finder)\n            nav('finder', 'left', 'up', 'current', 'db');\n        nav('current', finder ? 'finder' : 'db', 'up', 'search', 'db');\n        nav('search', 'current', 'up', 'contains', 'contains');\n        nav('db', 'current', 'current', 'regexp', 'down');\n        nav('regexp', 'db', 'current', 'query', 'down');\n        nav('query', 'regexp', 'current', 'values', 'down');\n        nav('values', 'query', 'current', 'contains', 'down');\n        nav('contains', 'values', 'search', 'right', 'down');\n        const options = { ...({ db: false, regexp: false, query: false, values: false, contains: false, }), ..._options };\n        const _q = React.useMemo(() => deep.get(linkId)?.value?.value || _query, []);\n        if (_q)\n            options.query = true;\n        const [toRequest, setToRequest] = React.useState();\n        const identified = React.useMemo(() => {\n            return identifiy(deep.get(linkId)?.value?.value || {});\n        }, []);\n        const [value, setValue] = React.useState(typeof (identified?.value) === 'string' ? identified?.value : (_q ? JSON.stringify(_q) : _search));\n        const [o, setOptions] = React.useState({ ...options, ...identified.options });\n        const optionsRef = React.useRef(o);\n        React.useMemo(() => {\n            if (!optionsRef.current.query && !!o.query) {\n                setValue(JSON.stringify(deep.searchQuery(value, { ...o, query: undefined }), null, 2));\n            }\n            else if (!!optionsRef.current.query && !o.query) {\n                const identified = identifiy(toRequest);\n                setOptions(identified?.options);\n                setValue(identified?.value);\n            }\n        }, [o.query]);\n        optionsRef.current = o;\n        const [results, setResults] = React.useState([]);\n        const request = React.useCallback(async (value) => {\n            const o = optionsRef.current;\n            let cq;\n            console.log('onRequest', { _q, o, identified });\n            if (!o.query) {\n                cq = deep.searchQuery(value, { ...o, query: undefined });\n            }\n            else\n                try {\n                    cq = JSON.parse(value);\n                }\n                catch (error) {\n                    return console.error(error);\n                }\n            console.log('onRequest', cq);\n            if (saveHistory && typeof (linkId) === 'number')\n                deep.value(linkId, cq);\n            setToRequest(cq);\n        }, []);\n        React.useEffect(() => {\n            if (!!value)\n                request(value);\n        }, []);\n        React.useMemo(() => {\n            (async () => {\n                const o = optionsRef.current;\n                if (!toRequest)\n                    return;\n                if (onSearch && value) {\n                    let results;\n                    try {\n                        results = await deep.search(value, { ...o, remote: o.db, query: undefined, apply: `deep-perception-search-${go.__p}` });\n                    }\n                    catch (error) {\n                        results = { error };\n                    }\n                    console.log('onSearch', toRequest, results, o);\n                    onSearch({ ...results, query: toRequest, search: !o.query ? value : null, options: o });\n                }\n            })();\n        }, [toRequest]);\n        return React.createElement(go.On, { do: {\n                focus: () => go.set('current'),\n                left: () => go.focus(nav.get(go.value, 'left')),\n                right: () => go.focus(nav.get(go.value, 'right')),\n                up: () => go.focus(nav.get(go.value, 'up')),\n                down: () => go.focus(nav.get(go.value, 'down')),\n                finder: () => setOptions({ ...o, finder: !o.finder }),\n                search: () => request(value),\n                current: () => setOptions({ ...o, current: !o.current }),\n                db: () => setOptions({ ...o, db: !o.db }),\n                regexp: () => setOptions({ ...o, regexp: !o.regexp }),\n                query: () => setOptions({ ...o, query: !o.query }),\n                values: () => setOptions({ ...o, values: !o.values }),\n                contains: () => setOptions({ ...o, contains: !o.contains }),\n            }, focus: {\n                up: (q, v, o) => go.set().go?.go?.do('up'),\n                down: (q, v, o) => go.set().go?.go?.do('down'),\n                left: (q, v, o) => go.set(o?.left).go?.go?.do('left'),\n                right: (q, v, o) => go.set(o?.right).go?.go?.do('right'),\n            } },\n            React.createElement(c.Box, { ref: ref, position: 'relative', w: '100%', bg: isActive ? 'deepBgDark' : undefined },\n                React.createElement(c.SimpleGrid, { columns: oneline ? 2 : 1, w: oneline ? finder ? '28em' : '25em' : undefined },\n                    React.createElement(c.Flex, null,\n                        !!finder && React.createElement(c.Button, { h: '3em', maxW: '3em', w: '3em', variant: go.value === 'finder' ? 'active' : undefined, onClick: () => go.do('finder') }, \"\\uD83E\\uDEAC\"),\n                        React.createElement(c.Box, { flex: 1, h: '3em' }, [React.createElement(go.Editor, { key: o.query, fillSize: true, value: value, onChange: value => {\n                                    setValue(value);\n                                    onChange && onChange(value);\n                                }, onSave: value => go.do('search'), basicSetup: {\n                                    lineNumbers: false\n                                }, saveButton: false })]),\n                        React.createElement(c.Flex, null,\n                            React.createElement(c.Button, { h: '3em', maxW: '3em', w: '3em', variant: go.value === 'search' ? 'active' : undefined, onClick: () => go.do('search') }, \"\\uD83D\\uDD0E\"),\n                            childrenSearchRight)),\n                    React.createElement(c.Flex, null,\n                        React.createElement(c.Button, { h: '3em', maxW: '3em', w: '3em', position: 'relative', onClick: () => go.do('db'), variant: go.value === 'db' ? 'active' : undefined },\n                            React.createElement(BsDatabase, null),\n                            !o.db && React.createElement(c.Center, { position: 'absolute', top: '0', left: '0', right: '0', bottom: '0', fontSize: '2em' },\n                                React.createElement(AiOutlineStop, null))),\n                        React.createElement(c.Button, { h: '3em', maxW: '3em', w: '3em', position: 'relative', onClick: () => go.do('regexp'), variant: go.value === 'regexp' ? 'active' : undefined },\n                            React.createElement(BsRegex, null),\n                            !o.regexp && React.createElement(c.Center, { position: 'absolute', top: '0', left: '0', right: '0', bottom: '0', fontSize: '2em' },\n                                React.createElement(AiOutlineStop, null))),\n                        React.createElement(c.Button, { h: '3em', maxW: '3em', w: '3em', position: 'relative', onClick: () => go.do('query'), variant: go.value === 'query' ? 'active' : undefined },\n                            `{q}`,\n                            !o.query && React.createElement(c.Center, { position: 'absolute', top: '0', left: '0', right: '0', bottom: '0', fontSize: '2em' },\n                                React.createElement(AiOutlineStop, null))),\n                        React.createElement(c.Spacer, null),\n                        React.createElement(c.Button, { h: '3em', maxW: '3em', w: '3em', position: 'relative', onClick: () => go.do('values'), variant: go.value === 'values' ? 'active' : undefined },\n                            \"\\\"v\\\"\",\n                            !o.values && React.createElement(c.Center, { position: 'absolute', top: '0', left: '0', right: '0', bottom: '0', fontSize: '2em' },\n                                React.createElement(AiOutlineStop, null))),\n                        React.createElement(c.Button, { h: '3em', maxW: '3em', w: '3em', position: 'relative', onClick: () => go.do('contains'), variant: go.value === 'contains' ? 'active' : undefined },\n                            \"\\uD83D\\uDDC2\\uFE0F\",\n                            !o.contains && React.createElement(c.Center, { position: 'absolute', top: '0', left: '0', right: '0', bottom: '0', fontSize: '2em' },\n                                React.createElement(AiOutlineStop, null)))))));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxDQUFDLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRTtJQUM5QixNQUFNLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztJQUNuRSxNQUFNLEVBQUUsYUFBYSxFQUFFLEdBQUcsT0FBTyxDQUFDLGdCQUFnQixDQUFDLENBQUM7SUFDcEQsTUFBTSxFQUFFLEdBQUcsRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUFFLFVBQVUsRUFBRSxPQUFPLEVBQUUsR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztJQUNoRixNQUFNLEVBQUUsaUJBQWlCLEVBQUUsR0FBRyxPQUFPLENBQUMsdUJBQXVCLENBQUMsQ0FBQztJQUMvRCxNQUFNLEVBQUUsbUJBQW1CLEVBQUUsR0FBRyxPQUFPLENBQUMsc0JBQXNCLENBQUMsQ0FBQztJQUVoRSxNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7SUFFL0IsTUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLGtCQUFrQixDQUFDLENBQUM7SUFFdEMsTUFBTSxHQUFHLEdBQUcsbUNBQW1DLENBQUM7SUFDaEQsTUFBTSxFQUFFLEdBQUcsdUJBQXVCLENBQUM7SUFFbkMsTUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyx1QkFBdUIsRUFBRSxTQUFTLENBQUMsQ0FBQztJQUNqRSxNQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxTQUFTLENBQUMsQ0FBQztJQUM3QyxNQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxRQUFRLENBQUMsQ0FBQztJQUMzQyxNQUFNLE1BQU0sR0FBRyxJQUFJ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QUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFLEtBQUssR0FBRyxDQUFDLEVBQUUsR0FBRyxRQUFRLEVBQUUsQ0FBQztRQUNsSCxNQUFNLEVBQUUsR0FBRyxLQUFLLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLEVBQUUsS0FBSyxFQUFFLEtBQUssSUFBSSxNQUFNLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFDN0UsSUFBSSxFQUFFO1lBQUUsT0FBTyxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7UUFFN0IsTUFBTSxDQUFDLFNBQVMsRUFBRSxZQUFZLENBQUMsR0FBRyxLQUFLLENBQUMsUUFBUSxFQUFFLENBQUM7UUFFbkQsTUFBTSxVQUFVLEdBQUcsS0FBSyxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUU7WUFDcEMsT0FBTyxTQUFTLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsRUFBRSxLQUFLLEVBQUUsS0FBSyxJQUFJLEVBQUUsQ0FBQyxDQUFDO1FBQ3pELENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUVQLE1BQU0sQ0FBQyxLQUFLLEVBQUUsUUFBUSxDQUFDLEdBQUcsS0FBSyxDQUFDLFFBQVEsQ0FBQyxPQUFNLENBQUMsVUFBVSxFQUFFLEtBQUssQ0FBQyxLQUFLLFFBQVEsQ0FBQyxDQUFDLENBQUMsVUFBVSxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7UUFFM0ksTUFBTSxDQUFDLENBQUMsRUFBRSxVQUFVLENBQUMsR0FBRyxLQUFLLENBQUMsUUFBUSxDQUFDLEVBQUUsR0FBRyxPQUFPLEVBQUUsR0FBRyxVQUFVLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQztRQUU5RSxNQUFNLFVBQVUsR0FB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LENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFDO2dCQUMzQyxJQUFJLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLENBQUM7Z0JBQy9DLE1BQU0sRUFBRSxHQUFHLEVBQUUsQ0FBQyxVQUFVLENBQUMsRUFBRSxHQUFHLENBQUMsRUFBRSxNQUFNLEVBQUUsQ0FBQyxDQUFDLENBQUMsTUFBTSxFQUFDLENBQUM7Z0JBQ3BELE1BQU0sRUFBRSxHQUFHLEVBQUUsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDO2dCQUM1QixPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsR0FBRyxDQUFDLEVBQUUsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sRUFBQyxDQUFDO2dCQUN2RCxFQUFFLEVBQUUsR0FBRyxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsR0FBRyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBQyxDQUFDO2dCQUN4QyxNQUFNLEVBQUUsR0FBRyxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsR0FBRyxDQUFDLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQyxDQUFDLE1BQU0sRUFBQyxDQUFDO2dCQUNwRCxLQUFLLEVBQUUsR0FBRyxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsR0FBRyxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBQyxDQUFDO2dCQUNqRCxNQUFNLEVBQUUsR0FBRyxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsR0FBRyxDQUFDLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQyxDQUFDLE1BQU0sRUFBQyxDQUFDO2dCQUNwRCxRQUFRLEVBQUUsR0FBRyxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsR0FBRyxDQUFDLEVBQUUsUUFBUSxF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T0FBRTs0QkFDVCxDQUFDLENBQUMsQ0FBQyxNQUFNLElBQUksb0JBQUMsQ0FBQyxDQUFDLE1BQU0sSUFBQyxRQUFRLEVBQUMsVUFBVSxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsSUFBSSxFQUFDLEdBQUcsRUFBQyxLQUFLLEVBQUMsR0FBRyxFQUFDLE1BQU0sRUFBQyxHQUFHLEVBQUMsUUFBUSxFQUFDLEtBQUs7Z0NBQUMsb0JBQUMsYUFBYSxPQUFFLENBQVcsQ0FDbkg7d0JBQ1gsb0JBQUMsQ0FBQyxDQUFDLE1BQU0sSUFDUCxDQUFDLEVBQUMsS0FBSyxFQUFDLElBQUksRUFBQyxLQUFLLEVBQUMsQ0FBQyxFQUFDLEtBQUssRUFBQyxRQUFRLEVBQUMsVUFBVSxFQUM5QyxPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxPQUFPLENBQUMsRUFBRSxPQUFPLEVBQUUsRUFBRSxDQUFDLEtBQUssS0FBSyxPQUFPLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsU0FBUzs0QkFFbkYsS0FBSzs0QkFDTCxDQUFDLENBQUMsQ0FBQyxLQUFLLElBQUksb0JBQUMsQ0FBQyxDQUFDLE1BQU0sSUFBQyxRQUFRLEVBQUMsVUFBVSxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsSUFBSSxFQUFDLEdBQUcsRUFBQyxLQUFLLEVBQUMsR0FBRyxFQUFDLE1BQU0sRUFBQyxHQUFHLEVBQUMsUUFBUSxFQUFDLEtBQUs7Z0NBQUMsb0JBQUMsYUFBYSxPQUFFLENBQVcsQ0FDbEg7d0JBQ1gsb0JBQUMsQ0FBQyxDQUFDLE1BQU0sT0FBRTt3QkFDWCxvQkFBQyxDQUFDLENBQUMsTUFBTSxJQUNQLENBQUMsRUFBQyxLQUFLLEVBQUMsSUFBSSxFQUFDLEtBQUssRUFBQyxDQUFDLEVBQUMsS0FBSyxFQUFDLFFBQVEsRUFBQyxVQUFVLEVBQzlDLE9BQU8sRUFBRSxHQUFHLEVBQUUsQ0FBRSxFQUFFLENBQUMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxFQUFFLE9BQU8sRUFBRSxFQUFFLENBQUMsS0FBSyxLQUFLLFFBQVEsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxTQUFTOzs0QkFHckYsQ0FBQyxDQUFDLENBQUMsTUFBTSxJQUFJLG9CQUFDLENBQUMsQ0FBQyxNQUFNLElBQUMsUUFBUSxFQUFDLFVBQVUsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLElBQUksRUFBQyxHQUFHLEVBQUMsS0FBSyxFQUFDLEdBQUcsRUFBQyxNQUFNLEVBQUMsR0FBRyxFQUFDLFFBQVEsRUFBQyxLQUFLO2dDQUFDLG9CQUFDLGFBQWEsT0FBRSxDQUFXLENBQ25IO3dCQUNYLG9CQUFDLENBQUMsQ0FBQyxNQUFNLElBQ1AsQ0FBQyxFQUFDLEtBQUssRUFBQyxJQUFJLEVBQUMsS0FBSyxFQUFDLENBQUMsRUFBQyxLQUFLLEVBQUMsUUFBUSxFQUFDLFVBQVUsRUFDOUMsT0FBTyxFQUFFLEdBQUcsRUFBRSxDQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsT0FBTyxFQUFFLEVBQUUsQ0FBQyxLQUFLLEtBQUssVUFBVSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLFNBQVM7OzRCQUd6RixDQUFDLENBQUMsQ0FBQyxRQUFRLElBQUksb0JBQUMsQ0FBQyxDQUFDLE1BQU0sSUFBQyxRQUFRLEVBQUMsVUFBVSxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsSUFBSSxFQUFDLEdBQUcsRUFBQyxLQUFLLEVBQUMsR0FBRyxFQUFDLE1BQU0sRUFBQyxHQUFHLEVBQUMsUUFBUSxFQUFDLEtBQUs7Z0NBQUMsb0JBQUMsYUFBYSxPQUFFLENBQVcsQ0FDckgsQ0FDSixDQUNJLENBQ1QsQ0FDRixDQUFBO0lBQ1YsQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiKHsgZGVlcCwgZGF0YSwgcmVxdWlyZSwgR28gfSkgPT4ge1xuICBjb25zdCB7IE1kRWRpdCwgTWRQcmV2aWV3LCBNZFNhdmVBbHQgfSA9IHJlcXVpcmUoXCJyZWFjdC1pY29ucy9tZFwiKTtcbiAgY29uc3QgeyBBaU91dGxpbmVTdG9wIH0gPSByZXF1aXJlKFwicmVhY3QtaWNvbnMvYWlcIik7XG4gIGNvbnN0IHsgQnNYLCBCc0NoZWNrMiwgQnNYTGcsIEJzRGF0YWJhc2UsIEJzUmVnZXggfSA9IHJlcXVpcmUoJ3JlYWN0LWljb25zL2JzJyk7XG4gIGNvbnN0IHsgdXNlUmVzaXplRGV0ZWN0b3IgfSA9IHJlcXVpcmUoJ3JlYWN0LXJlc2l6ZS1kZXRlY3RvcicpO1xuICBjb25zdCB7IHVzZURlYm91bmNlQ2FsbGJhY2sgfSA9IHJlcXVpcmUoJ0ByZWFjdC1ob29rL2RlYm91bmNlJyk7XG5cbiAgY29uc3QgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuICBcbiAgY29uc3QgYyA9IHJlcXVpcmUoJ0BjaGFrcmEtdWkvcmVhY3QnKTtcblxuICBjb25zdCBkcGwgPSAnQGRlZXAtZm91bmRhdGlvbi9wZXJjZXB0aW9uLWxpbmtzJztcbiAgY29uc3QgZGMgPSAnQGRlZXAtZm91bmRhdGlvbi9jb3JlJztcblxuICBjb25zdCBDb250YWluID0gZGVlcC5pZExvY2FsKCdAZGVlcC1mb3VuZGF0aW9uL2NvcmUnLCAnQ29udGFpbicpO1xuICBjb25zdCBIaXN0b3J5ID0gZGVlcC5pZExvY2FsKGRwbCwgJ0hpc3RvcnknKTtcbiAgY29uc3QgSGVhZGVyID0gZGVlcC5pZExvY2FsKGRwbCwgJ0hlYWRlcicpO1xuICBjb25zdCBTZWFyY2ggPSBkZWVwLmlkTG9jYWwoZHBsLCAnU2VhcmNoJyk7XG4gIGNvbnN0IFRyZWVRdWVyeSA9IGRlZXAuaWRMb2NhbChkcGwsICdUcmVlUXVlcnknKTtcbiAgY29uc3QgVHJlZUxpbmsgPSBkZWVwLmlkTG9jYWwoZHBsLCAnVHJlZUxpbmsnKTtcbiAgY29uc3QgVHJlZUxpbmtJbnNlcnQgPSBkZWVwLmlkTG9jYWwoZHBsLCAnVHJlZUxpbmtJbnNlcnQnKTtcbiAgY29uc3QgVHJlZUxpbmtEZWxldGUgPSBkZWVwLmlkTG9jYWwoZHBsLCAnVHJlZUxpbmtEZWxldGUnKTtcbiAgY29uc3QgVHJlZUxpbmtCdXR0b24gPSBkZWVwLmlkTG9jYWwoZHBsLCAnVHJlZUxpbmtCdXR0b24nKTtcblxuICBjb25zdCBpZGVudGlmaXkgPSAocSkgPT4ge1xuICAgIGxldCB2YWx1ZTtcbiAgICBjb25zdCBvID0ge307XG4gICAgaWYgKHE/Ll9vcikge1xuICAgICAgZm9yIChsZXQgaSBpbiBxPy5fb3IpIHtcbiAgICAgICAgaWYgKHE/Ll9vcltpXT8uc3RyaW5nPy52YWx1ZT8uX2lsaWtlKSB7XG4gICAgICAgICAgby52YWx1ZXMgPSB0cnVlO1xuICAgICAgICAgIG8ucXVlcnkgPSBmYWxzZTtcbiAgICAgICAgICBpZiAoIXZhbHVlKSB2YWx1ZSA9IHE/Ll9vcltpXT8uc3RyaW5nPy52YWx1ZT8uX2lsaWtlLnNsaWNlKDEsIC0xKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocT8uX29yW2ldPy5zdHJpbmc/LnZhbHVlPy5faXJlZ2V4KSB7XG4gICAgICAgICAgby52YWx1ZXMgPSB0cnVlO1xuICAgICAgICAgIG8ucXVlcnkgPSBmYWxzZTtcbiAgICAgICAgICBvLnJlZ2V4cCA9IHRydWU7XG4gICAgICAgICAgaWYgKCF2YWx1ZSkgdmFsdWUgPSBxPy5fb3JbaV0/LnN0cmluZz8udmFsdWU/Ll9pcmVnZXg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZihxPy5fb3JbaV0/Lm51bWJlcj8udmFsdWUpID09PSAnbnVtYmVyJykge1xuICAgICAgICAgIG8udmFsdWVzID0gdHJ1ZTtcbiAgICAgICAgICBvLnF1ZXJ5ID0gZmFsc2U7XG4gICAgICAgICAgaWYgKCF2YWx1ZSkgdmFsdWUgPSBxPy5fb3JbaV0/Lm51bWJlcj8udmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHE/Ll9vcltpXT8uaW4/LnR5cGVfaWQgPT09IENvbnRhaW4pIHtcbiAgICAgICAgICBpZiAocT8uX29yW2ldPy5pbj8uc3RyaW5nPy52YWx1ZT8uX2lyZWdleCkge1xuICAgICAgICAgICAgby5xdWVyeSA9IGZhbHNlO1xuICAgICAgICAgICAgby5yZWdleHAgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKCF2YWx1ZSkgdmFsdWUgPSBxPy5fb3JbaV0/LmluPy5zdHJpbmc/LnZhbHVlPy5faXJlZ2V4O1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAocT8uX29yW2ldPy5pbj8uc3RyaW5nPy52YWx1ZT8uX2lsaWtlKSB7XG4gICAgICAgICAgICBvLnF1ZXJ5ID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAoIXZhbHVlKSB2YWx1ZSA9IHE/Ll9vcltpXT8uaW4/LnN0cmluZz8udmFsdWU/Ll9pbGlrZS5zbGljZSgxLC0xKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHE/Ll9ub3Q/LnR5cGVfaWQgPT09IENvbnRhaW4pIG8uY29udGFpbnMgPSBmYWxzZTtcbiAgICAgICAgZWxzZSBpZiAocT8udHlwZV9pZCA9PT0gQ29udGFpbikgby5jb250YWlucyA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKCdpZGVudGlmaWVkJywgcSwgbywgdmFsdWUpO1xuICAgIHJldHVybiB7IG9wdGlvbnM6IG8sIHZhbHVlIH07XG4gIH07XG5cbiAgcmV0dXJuICh7XG4gICAgZ28sXG4gICAgbGlua0lkLFxuXG4gICAgaXNBY3RpdmUsXG4gICAgb25lbGluZSA9IGZhbHNlLFxuICAgIHNhdmVIaXN0b3J5ID0gZmFsc2UsXG4gICAgZmluZGVyID0gZmFsc2UsXG5cbiAgICBxdWVyeTogX3F1ZXJ5LFxuICAgIHNlYXJjaDogX3NlYXJjaCxcblxuICAgIG9wdGlvbnM6IF9vcHRpb25zID0ge1xuICAgICAgZGI6IGZhbHNlLFxuICAgICAgcmVnZXhwOiBmYWxzZSxcbiAgICAgIHF1ZXJ5OiBmYWxzZSxcbiAgICAgIHZhbHVlczogZmFsc2UsXG4gICAgICBjb250YWluczogZmFsc2UsXG4gICAgfSxcblxuICAgIG9uQ2hhbmdlLFxuICAgIG9uU2VhcmNoLFxuXG4gICAgY2hpbGRyZW5TZWFyY2hSaWdodCA9IG51bGwsXG5cbiAgICBjaGlsZHJlbixcbiAgfSwgcmVmKSA9PiB7XG4gICAgaWYgKCFsaW5rSWQpIHRocm93IG5ldyBFcnJvcihgbGlua0lkIG11c3QgYmUgUXVlcnkgaW5zdGFuY2UgaWQgYnV0ICR7bGlua0lkfWApO1xuXG4gICAgY29uc3QgbmF2ID0gZ28udXNlTmF2KCk7XG4gICAgaWYgKGZpbmRlcikgbmF2KCdmaW5kZXInLCAnbGVmdCcsICd1cCcsICdjdXJyZW50JywgJ2RiJyk7XG4gICAgbmF2KCdjdXJyZW50JywgZmluZGVyID8gJ2ZpbmRlcicgOiAnZGInLCAndXAnLCAnc2VhcmNoJywgJ2RiJyk7XG4gICAgbmF2KCdzZWFyY2gnLCAnY3VycmVudCcsICd1cCcsICdjb250YWlucycsICdjb250YWlucycpO1xuICAgIG5hdignZGInLCAnY3VycmVudCcsICdjdXJyZW50JywgJ3JlZ2V4cCcsICdkb3duJyk7XG4gICAgbmF2KCdyZWdleHAnLCAnZGInLCAnY3VycmVudCcsICdxdWVyeScsICdkb3duJyk7XG4gICAgbmF2KCdxdWVyeScsICdyZWdleHAnLCAnY3VycmVudCcsICd2YWx1ZXMnLCAnZG93bicpO1xuICAgIG5hdigndmFsdWVzJywgJ3F1ZXJ5JywgJ2N1cnJlbnQnLCAnY29udGFpbnMnLCAnZG93bicpO1xuICAgIG5hdignY29udGFpbnMnLCAndmFsdWVzJywgJ3NlYXJjaCcsICdyaWdodCcsICdkb3duJyk7XG5cbiAgICBjb25zdCBvcHRpb25zID0geyAuLi4oeyBkYjogZmFsc2UsIHJlZ2V4cDogZmFsc2UsIHF1ZXJ5OiBmYWxzZSwgdmFsdWVzOiBmYWxzZSwgY29udGFpbnM6IGZhbHNlLCB9KSwgLi4uX29wdGlvbnMgfTtcbiAgICBjb25zdCBfcSA9IFJlYWN0LnVzZU1lbW8oKCkgPT4gZGVlcC5nZXQobGlua0lkKT8udmFsdWU/LnZhbHVlIHx8IF9xdWVyeSwgW10pO1xuICAgIGlmIChfcSkgb3B0aW9ucy5xdWVyeSA9IHRydWU7XG5cbiAgICBjb25zdCBbdG9SZXF1ZXN0LCBzZXRUb1JlcXVlc3RdID0gUmVhY3QudXNlU3RhdGUoKTtcblxuICAgIGNvbnN0IGlkZW50aWZpZWQgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICAgIHJldHVybiBpZGVudGlmaXkoZGVlcC5nZXQobGlua0lkKT8udmFsdWU/LnZhbHVlIHx8IHt9KTtcbiAgICB9LCBbXSk7XG5cbiAgICBjb25zdCBbdmFsdWUsIHNldFZhbHVlXSA9IFJlYWN0LnVzZVN0YXRlKHR5cGVvZihpZGVudGlmaWVkPy52YWx1ZSkgPT09ICdzdHJpbmcnID8gaWRlbnRpZmllZD8udmFsdWUgOiAoX3EgPyBKU09OLnN0cmluZ2lmeShfcSkgOiBfc2VhcmNoKSk7XG5cbiAgICBjb25zdCBbbywgc2V0T3B0aW9uc10gPSBSZWFjdC51c2VTdGF0ZSh7IC4uLm9wdGlvbnMsIC4uLmlkZW50aWZpZWQub3B0aW9ucyB9KTtcblxuICAgIGNvbnN0IG9wdGlvbnNSZWYgPSBSZWFjdC51c2VSZWYobyk7XG4gICAgUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgICBpZiAoIW9wdGlvbnNSZWYuY3VycmVudC5xdWVyeSAmJiAhIW8ucXVlcnkpIHtcbiAgICAgICAgc2V0VmFsdWUoSlNPTi5zdHJpbmdpZnkoZGVlcC5zZWFyY2hRdWVyeSh2YWx1ZSwgeyAuLi5vLCBxdWVyeTogdW5kZWZpbmVkIH0pLCBudWxsLCAyKSk7XG4gICAgICB9IGVsc2UgaWYgKCEhb3B0aW9uc1JlZi5jdXJyZW50LnF1ZXJ5ICYmICFvLnF1ZXJ5KSB7XG4gICAgICAgIGNvbnN0IGlkZW50aWZpZWQgPSBpZGVudGlmaXkodG9SZXF1ZXN0KTtcbiAgICAgICAgc2V0T3B0aW9ucyhpZGVudGlmaWVkPy5vcHRpb25zKTtcbiAgICAgICAgc2V0VmFsdWUoaWRlbnRpZmllZD8udmFsdWUpO1xuICAgICAgfVxuICAgIH0sIFtvLnF1ZXJ5XSk7XG4gICAgb3B0aW9uc1JlZi5jdXJyZW50ID0gbztcbiAgICBjb25zdCBbcmVzdWx0cywgc2V0UmVzdWx0c10gPSBSZWFjdC51c2VTdGF0ZShbXSk7XG5cblxuICAgIGNvbnN0IHJlcXVlc3QgPSBSZWFjdC51c2VDYWxsYmFjayhhc3luYyAodmFsdWUpID0+IHtcbiAgICAgIGNvbnN0IG8gPSBvcHRpb25zUmVmLmN1cnJlbnQ7XG4gICAgICBsZXQgY3E7XG4gICAgICBjb25zb2xlLmxvZygnb25SZXF1ZXN0JywgeyBfcSwgbywgaWRlbnRpZmllZCB9KTtcbiAgICAgIGlmICghby5xdWVyeSkge1xuICAgICAgICBjcSA9IGRlZXAuc2VhcmNoUXVlcnkodmFsdWUsIHsgLi4ubywgcXVlcnk6IHVuZGVmaW5lZCB9KTtcbiAgICAgIH0gZWxzZSB0cnkgeyBjcSA9IEpTT04ucGFyc2UodmFsdWUpOyB9IGNhdGNoKGVycm9yKSB7XG4gICAgICAgIHJldHVybiBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgIH1cbiAgICAgIGNvbnNvbGUubG9nKCdvblJlcXVlc3QnLCBjcSk7XG4gICAgICBpZiAoc2F2ZUhpc3RvcnkgJiYgdHlwZW9mKGxpbmtJZCkgPT09ICdudW1iZXInKSBkZWVwLnZhbHVlKGxpbmtJZCwgY3EpO1xuICAgICAgc2V0VG9SZXF1ZXN0KGNxKTtcbiAgICB9LCBbXSk7XG5cbiAgICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgaWYgKCEhdmFsdWUpIHJlcXVlc3QodmFsdWUpO1xuICAgIH0sIFtdKTtcblxuICAgIFJlYWN0LnVzZU1lbW8oKCkgPT4geyAoYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbyA9IG9wdGlvbnNSZWYuY3VycmVudDtcbiAgICAgIGlmICghdG9SZXF1ZXN0KSByZXR1cm47XG4gICAgICBpZiAob25TZWFyY2ggJiYgdmFsdWUpIHtcbiAgICAgICAgbGV0IHJlc3VsdHM7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcmVzdWx0cyA9IGF3YWl0IGRlZXAuc2VhcmNoKHZhbHVlLCB7IC4uLm8sIHJlbW90ZTogby5kYiwgcXVlcnk6IHVuZGVmaW5lZCwgYXBwbHk6IGBkZWVwLXBlcmNlcHRpb24tc2VhcmNoLSR7Z28uX19wfWAgfSk7XG4gICAgICAgIH0gY2F0Y2goZXJyb3IpIHtcbiAgICAgICAgICByZXN1bHRzID0geyBlcnJvciB9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnNvbGUubG9nKCdvblNlYXJjaCcsIHRvUmVxdWVzdCwgcmVzdWx0cywgbyk7XG4gICAgICAgIG9uU2VhcmNoKHsgLi4ucmVzdWx0cywgcXVlcnk6IHRvUmVxdWVzdCwgc2VhcmNoOiAhby5xdWVyeSA/IHZhbHVlIDogbnVsbCwgb3B0aW9uczogbyB9KTtcbiAgICAgIH1cbiAgICB9KSgpOyB9LCBbdG9SZXF1ZXN0XSk7XG5cbiAgICByZXR1cm4gPGdvLk9uXG4gICAgICBkbz17e1xuICAgICAgICBmb2N1czogKCkgPT4gZ28uc2V0KCdjdXJyZW50JyksXG4gICAgICAgIGxlZnQ6ICgpID0+IGdvLmZvY3VzKG5hdi5nZXQoZ28udmFsdWUsICdsZWZ0JykpLFxuICAgICAgICByaWdodDogKCkgPT4gZ28uZm9jdXMobmF2LmdldChnby52YWx1ZSwgJ3JpZ2h0JykpLFxuICAgICAgICB1cDogKCkgPT4gZ28uZm9jdXMobmF2LmdldChnby52YWx1ZSwgJ3VwJykpLFxuICAgICAgICBkb3duOiAoKSA9PiBnby5mb2N1cyhuYXYuZ2V0KGdvLnZhbHVlLCAnZG93bicpKSxcbiAgICAgICAgZmluZGVyOiAoKSA9PiBzZXRPcHRpb25zKHsgLi4ubywgZmluZGVyOiAhby5maW5kZXJ9KSxcbiAgICAgICAgc2VhcmNoOiAoKSA9PiByZXF1ZXN0KHZhbHVlKSxcbiAgICAgICAgY3VycmVudDogKCkgPT4gc2V0T3B0aW9ucyh7IC4uLm8sIGN1cnJlbnQ6ICFvLmN1cnJlbnR9KSxcbiAgICAgICAgZGI6ICgpID0+IHNldE9wdGlvbnMoeyAuLi5vLCBkYjogIW8uZGJ9KSxcbiAgICAgICAgcmVnZXhwOiAoKSA9PiBzZXRPcHRpb25zKHsgLi4ubywgcmVnZXhwOiAhby5yZWdleHB9KSxcbiAgICAgICAgcXVlcnk6ICgpID0+IHNldE9wdGlvbnMoeyAuLi5vLCBxdWVyeTogIW8ucXVlcnl9KSxcbiAgICAgICAgdmFsdWVzOiAoKSA9PiBzZXRPcHRpb25zKHsgLi4ubywgdmFsdWVzOiAhby52YWx1ZXN9KSxcbiAgICAgICAgY29udGFpbnM6ICgpID0+IHNldE9wdGlvbnMoeyAuLi5vLCBjb250YWluczogIW8uY29udGFpbnN9KSxcbiAgICAgIH19XG4gICAgICBmb2N1cz17e1xuICAgICAgICB1cDogKHEsdixvKSA9PiBnby5zZXQoKS5nbz8uZ28/LmRvKCd1cCcpLFxuICAgICAgICBkb3duOiAocSx2LG8pID0+IGdvLnNldCgpLmdvPy5nbz8uZG8oJ2Rvd24nKSxcbiAgICAgICAgbGVmdDogKHEsdixvKSA9PiBnby5zZXQobz8ubGVmdCkuZ28/LmdvPy5kbygnbGVmdCcpLFxuICAgICAgICByaWdodDogKHEsdixvKSA9PiBnby5zZXQobz8ucmlnaHQpLmdvPy5nbz8uZG8oJ3JpZ2h0JyksXG4gICAgICB9fVxuICAgID5cbiAgICAgIDxjLkJveCByZWY9e3JlZn0gcG9zaXRpb249J3JlbGF0aXZlJyB3PScxMDAlJyBiZz17aXNBY3RpdmUgPyAnZGVlcEJnRGFyaycgOiB1bmRlZmluZWR9PlxuICAgICAgICA8Yy5TaW1wbGVHcmlkIGNvbHVtbnM9e29uZWxpbmUgPyAyIDogMX0gdz17b25lbGluZSA/IGZpbmRlciA/ICcyOGVtJyA6ICcyNWVtJyA6IHVuZGVmaW5lZH0+XG4gICAgICAgICAgPGMuRmxleD5cbiAgICAgICAgICAgIHshIWZpbmRlciAmJiA8Yy5CdXR0b25cbiAgICAgICAgICAgICAgaD0nM2VtJyBtYXhXPSczZW0nIHc9JzNlbScgdmFyaWFudD17Z28udmFsdWUgPT09ICdmaW5kZXInID8gJ2FjdGl2ZScgOiB1bmRlZmluZWR9XG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGdvLmRvKCdmaW5kZXInKX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAg8J+qrFxuICAgICAgICAgICAgPC9jLkJ1dHRvbj59XG4gICAgICAgICAgICA8Yy5Cb3ggZmxleD17MX0gaD0nM2VtJz5cbiAgICAgICAgICAgICAge1s8Z28uRWRpdG9yXG4gICAgICAgICAgICAgICAga2V5PXtvLnF1ZXJ5fVxuICAgICAgICAgICAgICAgIGZpbGxTaXplXG4gICAgICAgICAgICAgICAgdmFsdWU9e3ZhbHVlfVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt2YWx1ZSA9PiB7XG4gICAgICAgICAgICAgICAgICBzZXRWYWx1ZSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZSAmJiBvbkNoYW5nZSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICBvblNhdmU9e3ZhbHVlID0+IGdvLmRvKCdzZWFyY2gnKX1cbiAgICAgICAgICAgICAgICBiYXNpY1NldHVwPXt7XG4gICAgICAgICAgICAgICAgICBsaW5lTnVtYmVyczogZmFsc2VcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIHNhdmVCdXR0b249e2ZhbHNlfVxuICAgICAgICAgICAgICAvPl19XG4gICAgICAgICAgICA8L2MuQm94PlxuICAgICAgICAgICAgPGMuRmxleD5cbiAgICAgICAgICAgICAgPGMuQnV0dG9uXG4gICAgICAgICAgICAgICAgaD0nM2VtJyBtYXhXPSczZW0nIHc9JzNlbScgdmFyaWFudD17Z28udmFsdWUgPT09ICdzZWFyY2gnID8gJ2FjdGl2ZScgOiB1bmRlZmluZWR9XG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gZ28uZG8oJ3NlYXJjaCcpfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAg8J+UjlxuICAgICAgICAgICAgICA8L2MuQnV0dG9uPlxuICAgICAgICAgICAgICB7Y2hpbGRyZW5TZWFyY2hSaWdodH1cbiAgICAgICAgICAgIDwvYy5GbGV4PlxuICAgICAgICAgIDwvYy5GbGV4PlxuICAgICAgICAgIDxjLkZsZXg+XG4gICAgICAgICAgICA8Yy5CdXR0b25cbiAgICAgICAgICAgICAgaD0nM2VtJyBtYXhXPSczZW0nIHc9JzNlbScgcG9zaXRpb249J3JlbGF0aXZlJ1xuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBnby5kbygnZGInKX0gdmFyaWFudD17Z28udmFsdWUgPT09ICdkYicgPyAnYWN0aXZlJyA6IHVuZGVmaW5lZH1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPEJzRGF0YWJhc2UvPlxuICAgICAgICAgICAgICB7IW8uZGIgJiYgPGMuQ2VudGVyIHBvc2l0aW9uPSdhYnNvbHV0ZScgdG9wPScwJyBsZWZ0PScwJyByaWdodD0nMCcgYm90dG9tPScwJyBmb250U2l6ZT0nMmVtJz48QWlPdXRsaW5lU3RvcC8+PC9jLkNlbnRlcj59XG4gICAgICAgICAgICA8L2MuQnV0dG9uPlxuICAgICAgICAgICAgPGMuQnV0dG9uXG4gICAgICAgICAgICAgIGg9JzNlbScgbWF4Vz0nM2VtJyB3PSczZW0nIHBvc2l0aW9uPSdyZWxhdGl2ZSdcbiAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gZ28uZG8oJ3JlZ2V4cCcpfSAgdmFyaWFudD17Z28udmFsdWUgPT09ICdyZWdleHAnID8gJ2FjdGl2ZScgOiB1bmRlZmluZWR9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxCc1JlZ2V4Lz5cbiAgICAgICAgICAgICAgeyFvLnJlZ2V4cCAmJiA8Yy5DZW50ZXIgcG9zaXRpb249J2Fic29sdXRlJyB0b3A9JzAnIGxlZnQ9JzAnIHJpZ2h0PScwJyBib3R0b209JzAnIGZvbnRTaXplPScyZW0nPjxBaU91dGxpbmVTdG9wLz48L2MuQ2VudGVyPn1cbiAgICAgICAgICAgIDwvYy5CdXR0b24+XG4gICAgICAgICAgICA8Yy5CdXR0b25cbiAgICAgICAgICAgICAgaD0nM2VtJyBtYXhXPSczZW0nIHc9JzNlbScgcG9zaXRpb249J3JlbGF0aXZlJ1xuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiAgZ28uZG8oJ3F1ZXJ5Jyl9IHZhcmlhbnQ9e2dvLnZhbHVlID09PSAncXVlcnknID8gJ2FjdGl2ZScgOiB1bmRlZmluZWR9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHtge3F9YH1cbiAgICAgICAgICAgICAgeyFvLnF1ZXJ5ICYmIDxjLkNlbnRlciBwb3NpdGlvbj0nYWJzb2x1dGUnIHRvcD0nMCcgbGVmdD0nMCcgcmlnaHQ9JzAnIGJvdHRvbT0nMCcgZm9udFNpemU9JzJlbSc+PEFpT3V0bGluZVN0b3AvPjwvYy5DZW50ZXI+fVxuICAgICAgICAgICAgPC9jLkJ1dHRvbj5cbiAgICAgICAgICAgIDxjLlNwYWNlci8+XG4gICAgICAgICAgICA8Yy5CdXR0b25cbiAgICAgICAgICAgICAgaD0nM2VtJyBtYXhXPSczZW0nIHc9JzNlbScgcG9zaXRpb249J3JlbGF0aXZlJ1xuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiAgZ28uZG8oJ3ZhbHVlcycpfSB2YXJpYW50PXtnby52YWx1ZSA9PT0gJ3ZhbHVlcycgPyAnYWN0aXZlJyA6IHVuZGVmaW5lZH1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgXCJ2XCJcbiAgICAgICAgICAgICAgeyFvLnZhbHVlcyAmJiA8Yy5DZW50ZXIgcG9zaXRpb249J2Fic29sdXRlJyB0b3A9JzAnIGxlZnQ9JzAnIHJpZ2h0PScwJyBib3R0b209JzAnIGZvbnRTaXplPScyZW0nPjxBaU91dGxpbmVTdG9wLz48L2MuQ2VudGVyPn1cbiAgICAgICAgICAgIDwvYy5CdXR0b24+XG4gICAgICAgICAgICA8Yy5CdXR0b25cbiAgICAgICAgICAgICAgaD0nM2VtJyBtYXhXPSczZW0nIHc9JzNlbScgcG9zaXRpb249J3JlbGF0aXZlJ1xuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiAgZ28uZG8oJ2NvbnRhaW5zJyl9IHZhcmlhbnQ9e2dvLnZhbHVlID09PSAnY29udGFpbnMnID8gJ2FjdGl2ZScgOiB1bmRlZmluZWR9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIPCfl4LvuI9cbiAgICAgICAgICAgICAgeyFvLmNvbnRhaW5zICYmIDxjLkNlbnRlciBwb3NpdGlvbj0nYWJzb2x1dGUnIHRvcD0nMCcgbGVmdD0nMCcgcmlnaHQ9JzAnIGJvdHRvbT0nMCcgZm9udFNpemU9JzJlbSc+PEFpT3V0bGluZVN0b3AvPjwvYy5DZW50ZXI+fVxuICAgICAgICAgICAgPC9jLkJ1dHRvbj5cbiAgICAgICAgICA8L2MuRmxleD5cbiAgICAgICAgPC9jLlNpbXBsZUdyaWQ+XG4gICAgICA8L2MuQm94PlxuICAgIDwvZ28uT24+XG4gIH07XG59XG4iXX0=",
          "link_id": 10559
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 10736,
      "src_id": 10711,
      "handler_id": 10715,
      "execution_provider_id": 33,
      "isolation_provider_id": 144,
      "dist": {
        "id": 10736,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 1443,
          "value": "({ deep, data, require, Go }) => {\n    const { MdEdit, MdPreview, MdSaveAlt } = require(\"react-icons/md\");\n    const React = require('react');\n    const { TypedIcon, DownIcon, UpIcon, TypeIcon, InIcon, OutIcon, FromIcon, ToIcon, useSymbol, } = require('@deep-foundation/perception-app');\n    const c = require('@chakra-ui/react');\n    const dpl = '@deep-foundation/perception-links';\n    const dc = '@deep-foundation/core';\n    const Query = deep.idLocal(dc, 'Query');\n    const Stack = deep.idLocal(dpl, 'Stack');\n    const History = deep.idLocal(dpl, 'History');\n    const Header = deep.idLocal(dpl, 'Header');\n    const Search = deep.idLocal(dpl, 'Search');\n    const TreeQuery = deep.idLocal(dpl, 'TreeQuery');\n    const TreeList = deep.idLocal(dpl, 'TreeList');\n    const TreeLink = deep.idLocal(dpl, 'TreeLink');\n    const TreeLinkInsert = deep.idLocal(dpl, 'TreeLinkInsert');\n    const TreeLinkDelete = deep.idLocal(dpl, 'TreeLinkDelete');\n    const TreeLinkButton = deep.idLocal(dpl, 'TreeLinkButton');\n    return ({ go, isActive, fullWidth = null, saveHistory = false, initialResults, ...props }, ref) => {\n        const [links, setLinks] = React.useState(initialResults || []);\n        const firstRef = React.useRef(false);\n        const nav = go.useNav();\n        nav(Search, 'left', 'up', 'right', Stack);\n        nav(Stack, 'left', Search, 'right', 'down');\n        return React.createElement(go.On, { do: {\n                exec: (g, v, o) => o?.id && go.go.do('open', { handlerId: TreeLink, id: o.id, prevId: go.linkId, focus: true }),\n                close: (g, v, o) => go.go.do('close', { id: go.linkId }),\n                left: (g, v, o) => go.focus(nav.get(go.value || Search, 'left'), { prev: go.value }),\n                up: (g, v, o) => go.focus(nav.get(go.value || Search, 'up'), { prev: go.value }),\n                right: (g, v, o) => go.focus(nav.get(go.value || Search, 'right'), { prev: go.value }),\n                down: (g, v, o) => go.focus(nav.get(go.value || Search, 'down'), { prev: go.value }),\n            } },\n            React.createElement(c.Flex, { direction: 'column', minW: fullWidth || '30em', maxW: fullWidth || '30em', h: '100%', maxH: '100%', ...props },\n                React.createElement(go.Provider, { linkId: Search },\n                    React.createElement(go.Handler, { linkId: go.linkId, handlerId: Search, saveHistory: saveHistory, onSearch: (results) => {\n                            if (!initialResults || !!firstRef.current) {\n                                console.log('onSearch', results);\n                                let links = results.data || [];\n                                setLinks(links);\n                            }\n                            firstRef.current = true;\n                        }, childrenSearchRight: React.createElement(c.Button, { minW: '3e,', w: '3em', h: '100%', minH: '3em', p: '0', onClick: () => go.focus('close').go.do('close'), variant: go.value === 'close' ? 'active' : null }, \"x\") })),\n                React.createElement(go.Provider, { linkId: Stack },\n                    React.createElement(go.Handler, { handlerId: Stack, direction: 'vertical', links: links, flex: '1', saveHistory: saveHistory }))));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxDQUFDLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRTtJQUM5QixNQUFNLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztJQUNuRSxNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7SUFFL0IsTUFBTSxFQUNKLFNBQVMsRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQ3hFLFNBQVMsR0FDVixHQUFHLE9BQU8sQ0FBQyxpQ0FBaUMsQ0FBQyxDQUFDO0lBRS9DLE1BQU0sQ0FBQyxHQUFHLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBRXRDLE1BQU0sR0FBRyxHQUFHLG1DQUFtQyxDQUFDO0lBQ2hELE1BQU0sRUFBRSxHQUFHLHVCQUF1QixDQUFDO0lBRW5DLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsRUFBRSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQ3hDLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQ3pDLE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLFNBQVMsQ0FBQyxDQUFDO0lBQzdDLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLFFBQVEsQ0FBQyxDQUFDO0lBQzNDLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLFFBQVEsQ0FBQyxDQUFDO0lBQzNDLE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLFdBQVcsQ0FBQyxDQUFDO0lBQ2pELE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLFVBQVUsQ0FBQyxDQUFDO0lBQy9DLE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLFVBQVUsQ0FBQyxDQUFDO0lBQy9DLE1BQU0sY0FBYyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLGdCQUFnQixDQUFDLENBQUM7SUFDM0QsTUFBTSxjQUFjLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQztJQUMzRCxNQUFNLGNBQWMsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxnQkFBZ0IsQ0FBQyxDQUFDO0lBRTNELE9BQU8sQ0FBQyxFQUNOLEVBQUUsRUFFRixRQUFRLEVBQ1IsU0FBUyxHQUFHLElBQUksRUFFaEIsV0FBVyxHQUFHLEtBQUssRUFFbkIsY0FBYyxFQUNkLEdBQUcsS0FBSyxFQUNULEVBQUUsR0FBRyxFQUFFLEVBQUU7UUFDUixNQUFNLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxHQUFHLEtBQUssQ0FBQyxRQUFRLENBQUMsY0FBYyxJQUFJLEVBQUUsQ0FBQyxDQUFDO1FBQy9ELE1BQU0sUUFBUSxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7UUFFckMsTUFBTSxHQUFHLEdBQUcsRUFBRSxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBQ3hCLEdBQUcsQ0FBQyxNQUFNLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFDMUMsR0FBRyxDQUFDLEtBQUssRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE9BQU8sRUFBRSxNQUFNLENBQUMsQ0FBQztRQUU1QyxPQUFPLG9CQUFDLEVBQUUsQ0FBQyxFQUFFLElBQUMsRUFBRSxFQUFFO2dCQUNoQixJQUFJLEVBQUUsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsSUFBSSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsRUFBRSxTQUFTLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLE1BQU0sRUFBRSxFQUFFLENBQUMsTUFBTSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsQ0FBQztnQkFDN0csS0FBSyxFQUFFLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsTUFBTSxFQUFFLENBQUM7Z0JBRXRELElBQUksRUFBRSxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEtBQUssSUFBSSxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRSxDQUFDLEtBQUssRUFBRSxDQUFDO2dCQUNsRixFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxLQUFLLElBQUksTUFBTSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUUsQ0FBQyxLQUFLLEVBQUUsQ0FBQztnQkFDOUUsS0FBSyxFQUFFLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsS0FBSyxJQUFJLE1BQU0sRUFBRSxPQUFPLENBQUMsRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFLENBQUMsS0FBSyxFQUFFLENBQUM7Z0JBQ3BGLElBQUksRUFBRSxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEtBQUssSUFBSSxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRSxDQUFDLEtBQUssRUFBRSxDQUFDO2FBQ25GO1lBQ0Msb0JBQUMsQ0FBQyxDQUFDLElBQUksSUFBQyxTQUFTLEVBQUMsUUFBUSxFQUFDLElBQUksRUFBRSxTQUFTLElBQUksTUFBTSxFQUFFLElBQUksRUFBRSxTQUFTLElBQUksTUFBTSxFQUFFLENBQUMsRUFBQyxNQUFNLEVBQUMsSUFBSSxFQUFDLE1BQU0sS0FBSyxLQUFLO2dCQUM3RyxvQkFBQyxFQUFFLENBQUMsUUFBUSxJQUFDLE1BQU0sRUFBRSxNQUFNO29CQUN6QixvQkFBQyxFQUFFLENBQUMsT0FBTyxJQUFDLE1BQU0sRUFBRSxFQUFFLENBQUMsTUFBTSxFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQzlDLFdBQVcsRUFBRSxXQUFXLEVBQ3hCLFFBQVEsRUFBRSxDQUFDLE9BQU8sRUFBRSxFQUFFOzRCQUNwQixJQUFJLENBQUMsY0FBYyxJQUFJLENBQUMsQ0FBQyxRQUFRLENBQUMsT0FBTyxFQUFFLENBQUM7Z0NBQzFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsVUFBVSxFQUFFLE9BQU8sQ0FBQyxDQUFDO2dDQUNqQyxJQUFJLEtBQUssR0FBRyxPQUFPLENBQUMsSUFBSSxJQUFJLEVBQUUsQ0FBQztnQ0FDL0IsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDOzRCQUNsQixDQUFDOzRCQUNELFFBQVEsQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDO3dCQUMxQixDQUFDLEVBQ0QsbUJBQW1CLEVBQUUsb0JBQUMsQ0FBQyxDQUFDLE1BQU0sSUFDNUIsSUFBSSxFQUFDLEtBQUssRUFBQyxDQUFDLEVBQUMsS0FBSyxFQUFDLENBQUMsRUFBQyxNQUFNLEVBQUMsSUFBSSxFQUFDLEtBQUssRUFBQyxDQUFDLEVBQUMsR0FBRyxFQUM1QyxPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxFQUMvQyxPQUFPLEVBQUUsRUFBRSxDQUFDLEtBQUssS0FBSyxPQUFPLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsSUFBSSxRQUNwQyxHQUNiLENBQ1U7Z0JBQ2Qsb0JBQUMsRUFBRSxDQUFDLFFBQVEsSUFBQyxNQUFNLEVBQUUsS0FBSztvQkFDeEIsb0JBQUMsRUFBRSxDQUFDLE9BQU8sSUFBQyxTQUFTLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBQyxVQUFVLEVBQUMsS0FBSyxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUMsR0FBRyxFQUFDLFdBQVcsRUFBRSxXQUFXLEdBQUcsQ0FDekYsQ0FDUCxDQUNILENBQUE7SUFDVixDQUFDLENBQUM7QUFDSixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIoeyBkZWVwLCBkYXRhLCByZXF1aXJlLCBHbyB9KSA9PiB7XG4gIGNvbnN0IHsgTWRFZGl0LCBNZFByZXZpZXcsIE1kU2F2ZUFsdCB9ID0gcmVxdWlyZShcInJlYWN0LWljb25zL21kXCIpO1xuICBjb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG5cbiAgY29uc3Qge1xuICAgIFR5cGVkSWNvbiwgRG93bkljb24sIFVwSWNvbiwgVHlwZUljb24sIEluSWNvbiwgT3V0SWNvbiwgRnJvbUljb24sIFRvSWNvbixcbiAgICB1c2VTeW1ib2wsXG4gIH0gPSByZXF1aXJlKCdAZGVlcC1mb3VuZGF0aW9uL3BlcmNlcHRpb24tYXBwJyk7XG5cbiAgY29uc3QgYyA9IHJlcXVpcmUoJ0BjaGFrcmEtdWkvcmVhY3QnKTtcblxuICBjb25zdCBkcGwgPSAnQGRlZXAtZm91bmRhdGlvbi9wZXJjZXB0aW9uLWxpbmtzJztcbiAgY29uc3QgZGMgPSAnQGRlZXAtZm91bmRhdGlvbi9jb3JlJztcbiAgXG4gIGNvbnN0IFF1ZXJ5ID0gZGVlcC5pZExvY2FsKGRjLCAnUXVlcnknKTtcbiAgY29uc3QgU3RhY2sgPSBkZWVwLmlkTG9jYWwoZHBsLCAnU3RhY2snKTtcbiAgY29uc3QgSGlzdG9yeSA9IGRlZXAuaWRMb2NhbChkcGwsICdIaXN0b3J5Jyk7XG4gIGNvbnN0IEhlYWRlciA9IGRlZXAuaWRMb2NhbChkcGwsICdIZWFkZXInKTtcbiAgY29uc3QgU2VhcmNoID0gZGVlcC5pZExvY2FsKGRwbCwgJ1NlYXJjaCcpO1xuICBjb25zdCBUcmVlUXVlcnkgPSBkZWVwLmlkTG9jYWwoZHBsLCAnVHJlZVF1ZXJ5Jyk7XG4gIGNvbnN0IFRyZWVMaXN0ID0gZGVlcC5pZExvY2FsKGRwbCwgJ1RyZWVMaXN0Jyk7XG4gIGNvbnN0IFRyZWVMaW5rID0gZGVlcC5pZExvY2FsKGRwbCwgJ1RyZWVMaW5rJyk7XG4gIGNvbnN0IFRyZWVMaW5rSW5zZXJ0ID0gZGVlcC5pZExvY2FsKGRwbCwgJ1RyZWVMaW5rSW5zZXJ0Jyk7XG4gIGNvbnN0IFRyZWVMaW5rRGVsZXRlID0gZGVlcC5pZExvY2FsKGRwbCwgJ1RyZWVMaW5rRGVsZXRlJyk7XG4gIGNvbnN0IFRyZWVMaW5rQnV0dG9uID0gZGVlcC5pZExvY2FsKGRwbCwgJ1RyZWVMaW5rQnV0dG9uJyk7XG5cbiAgcmV0dXJuICh7XG4gICAgZ28sXG5cbiAgICBpc0FjdGl2ZSxcbiAgICBmdWxsV2lkdGggPSBudWxsLFxuXG4gICAgc2F2ZUhpc3RvcnkgPSBmYWxzZSxcblxuICAgIGluaXRpYWxSZXN1bHRzLFxuICAgIC4uLnByb3BzXG4gIH0sIHJlZikgPT4ge1xuICAgIGNvbnN0IFtsaW5rcywgc2V0TGlua3NdID0gUmVhY3QudXNlU3RhdGUoaW5pdGlhbFJlc3VsdHMgfHwgW10pO1xuICAgIGNvbnN0IGZpcnN0UmVmID0gUmVhY3QudXNlUmVmKGZhbHNlKTtcbiAgICBcbiAgICBjb25zdCBuYXYgPSBnby51c2VOYXYoKTtcbiAgICBuYXYoU2VhcmNoLCAnbGVmdCcsICd1cCcsICdyaWdodCcsIFN0YWNrKTtcbiAgICBuYXYoU3RhY2ssICdsZWZ0JywgU2VhcmNoLCAncmlnaHQnLCAnZG93bicpO1xuXG4gICAgcmV0dXJuIDxnby5PbiBkbz17e1xuICAgICAgZXhlYzogKGcsdixvKSA9PiBvPy5pZCAmJiBnby5nby5kbygnb3BlbicsIHsgaGFuZGxlcklkOiBUcmVlTGluaywgaWQ6IG8uaWQsIHByZXZJZDogZ28ubGlua0lkLCBmb2N1czogdHJ1ZSB9KSxcbiAgICAgIGNsb3NlOiAoZyx2LG8pID0+IGdvLmdvLmRvKCdjbG9zZScsIHsgaWQ6IGdvLmxpbmtJZCB9KSxcblxuICAgICAgbGVmdDogKGcsdixvKSA9PiBnby5mb2N1cyhuYXYuZ2V0KGdvLnZhbHVlIHx8IFNlYXJjaCwgJ2xlZnQnKSwgeyBwcmV2OiBnby52YWx1ZSB9KSxcbiAgICAgIHVwOiAoZyx2LG8pID0+IGdvLmZvY3VzKG5hdi5nZXQoZ28udmFsdWUgfHwgU2VhcmNoLCAndXAnKSwgeyBwcmV2OiBnby52YWx1ZSB9KSxcbiAgICAgIHJpZ2h0OiAoZyx2LG8pID0+IGdvLmZvY3VzKG5hdi5nZXQoZ28udmFsdWUgfHwgU2VhcmNoLCAncmlnaHQnKSwgeyBwcmV2OiBnby52YWx1ZSB9KSxcbiAgICAgIGRvd246IChnLHYsbykgPT4gZ28uZm9jdXMobmF2LmdldChnby52YWx1ZSB8fCBTZWFyY2gsICdkb3duJyksIHsgcHJldjogZ28udmFsdWUgfSksXG4gICAgfX0+XG4gICAgICA8Yy5GbGV4IGRpcmVjdGlvbj0nY29sdW1uJyBtaW5XPXtmdWxsV2lkdGggfHwgJzMwZW0nfSBtYXhXPXtmdWxsV2lkdGggfHwgJzMwZW0nfSBoPScxMDAlJyBtYXhIPScxMDAlJyB7Li4ucHJvcHN9PlxuICAgICAgICA8Z28uUHJvdmlkZXIgbGlua0lkPXtTZWFyY2h9PlxuICAgICAgICAgIDxnby5IYW5kbGVyIGxpbmtJZD17Z28ubGlua0lkfSBoYW5kbGVySWQ9e1NlYXJjaH1cbiAgICAgICAgICAgIHNhdmVIaXN0b3J5PXtzYXZlSGlzdG9yeX1cbiAgICAgICAgICAgIG9uU2VhcmNoPXsocmVzdWx0cykgPT4ge1xuICAgICAgICAgICAgICBpZiAoIWluaXRpYWxSZXN1bHRzIHx8ICEhZmlyc3RSZWYuY3VycmVudCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdvblNlYXJjaCcsIHJlc3VsdHMpO1xuICAgICAgICAgICAgICAgIGxldCBsaW5rcyA9IHJlc3VsdHMuZGF0YSB8fCBbXTtcbiAgICAgICAgICAgICAgICBzZXRMaW5rcyhsaW5rcyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZmlyc3RSZWYuY3VycmVudCA9IHRydWU7XG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAgY2hpbGRyZW5TZWFyY2hSaWdodD17PGMuQnV0dG9uXG4gICAgICAgICAgICAgIG1pblc9JzNlLCcgdz0nM2VtJyBoPScxMDAlJyBtaW5IPSczZW0nIHA9JzAnXG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGdvLmZvY3VzKCdjbG9zZScpLmdvLmRvKCdjbG9zZScpfVxuICAgICAgICAgICAgICB2YXJpYW50PXtnby52YWx1ZSA9PT0gJ2Nsb3NlJyA/ICdhY3RpdmUnIDogbnVsbH1cbiAgICAgICAgICAgID54PC9jLkJ1dHRvbj59XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9nby5Qcm92aWRlcj5cbiAgICAgICAgPGdvLlByb3ZpZGVyIGxpbmtJZD17U3RhY2t9PlxuICAgICAgICAgIDxnby5IYW5kbGVyIGhhbmRsZXJJZD17U3RhY2t9IGRpcmVjdGlvbj0ndmVydGljYWwnIGxpbmtzPXtsaW5rc30gZmxleD0nMScgc2F2ZUhpc3Rvcnk9e3NhdmVIaXN0b3J5fS8+XG4gICAgICAgIDwvZ28uUHJvdmlkZXI+XG4gICAgICA8L2MuRmxleD5cbiAgICA8L2dvLk9uPlxuICB9O1xufVxuIl19",
          "link_id": 10736
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 11305,
      "src_id": 11285,
      "handler_id": 11289,
      "execution_provider_id": 33,
      "isolation_provider_id": 144,
      "dist": {
        "id": 11305,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 1456,
          "value": "({ deep, data, require, Go }) => {\n    const { BsFullscreenExit, BsFullscreen } = require(\"react-icons/bs\");\n    const React = require('react');\n    const c = require('@chakra-ui/react');\n    const dpl = '@deep-foundation/perception-links';\n    return ({ go, linkId, disclosure: __disclosure, }, ref) => {\n        const _disclosure = c.useDisclosure();\n        const disclosure = __disclosure || _disclosure;\n        return React.createElement(go.On, { do: {} },\n            !disclosure.isOpen && React.createElement(go.Editor, { linkId: linkId, fillSize: true },\n                React.createElement(c.Button, { w: '3em', h: '3em', onClick: disclosure.onOpen },\n                    React.createElement(BsFullscreen, null))),\n            React.createElement(c.Modal, { closeOnOverlayClick: true, blockScrollOnMount: false, onClose: disclosure.onClose, isOpen: disclosure.isOpen, portalProps: { containerRef: go.root().ref } },\n                React.createElement(c.ModalOverlay, null),\n                React.createElement(c.ModalContent, { w: '80vw', maxW: '80vw', h: '80vh', position: 'relative' },\n                    React.createElement(c.ModalHeader, null, '' + deep.nameLocal(linkId)),\n                    React.createElement(c.ModalBody, { p: 0, position: 'relative' },\n                        React.createElement(go.Editor, { linkId: linkId, fillSize: true },\n                            React.createElement(BsFullscreenExit, null))))));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxDQUFDLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRTtJQUM5QixNQUFNLEVBQUUsZ0JBQWdCLEVBQUUsWUFBWSxFQUFFLEdBQUcsT0FBTyxDQUFDLGdCQUFnQixDQUFDLENBQUM7SUFDckUsTUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBRS9CLE1BQU0sQ0FBQyxHQUFHLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBRXRDLE1BQU0sR0FBRyxHQUFHLG1DQUFtQyxDQUFDO0lBRWhELE9BQU8sQ0FBQyxFQUNOLEVBQUUsRUFDRixNQUFNLEVBRU4sVUFBVSxFQUFFLFlBQVksR0FDekIsRUFBRSxHQUFHLEVBQUUsRUFBRTtRQUNSLE1BQU0sV0FBVyxHQUFHLENBQUMsQ0FBQyxhQUFhLEVBQUUsQ0FBQztRQUN0QyxNQUFNLFVBQVUsR0FBRyxZQUFZLElBQUksV0FBVyxDQUFDO1FBRS9DLE9BQU8sb0JBQUMsRUFBRSxDQUFDLEVBQUUsSUFBQyxFQUFFLEVBQUUsRUFDakI7WUFDRSxDQUFDLFVBQVUsQ0FBQyxNQUFNLElBQUksb0JBQUMsRUFBRSxDQUFDLE1BQU0sSUFBQyxNQUFNLEVBQUUsTUFBTSxFQUFFLFFBQVE7Z0JBQ3hELG9CQUFDLENBQUMsQ0FBQyxNQUFNLElBQUMsQ0FBQyxFQUFDLEtBQUssRUFBQyxDQUFDLEVBQUMsS0FBSyxFQUFDLE9BQU8sRUFBRSxVQUFVLENBQUMsTUFBTTtvQkFDbEQsb0JBQUMsWUFBWSxPQUFFLENBQ04sQ0FDRDtZQUNaLG9CQUFDLENBQUMsQ0FBQyxLQUFLLElBQ04sbUJBQW1CLFFBQUMsa0JBQWtCLEVBQUUsS0FBSyxFQUM3QyxPQUFPLEVBQUUsVUFBVSxDQUFDLE9BQU8sRUFDM0IsTUFBTSxFQUFFLFVBQVUsQ0FBQyxNQUFNLEVBQUUsV0FBVyxFQUFFLEVBQUUsWUFBWSxFQUFFLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxHQUFHLEVBQUU7Z0JBRXZFLG9CQUFDLENBQUMsQ0FBQyxZQUFZLE9BQUc7Z0JBQ2xCLG9CQUFDLENBQUMsQ0FBQyxZQUFZLElBQUMsQ0FBQyxFQUFDLE1BQU0sRUFBQyxJQUFJLEVBQUMsTUFBTSxFQUFDLENBQUMsRUFBQyxNQUFNLEVBQUMsUUFBUSxFQUFDLFVBQVU7b0JBQy9ELG9CQUFDLENBQUMsQ0FBQyxXQUFXLFFBQUUsRUFBRSxHQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQWlCO29CQUMxRCxvQkFBQyxDQUFDLENBQUMsU0FBUyxJQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsUUFBUSxFQUFDLFVBQVU7d0JBQ3BDLG9CQUFDLEVBQUUsQ0FBQyxNQUFNLElBQUMsTUFBTSxFQUFFLE1BQU0sRUFBRSxRQUFROzRCQUNqQyxvQkFBQyxnQkFBZ0IsT0FBRSxDQUNWLENBQ0MsQ0FDQyxDQUNULENBQ0osQ0FBQztJQUNYLENBQUMsQ0FBQztBQUNKLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbIih7IGRlZXAsIGRhdGEsIHJlcXVpcmUsIEdvIH0pID0+IHtcbiAgY29uc3QgeyBCc0Z1bGxzY3JlZW5FeGl0LCBCc0Z1bGxzY3JlZW4gfSA9IHJlcXVpcmUoXCJyZWFjdC1pY29ucy9ic1wiKTtcbiAgY29uc3QgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuICBcbiAgY29uc3QgYyA9IHJlcXVpcmUoJ0BjaGFrcmEtdWkvcmVhY3QnKTtcblxuICBjb25zdCBkcGwgPSAnQGRlZXAtZm91bmRhdGlvbi9wZXJjZXB0aW9uLWxpbmtzJztcblxuICByZXR1cm4gKHtcbiAgICBnbyxcbiAgICBsaW5rSWQsXG5cbiAgICBkaXNjbG9zdXJlOiBfX2Rpc2Nsb3N1cmUsXG4gIH0sIHJlZikgPT4ge1xuICAgIGNvbnN0IF9kaXNjbG9zdXJlID0gYy51c2VEaXNjbG9zdXJlKCk7XG4gICAgY29uc3QgZGlzY2xvc3VyZSA9IF9fZGlzY2xvc3VyZSB8fCBfZGlzY2xvc3VyZTtcblxuICAgIHJldHVybiA8Z28uT24gZG89e3tcbiAgICB9fT5cbiAgICAgIHshZGlzY2xvc3VyZS5pc09wZW4gJiYgPGdvLkVkaXRvciBsaW5rSWQ9e2xpbmtJZH0gZmlsbFNpemU+XG4gICAgICAgIDxjLkJ1dHRvbiB3PSczZW0nIGg9JzNlbScgb25DbGljaz17ZGlzY2xvc3VyZS5vbk9wZW59PlxuICAgICAgICAgIDxCc0Z1bGxzY3JlZW4vPlxuICAgICAgICA8L2MuQnV0dG9uPlxuICAgICAgPC9nby5FZGl0b3I+fVxuICAgICAgPGMuTW9kYWxcbiAgICAgICAgY2xvc2VPbk92ZXJsYXlDbGljayBibG9ja1Njcm9sbE9uTW91bnQ9e2ZhbHNlfVxuICAgICAgICBvbkNsb3NlPXtkaXNjbG9zdXJlLm9uQ2xvc2V9XG4gICAgICAgIGlzT3Blbj17ZGlzY2xvc3VyZS5pc09wZW59IHBvcnRhbFByb3BzPXt7IGNvbnRhaW5lclJlZjogZ28ucm9vdCgpLnJlZiB9fVxuICAgICAgPlxuICAgICAgICA8Yy5Nb2RhbE92ZXJsYXkgLz5cbiAgICAgICAgPGMuTW9kYWxDb250ZW50IHc9JzgwdncnIG1heFc9JzgwdncnIGg9JzgwdmgnIHBvc2l0aW9uPSdyZWxhdGl2ZSc+XG4gICAgICAgICAgPGMuTW9kYWxIZWFkZXI+eycnK2RlZXAubmFtZUxvY2FsKGxpbmtJZCl9PC9jLk1vZGFsSGVhZGVyPlxuICAgICAgICAgIDxjLk1vZGFsQm9keSBwPXswfSBwb3NpdGlvbj0ncmVsYXRpdmUnPlxuICAgICAgICAgICAgPGdvLkVkaXRvciBsaW5rSWQ9e2xpbmtJZH0gZmlsbFNpemU+XG4gICAgICAgICAgICAgIDxCc0Z1bGxzY3JlZW5FeGl0Lz5cbiAgICAgICAgICAgIDwvYy5CdXR0b24+XG4gICAgICAgICAgPC9jLk1vZGFsQm9keT5cbiAgICAgICAgPC9jLk1vZGFsQ29udGVudD5cbiAgICAgIDwvYy5Nb2RhbD5cbiAgICA8L2dvLk9uPjtcbiAgfTtcbn0iXX0=",
          "link_id": 11305
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 12272,
      "src_id": 12266,
      "handler_id": 12270,
      "execution_provider_id": 33,
      "isolation_provider_id": 144,
      "dist": {
        "id": 12272,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 1497,
          "value": "async ({ deep, data, require }) => {\n    const React = require('react');\n    const { SiApollographql } = require(\"react-icons/si\");\n    const c = require('@chakra-ui/react');\n    const dpl = '@deep-foundation/perception-links';\n    const dc = '@deep-foundation/core';\n    const Sandbox = deep.idLocal(dpl, 'Sandbox');\n    return ({ go, handlerId, isActive, }, ref) => {\n        return React.createElement(go.On, { do: {\n                exec: (g, v, o) => go.go.do('right', { ...o, id: Sandbox }),\n                click: (g, v, o) => go.do('exec', o),\n                right: (g, v, o) => go.do('exec', o),\n            } },\n            React.createElement(c.Button, { w: '3em', h: '3em', variant: isActive ? 'active' : undefined, onClick: () => {\n                    go.do('enter');\n                }, ref: ref },\n                React.createElement(SiApollographql, null)));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxFQUFFLEVBQUU7SUFDaEMsTUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQy9CLE1BQU0sRUFBRSxlQUFlLEVBQUUsR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztJQUN0RCxNQUFNLENBQUMsR0FBRyxPQUFPLENBQUMsa0JBQWtCLENBQUMsQ0FBQztJQUV0QyxNQUFNLEdBQUcsR0FBRyxtQ0FBbUMsQ0FBQztJQUNoRCxNQUFNLEVBQUUsR0FBRyx1QkFBdUIsQ0FBQztJQUVuQyxNQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxTQUFTLENBQUMsQ0FBQztJQUU3QyxPQUFPLENBQUMsRUFDTixFQUFFLEVBQ0YsU0FBUyxFQUVULFFBQVEsR0FDVCxFQUFFLEdBQUcsRUFBRSxFQUFFO1FBQ1IsT0FBTyxvQkFBQyxFQUFFLENBQUMsRUFBRSxJQUFDLEVBQUUsRUFBRTtnQkFDaEIsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxFQUFFLEdBQUcsQ0FBQyxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsQ0FBQztnQkFDekQsS0FBSyxFQUFFLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQztnQkFDbEMsS0FBSyxFQUFFLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQzthQUNuQztZQUNDLG9CQUFDLENBQUMsQ0FBQyxNQUFNLElBQ1AsQ0FBQyxFQUFDLEtBQUssRUFBQyxDQUFDLEVBQUMsS0FBSyxFQUNmLE9BQU8sRUFBRSxRQUFRLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUN4QyxPQUFPLEVBQUUsR0FBRyxFQUFFO29CQUNaLEVBQUUsQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLENBQUM7Z0JBQ2pCLENBQUMsRUFDRCxHQUFHLEVBQUUsR0FBRztnQkFFUixvQkFBQyxlQUFlLE9BQUUsQ0FDVCxDQUNMLENBQUM7SUFDWCxDQUFDLENBQUM7QUFDSixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJhc3luYyAoeyBkZWVwLCBkYXRhLCByZXF1aXJlIH0pID0+IHtcbiAgY29uc3QgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuICBjb25zdCB7IFNpQXBvbGxvZ3JhcGhxbCB9ID0gcmVxdWlyZShcInJlYWN0LWljb25zL3NpXCIpO1xuICBjb25zdCBjID0gcmVxdWlyZSgnQGNoYWtyYS11aS9yZWFjdCcpO1xuXG4gIGNvbnN0IGRwbCA9ICdAZGVlcC1mb3VuZGF0aW9uL3BlcmNlcHRpb24tbGlua3MnO1xuICBjb25zdCBkYyA9ICdAZGVlcC1mb3VuZGF0aW9uL2NvcmUnO1xuXG4gIGNvbnN0IFNhbmRib3ggPSBkZWVwLmlkTG9jYWwoZHBsLCAnU2FuZGJveCcpO1xuXG4gIHJldHVybiAoe1xuICAgIGdvLFxuICAgIGhhbmRsZXJJZCxcblxuICAgIGlzQWN0aXZlLFxuICB9LCByZWYpID0+IHtcbiAgICByZXR1cm4gPGdvLk9uIGRvPXt7XG4gICAgICBleGVjOiAoZyx2LG8pID0+IGdvLmdvLmRvKCdyaWdodCcsIHsgLi4ubywgaWQ6IFNhbmRib3ggfSkpLFxuICAgICAgY2xpY2s6IChnLHYsbykgPT4gZ28uZG8oJ2V4ZWMnLCBvKSxcbiAgICAgIHJpZ2h0OiAoZyx2LG8pID0+IGdvLmRvKCdleGVjJywgbyksXG4gICAgfX0+XG4gICAgICA8Yy5CdXR0b25cbiAgICAgICAgdz0nM2VtJyBoPSczZW0nXG4gICAgICAgIHZhcmlhbnQ9e2lzQWN0aXZlID8gJ2FjdGl2ZScgOiB1bmRlZmluZWR9XG4gICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICBnby5kbygnZW50ZXInKTtcbiAgICAgICAgfX1cbiAgICAgICAgcmVmPXtyZWZ9XG4gICAgICA+XG4gICAgICAgIDxTaUFwb2xsb2dyYXBocWwvPlxuICAgICAgPC9jLkJ1dHRvbj5cbiAgICA8L2dvLk9uPjtcbiAgfTtcbn0iXX0=",
          "link_id": 12272
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 12501,
      "src_id": 12489,
      "handler_id": 12493,
      "execution_provider_id": 33,
      "isolation_provider_id": 144,
      "dist": {
        "id": 12501,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 1507,
          "value": "({ deep, data, require, Go }) => {\n    const React = require('react');\n    const { ApolloSandbox } = require('@apollo/sandbox/react');\n    const c = require('@chakra-ui/react');\n    return ({ go, requestOptions = {}, children, }, ref) => {\n        return React.createElement(go.On, { do: {\n                use: (g, v, o) => { },\n            } },\n            React.createElement(c.Box, { ref: ref, h: '100%', w: '100%', sx: { '& > div': { h: '100%' } } },\n                React.createElement(ApolloSandbox, { initialEndpoint: `http${deep.client.ssl ? 's' : ''}://${deep.client.path}`, initialState: {\n                        sharedHeaders: {\n                            Authorization: `Bearer ${deep.token}`,\n                        },\n                    } })));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxDQUFDLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRTtJQUM5QixNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7SUFFL0IsTUFBTSxFQUFFLGFBQWEsRUFBRSxHQUFHLE9BQU8sQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDO0lBQzNELE1BQU0sQ0FBQyxHQUFHLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBRXRDLE9BQU8sQ0FBQyxFQUNOLEVBQUUsRUFFRixjQUFjLEdBQUcsRUFBRSxFQUVuQixRQUFRLEdBQ1QsRUFBRSxHQUFHLEVBQUUsRUFBRTtRQUNSLE9BQU8sb0JBQUMsRUFBRSxDQUFDLEVBQUUsSUFBQyxFQUFFLEVBQUU7Z0JBQ2hCLEdBQUcsRUFBRSxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFFLEVBQUUsR0FBRSxDQUFDO2FBQ25CO1lBQ0Msb0JBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBQyxNQUFNLEVBQUMsQ0FBQyxFQUFDLE1BQU0sRUFBQyxFQUFFLEVBQUUsRUFBRSxTQUFTLEVBQUUsRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLEVBQUU7Z0JBQ2pFLG9CQUFDLGFBQWEsSUFDWixlQUFlLEVBQUUsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLE1BQU0sSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsRUFDMUUsWUFBWSxFQUFFO3dCQUNaLGFBQWEsRUFBRTs0QkFDYixhQUFhLEVBQUUsVUFBVSxJQUFJLENBQUMsS0FBSyxFQUFFO3lCQUN0QztxQkFDRixHQUNELENBQ0ksQ0FDRixDQUFDO0lBQ1gsQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiKHsgZGVlcCwgZGF0YSwgcmVxdWlyZSwgR28gfSkgPT4ge1xuICBjb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG4gIFxuICBjb25zdCB7IEFwb2xsb1NhbmRib3ggfSA9IHJlcXVpcmUoJ0BhcG9sbG8vc2FuZGJveC9yZWFjdCcpO1xuICBjb25zdCBjID0gcmVxdWlyZSgnQGNoYWtyYS11aS9yZWFjdCcpO1xuXG4gIHJldHVybiAoe1xuICAgIGdvLFxuXG4gICAgcmVxdWVzdE9wdGlvbnMgPSB7fSxcblxuICAgIGNoaWxkcmVuLFxuICB9LCByZWYpID0+IHtcbiAgICByZXR1cm4gPGdvLk9uIGRvPXt7XG4gICAgICB1c2U6IChnLHYsbykgPT4ge30sXG4gICAgfX0+XG4gICAgICA8Yy5Cb3ggcmVmPXtyZWZ9IGg9JzEwMCUnIHc9JzEwMCUnIHN4PXt7ICcmID4gZGl2JzogeyBoOiAnMTAwJScgfSB9fT5cbiAgICAgICAgPEFwb2xsb1NhbmRib3hcbiAgICAgICAgICBpbml0aWFsRW5kcG9pbnQ9e2BodHRwJHtkZWVwLmNsaWVudC5zc2wgPyAncycgOiAnJ306Ly8ke2RlZXAuY2xpZW50LnBhdGh9YH1cbiAgICAgICAgICBpbml0aWFsU3RhdGU9e3tcbiAgICAgICAgICAgIHNoYXJlZEhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2RlZXAudG9rZW59YCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfX1cbiAgICAgICAgLz5cbiAgICAgIDwvYy5Cb3g+XG4gICAgPC9nby5Pbj47XG4gIH07XG59Il19",
          "link_id": 12501
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 13045,
      "src_id": 13039,
      "handler_id": 13043,
      "execution_provider_id": 33,
      "isolation_provider_id": 144,
      "dist": {
        "id": 13045,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 1526,
          "value": "({ deep, data, require, Go }) => {\n    const { MdEdit, MdPreview, MdSaveAlt } = require(\"react-icons/md\");\n    const React = require('react');\n    const { TypedIcon, DownIcon, UpIcon, TypeIcon, InIcon, OutIcon, FromIcon, ToIcon, useSymbol, } = require('@deep-foundation/perception-app');\n    const c = require('@chakra-ui/react');\n    const dpl = '@deep-foundation/perception-links';\n    const dc = '@deep-foundation/core';\n    const History = deep.idLocal(dpl, 'History');\n    const Header = deep.idLocal(dpl, 'Header');\n    const Search = deep.idLocal(dpl, 'Search');\n    const TreeQuery = deep.idLocal(dpl, 'TreeQuery');\n    const TreeList = deep.idLocal(dpl, 'TreeList');\n    const TreeLink = deep.idLocal(dpl, 'TreeLink');\n    const TreeLinkInsert = deep.idLocal(dpl, 'TreeLinkInsert');\n    const TreeLinkDelete = deep.idLocal(dpl, 'TreeLinkDelete');\n    const TreeLinkButton = deep.idLocal(dpl, 'TreeLinkButton');\n    const _Item = ({ link, isActive, isConcentrated, Item, direction, startProps }) => {\n        const go = Go.useGo();\n        return React.createElement(c.Box, { ref: go.ref, ...(direction === 'vertical' ? { w: '100%' } : { h: '100%' }) }, !!Item ? React.createElement(Item, { link: link, go: go, isActive: isActive, ...startProps, isConcentrated: isConcentrated }) : React.createElement(go.Handler, { handlerId: TreeLinkButton, linkId: link.id, variant: 'full', ...startProps, isActive: isActive, ...(direction === 'vertical' ? { w: '100%' } : { h: '100%' }), isConcentrated: isConcentrated }));\n    };\n    const startPropsPlaceholder = {};\n    return ({ go, handlerId, links = [], Item = _Item, direction = 'vertical', using = false, saveHistory = false, startProps = {}, concentrated, children, }, ref) => {\n        const list = links.map((link, i) => !!link ? React.createElement(go.Provider, { key: `${link?.id}`, linkId: link.id },\n            React.createElement(_Item, { link: link, isActive: go.value === link.id, Item: Item, direction: direction, saveHistory: saveHistory, startProps: !i ? startProps : startPropsPlaceholder, isConcentrated: concentrated ? !!concentrated[link.id] : undefined })) : React.createElement(React.Fragment, null));\n        const content = direction === 'vertical' ? React.createElement(c.VStack, { ref: ref, overflowY: 'scroll', overflowX: 'hidden', css: go.noScrollBar, flex: 1, w: '100%', h: '100%' },\n            list,\n            children) : React.createElement(c.HStack, { ref: ref, overflowX: 'scroll', overflowY: 'hidden', css: go.noScrollBar, flex: 1, w: '100%', h: '100%' },\n            list,\n            children);\n        React.useEffect(() => {\n            if (go?.current) {\n                if (using && go.root()?.data?.usedId != go.value)\n                    go.root().do('use', { id: go.value });\n                go.do('changed', { id: go.value });\n                go?.current?.scroll();\n            }\n        }, [go.value]);\n        const events = direction === 'vertical' ? {\n            up: (g, v, o) => {\n                if (o?.hotkeyEvent?.meta || o?.hotkeyEvent?.shift || o?.hotkeyEvent?.ctrl || o?.hotkeyEvent?.alt) {\n                    go.focus(links?.[0]?.id);\n                }\n                else\n                    go.value === links?.[0]?.id ? go.go.do('up') : go.focus(go.prev(links));\n            },\n            down: (g, v, o) => {\n                if (o?.hotkeyEvent?.meta || o?.hotkeyEvent?.shift || o?.hotkeyEvent?.ctrl || o?.hotkeyEvent?.alt) {\n                    go.focus(links?.[links.length - 1]?.id);\n                }\n                else\n                    go.value === links?.[links.length - 1]?.id ? go.go.do('down') : go.focus(go.next(links));\n            },\n        } : {\n            left: (g, v, o) => {\n                if (o?.hotkeyEvent?.meta || o?.hotkeyEvent?.shift || o?.hotkeyEvent?.ctrl || o?.hotkeyEvent?.alt) {\n                    go.focus(links?.[0]?.id);\n                }\n                else\n                    go.value === links?.[0]?.id ? go.go.do('left') : go.focus(go.prev(links));\n            },\n            right: (g, v, o) => {\n                if (o?.hotkeyEvent?.meta || o?.hotkeyEvent?.shift || o?.hotkeyEvent?.ctrl || o?.hotkeyEvent?.alt) {\n                    go.focus(links?.[links.length - 1]?.id);\n                }\n                else\n                    go.value === links?.[links.length - 1]?.id ? go.go.do('right') : go.focus(go.next(links));\n            },\n        };\n        return React.createElement(go.On, { do: {\n                focus: (g, d, v, o) => !v && go.set(o?.id ? o?.id : links?.[0]?.id),\n                use: (g, v, o) => o?.id && o?.id != go.value && go(o?.id) && go.set(o.id).go(o?.id).go?.scroll().go?.do('use'),\n                exec: (g, v, o) => (o?.id || go.value) && go.set(o?.id || go.value).go.go.do('exec', { id: o?.id || go.value }),\n                ...events,\n            } }, content);\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxDQUFDLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRTtJQUM5QixNQUFNLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztJQUNuRSxNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7SUFFL0IsTUFBTSxFQUNKLFNBQVMsRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQ3hFLFNBQVMsR0FDVixHQUFHLE9BQU8sQ0FBQyxpQ0FBaUMsQ0FBQyxDQUFDO0lBRS9DLE1BQU0sQ0FBQyxHQUFHLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBRXRDLE1BQU0sR0FBRyxHQUFHLG1DQUFtQyxDQUFDO0lBQ2hELE1BQU0sRUFBRSxHQUFHLHVCQUF1QixDQUFDO0lBRW5DLE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLFNBQVMsQ0FBQyxDQUFDO0lBQzdDLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLFFBQVEsQ0FBQyxDQUFDO0lBQzNDLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLFFBQVEsQ0FBQyxDQUFDO0lBQzNDLE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLFdBQVcsQ0FBQyxDQUFDO0lBQ2pELE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLFVBQVUsQ0FBQyxDQUFDO0lBQy9DLE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxP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QU0sR0FBRyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztnQkFDMUMsQ0FBQzs7b0JBQU0sRUFBRSxDQUFDLEtBQUssS0FBSyxLQUFLLEVBQUUsQ0FBQyxLQUFLLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO1lBQ25HLENBQUM7U0FDRixDQUFDO1FBRUYsT0FBTyxvQkFBQyxFQUFFLENBQUMsRUFBRSxJQUNYLEVBQUUsRUFBRTtnQkFDRixLQUFLLEVBQUUsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDO2dCQUNoRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxJQUFJLEVBQUUsQ0FBQyxLQUFLLElBQUksRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEtBQUssQ0FBQztnQkFDNUcsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsSUFBSSxFQUFFLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsRUFBRSxJQUFJLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsSUFBSSxFQUFFLENBQUMsS0FBSyxFQUFFLENBQUM7Z0JBQzdHLEdBQUcsTUFBTTthQUNWLElBRUEsT0FBTyxDQUNGLENBQUE7SUFDVixDQUFDLENBQUM7QUFDSixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIoeyBkZWVwLCBkYXRhLCByZXF1aXJlLCBHbyB9KSA9PiB7XG4gIGNvbnN0IHsgTWRFZGl0LCBNZFByZXZpZXcsIE1kU2F2ZUFsdCB9ID0gcmVxdWlyZShcInJlYWN0LWljb25zL21kXCIpO1xuICBjb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG5cbiAgY29uc3Qge1xuICAgIFR5cGVkSWNvbiwgRG93bkljb24sIFVwSWNvbiwgVHlwZUljb24sIEluSWNvbiwgT3V0SWNvbiwgRnJvbUljb24sIFRvSWNvbixcbiAgICB1c2VTeW1ib2wsXG4gIH0gPSByZXF1aXJlKCdAZGVlcC1mb3VuZGF0aW9uL3BlcmNlcHRpb24tYXBwJyk7XG4gIFxuICBjb25zdCBjID0gcmVxdWlyZSgnQGNoYWtyYS11aS9yZWFjdCcpO1xuXG4gIGNvbnN0IGRwbCA9ICdAZGVlcC1mb3VuZGF0aW9uL3BlcmNlcHRpb24tbGlua3MnO1xuICBjb25zdCBkYyA9ICdAZGVlcC1mb3VuZGF0aW9uL2NvcmUnO1xuICBcbiAgY29uc3QgSGlzdG9yeSA9IGRlZXAuaWRMb2NhbChkcGwsICdIaXN0b3J5Jyk7XG4gIGNvbnN0IEhlYWRlciA9IGRlZXAuaWRMb2NhbChkcGwsICdIZWFkZXInKTtcbiAgY29uc3QgU2VhcmNoID0gZGVlcC5pZExvY2FsKGRwbCwgJ1NlYXJjaCcpO1xuICBjb25zdCBUcmVlUXVlcnkgPSBkZWVwLmlkTG9jYWwoZHBsLCAnVHJlZVF1ZXJ5Jyk7XG4gIGNvbnN0IFRyZWVMaXN0ID0gZGVlcC5pZExvY2FsKGRwbCwgJ1RyZWVMaXN0Jyk7XG4gIGNvbnN0IFRyZWVMaW5rID0gZGVlcC5pZExvY2FsKGRwbCwgJ1RyZWVMaW5rJyk7XG4gIGNvbnN0IFRyZWVMaW5rSW5zZXJ0ID0gZGVlcC5pZExvY2FsKGRwbCwgJ1RyZWVMaW5rSW5zZXJ0Jyk7XG4gIGNvbnN0IFRyZWVMaW5rRGVsZXRlID0gZGVlcC5pZExvY2FsKGRwbCwgJ1RyZWVMaW5rRGVsZXRlJyk7XG4gIGNvbnN0IFRyZWVMaW5rQnV0dG9uID0gZGVlcC5pZExvY2FsKGRwbCwgJ1RyZWVMaW5rQnV0dG9uJyk7XG5cbiAgY29uc3QgX0l0ZW0gPSAoeyBsaW5rLCBpc0FjdGl2ZSwgaXNDb25jZW50cmF0ZWQsIEl0ZW0sIGRpcmVjdGlvbiwgc3RhcnRQcm9wcyB9KSA9PiB7XG4gICAgY29uc3QgZ28gPSBHby51c2VHbygpO1xuICAgIHJldHVybiA8Yy5Cb3ggcmVmPXtnby5yZWZ9IHsuLi4oZGlyZWN0aW9uID09PSAndmVydGljYWwnID8geyB3OiAnMTAwJScgfSA6IHsgaDogJzEwMCUnIH0pfT5cbiAgICAgIHshIUl0ZW0gPyA8SXRlbSBsaW5rPXtsaW5rfSBnbz17Z299IGlzQWN0aXZlPXtpc0FjdGl2ZX0gey4uLnN0YXJ0UHJvcHN9XG4gICAgICAgIGlzQ29uY2VudHJhdGVkPXtpc0NvbmNlbnRyYXRlZH1cbiAgICAgIC8+IDogPGdvLkhhbmRsZXJcbiAgICAgICAgaGFuZGxlcklkPXtUcmVlTGlua0J1dHRvbn0gbGlua0lkPXtsaW5rLmlkfSB2YXJpYW50PSdmdWxsJyB7Li4uc3RhcnRQcm9wc31cbiAgICAgICAgaXNBY3RpdmU9e2lzQWN0aXZlfSB7Li4uKGRpcmVjdGlvbiA9PT0gJ3ZlcnRpY2FsJyA/IHsgdzogJzEwMCUnIH0gOiB7IGg6ICcxMDAlJyB9KX1cbiAgICAgICAgaXNDb25jZW50cmF0ZWQ9e2lzQ29uY2VudHJhdGVkfVxuICAgICAgLz59XG4gICAgPC9jLkJveD47XG4gIH1cblxuICBjb25zdCBzdGFydFByb3BzUGxhY2Vob2xkZXIgPSB7fTtcblxuICByZXR1cm4gKHtcbiAgICBnbyxcbiAgICBoYW5kbGVySWQsXG5cbiAgICBsaW5rcyA9IFtdLFxuICAgIEl0ZW0gPSBfSXRlbSxcblxuICAgIGRpcmVjdGlvbiA9ICd2ZXJ0aWNhbCcsIC8vICd2ZXJ0aWNhbCcgfCAnaG9yaXpvbnRhbCdcblxuICAgIHVzaW5nID0gZmFsc2UsXG4gICAgc2F2ZUhpc3RvcnkgPSBmYWxzZSxcblxuICAgIHN0YXJ0UHJvcHMgPSB7fSxcblxuICAgIGNvbmNlbnRyYXRlZCxcblxuICAgIGNoaWxkcmVuLFxuICB9LCByZWYpID0+IHtcbiAgICBjb25zdCBsaXN0ID0gbGlua3MubWFwKChsaW5rLCBpKSA9PiAhIWxpbmsgPyA8Z28uUHJvdmlkZXIga2V5PXtgJHtsaW5rPy5pZH1gfSBsaW5rSWQ9e2xpbmsuaWR9PlxuICAgICAgPF9JdGVtXG4gICAgICAgIGxpbms9e2xpbmt9IGlzQWN0aXZlPXtnby52YWx1ZSA9PT0gbGluay5pZH0gSXRlbT17SXRlbX1cbiAgICAgICAgZGlyZWN0aW9uPXtkaXJlY3Rpb259IHNhdmVIaXN0b3J5PXtzYXZlSGlzdG9yeX1cbiAgICAgICAgc3RhcnRQcm9wcz17IWkgPyBzdGFydFByb3BzIDogc3RhcnRQcm9wc1BsYWNlaG9sZGVyfVxuICAgICAgICBpc0NvbmNlbnRyYXRlZD17Y29uY2VudHJhdGVkID8gISFjb25jZW50cmF0ZWRbbGluay5pZF0gOiB1bmRlZmluZWR9XG4gICAgICAvPlxuICAgIDwvZ28uUHJvdmlkZXI+IDogPFJlYWN0LkZyYWdtZW50Lz4pO1xuXG4gICAgY29uc3QgY29udGVudCA9IGRpcmVjdGlvbiA9PT0gJ3ZlcnRpY2FsJyA/IDxjLlZTdGFjayByZWY9e3JlZn1cbiAgICAgIG92ZXJmbG93WT0nc2Nyb2xsJyBvdmVyZmxvd1g9J2hpZGRlbidcbiAgICAgIGNzcz17Z28ubm9TY3JvbGxCYXJ9IGZsZXg9ezF9XG4gICAgICB3PScxMDAlJyBoPScxMDAlJ1xuICAgID5cbiAgICAgIHtsaXN0fVxuICAgICAge2NoaWxkcmVufVxuICAgIDwvYy5WU3RhY2s+IDogPGMuSFN0YWNrIHJlZj17cmVmfVxuICAgICAgb3ZlcmZsb3dYPSdzY3JvbGwnIG92ZXJmbG93WT0naGlkZGVuJ1xuICAgICAgY3NzPXtnby5ub1Njcm9sbEJhcn0gZmxleD17MX1cbiAgICAgIHc9JzEwMCUnIGg9JzEwMCUnXG4gICAgPlxuICAgICAge2xpc3R9XG4gICAgICB7Y2hpbGRyZW59XG4gICAgPC9jLkhTdGFjaz47XG5cbiAgICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgaWYgKGdvPy5jdXJyZW50KSB7XG4gICAgICAgIGlmICh1c2luZyAmJiBnby5yb290KCk/LmRhdGE/LnVzZWRJZCAhPSBnby52YWx1ZSkgZ28ucm9vdCgpLmRvKCd1c2UnLCB7IGlkOiBnby52YWx1ZSB9KTtcbiAgICAgICAgZ28uZG8oJ2NoYW5nZWQnLCB7IGlkOiBnby52YWx1ZSB9KTtcbiAgICAgICAgZ28/LmN1cnJlbnQ/LnNjcm9sbCgpO1xuICAgICAgfVxuICAgIH0sIFtnby52YWx1ZV0pO1xuXG4gICAgY29uc3QgZXZlbnRzID0gZGlyZWN0aW9uID09PSAndmVydGljYWwnID8ge1xuICAgICAgdXA6IChnLHYsbykgPT4ge1xuICAgICAgICBpZiAobz8uaG90a2V5RXZlbnQ/Lm1ldGEgfHwgbz8uaG90a2V5RXZlbnQ/LnNoaWZ0IHx8IG8/LmhvdGtleUV2ZW50Py5jdHJsIHx8IG8/LmhvdGtleUV2ZW50Py5hbHQpIHtcbiAgICAgICAgICBnby5mb2N1cyhsaW5rcz8uWzBdPy5pZCk7XG4gICAgICAgIH0gZWxzZSBnby52YWx1ZSA9PT0gbGlua3M/LlswXT8uaWQgPyBnby5nby5kbygndXAnKSA6IGdvLmZvY3VzKGdvLnByZXYobGlua3MpKTtcbiAgICAgIH0sXG4gICAgICBkb3duOiAoZyx2LG8pID0+IHtcbiAgICAgICAgaWYgKG8/LmhvdGtleUV2ZW50Py5tZXRhIHx8IG8/LmhvdGtleUV2ZW50Py5zaGlmdCB8fCBvPy5ob3RrZXlFdmVudD8uY3RybCB8fCBvPy5ob3RrZXlFdmVudD8uYWx0KSB7XG4gICAgICAgICAgZ28uZm9jdXMobGlua3M/LltsaW5rcy5sZW5ndGggLSAxXT8uaWQpO1xuICAgICAgICB9IGVsc2UgZ28udmFsdWUgPT09IGxpbmtzPy5bbGlua3MubGVuZ3RoIC0gMV0/LmlkID8gZ28uZ28uZG8oJ2Rvd24nKSA6IGdvLmZvY3VzKGdvLm5leHQobGlua3MpKTtcbiAgICAgIH0sXG4gICAgfSA6IHtcbiAgICAgIGxlZnQ6IChnLHYsbykgPT4ge1xuICAgICAgICBpZiAobz8uaG90a2V5RXZlbnQ/Lm1ldGEgfHwgbz8uaG90a2V5RXZlbnQ/LnNoaWZ0IHx8IG8/LmhvdGtleUV2ZW50Py5jdHJsIHx8IG8/LmhvdGtleUV2ZW50Py5hbHQpIHtcbiAgICAgICAgICBnby5mb2N1cyhsaW5rcz8uWzBdPy5pZCk7XG4gICAgICAgIH0gZWxzZSBnby52YWx1ZSA9PT0gbGlua3M/LlswXT8uaWQgPyBnby5nby5kbygnbGVmdCcpIDogZ28uZm9jdXMoZ28ucHJldihsaW5rcykpO1xuICAgICAgfSxcbiAgICAgIHJpZ2h0OiAoZyx2LG8pID0+IHtcbiAgICAgICAgaWYgKG8/LmhvdGtleUV2ZW50Py5tZXRhIHx8IG8/LmhvdGtleUV2ZW50Py5zaGlmdCB8fCBvPy5ob3RrZXlFdmVudD8uY3RybCB8fCBvPy5ob3RrZXlFdmVudD8uYWx0KSB7XG4gICAgICAgICAgZ28uZm9jdXMobGlua3M/LltsaW5rcy5sZW5ndGggLSAxXT8uaWQpO1xuICAgICAgICB9IGVsc2UgZ28udmFsdWUgPT09IGxpbmtzPy5bbGlua3MubGVuZ3RoIC0gMV0/LmlkID8gZ28uZ28uZG8oJ3JpZ2h0JykgOiBnby5mb2N1cyhnby5uZXh0KGxpbmtzKSk7XG4gICAgICB9LFxuICAgIH07XG5cbiAgICByZXR1cm4gPGdvLk9uXG4gICAgICBkbz17e1xuICAgICAgICBmb2N1czogKGcsZCx2LG8pID0+ICF2ICYmIGdvLnNldChvPy5pZCA/IG8/LmlkIDogbGlua3M/LlswXT8uaWQpLFxuICAgICAgICB1c2U6IChnLHYsbykgPT4gbz8uaWQgJiYgbz8uaWQgIT0gZ28udmFsdWUgJiYgZ28obz8uaWQpICYmIGdvLnNldChvLmlkKS5nbyhvPy5pZCkuZ28/LnNjcm9sbCgpLmdvPy5kbygndXNlJyksXG4gICAgICAgIGV4ZWM6IChnLHYsbykgPT4gKG8/LmlkIHx8IGdvLnZhbHVlKSAmJiBnby5zZXQobz8uaWQgfHwgZ28udmFsdWUpLmdvLmdvLmRvKCdleGVjJywgeyBpZDogbz8uaWQgfHwgZ28udmFsdWUgfSlcbiAgICAgICAgLi4uZXZlbnRzLFxuICAgICAgfX1cbiAgICA+XG4gICAgICB7Y29udGVudH1cbiAgICA8L2dvLk9uPlxuICB9O1xufVxuIl19",
          "link_id": 13045
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 14099,
      "src_id": 14093,
      "handler_id": 14097,
      "execution_provider_id": 33,
      "isolation_provider_id": 144,
      "dist": {
        "id": 14099,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 1541,
          "value": "({ deep, data, require, Go }) => {\n    const { BsCheck2All } = require(\"react-icons/bs\");\n    const React = require('react');\n    const c = require('@chakra-ui/react');\n    const dc = '@deep-foundation/core';\n    const dpl = '@deep-foundation/perception-links';\n    const Query = deep.idLocal(dc, 'Query');\n    const Contain = deep.idLocal(dc, 'Contain');\n    const FinderQuery = deep.idLocal(dpl, 'FinderQuery');\n    const Tree = deep.idLocal(dpl, 'Tree');\n    const TreeList = deep.idLocal(dpl, 'TreeList');\n    const Search = deep.idLocal(dpl, 'Search');\n    return ({ go, isActive, saveHistory = false, disclosure: __disclosure, startProps, ...props }, ref) => {\n        const _disclosure = c.useDisclosure();\n        const disclosure = __disclosure || _disclosure;\n        React.useEffect(() => () => deep.minilinks.apply([], `deep-perception-finder-${go.__p}`), []);\n        const [queryId, setQueryId] = React.useState(!saveHistory ? 'virtual' : undefined);\n        return React.createElement(go.On, { do: {\n                open: (g, v, o) => {\n                    if (!o?.id)\n                        return;\n                    disclosure.onClose();\n                    go.root().do('open', { id: o?.id, focus: true });\n                },\n                exec: async (g, v, o) => {\n                    if (saveHistory) {\n                        const { data: [{ id }] } = await deep.insert({\n                            type_id: Query,\n                            object: {\n                                _or: [{ in: { type_id: Contain, string: { value: { _ilike: `%Type%` } } } }],\n                            },\n                            containerId: deep.linkId,\n                            in: {\n                                type_id: FinderQuery,\n                                from_id: deep.linkId,\n                                containerId: deep.linkId,\n                            },\n                        });\n                        await deep.select(id, { apply: `deep-perception-finder-${go.__p}` });\n                        setQueryId(id);\n                    }\n                    disclosure.onOpen();\n                    go.focus(Tree);\n                }\n            } },\n            React.createElement(c.Button, { ref: ref, h: '3em', w: '3em', variant: isActive ? 'active' : null, onClick: () => go.do('exec'), ...props }, \"\\uD83E\\uDEAC\"),\n            !!queryId && disclosure.isOpen && React.createElement(go.Component, { path: [dpl, 'Finder'], disclosure: disclosure, initialId: queryId, initialHandlerId: TreeList, onSubmit: (id) => go.do('open', { id }), startProps: startProps }));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxDQUFDLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRTtJQUM5QixNQUFNLEVBQUUsV0FBVyxFQUFFLEdBQUcsT0FBTyxDQUFDLGdCQUFnQixDQUFDLENBQUM7SUFDbEQsTUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBRS9CLE1BQU0sQ0FBQyxHQUFHLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBRXRDLE1BQU0sRUFBRSxHQUFHLHVCQUF1QixDQUFDO0lBQ25DLE1BQU0sR0FBRyxHQUFHLG1DQUFtQyxDQUFDO0lBRWhELE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsRUFBRSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQ3hDLE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsRUFBRSxFQUFFLFNBQVMsQ0FBQyxDQUFDO0lBQzVDLE1BQU0sV0FBVyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLGFBQWEsQ0FBQyxDQUFDO0lBQ3JELE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBQ3ZDLE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLFVBQVUsQ0FBQyxDQUFDO0lBQy9DLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLFFBQVEsQ0FBQyxDQUFDO0lBRTNDLE9BQU8sQ0FBQyxFQUNOLEVBQUUsRUFFRixRQUFRLEVBQ1IsV0FBVyxHQUFHLEtBQUssRUFDbkIsVUFBVSxFQUFFLFlBQVksRUFDeEIsVUFBVSxFQUNWLEdBQUcsS0FBSyxFQUNULEVBQUUsR0FBRyxFQUFFLEVB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RSxRQUFRLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFDdkMsVUFBVSxFQUFFLFVBQVUsR0FDdEIsQ0FDSSxDQUFDO0lBQ1gsQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiKHsgZGVlcCwgZGF0YSwgcmVxdWlyZSwgR28gfSkgPT4ge1xuICBjb25zdCB7IEJzQ2hlY2syQWxsIH0gPSByZXF1aXJlKFwicmVhY3QtaWNvbnMvYnNcIik7XG4gIGNvbnN0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbiAgXG4gIGNvbnN0IGMgPSByZXF1aXJlKCdAY2hha3JhLXVpL3JlYWN0Jyk7XG5cbiAgY29uc3QgZGMgPSAnQGRlZXAtZm91bmRhdGlvbi9jb3JlJztcbiAgY29uc3QgZHBsID0gJ0BkZWVwLWZvdW5kYXRpb24vcGVyY2VwdGlvbi1saW5rcyc7XG4gIFxuICBjb25zdCBRdWVyeSA9IGRlZXAuaWRMb2NhbChkYywgJ1F1ZXJ5Jyk7XG4gIGNvbnN0IENvbnRhaW4gPSBkZWVwLmlkTG9jYWwoZGMsICdDb250YWluJyk7XG4gIGNvbnN0IEZpbmRlclF1ZXJ5ID0gZGVlcC5pZExvY2FsKGRwbCwgJ0ZpbmRlclF1ZXJ5Jyk7XG4gIGNvbnN0IFRyZWUgPSBkZWVwLmlkTG9jYWwoZHBsLCAnVHJlZScpO1xuICBjb25zdCBUcmVlTGlzdCA9IGRlZXAuaWRMb2NhbChkcGwsICdUcmVlTGlzdCcpO1xuICBjb25zdCBTZWFyY2ggPSBkZWVwLmlkTG9jYWwoZHBsLCAnU2VhcmNoJyk7XG5cbiAgcmV0dXJuICh7XG4gICAgZ28sXG5cbiAgICBpc0FjdGl2ZSxcbiAgICBzYXZlSGlzdG9yeSA9IGZhbHNlLFxuICAgIGRpc2Nsb3N1cmU6IF9fZGlzY2xvc3VyZSxcbiAgICBzdGFydFByb3BzLFxuICAgIC4uLnByb3BzXG4gIH0sIHJlZikgPT4ge1xuICAgIGNvbnN0IF9kaXNjbG9zdXJlID0gYy51c2VEaXNjbG9zdXJlKCk7XG4gICAgY29uc3QgZGlzY2xvc3VyZSA9IF9fZGlzY2xvc3VyZSB8fCBfZGlzY2xvc3VyZTtcblxuICAgIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiAoKSA9PiBkZWVwLm1pbmlsaW5rcy5hcHBseShbXSwgYGRlZXAtcGVyY2VwdGlvbi1maW5kZXItJHtnby5fX3B9YCksIFtdKTtcbiAgICBjb25zdCBbcXVlcnlJZCwgc2V0UXVlcnlJZF0gPSBSZWFjdC51c2VTdGF0ZSghc2F2ZUhpc3RvcnkgPyAndmlydHVhbCcgOiB1bmRlZmluZWQpO1xuXG4gICAgcmV0dXJuIDxnby5PblxuICAgICAgZG89e3tcbiAgICAgICAgb3BlbjogKGcsdixvKSA9PiB7XG4gICAgICAgICAgaWYgKCFvPy5pZCkgcmV0dXJuO1xuICAgICAgICAgIGRpc2Nsb3N1cmUub25DbG9zZSgpO1xuICAgICAgICAgIGdvLnJvb3QoKS5kbygnb3BlbicsIHsgaWQ6IG8/LmlkLCBmb2N1czogdHJ1ZSB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgZXhlYzogYXN5bmMgKGcsdixvKSA9PiB7XG4gICAgICAgICAgaWYgKHNhdmVIaXN0b3J5KSB7XG4gICAgICAgICAgICBjb25zdCB7IGRhdGE6IFt7IGlkIH1dIH0gPSBhd2FpdCBkZWVwLmluc2VydCh7XG4gICAgICAgICAgICAgIHR5cGVfaWQ6IFF1ZXJ5LFxuICAgICAgICAgICAgICBvYmplY3Q6IHtcbiAgICAgICAgICAgICAgICBfb3I6IFt7IGluOiB7IHR5cGVfaWQ6IENvbnRhaW4sIHN0cmluZzogeyB2YWx1ZTogeyBfaWxpa2U6IGAlVHlwZSVgIH0gfSB9IH1dLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBjb250YWluZXJJZDogZGVlcC5saW5rSWQsXG4gICAgICAgICAgICAgIGluOiB7XG4gICAgICAgICAgICAgICAgdHlwZV9pZDogRmluZGVyUXVlcnksXG4gICAgICAgICAgICAgICAgZnJvbV9pZDogZGVlcC5saW5rSWQsXG4gICAgICAgICAgICAgICAgY29udGFpbmVySWQ6IGRlZXAubGlua0lkLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhd2FpdCBkZWVwLnNlbGVjdChpZCwgeyBhcHBseTogYGRlZXAtcGVyY2VwdGlvbi1maW5kZXItJHtnby5fX3B9YCB9KTtcbiAgICAgICAgICAgIHNldFF1ZXJ5SWQoaWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBkaXNjbG9zdXJlLm9uT3BlbigpO1xuICAgICAgICAgIGdvLmZvY3VzKFRyZWUpO1xuICAgICAgICB9XG4gICAgICB9fVxuICAgID5cbiAgICAgIDxjLkJ1dHRvblxuICAgICAgICByZWY9e3JlZn0gaD0nM2VtJyB3PSczZW0nIHZhcmlhbnQ9e2lzQWN0aXZlID8gJ2FjdGl2ZScgOiBudWxsfVxuICAgICAgICBvbkNsaWNrPXsoKSA9PiBnby5kbygnZXhlYycpfVxuICAgICAgICB7Li4ucHJvcHN9XG4gICAgICA+8J+qrDwvYy5CdXR0b24+XG4gICAgICB7ISFxdWVyeUlkICYmIGRpc2Nsb3N1cmUuaXNPcGVuICYmIDxnby5Db21wb25lbnQgcGF0aD17W2RwbCwgJ0ZpbmRlciddfVxuICAgICAgICBkaXNjbG9zdXJlPXtkaXNjbG9zdXJlfSBpbml0aWFsSWQ9e3F1ZXJ5SWR9IGluaXRpYWxIYW5kbGVySWQ9e1RyZWVMaXN0fVxuICAgICAgICBvblN1Ym1pdD17KGlkKSA9PiBnby5kbygnb3BlbicsIHsgaWQgfSl9XG4gICAgICAgIHN0YXJ0UHJvcHM9e3N0YXJ0UHJvcHN9XG4gICAgICAvPn1cbiAgICA8L2dvLk9uPjtcbiAgfTtcbn0iXX0=",
          "link_id": 14099
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 16008,
      "src_id": 5813,
      "handler_id": 5823,
      "execution_provider_id": 33,
      "isolation_provider_id": 144,
      "dist": {
        "id": 16008,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 1579,
          "value": "async ({ deep, data, Go, require }) => {\n    const React = require('react');\n    const c = require('@chakra-ui/react');\n    const dpl = '@deep-foundation/perception-links';\n    const GraphLinkPlanet = await deep.id(dpl, 'GraphLinkPlanet');\n    return ({ go, isActive, position, locked = false, children, }, ref) => {\n        const { cy } = go.useGraph();\n        const $inouts = cy.$(`.link-type[target=\"${go.linkId}\"],.link-from[target=\"${go.linkId}\"],.link-to[target=\"${go.linkId}\"]`);\n        const inouts = $inouts.map((e) => {\n            return { id: e.id(), linkId: e.data().linkId };\n        });\n        const nav = go.useNav();\n        nav('current', go?.link?.from_id ? 'from_id' : 'current', 'type_id', go?.link?.to_id ? 'to_id' : 'current', inouts?.length ? 'inout' : 'current');\n        nav('from_id', 'from', 'from_id', 'current', 'from_id');\n        nav('to_id', 'current', 'to_id', 'to', 'to_id');\n        nav('type_id', 'type_id', 'type', 'type_id', 'current');\n        const [inoutId, setInoutId] = React.useState();\n        nav('inout', 'inout', 'current', 'inout', 'inouted');\n        React.useEffect(() => {\n            $inouts.removeClass('link-edge-active');\n            if (go.value === 'inout' && inoutId)\n                cy.$id(inoutId).addClass('link-edge-active');\n        }, [go.value, inoutId]);\n        React.useEffect(() => {\n            if (!isActive)\n                go.set('current');\n        }, [isActive]);\n        return React.createElement(go.On, { do: {\n                exec: (g, v, o) => {\n                    if (!go.value || go.value === 'current')\n                        go.focus(GraphLinkPlanet);\n                    if (go.value === GraphLinkPlanet)\n                        go.focus('current');\n                },\n                focus: (g, v, o) => { },\n                use: (g, v, o) => { },\n                position: (g, v, o) => { },\n                scroll: (g, v, o) => {\n                    console.log(ref);\n                    cy.center(ref.current);\n                },\n                ...(go.value === 'inout') ? {\n                    left: (g, v, o) => {\n                        if (o?.hotkeyEvent?.meta || o?.hotkeyEvent?.shift || o?.hotkeyEvent?.ctrl || o?.hotkeyEvent?.alt) {\n                            setInoutId(inouts?.[0]);\n                        }\n                        else\n                            setInoutId(go.prev(inouts, inoutId));\n                    },\n                    right: (g, v, o) => {\n                        if (o?.hotkeyEvent?.meta || o?.hotkeyEvent?.shift || o?.hotkeyEvent?.ctrl || o?.hotkeyEvent?.alt) {\n                            setInoutId(inouts?.[inouts.length - 1]?.id);\n                        }\n                        else\n                            setInoutId(go.next(inouts, inoutId));\n                    },\n                } : {\n                    left: (g, v, o) => {\n                        go.focus(nav.get(go.value || 'current', 'left'), { prev: go.value });\n                    },\n                    right: (g, v, o) => {\n                        go.focus(nav.get(go.value || 'current', 'right'), { prev: go.value });\n                    },\n                },\n                up: (g, v, o) => go.focus(nav.get(go.value || 'current', 'up'), { prev: go.value }),\n                down: (g, v, o) => go.focus(nav.get(go.value || 'current', 'down'), { prev: go.value }),\n            }, focus: {\n                type: (g, v, o) => go.set().go.go.do('open', { id: go.link.type_id, focus: true }),\n                from: (g, v, o) => go.set().go.go.do('open', { id: go.link.from_id, focus: true }),\n                to: (g, v, o) => go.set().go.go.do('open', { id: go.link.to_id, focus: true }),\n                inout: (g, v, o) => setInoutId(inouts?.[0]?.id),\n                inouted: (g, v, o) => {\n                    setInoutId();\n                    go.set().go.go.focus(cy.$id(inoutId)?.data()?.linkId);\n                }\n            } },\n            React.createElement(go.GraphNode, { element: {\n                    data: { id: `${go.link.id}-children` },\n                    classes: ['link-children'],\n                } },\n                React.createElement(go.GraphNode, { ref: ref, element: {\n                        data: { id: go.link.id, label: `${go.linkId}: ${go.link.name !== go.linkId ? go.link.name : ''}\n  (${go.link.type_id}: ${go.link.type?.name !== go.link.type_id ? go.link.type?.name : ''})\n  \n  ${go.link.symbol}` },\n                        classes: ['link-node', ...(isActive ? ['link-node-active'] : [])],\n                    }, onClick: (e) => {\n                        go.go.focus(go.linkId);\n                        go.do('exec');\n                    } },\n                    React.createElement(c.Box, { w: '0', h: '0', position: 'relative', ref: go.ref },\n                        React.createElement(go.Provider, { linkId: GraphLinkPlanet },\n                            React.createElement(go.Component, { path: [dpl, 'GraphLinkPlanet'], linkId: go.linkId, isActive: isActive && go.value === GraphLinkPlanet })))),\n                !!go.link.type_id && React.createElement(go.GraphEdge, { element: {\n                        data: { id: `${go.link.id}-type`, source: `${go.link.id}`, target: `${go.link.type_id}` },\n                        classes: ['link-edge', 'link-type', ...(go.value === 'type_id' ? ['link-edge-active'] : [])],\n                    } }),\n                !!go.link.from_id && React.createElement(go.GraphEdge, { element: {\n                        data: { id: `${go.link.id}-from`, source: `${go.link.id}`, target: `${go.link.from_id}` },\n                        classes: ['link-edge', 'link-from', ...(go.value === 'from_id' ? ['link-edge-active'] : [])],\n                    } }),\n                !!go.link.to_id && React.createElement(go.GraphEdge, { element: {\n                        data: { id: `${go.link.id}-to`, source: `${go.link.id}`, target: `${go.link.to_id}` },\n                        classes: ['link-edge', 'link-to', ...(go.value === 'to_id' ? ['link-edge-active'] : [])],\n                    } }),\n                children));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFO0lBQ3BDLE1BQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUMvQixNQUFNLENBQUMsR0FBRyxPQUFPLENBQUMsa0JBQWtCLENBQUMsQ0FBQztJQUV0QyxNQUFNLEdBQUcsR0FBRyxtQ0FBbUMsQ0FBQztJQUVoRCxNQUFNLGVBQWUsR0FBRyxNQUFNLElBQUksQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLGlCQUFpQixDQUFDLENBQUM7SUFFOUQsT0FBTyxDQUFDLEVBQ04sRUFBRSxFQUVGLFFBQVEsRUFFUixRQUFRLEVBQ1IsTUFBTSxHQUFHLEtBQUssRUFFZCxRQUFRLEdBQ1QsRUFBRSxHQUFHLEVBQUUsRUFBRTtRQUNSLE1BQU0sRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLENBQUMsUUFBUSxFQUFFLENBQUM7UUFFN0IsTUFBTSxPQUFPLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxzQkFBc0IsRUFBRSxDQUFDLE1BQU0seUJBQXlCLEVBQUUsQ0FBQyxNQUFNLHVCQUF1QixFQUFFLENBQUMsTUFBTSxJQUFJLENBQUMsQ0FBQztRQUM1SCxNQUFNLE1BQU0sR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUU7WUFDL0IsT0FBTyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQztRQUNqRCxDQUFDLENBQUMsQ0FBQztRQUVILE1BQU0sR0FBRyxHQUFHLEVBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQztRQUN4QixHQUFHLENBQUMsU0FBUyxFQUFFLEVB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QUMsRUFBRSxDQUFDLEtBQUssSUFBSSxTQUFTLEVBQUUsT0FBTyxDQUFDLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRSxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUE7b0JBQ3ZFLENBQUM7aUJBQ0Y7Z0JBQ0QsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsS0FBSyxJQUFJLFNBQVMsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFLENBQUMsS0FBSyxFQUFFLENBQUM7Z0JBQ2pGLElBQUksRUFBRSxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEtBQUssSUFBSSxTQUFTLEVBQUUsTUFBTSxDQUFDLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRSxDQUFDLEtBQUssRUFBRSxDQUFDO2FBQ3RGLEVBQUUsS0FBSyxFQUFFO2dCQUNSLElBQUksRUFBRSxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsQ0FBQztnQkFDaEYsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxDQUFDO2dC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SSxDQUFDLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUFFLEVBQUUsTUFBTSxFQUFFLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsRUFBRTt3QkFDckYsT0FBTyxFQUFFLENBQUMsV0FBVyxFQUFFLFNBQVMsRUFBRSxHQUFHLENBQUMsRUFBRSxDQUFDLEtBQUssS0FBSyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7cUJBQ3pGLEdBQUc7Z0JBQ0wsUUFBUSxDQUNJLENBQ1QsQ0FBQztJQUNYLENBQUMsQ0FBQztBQUNKLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImFzeW5jICh7IGRlZXAsIGRhdGEsIEdvLCByZXF1aXJlIH0pID0+IHtcbiAgY29uc3QgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuICBjb25zdCBjID0gcmVxdWlyZSgnQGNoYWtyYS11aS9yZWFjdCcpO1xuXG4gIGNvbnN0IGRwbCA9ICdAZGVlcC1mb3VuZGF0aW9uL3BlcmNlcHRpb24tbGlua3MnO1xuXG4gIGNvbnN0IEdyYXBoTGlua1BsYW5ldCA9IGF3YWl0IGRlZXAuaWQoZHBsLCAnR3JhcGhMaW5rUGxhbmV0Jyk7XG5cbiAgcmV0dXJuICh7XG4gICAgZ28sXG5cbiAgICBpc0FjdGl2ZSxcblxuICAgIHBvc2l0aW9uLFxuICAgIGxvY2tlZCA9IGZhbHNlLFxuXG4gICAgY2hpbGRyZW4sXG4gIH0sIHJlZikgPT4ge1xuICAgIGNvbnN0IHsgY3kgfSA9IGdvLnVzZUdyYXBoKCk7XG5cbiAgICBjb25zdCAkaW5vdXRzID0gY3kuJChgLmxpbmstdHlwZVt0YXJnZXQ9XCIke2dvLmxpbmtJZH1cIl0sLmxpbmstZnJvbVt0YXJnZXQ9XCIke2dvLmxpbmtJZH1cIl0sLmxpbmstdG9bdGFyZ2V0PVwiJHtnby5saW5rSWR9XCJdYCk7XG4gICAgY29uc3QgaW5vdXRzID0gJGlub3V0cy5tYXAoKGUpID0+IHtcbiAgICAgIHJldHVybiB7IGlkOiBlLmlkKCksIGxpbmtJZDogZS5kYXRhKCkubGlua0lkIH07XG4gICAgfSk7XG5cbiAgICBjb25zdCBuYXYgPSBnby51c2VOYXYoKTtcbiAgICBuYXYoJ2N1cnJlbnQnLCBnbz8ubGluaz8uZnJvbV9pZCA/ICdmcm9tX2lkJyA6ICdjdXJyZW50JywgJ3R5cGVfaWQnLCBnbz8ubGluaz8udG9faWQgPyAndG9faWQnIDogJ2N1cnJlbnQnLCBpbm91dHM/Lmxlbmd0aCA/ICdpbm91dCcgOiAnY3VycmVudCcpO1xuICAgIG5hdignZnJvbV9pZCcsICdmcm9tJywgJ2Zyb21faWQnLCAnY3VycmVudCcsICdmcm9tX2lkJyk7XG4gICAgbmF2KCd0b19pZCcsICdjdXJyZW50JywgJ3RvX2lkJywgJ3RvJywgJ3RvX2lkJyk7XG4gICAgbmF2KCd0eXBlX2lkJywgJ3R5cGVfaWQnLCAndHlwZScsICd0eXBlX2lkJywgJ2N1cnJlbnQnKTtcblxuICAgIGNvbnN0IFtpbm91dElkLCBzZXRJbm91dElkXSA9IFJlYWN0LnVzZVN0YXRlKCk7XG4gICAgbmF2KCdpbm91dCcsICdpbm91dCcsICdjdXJyZW50JywgJ2lub3V0JywgJ2lub3V0ZWQnKTtcbiAgICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgJGlub3V0cy5yZW1vdmVDbGFzcygnbGluay1lZGdlLWFjdGl2ZScpO1xuICAgICAgaWYgKGdvLnZhbHVlID09PSAnaW5vdXQnICYmIGlub3V0SWQpIGN5LiRpZChpbm91dElkKS5hZGRDbGFzcygnbGluay1lZGdlLWFjdGl2ZScpO1xuICAgIH0sIFtnby52YWx1ZSwgaW5vdXRJZF0pO1xuICAgIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICBpZiAoIWlzQWN0aXZlKSBnby5zZXQoJ2N1cnJlbnQnKTtcbiAgICB9LCBbaXNBY3RpdmVdKTtcblxuICAgIHJldHVybiA8Z28uT24gZG89e3tcbiAgICAgIGV4ZWM6IChnLHYsbykgPT4ge1xuICAgICAgICBpZiAoIWdvLnZhbHVlIHx8IGdvLnZhbHVlID09PSAnY3VycmVudCcpIGdvLmZvY3VzKEdyYXBoTGlua1BsYW5ldCk7XG4gICAgICAgIGlmIChnby52YWx1ZSA9PT0gR3JhcGhMaW5rUGxhbmV0KSBnby5mb2N1cygnY3VycmVudCcpO1xuICAgICAgfSxcbiAgICAgIGZvY3VzOiAoZyx2LG8pID0+IHt9LFxuICAgICAgdXNlOiAoZyx2LG8pID0+IHt9LFxuICAgICAgcG9zaXRpb246IChnLHYsbykgPT4ge30sXG4gICAgICBzY3JvbGw6IChnLHYsbykgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhyZWYpO1xuICAgICAgICBjeS5jZW50ZXIocmVmLmN1cnJlbnQpO1xuICAgICAgfSxcbiAgICAgIC4uLihnby52YWx1ZSA9PT0gJ2lub3V0JykgPyB7XG4gICAgICAgIGxlZnQ6IChnLHYsbykgPT4ge1xuICAgICAgICAgIGlmIChvPy5ob3RrZXlFdmVudD8ubWV0YSB8fCBvPy5ob3RrZXlFdmVudD8uc2hpZnQgfHwgbz8uaG90a2V5RXZlbnQ/LmN0cmwgfHwgbz8uaG90a2V5RXZlbnQ/LmFsdCkge1xuICAgICAgICAgICAgc2V0SW5vdXRJZChpbm91dHM/LlswXSk7XG4gICAgICAgICAgfSBlbHNlIHNldElub3V0SWQoZ28ucHJldihpbm91dHMsIGlub3V0SWQpKTtcbiAgICAgICAgfSxcbiAgICAgICAgcmlnaHQ6IChnLHYsbykgPT4ge1xuICAgICAgICAgIGlmIChvPy5ob3RrZXlFdmVudD8ubWV0YSB8fCBvPy5ob3RrZXlFdmVudD8uc2hpZnQgfHwgbz8uaG90a2V5RXZlbnQ/LmN0cmwgfHwgbz8uaG90a2V5RXZlbnQ/LmFsdCkge1xuICAgICAgICAgICAgc2V0SW5vdXRJZChpbm91dHM/Lltpbm91dHMubGVuZ3RoIC0gMV0/LmlkKTtcbiAgICAgICAgICB9IGVsc2Ugc2V0SW5vdXRJZChnby5uZXh0KGlub3V0cywgaW5vdXRJZCkpO1xuICAgICAgICB9LFxuICAgICAgfSA6IHtcbiAgICAgICAgbGVmdDogKGcsdixvKSA9PiB7XG4gICAgICAgICAgZ28uZm9jdXMobmF2LmdldChnby52YWx1ZSB8fCAnY3VycmVudCcsICdsZWZ0JyksIHsgcHJldjogZ28udmFsdWUgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIHJpZ2h0OiAoZyx2LG8pID0+IHtcbiAgICAgICAgICBnby5mb2N1cyhuYXYuZ2V0KGdvLnZhbHVlIHx8ICdjdXJyZW50JywgJ3JpZ2h0JyksIHsgcHJldjogZ28udmFsdWUgfSlcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICB1cDogKGcsdixvKSA9PiBnby5mb2N1cyhuYXYuZ2V0KGdvLnZhbHVlIHx8ICdjdXJyZW50JywgJ3VwJyksIHsgcHJldjogZ28udmFsdWUgfSksXG4gICAgICBkb3duOiAoZyx2LG8pID0+IGdvLmZvY3VzKG5hdi5nZXQoZ28udmFsdWUgfHwgJ2N1cnJlbnQnLCAnZG93bicpLCB7IHByZXY6IGdvLnZhbHVlIH0pLFxuICAgIH19IGZvY3VzPXt7XG4gICAgICB0eXBlOiAoZyx2LG8pID0+IGdvLnNldCgpLmdvLmdvLmRvKCdvcGVuJywgeyBpZDogZ28ubGluay50eXBlX2lkLCBmb2N1czogdHJ1ZSB9KSxcbiAgICAgIGZyb206IChnLHYsbykgPT4gZ28uc2V0KCkuZ28uZ28uZG8oJ29wZW4nLCB7IGlkOiBnby5saW5rLmZyb21faWQsIGZvY3VzOiB0cnVlIH0pLFxuICAgICAgdG86IChnLHYsbykgPT4gZ28uc2V0KCkuZ28uZ28uZG8oJ29wZW4nLCB7IGlkOiBnby5saW5rLnRvX2lkLCBmb2N1czogdHJ1ZSB9KSxcbiAgICAgIGlub3V0OiAoZyx2LG8pID0+IHNldElub3V0SWQoaW5vdXRzPy5bMF0/LmlkKSxcbiAgICAgIGlub3V0ZWQ6IChnLHYsbykgPT4ge1xuICAgICAgICBzZXRJbm91dElkKCk7XG4gICAgICAgIGdvLnNldCgpLmdvLmdvLmZvY3VzKGN5LiRpZChpbm91dElkKT8uZGF0YSgpPy5saW5rSWQpO1xuICAgICAgfVxuICAgIH19PlxuICAgICAgPGdvLkdyYXBoTm9kZSBlbGVtZW50PXt7XG4gICAgICAgIGRhdGE6IHsgaWQ6IGAke2dvLmxpbmsuaWR9LWNoaWxkcmVuYCB9LFxuICAgICAgICBjbGFzc2VzOiBbJ2xpbmstY2hpbGRyZW4nXSxcbiAgICAgIH19PlxuICAgICAgICA8Z28uR3JhcGhOb2RlXG4gICAgICAgICAgcmVmPXtyZWZ9XG4gICAgICAgICAgZWxlbWVudD17e1xuICAgICAgICAgICAgZGF0YTogeyBpZDogZ28ubGluay5pZCwgbGFiZWw6IGAke2dvLmxpbmtJZH06ICR7Z28ubGluay5uYW1lICE9PSBnby5saW5rSWQgPyBnby5saW5rLm5hbWUgOiAnJ31cbiAgKCR7Z28ubGluay50eXBlX2lkfTogJHtnby5saW5rLnR5cGU/Lm5hbWUgIT09IGdvLmxpbmsudHlwZV9pZCA/IGdvLmxpbmsudHlwZT8ubmFtZSA6ICcnfSlcbiAgXG4gICR7Z28ubGluay5zeW1ib2x9YCB9LFxuICAgICAgICAgICAgY2xhc3NlczogWydsaW5rLW5vZGUnLCAuLi4oaXNBY3RpdmUgPyBbJ2xpbmstbm9kZS1hY3RpdmUnXSA6IFtdKV0sXG4gICAgICAgICAgfX1cbiAgICAgICAgICBvbkNsaWNrPXsoZSkgPT4ge1xuICAgICAgICAgICAgZ28uZ28uZm9jdXMoZ28ubGlua0lkKTtcbiAgICAgICAgICAgIGdvLmRvKCdleGVjJyk7XG4gICAgICAgICAgfX1cbiAgICAgICAgPlxuICAgICAgICAgIDxjLkJveCB3PScwJyBoPScwJyBwb3NpdGlvbj0ncmVsYXRpdmUnIHJlZj17Z28ucmVmfT5cbiAgICAgICAgICAgIDxnby5Qcm92aWRlciBsaW5rSWQ9e0dyYXBoTGlua1BsYW5ldH0+XG4gICAgICAgICAgICAgIDxnby5Db21wb25lbnQgcGF0aD17W2RwbCwgJ0dyYXBoTGlua1BsYW5ldCddfSBsaW5rSWQ9e2dvLmxpbmtJZH0gaXNBY3RpdmU9e2lzQWN0aXZlICYmIGdvLnZhbHVlID09PSBHcmFwaExpbmtQbGFuZXR9Lz5cbiAgICAgICAgICAgIDwvZ28uUHJvdmlkZXI+XG4gICAgICAgICAgPC9jLkJveD5cbiAgICAgICAgPC9nby5HcmFwaE5vZGU+XG4gICAgICAgIHshIWdvLmxpbmsudHlwZV9pZCAmJiA8Z28uR3JhcGhFZGdlXG4gICAgICAgICAgZWxlbWVudD17e1xuICAgICAgICAgICAgZGF0YTogeyBpZDogYCR7Z28ubGluay5pZH0tdHlwZWAsIHNvdXJjZTogYCR7Z28ubGluay5pZH1gLCB0YXJnZXQ6IGAke2dvLmxpbmsudHlwZV9pZH1gIH0sXG4gICAgICAgICAgICBjbGFzc2VzOiBbJ2xpbmstZWRnZScsICdsaW5rLXR5cGUnLCAuLi4oZ28udmFsdWUgPT09ICd0eXBlX2lkJyA/IFsnbGluay1lZGdlLWFjdGl2ZSddIDogW10pXSxcbiAgICAgICAgICB9fS8+fVxuICAgICAgICB7ISFnby5saW5rLmZyb21faWQgJiYgPGdvLkdyYXBoRWRnZVxuICAgICAgICAgIGVsZW1lbnQ9e3tcbiAgICAgICAgICAgIGRhdGE6IHsgaWQ6IGAke2dvLmxpbmsuaWR9LWZyb21gLCBzb3VyY2U6IGAke2dvLmxpbmsuaWR9YCwgdGFyZ2V0OiBgJHtnby5saW5rLmZyb21faWR9YCB9LFxuICAgICAgICAgICAgY2xhc3NlczogWydsaW5rLWVkZ2UnLCAnbGluay1mcm9tJywgLi4uKGdvLnZhbHVlID09PSAnZnJvbV9pZCcgPyBbJ2xpbmstZWRnZS1hY3RpdmUnXSA6IFtdKV0sXG4gICAgICAgICAgfX0vPn1cbiAgICAgICAgeyEhZ28ubGluay50b19pZCAmJiA8Z28uR3JhcGhFZGdlXG4gICAgICAgICAgZWxlbWVudD17e1xuICAgICAgICAgICAgZGF0YTogeyBpZDogYCR7Z28ubGluay5pZH0tdG9gLCBzb3VyY2U6IGAke2dvLmxpbmsuaWR9YCwgdGFyZ2V0OiBgJHtnby5saW5rLnRvX2lkfWAgfSxcbiAgICAgICAgICAgIGNsYXNzZXM6IFsnbGluay1lZGdlJywgJ2xpbmstdG8nLCAuLi4oZ28udmFsdWUgPT09ICd0b19pZCcgPyBbJ2xpbmstZWRnZS1hY3RpdmUnXSA6IFtdKV0sXG4gICAgICAgICAgfX0vPn1cbiAgICAgICAge2NoaWxkcmVufVxuICAgICAgPC9nby5HcmFwaE5vZGU+XG4gICAgPC9nby5Pbj47XG4gIH07XG59Il19",
          "link_id": 16008
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 16360,
      "src_id": 16347,
      "handler_id": 16351,
      "execution_provider_id": 33,
      "isolation_provider_id": 144,
      "dist": {
        "id": 16360,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 1606,
          "value": "({ deep, data, require, Go }) => {\n    const React = require('react');\n    const { BsX, BsCheck2, BsXLg, BsDatabase, BsRegex } = require('react-icons/bs');\n    const { TypedIcon, DownIcon, UpIcon, TypeIcon, InIcon, OutIcon, FromIcon, ToIcon, } = require('@deep-foundation/perception-app');\n    const { useAsyncMemo } = require('use-async-memo');\n    const c = require('@chakra-ui/react');\n    const dc = '@deep-foundation/core';\n    const dpl = '@deep-foundation/perception-links';\n    const V = deep.idLocal(dc, 'Value');\n    const S = deep.idLocal(dc, 'String');\n    const N = deep.idLocal(dc, 'Number');\n    const O = deep.idLocal(dc, 'Object');\n    return ({ go, defaultContainerId, defaultTypeId, defaultFromId, defaultToId, disclosure, }, ref) => {\n        if (!disclosure)\n            throw new Error('!disclosure');\n        const [typeId, setTypeId] = React.useState(defaultTypeId);\n        const [fromId, setFromId] = React.useState(defaultFromId);\n        const [toId, setToId] = React.useState(defaultToId);\n        const type = React.useMemo(() => typeId ? deep.get(+typeId) : null, [typeId]);\n        const from = React.useMemo(() => fromId ? deep.get(+fromId) : null, [fromId]);\n        const to = React.useMemo(() => toId ? deep.get(+toId) : null, [toId]);\n        const [value, setValue] = React.useState();\n        const [name, setName] = React.useState('');\n        const [containerId, setContainerId] = React.useState(defaultContainerId);\n        const tV = useAsyncMemo(async () => {\n            return typeId ? (await deep.select({ type_id: V, from_id: +typeId }))?.data?.[0]?.to_id : undefined;\n        }, [type]);\n        const { isValid, validated } = React.useMemo(() => {\n            try {\n                if (tV === S)\n                    return { validated: value, isValid: true };\n                if (tV === N)\n                    return { validated: +value, isValud: typeof (validated) === 'number' && !Number.isNaN(validated) };\n                if (tV === O)\n                    return { validated: JSON.parse(value), isValid: true };\n                if (!tV)\n                    return { validated: value, isValid: true };\n            }\n            catch (e) { }\n            return { validated: value, isValid: false };\n        }, [value, tV]);\n        const AllowAdmin = useAsyncMemo(async () => {\n            return await deep.can(deep.linkId, deep.linkId, deep.idLocal('@deep-foundation/core', 'AllowAdmin'));\n        }, [], false);\n        const AllowInsertType = useAsyncMemo(async () => {\n            return !typeId ? false : await deep.can(+typeId, deep.linkId, deep.idLocal('@deep-foundation/core', 'AllowInsertType'));\n        }, [typeId], false);\n        const can = AllowInsertType || AllowAdmin;\n        const insertQuery = type ? {\n            type_id: type.id,\n            ...(fromId && toId ? { from_id: +fromId, to_id: +toId } : {}),\n            containerId,\n            ...(name ? { name } : {}),\n            ...(tV == S ? { string: { data: { value: validated } } } : tV == N ? { number: { data: { value: validated } } } : tV == O ? { object: { data: { value: validated } } } : {}),\n        } : {};\n        const valueType = React.useMemo(() => type?.outByType[V]?.[0]?.to_id, [type]);\n        const buttons = React.createElement(React.Fragment, null,\n            React.createElement(c.SlideFade, { in: true, offsetX: '-0.5rem', style: { position: 'absolute', top: 0, right: '-4em' } },\n                React.createElement(c.Button, { w: '3em', h: '3em', boxShadow: 'dark-lg', variant: undefined, onClick: disclosure.onClose },\n                    React.createElement(BsX, null))),\n            React.createElement(c.SlideFade, { in: ((!!fromId && !!toId) || type?.id === 1 || (!type?.from_id && !type?.to_id)) && (isValid || value === ''), offsetX: '-0.5rem', style: { position: 'absolute', bottom: 0, right: '-4em' } },\n                React.createElement(c.Button, { w: '3em', h: '3em', boxShadow: 'dark-lg', variant: 'active', onClick: async () => {\n                        await deep.insert(insertQuery);\n                        disclosure.onClose();\n                    } },\n                    React.createElement(BsCheck2, null))));\n        const alert = React.createElement(React.Fragment, null,\n            React.createElement(c.Alert, { status: can ? 'info' : 'error' },\n                React.createElement(c.AlertIcon, null),\n                React.createElement(c.AlertTitle, null,\n                    \"You \",\n                    can ? 'can' : 'can`t',\n                    \" do it.\")),\n            React.createElement(go.Editor, { value: `await deep.can(deep.linkId, deep.linkId, deep.idLocal('@deep-foundation/core', 'AllowAdmin'))\n// ${AllowAdmin}${!!typeId ? `\nawait deep.can(${typeId}, deep.linkId, deep.idLocal('@deep-foundation/core', 'AllowInsertType'))\n// ${AllowInsertType}` : ''}`, editable: false, readOnly: true }));\n        return React.createElement(go.On, { do: {} },\n            React.createElement(c.Modal, { ref: ref, closeOnOverlayClick: true, blockScrollOnMount: false, onClose: disclosure.onClose, isOpen: disclosure.isOpen, portalProps: { containerRef: go.root().ref } },\n                React.createElement(c.ModalOverlay, null),\n                React.createElement(c.ModalContent, { w: '30em', maxW: '30em', position: 'relative' },\n                    React.createElement(c.ModalHeader, null, \"Link inserting:\"),\n                    React.createElement(c.ModalBody, { p: 0, w: '100%', h: '100%' },\n                        !can && alert,\n                        React.createElement(go.Component, { path: [dpl, 'FinderInput'], leftIcon: React.createElement(TypeIcon, null), value: typeId, onChange: id => setTypeId(id) }),\n                        React.createElement(c.SimpleGrid, { columns: 2 },\n                            React.createElement(go.Component, { path: [dpl, 'FinderInput'], leftIcon: React.createElement(FromIcon, null), value: fromId, onChange: id => setFromId(id) }),\n                            React.createElement(go.Component, { path: [dpl, 'FinderInput'], leftIcon: React.createElement(ToIcon, null), value: toId, onChange: id => setToId(id) })),\n                        React.createElement(c.SimpleGrid, { columns: 2 },\n                            React.createElement(go.Component, { path: [dpl, 'FinderInput'], leftIcon: React.createElement(React.Fragment, null, \"\\uD83D\\uDDC2\\uFE0F\"), value: containerId, onChange: id => setContainId(id) }),\n                            React.createElement(c.Input, { placeholder: 'name', h: '3em', value: name, onChange: e => setName(e.target.value) })),\n                        !!type && React.createElement(c.Box, null,\n                            !valueType && React.createElement(React.Fragment, null,\n                                React.createElement(c.Alert, { status: 'info' },\n                                    React.createElement(c.AlertIcon, null),\n                                    React.createElement(c.AlertTitle, null,\n                                        \"type \",\n                                        +type,\n                                        \" can't have Value\"))),\n                            valueType === S && React.createElement(React.Fragment, null,\n                                React.createElement(go.Editor, { placeholder: 'String value', value: value, onChange: setValue })),\n                            valueType === N && React.createElement(React.Fragment, null,\n                                React.createElement(c.Input, { type: 'string', value: value, placeholder: 'Number value', onChange: e => setValue(e.target.value) })),\n                            valueType === O && React.createElement(React.Fragment, null,\n                                React.createElement(go.Editor, { placeholder: 'Object value', value: value, onChange: setValue })),\n                            (tV === S || tV === N || tV === O) && React.createElement(c.Tag, { size: 'lg', colorScheme: value === '' ? 'black' : isValid ? 'deepActive' : 'danger', variant: 'solid', borderRadius: 'full', position: 'absolute', bottom: '-0.5em', right: '-0.5em' }, value === '' ? 'empty' : isValid ? 'valid' : 'invalid')),\n                        React.createElement(c.Divider, { mt: '1em', mb: '1em' }),\n                        React.createElement(go.Editor, { value: `await deep.insert(${JSON.stringify(insertQuery, null, 2)})`, editable: false, readOnly: true }),\n                        !!can && alert),\n                    buttons)));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxDQUFDLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRTtJQUM5QixNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDL0IsTUFBTSxFQUFFLEdBQUcsRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUFFLFVBQVUsRUFBRSxPQUFPLEVBQUUsR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztJQUVoRixNQUFNLEVBQ0osU0FBUyxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBRSxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sR0FDekUsR0FBRyxPQUFPLENBQUMsaUNBQWlDLENBQUMsQ0FBQztJQUUvQyxNQUFNLEVBQUUsWUFBWSxFQUFFLEdBQUcsT0FBTyxDQUFDLGdCQUFnQixDQUFDLENBQUM7SUFFbkQsTUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLGtCQUFrQixDQUFDLENBQUM7SUFFdEMsTUFBTSxFQUFFLEdBQUcsdUJBQXVCLENBQUM7SUFDbkMsTUFBTSxHQUFHLEdBQUcsbUNBQW1DLENBQUM7SUFFaEQsTUFBTSxDQUFDLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDcEMsTUFBTSxDQUFDLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsUUFBUSxDQUFDLENBQUM7SUFDckMsTUFBTSxDQUFDLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsUUFBUSxDQUFDLENBQUM7SUFDckMsTUFBTSxDQUFDLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsUUFBUSxDQUFDLENBQUM7SUFFckMsT0FBTyxDQUFDLEVBQ04sRUFBRSxFQUVG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RSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7WUFDN0QsV0FBVztZQUNYLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztZQUN6QixHQUFHLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxNQUFNLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLE1BQU0sRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsRUFBRSxFQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsTUFBTSxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO1NBQzVLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztRQUVQLE1BQU0sU0FBUyxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLENBQUMsSUFBSSxFQUFFLFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7UUFFOUUsTUFBTSxPQUFPLEdBQUc7WUFDZCxvQkFBQyxDQUFDLENBQUMsU0FBUyxJQUFDLEVBQUUsRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFDLFNBQVMsRUFBQyxLQUFLLEVBQUUsRUFBQyxRQUFRLEVBQUUsVUFBVSxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBQztnQkFDM0Ysb0JBQUMsQ0FBQyxDQUFDLE1BQU0sSUFDUCxDQUFDLEVBQUMsS0FBSyxFQUFDLENBQUMsRUFBQyxLQUFLLEVBQ2Ys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UUFBUSxFQUFDLEtBQUssRUFBQyxRQUFRLElBQ2xELEtBQUssS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBUyxDQUMzRDt3QkFDUixvQkFBQyxDQUFDLENBQUMsT0FBTyxJQUFDLEVBQUUsRUFBQyxLQUFLLEVBQUMsRUFBRSxFQUFDLEtBQUssR0FBRTt3QkFDOUIsb0JBQUMsRUFBRSxDQUFDLE1BQU0sSUFDUixLQUFLLEVBQUUscUJBQXFCLElBQUksQ0FBQyxTQUFTLENBQUMsV0FBVyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsR0FBRyxFQUNuRSxRQUFRLEVBQUUsS0FBSyxFQUFFLFFBQVEsU0FDekI7d0JBQ0QsQ0FBQyxDQUFDLEdBQUcsSUFBSSxLQUFLLENBQ0g7b0JBQ2IsT0FBTyxDQUNPLENBQ1QsQ0FDSixDQUFDO0lBQ1gsQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiKHsgZGVlcCwgZGF0YSwgcmVxdWlyZSwgR28gfSkgPT4ge1xuICBjb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG4gIGNvbnN0IHsgQnNYLCBCc0NoZWNrMiwgQnNYTGcsIEJzRGF0YWJhc2UsIEJzUmVnZXggfSA9IHJlcXVpcmUoJ3JlYWN0LWljb25zL2JzJyk7XG5cbiAgY29uc3Qge1xuICAgIFR5cGVkSWNvbiwgRG93bkljb24sIFVwSWNvbiwgVHlwZUljb24sIEluSWNvbiwgT3V0SWNvbiwgRnJvbUljb24sIFRvSWNvbixcbiAgfSA9IHJlcXVpcmUoJ0BkZWVwLWZvdW5kYXRpb24vcGVyY2VwdGlvbi1hcHAnKTtcblxuICBjb25zdCB7IHVzZUFzeW5jTWVtbyB9ID0gcmVxdWlyZSgndXNlLWFzeW5jLW1lbW8nKTtcbiAgXG4gIGNvbnN0IGMgPSByZXF1aXJlKCdAY2hha3JhLXVpL3JlYWN0Jyk7XG5cbiAgY29uc3QgZGMgPSAnQGRlZXAtZm91bmRhdGlvbi9jb3JlJztcbiAgY29uc3QgZHBsID0gJ0BkZWVwLWZvdW5kYXRpb24vcGVyY2VwdGlvbi1saW5rcyc7XG5cbiAgY29uc3QgViA9IGRlZXAuaWRMb2NhbChkYywgJ1ZhbHVlJyk7XG4gIGNvbnN0IFMgPSBkZWVwLmlkTG9jYWwoZGMsICdTdHJpbmcnKTtcbiAgY29uc3QgTiA9IGRlZXAuaWRMb2NhbChkYywgJ051bWJlcicpO1xuICBjb25zdCBPID0gZGVlcC5pZExvY2FsKGRjLCAnT2JqZWN0Jyk7XG5cbiAgcmV0dXJuICh7XG4gICAgZ28sXG5cbiAgICBkZWZhdWx0Q29udGFpbmVySWQsXG4gICAgZGVmYXVsdFR5cGVJZCxcbiAgICBkZWZhdWx0RnJvbUlkLFxuICAgIGRlZmF1bHRUb0lkLFxuXG4gICAgZGlzY2xvc3VyZSxcbiAgfSwgcmVmKSA9PiB7XG4gICAgaWYgKCFkaXNjbG9zdXJlKSB0aHJvdyBuZXcgRXJyb3IoJyFkaXNjbG9zdXJlJyk7XG5cbiAgICBjb25zdCBbdHlwZUlkLCBzZXRUeXBlSWRdID0gUmVhY3QudXNlU3RhdGUoZGVmYXVsdFR5cGVJZCk7XG4gICAgY29uc3QgW2Zyb21JZCwgc2V0RnJvbUlkXSA9IFJlYWN0LnVzZVN0YXRlKGRlZmF1bHRGcm9tSWQpO1xuICAgIGNvbnN0IFt0b0lkLCBzZXRUb0lkXSA9IFJlYWN0LnVzZVN0YXRlKGRlZmF1bHRUb0lkKTtcbiAgICBjb25zdCB0eXBlID0gUmVhY3QudXNlTWVtbygoKSA9PiB0eXBlSWQgPyBkZWVwLmdldCgrdHlwZUlkKSA6IG51bGwsIFt0eXBlSWRdKTtcbiAgICBjb25zdCBmcm9tID0gUmVhY3QudXNlTWVtbygoKSA9PiBmcm9tSWQgPyBkZWVwLmdldCgrZnJvbUlkKSA6IG51bGwsIFtmcm9tSWRdKTtcbiAgICBjb25zdCB0byA9IFJlYWN0LnVzZU1lbW8oKCkgPT4gdG9JZCA/IGRlZXAuZ2V0KCt0b0lkKSA6IG51bGwsIFt0b0lkXSk7XG5cbiAgICBjb25zdCBbdmFsdWUsIHNldFZhbHVlXSA9IFJlYWN0LnVzZVN0YXRlKCk7XG4gICAgY29uc3QgW25hbWUsIHNldE5hbWVdID0gUmVhY3QudXNlU3RhdGUoJycpO1xuICAgIGNvbnN0IFtjb250YWluZXJJZCwgc2V0Q29udGFpbmVySWRdID0gUmVhY3QudXNlU3RhdGUoZGVmYXVsdENvbnRhaW5lcklkKTtcblxuICAgIGNvbnN0IHRWID0gdXNlQXN5bmNNZW1vKGFzeW5jICgpID0+IHtcbiAgICAgIHJldHVybiB0eXBlSWQgPyAoYXdhaXQgZGVlcC5zZWxlY3QoeyB0eXBlX2lkOiBWLCBmcm9tX2lkOiArdHlwZUlkIH0pKT8uZGF0YT8uWzBdPy50b19pZCA6IHVuZGVmaW5lZDtcbiAgICB9LCBbdHlwZV0pO1xuICAgIGNvbnN0IHsgaXNWYWxpZCwgdmFsaWRhdGVkIH0gPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmICh0ViA9PT0gUykgcmV0dXJuIHsgdmFsaWRhdGVkOiB2YWx1ZSwgaXNWYWxpZDogdHJ1ZSB9O1xuICAgICAgICBpZiAodFYgPT09IE4pIHJldHVybiB7IHZhbGlkYXRlZDogK3ZhbHVlLCBpc1ZhbHVkOiB0eXBlb2YodmFsaWRhdGVkKSA9PT0gJ251bWJlcicgJiYgIU51bWJlci5pc05hTih2YWxpZGF0ZWQpIH07XG4gICAgICAgIGlmICh0ViA9PT0gTykgcmV0dXJuIHsgdmFsaWRhdGVkOiBKU09OLnBhcnNlKHZhbHVlKSwgaXNWYWxpZDogdHJ1ZSB9O1xuICAgICAgICBpZiAoIXRWKSByZXR1cm4geyB2YWxpZGF0ZWQ6IHZhbHVlLCBpc1ZhbGlkOiB0cnVlIH07XG4gICAgICB9IGNhdGNoKGUpIHt9XG4gICAgICByZXR1cm4geyB2YWxpZGF0ZWQ6IHZhbHVlLCBpc1ZhbGlkOiBmYWxzZSB9O1xuICAgIH0sIFt2YWx1ZSwgdFZdKTtcblxuICAgIGNvbnN0IEFsbG93QWRtaW4gPSB1c2VBc3luY01lbW88YW55Pihhc3luYyAoKSA9PiB7XG4gICAgICByZXR1cm4gYXdhaXQgZGVlcC5jYW4oZGVlcC5saW5rSWQsIGRlZXAubGlua0lkLCBkZWVwLmlkTG9jYWwoJ0BkZWVwLWZvdW5kYXRpb24vY29yZScsICdBbGxvd0FkbWluJykpO1xuICAgIH0sIFtdLCBmYWxzZSk7XG4gICAgY29uc3QgQWxsb3dJbnNlcnRUeXBlID0gdXNlQXN5bmNNZW1vPGFueT4oYXN5bmMgKCkgPT4ge1xuICAgICAgcmV0dXJuICF0eXBlSWQgPyBmYWxzZSA6IGF3YWl0IGRlZXAuY2FuKCt0eXBlSWQsIGRlZXAubGlua0lkLCBkZWVwLmlkTG9jYWwoJ0BkZWVwLWZvdW5kYXRpb24vY29yZScsICdBbGxvd0luc2VydFR5cGUnKSk7XG4gICAgfSwgW3R5cGVJZF0sIGZhbHNlKTtcbiAgICBjb25zdCBjYW4gPSBBbGxvd0luc2VydFR5cGUgfHwgQWxsb3dBZG1pbjtcbiAgICBcbiAgICBjb25zdCBpbnNlcnRRdWVyeSA9IHR5cGUgPyB7XG4gICAgICB0eXBlX2lkOiB0eXBlLmlkLFxuICAgICAgLi4uKGZyb21JZCAmJiB0b0lkID8geyBmcm9tX2lkOiArZnJvbUlkLCB0b19pZDogK3RvSWQgfSA6IHt9KSxcbiAgICAgIGNvbnRhaW5lcklkLFxuICAgICAgLi4uKG5hbWUgPyB7IG5hbWUgfSA6IHt9KSxcbiAgICAgIC4uLih0ViA9PSBTID8geyBzdHJpbmc6IHsgZGF0YTogeyB2YWx1ZTogdmFsaWRhdGVkIH0gfSB9IDogdFYgPT0gTiA/IHsgbnVtYmVyOiB7IGRhdGE6IHsgdmFsdWU6IHZhbGlkYXRlZCB9IH19IDogdFYgPT0gTyA/IHsgb2JqZWN0OiB7IGRhdGE6IHsgdmFsdWU6IHZhbGlkYXRlZCB9IH0gfSA6IHt9KSxcbiAgICB9IDoge307XG5cbiAgICBjb25zdCB2YWx1ZVR5cGUgPSBSZWFjdC51c2VNZW1vKCgpID0+IHR5cGU/Lm91dEJ5VHlwZVtWXT8uWzBdPy50b19pZCwgW3R5cGVdKTtcblxuICAgIGNvbnN0IGJ1dHRvbnMgPSA8PlxuICAgICAgPGMuU2xpZGVGYWRlIGluPXt0cnVlfSBvZmZzZXRYPSctMC41cmVtJyBzdHlsZT17e3Bvc2l0aW9uOiAnYWJzb2x1dGUnLCB0b3A6IDAsIHJpZ2h0OiAnLTRlbSd9fT5cbiAgICAgICAgPGMuQnV0dG9uXG4gICAgICAgICAgdz0nM2VtJyBoPSczZW0nXG4gICAgICAgICAgYm94U2hhZG93PSdkYXJrLWxnJ1xuICAgICAgICAgIHZhcmlhbnQ9e3VuZGVmaW5lZH1cbiAgICAgICAgICBvbkNsaWNrPXtkaXNjbG9zdXJlLm9uQ2xvc2V9XG4gICAgICAgID48QnNYIC8+PC9jLkJ1dHRvbj5cbiAgICAgIDwvYy5TbGlkZUZhZGU+XG4gICAgICA8Yy5TbGlkZUZhZGVcbiAgICAgICAgaW49eygoISFmcm9tSWQgJiYgISF0b0lkKSB8fCB0eXBlPy5pZCA9PT0gMSB8fCAoIXR5cGU/LmZyb21faWQgJiYgIXR5cGU/LnRvX2lkKSkgJiYgKGlzVmFsaWQgfHwgdmFsdWUgPT09ICcnKX1cbiAgICAgICAgb2Zmc2V0WD0nLTAuNXJlbScgc3R5bGU9e3twb3NpdGlvbjogJ2Fic29sdXRlJywgYm90dG9tOiAwLCByaWdodDogJy00ZW0nfX1cbiAgICAgID5cbiAgICAgICAgPGMuQnV0dG9uXG4gICAgICAgICAgdz0nM2VtJyBoPSczZW0nXG4gICAgICAgICAgYm94U2hhZG93PSdkYXJrLWxnJ1xuICAgICAgICAgIHZhcmlhbnQ9eydhY3RpdmUnfVxuICAgICAgICAgIG9uQ2xpY2s9e2FzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGF3YWl0IGRlZXAuaW5zZXJ0KGluc2VydFF1ZXJ5KTtcbiAgICAgICAgICAgIGRpc2Nsb3N1cmUub25DbG9zZSgpO1xuICAgICAgICAgIH19XG4gICAgICAgID48QnNDaGVjazIgLz48L2MuQnV0dG9uPlxuICAgICAgPC9jLlNsaWRlRmFkZT5cbiAgICA8Lz47XG5cbiAgICBjb25zdCBhbGVydCA9IDw+XG4gICAgICA8Yy5BbGVydCBzdGF0dXM9e2NhbiA/ICdpbmZvJyA6ICdlcnJvcid9PlxuICAgICAgICA8Yy5BbGVydEljb24gLz5cbiAgICAgICAgPGMuQWxlcnRUaXRsZT5Zb3Uge2NhbiA/ICdjYW4nIDogJ2NhbmB0J30gZG8gaXQuPC9jLkFsZXJ0VGl0bGU+XG4gICAgICA8L2MuQWxlcnQ+XG4gICAgICA8Z28uRWRpdG9yXG4gICAgICAgIHZhbHVlPXtgYXdhaXQgZGVlcC5jYW4oZGVlcC5saW5rSWQsIGRlZXAubGlua0lkLCBkZWVwLmlkTG9jYWwoJ0BkZWVwLWZvdW5kYXRpb24vY29yZScsICdBbGxvd0FkbWluJykpXG4vLyAke0FsbG93QWRtaW59JHshIXR5cGVJZCA/IGBcbmF3YWl0IGRlZXAuY2FuKCR7dHlwZUlkfSwgZGVlcC5saW5rSWQsIGRlZXAuaWRMb2NhbCgnQGRlZXAtZm91bmRhdGlvbi9jb3JlJywgJ0FsbG93SW5zZXJ0VHlwZScpKVxuLy8gJHtBbGxvd0luc2VydFR5cGV9YCA6ICcnfWB9XG4gICAgICAgIGVkaXRhYmxlPXtmYWxzZX0gcmVhZE9ubHlcbiAgICAgIC8+XG4gICAgPC8+O1xuXG4gICAgcmV0dXJuIDxnby5PblxuICAgICAgZG89e3tcbiAgICAgIH19XG4gICAgPlxuICAgICAgPGMuTW9kYWxcbiAgICAgICAgcmVmPXtyZWZ9XG4gICAgICAgIGNsb3NlT25PdmVybGF5Q2xpY2sgYmxvY2tTY3JvbGxPbk1vdW50PXtmYWxzZX1cbiAgICAgICAgb25DbG9zZT17ZGlzY2xvc3VyZS5vbkNsb3NlfVxuICAgICAgICBpc09wZW49e2Rpc2Nsb3N1cmUuaXNPcGVufSBwb3J0YWxQcm9wcz17eyBjb250YWluZXJSZWY6IGdvLnJvb3QoKS5yZWYgfX1cbiAgICAgID5cbiAgICAgICAgPGMuTW9kYWxPdmVybGF5IC8+XG4gICAgICAgIDxjLk1vZGFsQ29udGVudCB3PSczMGVtJyBtYXhXPSczMGVtJyBwb3NpdGlvbj0ncmVsYXRpdmUnPlxuICAgICAgICAgIDxjLk1vZGFsSGVhZGVyPkxpbmsgaW5zZXJ0aW5nOjwvYy5Nb2RhbEhlYWRlcj5cbiAgICAgICAgICA8Yy5Nb2RhbEJvZHkgcD17MH0gdz0nMTAwJScgaD0nMTAwJSc+XG4gICAgICAgICAgICB7IWNhbiAmJiBhbGVydH1cbiAgICAgICAgICAgIDxnby5Db21wb25lbnQgcGF0aD17W2RwbCwgJ0ZpbmRlcklucHV0J119XG4gICAgICAgICAgICAgIGxlZnRJY29uPXs8VHlwZUljb24vPn1cbiAgICAgICAgICAgICAgdmFsdWU9e3R5cGVJZH1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9e2lkID0+IHNldFR5cGVJZChpZCl9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPGMuU2ltcGxlR3JpZCBjb2x1bW5zPXsyfT5cbiAgICAgICAgICAgICAgPGdvLkNvbXBvbmVudCBwYXRoPXtbZHBsLCAnRmluZGVySW5wdXQnXX1cbiAgICAgICAgICAgICAgICBsZWZ0SWNvbj17PEZyb21JY29uLz59XG4gICAgICAgICAgICAgICAgdmFsdWU9e2Zyb21JZH1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17aWQgPT4gc2V0RnJvbUlkKGlkKX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPGdvLkNvbXBvbmVudCBwYXRoPXtbZHBsLCAnRmluZGVySW5wdXQnXX1cbiAgICAgICAgICAgICAgICBsZWZ0SWNvbj17PFRvSWNvbi8+fVxuICAgICAgICAgICAgICAgIHZhbHVlPXt0b0lkfVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtpZCA9PiBzZXRUb0lkKGlkKX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvYy5TaW1wbGVHcmlkPlxuICAgICAgICAgICAgPGMuU2ltcGxlR3JpZCBjb2x1bW5zPXsyfT5cbiAgICAgICAgICAgICAgPGdvLkNvbXBvbmVudCBwYXRoPXtbZHBsLCAnRmluZGVySW5wdXQnXX1cbiAgICAgICAgICAgICAgICBsZWZ0SWNvbj17PD7wn5eC77iPPC8+fVxuICAgICAgICAgICAgICAgIHZhbHVlPXtjb250YWluZXJJZH1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17aWQgPT4gc2V0Q29udGFpbklkKGlkKX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPGMuSW5wdXRcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj0nbmFtZScgaD0nM2VtJ1xuICAgICAgICAgICAgICAgIHZhbHVlPXtuYW1lfVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtlID0+IHNldE5hbWUoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9jLlNpbXBsZUdyaWQ+XG4gICAgICAgICAgICB7ISF0eXBlICYmIDxjLkJveD5cbiAgICAgICAgICAgICAgeyF2YWx1ZVR5cGUgJiYgPD5cbiAgICAgICAgICAgICAgICA8Yy5BbGVydCBzdGF0dXM9J2luZm8nPlxuICAgICAgICAgICAgICAgICAgPGMuQWxlcnRJY29uLz5cbiAgICAgICAgICAgICAgICAgIDxjLkFsZXJ0VGl0bGU+dHlwZSB7K3R5cGV9IGNhbid0IGhhdmUgVmFsdWU8L2MuQWxlcnRUaXRsZT5cbiAgICAgICAgICAgICAgICA8L2MuQWxlcnQ+XG4gICAgICAgICAgICAgIDwvPn1cbiAgICAgICAgICAgICAge3ZhbHVlVHlwZSA9PT0gUyAmJiA8PlxuICAgICAgICAgICAgICAgIDxnby5FZGl0b3IgcGxhY2Vob2xkZXI9J1N0cmluZyB2YWx1ZScgdmFsdWU9e3ZhbHVlfSBvbkNoYW5nZT17c2V0VmFsdWV9Lz5cbiAgICAgICAgICAgICAgPC8+fVxuICAgICAgICAgICAgICB7dmFsdWVUeXBlID09PSBOICYmIDw+XG4gICAgICAgICAgICAgICAgPGMuSW5wdXRcbiAgICAgICAgICAgICAgICAgIHR5cGU9J3N0cmluZydcbiAgICAgICAgICAgICAgICAgIHZhbHVlPXt2YWx1ZX1cbiAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPSdOdW1iZXIgdmFsdWUnXG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17ZSA9PiBzZXRWYWx1ZShlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC8+fVxuICAgICAgICAgICAgICB7dmFsdWVUeXBlID09PSBPICYmIDw+XG4gICAgICAgICAgICAgICAgPGdvLkVkaXRvciBwbGFjZWhvbGRlcj0nT2JqZWN0IHZhbHVlJyB2YWx1ZT17dmFsdWV9IG9uQ2hhbmdlPXtzZXRWYWx1ZX0vPlxuICAgICAgICAgICAgICA8Lz59XG4gICAgICAgICAgICAgIHsodFYgPT09IFMgfHwgdFYgPT09IE4gfHwgdFYgPT09IE8pICYmIDxjLlRhZ1xuICAgICAgICAgICAgICAgIHNpemU9J2xnJyBjb2xvclNjaGVtZT17dmFsdWUgPT09ICcnID8gJ2JsYWNrJyA6IGlzVmFsaWQgPyAnZGVlcEFjdGl2ZScgOiAnZGFuZ2VyJ30gdmFyaWFudD0nc29saWQnIGJvcmRlclJhZGl1cz0nZnVsbCdcbiAgICAgICAgICAgICAgICBwb3NpdGlvbj0nYWJzb2x1dGUnIGJvdHRvbT0nLTAuNWVtJyByaWdodD0nLTAuNWVtJ1xuICAgICAgICAgICAgICA+e3ZhbHVlID09PSAnJyA/ICdlbXB0eScgOiBpc1ZhbGlkID8gJ3ZhbGlkJyA6ICdpbnZhbGlkJ308L2MuVGFnPn1cbiAgICAgICAgICAgIDwvYy5Cb3g+fVxuICAgICAgICAgICAgPGMuRGl2aWRlciBtdD0nMWVtJyBtYj0nMWVtJy8+XG4gICAgICAgICAgICA8Z28uRWRpdG9yXG4gICAgICAgICAgICAgIHZhbHVlPXtgYXdhaXQgZGVlcC5pbnNlcnQoJHtKU09OLnN0cmluZ2lmeShpbnNlcnRRdWVyeSwgbnVsbCwgMil9KWB9XG4gICAgICAgICAgICAgIGVkaXRhYmxlPXtmYWxzZX0gcmVhZE9ubHlcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICB7ISFjYW4gJiYgYWxlcnR9XG4gICAgICAgICAgPC9jLk1vZGFsQm9keT5cbiAgICAgICAgICB7YnV0dG9uc31cbiAgICAgICAgPC9jLk1vZGFsQ29udGVudD5cbiAgICAgIDwvYy5Nb2RhbD5cbiAgICA8L2dvLk9uPjtcbiAgfTtcbn0iXX0=",
          "link_id": 16360
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 16447,
      "src_id": 16441,
      "handler_id": 16445,
      "execution_provider_id": 33,
      "isolation_provider_id": 144,
      "dist": {
        "id": 16447,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 1611,
          "value": "({ deep, data, require, Go }) => {\n    const React = require('react');\n    const { BsX, BsCheck2 } = require('react-icons/bs');\n    const c = require('@chakra-ui/react');\n    const { useAsyncMemo } = require('use-async-memo');\n    const dc = '@deep-foundation/core';\n    const V = deep.idLocal(dc, 'Value');\n    return ({ go, linkId, containerId, disclosure }, ref) => {\n        if (!disclosure)\n            throw new Error('!disclosure');\n        if (!linkId)\n            throw new Error('!linkId');\n        const link = React.useMemo(() => deep.get(linkId), [linkId]);\n        const [containment, setContainment] = React.useState('contains');\n        const [down, setDown] = React.useState(true);\n        const AllowAdmin = useAsyncMemo(async () => {\n            return await deep.can(deep.linkId, deep.linkId, deep.idLocal(dc, 'AllowAdmin'));\n        }, [], false);\n        const AllowDeleteType = useAsyncMemo(async () => {\n            return !link.type_id ? false : await deep.can(link.type_id, deep.linkId, deep.idLocal(dc, 'AllowDeleteType'));\n        }, [link.type_id], false);\n        const AllowDelete = useAsyncMemo(async () => {\n            return !linkId ? false : await deep.can(linkId, deep.linkId, deep.idLocal(dc, 'AllowDelete'));\n        }, [linkId], false);\n        const can = AllowAdmin || AllowDeleteType || AllowDelete;\n        const deleteQuery = {\n            _or: [\n                (down ? {\n                    up: {\n                        tree_id: deep.idLocal(dc, 'containTree'),\n                        parent_id: link.id,\n                    }\n                } : {\n                    id: link.id,\n                }),\n                ...(containment === 'contains' ? [{\n                        type_id: deep.idLocal(dc, 'Contain'),\n                        to_id: link.id,\n                    }] : containment === 'container' ? [{\n                        type_id: deep.idLocal(dc, 'Contain'),\n                        from_id: containerId,\n                        to_id: link.id,\n                    }] : []),\n            ],\n        };\n        const { data: countDown } = deep.useQuery({\n            up: {\n                tree_id: deep.idLocal(dc, 'containTree'),\n                parent_id: link.id,\n            }\n        }, {\n            skip: !disclosure.isOpen,\n            aggregate: 'count',\n        });\n        const { data: countInContains } = deep.useQuery({\n            to_id: link.id,\n            type_id: deep.idLocal(dc, 'Contain'),\n        }, {\n            skip: !disclosure.isOpen,\n            aggregate: 'count'\n        });\n        const buttons = (React.createElement(React.Fragment, null,\n            React.createElement(c.SlideFade, { in: true, offsetX: '-0.5rem', style: { position: 'absolute', top: 0, right: '-4em' } },\n                React.createElement(c.Button, { w: '3em', h: '3em', boxShadow: 'dark-lg', onClick: disclosure.onClose },\n                    React.createElement(BsX, null))),\n            React.createElement(c.SlideFade, { in: true, offsetX: '-0.5rem', style: { position: 'absolute', bottom: 0, right: '-4em' } },\n                React.createElement(c.Button, { w: '3em', h: '3em', boxShadow: 'dark-lg', variant: 'active', onClick: async () => {\n                        await deep.delete(deleteQuery);\n                        disclosure.onClose();\n                    } },\n                    React.createElement(BsCheck2, null)))));\n        const alert = (React.createElement(React.Fragment, null,\n            React.createElement(c.Alert, { status: can ? 'info' : 'error' },\n                React.createElement(c.AlertIcon, null),\n                React.createElement(c.AlertTitle, null,\n                    \"You \",\n                    can ? 'can' : \"can't\",\n                    \" do it.\")),\n            React.createElement(go.Editor, { value: `await deep.can(deep.linkId, deep.linkId, deep.idLocal('@deep-foundation/core', 'AllowAdmin'))\n// ${AllowAdmin}\nawait deep.can(${link.type_id}, deep.linkId, deep.idLocal('@deep-foundation/core', 'AllowDeleteType'))\n// ${AllowDeleteType}\nawait deep.can(${link.id}, deep.linkId, deep.idLocal('@deep-foundation/core', 'AllowDelete'))\n// ${AllowDelete}`, editable: false, readOnly: true })));\n        return (React.createElement(go.On, { do: {} },\n            React.createElement(c.Modal, { ref: ref, closeOnOverlayClick: true, blockScrollOnMount: false, onClose: disclosure.onClose, isOpen: disclosure.isOpen, portalProps: {\n                    containerRef: go.root().ref\n                } },\n                React.createElement(c.ModalOverlay, null),\n                React.createElement(c.ModalContent, { w: '30em', maxW: '30em', position: 'relative' },\n                    React.createElement(c.ModalHeader, null,\n                        \"Link deleting: \",\n                        `${link}`),\n                    React.createElement(c.ModalBody, { p: 0, w: '100%', h: '100%' },\n                        alert,\n                        React.createElement(c.Box, { p: '1em' },\n                            React.createElement(c.Checkbox, { size: 'lg', checked: down, onChange: () => setDown(!down) },\n                                \"Delete all contained in links? Total: (\",\n                                countDown,\n                                \")\")),\n                        React.createElement(c.Box, { p: '1em' }, \"Need to delete contains to this link?\"),\n                        React.createElement(c.Box, null,\n                            React.createElement(c.SimpleGrid, { columns: 3 },\n                                React.createElement(c.Button, { variant: containment === 'contains' ? 'active' : undefined, onClick: () => setContainment('contains') },\n                                    React.createElement(c.Box, null,\n                                        React.createElement(c.Box, null, \"all in\"),\n                                        React.createElement(c.Box, { fontSize: 'xs' },\n                                            \"contains: (\",\n                                            countInContains,\n                                            \")\"))),\n                                !!containerId && (React.createElement(c.Button, { variant: containment === 'container' ? 'active' : undefined, onClick: () => setContainment('container') },\n                                    React.createElement(c.Box, null,\n                                        React.createElement(c.Box, null, \"only one\"),\n                                        React.createElement(c.Box, { fontSize: 'xs' },\n                                            \"from \",\n                                            containerId)))),\n                                React.createElement(c.Button, { variant: containment === 'only' ? 'active' : undefined, onClick: () => setContainment('only') },\n                                    React.createElement(c.Box, null,\n                                        React.createElement(c.Box, null, \"not need\"),\n                                        React.createElement(c.Box, { fontSize: 'xs' }, \"to delete contains\"))))),\n                        React.createElement(go.Editor, { value: `await deep.delete(${JSON.stringify(deleteQuery, null, 2)})`, editable: false, readOnly: true })),\n                    buttons))));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxDQUFDLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRTtJQUM5QixNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDL0IsTUFBTSxFQUFFLEdBQUcsRUFBRSxRQUFRLEVBQUUsR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztJQUNwRCxNQUFNLENBQUMsR0FBRyxPQUFPLENBQUMsa0JBQWtCLENBQUMsQ0FBQztJQUV0QyxNQUFNLEVBQUUsWUFBWSxFQUFFLEdBQUcsT0FBTyxDQUFDLGdCQUFnQixDQUFDLENBQUM7SUFFbkQsTUFBTSxFQUFFLEdBQUcsdUJBQXVCLENBQUM7SUFDbkMsTUFBTSxDQUFDLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFFcEMsT0FBTyxDQUFDLEVBQUUsRUFBRSxFQUFFLE1BQU0sRUFBRSxXQUFXLEVBQUUsVUFBVSxFQUFFLEVBQUUsR0FBRyxFQUFFLEVBQUU7UUFDdEQsSUFBSSxDQUFDLFVBQVU7WUFBRSxNQUFNLElBQUksS0FBSyxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQ2hELElBQUksQ0FBQyxNQUFNO1lBQUUsTUFBTSxJQUFJLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUV4QyxNQUFNLElBQUksR0FBRyxLQUFLLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO1FBQzdELE1BQU0sQ0FBQyxXQUFXLEVBQUUsY0FBYyxDQUFDLEdBQUcsS0FBSyxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUNqRSxNQUFNLENBQUMsSUFBSSxFQUFF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QWlCO3dDQUN2QixvQkFBQyxDQUFDLENBQUMsR0FBRyxJQUFDLFFBQVEsRUFBQyxJQUFJOzs0Q0FDWixXQUFXLENBQ1gsQ0FDRixDQUNDLENBQ1o7Z0NBQ0Qsb0JBQUMsQ0FBQyxDQUFDLE1BQU0sSUFDUCxPQUFPLEVBQUUsV0FBVyxLQUFLLE1BQU0sQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQ3RELE9BQU8sRUFBRSxHQUFHLEVBQUUsQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDO29DQUVyQyxvQkFBQyxDQUFDLENBQUMsR0FBRzt3Q0FDSixvQkFBQyxDQUFDLENBQUMsR0FBRyxtQkFBaUI7d0NBQ3ZCLG9CQUFDLENBQUMsQ0FBQyxHQUFHLElBQUMsUUFBUSxFQUFDLElBQUkseUJBRVosQ0FDRixDQUNDLENBQ0UsQ0FDVDt3QkFDUixvQkFBQyxFQUFFLENBQUMsTUFBTSxJQUNSLEtBQUssRUFBRSxxQkFBcUIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxXQUFXLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxHQUFHLEVBQ25FLFFBQVEsRUFBRSxLQUFLLEVBQ2YsUUFBUSxTQUNSLENBQ1U7b0JBQ2IsT0FBTyxDQUNPLENBQ1QsQ0FDSixDQUNULENBQUM7SUFDSixDQUFDLENBQUM7QUFDSixDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIoeyBkZWVwLCBkYXRhLCByZXF1aXJlLCBHbyB9KSA9PiB7XG4gIGNvbnN0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbiAgY29uc3QgeyBCc1gsIEJzQ2hlY2syIH0gPSByZXF1aXJlKCdyZWFjdC1pY29ucy9icycpO1xuICBjb25zdCBjID0gcmVxdWlyZSgnQGNoYWtyYS11aS9yZWFjdCcpO1xuXG4gIGNvbnN0IHsgdXNlQXN5bmNNZW1vIH0gPSByZXF1aXJlKCd1c2UtYXN5bmMtbWVtbycpO1xuXG4gIGNvbnN0IGRjID0gJ0BkZWVwLWZvdW5kYXRpb24vY29yZSc7XG4gIGNvbnN0IFYgPSBkZWVwLmlkTG9jYWwoZGMsICdWYWx1ZScpO1xuXG4gIHJldHVybiAoeyBnbywgbGlua0lkLCBjb250YWluZXJJZCwgZGlzY2xvc3VyZSB9LCByZWYpID0+IHtcbiAgICBpZiAoIWRpc2Nsb3N1cmUpIHRocm93IG5ldyBFcnJvcignIWRpc2Nsb3N1cmUnKTtcbiAgICBpZiAoIWxpbmtJZCkgdGhyb3cgbmV3IEVycm9yKCchbGlua0lkJyk7XG5cbiAgICBjb25zdCBsaW5rID0gUmVhY3QudXNlTWVtbygoKSA9PiBkZWVwLmdldChsaW5rSWQpLCBbbGlua0lkXSk7XG4gICAgY29uc3QgW2NvbnRhaW5tZW50LCBzZXRDb250YWlubWVudF0gPSBSZWFjdC51c2VTdGF0ZSgnY29udGFpbnMnKTtcbiAgICBjb25zdCBbZG93biwgc2V0RG93bl0gPSBSZWFjdC51c2VTdGF0ZSh0cnVlKTtcblxuICAgIGNvbnN0IEFsbG93QWRtaW4gPSB1c2VBc3luY01lbW8oYXN5bmMgKCkgPT4ge1xuICAgICAgcmV0dXJuIGF3YWl0IGRlZXAuY2FuKGRlZXAubGlua0lkLCBkZWVwLmxpbmtJZCwgZGVlcC5pZExvY2FsKGRjLCAnQWxsb3dBZG1pbicpKTtcbiAgICB9LCBbXSwgZmFsc2UpO1xuXG4gICAgY29uc3QgQWxsb3dEZWxldGVUeXBlID0gdXNlQXN5bmNNZW1vKGFzeW5jICgpID0+IHtcbiAgICAgIHJldHVybiAhbGluay50eXBlX2lkID8gZmFsc2UgOiBhd2FpdCBkZWVwLmNhbihsaW5rLnR5cGVfaWQsIGRlZXAubGlua0lkLCBkZWVwLmlkTG9jYWwoZGMsICdBbGxvd0RlbGV0ZVR5cGUnKSk7XG4gICAgfSwgW2xpbmsudHlwZV9pZF0sIGZhbHNlKTtcblxuICAgIGNvbnN0IEFsbG93RGVsZXRlID0gdXNlQXN5bmNNZW1vKGFzeW5jICgpID0+IHtcbiAgICAgIHJldHVybiAhbGlua0lkID8gZmFsc2UgOiBhd2FpdCBkZWVwLmNhbihsaW5rSWQsIGRlZXAubGlua0lkLCBkZWVwLmlkTG9jYWwoZGMsICdBbGxvd0RlbGV0ZScpKTtcbiAgICB9LCBbbGlua0lkXSwgZmFsc2UpO1xuXG4gICAgY29uc3QgY2FuID0gQWxsb3dBZG1pbiB8fCBBbGxvd0RlbGV0ZVR5cGUgfHwgQWxsb3dEZWxldGU7XG5cbiAgICBjb25zdCBkZWxldGVRdWVyeSA9IHtcbiAgICAgIF9vcjogW1xuICAgICAgICAoZG93biA/IHtcbiAgICAgICAgICB1cDoge1xuICAgICAgICAgICAgdHJlZV9pZDogZGVlcC5pZExvY2FsKGRjLCAnY29udGFpblRyZWUnKSxcbiAgICAgICAgICAgIHBhcmVudF9pZDogbGluay5pZCxcbiAgICAgICAgICB9XG4gICAgICAgIH0gOiB7XG4gICAgICAgICAgaWQ6IGxpbmsuaWQsXG4gICAgICAgIH0pLFxuICAgICAgICAuLi4oY29udGFpbm1lbnQgPT09ICdjb250YWlucycgPyBbe1xuICAgICAgICAgIHR5cGVfaWQ6IGRlZXAuaWRMb2NhbChkYywgJ0NvbnRhaW4nKSxcbiAgICAgICAgICB0b19pZDogbGluay5pZCxcbiAgICAgICAgfV0gOiBjb250YWlubWVudCA9PT0gJ2NvbnRhaW5lcicgPyBbe1xuICAgICAgICAgIHR5cGVfaWQ6IGRlZXAuaWRMb2NhbChkYywgJ0NvbnRhaW4nKSxcbiAgICAgICAgICBmcm9tX2lkOiBjb250YWluZXJJZCxcbiAgICAgICAgICB0b19pZDogbGluay5pZCxcbiAgICAgICAgfV0gOiBbXSksXG4gICAgICBdLFxuICAgIH07XG5cbiAgICBjb25zdCB7IGRhdGE6IGNvdW50RG93biB9ID0gZGVlcC51c2VRdWVyeSh7XG4gICAgICB1cDoge1xuICAgICAgICB0cmVlX2lkOiBkZWVwLmlkTG9jYWwoZGMsICdjb250YWluVHJlZScpLFxuICAgICAgICBwYXJlbnRfaWQ6IGxpbmsuaWQsXG4gICAgICB9XG4gICAgfSwge1xuICAgICAgc2tpcDogIWRpc2Nsb3N1cmUuaXNPcGVuLFxuICAgICAgYWdncmVnYXRlOiAnY291bnQnLFxuICAgIH0pO1xuXG4gICAgY29uc3QgeyBkYXRhOiBjb3VudEluQ29udGFpbnMgfSA9IGRlZXAudXNlUXVlcnkoe1xuICAgICAgdG9faWQ6IGxpbmsuaWQsXG4gICAgICB0eXBlX2lkOiBkZWVwLmlkTG9jYWwoZGMsICdDb250YWluJyksXG4gICAgfSwge1xuICAgICAgc2tpcDogIWRpc2Nsb3N1cmUuaXNPcGVuLFxuICAgICAgYWdncmVnYXRlOiAnY291bnQnXG4gICAgfSk7XG5cbiAgICBjb25zdCBidXR0b25zID0gKFxuICAgICAgPD5cbiAgICAgICAgPGMuU2xpZGVGYWRlIGluPXt0cnVlfSBvZmZzZXRYPSctMC41cmVtJyBzdHlsZT17eyBwb3NpdGlvbjogJ2Fic29sdXRlJywgdG9wOiAwLCByaWdodDogJy00ZW0nIH19PlxuICAgICAgICAgIDxjLkJ1dHRvbiB3PSczZW0nIGg9JzNlbScgYm94U2hhZG93PSdkYXJrLWxnJyBvbkNsaWNrPXtkaXNjbG9zdXJlLm9uQ2xvc2V9PlxuICAgICAgICAgICAgPEJzWCAvPlxuICAgICAgICAgIDwvYy5CdXR0b24+XG4gICAgICAgIDwvYy5TbGlkZUZhZGU+XG4gICAgICAgIDxjLlNsaWRlRmFkZSBpbj17dHJ1ZX0gb2Zmc2V0WD0nLTAuNXJlbScgc3R5bGU9e3sgcG9zaXRpb246ICdhYnNvbHV0ZScsIGJvdHRvbTogMCwgcmlnaHQ6ICctNGVtJyB9fT5cbiAgICAgICAgICA8Yy5CdXR0b24gdz0nM2VtJyBoPSczZW0nIGJveFNoYWRvdz0nZGFyay1sZycgdmFyaWFudD0nYWN0aXZlJyBvbkNsaWNrPXthc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBhd2FpdCBkZWVwLmRlbGV0ZShkZWxldGVRdWVyeSk7XG4gICAgICAgICAgICBkaXNjbG9zdXJlLm9uQ2xvc2UoKTtcbiAgICAgICAgICB9fT5cbiAgICAgICAgICAgIDxCc0NoZWNrMiAvPlxuICAgICAgICAgIDwvYy5CdXR0b24+XG4gICAgICAgIDwvYy5TbGlkZUZhZGU+XG4gICAgICA8Lz5cbiAgICApO1xuICAgIFxuICAgIGNvbnN0IGFsZXJ0ID0gKFxuICAgICAgPFJlYWN0LkZyYWdtZW50PlxuICAgICAgICA8Yy5BbGVydCBzdGF0dXM9e2NhbiA/ICdpbmZvJyA6ICdlcnJvcid9PlxuICAgICAgICAgIDxjLkFsZXJ0SWNvbiAvPlxuICAgICAgICAgIDxjLkFsZXJ0VGl0bGU+XG4gICAgICAgICAgICBZb3Uge2NhbiA/ICdjYW4nIDogXCJjYW4ndFwifSBkbyBpdC5cbiAgICAgICAgICA8L2MuQWxlcnRUaXRsZT5cbiAgICAgICAgPC9jLkFsZXJ0PlxuICAgICAgICA8Z28uRWRpdG9yXG4gICAgICAgICAgdmFsdWU9e2Bhd2FpdCBkZWVwLmNhbihkZWVwLmxpbmtJZCwgZGVlcC5saW5rSWQsIGRlZXAuaWRMb2NhbCgnQGRlZXAtZm91bmRhdGlvbi9jb3JlJywgJ0FsbG93QWRtaW4nKSlcbi8vICR7QWxsb3dBZG1pbn1cbmF3YWl0IGRlZXAuY2FuKCR7bGluay50eXBlX2lkfSwgZGVlcC5saW5rSWQsIGRlZXAuaWRMb2NhbCgnQGRlZXAtZm91bmRhdGlvbi9jb3JlJywgJ0FsbG93RGVsZXRlVHlwZScpKVxuLy8gJHtBbGxvd0RlbGV0ZVR5cGV9XG5hd2FpdCBkZWVwLmNhbigke2xpbmsuaWR9LCBkZWVwLmxpbmtJZCwgZGVlcC5pZExvY2FsKCdAZGVlcC1mb3VuZGF0aW9uL2NvcmUnLCAnQWxsb3dEZWxldGUnKSlcbi8vICR7QWxsb3dEZWxldGV9YH1cbiAgICAgICAgICBlZGl0YWJsZT17ZmFsc2V9XG4gICAgICAgICAgcmVhZE9ubHlcbiAgICAgICAgLz5cbiAgICAgIDwvUmVhY3QuRnJhZ21lbnQ+XG4gICAgKTtcbiAgICBcbiAgICByZXR1cm4gKFxuICAgICAgPGdvLk9uIGRvPXt7fX0+XG4gICAgICAgIDxjLk1vZGFsXG4gICAgICAgICAgcmVmPXtyZWZ9XG4gICAgICAgICAgY2xvc2VPbk92ZXJsYXlDbGlja1xuICAgICAgICAgIGJsb2NrU2Nyb2xsT25Nb3VudD17ZmFsc2V9XG4gICAgICAgICAgb25DbG9zZT17ZGlzY2xvc3VyZS5vbkNsb3NlfVxuICAgICAgICAgIGlzT3Blbj17ZGlzY2xvc3VyZS5pc09wZW59XG4gICAgICAgICAgcG9ydGFsUHJvcHM9e3tcbiAgICAgICAgICAgIGNvbnRhaW5lclJlZjogZ28ucm9vdCgpLnJlZlxuICAgICAgICAgIH19XG4gICAgICAgID5cbiAgICAgICAgICA8Yy5Nb2RhbE92ZXJsYXkgLz5cbiAgICAgICAgICA8Yy5Nb2RhbENvbnRlbnQgdz0nMzBlbScgbWF4Vz0nMzBlbScgcG9zaXRpb249J3JlbGF0aXZlJz5cbiAgICAgICAgICAgIDxjLk1vZGFsSGVhZGVyPlxuICAgICAgICAgICAgICBMaW5rIGRlbGV0aW5nOiB7YCR7bGlua31gfVxuICAgICAgICAgICAgPC9jLk1vZGFsSGVhZGVyPlxuICAgICAgICAgICAgPGMuTW9kYWxCb2R5IHA9ezB9IHc9JzEwMCUnIGg9JzEwMCUnPlxuICAgICAgICAgICAgICB7YWxlcnR9XG4gICAgICAgICAgICAgIDxjLkJveCBwPScxZW0nPlxuICAgICAgICAgICAgICAgIDxjLkNoZWNrYm94XG4gICAgICAgICAgICAgICAgICBzaXplPSdsZydcbiAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2Rvd259XG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KCkgPT4gc2V0RG93bighZG93bil9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgRGVsZXRlIGFsbCBjb250YWluZWQgaW4gbGlua3M/IFRvdGFsOiAoe2NvdW50RG93bn0pXG4gICAgICAgICAgICAgICAgPC9jLkNoZWNrYm94PlxuICAgICAgICAgICAgICA8L2MuQm94PlxuICAgICAgICAgICAgICA8Yy5Cb3ggcD0nMWVtJz5cbiAgICAgICAgICAgICAgICBOZWVkIHRvIGRlbGV0ZSBjb250YWlucyB0byB0aGlzIGxpbms/XG4gICAgICAgICAgICAgIDwvYy5Cb3g+XG4gICAgICAgICAgICAgIDxjLkJveD5cbiAgICAgICAgICAgICAgICA8Yy5TaW1wbGVHcmlkIGNvbHVtbnM9ezN9PlxuICAgICAgICAgICAgICAgICAgPGMuQnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIHZhcmlhbnQ9e2NvbnRhaW5tZW50ID09PSAnY29udGFpbnMnID8gJ2FjdGl2ZScgOiB1bmRlZmluZWR9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldENvbnRhaW5tZW50KCdjb250YWlucycpfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8Yy5Cb3g+XG4gICAgICAgICAgICAgICAgICAgICAgPGMuQm94PmFsbCBpbjwvYy5Cb3g+XG4gICAgICAgICAgICAgICAgICAgICAgPGMuQm94IGZvbnRTaXplPSd4cyc+XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250YWluczogKHtjb3VudEluQ29udGFpbnN9KVxuICAgICAgICAgICAgICAgICAgICAgIDwvYy5Cb3g+XG4gICAgICAgICAgICAgICAgICAgIDwvYy5Cb3g+XG4gICAgICAgICAgICAgICAgICA8L2MuQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgeyEhY29udGFpbmVySWQgJiYgKFxuICAgICAgICAgICAgICAgICAgICA8Yy5CdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICB2YXJpYW50PXtjb250YWlubWVudCA9PT0gJ2NvbnRhaW5lcicgPyAnYWN0aXZlJyA6IHVuZGVmaW5lZH1cbiAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRDb250YWlubWVudCgnY29udGFpbmVyJyl9XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICA8Yy5Cb3g+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Yy5Cb3g+b25seSBvbmU8L2MuQm94PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGMuQm94IGZvbnRTaXplPSd4cyc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20ge2NvbnRhaW5lcklkfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9jLkJveD5cbiAgICAgICAgICAgICAgICAgICAgICA8L2MuQm94PlxuICAgICAgICAgICAgICAgICAgICA8L2MuQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgIDxjLkJ1dHRvblxuICAgICAgICAgICAgICAgICAgICB2YXJpYW50PXtjb250YWlubWVudCA9PT0gJ29ubHknID8gJ2FjdGl2ZScgOiB1bmRlZmluZWR9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldENvbnRhaW5tZW50KCdvbmx5Jyl9XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxjLkJveD5cbiAgICAgICAgICAgICAgICAgICAgICA8Yy5Cb3g+bm90IG5lZWQ8L2MuQm94PlxuICAgICAgICAgICAgICAgICAgICAgIDxjLkJveCBmb250U2l6ZT0neHMnPlxuICAgICAgICAgICAgICAgICAgICAgICAgdG8gZGVsZXRlIGNvbnRhaW5zXG4gICAgICAgICAgICAgICAgICAgICAgPC9jLkJveD5cbiAgICAgICAgICAgICAgICAgICAgPC9jLkJveD5cbiAgICAgICAgICAgICAgICAgIDwvYy5CdXR0b24+XG4gICAgICAgICAgICAgICAgPC9jLlNpbXBsZUdyaWQ+XG4gICAgICAgICAgICAgIDwvYy5Cb3g+XG4gICAgICAgICAgICAgIDxnby5FZGl0b3JcbiAgICAgICAgICAgICAgICB2YWx1ZT17YGF3YWl0IGRlZXAuZGVsZXRlKCR7SlNPTi5zdHJpbmdpZnkoZGVsZXRlUXVlcnksIG51bGwsIDIpfSlgfVxuICAgICAgICAgICAgICAgIGVkaXRhYmxlPXtmYWxzZX1cbiAgICAgICAgICAgICAgICByZWFkT25seVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9jLk1vZGFsQm9keT5cbiAgICAgICAgICAgIHtidXR0b25zfVxuICAgICAgICAgIDwvYy5Nb2RhbENvbnRlbnQ+XG4gICAgICAgIDwvYy5Nb2RhbD5cbiAgICAgIDwvZ28uT24+XG4gICAgKTtcbiAgfTtcbn07Il19",
          "link_id": 16447
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 16541,
      "src_id": 16525,
      "handler_id": 16529,
      "execution_provider_id": 33,
      "isolation_provider_id": 144,
      "dist": {
        "id": 16541,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 1633,
          "value": "({ deep, data, require, Go }) => {\n    const { BsX, BsCheck2All } = require(\"react-icons/bs\");\n    const React = require('react');\n    const c = require('@chakra-ui/react');\n    const dc = '@deep-foundation/core';\n    const dpl = '@deep-foundation/perception-links';\n    const Query = deep.idLocal(dc, 'Query');\n    const Contain = deep.idLocal(dc, 'Contain');\n    const FinderQuery = deep.idLocal(dpl, 'FinderQuery');\n    const Tree = deep.idLocal(dpl, 'Tree');\n    const Search = deep.idLocal(dpl, 'Search');\n    return ({ go, initialId = deep.linkId, initialHandlerId, startProps = {}, isActive, onSubmit, disclosure: __disclosure, }, ref) => {\n        const _disclosure = c.useDisclosure();\n        const disclosure = __disclosure || _disclosure;\n        const [selectedId, setSelectedId] = React.useState();\n        const [queryId, setQueryId] = React.useState();\n        const buttons = React.createElement(React.Fragment, null,\n            React.createElement(c.SlideFade, { in: true, offsetX: '-0.5rem', style: { position: 'absolute', top: 0, right: '-4em' } },\n                React.createElement(c.Button, { w: '3em', h: '3em', boxShadow: 'dark-lg', variant: undefined, onClick: disclosure.onClose },\n                    React.createElement(BsX, null))),\n            React.createElement(c.Box, { position: 'absolute', right: '0', bottom: '-4em' }, !!selectedId && React.createElement(c.Button, { h: '3em', rightIcon: React.createElement(BsCheck2All, null), onClick: () => {\n                    onSubmit && onSubmit(selectedId);\n                } }, `${deep.get(selectedId)}`)));\n        return React.createElement(go.On, { do: {\n                changed: (g, v, o) => o?.id && setSelectedId(o.id),\n            } },\n            React.createElement(c.Modal, { ref: disclosure.isOpen ? ref : null, closeOnOverlayClick: true, blockScrollOnMount: false, onClose: () => {\n                    disclosure.onClose();\n                    go.focus();\n                }, isOpen: disclosure.isOpen, portalProps: { containerRef: go.root().ref } },\n                React.createElement(c.ModalOverlay, null),\n                React.createElement(c.ModalContent, { w: '30em', maxW: '30em', h: '80vh', position: 'relative' },\n                    React.createElement(c.ModalHeader, null, \"Finder\"),\n                    React.createElement(c.ModalBody, { p: 0, w: '100%', h: '100%' },\n                        React.createElement(go.Provider, { linkId: Tree }, !!disclosure.isOpen && React.createElement(go.Handler, { initialId: initialId, initialHandlerId: initialHandlerId, startProps: startProps, handlerId: Tree, fullWidth: '30em', flex: '1', saveHistory: false, using: false }))),\n                    buttons)));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxDQUFDLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRTtJQUM5QixNQUFNLEVBQUUsR0FBRyxFQUFFLFdBQVcsRUFBRSxHQUFHLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0lBQ3ZELE1BQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUUvQixNQUFNLENBQUMsR0FBRyxPQUFPLENBQUMsa0JBQWtCLENBQUMsQ0FBQztJQUV0QyxNQUFNLEVBQUUsR0FBRyx1QkFBdUIsQ0FBQztJQUNuQyxNQUFNLEdBQUcsR0FBRyxtQ0FBbUMsQ0FBQztJQUVoRCxNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUUsRUFBRSxPQUFPLENBQUMsQ0FBQztJQUN4QyxNQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUUsRUFBRSxTQUFTLENBQUMsQ0FBQztJQUM1QyxNQUFNLFdBQVcsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxhQUFhLENBQUMsQ0FBQztJQUNyRCxNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxNQUFNLENBQUMsQ0FBQztJQUN2QyxNQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxRQUFRLENBQUMsQ0FBQztJQUUzQyxPQUFPLENBQUMsRUFDTixFQUFFLEVBRUYsU0FBUyxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQ3ZCLGdCQUFnQixFQUNoQixVQUFVLEdBQUcsRUFBRSxFQUNmLFFBQVEsRUFDUixRQUFRLEVBQ1IsVUFBVSxFQUFFLFlBQVksR0FDekIsRUFBRSxHQUFHLEVBQUUsRUFBRTtRQUNSLE1BQU0sV0FBVyxHQUFHLENBQUMs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QUFFLElBQUksRUFDZixTQUFTLEVBQUMsTUFBTSxFQUFDLElBQUksRUFBQyxHQUFHLEVBQ3pCLFdBQVcsRUFBRSxLQUFLLEVBQ2xCLEtBQUssRUFBRSxLQUFLLEdBQ1osQ0FDVSxDQUNGO29CQUNiLE9BQU8sQ0FDTyxDQUNULENBQ0osQ0FBQztJQUNYLENBQUMsQ0FBQztBQUNKLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbIih7IGRlZXAsIGRhdGEsIHJlcXVpcmUsIEdvIH0pID0+IHtcbiAgY29uc3QgeyBCc1gsIEJzQ2hlY2syQWxsIH0gPSByZXF1aXJlKFwicmVhY3QtaWNvbnMvYnNcIik7XG4gIGNvbnN0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbiAgXG4gIGNvbnN0IGMgPSByZXF1aXJlKCdAY2hha3JhLXVpL3JlYWN0Jyk7XG5cbiAgY29uc3QgZGMgPSAnQGRlZXAtZm91bmRhdGlvbi9jb3JlJztcbiAgY29uc3QgZHBsID0gJ0BkZWVwLWZvdW5kYXRpb24vcGVyY2VwdGlvbi1saW5rcyc7XG4gIFxuICBjb25zdCBRdWVyeSA9IGRlZXAuaWRMb2NhbChkYywgJ1F1ZXJ5Jyk7XG4gIGNvbnN0IENvbnRhaW4gPSBkZWVwLmlkTG9jYWwoZGMsICdDb250YWluJyk7XG4gIGNvbnN0IEZpbmRlclF1ZXJ5ID0gZGVlcC5pZExvY2FsKGRwbCwgJ0ZpbmRlclF1ZXJ5Jyk7XG4gIGNvbnN0IFRyZWUgPSBkZWVwLmlkTG9jYWwoZHBsLCAnVHJlZScpO1xuICBjb25zdCBTZWFyY2ggPSBkZWVwLmlkTG9jYWwoZHBsLCAnU2VhcmNoJyk7XG5cbiAgcmV0dXJuICh7XG4gICAgZ28sXG5cbiAgICBpbml0aWFsSWQgPSBkZWVwLmxpbmtJZCxcbiAgICBpbml0aWFsSGFuZGxlcklkLFxuICAgIHN0YXJ0UHJvcHMgPSB7fSxcbiAgICBpc0FjdGl2ZSxcbiAgICBvblN1Ym1pdCxcbiAgICBkaXNjbG9zdXJlOiBfX2Rpc2Nsb3N1cmUsXG4gIH0sIHJlZikgPT4ge1xuICAgIGNvbnN0IF9kaXNjbG9zdXJlID0gYy51c2VEaXNjbG9zdXJlKCk7XG4gICAgY29uc3QgZGlzY2xvc3VyZSA9IF9fZGlzY2xvc3VyZSB8fCBfZGlzY2xvc3VyZTtcblxuICAgIGNvbnN0IFtzZWxlY3RlZElkLCBzZXRTZWxlY3RlZElkXSA9IFJlYWN0LnVzZVN0YXRlKCk7XG4gICAgY29uc3QgW3F1ZXJ5SWQsIHNldFF1ZXJ5SWRdID0gUmVhY3QudXNlU3RhdGUoKTtcblxuICAgIGNvbnN0IGJ1dHRvbnMgPSA8PlxuICAgICAgPGMuU2xpZGVGYWRlIGluPXt0cnVlfSBvZmZzZXRYPSctMC41cmVtJyBzdHlsZT17e3Bvc2l0aW9uOiAnYWJzb2x1dGUnLCB0b3A6IDAsIHJpZ2h0OiAnLTRlbSd9fT5cbiAgICAgICAgPGMuQnV0dG9uXG4gICAgICAgICAgdz0nM2VtJyBoPSczZW0nXG4gICAgICAgICAgYm94U2hhZG93PSdkYXJrLWxnJ1xuICAgICAgICAgIHZhcmlhbnQ9e3VuZGVmaW5lZH1cbiAgICAgICAgICBvbkNsaWNrPXtkaXNjbG9zdXJlLm9uQ2xvc2V9XG4gICAgICAgID48QnNYIC8+PC9jLkJ1dHRvbj5cbiAgICAgIDwvYy5TbGlkZUZhZGU+XG4gICAgICA8Yy5Cb3ggcG9zaXRpb249J2Fic29sdXRlJyByaWdodD0nMCcgYm90dG9tPSctNGVtJz5cbiAgICAgICAgeyEhc2VsZWN0ZWRJZCAmJiA8Yy5CdXR0b25cbiAgICAgICAgICBoPSczZW0nIHJpZ2h0SWNvbj17PEJzQ2hlY2syQWxsIC8+fVxuICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgIG9uU3VibWl0ICYmIG9uU3VibWl0KHNlbGVjdGVkSWQpO1xuICAgICAgICAgIH19XG4gICAgICAgID57YCR7ZGVlcC5nZXQoc2VsZWN0ZWRJZCl9YH08L2MuQnV0dG9uPlxuICAgICAgPC9jLkJveD5cbiAgICA8Lz47XG5cbiAgICByZXR1cm4gPGdvLk9uXG4gICAgICBkbz17e1xuICAgICAgICBjaGFuZ2VkOiAoZyx2LG8pID0+IG8/LmlkICYmIHNldFNlbGVjdGVkSWQoby5pZCksXG4gICAgICB9fVxuICAgID5cbiAgICAgIDxjLk1vZGFsXG4gICAgICAgIHJlZj17ZGlzY2xvc3VyZS5pc09wZW4gPyByZWYgOiBudWxsfVxuICAgICAgICBjbG9zZU9uT3ZlcmxheUNsaWNrIGJsb2NrU2Nyb2xsT25Nb3VudD17ZmFsc2V9XG4gICAgICAgIG9uQ2xvc2U9eygpID0+IHtcbiAgICAgICAgICBkaXNjbG9zdXJlLm9uQ2xvc2UoKTtcbiAgICAgICAgICBnby5mb2N1cygpO1xuICAgICAgICB9fVxuICAgICAgICBpc09wZW49e2Rpc2Nsb3N1cmUuaXNPcGVufSBwb3J0YWxQcm9wcz17eyBjb250YWluZXJSZWY6IGdvLnJvb3QoKS5yZWYgfX1cbiAgICAgID5cbiAgICAgICAgPGMuTW9kYWxPdmVybGF5IC8+XG4gICAgICAgIDxjLk1vZGFsQ29udGVudCB3PSczMGVtJyBtYXhXPSczMGVtJyBoPSc4MHZoJyBwb3NpdGlvbj0ncmVsYXRpdmUnPlxuICAgICAgICAgIDxjLk1vZGFsSGVhZGVyPkZpbmRlcjwvYy5Nb2RhbEhlYWRlcj5cbiAgICAgICAgICB7LyogPEJveCBwb3NpdGlvbj0nYWJzb2x1dGUnIGJvdHRvbT0nLTAuNWVtJyByaWdodD0nLTAuNWVtJyBib3hTaGFkb3c9J2RhcmstbGcnIHpJbmRleD17Mn0+XG4gICAgICAgICAgICB7ISFzZWxlY3RlZExpbmsgJiYgPExpbmtCdXR0b24gaWQ9e3NlbGVjdGVkTGluaz8uaWR9IG1heFc9JzEwMCUnLz59XG4gICAgICAgICAgPC9Cb3g+ICovfVxuICAgICAgICAgIDxjLk1vZGFsQm9keSBwPXswfSB3PScxMDAlJyBoPScxMDAlJz5cbiAgICAgICAgICAgIDxnby5Qcm92aWRlciBsaW5rSWQ9e1RyZWV9PlxuICAgICAgICAgICAgICB7ISFkaXNjbG9zdXJlLmlzT3BlbiAmJiA8Z28uSGFuZGxlclxuICAgICAgICAgICAgICAgIGluaXRpYWxJZD17aW5pdGlhbElkfVxuICAgICAgICAgICAgICAgIGluaXRpYWxIYW5kbGVySWQ9e2luaXRpYWxIYW5kbGVySWR9XG4gICAgICAgICAgICAgICAgc3RhcnRQcm9wcz17c3RhcnRQcm9wc31cbiAgICAgICAgICAgICAgICBoYW5kbGVySWQ9e1RyZWV9XG4gICAgICAgICAgICAgICAgZnVsbFdpZHRoPSczMGVtJyBmbGV4PScxJ1xuICAgICAgICAgICAgICAgIHNhdmVIaXN0b3J5PXtmYWxzZX1cbiAgICAgICAgICAgICAgICB1c2luZz17ZmFsc2V9XG4gICAgICAgICAgICAgIC8+fVxuICAgICAgICAgICAgPC9nby5Qcm92aWRlcj5cbiAgICAgICAgICA8L2MuTW9kYWxCb2R5PlxuICAgICAgICAgIHtidXR0b25zfVxuICAgICAgICA8L2MuTW9kYWxDb250ZW50PlxuICAgICAgPC9jLk1vZGFsPlxuICAgIDwvZ28uT24+O1xuICB9O1xufSJdfQ==",
          "link_id": 16541
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 16677,
      "src_id": 16671,
      "handler_id": 16675,
      "execution_provider_id": 33,
      "isolation_provider_id": 144,
      "dist": {
        "id": 16677,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 1639,
          "value": "({ deep, data, require, Go }) => {\n    const React = require('react');\n    const _ = require('lodash');\n    const c = require('@chakra-ui/react');\n    const dc = '@deep-foundation/core';\n    const dpl = '@deep-foundation/perception-links';\n    const FinderButton = deep.idLocal(dpl, 'FinderButton');\n    return ({ go, placeholder = '', value, onChange, leftIcon, children, }, ref) => {\n        const link = React.useMemo(() => {\n            return typeof (+value) === 'number' && !_.isNaN(+value)\n                ? deep.get(+value)\n                : undefined;\n        }, [value]);\n        return React.createElement(go.On, { do: {} },\n            React.createElement(c.InputGroup, { position: 'relative' },\n                !!leftIcon && React.createElement(c.InputLeftElement, { h: '3em', w: '3em', minW: '3em' }, leftIcon),\n                React.createElement(c.Input, { placeholder: placeholder, value: value, onChange: (e) => onChange && onChange(e.target.value), h: '3em', pl: leftIcon ? '3em' : 0, pr: '3em', pt: link ? '0.25em' : undefined }),\n                !!link && React.createElement(c.Text, { position: 'absolute', left: leftIcon ? '4em' : '1em', bottom: '0.25em', pointerEvents: 'none', fontSize: 'xs', noOfLines: 1 }, `${link.symbol} ${link.name != link.id ? link.name : link.id}`),\n                React.createElement(c.InputRightElement, { h: '3em' },\n                    React.createElement(go.Provider, { linkId: FinderButton, on: {\n                            do: {\n                                open: (g, v, o) => {\n                                    if (o?.id)\n                                        onChange && onChange(o?.id);\n                                },\n                            }\n                        } },\n                        React.createElement(go.Handler, { handlerId: FinderButton, bg: 'transparent', isActive: go.value === FinderButton })))));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxDQUFDLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRTtJQUM5QixNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7SUFFL0IsTUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQzVCLE1BQU0sQ0FBQyxHQUFHLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBRXRDLE1BQU0sRUFBRSxHQUFHLHVCQUF1QixDQUFDO0lBQ25DLE1BQU0sR0FBRyxHQUFHLG1DQUFtQyxDQUFDO0lBRWhELE1BQU0sWUFBWSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLGNBQWMsQ0FBQyxDQUFDO0lBRXZELE9BQU8sQ0FBQyxFQUNOLEVBQUUsRUFFRixXQUFXLEdBQUcsRUFBRSxFQUNoQixLQUFLLEVBQ0wsUUFBUSxFQUNSLFFBQVEsRUFDUixRQUFRLEdBQ1QsRUFBRSxHQUFHLEVBQUUsRUFBRTtRQUNSLE1BQU0sSUFBSSxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFO1lBQzlCLE9BQU8sT0FBTSxDQUFDLENBQUMsS0FBSyxDQUFDLEtBQUssUUFBUSxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLEtBQUssQ0FBQztnQkFDcEQsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxLQUFLLENBQUM7Z0JBQ2xCLENBQUMsQ0FBQyxTQUFTLENBQUM7UUFDaEIsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztRQUNaLE9BQU8sb0JBQUMsRUFBRSxDQUFDLEVBQUUsSUFDWCxFQUFFLEVBQUUsRUFDSDtZQUVELG9CQUFDLENBQUMsQ0FBQyxVQUFVLElBQUMsUUFBUSxFQUFDLFVBQVU7Z0JBQzlCLENBQUMsQ0FBQyxRQUFRLElBQUksb0JBQUMsQ0FBQyxDQUFDLGdCQUFnQixJQUFDLENBQUMsRUFBQyxLQUFLLEVBQUMsQ0FBQyxFQUFDLEtBQUssRUFBQyxJQUFJLEVBQUMsS0FBSyxJQUMxRCxRQUFRLENBQ1U7Z0JBQ3JCLG9CQUFDLENBQUMsQ0FBQyxLQUFLLElBQ04sV0FBVyxFQUFFLFdBQVcsRUFDeEIsS0FBSyxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLFFBQVEsSUFBSSxRQUFRLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsRUFDbkUsQ0FBQyxFQUFDLEtBQUssRUFBQyxFQUFFLEVBQUUsUUFBUSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUMsS0FBSyxFQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsU0FBUyxHQUMxRTtnQkFDRCxDQUFDLENBQUMsSUFBSSxJQUFJLG9CQUFDLENBQUMsQ0FBQyxJQUFJLElBQ2hCLFFBQVEsRUFBQyxVQUFVLEVBQUMsSUFBSSxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLEVBQUUsTUFBTSxFQUFDLFFBQVEsRUFDbkUsYUFBYSxFQUFDLE1BQU0sRUFBQyxRQUFRLEVBQUMsSUFBSSxFQUNsQyxTQUFTLEVBQUUsQ0FBQyxJQUVYLEdBQUcsSUFBSSxDQUFDLE1BQU0sSUFBSSxJQUFJLENBQUMsSUFBSSxJQUFJLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FDeEQ7Z0JBQ1Qsb0JBQUMsQ0FBQyxDQUFDLGlCQUFpQixJQUFDLENBQUMsRUFBQyxLQUFLO29CQUMxQixvQkFBQyxFQUFFLENBQUMsUUFBUSxJQUFDLE1BQU0sRUFBRSxZQUFZLEVBQUUsRUFBRSxFQUFFOzRCQUNyQyxFQUFFLEVBQUU7Z0NBQ0YsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRTtvQ0FDZCxJQUFJLENBQUMsRUFBRSxFQUFFO3dDQUFFLFFBQVEsSUFBSSxRQUFRLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO2dDQUN6QyxDQUFDOzZCQUNGO3lCQUNGO3dCQUNDLG9CQUFDLEVBQUUsQ0FBQyxPQUFPLElBQUMsU0FBUyxFQUFFLFlBQVksRUFBRSxFQUFFLEVBQUMsYUFBYSxFQUFDLFFBQVEsRUFBRSxFQUFFLENBQUMsS0FBSyxLQUFLLFlBQVksR0FBRyxDQUNoRixDQUNNLENBQ1QsQ0FDVCxDQUFDO0lBQ1gsQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiKHsgZGVlcCwgZGF0YSwgcmVxdWlyZSwgR28gfSkgPT4ge1xuICBjb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG4gIFxuICBjb25zdCBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XG4gIGNvbnN0IGMgPSByZXF1aXJlKCdAY2hha3JhLXVpL3JlYWN0Jyk7XG5cbiAgY29uc3QgZGMgPSAnQGRlZXAtZm91bmRhdGlvbi9jb3JlJztcbiAgY29uc3QgZHBsID0gJ0BkZWVwLWZvdW5kYXRpb24vcGVyY2VwdGlvbi1saW5rcyc7XG5cbiAgY29uc3QgRmluZGVyQnV0dG9uID0gZGVlcC5pZExvY2FsKGRwbCwgJ0ZpbmRlckJ1dHRvbicpO1xuXG4gIHJldHVybiAoe1xuICAgIGdvLFxuXG4gICAgcGxhY2Vob2xkZXIgPSAnJyxcbiAgICB2YWx1ZSxcbiAgICBvbkNoYW5nZSxcbiAgICBsZWZ0SWNvbixcbiAgICBjaGlsZHJlbixcbiAgfSwgcmVmKSA9PiB7XG4gICAgY29uc3QgbGluayA9IFJlYWN0LnVzZU1lbW8oKCkgPT4ge1xuICAgICAgcmV0dXJuIHR5cGVvZigrdmFsdWUpID09PSAnbnVtYmVyJyAmJiAhXy5pc05hTigrdmFsdWUpXG4gICAgICAgID8gZGVlcC5nZXQoK3ZhbHVlKVxuICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICB9LCBbdmFsdWVdKTtcbiAgICByZXR1cm4gPGdvLk9uXG4gICAgICBkbz17e1xuICAgICAgfX1cbiAgICA+XG4gICAgICA8Yy5JbnB1dEdyb3VwIHBvc2l0aW9uPSdyZWxhdGl2ZSc+XG4gICAgICAgIHshIWxlZnRJY29uICYmIDxjLklucHV0TGVmdEVsZW1lbnQgaD0nM2VtJyB3PSczZW0nIG1pblc9JzNlbSc+XG4gICAgICAgICAge2xlZnRJY29ufVxuICAgICAgICA8L2MuSW5wdXRMZWZ0RWxlbWVudD59XG4gICAgICAgIDxjLklucHV0XG4gICAgICAgICAgcGxhY2Vob2xkZXI9e3BsYWNlaG9sZGVyfVxuICAgICAgICAgIHZhbHVlPXt2YWx1ZX0gb25DaGFuZ2U9eyhlKSA9PiBvbkNoYW5nZSAmJiBvbkNoYW5nZShlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgaD0nM2VtJyBwbD17bGVmdEljb24gPyAnM2VtJyA6IDB9IHByPSczZW0nIHB0PXtsaW5rID8gJzAuMjVlbScgOiB1bmRlZmluZWR9XG4gICAgICAgIC8+XG4gICAgICAgIHshIWxpbmsgJiYgPGMuVGV4dFxuICAgICAgICAgIHBvc2l0aW9uPSdhYnNvbHV0ZScgbGVmdD17bGVmdEljb24gPyAnNGVtJyA6ICcxZW0nfSBib3R0b209JzAuMjVlbSdcbiAgICAgICAgICBwb2ludGVyRXZlbnRzPSdub25lJyBmb250U2l6ZT0neHMnXG4gICAgICAgICAgbm9PZkxpbmVzPXsxfVxuICAgICAgICA+XG4gICAgICAgICAge2Ake2xpbmsuc3ltYm9sfSAke2xpbmsubmFtZSAhPSBsaW5rLmlkID8gbGluay5uYW1lIDogbGluay5pZH1gfVxuICAgICAgICA8L2MuVGV4dD59XG4gICAgICAgIDxjLklucHV0UmlnaHRFbGVtZW50IGg9JzNlbSc+XG4gICAgICAgICAgPGdvLlByb3ZpZGVyIGxpbmtJZD17RmluZGVyQnV0dG9ufSBvbj17e1xuICAgICAgICAgICAgZG86IHtcbiAgICAgICAgICAgICAgb3BlbjogKGcsdixvKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKG8/LmlkKSBvbkNoYW5nZSAmJiBvbkNoYW5nZShvPy5pZCk7XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfX0+XG4gICAgICAgICAgICA8Z28uSGFuZGxlciBoYW5kbGVySWQ9e0ZpbmRlckJ1dHRvbn0gYmc9J3RyYW5zcGFyZW50JyBpc0FjdGl2ZT17Z28udmFsdWUgPT09IEZpbmRlckJ1dHRvbn0vPlxuICAgICAgICAgIDwvZ28uUHJvdmlkZXI+XG4gICAgICAgIDwvYy5JbnB1dFJpZ2h0RWxlbWVudD5cbiAgICAgIDwvYy5JbnB1dEdyb3VwPlxuICAgIDwvZ28uT24+O1xuICB9O1xufSJdfQ==",
          "link_id": 16677
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 17040,
      "src_id": 17034,
      "handler_id": 17038,
      "execution_provider_id": 33,
      "isolation_provider_id": 144,
      "dist": {
        "id": 17040,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 1649,
          "value": "({ deep, data, require, Go }) => {\n    const React = require('react');\n    const c = require('@chakra-ui/react');\n    return ({ go, id, ...props }, ref) => {\n        const { cy } = go.useGraph();\n        const data = { id: `${id}`, label: `${id}` };\n        const classes = ['link-ghost'];\n        return React.createElement(go.GraphNode, { ghost: true, element: {\n                data, classes,\n            }, ...props });\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxDQUFDLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRTtJQUM5QixNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7SUFFL0IsTUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLGtCQUFrQixDQUFDLENBQUM7SUFFdEMsT0FBTyxDQUFDLEVBQ04sRUFBRSxFQUNGLEVBQUUsRUFFRixHQUFHLEtBQUssRUFDVCxFQUFFLEdBQUcsRUFBRSxFQUFFO1FBQ1IsTUFBTSxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsQ0FBQyxRQUFRLEVBQUUsQ0FBQztRQUM3QixNQUFNLElBQUksR0FBRyxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsRUFBRSxFQUFFLEtBQUssRUFBRSxHQUFHLEVBQUUsRUFBRSxFQUFFLENBQUM7UUFDN0MsTUFBTSxPQUFPLEdBQUcsQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUMvQixPQUFPLG9CQUFDLEVBQUUsQ0FBQyxTQUFTLElBQ2xCLEtBQUssUUFDTCxPQUFPLEVBQUU7Z0JBQ1AsSUFBSSxFQUFFLE9BQU87YUFDZCxLQUNHLEtBQUssR0FDVCxDQUFDO0lBQ0wsQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiKHsgZGVlcCwgZGF0YSwgcmVxdWlyZSwgR28gfSkgPT4ge1xuICBjb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG4gIFxuICBjb25zdCBjID0gcmVxdWlyZSgnQGNoYWtyYS11aS9yZWFjdCcpO1xuXG4gIHJldHVybiAoe1xuICAgIGdvLFxuICAgIGlkLFxuXG4gICAgLi4ucHJvcHNcbiAgfSwgcmVmKSA9PiB7XG4gICAgY29uc3QgeyBjeSB9ID0gZ28udXNlR3JhcGgoKTtcbiAgICBjb25zdCBkYXRhID0geyBpZDogYCR7aWR9YCwgbGFiZWw6IGAke2lkfWAgfTtcbiAgICBjb25zdCBjbGFzc2VzID0gWydsaW5rLWdob3N0J107XG4gICAgcmV0dXJuIDxnby5HcmFwaE5vZGVcbiAgICAgIGdob3N0XG4gICAgICBlbGVtZW50PXt7XG4gICAgICAgIGRhdGEsIGNsYXNzZXMsXG4gICAgICB9fVxuICAgICAgey4uLnByb3BzfVxuICAgIC8+O1xuICB9O1xufSJdfQ==",
          "link_id": 17040
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 18274,
      "src_id": 18261,
      "handler_id": 18269,
      "execution_provider_id": 33,
      "isolation_provider_id": 144,
      "dist": {
        "id": 18274,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 1690,
          "value": "async ({ deep, data, Go, require }) => {\n    const React = require('react');\n    const { LuChevronLast, LuChevronFirst } = require(\"react-icons/lu\");\n    const { IoInfiniteSharp } = require(\"react-icons/io5\");\n    const { Planet } = require('react-planet');\n    const c = require('@chakra-ui/react');\n    const { TypedIcon, DownIcon, UpIcon, TypeIcon, InIcon, OutIcon, FromIcon, ToIcon, } = require('@deep-foundation/perception-app');\n    const dpl = '@deep-foundation/perception-links';\n    const TreeList = deep.idLocal(dpl, 'TreeList');\n    const PlanetRelations = await deep.id(dpl, 'PlanetRelations');\n    const PlanetOperations = await deep.id(dpl, 'PlanetOperations');\n    return ({ go, linkId, deleteDisclosure: _deleteDisclosure, finderDisclosure: _finderDisclosure, isActive = false, }, ref) => {\n        const { cy } = go.useGraph();\n        const link = React.useMemo(() => deep.get(linkId), []);\n        const __deleteDisclosure = c.useDisclosure();\n        const deleteDisclosure = _deleteDisclosure || __deleteDisclosure;\n        const __finderDisclosure = c.useDisclosure();\n        const finderDisclosure = _finderDisclosure || __finderDisclosure;\n        const [mode, setMode] = React.useState('current');\n        const nav = go.useNav();\n        nav('current', PlanetRelations, PlanetRelations, PlanetRelations, PlanetRelations);\n        nav(PlanetRelations, PlanetRelations, PlanetOperations, PlanetRelations, 'current');\n        nav(PlanetOperations, PlanetOperations, 'up', PlanetOperations, PlanetRelations);\n        return React.createElement(go.On, { do: {\n                exec: (g, v, o) => {\n                    if (o?.mode)\n                        setMode(mode === o.mode ? 'current' : o.mode);\n                    if (go.value === 'current')\n                        go.do(go.value);\n                },\n                focus: (g, d, v, o) => !v && go.set('current'),\n                up: (g, v, o) => go.focus(nav.get(go.value, 'up'), { position: 0.5, ...o }),\n                down: (g, v, o) => go.focus(nav.get(go.value, 'down'), { position: 0, ...o }),\n                left: (g, v, o) => go.focus(nav.get(go.value, 'left'), { position: 0.25 }),\n                right: (g, v, o) => go.focus(nav.get(go.value, 'right'), { position: 0.75 }),\n                current: (g, v, o) => go.go.do('exec'),\n            }, focus: {\n                up: (g, v, o) => go.root().do('up'),\n            } },\n            React.createElement(c.Box, { position: 'relative', top: '0', left: '0', w: '0', h: '0' },\n                React.createElement(go.Provider, { linkId: PlanetRelations },\n                    React.createElement(go.Component, { path: [dpl, 'PlanetRelations'], isActive: isActive, linkId: linkId })),\n                React.createElement(go.Provider, { linkId: PlanetOperations },\n                    React.createElement(go.Component, { path: [dpl, 'PlanetOperations'], isActive: isActive, linkId: linkId })),\n                !!isActive && React.createElement(c.Button, { variant: go.value === 'current' ? 'planetActive' : 'planet', position: 'absolute', left: '-1.5em', top: '-1.5em', onClick: () => go.focus('current').go.do('current') })));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFO0lBQ3BDLE1BQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUMvQixNQUFNLEVBQUUsYUFBYSxFQUFFLGNBQWMsRUFBRSxHQUFHLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0lBQ3BFLE1BQU0sRUFBRSxlQUFlLEVBQUUsR0FBRyxPQUFPLENBQUMsaUJBQWlCLENBQUMsQ0FBQztJQUN2RCxNQUFNLEVBQUUsTUFBTSxFQUFFLEdBQUcsT0FBTyxDQUFDLGNBQWMsQ0FBQyxDQUFDO0lBQzNDLE1BQU0sQ0FBQyxHQUFHLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBRXRDLE1BQU0sRUFDSixTQUFTLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxHQUN6RSxHQUFHLE9BQU8sQ0FBQyxpQ0FBaUMsQ0FBQyxDQUFDO0lBRS9DLE1BQU0sR0FBRyxHQUFHLG1DQUFtQyxDQUFDO0lBRWhELE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLFVBQVUsQ0FBQyxDQUFDO0lBQy9DLE1BQU0sZUFBZSxHQUFHLE1BQU0sSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsaUJBQWlCLENBQUMsQ0FBQztJQUM5RCxNQUFNLGdCQUFnQixHQUFHLE1BQU0sSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsa0JBQWtCLENBQUMsQ0FBQztJQUVoRSxPQUFPLENBQUMsRUFDTixFQUFFLEVBRUYsTUFBTSxFQUNOLGdCQUFnQixFQUFFLGlCQUFpQixFQUNuQyxnQkFBZ0IsRUFBRSxpQkFBaUIsRUFFbkMsUUFBUSxHQUFHLEtBQUssR0FDakIsRUFBRSxHQUFHLEVBQUUsRUFBRTtRQUNSLE1BQU0sRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLENBQUMsUUFBUSxFQUFFLENBQUM7UUFFN0IsTUFBTSxJQUFJLEdBQUcsS0FBSyxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBRXZELE1BQU0sa0JBQWtCLEdBQUcsQ0FBQyxDQUFDLGFBQWEsRUFBRSxDQUFDO1FBQzdDLE1BQU0sZ0JBQWdCLEdBQUcsaUJBQWlCLElBQUksa0JBQWtCLENBQUM7UUFFakUsTUFBTSxrQkFBa0IsR0FBRyxDQUFDLENBQUMsYUFBYSxFQUFFLENBQUM7UUFDN0MsTUFBTSxnQkFBZ0IsR0FBRyxpQkFBaUIsSUFBSSxrQkFBa0IsQ0FBQztRQUVqRSxNQUFNLENBQUMsSUFBSSxFQUFFLE9BQU8sQ0FBQyxHQUFHLEtBQUssQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLENBQUM7UUFFbEQsTUFBTSxHQUFHLEdBQUcsRUFBRSxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBQ3hCLEdBQUcsQ0FBQyxTQUFTLEVBQUUsZUFBZSxFQUFFLGVBQWUsRUFBRSxlQUFlLEVBQUUsZUFBZSxDQUFDLENBQUM7UUFDbkYsR0FBRyxDQUFDLGVBQWUsRUFBRSxlQUFlLEVBQUUsZ0JBQWdCLEVBQUUsZUFBZSxFQUFFLFNBQVMsQ0FBQyxDQUFDO1FBQ3BGLEdBQUcsQ0FBQyxnQkFBZ0IsRUFBRSxnQkFBZ0IsRUFBRSxJQUFJLEVBQUUsZ0JBQWdCLEVBQUUsZUFBZSxDQUFDLENBQUM7UUFFakYsT0FBTyxvQkFBQyxFQUFFLENBQUMsRUFBRSxJQUFDLEVBQUUsRUFBRTtnQkFDaEIsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRTtvQkFDZCxJQUFJLENBQUMsRUFBRSxJQUFJO3dCQUFFLE9BQU8sQ0FBQyxJQUFJLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUM7b0JBQzNELElBQUksRUFBRSxDQUFDLEtBQUssS0FBSyxTQUFTO3dCQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUM5QyxDQUFDO2dCQUNELEtBQUssRUFBRSxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUM7Z0JBQzNDLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFLFFBQVEsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDLEVBQUUsQ0FBQztnQkFDekUsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxFQUFFLEVBQUUsUUFBUSxFQUFFLENBQUMsRUFBRSxHQUFHLENBQUMsRUFBRSxDQUFDO2dCQUMzRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLEVBQUUsRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLENBQUM7Z0JBQ3hFLEtBQUssRUFBRSxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRSxPQUFPLENBQUMsRUFBRSxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQztnQkFDMUUsT0FBTyxFQUFFLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQzthQUNyQyxFQUFFLEtBQUssRUFBRTtnQkFDUixFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUM7YUFDbEM7WUFDQyxvQkFBQyxDQUFDLENBQUMsR0FBRyxJQUFDLFFBQVEsRUFBQyxVQUFVLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxJQUFJLEVBQUMsR0FBRyxFQUFDLENBQUMsRUFBQyxHQUFHLEVBQUMsQ0FBQyxFQUFDLEdBQUc7Z0JBQ3JELG9CQUFDLEVBQUUsQ0FBQyxRQUFRLElBQUMsTUFBTSxFQUFFLGVBQWU7b0JBQ2xDLG9CQUFDLEVBQUUsQ0FBQyxTQUFTLElBQUMsSUFBSSxFQUFFLENBQUMsR0FBRyxFQUFFLGlCQUFpQixDQUFDLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsTUFBTSxHQUFHLENBQ3ZFO2dCQUNkLG9CQUFDLEVBQUUsQ0FBQyxRQUFRLElBQUMsTUFBTSxFQUFFLGdCQUFnQjtvQkFDbkMsb0JBQUMsRUFBRSxDQUFDLFNBQVMsSUFBQyxJQUFJLEVBQUUsQ0FBQyxHQUFHLEVBQUUsa0JBQWtCLENBQUMsRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBRSxNQUFNLEdBQUcsQ0FDeEU7Z0JBQ2IsQ0FBQyxDQUFDLFFBQVEsSUFBSSxvQkFBQyxDQUFDLENBQUMsTUFBTSxJQUN0QixPQUFPLEVBQUUsRUFBRSxDQUFDLEtBQUssS0FBSyxTQUFTLENBQUMsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsUUFBUSxFQUMzRCxRQUFRLEVBQUMsVUFBVSxFQUFDLElBQUksRUFBQyxRQUFRLEVBQUMsR0FBRyxFQUFDLFFBQVEsRUFDOUMsT0FBTyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxTQUFTLENBQUMsR0FDekMsQ0FDTixDQUNGLENBQUM7SUFDWCxDQUFDLENBQUM7QUFDSixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJhc3luYyAoeyBkZWVwLCBkYXRhLCBHbywgcmVxdWlyZSB9KSA9PiB7XG4gIGNvbnN0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbiAgY29uc3QgeyBMdUNoZXZyb25MYXN0LCBMdUNoZXZyb25GaXJzdCB9ID0gcmVxdWlyZShcInJlYWN0LWljb25zL2x1XCIpO1xuICBjb25zdCB7IElvSW5maW5pdGVTaGFycCB9ID0gcmVxdWlyZShcInJlYWN0LWljb25zL2lvNVwiKTtcbiAgY29uc3QgeyBQbGFuZXQgfSA9IHJlcXVpcmUoJ3JlYWN0LXBsYW5ldCcpO1xuICBjb25zdCBjID0gcmVxdWlyZSgnQGNoYWtyYS11aS9yZWFjdCcpO1xuXG4gIGNvbnN0IHtcbiAgICBUeXBlZEljb24sIERvd25JY29uLCBVcEljb24sIFR5cGVJY29uLCBJbkljb24sIE91dEljb24sIEZyb21JY29uLCBUb0ljb24sXG4gIH0gPSByZXF1aXJlKCdAZGVlcC1mb3VuZGF0aW9uL3BlcmNlcHRpb24tYXBwJyk7XG5cbiAgY29uc3QgZHBsID0gJ0BkZWVwLWZvdW5kYXRpb24vcGVyY2VwdGlvbi1saW5rcyc7XG5cbiAgY29uc3QgVHJlZUxpc3QgPSBkZWVwLmlkTG9jYWwoZHBsLCAnVHJlZUxpc3QnKTtcbiAgY29uc3QgUGxhbmV0UmVsYXRpb25zID0gYXdhaXQgZGVlcC5pZChkcGwsICdQbGFuZXRSZWxhdGlvbnMnKTtcbiAgY29uc3QgUGxhbmV0T3BlcmF0aW9ucyA9IGF3YWl0IGRlZXAuaWQoZHBsLCAnUGxhbmV0T3BlcmF0aW9ucycpO1xuXG4gIHJldHVybiAoe1xuICAgIGdvLFxuXG4gICAgbGlua0lkLFxuICAgIGRlbGV0ZURpc2Nsb3N1cmU6IF9kZWxldGVEaXNjbG9zdXJlLFxuICAgIGZpbmRlckRpc2Nsb3N1cmU6IF9maW5kZXJEaXNjbG9zdXJlLFxuXG4gICAgaXNBY3RpdmUgPSBmYWxzZSxcbiAgfSwgcmVmKSA9PiB7XG4gICAgY29uc3QgeyBjeSB9ID0gZ28udXNlR3JhcGgoKTtcblxuICAgIGNvbnN0IGxpbmsgPSBSZWFjdC51c2VNZW1vKCgpID0+IGRlZXAuZ2V0KGxpbmtJZCksIFtdKTtcblxuICAgIGNvbnN0IF9fZGVsZXRlRGlzY2xvc3VyZSA9IGMudXNlRGlzY2xvc3VyZSgpO1xuICAgIGNvbnN0IGRlbGV0ZURpc2Nsb3N1cmUgPSBfZGVsZXRlRGlzY2xvc3VyZSB8fCBfX2RlbGV0ZURpc2Nsb3N1cmU7XG5cbiAgICBjb25zdCBfX2ZpbmRlckRpc2Nsb3N1cmUgPSBjLnVzZURpc2Nsb3N1cmUoKTtcbiAgICBjb25zdCBmaW5kZXJEaXNjbG9zdXJlID0gX2ZpbmRlckRpc2Nsb3N1cmUgfHwgX19maW5kZXJEaXNjbG9zdXJlO1xuXG4gICAgY29uc3QgW21vZGUsIHNldE1vZGVdID0gUmVhY3QudXNlU3RhdGUoJ2N1cnJlbnQnKTtcblxuICAgIGNvbnN0IG5hdiA9IGdvLnVzZU5hdigpO1xuICAgIG5hdignY3VycmVudCcsIFBsYW5ldFJlbGF0aW9ucywgUGxhbmV0UmVsYXRpb25zLCBQbGFuZXRSZWxhdGlvbnMsIFBsYW5ldFJlbGF0aW9ucyk7XG4gICAgbmF2KFBsYW5ldFJlbGF0aW9ucywgUGxhbmV0UmVsYXRpb25zLCBQbGFuZXRPcGVyYXRpb25zLCBQbGFuZXRSZWxhdGlvbnMsICdjdXJyZW50Jyk7XG4gICAgbmF2KFBsYW5ldE9wZXJhdGlvbnMsIFBsYW5ldE9wZXJhdGlvbnMsICd1cCcsIFBsYW5ldE9wZXJhdGlvbnMsIFBsYW5ldFJlbGF0aW9ucyk7XG5cbiAgICByZXR1cm4gPGdvLk9uIGRvPXt7XG4gICAgICBleGVjOiAoZyx2LG8pID0+IHtcbiAgICAgICAgaWYgKG8/Lm1vZGUpIHNldE1vZGUobW9kZSA9PT0gby5tb2RlID8gJ2N1cnJlbnQnIDogby5tb2RlKTtcbiAgICAgICAgaWYgKGdvLnZhbHVlID09PSAnY3VycmVudCcpIGdvLmRvKGdvLnZhbHVlKTtcbiAgICAgIH0sXG4gICAgICBmb2N1czogKGcsZCx2LG8pID0+ICF2ICYmIGdvLnNldCgnY3VycmVudCcpLFxuICAgICAgdXA6IChnLHYsbykgPT4gZ28uZm9jdXMobmF2LmdldChnby52YWx1ZSwgJ3VwJyksIHsgcG9zaXRpb246IDAuNSwgLi4ubyB9KSxcbiAgICAgIGRvd246IChnLHYsbykgPT4gZ28uZm9jdXMobmF2LmdldChnby52YWx1ZSwgJ2Rvd24nKSwgeyBwb3NpdGlvbjogMCwgLi4ubyB9KSxcbiAgICAgIGxlZnQ6IChnLHYsbykgPT4gZ28uZm9jdXMobmF2LmdldChnby52YWx1ZSwgJ2xlZnQnKSwgeyBwb3NpdGlvbjogMC4yNSB9KSxcbiAgICAgIHJpZ2h0OiAoZyx2LG8pID0+IGdvLmZvY3VzKG5hdi5nZXQoZ28udmFsdWUsICdyaWdodCcpLCB7IHBvc2l0aW9uOiAwLjc1IH0pLFxuICAgICAgY3VycmVudDogKGcsdixvKSA9PiBnby5nby5kbygnZXhlYycpLFxuICAgIH19IGZvY3VzPXt7XG4gICAgICB1cDogKGcsdixvKSA9PiBnby5yb290KCkuZG8oJ3VwJyksXG4gICAgfX0+XG4gICAgICA8Yy5Cb3ggcG9zaXRpb249J3JlbGF0aXZlJyB0b3A9JzAnIGxlZnQ9JzAnIHc9JzAnIGg9JzAnPlxuICAgICAgICA8Z28uUHJvdmlkZXIgbGlua0lkPXtQbGFuZXRSZWxhdGlvbnN9PlxuICAgICAgICAgIDxnby5Db21wb25lbnQgcGF0aD17W2RwbCwgJ1BsYW5ldFJlbGF0aW9ucyddfSBpc0FjdGl2ZT17aXNBY3RpdmV9IGxpbmtJZD17bGlua0lkfS8+XG4gICAgICAgIDwvZ28uUHJvdmlkZXI+XG4gICAgICAgIDxnby5Qcm92aWRlciBsaW5rSWQ9e1BsYW5ldE9wZXJhdGlvbnN9PlxuICAgICAgICAgIDxnby5Db21wb25lbnQgcGF0aD17W2RwbCwgJ1BsYW5ldE9wZXJhdGlvbnMnXX0gaXNBY3RpdmU9e2lzQWN0aXZlfSBsaW5rSWQ9e2xpbmtJZH0vPlxuICAgICAgICA8L2dvLlByb3ZpZGVyPlxuICAgICAgICB7ISFpc0FjdGl2ZSAmJiA8Yy5CdXR0b25cbiAgICAgICAgICB2YXJpYW50PXtnby52YWx1ZSA9PT0gJ2N1cnJlbnQnID8gJ3BsYW5ldEFjdGl2ZScgOiAncGxhbmV0J31cbiAgICAgICAgICBwb3NpdGlvbj0nYWJzb2x1dGUnIGxlZnQ9Jy0xLjVlbScgdG9wPSctMS41ZW0nXG4gICAgICAgICAgb25DbGljaz17KCkgPT4gZ28uZm9jdXMoJ2N1cnJlbnQnKS5nby5kbygnY3VycmVudCcpfVxuICAgICAgICA+PC9jLkJ1dHRvbj59XG4gICAgICA8L2MuQm94PlxuICAgIDwvZ28uT24+O1xuICB9O1xufSJdfQ==",
          "link_id": 18274
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 19137,
      "src_id": 19125,
      "handler_id": 19129,
      "execution_provider_id": 33,
      "isolation_provider_id": 144,
      "dist": {
        "id": 19137,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 1717,
          "value": "async ({ deep, data, require }) => {\n    const React = require('react');\n    const { GiBrain } = require(\"react-icons/gi\");\n    const c = require('@chakra-ui/react');\n    const dpl = '@deep-foundation/perception-links';\n    const dc = '@deep-foundation/core';\n    const Tree = deep.idLocal(dpl, 'Tree');\n    return ({ go, handlerId, isActive, }, ref) => {\n        return React.createElement(go.On, { do: {\n                exec: (g, v, o) => go.go.do('right', { ...o, id: Tree }),\n                click: (g, v, o) => go.do('exec', o),\n                right: (g, v, o) => go.do('exec', o),\n            } },\n            React.createElement(c.Button, { w: '3em', h: '3em', variant: isActive ? 'active' : undefined, ref: ref, onClick: () => go.do('exec') },\n                React.createElement(GiBrain, null)));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxFQUFFLEVBQUU7SUFDaEMsTUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQy9CLE1BQU0sRUFBRSxPQUFPLEVBQUUsR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztJQUM5QyxNQUFNLENBQUMsR0FBRyxPQUFPLENBQUMsa0JBQWtCLENBQUMsQ0FBQztJQUV0QyxNQUFNLEdBQUcsR0FBRyxtQ0FBbUMsQ0FBQztJQUNoRCxNQUFNLEVBQUUsR0FBRyx1QkFBdUIsQ0FBQztJQUVuQyxNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxNQUFNLENBQUMsQ0FBQztJQUV2QyxPQUFPLENBQUMsRUFDTixFQUFFLEVBQ0YsU0FBUyxFQUVULFFBQVEsR0FDVCxFQUFFLEdBQUcsRUFBRSxFQUFFO1FBQ1IsT0FBTyxvQkFBQyxFQUFFLENBQUMsRUFBRSxJQUFDLEVBQUUsRUFBRTtnQkFDaEIsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxFQUFFLEdBQUcsQ0FBQyxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsQ0FBQztnQkFDdEQsS0FBSyxFQUFFLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQztnQkFDbEMsS0FBSyxFQUFFLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQzthQUNuQztZQUNDLG9CQUFDLENBQUMsQ0FBQyxNQUFNLElBQ1AsQ0FBQyxFQUFDLEtBQUssRUFBQyxDQUFDLEVBQUMsS0FBSyxFQUNmLE9BQU8sRUFBRSxRQUFRLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUN4QyxHQUFHLEVBQUUsR0FBRyxFQUNSLE9BQU8sRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQztnQkFFNUIsb0JBQUMsT0FBTyxPQUFFLENBQ0QsQ0FDTCxDQUFDO0lBQ1gsQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiYXN5bmMgKHsgZGVlcCwgZGF0YSwgcmVxdWlyZSB9KSA9PiB7XG4gIGNvbnN0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbiAgY29uc3QgeyBHaUJyYWluIH0gPSByZXF1aXJlKFwicmVhY3QtaWNvbnMvZ2lcIik7XG4gIGNvbnN0IGMgPSByZXF1aXJlKCdAY2hha3JhLXVpL3JlYWN0Jyk7XG5cbiAgY29uc3QgZHBsID0gJ0BkZWVwLWZvdW5kYXRpb24vcGVyY2VwdGlvbi1saW5rcyc7XG4gIGNvbnN0IGRjID0gJ0BkZWVwLWZvdW5kYXRpb24vY29yZSc7XG5cbiAgY29uc3QgVHJlZSA9IGRlZXAuaWRMb2NhbChkcGwsICdUcmVlJyk7XG5cbiAgcmV0dXJuICh7XG4gICAgZ28sXG4gICAgaGFuZGxlcklkLFxuXG4gICAgaXNBY3RpdmUsXG4gIH0sIHJlZikgPT4ge1xuICAgIHJldHVybiA8Z28uT24gZG89e3tcbiAgICAgIGV4ZWM6IChnLHYsbykgPT4gZ28uZ28uZG8oJ3JpZ2h0JywgeyAuLi5vLCBpZDogVHJlZSB9KSksXG4gICAgICBjbGljazogKGcsdixvKSA9PiBnby5kbygnZXhlYycsIG8pLFxuICAgICAgcmlnaHQ6IChnLHYsbykgPT4gZ28uZG8oJ2V4ZWMnLCBvKSxcbiAgICB9fT5cbiAgICAgIDxjLkJ1dHRvblxuICAgICAgICB3PSczZW0nIGg9JzNlbSdcbiAgICAgICAgdmFyaWFudD17aXNBY3RpdmUgPyAnYWN0aXZlJyA6IHVuZGVmaW5lZH1cbiAgICAgICAgcmVmPXtyZWZ9XG4gICAgICAgIG9uQ2xpY2s9eygpID0+IGdvLmRvKCdleGVjJyl9XG4gICAgICA+XG4gICAgICAgIDxHaUJyYWluLz5cbiAgICAgIDwvYy5CdXR0b24+XG4gICAgPC9nby5Pbj47XG4gIH07XG59Il19",
          "link_id": 19137
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 19249,
      "src_id": 19243,
      "handler_id": 19247,
      "execution_provider_id": 33,
      "isolation_provider_id": 144,
      "dist": {
        "id": 19249,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 1727,
          "value": "async ({ deep, data, require }) => {\n    const React = require('react');\n    const { GiBrain } = require(\"react-icons/gi\");\n    const c = require('@chakra-ui/react');\n    const dpl = '@deep-foundation/perception-links';\n    const dml = '@deep-foundation/deepmemo-links';\n    const dc = '@deep-foundation/core';\n    const Memo = await deep.id(dml, 'Memo');\n    return ({ go, handlerId, isActive, }, ref) => {\n        return React.createElement(go.On, { do: {\n                exec: (g, v, o) => go.go.do('right', { ...o, id: Memo }),\n                click: (g, v, o) => go.do('exec', o),\n                right: (g, v, o) => go.do('exec', o),\n            } },\n            React.createElement(c.Button, { w: '3em', h: '3em', variant: isActive ? 'active' : undefined, ref: ref, onClick: () => go.do('exec') },\n                React.createElement(GiBrain, null)));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxFQUFFLEVBQUU7SUFDaEMsTUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQy9CLE1BQU0sRUFBRSxPQUFPLEVBQUUsR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztJQUM5QyxNQUFNLENBQUMsR0FBRyxPQUFPLENBQUMsa0JBQWtCLENBQUMsQ0FBQztJQUV0QyxNQUFNLEdBQUcsR0FBRyxtQ0FBbUMsQ0FBQztJQUNoRCxNQUFNLEdBQUcsR0FBRyxpQ0FBaUMsQ0FBQztJQUM5QyxNQUFNLEVBQUUsR0FBRyx1QkFBdUIsQ0FBQztJQUVuQyxNQUFNLElBQUksR0FBRyxNQUFNLElBQUksQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBRXhDLE9BQU8sQ0FBQyxFQUNOLEVBQUUsRUFDRixTQUFTLEVBRVQsUUFBUSxHQUNULEVBQUUsR0FBRyxFQUFFLEVBQUU7UUFDUixPQUFPLG9CQUFDLEVBQUUsQ0FBQyxFQUFFLElBQUMsRUFBRSxFQUFFO2dCQUNoQixJQUFJLEVBQUUsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLEVBQUUsR0FBRyxDQUFDLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxDQUFDO2dCQUN0RCxLQUFLLEVBQUUsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDO2dCQUNsQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDO2FBQ25DO1lBQ0Msb0JBQUMsQ0FBQyxDQUFDLE1BQU0sSUFDUCxDQUFDLEVBQUMsS0FBSyxFQUFDLENBQUMsRUFBQyxLQUFLLEVBQ2YsT0FBTyxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQ3hDLEdBQUcsRUFBRSxHQUFHLEVBQ1IsT0FBTyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDO2dCQUU1QixvQkFBQyxPQUFPLE9BQUUsQ0FDRCxDQUNMLENBQUM7SUFDWCxDQUFDLENBQUM7QUFDSixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJhc3luYyAoeyBkZWVwLCBkYXRhLCByZXF1aXJlIH0pID0+IHtcbiAgY29uc3QgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuICBjb25zdCB7IEdpQnJhaW4gfSA9IHJlcXVpcmUoXCJyZWFjdC1pY29ucy9naVwiKTtcbiAgY29uc3QgYyA9IHJlcXVpcmUoJ0BjaGFrcmEtdWkvcmVhY3QnKTtcblxuICBjb25zdCBkcGwgPSAnQGRlZXAtZm91bmRhdGlvbi9wZXJjZXB0aW9uLWxpbmtzJztcbiAgY29uc3QgZG1sID0gJ0BkZWVwLWZvdW5kYXRpb24vZGVlcG1lbW8tbGlua3MnO1xuICBjb25zdCBkYyA9ICdAZGVlcC1mb3VuZGF0aW9uL2NvcmUnO1xuXG4gIGNvbnN0IE1lbW8gPSBhd2FpdCBkZWVwLmlkKGRtbCwgJ01lbW8nKTtcblxuICByZXR1cm4gKHtcbiAgICBnbyxcbiAgICBoYW5kbGVySWQsXG5cbiAgICBpc0FjdGl2ZSxcbiAgfSwgcmVmKSA9PiB7XG4gICAgcmV0dXJuIDxnby5PbiBkbz17e1xuICAgICAgZXhlYzogKGcsdixvKSA9PiBnby5nby5kbygncmlnaHQnLCB7IC4uLm8sIGlkOiBNZW1vIH0pKSxcbiAgICAgIGNsaWNrOiAoZyx2LG8pID0+IGdvLmRvKCdleGVjJywgbyksXG4gICAgICByaWdodDogKGcsdixvKSA9PiBnby5kbygnZXhlYycsIG8pLFxuICAgIH19PlxuICAgICAgPGMuQnV0dG9uXG4gICAgICAgIHc9JzNlbScgaD0nM2VtJ1xuICAgICAgICB2YXJpYW50PXtpc0FjdGl2ZSA/ICdhY3RpdmUnIDogdW5kZWZpbmVkfVxuICAgICAgICByZWY9e3JlZn1cbiAgICAgICAgb25DbGljaz17KCkgPT4gZ28uZG8oJ2V4ZWMnKX1cbiAgICAgID5cbiAgICAgICAgPEdpQnJhaW4vPlxuICAgICAgPC9jLkJ1dHRvbj5cbiAgICA8L2dvLk9uPjtcbiAgfTtcbn0iXX0=",
          "link_id": 19249
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 19408,
      "src_id": 19402,
      "handler_id": 19406,
      "execution_provider_id": 33,
      "isolation_provider_id": 144,
      "dist": {
        "id": 19408,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 1740,
          "value": "",
          "link_id": 19408
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 19984,
      "src_id": 19978,
      "handler_id": 19982,
      "execution_provider_id": 33,
      "isolation_provider_id": 144,
      "dist": {
        "id": 19984,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 1756,
          "value": "async ({ deep, data, Go, require }) => {\n    const React = require('react');\n    const { LuChevronLast, LuChevronFirst } = require(\"react-icons/lu\");\n    const { IoInfiniteSharp } = require(\"react-icons/io5\");\n    const { Planet } = require('react-planet');\n    const c = require('@chakra-ui/react');\n    const { TypedIcon, DownIcon, UpIcon, TypeIcon, InIcon, OutIcon, FromIcon, ToIcon, } = require('@deep-foundation/perception-app');\n    const dpl = '@deep-foundation/perception-links';\n    const TreeList = deep.idLocal(dpl, 'TreeList');\n    const _Item = ({ link, isActive, Item, index, position }) => {\n        const go = Go.useGo();\n        const Component = link?.Component || Item;\n        return React.createElement(Component, { link: link, go: go, isActive: isActive, position: position, index: index });\n    };\n    return ({ go, links: _links, Component, ErrorComponent, UnhandledComponent, Item, saveHistory = false, linkId, link, handlerId, goHandler, ...props }, ref) => {\n        const links = React.useMemo(() => _links.filter(l => !!l?.id), [_links]);\n        const list = links.map((link, i) => !!link ? React.createElement(go.Provider, { key: link.id, linkId: link.id },\n            React.createElement(_Item, { link: link, isActive: go.value === link.id, Item: Item, saveHistory: saveHistory, index: i, position: i / (links.length - 1) })) : React.createElement(React.Fragment, null));\n        const index = React.useMemo(() => links.findIndex(l => l?.id === go.value), [go.value]);\n        const position = React.useMemo(() => index / (links.length - 1), [index]);\n        return React.createElement(go.On, { do: {\n                focus: (g, v, id, o) => !id && go.do('use', o),\n                exec: (g, v, o) => !!go.value && go.go.do('exec', { id: go.value, index, position }),\n                up: (g, v, o) => go.set().go.go.do('up', { ...o, id: go.value, index, position }),\n                down: (g, v, o) => go.set().go.go.do('down', { ...o, id: go.value, index, position }),\n                left: (g, v, o) => go.focus(go.prev(links)),\n                right: (g, v, o) => go.focus(go.next(links)),\n                use: (g, v, o) => {\n                    let id = o?.id;\n                    if (typeof (o?.position) === 'number') {\n                        id = links?.[Math.round((links.length - 1) * o.position)]?.id;\n                        console.log('XXXX', o, id, links, Math.round((links.length - 1) * o.position));\n                    }\n                    if (typeof (id) === 'number' || typeof (id) === 'string')\n                        id != go.value && go(id) && go.set(id).go(id)?.go?.do('use');\n                },\n            }, focus: {} },\n            React.createElement(Planet, { orbitRadius: 70, mass: 1, tension: 500, friction: 19, ...props }, list));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFO0lBQ3BDLE1BQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUMvQixNQUFNLEVBQUUsYUFBYSxFQUFFLGNBQWMsRUFBRSxHQUFHLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0lBQ3BFLE1BQU0sRUFBRSxlQUFlLEVBQUUsR0FBRyxPQUFPLENBQUMsaUJBQWlCLENBQUMsQ0FBQztJQUN2RCxNQUFNLEVBQUUsTUFBTSxFQUFFLEdBQUcsT0FBTyxDQUFDLGNBQWMsQ0FBQyxDQUFDO0lBQzNDLE1BQU0sQ0FBQyxHQUFHLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBRXRDLE1BQU0sRUFDSixTQUFTLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxHQUN6RSxHQUFHLE9BQU8sQ0FBQyxpQ0FBaUMsQ0FBQyxDQUFDO0lBRS9DLE1BQU0sR0FBRyxHQUFHLG1DQUFtQyxDQUFDO0lBRWhELE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLFVBQVUsQ0FBQyxDQUFDO0lBRS9DLE1BQU0sS0FBSyxHQUFHLENBQUMsRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBRTtRQUMxRCxNQUFNLEVBQUUsR0FBRyxFQUFFLENBQUMsS0FBSyxFQUFFLENBQUM7UUFDdEIsTUFBTSxTQUFTLEdBQUcsSUFBSSxFQUFFLFNBQVMsSUFBSSxJQUFJLENBQUM7UUFDMUMsT0FBTyxvQkFBQyxTQUFTLElBQUMsSUFBSSxFQUFFLElBQUks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QUFFLENBQUMsS0FBSyxRQUFRLElBQUksT0FBTSxDQUFDLEVBQUUsQ0FBQyxLQUFLLFFBQVE7d0JBQUUsRUFBRSxJQUFJLEVBQUUsQ0FBQyxLQUFLLElBQUksRUFBRSxDQUFDLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBQ3ZILENBQUM7YUFDRixFQUFFLEtBQUssRUFBRSxFQUNUO1lBQ0Msb0JBQUMsTUFBTSxJQUNMLFdBQVcsRUFBRSxFQUFFLEVBQ2YsSUFBSSxFQUFFLENBQUMsRUFDUCxPQUFPLEVBQUUsR0FBRyxFQUNaLFFBQVEsRUFBRSxFQUFFLEtBQ1IsS0FBSyxJQUVSLElBQUksQ0FDRSxDQUNILENBQUM7SUFDWCxDQUFDLENBQUM7QUFDSixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJhc3luYyAoeyBkZWVwLCBkYXRhLCBHbywgcmVxdWlyZSB9KSA9PiB7XG4gIGNvbnN0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbiAgY29uc3QgeyBMdUNoZXZyb25MYXN0LCBMdUNoZXZyb25GaXJzdCB9ID0gcmVxdWlyZShcInJlYWN0LWljb25zL2x1XCIpO1xuICBjb25zdCB7IElvSW5maW5pdGVTaGFycCB9ID0gcmVxdWlyZShcInJlYWN0LWljb25zL2lvNVwiKTtcbiAgY29uc3QgeyBQbGFuZXQgfSA9IHJlcXVpcmUoJ3JlYWN0LXBsYW5ldCcpO1xuICBjb25zdCBjID0gcmVxdWlyZSgnQGNoYWtyYS11aS9yZWFjdCcpO1xuXG4gIGNvbnN0IHtcbiAgICBUeXBlZEljb24sIERvd25JY29uLCBVcEljb24sIFR5cGVJY29uLCBJbkljb24sIE91dEljb24sIEZyb21JY29uLCBUb0ljb24sXG4gIH0gPSByZXF1aXJlKCdAZGVlcC1mb3VuZGF0aW9uL3BlcmNlcHRpb24tYXBwJyk7XG5cbiAgY29uc3QgZHBsID0gJ0BkZWVwLWZvdW5kYXRpb24vcGVyY2VwdGlvbi1saW5rcyc7XG5cbiAgY29uc3QgVHJlZUxpc3QgPSBkZWVwLmlkTG9jYWwoZHBsLCAnVHJlZUxpc3QnKTtcblxuICBjb25zdCBfSXRlbSA9ICh7IGxpbmssIGlzQWN0aXZlLCBJdGVtLCBpbmRleCwgcG9zaXRpb24gfSkgPT4ge1xuICAgIGNvbnN0IGdvID0gR28udXNlR28oKTtcbiAgICBjb25zdCBDb21wb25lbnQgPSBsaW5rPy5Db21wb25lbnQgfHwgSXRlbTtcbiAgICByZXR1cm4gPENvbXBvbmVudCBsaW5rPXtsaW5rfSBnbz17Z299IGlzQWN0aXZlPXtpc0FjdGl2ZX0gcG9zaXRpb249e3Bvc2l0aW9ufSBpbmRleD17aW5kZXh9Lz47XG4gIH1cblxuICByZXR1cm4gKHtcbiAgICBnbyxcblxuICAgIGxpbmtzOiBfbGlua3MsXG5cbiAgICBDb21wb25lbnQsXG4gICAgRXJyb3JDb21wb25lbnQsXG4gICAgVW5oYW5kbGVkQ29tcG9uZW50LFxuXG4gICAgSXRlbSxcblxuICAgIHNhdmVIaXN0b3J5ID0gZmFsc2UsXG5cbiAgICBsaW5rSWQsXG4gICAgbGluayxcbiAgICBoYW5kbGVySWQsXG4gICAgZ29IYW5kbGVyLFxuXG4gICAgLi4ucHJvcHNcbiAgfSwgcmVmKSA9PiB7XG4gICAgY29uc3QgbGlua3MgPSBSZWFjdC51c2VNZW1vKCgpID0+IF9saW5rcy5maWx0ZXIobCA9PiAhIWw/LmlkKSwgW19saW5rc10pO1xuICAgIGNvbnN0IGxpc3QgPSBsaW5rcy5tYXAoKGxpbmssIGkpID0+ICEhbGluayA/IDxnby5Qcm92aWRlciBrZXk9e2xpbmsuaWR9IGxpbmtJZD17bGluay5pZH0+XG4gICAgICA8X0l0ZW1cbiAgICAgICAgbGluaz17bGlua30gaXNBY3RpdmU9e2dvLnZhbHVlID09PSBsaW5rLmlkfSBJdGVtPXtJdGVtfSBzYXZlSGlzdG9yeT17c2F2ZUhpc3Rvcnl9XG4gICAgICAgIGluZGV4PXtpfSBwb3NpdGlvbj17aSAvIChsaW5rcy5sZW5ndGggLSAxKX1cbiAgICAgIC8+XG4gICAgPC9nby5Qcm92aWRlcj4gOiA8UmVhY3QuRnJhZ21lbnQvPik7XG5cbiAgICBjb25zdCBpbmRleCA9IFJlYWN0LnVzZU1lbW8oKCkgPT4gbGlua3MuZmluZEluZGV4KGwgPT4gbD8uaWQgPT09IGdvLnZhbHVlKSwgW2dvLnZhbHVlXSk7XG4gICAgY29uc3QgcG9zaXRpb24gPSBSZWFjdC51c2VNZW1vKCgpID0+IGluZGV4IC8gKGxpbmtzLmxlbmd0aCAtIDEpLCBbaW5kZXhdKTtcblxuICAgIHJldHVybiA8Z28uT24gZG89e3tcbiAgICAgIGZvY3VzOiAoZyx2LGlkLG8pID0+ICFpZCAmJiBnby5kbygndXNlJywgbyksXG4gICAgICBleGVjOiAoZyx2LG8pID0+ICEhZ28udmFsdWUgJiYgZ28uZ28uZG8oJ2V4ZWMnLCB7IGlkOiBnby52YWx1ZSwgaW5kZXgsIHBvc2l0aW9uIH0pLFxuICAgICAgdXA6IChnLHYsbykgPT4gZ28uc2V0KCkuZ28uZ28uZG8oJ3VwJywgeyAuLi5vLCBpZDogZ28udmFsdWUsIGluZGV4LCBwb3NpdGlvbiB9KSxcbiAgICAgIGRvd246IChnLHYsbykgPT4gZ28uc2V0KCkuZ28uZ28uZG8oJ2Rvd24nLCB7IC4uLm8sIGlkOiBnby52YWx1ZSwgaW5kZXgsIHBvc2l0aW9uIH0pLFxuICAgICAgbGVmdDogKGcsdixvKSA9PiBnby5mb2N1cyhnby5wcmV2KGxpbmtzKSksXG4gICAgICByaWdodDogKGcsdixvKSA9PiBnby5mb2N1cyhnby5uZXh0KGxpbmtzKSksXG4gICAgICB1c2U6IChnLHYsbykgPT4ge1xuICAgICAgICBsZXQgaWQgPSBvPy5pZDtcbiAgICAgICAgaWYgKHR5cGVvZihvPy5wb3NpdGlvbikgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgaWQgPSBsaW5rcz8uW01hdGgucm91bmQoKGxpbmtzLmxlbmd0aCAtIDEpICogby5wb3NpdGlvbildPy5pZDtcbiAgICAgICAgY29uc29sZS5sb2coJ1hYWFgnLCBvLCBpZCwgbGlua3MsIE1hdGgucm91bmQoKGxpbmtzLmxlbmd0aCAtIDEpICogby5wb3NpdGlvbikpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YoaWQpID09PSAnbnVtYmVyJyB8fCB0eXBlb2YoaWQpID09PSAnc3RyaW5nJykgaWQgIT0gZ28udmFsdWUgJiYgZ28oaWQpICYmIGdvLnNldChpZCkuZ28oaWQpPy5nbz8uZG8oJ3VzZScpO1xuICAgICAgfSxcbiAgICB9fSBmb2N1cz17e1xuICAgIH19PlxuICAgICAgPFBsYW5ldFxuICAgICAgICBvcmJpdFJhZGl1cz17NzB9XG4gICAgICAgIG1hc3M9ezF9XG4gICAgICAgIHRlbnNpb249ezUwMH1cbiAgICAgICAgZnJpY3Rpb249ezE5fVxuICAgICAgICB7Li4ucHJvcHN9XG4gICAgICA+XG4gICAgICAgIHtsaXN0fVxuICAgICAgPC9QbGFuZXQ+XG4gICAgPC9nby5Pbj47XG4gIH07XG59Il19",
          "link_id": 19984
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 20120,
      "src_id": 20114,
      "handler_id": 20118,
      "execution_provider_id": 33,
      "isolation_provider_id": 144,
      "dist": {
        "id": 20120,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 1763,
          "value": "async ({ deep, data, Go, require }) => {\n    const React = require('react');\n    const { LuChevronLast, LuChevronFirst } = require(\"react-icons/lu\");\n    const { IoInfiniteSharp } = require(\"react-icons/io5\");\n    const { Planet } = require('react-planet');\n    const c = require('@chakra-ui/react');\n    const { TypedIcon, DownIcon, UpIcon, TypeIcon, InIcon, OutIcon, FromIcon, ToIcon, } = require('@deep-foundation/perception-app');\n    const dpl = '@deep-foundation/perception-links';\n    const TreeList = deep.idLocal(dpl, 'TreeList');\n    const Item = ({ isActive, link, position }) => {\n        const go = Go.useGo();\n        return React.createElement(c.Button, { variant: isActive ? 'planetActive' : 'planet', onClick: () => go.go.focus(link.id).go.do(link.id) }, link.icon);\n    };\n    let i = 1;\n    return ({ go, linkId, deleteDisclosure: _deleteDisclosure, finderDisclosure: _finderDisclosure, isActive = false, }, ref) => {\n        const { cy } = go.useGraph();\n        const links = [\n            { id: 'ups', icon: React.createElement(UpIcon, null) },\n            { id: 'out', icon: React.createElement(OutIcon, null) },\n            { id: 'from', icon: React.createElement(FromIcon, null) },\n            { id: 'type', icon: React.createElement(TypeIcon, null) },\n            { id: 'typed', icon: React.createElement(TypedIcon, null) },\n            { id: 'to', icon: React.createElement(ToIcon, null) },\n            { id: 'in', icon: React.createElement(InIcon, null) },\n            { id: 'downs', icon: React.createElement(DownIcon, null) },\n        ];\n        const focus = {};\n        for (let l in links) {\n            focus[links[l].id] = (g, v, o) => { };\n        }\n        const [queries, setQueries] = React.useState({});\n        const qs = React.useMemo(() => Object.keys(queries), [queries]);\n        return React.createElement(go.On, { do: {\n                exec: () => go.do(go.value),\n                typed: async (g, v, o) => setQueries({ ...queries, [v]: { type_id: linkId } }),\n                out: async (g, v, o) => setQueries({ ...queries, [v]: { from_id: linkId } }),\n                in: async (g, v, o) => setQueries({ ...queries, [v]: { to_id: linkId } }),\n                type: async (g, v, o) => setQueries({ ...queries, [v]: { id: deep.get(linkId).type_id } }),\n                from: async (g, v, o) => setQueries({ ...queries, [v]: { id: deep.get(linkId).from_id } }),\n                to: async (g, v, o) => setQueries({ ...queries, [v]: { id: deep.get(linkId).to_id } }),\n                ups: async (g, v, o) => setQueries({ ...queries, [v]: { down: { link_id: linkId } } }),\n                downs: async (g, v, o) => setQueries({ ...queries, [v]: { up: { parent_id: linkId } } }),\n            }, focus: focus },\n            qs.map(q => React.createElement(go.Query, { key: JSON.stringify(queries[q]), query: queries[q], onChange: ({ data }) => go.do('open', { ids: data.map(l => l.id), parentId: linkId }) })),\n            React.createElement(go.Component, { open: isActive, path: [dpl, 'Planet'], links: links, Item: Item, orbitRadius: 70, mass: 1 }));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFO0lBQ3BDLE1BQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUMvQixNQUFNLEVBQUUsYUFBYSxFQUFFLGNBQWMsRUFBRSxHQUFHLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0lBQ3BFLE1BQU0sRUFBRSxlQUFlLEVBQUUsR0FBRyxPQUFPLENBQUMsaUJBQWlCLENBQUMsQ0FBQztJQUN2RCxNQUFNLEVBQUUsTUFBTSxFQUFFLEdBQUcsT0FBTyxDQUFDLGNBQWMsQ0FBQyxDQUFDO0lBQzNDLE1BQU0sQ0FBQyxHQUFHLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBRXRDLE1BQU0sRUFDSixTQUFTLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxHQUN6RSxHQUFHLE9BQU8sQ0FBQyxpQ0FBaUMsQ0FBQyxDQUFDO0lBRS9DLE1BQU0sR0FBRyxHQUFHLG1DQUFtQyxDQUFDO0lBRWhELE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLFVBQVUsQ0FBQyxDQUFDO0lBRS9DLE1BQU0sSUFBSSxHQUFHLENBQUMsRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxFQUFFLEVBQUU7UUFDNUMsTUFBTSxFQUFFLEdBQUcsRUFBRSxDQUFDLEtBQUssRUFBRSxDQUFDO1FBQ3RCLE9BQU8sb0JBQUMsQ0FBQyxDQUFDLE1BQU0sSUFBQyxPQUFPLEVBQUUsUUFBUSxDQUFDLENBQUMsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLFFBQVEsRUFDNUQsT0FBTyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsSUFDbEQsSUFBSSxDQUFDLElBQUksQ0FBWSxDQUFDO0lBQzFCLENBQUMsQ0FBQztJQUVGLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUVWLE9BQU8sQ0FBQyxFQUNOLEVBQUUsRUFFRixNQUFNLEVBQ04sZ0JBQWdCLEVBQUUsaUJBQWlCLEVBQ25DLGdCQUFnQixFQUFFLGlCQUFpQixFQUVuQyxRQUFRLEdBQUcsS0FBSyxHQUNqQixFQUFFLEdBQUcsRUFBRSxFQUFFO1FBQ1IsTUFBTSxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsQ0FBQyxRQUFRLEVBQUUsQ0FBQztRQUU3QixNQUFNLEtBQUssR0FBRztZQUNaLEVBQUUsRUFBRSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsb0JBQUMsTUFBTSxPQUFFLEVBQUU7WUFDOUIsRUFBRSxFQUFFLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxvQkFBQyxPQUFPLE9BQUUsRUFBRTtZQUMvQixFQUFFLEVBQUUsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLG9CQUFDLFFBQVEsT0FBRSxFQUFFO1lBQ2pDLEVBQUUsRUFBRSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsb0JBQUMsUUFBUSxPQUFFLEVBQUU7WUFDakMsRUFBRSxFQUFFLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxvQkFBQyxTQUFTLE9BQUUsRUFBRTtZQUNuQyxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLG9CQUFDLE1BQU0sT0FBRSxFQUFFO1lBQzdCLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsb0JBQUMsTUFBTSxPQUFFLEVBQUU7WUFDN0IsRUFBRSxFQUFFLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxvQkFBQyxRQUFRLE9BQUUsRUFBRTtTQUNuQyxDQUFDO1FBRUYsTUFBTSxLQUFLLEdBQUcsRUFBRSxDQUFDO1FBQ2pCLEtBQUssSUFBSSxDQUFDLElBQUksS0FBSyxFQUFFLENBQUM7WUFDcEIsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFFLEVBQUUsR0FBRSxDQUFDLENBQUE7UUFDcEMsQ0FBQztRQUVELE1BQU0sQ0FBQyxPQUFPLEVBQUUsVUFBVSxDQUFDLEdBQUcsS0FBSyxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUNqRCxNQUFNLEVBQUUsR0FBRyxLQUFLLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO1FBRWhFLE9BQU8sb0JBQUMsRUFBRSxDQUFDLEVBQUUsSUFBQyxFQUFFLEVBQUU7Z0JBQ2hCLElBQUksRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUM7Z0JBQzNCLEtBQUssRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLFVBQVUsQ0FBQyxFQUFFLEdBQUcsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxPQUFPLEVBQUUsTUFBTSxFQUFFLEVBQUUsQ0FBQztnQkFDNUUsR0FBRyxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsR0FBRyxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLE9BQU8sRUFBRSxNQUFNLEVBQUUsRUFBRSxDQUFDO2dCQUMxRSxFQUFFLEVBQUUsS0FBSyxFQUFFLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxVQUFVLENBQUMsRUFBRSxHQUFHLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxFQUFFLENBQUM7Z0JBRXZFLElBQUksRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLFVBQVUsQ0FBQyxFQUFFLEdBQUcsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxPQUFPLEVBQUUsRUFBRSxDQUFDO2dCQUN4RixJQUFJLEVBQUUsS0FBSyxFQUFFLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxVQUFVLENBQUMsRUFBRSxHQUFHLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsT0FBTyxFQUFFLEVBQUUsQ0FBQztnQkFDeEYsRUFBRSxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsR0FBRyxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUM7Z0JBRXBGLEdBQUcsRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLFVBQVUsQ0FBQyxFQUFFLEdBQUcsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRSxPQUFPLEVBQUUsTUFBTSxFQUFFLEVBQUUsRUFBRSxDQUFDO2dCQUNwRixLQUFLLEVBQUUsS0FBSyxFQUFFLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxVQUFVLENBQUMsRUFBRSxHQUFHLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBRSxFQUFFLEVBQUUsQ0FBQzthQUN2RixFQUFFLEtBQUssRUFBRSxLQUFLO1lBQ1osRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLG9CQUFDLEVBQUUsQ0FBQyxLQUFLLElBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxRQUFRLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxFQUFFLEdBQUcsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsQ0FBQyxHQUFHLENBQUM7WUFDcEssb0JBQUMsRUFBRSxDQUFDLFNBQVMsSUFDWCxJQUFJLEVBQUUsUUFBUSxFQUNkLElBQUksRUFBRSxDQUFDLEdBQUcsRUFBRSxRQUFRLENBQUMsRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUNuQyxJQUFJLEVBQUUsSUFBSSxFQUNWLFdBQVcsRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLENBQUMsR0FDeEIsQ0FDSSxDQUFDO0lBQ1gsQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiYXN5bmMgKHsgZGVlcCwgZGF0YSwgR28sIHJlcXVpcmUgfSkgPT4ge1xuICBjb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG4gIGNvbnN0IHsgTHVDaGV2cm9uTGFzdCwgTHVDaGV2cm9uRmlyc3QgfSA9IHJlcXVpcmUoXCJyZWFjdC1pY29ucy9sdVwiKTtcbiAgY29uc3QgeyBJb0luZmluaXRlU2hhcnAgfSA9IHJlcXVpcmUoXCJyZWFjdC1pY29ucy9pbzVcIik7XG4gIGNvbnN0IHsgUGxhbmV0IH0gPSByZXF1aXJlKCdyZWFjdC1wbGFuZXQnKTtcbiAgY29uc3QgYyA9IHJlcXVpcmUoJ0BjaGFrcmEtdWkvcmVhY3QnKTtcblxuICBjb25zdCB7XG4gICAgVHlwZWRJY29uLCBEb3duSWNvbiwgVXBJY29uLCBUeXBlSWNvbiwgSW5JY29uLCBPdXRJY29uLCBGcm9tSWNvbiwgVG9JY29uLFxuICB9ID0gcmVxdWlyZSgnQGRlZXAtZm91bmRhdGlvbi9wZXJjZXB0aW9uLWFwcCcpO1xuXG4gIGNvbnN0IGRwbCA9ICdAZGVlcC1mb3VuZGF0aW9uL3BlcmNlcHRpb24tbGlua3MnO1xuXG4gIGNvbnN0IFRyZWVMaXN0ID0gZGVlcC5pZExvY2FsKGRwbCwgJ1RyZWVMaXN0Jyk7XG5cbiAgY29uc3QgSXRlbSA9ICh7IGlzQWN0aXZlLCBsaW5rLCBwb3NpdGlvbiB9KSA9PiB7XG4gICAgY29uc3QgZ28gPSBHby51c2VHbygpO1xuICAgIHJldHVybiA8Yy5CdXR0b24gdmFyaWFudD17aXNBY3RpdmUgPyAncGxhbmV0QWN0aXZlJyA6ICdwbGFuZXQnfVxuICAgICAgb25DbGljaz17KCkgPT4gZ28uZ28uZm9jdXMobGluay5pZCkuZ28uZG8obGluay5pZCl9XG4gICAgPntsaW5rLmljb259PC9jLkJ1dHRvbj47XG4gIH07XG5cbiAgbGV0IGkgPSAxO1xuXG4gIHJldHVybiAoe1xuICAgIGdvLFxuXG4gICAgbGlua0lkLFxuICAgIGRlbGV0ZURpc2Nsb3N1cmU6IF9kZWxldGVEaXNjbG9zdXJlLFxuICAgIGZpbmRlckRpc2Nsb3N1cmU6IF9maW5kZXJEaXNjbG9zdXJlLFxuXG4gICAgaXNBY3RpdmUgPSBmYWxzZSxcbiAgfSwgcmVmKSA9PiB7XG4gICAgY29uc3QgeyBjeSB9ID0gZ28udXNlR3JhcGgoKTtcblxuICAgIGNvbnN0IGxpbmtzID0gW1xuICAgICAgeyBpZDogJ3VwcycsIGljb246IDxVcEljb24vPiB9LFxuICAgICAgeyBpZDogJ291dCcsIGljb246IDxPdXRJY29uLz4gfSxcbiAgICAgIHsgaWQ6ICdmcm9tJywgaWNvbjogPEZyb21JY29uLz4gfSxcbiAgICAgIHsgaWQ6ICd0eXBlJywgaWNvbjogPFR5cGVJY29uLz4gfSxcbiAgICAgIHsgaWQ6ICd0eXBlZCcsIGljb246IDxUeXBlZEljb24vPiB9LFxuICAgICAgeyBpZDogJ3RvJywgaWNvbjogPFRvSWNvbi8+IH0sXG4gICAgICB7IGlkOiAnaW4nLCBpY29uOiA8SW5JY29uLz4gfSxcbiAgICAgIHsgaWQ6ICdkb3ducycsIGljb246IDxEb3duSWNvbi8+IH0sXG4gICAgXTtcblxuICAgIGNvbnN0IGZvY3VzID0ge307XG4gICAgZm9yIChsZXQgbCBpbiBsaW5rcykge1xuICAgICAgZm9jdXNbbGlua3NbbF0uaWRdID0gKGcsdixvKSA9PiB7fVxuICAgIH1cblxuICAgIGNvbnN0IFtxdWVyaWVzLCBzZXRRdWVyaWVzXSA9IFJlYWN0LnVzZVN0YXRlKHt9KTtcbiAgICBjb25zdCBxcyA9IFJlYWN0LnVzZU1lbW8oKCkgPT4gT2JqZWN0LmtleXMocXVlcmllcyksIFtxdWVyaWVzXSk7XG5cbiAgICByZXR1cm4gPGdvLk9uIGRvPXt7XG4gICAgICBleGVjOiAoKSA9PiBnby5kbyhnby52YWx1ZSksXG4gICAgICB0eXBlZDogYXN5bmMgKGcsdixvKSA9PiBzZXRRdWVyaWVzKHsgLi4ucXVlcmllcywgW3ZdOiB7IHR5cGVfaWQ6IGxpbmtJZCB9IH0pLFxuICAgICAgb3V0OiBhc3luYyAoZyx2LG8pID0+IHNldFF1ZXJpZXMoeyAuLi5xdWVyaWVzLCBbdl06IHsgZnJvbV9pZDogbGlua0lkIH0gfSksXG4gICAgICBpbjogYXN5bmMgKGcsdixvKSA9PiBzZXRRdWVyaWVzKHsgLi4ucXVlcmllcywgW3ZdOiB7IHRvX2lkOiBsaW5rSWQgfSB9KSxcblxuICAgICAgdHlwZTogYXN5bmMgKGcsdixvKSA9PiBzZXRRdWVyaWVzKHsgLi4ucXVlcmllcywgW3ZdOiB7IGlkOiBkZWVwLmdldChsaW5rSWQpLnR5cGVfaWQgfSB9KSxcbiAgICAgIGZyb206IGFzeW5jIChnLHYsbykgPT4gc2V0UXVlcmllcyh7IC4uLnF1ZXJpZXMsIFt2XTogeyBpZDogZGVlcC5nZXQobGlua0lkKS5mcm9tX2lkIH0gfSksXG4gICAgICB0bzogYXN5bmMgKGcsdixvKSA9PiBzZXRRdWVyaWVzKHsgLi4ucXVlcmllcywgW3ZdOiB7IGlkOiBkZWVwLmdldChsaW5rSWQpLnRvX2lkIH0gfSksXG5cbiAgICAgIHVwczogYXN5bmMgKGcsdixvKSA9PiBzZXRRdWVyaWVzKHsgLi4ucXVlcmllcywgW3ZdOiB7IGRvd246IHsgbGlua19pZDogbGlua0lkIH0gfSB9KSxcbiAgICAgIGRvd25zOiBhc3luYyAoZyx2LG8pID0+IHNldFF1ZXJpZXMoeyAuLi5xdWVyaWVzLCBbdl06IHsgdXA6IHsgcGFyZW50X2lkOiBsaW5rSWQgfSB9IH0pLFxuICAgIH19IGZvY3VzPXtmb2N1c30+XG4gICAgICB7cXMubWFwKHEgPT4gPGdvLlF1ZXJ5IGtleT17SlNPTi5zdHJpbmdpZnkocXVlcmllc1txXSl9IHF1ZXJ5PXtxdWVyaWVzW3FdfSBvbkNoYW5nZT17KHsgZGF0YSB9KSA9PiBnby5kbygnb3BlbicsIHsgaWRzOiBkYXRhLm1hcChsID0+IGwuaWQpLCBwYXJlbnRJZDogbGlua0lkIH0pfS8+KX1cbiAgICAgIDxnby5Db21wb25lbnRcbiAgICAgICAgb3Blbj17aXNBY3RpdmV9XG4gICAgICAgIHBhdGg9e1tkcGwsICdQbGFuZXQnXX0gbGlua3M9e2xpbmtzfVxuICAgICAgICBJdGVtPXtJdGVtfVxuICAgICAgICBvcmJpdFJhZGl1cz17NzB9IG1hc3M9ezF9XG4gICAgICAvPlxuICAgIDwvZ28uT24+O1xuICB9O1xufSJdfQ==",
          "link_id": 20120
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 20154,
      "src_id": 20144,
      "handler_id": 20152,
      "execution_provider_id": 33,
      "isolation_provider_id": 144,
      "dist": {
        "id": 20154,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 1771,
          "value": "async ({ deep, data, Go, require }) => {\n    const React = require('react');\n    const { LuChevronLast, LuChevronFirst } = require(\"react-icons/lu\");\n    const { IoInfiniteSharp } = require(\"react-icons/io5\");\n    const { Planet } = require('react-planet');\n    const c = require('@chakra-ui/react');\n    const { TypedIcon, DownIcon, UpIcon, TypeIcon, InIcon, OutIcon, FromIcon, ToIcon, } = require('@deep-foundation/perception-app');\n    const dpl = '@deep-foundation/perception-links';\n    const TreeList = deep.idLocal(dpl, 'TreeList');\n    const Item = ({ isActive, link, position }) => {\n        const go = Go.useGo();\n        return React.createElement(c.Button, { variant: isActive ? 'planetActive' : 'planet', onClick: () => go.go.focus(link.id).go.do(link.id) }, link.icon);\n    };\n    return ({ go, linkId, deleteDisclosure: _deleteDisclosure, finderDisclosure: _finderDisclosure, isActive = false, }, ref) => {\n        const { cy } = go.useGraph();\n        const links = [\n            { id: 'contains', icon: React.createElement(React.Fragment, null, \"\\uD83D\\uDDC2\\uFE0F\") },\n            { id: 'finder', icon: React.createElement(React.Fragment, null, \"\\uD83E\\uDEAC\") },\n            { id: 'delete', icon: React.createElement(React.Fragment, null, \"\\u274C\") },\n            { id: 'handlers', icon: React.createElement(React.Fragment, null, \"\\uD83D\\uDC41\\uFE0F\") },\n            { id: 'trees', icon: React.createElement(React.Fragment, null, \"\\uD83C\\uDF84\") },\n        ];\n        const focus = {};\n        for (let l in links) {\n            focus[links[l].id] = (g, v, o) => { };\n        }\n        return React.createElement(go.On, { do: {}, focus: focus },\n            React.createElement(go.Component, { open: isActive, path: [dpl, 'Planet'], links: links, Item: Item, orbitRadius: 130, mass: 3 }));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFO0lBQ3BDLE1BQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUMvQixNQUFNLEVBQUUsYUFBYSxFQUFFLGNBQWMsRUFBRSxHQUFHLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0lBQ3BFLE1BQU0sRUFBRSxlQUFlLEVBQUUsR0FBRyxPQUFPLENBQUMsaUJBQWlCLENBQUMsQ0FBQztJQUN2RCxNQUFNLEVBQUUsTUFBTSxFQUFFLEdBQUcsT0FBTyxDQUFDLGNBQWMsQ0FBQyxDQUFDO0lBQzNDLE1BQU0sQ0FBQyxHQUFHLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBRXRDLE1BQU0sRUFDSixTQUFTLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxHQUN6RSxHQUFHLE9BQU8sQ0FBQyxpQ0FBaUMsQ0FBQyxDQUFDO0lBRS9DLE1BQU0sR0FBRyxHQUFHLG1DQUFtQyxDQUFDO0lBRWhELE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLFVBQVUsQ0FBQyxDQUFDO0lBRS9DLE1BQU0sSUFBSSxHQUFHLENBQUMsRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxFQUFFLEVBQUU7UUFDNUMsTUFBTSxFQUFFLEdBQUcsRUFBRSxDQUFDLEtBQUssRUFBRSxDQUFDO1FBQ3RCLE9BQU8sb0JBQUMsQ0FBQyxDQUFDLE1BQU0sSUFBQyxPQUFPLEVBQUUsUUFBUSxDQUFDLENBQUMsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLFFBQVEsRUFDNUQsT0FBTyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsSUFDbEQsSUFBSSxDQUFDLElBQUksQ0FBWSxDQUFDO0lBQzFCLENBQUMsQ0FBQztJQUVGLE9BQU8sQ0FBQyxFQUNOLEVBQUUsRUFFRixNQUFNLEVBQ04sZ0JBQWdCLEVBQUUsaUJBQWlCLEVBQ25DLGdCQUFnQixFQUFFLGlCQUFpQixFQUVuQyxRQUFRLEdBQUcsS0FBSyxHQUNqQixFQUFFLEdBQUcsRUFBRSxFQUFFO1FBQ1IsTUFBTSxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsQ0FBQyxRQUFRLEVBQUUsQ0FBQztRQUU3QixNQUFNLEtBQUssR0FBRztZQUNaLEVBQUUsRUFBRSxFQUFFLFVBQVUsRUFBRSxJQUFJLEVBQUUsK0RBQVEsRUFBRTtZQUNsQyxFQUFFLEVBQUUsRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLHlEQUFPLEVBQUU7WUFDL0IsRUFBRSxFQUFFLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxtREFBTSxFQUFFO1lBQzlCLEVBQUUsRUFBRSxFQUFFLFVBQVUsRUFBRSxJQUFJLEVBQUUsK0RBQVEsRUFBRTtZQUNsQyxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLHlEQUFPLEVBQUU7U0FDL0IsQ0FBQztRQUVGLE1BQU0sS0FBSyxHQUFHLEVBQUUsQ0FBQztRQUNqQixLQUFLLElBQUksQ0FBQyxJQUFJLEtBQUssRUFBRSxDQUFDO1lBQ3BCLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBRSxFQUFFLEdBQUUsQ0FBQyxDQUFBO1FBQ3BDLENBQUM7UUFFRCxPQUFPLG9CQUFDLEVBQUUsQ0FBQyxFQUFFLElBQUMsRUFBRSxFQUFFLEVBQ2pCLEVBQUUsS0FBSyxFQUFFLEtBQUs7WUFDYixvQkFBQyxFQUFFLENBQUMsU0FBUyxJQUNYLElBQUksRUFBRSxRQUFRLEVBQ2QsSUFBSSxFQUFFLENBQUMsR0FBRyxFQUFFLFFBQVEsQ0FBQyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQ25DLElBQUksRUFBRSxJQUFJLEVBQ1YsV0FBVyxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUUsQ0FBQyxHQUN6QixDQUNJLENBQUM7SUFDWCxDQUFDLENBQUM7QUFDSixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJhc3luYyAoeyBkZWVwLCBkYXRhLCBHbywgcmVxdWlyZSB9KSA9PiB7XG4gIGNvbnN0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbiAgY29uc3QgeyBMdUNoZXZyb25MYXN0LCBMdUNoZXZyb25GaXJzdCB9ID0gcmVxdWlyZShcInJlYWN0LWljb25zL2x1XCIpO1xuICBjb25zdCB7IElvSW5maW5pdGVTaGFycCB9ID0gcmVxdWlyZShcInJlYWN0LWljb25zL2lvNVwiKTtcbiAgY29uc3QgeyBQbGFuZXQgfSA9IHJlcXVpcmUoJ3JlYWN0LXBsYW5ldCcpO1xuICBjb25zdCBjID0gcmVxdWlyZSgnQGNoYWtyYS11aS9yZWFjdCcpO1xuXG4gIGNvbnN0IHtcbiAgICBUeXBlZEljb24sIERvd25JY29uLCBVcEljb24sIFR5cGVJY29uLCBJbkljb24sIE91dEljb24sIEZyb21JY29uLCBUb0ljb24sXG4gIH0gPSByZXF1aXJlKCdAZGVlcC1mb3VuZGF0aW9uL3BlcmNlcHRpb24tYXBwJyk7XG5cbiAgY29uc3QgZHBsID0gJ0BkZWVwLWZvdW5kYXRpb24vcGVyY2VwdGlvbi1saW5rcyc7XG5cbiAgY29uc3QgVHJlZUxpc3QgPSBkZWVwLmlkTG9jYWwoZHBsLCAnVHJlZUxpc3QnKTtcblxuICBjb25zdCBJdGVtID0gKHsgaXNBY3RpdmUsIGxpbmssIHBvc2l0aW9uIH0pID0+IHtcbiAgICBjb25zdCBnbyA9IEdvLnVzZUdvKCk7XG4gICAgcmV0dXJuIDxjLkJ1dHRvbiB2YXJpYW50PXtpc0FjdGl2ZSA/ICdwbGFuZXRBY3RpdmUnIDogJ3BsYW5ldCd9XG4gICAgICBvbkNsaWNrPXsoKSA9PiBnby5nby5mb2N1cyhsaW5rLmlkKS5nby5kbyhsaW5rLmlkKX1cbiAgICA+e2xpbmsuaWNvbn08L2MuQnV0dG9uPjtcbiAgfTtcblxuICByZXR1cm4gKHtcbiAgICBnbyxcblxuICAgIGxpbmtJZCxcbiAgICBkZWxldGVEaXNjbG9zdXJlOiBfZGVsZXRlRGlzY2xvc3VyZSxcbiAgICBmaW5kZXJEaXNjbG9zdXJlOiBfZmluZGVyRGlzY2xvc3VyZSxcblxuICAgIGlzQWN0aXZlID0gZmFsc2UsXG4gIH0sIHJlZikgPT4ge1xuICAgIGNvbnN0IHsgY3kgfSA9IGdvLnVzZUdyYXBoKCk7XG5cbiAgICBjb25zdCBsaW5rcyA9IFtcbiAgICAgIHsgaWQ6ICdjb250YWlucycsIGljb246IDw+8J+Xgu+4jzwvPiB9LFxuICAgICAgeyBpZDogJ2ZpbmRlcicsIGljb246IDw+8J+qrDwvPiB9LFxuICAgICAgeyBpZDogJ2RlbGV0ZScsIGljb246IDw+4p2MPC8+IH0sXG4gICAgICB7IGlkOiAnaGFuZGxlcnMnLCBpY29uOiA8PvCfkYHvuI88Lz4gfSxcbiAgICAgIHsgaWQ6ICd0cmVlcycsIGljb246IDw+8J+OhDwvPiB9LFxuICAgIF07XG5cbiAgICBjb25zdCBmb2N1cyA9IHt9O1xuICAgIGZvciAobGV0IGwgaW4gbGlua3MpIHtcbiAgICAgIGZvY3VzW2xpbmtzW2xdLmlkXSA9IChnLHYsbykgPT4ge31cbiAgICB9XG5cbiAgICByZXR1cm4gPGdvLk9uIGRvPXt7XG4gICAgfX0gZm9jdXM9e2ZvY3VzfT5cbiAgICAgIDxnby5Db21wb25lbnRcbiAgICAgICAgb3Blbj17aXNBY3RpdmV9XG4gICAgICAgIHBhdGg9e1tkcGwsICdQbGFuZXQnXX0gbGlua3M9e2xpbmtzfVxuICAgICAgICBJdGVtPXtJdGVtfVxuICAgICAgICBvcmJpdFJhZGl1cz17MTMwfSBtYXNzPXszfVxuICAgICAgLz5cbiAgICA8L2dvLk9uPjtcbiAgfTtcbn0iXX0=",
          "link_id": 20154
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 20480,
      "src_id": 20474,
      "handler_id": 20478,
      "execution_provider_id": 33,
      "isolation_provider_id": 144,
      "dist": {
        "id": 20480,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 1788,
          "value": "({ deep, data, require, Go }) => {\n    const React = require('react');\n    const c = require('@chakra-ui/react');\n    const _ = require('lodash');\n    const moment = require('moment');\n    const { useDebounceCallback } = require('@react-hook/debounce');\n    var dpl = '@deep-foundation/perception-links';\n    var dc = '@deep-foundation/core';\n    const Stack = deep.idLocal(dpl, 'Stack');\n    const Queries = deep.idLocal(dpl, 'Queries');\n    const Compatable = deep.idLocal(dpl, 'Compatable');\n    const Handler = deep.idLocal(dc, 'Handler');\n    const Query = deep.idLocal(dpl, 'Query');\n    const QueriesClient = deep.idLocal(dpl, 'QueriesClient');\n    let initialMemoryObject = {\n        useQuery: {}, useSubscription: {}, select: {}, subscribe: {}, insert: {}, update: {}, 'delete': {},\n    };\n    if (typeof (window) === 'object') {\n        if (window._deep_perception_queries_memory)\n            initialMemoryObject = window._deep_perception_queries_memory;\n        window._deep_perception_queries_memory = initialMemoryObject;\n    }\n    return ({ go, isActive = false, children, }, ref) => {\n        const containerRef = React.useMemo(() => go.root().ref, []);\n        const { sync, setSync } = React.useContext(go.HandlerConfigContext);\n        const mode = React.useState('useQuery');\n        const modeRef = React.useRef(mode);\n        modeRef.current = mode[0];\n        const modes = Object.keys(initialMemoryObject);\n        const [list, setList] = React.useState([]);\n        const generateList = React.useCallback(() => {\n            if (!modeRef.current)\n                return;\n            const list = _.chain(Object.values(initialMemoryObject[modeRef.current] || {})).sortBy('mounted').reverse().value();\n            setList(list);\n        }, []);\n        const generateListDebounced = useDebounceCallback(generateList, 1000);\n        const apply = React.useCallback((mode, event) => {\n            const prev = initialMemoryObject[mode][event.name] || {};\n            const next = initialMemoryObject[mode][event.name] = { id: event.name, mode, ...prev, ...event, count: (prev?.count || 0) + 1 };\n            next[next.mounted ? 'updated' : 'mounted'] = new Date().valueOf();\n            if (mode === modeRef.current)\n                generateListDebounced();\n        }, []);\n        const unapply = React.useCallback((mode, event) => {\n            delete initialMemoryObject[mode][event.name];\n            if (mode === modeRef.current)\n                generateListDebounced();\n        }, []);\n        const events = React.useMemo(() => ({\n            'useQuery.mount': (event) => apply('useQuery', event),\n            'useQuery': (event) => apply('useQuery', event),\n            'useQuery.unmount': (event) => unapply('useQuery', event),\n            'useSubscription.mount': (event) => apply('useSubscription', event),\n            'useSubscription': (event) => apply('useSubscription', event),\n            'useSubscription.unmount': (event) => unapply('useSubscription', event),\n            'select': (event) => apply('select', event),\n            'subscribe.before': (event) => apply('subscribe', event),\n            'subscribe': (event) => apply('subscribe', event),\n            'insert': (event) => apply('insert', event),\n            'update': (event) => apply('update', event),\n            'delete': (event) => apply('delete', event),\n        }), []);\n        React.useEffect(() => {\n            const sub = (name) => events?.[name] && deep.emitter.on(name, events?.[name]);\n            Object.keys(events).forEach(name => sub(name));\n        }, []);\n        const [opened, setOpened] = React.useState();\n        const Item = React.useMemo(() => React.memo(({ link, isActive }) => {\n            const go = Go.useGo();\n            const q = JSON.stringify(link?.query);\n            return React.createElement(go.On, { do: {\n                    exec: (g, v, o) => setOpened(link),\n                } },\n                React.createElement(c.Button, { bg: isActive ? 'deepBgDark' : undefined, onClick: () => go.do('exec'), w: '100%' },\n                    React.createElement(c.Flex, { w: '100%' },\n                        React.createElement(c.Box, { flex: '1', p: '0.5em', pl: '1em' },\n                            React.createElement(c.Box, { noOfLines: 1, textAlign: 'left' },\n                                q.slice(0, 43),\n                                q.length > 43 ? '...' : ''),\n                            !!link?.value && React.createElement(c.Box, { noOfLines: 1 }, JSON.stringify(link?.value))),\n                        React.createElement(c.Box, { p: '0.25em', pr: '1em', fontSize: 'xs' },\n                            React.createElement(c.Box, null, moment(link.mounted).format('HH:mm:ss')),\n                            !!link.updated && React.createElement(c.Box, null, moment(link.updated).format('HH:mm:ss'))))));\n        }, _.isEqual), []);\n        React.useMemo(() => {\n            setOpened();\n            generateList();\n        }, [mode[0]]);\n        React.useMemo(() => {\n            if (!go.value)\n                mode[1]();\n            else if (!mode)\n                mode[1]('useQuery');\n        }, [go.value]);\n        React.useMemo(() => {\n            opened && go.focus(Query);\n        }, [opened]);\n        return React.createElement(go.On, { do: {\n                focus: (g, v, id, o) => {\n                    if (!v)\n                        go.set('useQuery');\n                    else if (modes.includes(v))\n                        setMode(v);\n                },\n                right: (g, v, o) => {\n                    mode[1](go.next(modes.map(m => ({ id: m })), mode[0]));\n                },\n                left: (g, v, o) => {\n                    modes[0] === mode[0] ? go.set() : mode[1](go.prev(modes.map(m => ({ id: m })), mode[0]));\n                },\n            } },\n            React.createElement(c.Popover, { placement: 'right-end', closeOnBlur: false, isOpen: !!go.value, onClose: () => go.set() },\n                React.createElement(c.PopoverTrigger, null,\n                    React.createElement(c.Button, { ref: ref, w: '3em', h: '3em', variant: !!go.value || isActive ? 'active' : undefined, onClick: () => go.value ? go.set() : go.set('useQuery') }, children)),\n                React.createElement(c.Portal, { containerRef: containerRef },\n                    React.createElement(c.PopoverContent, { w: '30em', maxH: '30em', minH: '30em', position: 'relative' },\n                        React.createElement(c.PopoverArrow, null),\n                        React.createElement(c.Flex, { direction: 'column', position: 'absolute', top: '0', left: '0', w: '100%', h: '100%' },\n                            React.createElement(c.Flex, { overflowX: 'scroll', css: go.noScrollBar },\n                                React.createElement(c.Flex, { columns: modes.length, flex: '1' }, modes.map(m => React.createElement(c.Button, { ...go.activator(mode, m) }, m))),\n                                React.createElement(c.Divider, { orientation: 'vertical' }),\n                                React.createElement(c.Button, { ...go.activator([sync, setSync], true) }, \"sync\")),\n                            React.createElement(c.Divider, null),\n                            React.createElement(go.Provider, { linkId: Stack, value: list?.[0]?.id }, !opened && React.createElement(go.Component, { key: mode[0], path: [dpl, 'Stack'], direction: 'vertical', links: list, Item: Item, flex: '1' })),\n                            !!opened && React.createElement(React.Fragment, null,\n                                React.createElement(go.Provider, { linkId: Query, value: list?.[0]?.id },\n                                    React.createElement(go.Component, { path: [dpl, 'Query'], event: opened }))))))));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxDQUFDLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRTtJQUM5QixNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7SUFFL0IsTUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLGtCQUFrQixDQUFDLENBQUM7SUFDdEMsTUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQzVCLE1BQU0sTUFBTSxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUNqQyxNQUFNLEVBQUUsbUJBQW1CLEVBQUUsR0FBRyxPQUFPLENBQUMsc0JBQXNCLENBQUMsQ0FBQztJQUVoRSxJQUFJLEdBQUcsR0FBRyxtQ0FBbUMsQ0FBQztJQUM5QyxJQUFJLEVBQUUsR0FBRyx1QkFBdUIsQ0FBQztJQUVqQyxNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxPQUFPLENBQUMsQ0FBQztJQUN6QyxNQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxTQUFTLENBQUMsQ0FBQztJQUM3QyxNQUFNLFVBQVUsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxZQUFZLENBQUMsQ0FBQztJQUNuRCxNQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUUsRUFBRSxTQUFTLENBQUMsQ0FBQztJQUM1QyxNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxPQUFPLENBQUMsQ0FBQztJQUN6QyxNQUFNLGFBQWEsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxlQUFlLENBQUMsQ0FBQztJQUV6RCxJQUFJLG1CQUFtQixHQUFHO1FBQ3hCLFFB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SSxFQUFFLENBQUMsQ0FBQyxJQUFHLENBQUMsQ0FBWSxDQUFDLENBQzdEO2dDQUNULG9CQUFDLENBQUMsQ0FBQyxPQUFPLElBQUMsV0FBVyxFQUFDLFVBQVUsR0FBRztnQ0FDcEMsb0JBQUMsQ0FBQyxDQUFDLE1BQU0sT0FBSyxFQUFFLENBQUMsU0FBUyxDQUFDLENBQUMsSUFBSSxFQUFFLE9BQU8sQ0FBQyxFQUFFLElBQUksQ0FBQyxXQUFpQixDQUMzRDs0QkFDVCxvQkFBQyxDQUFDLENBQUMsT0FBTyxPQUFFOzRCQUNaLG9CQUFDLEVBQUUsQ0FBQyxRQUFRLElBQUMsTUFBTSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxJQUM3QyxDQUFDLE1BQU0sSUFBSSxvQkFBQyxFQUFFLENBQUMsU0FBUyxJQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsR0FBRyxFQUFFLE9BQU8sQ0FBQyxFQUFFLFNBQVMsRUFBQyxVQUFVLEVBQUMsS0FBSyxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBQyxHQUFHLEdBQUUsQ0FDMUc7NEJBQ2IsQ0FBQyxDQUFDLE1BQU0sSUFBSTtnQ0FDWCxvQkFBQyxFQUFFLENBQUMsUUFBUSxJQUFDLE1BQU0sRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUU7b0NBQzlDLG9CQUFDLEVBQUUsQ0FBQyxTQUFTLElBQUMsSUFBSSxFQUFFLENBQUMsR0FBRyxFQUFFLE9BQU8sQ0FBQyxFQUFFLEtBQUssRUFBRSxNQUFNLEdBQUcsQ0FDeEMsQ0FNYixDQUNJLENBQ1EsQ0FDVixDQUNELENBQ04sQ0FBQztJQUNYLENBQUMsQ0FBQztBQUNKLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbIih7IGRlZXAsIGRhdGEsIHJlcXVpcmUsIEdvIH0pID0+IHtcbiAgY29uc3QgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuICBcbiAgY29uc3QgYyA9IHJlcXVpcmUoJ0BjaGFrcmEtdWkvcmVhY3QnKTtcbiAgY29uc3QgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xuICBjb25zdCBtb21lbnQgPSByZXF1aXJlKCdtb21lbnQnKTtcbiAgY29uc3QgeyB1c2VEZWJvdW5jZUNhbGxiYWNrIH0gPSByZXF1aXJlKCdAcmVhY3QtaG9vay9kZWJvdW5jZScpO1xuXG4gIHZhciBkcGwgPSAnQGRlZXAtZm91bmRhdGlvbi9wZXJjZXB0aW9uLWxpbmtzJztcbiAgdmFyIGRjID0gJ0BkZWVwLWZvdW5kYXRpb24vY29yZSc7XG5cbiAgY29uc3QgU3RhY2sgPSBkZWVwLmlkTG9jYWwoZHBsLCAnU3RhY2snKTtcbiAgY29uc3QgUXVlcmllcyA9IGRlZXAuaWRMb2NhbChkcGwsICdRdWVyaWVzJyk7XG4gIGNvbnN0IENvbXBhdGFibGUgPSBkZWVwLmlkTG9jYWwoZHBsLCAnQ29tcGF0YWJsZScpO1xuICBjb25zdCBIYW5kbGVyID0gZGVlcC5pZExvY2FsKGRjLCAnSGFuZGxlcicpO1xuICBjb25zdCBRdWVyeSA9IGRlZXAuaWRMb2NhbChkcGwsICdRdWVyeScpO1xuICBjb25zdCBRdWVyaWVzQ2xpZW50ID0gZGVlcC5pZExvY2FsKGRwbCwgJ1F1ZXJpZXNDbGllbnQnKTtcblxuICBsZXQgaW5pdGlhbE1lbW9yeU9iamVjdCA9IHtcbiAgICB1c2VRdWVyeToge30sIHVzZVN1YnNjcmlwdGlvbjoge30sIHNlbGVjdDoge30sIHN1YnNjcmliZToge30sIGluc2VydDoge30sIHVwZGF0ZToge30sICdkZWxldGUnOiB7fSxcbiAgfTtcbiAgaWYgKHR5cGVvZih3aW5kb3cpID09PSAnb2JqZWN0Jykge1xuICAgIGlmICh3aW5kb3cuX2RlZXBfcGVyY2VwdGlvbl9xdWVyaWVzX21lbW9yeSkgaW5pdGlhbE1lbW9yeU9iamVjdCA9IHdpbmRvdy5fZGVlcF9wZXJjZXB0aW9uX3F1ZXJpZXNfbWVtb3J5O1xuICAgIHdpbmRvdy5fZGVlcF9wZXJjZXB0aW9uX3F1ZXJpZXNfbWVtb3J5ID0gaW5pdGlhbE1lbW9yeU9iamVjdDtcbiAgfVxuXG4gIHJldHVybiAoe1xuICAgIGdvLFxuXG4gICAgaXNBY3RpdmUgPSBmYWxzZSxcblxuICAgIGNoaWxkcmVuLFxuICB9LCByZWYpID0+IHtcbiAgICBjb25zdCBjb250YWluZXJSZWYgPSBSZWFjdC51c2VNZW1vKCgpID0+IGdvLnJvb3QoKS5yZWYsIFtdKTtcblxuICAgIGNvbnN0IHsgc3luYywgc2V0U3luYyB9ID0gUmVhY3QudXNlQ29udGV4dChnby5IYW5kbGVyQ29uZmlnQ29udGV4dCk7XG4gICAgY29uc3QgbW9kZSA9IFJlYWN0LnVzZVN0YXRlKCd1c2VRdWVyeScpO1xuICAgIGNvbnN0IG1vZGVSZWYgPSBSZWFjdC51c2VSZWYobW9kZSk7IG1vZGVSZWYuY3VycmVudCA9IG1vZGVbMF07XG5cbiAgICBjb25zdCBtb2RlcyA9IE9iamVjdC5rZXlzKGluaXRpYWxNZW1vcnlPYmplY3QpO1xuXG4gICAgY29uc3QgW2xpc3QsIHNldExpc3RdID0gUmVhY3QudXNlU3RhdGUoW10pO1xuICAgIGNvbnN0IGdlbmVyYXRlTGlzdCA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICAgIGlmICghbW9kZVJlZi5jdXJyZW50KSByZXR1cm47XG4gICAgICBjb25zdCBsaXN0ID0gXy5jaGFpbihPYmplY3QudmFsdWVzKGluaXRpYWxNZW1vcnlPYmplY3RbbW9kZVJlZi5jdXJyZW50XSB8fCB7fSkpLnNvcnRCeSgnbW91bnRlZCcpLnJldmVyc2UoKS52YWx1ZSgpO1xuICAgICAgc2V0TGlzdChsaXN0KTtcbiAgICB9LCBbXSk7XG4gICAgY29uc3QgZ2VuZXJhdGVMaXN0RGVib3VuY2VkID0gdXNlRGVib3VuY2VDYWxsYmFjayhnZW5lcmF0ZUxpc3QsIDEwMDApO1xuXG4gICAgY29uc3QgYXBwbHkgPSBSZWFjdC51c2VDYWxsYmFjaygobW9kZSwgZXZlbnQpID0+IHtcbiAgICAgIGNvbnN0IHByZXYgPSBpbml0aWFsTWVtb3J5T2JqZWN0W21vZGVdW2V2ZW50Lm5hbWVdIHx8IHt9O1xuICAgICAgY29uc3QgbmV4dCA9IGluaXRpYWxNZW1vcnlPYmplY3RbbW9kZV1bZXZlbnQubmFtZV0gPSB7IGlkOiBldmVudC5uYW1lLCBtb2RlLCAuLi5wcmV2LCAuLi5ldmVudCwgY291bnQ6IChwcmV2Py5jb3VudCB8fCAwKSArIDEgfTtcbiAgICAgIG5leHRbbmV4dC5tb3VudGVkID8gJ3VwZGF0ZWQnIDogJ21vdW50ZWQnXSA9IG5ldyBEYXRlKCkudmFsdWVPZigpO1xuICAgICAgaWYgKG1vZGUgPT09IG1vZGVSZWYuY3VycmVudCkgZ2VuZXJhdGVMaXN0RGVib3VuY2VkKCk7XG4gICAgfSwgW10pO1xuXG4gICAgY29uc3QgdW5hcHBseSA9IFJlYWN0LnVzZUNhbGxiYWNrKChtb2RlLCBldmVudCkgPT4ge1xuICAgICAgZGVsZXRlIGluaXRpYWxNZW1vcnlPYmplY3RbbW9kZV1bZXZlbnQubmFtZV07XG4gICAgICBpZiAobW9kZSA9PT0gbW9kZVJlZi5jdXJyZW50KSBnZW5lcmF0ZUxpc3REZWJvdW5jZWQoKTtcbiAgICB9LCBbXSk7XG5cbiAgICBjb25zdCBldmVudHMgPSBSZWFjdC51c2VNZW1vKCgpID0+ICh7XG4gICAgICAndXNlUXVlcnkubW91bnQnOiAoZXZlbnQpID0+IGFwcGx5KCd1c2VRdWVyeScsIGV2ZW50KSxcbiAgICAgICd1c2VRdWVyeSc6IChldmVudCkgPT4gYXBwbHkoJ3VzZVF1ZXJ5JywgZXZlbnQpLFxuICAgICAgJ3VzZVF1ZXJ5LnVubW91bnQnOiAoZXZlbnQpID0+IHVuYXBwbHkoJ3VzZVF1ZXJ5JywgZXZlbnQpLFxuICAgICAgJ3VzZVN1YnNjcmlwdGlvbi5tb3VudCc6IChldmVudCkgPT4gYXBwbHkoJ3VzZVN1YnNjcmlwdGlvbicsIGV2ZW50KSxcbiAgICAgICd1c2VTdWJzY3JpcHRpb24nOiAoZXZlbnQpID0+IGFwcGx5KCd1c2VTdWJzY3JpcHRpb24nLCBldmVudCksXG4gICAgICAndXNlU3Vic2NyaXB0aW9uLnVubW91bnQnOiAoZXZlbnQpID0+IHVuYXBwbHkoJ3VzZVN1YnNjcmlwdGlvbicsIGV2ZW50KSxcbiAgICAgICdzZWxlY3QnOiAoZXZlbnQpID0+IGFwcGx5KCdzZWxlY3QnLCBldmVudCksXG4gICAgICAnc3Vic2NyaWJlLmJlZm9yZSc6IChldmVudCkgPT4gYXBwbHkoJ3N1YnNjcmliZScsIGV2ZW50KSxcbiAgICAgICdzdWJzY3JpYmUnOiAoZXZlbnQpID0+IGFwcGx5KCdzdWJzY3JpYmUnLCBldmVudCksXG4gICAgICAnaW5zZXJ0JzogKGV2ZW50KSA9PiBhcHBseSgnaW5zZXJ0JywgZXZlbnQpLFxuICAgICAgJ3VwZGF0ZSc6IChldmVudCkgPT4gYXBwbHkoJ3VwZGF0ZScsIGV2ZW50KSxcbiAgICAgICdkZWxldGUnOiAoZXZlbnQpID0+IGFwcGx5KCdkZWxldGUnLCBldmVudCksXG4gICAgfSksIFtdKTtcblxuICAgIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICBjb25zdCBzdWIgPSAobmFtZSkgPT4gZXZlbnRzPy5bbmFtZV0gJiYgZGVlcC5lbWl0dGVyLm9uKG5hbWUsIGV2ZW50cz8uW25hbWVdKTtcbiAgICAgIE9iamVjdC5rZXlzKGV2ZW50cykuZm9yRWFjaChuYW1lID0+IHN1YihuYW1lKSk7XG4gICAgfSwgW10pO1xuXG4gICAgY29uc3QgW29wZW5lZCwgc2V0T3BlbmVkXSA9IFJlYWN0LnVzZVN0YXRlKCk7XG5cbiAgICBjb25zdCBJdGVtID0gUmVhY3QudXNlTWVtbygoKSA9PiBSZWFjdC5tZW1vKCh7IGxpbmssIGlzQWN0aXZlIH0pID0+IHtcbiAgICAgIGNvbnN0IGdvID0gR28udXNlR28oKTtcblxuICAgICAgY29uc3QgcSA9IEpTT04uc3RyaW5naWZ5KGxpbms/LnF1ZXJ5KTtcblxuICAgICAgcmV0dXJuIDxnby5PbiBkbz17e1xuICAgICAgICBleGVjOiAoZyx2LG8pID0+IHNldE9wZW5lZChsaW5rKSxcbiAgICAgIH19PlxuICAgICAgICA8Yy5CdXR0b24gYmc9e2lzQWN0aXZlID8gJ2RlZXBCZ0RhcmsnIDogdW5kZWZpbmVkfSBvbkNsaWNrPXsoKSA9PiBnby5kbygnZXhlYycpfSB3PScxMDAlJz5cbiAgICAgICAgICA8Yy5GbGV4IHc9JzEwMCUnPlxuICAgICAgICAgICAgPGMuQm94IGZsZXg9JzEnIHA9JzAuNWVtJyBwbD0nMWVtJz5cbiAgICAgICAgICAgICAgPGMuQm94IG5vT2ZMaW5lcz17MX0gdGV4dEFsaWduPSdsZWZ0Jz5cbiAgICAgICAgICAgICAgICB7cS5zbGljZSgwLCA0Myl9e3EubGVuZ3RoID4gNDMgPyAnLi4uJyA6ICcnfVxuICAgICAgICAgICAgICA8L2MuQm94PlxuICAgICAgICAgICAgICB7ISFsaW5rPy52YWx1ZSAmJiA8Yy5Cb3ggbm9PZkxpbmVzPXsxfT5cbiAgICAgICAgICAgICAgICB7SlNPTi5zdHJpbmdpZnkobGluaz8udmFsdWUpfVxuICAgICAgICAgICAgICA8L2MuQm94Pn1cbiAgICAgICAgICAgIDwvYy5Cb3g+XG4gICAgICAgICAgICA8Yy5Cb3ggcD0nMC4yNWVtJyBwcj0nMWVtJyBmb250U2l6ZT0neHMnPlxuICAgICAgICAgICAgICA8Yy5Cb3g+e21vbWVudChsaW5rLm1vdW50ZWQpLmZvcm1hdCgnSEg6bW06c3MnKX08L2MuQm94PlxuICAgICAgICAgICAgICB7ISFsaW5rLnVwZGF0ZWQgJiYgPGMuQm94Pnttb21lbnQobGluay51cGRhdGVkKS5mb3JtYXQoJ0hIOm1tOnNzJyl9PC9jLkJveD59XG4gICAgICAgICAgICA8L2MuQm94PlxuICAgICAgICAgIDwvYy5GbGV4PlxuICAgICAgICA8L2dvLkJ1dHRvbj5cbiAgICAgIDwvZ28uT24+XG4gICAgfSwgXy5pc0VxdWFsKSwgW10pO1xuXG4gICAgUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgICBzZXRPcGVuZWQoKTtcbiAgICAgIGdlbmVyYXRlTGlzdCgpO1xuICAgIH0sIFttb2RlWzBdXSk7XG5cbiAgICBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICAgIGlmICghZ28udmFsdWUpIG1vZGVbMV0oKTtcbiAgICAgIGVsc2UgaWYgKCFtb2RlKSBtb2RlWzFdKCd1c2VRdWVyeScpO1xuICAgIH0sIFtnby52YWx1ZV0pO1xuXG4gICAgUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgICBvcGVuZWQgJiYgZ28uZm9jdXMoUXVlcnkpO1xuICAgIH0sIFtvcGVuZWRdKTtcblxuICAgIHJldHVybiA8Z28uT25cbiAgICAgIGRvPXt7XG4gICAgICAgIGZvY3VzOiAoZyx2LGlkLG8pID0+IHtcbiAgICAgICAgICBpZiAoIXYpIGdvLnNldCgndXNlUXVlcnknKTtcbiAgICAgICAgICBlbHNlIGlmIChtb2Rlcy5pbmNsdWRlcyh2KSkgc2V0TW9kZSh2KTtcbiAgICAgICAgfSxcbiAgICAgICAgcmlnaHQ6IChnLHYsbykgPT4ge1xuICAgICAgICAgIG1vZGVbMV0oZ28ubmV4dChtb2Rlcy5tYXAobSA9PiAoeyBpZDogbSB9KSksIG1vZGVbMF0pKTtcbiAgICAgICAgfSxcbiAgICAgICAgbGVmdDogKGcsdixvKSA9PiB7XG4gICAgICAgICAgbW9kZXNbMF0gPT09IG1vZGVbMF0gID8gZ28uc2V0KCkgOiBtb2RlWzFdKGdvLnByZXYobW9kZXMubWFwKG0gPT4gKHsgaWQ6IG0gfSkpLCBtb2RlWzBdKSk7XG4gICAgICAgIH0sXG4gICAgICB9fVxuICAgID5cbiAgICAgIDxjLlBvcG92ZXIgcGxhY2VtZW50PSdyaWdodC1lbmQnIGNsb3NlT25CbHVyPXtmYWxzZX0gaXNPcGVuPXshIWdvLnZhbHVlfSBvbkNsb3NlPXsoKSA9PiBnby5zZXQoKX0+XG4gICAgICAgIDxjLlBvcG92ZXJUcmlnZ2VyPlxuICAgICAgICAgIDxjLkJ1dHRvblxuICAgICAgICAgICAgcmVmPXtyZWZ9IHc9JzNlbScgaD0nM2VtJyB2YXJpYW50PXshIWdvLnZhbHVlIHx8IGlzQWN0aXZlID8gJ2FjdGl2ZScgOiB1bmRlZmluZWR9XG4gICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBnby52YWx1ZSA/IGdvLnNldCgpIDogZ28uc2V0KCd1c2VRdWVyeScpfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIHtjaGlsZHJlbn1cbiAgICAgICAgICA8L2MuQnV0dG9uPlxuICAgICAgICA8L2MuUG9wb3ZlclRyaWdnZXI+XG4gICAgICAgIDxjLlBvcnRhbCBjb250YWluZXJSZWY9e2NvbnRhaW5lclJlZn0+XG4gICAgICAgICAgPGMuUG9wb3ZlckNvbnRlbnQgdz0nMzBlbScgbWF4SD0nMzBlbScgbWluSD0nMzBlbScgcG9zaXRpb249J3JlbGF0aXZlJz5cbiAgICAgICAgICAgIDxjLlBvcG92ZXJBcnJvdyAvPlxuICAgICAgICAgICAgPGMuRmxleCBkaXJlY3Rpb249J2NvbHVtbicgcG9zaXRpb249J2Fic29sdXRlJyB0b3A9JzAnIGxlZnQ9JzAnIHc9JzEwMCUnIGg9JzEwMCUnPlxuICAgICAgICAgICAgICA8Yy5GbGV4IG92ZXJmbG93WD0nc2Nyb2xsJyBjc3M9e2dvLm5vU2Nyb2xsQmFyfT5cbiAgICAgICAgICAgICAgICA8Yy5GbGV4IGNvbHVtbnM9e21vZGVzLmxlbmd0aH0gZmxleD0nMSc+XG4gICAgICAgICAgICAgICAgICB7bW9kZXMubWFwKG0gPT4gPGMuQnV0dG9uIHsuLi5nby5hY3RpdmF0b3IobW9kZSwgbSl9PnttfTwvYy5CdXR0b24+KX1cbiAgICAgICAgICAgICAgICA8L2MuRmxleD5cbiAgICAgICAgICAgICAgICA8Yy5EaXZpZGVyIG9yaWVudGF0aW9uPSd2ZXJ0aWNhbCcgLz5cbiAgICAgICAgICAgICAgICA8Yy5CdXR0b24gey4uLmdvLmFjdGl2YXRvcihbc3luYywgc2V0U3luY10sIHRydWUpfT5zeW5jPC9jLkJ1dHRvbj5cbiAgICAgICAgICAgICAgPC9jLkZsZXg+XG4gICAgICAgICAgICAgIDxjLkRpdmlkZXIvPlxuICAgICAgICAgICAgICA8Z28uUHJvdmlkZXIgbGlua0lkPXtTdGFja30gdmFsdWU9e2xpc3Q/LlswXT8uaWR9PlxuICAgICAgICAgICAgICAgIHshb3BlbmVkICYmIDxnby5Db21wb25lbnQga2V5PXttb2RlWzBdfSBwYXRoPXtbZHBsLCAnU3RhY2snXX0gZGlyZWN0aW9uPSd2ZXJ0aWNhbCcgbGlua3M9e2xpc3R9IEl0ZW09e0l0ZW19IGZsZXg9JzEnLz59XG4gICAgICAgICAgICAgIDwvZ28uUHJvdmlkZXI+XG4gICAgICAgICAgICAgIHshIW9wZW5lZCAmJiA8PlxuICAgICAgICAgICAgICAgIDxnby5Qcm92aWRlciBsaW5rSWQ9e1F1ZXJ5fSB2YWx1ZT17bGlzdD8uWzBdPy5pZH0+XG4gICAgICAgICAgICAgICAgICA8Z28uQ29tcG9uZW50IHBhdGg9e1tkcGwsICdRdWVyeSddfSBldmVudD17b3BlbmVkfS8+XG4gICAgICAgICAgICAgICAgPC9nby5Qcm92aWRlcj5cbiAgICAgICAgICAgICAgICB7LyogPGdvLkNvbXBvbmVudCBwYXRoPXtbZHBsLCAnU3RhY2snXX0gZGlyZWN0aW9uPSdob3Jpem9udGFsJyBsaW5rcz17dmlld3N9IEl0ZW09e1ZpZXdJdGVtfS8+ICovfVxuICAgICAgICAgICAgICAgIHsvKiA8Z28uQ29tcG9uZW50IHBhdGg9e1tkcGwsICdRdWVyaWVzR1FMJ119IGV4dGVuZEluc2VydD17eyBvdXQ6IHsgdHlwZV9pZDogQ29tcGF0YWJsZSwgdG9faWQ6IFF1ZXJpZXMgfSB9fS8+XG4gICAgICAgICAgICAgICAgPGdvLkNvbXBvbmVudCBwYXRoPXtbZHBsLCAnUXVlcmllc1JlYWN0J119IGV4dGVuZEluc2VydD17eyBvdXQ6IHsgdHlwZV9pZDogQ29tcGF0YWJsZSwgdG9faWQ6IFF1ZXJpZXMgfSB9fS8+XG4gICAgICAgICAgICAgICAgPGdvLkNvbXBvbmVudCBwYXRoPXtbZHBsLCAnUXVlcmllc0NsaWVudCddfSBleHRlbmRJbnNlcnQ9e3sgb3V0OiB7IHR5cGVfaWQ6IENvbXBhdGFibGUsIHRvX2lkOiBRdWVyaWVzIH0gfX0vPlxuICAgICAgICAgICAgICAgIDxnby5Db21wb25lbnQgcGF0aD17W2RwbCwgJ1F1ZXJpZXNSZXN1bHRzJ119IGV4dGVuZEluc2VydD17eyBvdXQ6IHsgdHlwZV9pZDogQ29tcGF0YWJsZSwgdG9faWQ6IFF1ZXJpZXMgfSB9fS8+ICovfVxuICAgICAgICAgICAgICA8Lz59XG4gICAgICAgICAgICA8L2MuRmxleD5cbiAgICAgICAgICA8L2MuUG9wb3ZlckNvbnRlbnQ+XG4gICAgICAgIDwvYy5Qb3J0YWw+XG4gICAgICA8L2MuUG9wb3Zlcj5cbiAgICA8L2dvLk9uPjtcbiAgfTtcbn0iXX0=",
          "link_id": 20480
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 21157,
      "src_id": 21151,
      "handler_id": 21155,
      "execution_provider_id": 33,
      "isolation_provider_id": 144,
      "dist": {
        "id": 21157,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 1796,
          "value": "({ deep, data, require, Go }) => {\n    const React = require('react');\n    const c = require('@chakra-ui/react');\n    return ({ go, children, }, ref) => {\n        return React.createElement(go.On, { do: {} },\n            React.createElement(c.Box, { ref: ref, h: '3em' }, `${go}`));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxDQUFDLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRTtJQUM5QixNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7SUFFL0IsTUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLGtCQUFrQixDQUFDLENBQUM7SUFFdEMsT0FBTyxDQUFDLEVBQ04sRUFBRSxFQUVGLFFBQVEsR0FDVCxFQUFFLEdBQUcsRUFBRSxFQUFFO1FBQ1IsT0FBTyxvQkFBQyxFQUFFLENBQUMsRUFBRSxJQUNYLEVBQUUsRUFBRSxFQUNIO1lBRUQsb0JBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBQyxLQUFLLElBQUUsR0FBRyxFQUFFLEVBQUUsQ0FBUyxDQUNwQyxDQUFDO0lBQ1gsQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiKHsgZGVlcCwgZGF0YSwgcmVxdWlyZSwgR28gfSkgPT4ge1xuICBjb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG4gIFxuICBjb25zdCBjID0gcmVxdWlyZSgnQGNoYWtyYS11aS9yZWFjdCcpO1xuXG4gIHJldHVybiAoe1xuICAgIGdvLFxuXG4gICAgY2hpbGRyZW4sXG4gIH0sIHJlZikgPT4ge1xuICAgIHJldHVybiA8Z28uT25cbiAgICAgIGRvPXt7XG4gICAgICB9fVxuICAgID5cbiAgICAgIDxjLkJveCByZWY9e3JlZn0gaD0nM2VtJz57YCR7Z299YH08L2MuQm94PlxuICAgIDwvZ28uT24+O1xuICB9O1xufSJdfQ==",
          "link_id": 21157
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 21751,
      "src_id": 21743,
      "handler_id": 21747,
      "execution_provider_id": 33,
      "isolation_provider_id": 144,
      "dist": {
        "id": 21751,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 1805,
          "value": "async ({ deep, data, Go, require }) => {\n    const React = require('react');\n    const { GrGraphQl } = require(\"react-icons/gr\");\n    const c = require('@chakra-ui/react');\n    const _ = require('lodash');\n    const dpl = '@deep-foundation/perception-links';\n    const dc = '@deep-foundation/core';\n    return ({ go, handlerId, isActive, }, ref) => {\n        const View = React.useCallback(({ event }) => {\n            const value = `// query\n${event?.remoteQuery?.query?.queryString || ''}\n\n// variables\n${JSON.stringify(event?.remoteQuery?.query?.variables || {}, null, 2)}\n`;\n            return React.createElement(Go.Editor, { editable: false, readOnly: true, value: value, fillSize: true });\n        }, []);\n        return React.createElement(go.On, { do: {\n                exec: (g, v, o) => go.do('view', { id: go.linkId, Component: View })\n            } },\n            React.createElement(c.Button, { w: '3em', h: '3em', variant: isActive ? 'active' : undefined, ref: ref, onClick: () => go.do('exec') },\n                React.createElement(GrGraphQl, null)));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFO0lBQ3BDLE1BQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUMvQixNQUFNLEVBQUUsU0FBUyxFQUFFLEdBQUcsT0FBTyxDQUFDLGdCQUFnQixDQUFDLENBQUM7SUFDaEQsTUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLGtCQUFrQixDQUFDLENBQUM7SUFDdEMsTUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBRTVCLE1BQU0sR0FBRyxHQUFHLG1DQUFtQyxDQUFDO0lBQ2hELE1BQU0sRUFBRSxHQUFHLHVCQUF1QixDQUFDO0lBRW5DLE9BQU8sQ0FBQyxFQUNOLEVBQUUsRUFDRixTQUFTLEVBRVQsUUFBUSxHQUNULEVBQUUsR0FBRyxFQUFFLEVBQUU7UUFDUixNQUFNLElBQUksR0FBRyxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUMsRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFO1lBQzNDLE1BQU0sS0FBSyxHQUFHO0VBQ2xCLEtBQUssRUFBRSxXQUFXLEVBQUUsS0FBSyxFQUFFLFdBQVcsSUFBSSxFQUFFOzs7RUFHNUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLEVBQUUsV0FBVyxFQUFFLEtBQUssRUFBRSxTQUFTLElBQUksRUFBRSxFQUFFLElBQUksRUFBRSxDQUFDLENBQUM7Q0FDcEUsQ0FBQTtZQUVLLE9BQU8sb0JBQUMsRUFBRSxDQUFDLE1BQU0sSUFBQyxRQUFRLEVBQUUsS0FBSyxFQUFFLFFBQVEsUUFBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLFFBQVEsU0FBRSxDQUFDO1FBQ3ZFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUVQLE9BQU8sb0JBQUMsRUFBRSxDQUFDLEVBQUUsSUFBQyxFQUFFLEVBQUU7Z0JBQ2hCLElBQUksRUFBRSxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsTUFBTSxFQUFFLFNBQVMsRUFBRSxJQUFJLEVBQUUsQ0FBQzthQUNuRTtZQUNDLG9CQUFDLENBQUMsQ0FBQyxNQUFNLElBQ1AsQ0FBQyxFQUFDLEtBQUssRUFBQyxDQUFDLEVBQUMsS0FBSyxFQUNmLE9BQU8sRUFBRSxRQUFRLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUN4QyxHQUFHLEVBQUUsR0FBRyxFQUNSLE9BQU8sRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQztnQkFFNUIsb0JBQUMsU0FBUyxPQUFFLENBQ0gsQ0FDTCxDQUFDO0lBQ1gsQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiYXN5bmMgKHsgZGVlcCwgZGF0YSwgR28sIHJlcXVpcmUgfSkgPT4ge1xuICBjb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG4gIGNvbnN0IHsgR3JHcmFwaFFsIH0gPSByZXF1aXJlKFwicmVhY3QtaWNvbnMvZ3JcIik7XG4gIGNvbnN0IGMgPSByZXF1aXJlKCdAY2hha3JhLXVpL3JlYWN0Jyk7XG4gIGNvbnN0IF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcblxuICBjb25zdCBkcGwgPSAnQGRlZXAtZm91bmRhdGlvbi9wZXJjZXB0aW9uLWxpbmtzJztcbiAgY29uc3QgZGMgPSAnQGRlZXAtZm91bmRhdGlvbi9jb3JlJztcblxuICByZXR1cm4gKHtcbiAgICBnbyxcbiAgICBoYW5kbGVySWQsXG5cbiAgICBpc0FjdGl2ZSxcbiAgfSwgcmVmKSA9PiB7XG4gICAgY29uc3QgVmlldyA9IFJlYWN0LnVzZUNhbGxiYWNrKCh7IGV2ZW50IH0pID0+IHtcbiAgICAgIGNvbnN0IHZhbHVlID0gYC8vIHF1ZXJ5XG4ke2V2ZW50Py5yZW1vdGVRdWVyeT8ucXVlcnk/LnF1ZXJ5U3RyaW5nIHx8ICcnfVxuXG4vLyB2YXJpYWJsZXNcbiR7SlNPTi5zdHJpbmdpZnkoZXZlbnQ/LnJlbW90ZVF1ZXJ5Py5xdWVyeT8udmFyaWFibGVzIHx8IHt9LCBudWxsLCAyKX1cbmBcbiAgXG4gICAgICByZXR1cm4gPEdvLkVkaXRvciBlZGl0YWJsZT17ZmFsc2V9IHJlYWRPbmx5IHZhbHVlPXt2YWx1ZX0gZmlsbFNpemUvPjtcbiAgICB9LCBbXSk7XG5cbiAgICByZXR1cm4gPGdvLk9uIGRvPXt7XG4gICAgICBleGVjOiAoZyx2LG8pID0+IGdvLmRvKCd2aWV3JywgeyBpZDogZ28ubGlua0lkLCBDb21wb25lbnQ6IFZpZXcgfSkpLFxuICAgIH19PlxuICAgICAgPGMuQnV0dG9uXG4gICAgICAgIHc9JzNlbScgaD0nM2VtJ1xuICAgICAgICB2YXJpYW50PXtpc0FjdGl2ZSA/ICdhY3RpdmUnIDogdW5kZWZpbmVkfVxuICAgICAgICByZWY9e3JlZn1cbiAgICAgICAgb25DbGljaz17KCkgPT4gZ28uZG8oJ2V4ZWMnKX1cbiAgICAgID5cbiAgICAgICAgPEdyR3JhcGhRbC8+XG4gICAgICA8L2MuQnV0dG9uPlxuICAgIDwvZ28uT24+O1xuICB9O1xufSJdfQ==",
          "link_id": 21751
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 21949,
      "src_id": 21926,
      "handler_id": 21940,
      "execution_provider_id": 33,
      "isolation_provider_id": 144,
      "dist": {
        "id": 21949,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 1819,
          "value": "async ({ deep, data, Go, require }) => {\n    const React = require('react');\n    const { VscJson } = require(\"react-icons/vsc\");\n    const c = require('@chakra-ui/react');\n    const _ = require('lodash');\n    const dpl = '@deep-foundation/perception-links';\n    const dc = '@deep-foundation/core';\n    return ({ go, handlerId, isActive, }, ref) => {\n        const View = React.useCallback(({ event }) => {\n            const value = JSON.stringify(event.remoteData, null, 2);\n            return React.createElement(Go.Editor, { editable: false, readOnly: true, value: value, fillSize: true });\n        }, []);\n        return React.createElement(go.On, { do: {\n                exec: (g, v, o) => go.do('view', { id: go.linkId, Component: View })\n            } },\n            React.createElement(c.Button, { w: '3em', h: '3em', variant: isActive ? 'active' : undefined, ref: ref, onClick: () => go.do('exec') },\n                React.createElement(VscJson, null)));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFO0lBQ3BDLE1BQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUMvQixNQUFNLEVBQUUsT0FBTyxFQUFFLEdBQUcsT0FBTyxDQUFDLGlCQUFpQixDQUFDLENBQUM7SUFDL0MsTUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLGtCQUFrQixDQUFDLENBQUM7SUFDdEMsTUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBRTVCLE1BQU0sR0FBRyxHQUFHLG1DQUFtQyxDQUFDO0lBQ2hELE1BQU0sRUFBRSxHQUFHLHVCQUF1QixDQUFDO0lBRW5DLE9BQU8sQ0FBQyxFQUNOLEVBQUUsRUFDRixTQUFTLEVBRVQsUUFBUSxHQUNULEVBQUUsR0FBRyxFQUFFLEVBQUU7UUFDUixNQUFNLElBQUksR0FBRyxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUMsRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFO1lBQzNDLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLFVBQVUsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFFeEQsT0FBTyxvQkFBQyxFQUFFLENBQUMsTUFBTSxJQUFDLFFBQVEsRUFBRSxLQUFLLEVBQUUsUUFBUSxRQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsUUFBUSxTQUFFLENBQUM7UUFDdkUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBRVAsT0FBTyxvQkFBQyxFQUFFLENBQUMsRUFBRSxJQUFDLEVBQUUsRUFBRTtnQkFDaEIsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxNQUFNLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxDQUFDO2FBQ25FO1lBQ0Msb0JBQUMsQ0FBQyxDQUFDLE1BQU0sSUFDUCxDQUFDLEVBQUMsS0FBSyxFQUFDLENBQUMsRUFBQyxLQUFLLEVBQ2YsT0FBTyxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQ3hDLEdBQUcsRUFBRSxHQUFHLEVBQ1IsT0FBTyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDO2dCQUU1QixvQkFBQyxPQUFPLE9BQUUsQ0FDRCxDQUNMLENBQUM7SUFDWCxDQUFDLENBQUM7QUFDSixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJhc3luYyAoeyBkZWVwLCBkYXRhLCBHbywgcmVxdWlyZSB9KSA9PiB7XG4gIGNvbnN0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbiAgY29uc3QgeyBWc2NKc29uIH0gPSByZXF1aXJlKFwicmVhY3QtaWNvbnMvdnNjXCIpO1xuICBjb25zdCBjID0gcmVxdWlyZSgnQGNoYWtyYS11aS9yZWFjdCcpO1xuICBjb25zdCBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XG5cbiAgY29uc3QgZHBsID0gJ0BkZWVwLWZvdW5kYXRpb24vcGVyY2VwdGlvbi1saW5rcyc7XG4gIGNvbnN0IGRjID0gJ0BkZWVwLWZvdW5kYXRpb24vY29yZSc7XG5cbiAgcmV0dXJuICh7XG4gICAgZ28sXG4gICAgaGFuZGxlcklkLFxuXG4gICAgaXNBY3RpdmUsXG4gIH0sIHJlZikgPT4ge1xuICAgIGNvbnN0IFZpZXcgPSBSZWFjdC51c2VDYWxsYmFjaygoeyBldmVudCB9KSA9PiB7XG4gICAgICBjb25zdCB2YWx1ZSA9IEpTT04uc3RyaW5naWZ5KGV2ZW50LnJlbW90ZURhdGEsIG51bGwsIDIpO1xuICBcbiAgICAgIHJldHVybiA8R28uRWRpdG9yIGVkaXRhYmxlPXtmYWxzZX0gcmVhZE9ubHkgdmFsdWU9e3ZhbHVlfSBmaWxsU2l6ZS8+O1xuICAgIH0sIFtdKTtcblxuICAgIHJldHVybiA8Z28uT24gZG89e3tcbiAgICAgIGV4ZWM6IChnLHYsbykgPT4gZ28uZG8oJ3ZpZXcnLCB7IGlkOiBnby5saW5rSWQsIENvbXBvbmVudDogVmlldyB9KSksXG4gICAgfX0+XG4gICAgICA8Yy5CdXR0b25cbiAgICAgICAgdz0nM2VtJyBoPSczZW0nXG4gICAgICAgIHZhcmlhbnQ9e2lzQWN0aXZlID8gJ2FjdGl2ZScgOiB1bmRlZmluZWR9XG4gICAgICAgIHJlZj17cmVmfVxuICAgICAgICBvbkNsaWNrPXsoKSA9PiBnby5kbygnZXhlYycpfVxuICAgICAgPlxuICAgICAgICA8VnNjSnNvbi8+XG4gICAgICA8L2MuQnV0dG9uPlxuICAgIDwvZ28uT24+O1xuICB9O1xufSJdfQ==",
          "link_id": 21949
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 21950,
      "src_id": 21927,
      "handler_id": 21936,
      "execution_provider_id": 33,
      "isolation_provider_id": 144,
      "dist": {
        "id": 21950,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 1822,
          "value": "async ({ deep, data, Go, require }) => {\n    const React = require('react');\n    const { FaNodeJs } = require(\"react-icons/fa\");\n    const c = require('@chakra-ui/react');\n    const _ = require('lodash');\n    const dpl = '@deep-foundation/perception-links';\n    const dc = '@deep-foundation/core';\n    return ({ go, handlerId, isActive, }, ref) => {\n        const View = React.useCallback(({ event }) => {\n            let value = event.mode;\n            const q = JSON.stringify(event.query, null, 2);\n            const r = JSON.stringify(event.remoteData).slice(1, 30);\n            const v = JSON.stringify(event.value || {}, null, 2);\n            const _o = { ...event.options };\n            if (_o.table === 'links')\n                delete _o.table;\n            const o = _.isEmpty(_o) ? '' : JSON.stringify(_o, null, 2);\n            const oo = o ? `, ${o}` : '';\n            if (event.mode === 'useQuery' || event.mode === 'useSubscription' || event.mode === 'select' || event.mode === 'subscribe') {\n                value = `// request to links on remote server\n\n// load links once\nawait deep.select(${q}${o});\n// { error: ${event.error ? deep.stringify(event.error) : 'null'}, data: { ${r}... } }\n\n// load and subscribe to changes\ndeep.subscribe(${q}${o})\n.subscribe({ next: (links) => {}, error: (error) => {} });\n// links // ${r}...\n\n// hint: feel free to use deep variable in browser console!\n\n${!!_o.table && `// minilinks awailable only for { table: 'links' }`}\n${!_o.table && `// request to links in local memory (minilinks)\n\n// find once\ndeep.ml.select(${q}${o});\n// Link[]...\n\n// subscribe to changes locally\ndeep.ml.subscribe(${q}${o})\n.subscribe({ next: (links) => {}, error: (error) => {} });\n// links // Link[]...\n\n// loaded with deep.select and deep.subscribe plain links\nconst Contain = deep.idLocal('@deep-foundation/core', 'Contain');\nconst results = await deep.select({\n  in: { type: Contain, from: deep.linkId, },\n  return: { contain: { in: { type: Contain } } } // get related links too\n}),\n// can be added to minilinks with:\ndeep.minilinks.apply(\n  results,\n  'name', // STRICTLY UNIQUE\n);\n// you can update links stage in minilinks, by some select/subscription flow manually\n// in react hooks deep.useSubscription and deep.useQuery apply always automatically\n// then you can simply travel by it\nconst user = deep.get(deep.linkId);\nuser.travel().out({ type: Contain }).select();\n`}`;\n            }\n            if (event.mode === 'insert') {\n                value = `// request to links on remote server\nawait deep.insert(${q}${oo});\n// { error: ${event.error ? deep.stringify(event.error) : 'null'}, data: { ${r}... } }\n\n// possible to insert multiple links at request\nawait deep.insert({\n  from: deep.idLocal('@deep-foundation/core', 'clientSupportsJs'),\n  type: deep.idLocal('@deep-foundation/core', 'Handler'),\n  to: {\n    // from/to/type as single relations can be\n    // Id of existed link or link to insert:\n    type_id: deep.idLocal('@deep-foundation/core', 'TSX'),\n    string: \\`({ deep, require }) => { var React = require('react'); return () => <div>my new component</div>; }\\`,\n  },\n  // short cut for create Contain links:\n  containerId: deep.linkId, // current user\n  name: 'my new component',\n});\n\n// hint: feel free to use deep variable in browser console!\n\n// by default only remote request\n// you can set option once\nawait deep.insert({ ... }, { local: true, ... });\n// or globally\ndeep.local = true;\n// and link will be inserted in local deep.minilinks\n// before transaction to server\n// links inserted on client side first is virtual with -123 negative id\n`;\n            }\n            if (event.mode === 'update') {\n                value = `// request to links on remote server\nawait deep.update(${q}, ${v}${oo});\n// { error: ${event.error ? deep.stringify(event.error) : 'null'}, data: { ${r}... } }\n\n// hint: feel free to use deep variable in browser console!\n\n// by default only remote request\n// you can set option once\nawait deep.update({ ... }, { ... }, { local: true, ... });\n// or globally\ndeep.local = true;\n// and link will be updated in local deep.minilinks\n// before transaction to server\n`;\n            }\n            if (event.mode === 'delete') {\n                value = `// request to links on remote server\nawait deep.delete(${q}${oo});\n// { error: ${event.error ? deep.stringify(event.error) : 'null'}, data: { ${r}... } }\n\n// hint: feel free to use deep variable in browser console!\n\n// by default only remote request\n// you can set option once\nawait deep.delete({ ... }, { ... }, { local: true, ... });\n// or globally\ndeep.local = true;\n// and link will be deleted in local deep.minilinks\n// before transaction to server\n`;\n            }\n            return React.createElement(Go.Editor, { editable: false, readOnly: true, value: value, fillSize: true });\n        }, []);\n        return React.createElement(go.On, { do: {\n                exec: (g, v, o) => go.do('view', { id: go.linkId, Component: View })\n            } },\n            React.createElement(c.Button, { w: '3em', h: '3em', variant: isActive ? 'active' : undefined, ref: ref, onClick: () => go.do('exec') },\n                React.createElement(FaNodeJs, null)));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFO0lBQ3BDLE1BQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUMvQixNQUFNLEVBQUUsUUFBUSxFQUFFLEdBQUcsT0FBTyxDQUFDLGdCQUFnQixDQUFDLENBQUM7SUFDL0MsTUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLGtCQUFrQixDQUFDLENBQUM7SUFDdEMsTUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBRTVCLE1BQU0sR0FBRyxHQUFHLG1DQUFtQyxDQUFDO0lBQ2hELE1BQU0sRUFBRSxHQUFHLHVCQUF1QixDQUFDO0lBRW5DLE9BQU8sQ0FBQyxFQUNOLEVBQUUsRUFDRixTQUFTLEVBRVQsUUFBUSxHQUNULEVBQUUsR0FBRyxFQUFFLEVBQUU7UUFDUixNQUFNLElBQUksR0FBRyxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUMsRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFO1lBQzNDLElBQUksS0FBSyxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUM7WUFFdkIsTUFBTSxDQUFDLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsS0FBSyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQztZQUMvQyxNQUFNLENBQUMsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ3ZELE1BQU0sQ0FBQyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLEtBQUssSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBRXJE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RSxDQUFDLE1BQU0sRUFBRSxTQUFTLEVBQUUsSUFBSSxFQUFFLENBQUM7YUFDbkU7WUFDQyxvQkFBQyxDQUFDLENBQUMsTUFBTSxJQUNQLENBQUMsRUFBQyxLQUFLLEVBQUMsQ0FBQyxFQUFDLEtBQUssRUFDZixPQUFPLEVBQUUsUUFBUSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFDeEMsR0FBRyxFQUFFLEdBQUcsRUFDUixPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUM7Z0JBRTVCLG9CQUFDLFFBQVEsT0FBRSxDQUNGLENBQ0wsQ0FBQztJQUNYLENBQUMsQ0FBQztBQUNKLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImFzeW5jICh7IGRlZXAsIGRhdGEsIEdvLCByZXF1aXJlIH0pID0+IHtcbiAgY29uc3QgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuICBjb25zdCB7IEZhTm9kZUpzIH0gPSByZXF1aXJlKFwicmVhY3QtaWNvbnMvZmFcIik7XG4gIGNvbnN0IGMgPSByZXF1aXJlKCdAY2hha3JhLXVpL3JlYWN0Jyk7XG4gIGNvbnN0IF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcblxuICBjb25zdCBkcGwgPSAnQGRlZXAtZm91bmRhdGlvbi9wZXJjZXB0aW9uLWxpbmtzJztcbiAgY29uc3QgZGMgPSAnQGRlZXAtZm91bmRhdGlvbi9jb3JlJztcblxuICByZXR1cm4gKHtcbiAgICBnbyxcbiAgICBoYW5kbGVySWQsXG5cbiAgICBpc0FjdGl2ZSxcbiAgfSwgcmVmKSA9PiB7XG4gICAgY29uc3QgVmlldyA9IFJlYWN0LnVzZUNhbGxiYWNrKCh7IGV2ZW50IH0pID0+IHtcbiAgICAgIGxldCB2YWx1ZSA9IGV2ZW50Lm1vZGU7XG4gIFxuICAgICAgY29uc3QgcSA9IEpTT04uc3RyaW5naWZ5KGV2ZW50LnF1ZXJ5LCBudWxsLCAyKTtcbiAgICAgIGNvbnN0IHIgPSBKU09OLnN0cmluZ2lmeShldmVudC5yZW1vdGVEYXRhKS5zbGljZSgxLDMwKTtcbiAgICAgIGNvbnN0IHYgPSBKU09OLnN0cmluZ2lmeShldmVudC52YWx1ZSB8fCB7fSwgbnVsbCwgMik7XG5cbiAgICAgIGNvbnN0IF9vID0geyAuLi5ldmVudC5vcHRpb25zIH07XG4gICAgICBpZiAoX28udGFibGUgPT09ICdsaW5rcycpIGRlbGV0ZSBfby50YWJsZTtcblxuICAgICAgY29uc3QgbyA9IF8uaXNFbXB0eShfbykgPyAnJyA6IEpTT04uc3RyaW5naWZ5KF9vLCBudWxsLCAyKTtcbiAgICAgIGNvbnN0IG9vID0gbyA/IGAsICR7b31gIDogJyc7XG4gICAgICBcbiAgICAgIGlmIChldmVudC5tb2RlID09PSAndXNlUXVlcnknIHx8IGV2ZW50Lm1vZGUgPT09ICd1c2VTdWJzY3JpcHRpb24nIHx8IGV2ZW50Lm1vZGUgPT09ICdzZWxlY3QnIHx8IGV2ZW50Lm1vZGUgPT09ICdzdWJzY3JpYmUnKSB7XG4gICAgICAgIHZhbHVlID0gYC8vIHJlcXVlc3QgdG8gbGlua3Mgb24gcmVtb3RlIHNlcnZlclxuXG4vLyBsb2FkIGxpbmtzIG9uY2VcbmF3YWl0IGRlZXAuc2VsZWN0KCR7cX0ke299KTtcbi8vIHsgZXJyb3I6ICR7ZXZlbnQuZXJyb3IgPyBkZWVwLnN0cmluZ2lmeShldmVudC5lcnJvcikgOiAnbnVsbCd9LCBkYXRhOiB7ICR7cn0uLi4gfSB9XG5cbi8vIGxvYWQgYW5kIHN1YnNjcmliZSB0byBjaGFuZ2VzXG5kZWVwLnN1YnNjcmliZSgke3F9JHtvfSlcbi5zdWJzY3JpYmUoeyBuZXh0OiAobGlua3MpID0+IHt9LCBlcnJvcjogKGVycm9yKSA9PiB7fSB9KTtcbi8vIGxpbmtzIC8vICR7cn0uLi5cblxuLy8gaGludDogZmVlbCBmcmVlIHRvIHVzZSBkZWVwIHZhcmlhYmxlIGluIGJyb3dzZXIgY29uc29sZSFcblxuJHshIV9vLnRhYmxlICYmIGAvLyBtaW5pbGlua3MgYXdhaWxhYmxlIG9ubHkgZm9yIHsgdGFibGU6ICdsaW5rcycgfWB9XG4keyFfby50YWJsZSAmJiBgLy8gcmVxdWVzdCB0byBsaW5rcyBpbiBsb2NhbCBtZW1vcnkgKG1pbmlsaW5rcylcblxuLy8gZmluZCBvbmNlXG5kZWVwLm1sLnNlbGVjdCgke3F9JHtvfSk7XG4vLyBMaW5rW10uLi5cblxuLy8gc3Vic2NyaWJlIHRvIGNoYW5nZXMgbG9jYWxseVxuZGVlcC5tbC5zdWJzY3JpYmUoJHtxfSR7b30pXG4uc3Vic2NyaWJlKHsgbmV4dDogKGxpbmtzKSA9PiB7fSwgZXJyb3I6IChlcnJvcikgPT4ge30gfSk7XG4vLyBsaW5rcyAvLyBMaW5rW10uLi5cblxuLy8gbG9hZGVkIHdpdGggZGVlcC5zZWxlY3QgYW5kIGRlZXAuc3Vic2NyaWJlIHBsYWluIGxpbmtzXG5jb25zdCBDb250YWluID0gZGVlcC5pZExvY2FsKCdAZGVlcC1mb3VuZGF0aW9uL2NvcmUnLCAnQ29udGFpbicpO1xuY29uc3QgcmVzdWx0cyA9IGF3YWl0IGRlZXAuc2VsZWN0KHtcbiAgaW46IHsgdHlwZTogQ29udGFpbiwgZnJvbTogZGVlcC5saW5rSWQsIH0sXG4gIHJldHVybjogeyBjb250YWluOiB7IGluOiB7IHR5cGU6IENvbnRhaW4gfSB9IH0gLy8gZ2V0IHJlbGF0ZWQgbGlua3MgdG9vXG59KSxcbi8vIGNhbiBiZSBhZGRlZCB0byBtaW5pbGlua3Mgd2l0aDpcbmRlZXAubWluaWxpbmtzLmFwcGx5KFxuICByZXN1bHRzLFxuICAnbmFtZScsIC8vIFNUUklDVExZIFVOSVFVRVxuKTtcbi8vIHlvdSBjYW4gdXBkYXRlIGxpbmtzIHN0YWdlIGluIG1pbmlsaW5rcywgYnkgc29tZSBzZWxlY3Qvc3Vic2NyaXB0aW9uIGZsb3cgbWFudWFsbHlcbi8vIGluIHJlYWN0IGhvb2tzIGRlZXAudXNlU3Vic2NyaXB0aW9uIGFuZCBkZWVwLnVzZVF1ZXJ5IGFwcGx5IGFsd2F5cyBhdXRvbWF0aWNhbGx5XG4vLyB0aGVuIHlvdSBjYW4gc2ltcGx5IHRyYXZlbCBieSBpdFxuY29uc3QgdXNlciA9IGRlZXAuZ2V0KGRlZXAubGlua0lkKTtcbnVzZXIudHJhdmVsKCkub3V0KHsgdHlwZTogQ29udGFpbiB9KS5zZWxlY3QoKTtcbmB9YDtcbiAgICAgIH1cbiAgXG4gICAgICBpZiAoZXZlbnQubW9kZSA9PT0gJ2luc2VydCcpIHtcbiAgICAgICAgdmFsdWUgPSBgLy8gcmVxdWVzdCB0byBsaW5rcyBvbiByZW1vdGUgc2VydmVyXG5hd2FpdCBkZWVwLmluc2VydCgke3F9JHtvb30pO1xuLy8geyBlcnJvcjogJHtldmVudC5lcnJvciA/IGRlZXAuc3RyaW5naWZ5KGV2ZW50LmVycm9yKSA6ICdudWxsJ30sIGRhdGE6IHsgJHtyfS4uLiB9IH1cblxuLy8gcG9zc2libGUgdG8gaW5zZXJ0IG11bHRpcGxlIGxpbmtzIGF0IHJlcXVlc3RcbmF3YWl0IGRlZXAuaW5zZXJ0KHtcbiAgZnJvbTogZGVlcC5pZExvY2FsKCdAZGVlcC1mb3VuZGF0aW9uL2NvcmUnLCAnY2xpZW50U3VwcG9ydHNKcycpLFxuICB0eXBlOiBkZWVwLmlkTG9jYWwoJ0BkZWVwLWZvdW5kYXRpb24vY29yZScsICdIYW5kbGVyJyksXG4gIHRvOiB7XG4gICAgLy8gZnJvbS90by90eXBlIGFzIHNpbmdsZSByZWxhdGlvbnMgY2FuIGJlXG4gICAgLy8gSWQgb2YgZXhpc3RlZCBsaW5rIG9yIGxpbmsgdG8gaW5zZXJ0OlxuICAgIHR5cGVfaWQ6IGRlZXAuaWRMb2NhbCgnQGRlZXAtZm91bmRhdGlvbi9jb3JlJywgJ1RTWCcpLFxuICAgIHN0cmluZzogXFxgKHsgZGVlcCwgcmVxdWlyZSB9KSA9PiB7IHZhciBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7IHJldHVybiAoKSA9PiA8ZGl2Pm15IG5ldyBjb21wb25lbnQ8L2Rpdj47IH1cXGAsXG4gIH0sXG4gIC8vIHNob3J0IGN1dCBmb3IgY3JlYXRlIENvbnRhaW4gbGlua3M6XG4gIGNvbnRhaW5lcklkOiBkZWVwLmxpbmtJZCwgLy8gY3VycmVudCB1c2VyXG4gIG5hbWU6ICdteSBuZXcgY29tcG9uZW50Jyxcbn0pO1xuXG4vLyBoaW50OiBmZWVsIGZyZWUgdG8gdXNlIGRlZXAgdmFyaWFibGUgaW4gYnJvd3NlciBjb25zb2xlIVxuXG4vLyBieSBkZWZhdWx0IG9ubHkgcmVtb3RlIHJlcXVlc3Rcbi8vIHlvdSBjYW4gc2V0IG9wdGlvbiBvbmNlXG5hd2FpdCBkZWVwLmluc2VydCh7IC4uLiB9LCB7IGxvY2FsOiB0cnVlLCAuLi4gfSk7XG4vLyBvciBnbG9iYWxseVxuZGVlcC5sb2NhbCA9IHRydWU7XG4vLyBhbmQgbGluayB3aWxsIGJlIGluc2VydGVkIGluIGxvY2FsIGRlZXAubWluaWxpbmtzXG4vLyBiZWZvcmUgdHJhbnNhY3Rpb24gdG8gc2VydmVyXG4vLyBsaW5rcyBpbnNlcnRlZCBvbiBjbGllbnQgc2lkZSBmaXJzdCBpcyB2aXJ0dWFsIHdpdGggLTEyMyBuZWdhdGl2ZSBpZFxuYDtcbiAgICAgIH1cbiAgXG4gICAgICBpZiAoZXZlbnQubW9kZSA9PT0gJ3VwZGF0ZScpIHtcbiAgICAgICAgdmFsdWUgPSBgLy8gcmVxdWVzdCB0byBsaW5rcyBvbiByZW1vdGUgc2VydmVyXG5hd2FpdCBkZWVwLnVwZGF0ZSgke3F9LCAke3Z9JHtvb30pO1xuLy8geyBlcnJvcjogJHtldmVudC5lcnJvciA/IGRlZXAuc3RyaW5naWZ5KGV2ZW50LmVycm9yKSA6ICdudWxsJ30sIGRhdGE6IHsgJHtyfS4uLiB9IH1cblxuLy8gaGludDogZmVlbCBmcmVlIHRvIHVzZSBkZWVwIHZhcmlhYmxlIGluIGJyb3dzZXIgY29uc29sZSFcblxuLy8gYnkgZGVmYXVsdCBvbmx5IHJlbW90ZSByZXF1ZXN0XG4vLyB5b3UgY2FuIHNldCBvcHRpb24gb25jZVxuYXdhaXQgZGVlcC51cGRhdGUoeyAuLi4gfSwgeyAuLi4gfSwgeyBsb2NhbDogdHJ1ZSwgLi4uIH0pO1xuLy8gb3IgZ2xvYmFsbHlcbmRlZXAubG9jYWwgPSB0cnVlO1xuLy8gYW5kIGxpbmsgd2lsbCBiZSB1cGRhdGVkIGluIGxvY2FsIGRlZXAubWluaWxpbmtzXG4vLyBiZWZvcmUgdHJhbnNhY3Rpb24gdG8gc2VydmVyXG5gO1xuICAgICAgfVxuICBcbiAgICAgIGlmIChldmVudC5tb2RlID09PSAnZGVsZXRlJykge1xuICAgICAgICB2YWx1ZSA9IGAvLyByZXF1ZXN0IHRvIGxpbmtzIG9uIHJlbW90ZSBzZXJ2ZXJcbmF3YWl0IGRlZXAuZGVsZXRlKCR7cX0ke29vfSk7XG4vLyB7IGVycm9yOiAke2V2ZW50LmVycm9yID8gZGVlcC5zdHJpbmdpZnkoZXZlbnQuZXJyb3IpIDogJ251bGwnfSwgZGF0YTogeyAke3J9Li4uIH0gfVxuXG4vLyBoaW50OiBmZWVsIGZyZWUgdG8gdXNlIGRlZXAgdmFyaWFibGUgaW4gYnJvd3NlciBjb25zb2xlIVxuXG4vLyBieSBkZWZhdWx0IG9ubHkgcmVtb3RlIHJlcXVlc3Rcbi8vIHlvdSBjYW4gc2V0IG9wdGlvbiBvbmNlXG5hd2FpdCBkZWVwLmRlbGV0ZSh7IC4uLiB9LCB7IC4uLiB9LCB7IGxvY2FsOiB0cnVlLCAuLi4gfSk7XG4vLyBvciBnbG9iYWxseVxuZGVlcC5sb2NhbCA9IHRydWU7XG4vLyBhbmQgbGluayB3aWxsIGJlIGRlbGV0ZWQgaW4gbG9jYWwgZGVlcC5taW5pbGlua3Ncbi8vIGJlZm9yZSB0cmFuc2FjdGlvbiB0byBzZXJ2ZXJcbmA7XG4gICAgICB9XG4gIFxuICAgICAgcmV0dXJuIDxHby5FZGl0b3IgZWRpdGFibGU9e2ZhbHNlfSByZWFkT25seSB2YWx1ZT17dmFsdWV9IGZpbGxTaXplLz47XG4gICAgfSwgW10pO1xuXG4gICAgcmV0dXJuIDxnby5PbiBkbz17e1xuICAgICAgZXhlYzogKGcsdixvKSA9PiBnby5kbygndmlldycsIHsgaWQ6IGdvLmxpbmtJZCwgQ29tcG9uZW50OiBWaWV3IH0pKSxcbiAgICB9fT5cbiAgICAgIDxjLkJ1dHRvblxuICAgICAgICB3PSczZW0nIGg9JzNlbSdcbiAgICAgICAgdmFyaWFudD17aXNBY3RpdmUgPyAnYWN0aXZlJyA6IHVuZGVmaW5lZH1cbiAgICAgICAgcmVmPXtyZWZ9XG4gICAgICAgIG9uQ2xpY2s9eygpID0+IGdvLmRvKCdleGVjJyl9XG4gICAgICA+XG4gICAgICAgIDxGYU5vZGVKcy8+XG4gICAgICA8L2MuQnV0dG9uPlxuICAgIDwvZ28uT24+O1xuICB9O1xufSJdfQ==",
          "link_id": 21950
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 21951,
      "src_id": 21925,
      "handler_id": 21938,
      "execution_provider_id": 33,
      "isolation_provider_id": 144,
      "dist": {
        "id": 21951,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 1823,
          "value": "async ({ deep, data, Go, require }) => {\n    const React = require('react');\n    const { FaReact } = require(\"react-icons/fa\");\n    const c = require('@chakra-ui/react');\n    const _ = require('lodash');\n    const dpl = '@deep-foundation/perception-links';\n    const dc = '@deep-foundation/core';\n    return ({ go, handlerId, isActive, }, ref) => {\n        const View = React.useCallback(({ event }) => {\n            let value = event.mode;\n            const q = JSON.stringify(event.query, null, 2);\n            const r = JSON.stringify(event.remoteData).slice(1, 30);\n            const v = JSON.stringify(event.value || {}, null, 2);\n            const _o = { ...event.options };\n            if (_o.table === 'links')\n                delete _o.table;\n            const o = _.isEmpty(_o) ? '' : JSON.stringify(_o, null, 2);\n            const oo = o ? `, ${o}` : '';\n            if (event.mode === 'useQuery' || event.mode === 'useSubscription' || event.mode === 'select' || event.mode === 'subscribe') {\n                value = `// basically deep.select and deep.subscribe returns plain data\n// but deep.useQuery and deep.useSubscriptions always\n// apply synced from server to deep.minilinks local memory\n\n// load links once\nconst { data } = deep.useQuery(${q}${o});\n// { error: ${event.error ? deep.stringify(event.error) : 'null'}, data: { ${r}... }, loading: false }\n\n// load and subscribe to reactive links\nconst { data } = deep.useSubscription(${q}${o})\n// { error: ${event.error ? deep.stringify(event.error) : 'null'}, data: { ${r}... }, loading: false }\n\n// equal queries can be used in local memory\n\n// find links once\nconst data = deep.useLocalSubscription(${q}${o});\n// data // Link[];\n\n// find links with reactive subscription\nconst data = deep.useLocalSubscription(${q}${o});\n// data // Link[];\n\n// links fetched from hooks already exists in minilinks and\n// related each other\n// you can travel by it simply:\nhandler.to.value // { value: \\`my new component\\` }\n\n// you can get reactive links from static links or ids\nconst [user, handler] = deep.useLinks(deep.linkId, notReactiveLink);\n\n// pretty handy use traveler:\nconst data = deep.useSubscription(myLink.travel().out({ type: Contain }).to().query());\n`;\n            }\n            if (event.mode === 'insert') {\n                value = `// hints for react\n\n// if not need to await result\nReact.useEffect(() => {\n  deep.insert(${q}${oo});\n}, []);\n\n// if need to await\nReact.useEffect(() => { (async () => {\n  deep.insert(${q}${oo});\n})() }, []);\n\n<c.Box onChange={async () => {\n  await deep.insert(${q}${oo});\n}}>button</Button>`;\n            }\n            if (event.mode === 'update') {\n                value = `// hints for react\n\n// if not need to await result\nReact.useEffect(() => {\n  deep.update(${q}, ${v}${oo});\n}, []);\n\n// if need to await\nReact.useEffect(() => { (async () => {\n  deep.update(${q}, ${v}${oo});\n})() }, []);\n\n<c.Box onChange={async () => {\n  await deep.update(${q}, ${v}${oo});\n}}>button</Button>`;\n            }\n            if (event.mode === 'delete') {\n                value = `// hints for react\n\n// if not need to await result\nReact.useEffect(() => {\n  deep.delete(${q}${oo});\n}, []);\n\n// if need to await\nReact.useEffect(() => { (async () => {\n  deep.delete(${q}${oo});\n})() }, []);\n\n<c.Box onChange={async () => {\n  await deep.delete(${q}${oo});\n}}>button</Button>`;\n            }\n            return React.createElement(Go.Editor, { editable: false, readOnly: true, value: value, fillSize: true });\n        }, []);\n        return React.createElement(go.On, { do: {\n                exec: (g, v, o) => go.do('view', { id: go.linkId, Component: View })\n            } },\n            React.createElement(c.Button, { w: '3em', h: '3em', variant: isActive ? 'active' : undefined, ref: ref, onClick: () => go.do('exec') },\n                React.createElement(FaReact, null)));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFO0lBQ3BDLE1BQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUMvQixNQUFNLEVBQUUsT0FBTyxFQUFFLEdBQUcsT0FBTyxDQUFDLGdCQUFnQixDQUFDLENBQUM7SUFDOUMsTUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLGtCQUFrQixDQUFDLENBQUM7SUFDdEMsTUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBRTVCLE1BQU0sR0FBRyxHQUFHLG1DQUFtQyxDQUFDO0lBQ2hELE1BQU0sRUFBRSxHQUFHLHVCQUF1QixDQUFDO0lBRW5DLE9BQU8sQ0FBQyxFQUNOLEVBQUUsRUFDRixTQUFTLEVBRVQsUUFBUSxHQUNULEVBQUUsR0FBRyxFQUFFLEVBQUU7UUFDUixNQUFNLElBQUksR0FBRyxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUMsRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFO1lBQzNDLElBQUksS0FBSyxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUM7WUFFdkIsTUFBTSxDQUFDLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsS0FBSyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQztZQUMvQyxNQUFNLENBQUMsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ3ZELE1BQU0sQ0FBQyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLEtBQUssSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBRXJE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RUFDeEMsR0FBRyxFQUFFLEdBQUcsRUFDUixPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUM7Z0JBRTVCLG9CQUFDLE9BQU8sT0FBRSxDQUNELENBQ0wsQ0FBQztJQUNYLENBQUMsQ0FBQztBQUNKLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImFzeW5jICh7IGRlZXAsIGRhdGEsIEdvLCByZXF1aXJlIH0pID0+IHtcbiAgY29uc3QgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuICBjb25zdCB7IEZhUmVhY3QgfSA9IHJlcXVpcmUoXCJyZWFjdC1pY29ucy9mYVwiKTtcbiAgY29uc3QgYyA9IHJlcXVpcmUoJ0BjaGFrcmEtdWkvcmVhY3QnKTtcbiAgY29uc3QgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xuXG4gIGNvbnN0IGRwbCA9ICdAZGVlcC1mb3VuZGF0aW9uL3BlcmNlcHRpb24tbGlua3MnO1xuICBjb25zdCBkYyA9ICdAZGVlcC1mb3VuZGF0aW9uL2NvcmUnO1xuXG4gIHJldHVybiAoe1xuICAgIGdvLFxuICAgIGhhbmRsZXJJZCxcblxuICAgIGlzQWN0aXZlLFxuICB9LCByZWYpID0+IHtcbiAgICBjb25zdCBWaWV3ID0gUmVhY3QudXNlQ2FsbGJhY2soKHsgZXZlbnQgfSkgPT4ge1xuICAgICAgbGV0IHZhbHVlID0gZXZlbnQubW9kZTtcbiAgXG4gICAgICBjb25zdCBxID0gSlNPTi5zdHJpbmdpZnkoZXZlbnQucXVlcnksIG51bGwsIDIpO1xuICAgICAgY29uc3QgciA9IEpTT04uc3RyaW5naWZ5KGV2ZW50LnJlbW90ZURhdGEpLnNsaWNlKDEsMzApO1xuICAgICAgY29uc3QgdiA9IEpTT04uc3RyaW5naWZ5KGV2ZW50LnZhbHVlIHx8IHt9LCBudWxsLCAyKTtcblxuICAgICAgY29uc3QgX28gPSB7IC4uLmV2ZW50Lm9wdGlvbnMgfTtcbiAgICAgIGlmIChfby50YWJsZSA9PT0gJ2xpbmtzJykgZGVsZXRlIF9vLnRhYmxlO1xuXG4gICAgICBjb25zdCBvID0gXy5pc0VtcHR5KF9vKSA/ICcnIDogSlNPTi5zdHJpbmdpZnkoX28sIG51bGwsIDIpO1xuICAgICAgY29uc3Qgb28gPSBvID8gYCwgJHtvfWAgOiAnJztcbiAgICAgIFxuICAgICAgaWYgKGV2ZW50Lm1vZGUgPT09ICd1c2VRdWVyeScgfHwgZXZlbnQubW9kZSA9PT0gJ3VzZVN1YnNjcmlwdGlvbicgfHwgZXZlbnQubW9kZSA9PT0gJ3NlbGVjdCcgfHwgZXZlbnQubW9kZSA9PT0gJ3N1YnNjcmliZScpIHtcbiAgICAgICAgdmFsdWUgPSBgLy8gYmFzaWNhbGx5IGRlZXAuc2VsZWN0IGFuZCBkZWVwLnN1YnNjcmliZSByZXR1cm5zIHBsYWluIGRhdGFcbi8vIGJ1dCBkZWVwLnVzZVF1ZXJ5IGFuZCBkZWVwLnVzZVN1YnNjcmlwdGlvbnMgYWx3YXlzXG4vLyBhcHBseSBzeW5jZWQgZnJvbSBzZXJ2ZXIgdG8gZGVlcC5taW5pbGlua3MgbG9jYWwgbWVtb3J5XG5cbi8vIGxvYWQgbGlua3Mgb25jZVxuY29uc3QgeyBkYXRhIH0gPSBkZWVwLnVzZVF1ZXJ5KCR7cX0ke299KTtcbi8vIHsgZXJyb3I6ICR7ZXZlbnQuZXJyb3IgPyBkZWVwLnN0cmluZ2lmeShldmVudC5lcnJvcikgOiAnbnVsbCd9LCBkYXRhOiB7ICR7cn0uLi4gfSwgbG9hZGluZzogZmFsc2UgfVxuXG4vLyBsb2FkIGFuZCBzdWJzY3JpYmUgdG8gcmVhY3RpdmUgbGlua3NcbmNvbnN0IHsgZGF0YSB9ID0gZGVlcC51c2VTdWJzY3JpcHRpb24oJHtxfSR7b30pXG4vLyB7IGVycm9yOiAke2V2ZW50LmVycm9yID8gZGVlcC5zdHJpbmdpZnkoZXZlbnQuZXJyb3IpIDogJ251bGwnfSwgZGF0YTogeyAke3J9Li4uIH0sIGxvYWRpbmc6IGZhbHNlIH1cblxuLy8gZXF1YWwgcXVlcmllcyBjYW4gYmUgdXNlZCBpbiBsb2NhbCBtZW1vcnlcblxuLy8gZmluZCBsaW5rcyBvbmNlXG5jb25zdCBkYXRhID0gZGVlcC51c2VMb2NhbFN1YnNjcmlwdGlvbigke3F9JHtvfSk7XG4vLyBkYXRhIC8vIExpbmtbXTtcblxuLy8gZmluZCBsaW5rcyB3aXRoIHJlYWN0aXZlIHN1YnNjcmlwdGlvblxuY29uc3QgZGF0YSA9IGRlZXAudXNlTG9jYWxTdWJzY3JpcHRpb24oJHtxfSR7b30pO1xuLy8gZGF0YSAvLyBMaW5rW107XG5cbi8vIGxpbmtzIGZldGNoZWQgZnJvbSBob29rcyBhbHJlYWR5IGV4aXN0cyBpbiBtaW5pbGlua3MgYW5kXG4vLyByZWxhdGVkIGVhY2ggb3RoZXJcbi8vIHlvdSBjYW4gdHJhdmVsIGJ5IGl0IHNpbXBseTpcbmhhbmRsZXIudG8udmFsdWUgLy8geyB2YWx1ZTogXFxgbXkgbmV3IGNvbXBvbmVudFxcYCB9XG5cbi8vIHlvdSBjYW4gZ2V0IHJlYWN0aXZlIGxpbmtzIGZyb20gc3RhdGljIGxpbmtzIG9yIGlkc1xuY29uc3QgW3VzZXIsIGhhbmRsZXJdID0gZGVlcC51c2VMaW5rcyhkZWVwLmxpbmtJZCwgbm90UmVhY3RpdmVMaW5rKTtcblxuLy8gcHJldHR5IGhhbmR5IHVzZSB0cmF2ZWxlcjpcbmNvbnN0IGRhdGEgPSBkZWVwLnVzZVN1YnNjcmlwdGlvbihteUxpbmsudHJhdmVsKCkub3V0KHsgdHlwZTogQ29udGFpbiB9KS50bygpLnF1ZXJ5KCkpO1xuYDtcbiAgICAgIH1cbiAgXG4gICAgICBpZiAoZXZlbnQubW9kZSA9PT0gJ2luc2VydCcpIHtcbiAgICAgICAgdmFsdWUgPSBgLy8gaGludHMgZm9yIHJlYWN0XG5cbi8vIGlmIG5vdCBuZWVkIHRvIGF3YWl0IHJlc3VsdFxuUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgZGVlcC5pbnNlcnQoJHtxfSR7b299KTtcbn0sIFtdKTtcblxuLy8gaWYgbmVlZCB0byBhd2FpdFxuUmVhY3QudXNlRWZmZWN0KCgpID0+IHsgKGFzeW5jICgpID0+IHtcbiAgZGVlcC5pbnNlcnQoJHtxfSR7b299KTtcbn0pKCkgfSwgW10pO1xuXG48Yy5Cb3ggb25DaGFuZ2U9e2FzeW5jICgpID0+IHtcbiAgYXdhaXQgZGVlcC5pbnNlcnQoJHtxfSR7b299KTtcbn19PmJ1dHRvbjwvQnV0dG9uPmBcbiAgICAgIH1cbiAgXG4gICAgICBpZiAoZXZlbnQubW9kZSA9PT0gJ3VwZGF0ZScpIHtcbiAgICAgICAgdmFsdWUgPSBgLy8gaGludHMgZm9yIHJlYWN0XG5cbi8vIGlmIG5vdCBuZWVkIHRvIGF3YWl0IHJlc3VsdFxuUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgZGVlcC51cGRhdGUoJHtxfSwgJHt2fSR7b299KTtcbn0sIFtdKTtcblxuLy8gaWYgbmVlZCB0byBhd2FpdFxuUmVhY3QudXNlRWZmZWN0KCgpID0+IHsgKGFzeW5jICgpID0+IHtcbiAgZGVlcC51cGRhdGUoJHtxfSwgJHt2fSR7b299KTtcbn0pKCkgfSwgW10pO1xuXG48Yy5Cb3ggb25DaGFuZ2U9e2FzeW5jICgpID0+IHtcbiAgYXdhaXQgZGVlcC51cGRhdGUoJHtxfSwgJHt2fSR7b299KTtcbn19PmJ1dHRvbjwvQnV0dG9uPmBcbiAgICAgIH1cbiAgXG4gICAgICBpZiAoZXZlbnQubW9kZSA9PT0gJ2RlbGV0ZScpIHtcbiAgICAgICAgdmFsdWUgPSBgLy8gaGludHMgZm9yIHJlYWN0XG5cbi8vIGlmIG5vdCBuZWVkIHRvIGF3YWl0IHJlc3VsdFxuUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgZGVlcC5kZWxldGUoJHtxfSR7b299KTtcbn0sIFtdKTtcblxuLy8gaWYgbmVlZCB0byBhd2FpdFxuUmVhY3QudXNlRWZmZWN0KCgpID0+IHsgKGFzeW5jICgpID0+IHtcbiAgZGVlcC5kZWxldGUoJHtxfSR7b299KTtcbn0pKCkgfSwgW10pO1xuXG48Yy5Cb3ggb25DaGFuZ2U9e2FzeW5jICgpID0+IHtcbiAgYXdhaXQgZGVlcC5kZWxldGUoJHtxfSR7b299KTtcbn19PmJ1dHRvbjwvQnV0dG9uPmBcbiAgICAgIH1cbiAgXG4gICAgICByZXR1cm4gPEdvLkVkaXRvciBlZGl0YWJsZT17ZmFsc2V9IHJlYWRPbmx5IHZhbHVlPXt2YWx1ZX0gZmlsbFNpemUvPjtcbiAgICB9LCBbXSk7XG5cbiAgICByZXR1cm4gPGdvLk9uIGRvPXt7XG4gICAgICBleGVjOiAoZyx2LG8pID0+IGdvLmRvKCd2aWV3JywgeyBpZDogZ28ubGlua0lkLCBDb21wb25lbnQ6IFZpZXcgfSkpLFxuICAgIH19PlxuICAgICAgPGMuQnV0dG9uXG4gICAgICAgIHc9JzNlbScgaD0nM2VtJ1xuICAgICAgICB2YXJpYW50PXtpc0FjdGl2ZSA/ICdhY3RpdmUnIDogdW5kZWZpbmVkfVxuICAgICAgICByZWY9e3JlZn1cbiAgICAgICAgb25DbGljaz17KCkgPT4gZ28uZG8oJ2V4ZWMnKX1cbiAgICAgID5cbiAgICAgICAgPEZhUmVhY3QvPlxuICAgICAgPC9jLkJ1dHRvbj5cbiAgICA8L2dvLk9uPjtcbiAgfTtcbn0iXX0=",
          "link_id": 21951
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    },
    {
      "dist_id": 22432,
      "src_id": 22426,
      "handler_id": 22430,
      "execution_provider_id": 33,
      "isolation_provider_id": 144,
      "dist": {
        "id": 22432,
        "type_id": 30,
        "from_id": 0,
        "to_id": 0,
        "value": {
          "id": 1828,
          "value": "({ deep, data, require, Go }) => {\n    const React = require('react');\n    const c = require('@chakra-ui/react');\n    const _ = require('lodash');\n    const moment = require('moment');\n    const { useDebounceCallback } = require('@react-hook/debounce');\n    var dpl = '@deep-foundation/perception-links';\n    var dc = '@deep-foundation/core';\n    const Stack = deep.idLocal(dpl, 'Stack');\n    const Queries = deep.idLocal(dpl, 'Queries');\n    const Compatable = deep.idLocal(dpl, 'Compatable');\n    const Handler = deep.idLocal(dc, 'Handler');\n    const QueriesClient = deep.idLocal(dpl, 'QueriesClient');\n    return ({ go, event, children, }, ref) => {\n        const { data: views } = deep.useQuery({\n            type_id: Handler,\n            out: {\n                type_id: Compatable,\n                to_id: Queries,\n            },\n        });\n        const ViewItem = React.useMemo(() => React.memo(({ link: handler, isActive }) => {\n            return React.createElement(Go.Handler, { handlerId: handler.id, event: event, isActive: isActive });\n        }), []);\n        const [o, setO] = React.useState();\n        React.useEffect(() => go.set(Stack), []);\n        return React.createElement(go.On, { do: {\n                view: (g, v, o) => setO(o),\n            } },\n            React.createElement(c.Flex, { ref: ref, direction: 'column', h: '100%' },\n                React.createElement(c.Box, { h: '3em' },\n                    React.createElement(go.Provider, { linkId: Stack },\n                        React.createElement(go.Component, { path: [dpl, 'Stack'], direction: 'horizontal', links: views, Item: ViewItem }))),\n                typeof (o?.Component) === 'function' && [React.createElement(go.Provider, { key: o.id, linkId: o.id },\n                        React.createElement(c.Box, { flex: '1', position: 'relative' },\n                            React.createElement(o.Component, { event: event })))]));\n    };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxDQUFDLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRTtJQUM5QixNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7SUFFL0IsTUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLGtCQUFrQixDQUFDLENBQUM7SUFDdEMsTUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQzVCLE1BQU0sTUFBTSxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUNqQyxNQUFNLEVBQUUsbUJBQW1CLEVBQUUsR0FBRyxPQUFPLENBQUMsc0JBQXNCLENBQUMsQ0FBQztJQUVoRSxJQUFJLEdBQUcsR0FBRyxtQ0FBbUMsQ0FBQztJQUM5QyxJQUFJLEVBQUUsR0FBRyx1QkFBdUIsQ0FBQztJQUVqQyxNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxPQUFPLENBQUMsQ0FBQztJQUN6QyxNQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxTQUFTLENBQUMsQ0FBQztJQUM3QyxNQUFNLFVBQVUsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxZQUFZLENBQUMsQ0FBQztJQUNuRCxNQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUUsRUFBRSxTQUFTLENBQUMsQ0FBQztJQUM1QyxNQUFNLGFBQWEsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxlQUFlLENBQUMsQ0FBQztJQUV6RCxPQUFPLENBQUMsRUFDTixFQUFFLEVBRUYsS0FBSyxFQUVMLFFBQVEsR0FDVCxFQUFFLEdBQUcsRUFBRSxFQUFFO1FBQ1IsTUFBTSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDO1lBQ3BDLE9BQU8sRUFBRSxPQUFPO1lBQ2hCLEdBQUcsRUFBRTtnQkFDSCxPQUFPLEVBQUUsVUFBVTtnQkFDbkIsS0FBSyxFQUFFLE9BQU87YUFDZjtTQUNGLENBQUMsQ0FBQztRQUVILE1BQU0sUUFBUSxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxRQUFRLEVBQUUsRUFBRSxFQUFFO1lBQzlFLE9BQU8sb0JBQUMsRUFBRSxDQUFDLE9BQU8sSUFBQyxTQUFTLEVBQUUsT0FBTyxDQUFDLEVBQUUsRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLFFBQVEsRUFBRSxRQUFRLEdBQUcsQ0FBQztRQUNoRixDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUVSLE1BQU0sQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLEdBQUcsS0FBSyxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBQ25DLEtBQUssQ0FBQyxTQUFTLENBQUMsR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUV6QyxPQUFPLG9CQUFDLEVBQUUsQ0FBQyxFQUFFLElBQ1gsRUFBRSxFQUFFO2dCQUNGLElBQUksRUFBRSxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO2FBQ3pCO1lBRUQsb0JBQUMsQ0FBQyxDQUFDLElBQUksSUFBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLFNBQVMsRUFBQyxRQUFRLEVBQUMsQ0FBQyxFQUFDLE1BQU07Z0JBQzNDLG9CQUFDLENBQUMsQ0FBQyxHQUFHLElBQUMsQ0FBQyxFQUFDLEtBQUs7b0JBQUMsb0JBQUMsRUFBRSxDQUFDLFFBQVEsSUFBQyxNQUFNLEVBQUUsS0FBSzt3QkFDdkMsb0JBQUMsRUFBRSxDQUFDLFNBQVMsSUFBQyxJQUFJLEVBQUUsQ0FBQyxHQUFHLEVBQUUsT0FBTyxDQUFDLEVBQUUsU0FBUyxFQUFDLFlBQVksRUFBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxRQUFRLEdBQUcsQ0FDOUUsQ0FBUTtnQkFDckIsT0FBTSxDQUFDLENBQUMsRUFBRSxTQUFTLENBQUMsS0FBSyxVQUFVLElBQUksQ0FBQyxvQkFBQyxFQUFFLENBQUMsUUFBUSxJQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLE1BQU0sRUFBRSxDQUFDLENBQUMsRUFBRTt3QkFDM0Usb0JBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBQyxJQUFJLEVBQUMsR0FBRyxFQUFDLFFBQVEsRUFBQyxVQUFVOzRCQUNqQyxvQkFBQyxDQUFDLENBQUMsU0FBUyxJQUFDLEtBQUssRUFBRSxLQUFLLEdBQUcsQ0FDdEIsQ0FDSSxDQUFDLENBQ1IsQ0FDSCxDQUFDO0lBQ1gsQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiKHsgZGVlcCwgZGF0YSwgcmVxdWlyZSwgR28gfSkgPT4ge1xuICBjb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG4gIFxuICBjb25zdCBjID0gcmVxdWlyZSgnQGNoYWtyYS11aS9yZWFjdCcpO1xuICBjb25zdCBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XG4gIGNvbnN0IG1vbWVudCA9IHJlcXVpcmUoJ21vbWVudCcpO1xuICBjb25zdCB7IHVzZURlYm91bmNlQ2FsbGJhY2sgfSA9IHJlcXVpcmUoJ0ByZWFjdC1ob29rL2RlYm91bmNlJyk7XG5cbiAgdmFyIGRwbCA9ICdAZGVlcC1mb3VuZGF0aW9uL3BlcmNlcHRpb24tbGlua3MnO1xuICB2YXIgZGMgPSAnQGRlZXAtZm91bmRhdGlvbi9jb3JlJztcblxuICBjb25zdCBTdGFjayA9IGRlZXAuaWRMb2NhbChkcGwsICdTdGFjaycpO1xuICBjb25zdCBRdWVyaWVzID0gZGVlcC5pZExvY2FsKGRwbCwgJ1F1ZXJpZXMnKTtcbiAgY29uc3QgQ29tcGF0YWJsZSA9IGRlZXAuaWRMb2NhbChkcGwsICdDb21wYXRhYmxlJyk7XG4gIGNvbnN0IEhhbmRsZXIgPSBkZWVwLmlkTG9jYWwoZGMsICdIYW5kbGVyJyk7XG4gIGNvbnN0IFF1ZXJpZXNDbGllbnQgPSBkZWVwLmlkTG9jYWwoZHBsLCAnUXVlcmllc0NsaWVudCcpO1xuXG4gIHJldHVybiAoe1xuICAgIGdvLFxuXG4gICAgZXZlbnQsXG5cbiAgICBjaGlsZHJlbixcbiAgfSwgcmVmKSA9PiB7XG4gICAgY29uc3QgeyBkYXRhOiB2aWV3cyB9ID0gZGVlcC51c2VRdWVyeSh7XG4gICAgICB0eXBlX2lkOiBIYW5kbGVyLFxuICAgICAgb3V0OiB7XG4gICAgICAgIHR5cGVfaWQ6IENvbXBhdGFibGUsXG4gICAgICAgIHRvX2lkOiBRdWVyaWVzLFxuICAgICAgfSxcbiAgICB9KTtcbiAgXG4gICAgY29uc3QgVmlld0l0ZW0gPSBSZWFjdC51c2VNZW1vKCgpID0+IFJlYWN0Lm1lbW8oKHsgbGluazogaGFuZGxlciwgaXNBY3RpdmUgfSkgPT4ge1xuICAgICAgcmV0dXJuIDxHby5IYW5kbGVyIGhhbmRsZXJJZD17aGFuZGxlci5pZH0gZXZlbnQ9e2V2ZW50fSBpc0FjdGl2ZT17aXNBY3RpdmV9Lz47XG4gICAgfSksIFtdKTtcblxuICAgIGNvbnN0IFtvLCBzZXRPXSA9IFJlYWN0LnVzZVN0YXRlKCk7XG4gICAgUmVhY3QudXNlRWZmZWN0KCgpID0+IGdvLnNldChTdGFjayksIFtdKTtcblxuICAgIHJldHVybiA8Z28uT25cbiAgICAgIGRvPXt7XG4gICAgICAgIHZpZXc6IChnLHYsbykgPT4gc2V0TyhvKSxcbiAgICAgIH19XG4gICAgPlxuICAgICAgPGMuRmxleCByZWY9e3JlZn0gZGlyZWN0aW9uPSdjb2x1bW4nIGg9JzEwMCUnPlxuICAgICAgICA8Yy5Cb3ggaD0nM2VtJz48Z28uUHJvdmlkZXIgbGlua0lkPXtTdGFja30+XG4gICAgICAgICAgPGdvLkNvbXBvbmVudCBwYXRoPXtbZHBsLCAnU3RhY2snXX0gZGlyZWN0aW9uPSdob3Jpem9udGFsJyBsaW5rcz17dmlld3N9IEl0ZW09e1ZpZXdJdGVtfS8+XG4gICAgICAgIDwvZ28uUHJvdmlkZXI+PC9jLkJveD5cbiAgICAgICAge3R5cGVvZihvPy5Db21wb25lbnQpID09PSAnZnVuY3Rpb24nICYmIFs8Z28uUHJvdmlkZXIga2V5PXtvLmlkfSBsaW5rSWQ9e28uaWR9PlxuICAgICAgICAgIDxjLkJveCBmbGV4PScxJyBwb3NpdGlvbj0ncmVsYXRpdmUnPlxuICAgICAgICAgICAgPG8uQ29tcG9uZW50IGV2ZW50PXtldmVudH0vPlxuICAgICAgICAgIDwvYy5Cb3g+XG4gICAgICAgIDwvZ28uUHJvdmlkZXI+XX1cbiAgICAgIDwvYy5GbGV4PlxuICAgIDwvZ28uT24+O1xuICB9O1xufSJdfQ==",
          "link_id": 22432
        },
        "__typename": "links"
      },
      "__typename": "handlers"
    }
  ]
}